/*! For license information please see front.js.LICENSE.txt */
(()=>{var __webpack_modules__={4420:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";var lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2611),lodash__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__),xadmin_ui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5907),xadmin_ui__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(xadmin_ui__WEBPACK_IMPORTED_MODULE_2__),xadmin__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3078),xadmin__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(xadmin__WEBPACK_IMPORTED_MODULE_3__);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var departmentFilter=function(e){var t=[];return e&&e.length>0&&e.map((function(n){var r=_objectSpread({},n);r.icon=React.createElement(Icon,{svg:__webpack_require__(2233)}),r.parent&&r.parent.id?_.includes(e.map((function(e){return e.id})),r.parent.id)?t.push(r):t.push(_objectSpread(_objectSpread({},r),{},{parent:{}})):t.push(r)})),t},formatDepartment=function(e){var t=departmentFilter(e),n=t.reduce((function(e,t){return _objectSpread(_objectSpread({},e),{},_defineProperty({},t.id,t))}),{});return function(e,t){return e.map((function(e){if(e&&e.parent&&e.parent.id){var n=t[e.parent.id].child||[];t[e.parent.id].child=_.uniqBy([].concat(_toConsumableArray(n),[e]),"id")}})),Object.keys(t).map((function(e){return t[e]})).filter((function(e){return!(e&&e.parent&&e.parent.id)}))}(t,n)},formatModel=function(e){var t=function e(t,n){if(t&&t.relations&&t.relations.child&&t.relations.child.length>0){var r=t.relations.child.map((function(e){return n[e.id||e._id]})).filter(Boolean).map((function(t){return e(t,n)}));return _objectSpread(_objectSpread({},t),{},{child:r})}return t},n=function(e,n){return e.map((function(e){return e&&e.relations&&e.relations.child&&!_.isEmpty(e.relations.child)?t(e,n):e}))};return function(e){if(e&&!_.isEmpty(e)){var t=e.filter((function(e){return!(e&&e.relations&&e.relations.parent&&e.relations.parent.length>0)})),r=e.reduce((function(e,t){return _objectSpread(_objectSpread({},e),{},_defineProperty({},t.id||t._id,t))}),{});return n(t,r)}}(e)},getFormValues=function(e){var t=null;try{t=use("form",(function(t){var n={};for(var r in t.values){var i,a;r!==e.key&&(null!==(i=t.values[r])&&void 0!==i&&i[0]&&_.isObject(null===(a=t.values[r])||void 0===a?void 0:a[0])?n[r]=t.values[r].map((function(t){return _.omit(t,e.key)})):n[r]=t.values[r])}return{values:n}})).values}catch(e){}return t},useScriptVal=function useScriptVal(_ref){var _props$relateSchema,_props$record,value=_ref.value,values=_ref.values,props=_ref.props,getScriptVal;eval(null===(_props$relateSchema=props.relateSchema)||void 0===_props$relateSchema?void 0:_props$relateSchema.fieldScript);var result=value;return getScriptVal&&(result=getScriptVal({values,record:null!==(_props$record=props.record)&&void 0!==_props$record?_props$record:{},api,app})),result}},8249:function(e,t,n){var r;e.exports=(r=r||function(e,t){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==n.g&&n.g.crypto&&(r=n.g.crypto),!r)try{r=n(2480)}catch(e){}var i=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),o={},l=o.lib={},c=l.Base={extend:function(e){var t=a(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=l.WordArray=c.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var a=0;a<i;a++){var o=n[a>>>2]>>>24-a%4*8&255;t[r+a>>>2]|=o<<24-(r+a)%4*8}else for(var l=0;l<i;l+=4)t[r+l>>>2]=n[l>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(i());return new u.init(t,e)}}),s=o.enc={},d=s.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var a=t[i>>>2]>>>24-i%4*8&255;r.push((a>>>4).toString(16)),r.push((15&a).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new u.init(n,t/2)}},p=s.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var a=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(a))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new u.init(n,t)}},m=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},f=l.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=m.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,i=r.words,a=r.sigBytes,o=this.blockSize,l=a/(4*o),c=(l=t?e.ceil(l):e.max((0|l)-this._minBufferSize,0))*o,s=e.min(4*c,a);if(c){for(var d=0;d<c;d+=o)this._doProcessBlock(i,d);n=i.splice(0,c),r.sigBytes-=s}return new u.init(n,s)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),h=(l.Hasher=f.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}}),o.algo={});return o}(Math),r)},2783:function(e,t,n){var r,i,a,o,l,c,u,s;e.exports=(r=n(8249),a=(i=r).lib,o=a.WordArray,l=a.Hasher,c=i.algo,u=[],s=c.SHA1=l.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],a=n[2],o=n[3],l=n[4],c=0;c<80;c++){if(c<16)u[c]=0|e[t+c];else{var s=u[c-3]^u[c-8]^u[c-14]^u[c-16];u[c]=s<<1|s>>>31}var d=(r<<5|r>>>27)+l+u[c];d+=c<20?1518500249+(i&a|~i&o):c<40?1859775393+(i^a^o):c<60?(i&a|i&o|a&o)-1894007588:(i^a^o)-899497514,l=o,o=a,a=i<<30|i>>>2,i=r,r=d}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+a|0,n[3]=n[3]+o|0,n[4]=n[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=l.clone.call(this);return e._hash=this._hash.clone(),e}}),i.SHA1=l._createHelper(s),i.HmacSHA1=l._createHmacHelper(s),r.SHA1)},2227:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(4015),i=n.n(r),a=n(3645),o=n.n(a)()(i());o.push([e.id,".password-low {\n    background-image: linear-gradient(to right, #FDD886, #fff, #fff);\n}\n\n.password-middle {\n    background-image: linear-gradient(to right, #FDD886, #F99564, #fff);\n}\n\n.password-strong {\n    background-image: linear-gradient(to right, #FDD886, #F99564, #EE5148);\n}\n\n.xadmin-model-form-role .ant-card-body .ant-form-item .ant-form-item-control-input .ant-card-body {\n    padding: 0px;\n}","",{version:3,sources:["webpack://./src/components/password.css"],names:[],mappings:"AAAA;IACI,gEAAgE;AACpE;;AAEA;IACI,mEAAmE;AACvE;;AAEA;IACI,sEAAsE;AAC1E;;AAEA;IACI,YAAY;AAChB",sourcesContent:[".password-low {\n    background-image: linear-gradient(to right, #FDD886, #fff, #fff);\n}\n\n.password-middle {\n    background-image: linear-gradient(to right, #FDD886, #F99564, #fff);\n}\n\n.password-strong {\n    background-image: linear-gradient(to right, #FDD886, #F99564, #EE5148);\n}\n\n.xadmin-model-form-role .ant-card-body .ant-form-item .ant-form-item-control-input .ant-card-body {\n    padding: 0px;\n}"],sourceRoot:""}]);const l=o},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(i[o]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);r&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},4015:e=>{"use strict";function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.exports=function(e){var n,r,i=(r=4,function(e){if(Array.isArray(e))return e}(n=e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(n,r)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[1],o=i[3];if(!o)return a;if("function"==typeof btoa){var l=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(l),u="/*# ".concat(c," */"),s=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(e," */")}));return[a].concat(s).concat([u]).join("\n")}return[a].join("\n")}},7055:(e,t,n)=>{e.exports=n.p+"c887f9a732dafdf2ceb090f4ff8a16ac.png"},3379:(e,t,n)=>{"use strict";var r,i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function o(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},r=[],i=0;i<e.length;i++){var l=e[i],c=t.base?l[0]+t.base:l[0],u=n[c]||0,s="".concat(c," ").concat(u);n[c]=u+1;var d=o(s),p={css:l[1],media:l[2],sourceMap:l[3]};-1!==d?(a[d].references++,a[d].updater(p)):a.push({identifier:s,updater:h(p,t),references:1}),r.push(s)}return r}function c(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var a=n.nc;a&&(r.nonce=a)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var o=i(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var u,s=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function d(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=s(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function p(e,t,n){var r=n.css,i=n.media,a=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var m=null,f=0;function h(e,t){var n,r,i;if(t.singleton){var a=f++;n=m||(m=c(t)),r=d.bind(null,n,a,!1),i=d.bind(null,n,a,!0)}else n=c(t),r=p.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=o(n[r]);a[i].references--}for(var c=l(e,t),u=0;u<n.length;u++){var s=o(n[u]);0===a[s].references&&(a[s].updater(),a.splice(s,1))}n=c}}}},2233:e=>{e.exports='<svg viewBox="0 0 21 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><desc>Created with Sketch.</desc><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round"><g id="图标" transform="translate(-255.000000, -92.000000)" stroke="#000000"><g id="部门管理" transform="translate(254.000000, 91.000000)"><g transform="translate(2.000000, 2.000000)"><path d="M9.03497863,0.280201748 L0.603034996,5.05790104 C0.410831071,5.16680743 0.343305078,5.41090557 0.45221147,5.60310949 C0.486850335,5.66424205 0.53698122,5.71517171 0.597558608,5.75077256 L9.02124512,10.7013062 C9.33485791,10.885614 9.7238185,10.8850857 10.0369295,10.6999267 L18.4070901,5.7502109 C18.5972438,5.63776303 18.6602368,5.39245599 18.5477889,5.2023023 C18.5123953,5.14245036 18.4620109,5.09285858 18.4016053,5.05841843 L10.02326,0.281519858 C9.71708306,0.10695361 9.34162016,0.10645284 9.03497863,0.280201748 Z" id="Path-28"></path><path d="M0.5,9.30028102 L8.99974267,14.2109781 C9.30927451,14.389809 9.69072549,14.389809 10.0002573,14.2109781 L18.5,9.30028102" id="Path-29"></path><path d="M0.5,12.5190061 L8.99976426,17.429433 C9.30928513,17.6082473 9.69071487,17.6082473 10.0002357,17.429433 L18.5,12.5190061" id="Path-29"></path></g></g></g></g></svg>'},6018:e=>{e.exports='<svg viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><desc>Created with Sketch.</desc><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-531.000000, -92.000000)" stroke="#FFFFFF"><g id="角色管理" transform="translate(529.000000, 91.000000)"><g transform="translate(3.000000, 2.000000)"><circle id="椭圆形" cx="8.5" cy="4.5" r="4.5"></circle><path d="M7.60963668,17 L1.9301338,17 C0.825566936,16.9999952 -0.0698614253,16.1045669 -0.0698614253,15 C-0.0698614253,14.6960955 -0.000604180214,14.3961874 0.132649916,14.123055 C0.854263363,12.6439559 1.73281965,11.5497782 2.76831878,10.8405218 C4.38909901,9.73038192 6.46632608,9.11687467 9,9" id="路径-4" stroke-linecap="round"></path><path d="M12.1098353,11 L14.8698936,11 C15.0365501,11 15.1922514,11.083035 15.2851026,11.2214297 L16.9182603,13.6556511 C17.0214285,13.8094232 17.0311629,14.0076219 16.9435597,14.1707637 L15.5657992,16.7365423 C15.4786816,16.8987798 15.3094387,17 15.1252907,17 L12.1098353,17 C11.9400162,17 11.7818057,16.9138057 11.6897231,16.7711196 L10.0763469,14.2711196 C9.96982975,14.1060663 9.96982975,13.8939337 10.0763469,13.7288804 L11.6897231,11.2288804 C11.7818057,11.0861943 11.9400162,11 12.1098353,11 Z" id="路径-5"></path><path d="M12.5,14 C12.7761424,14 13,13.7761424 13,13.5 C13,13.2238576 12.7761424,13 12.5,13 C12.2238576,13 12,13.2238576 12,13.5 C12,13.7761424 12.2238576,14 12.5,14 Z" id="椭圆形"></path></g></g></g></g></svg>'},4671:e=>{e.exports='<svg viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-189.000000, -301.000000)" fill="#9299B9" fill-rule="nonzero"><g id="用户管理备份" transform="translate(189.000000, 301.000000)"><path d="M13.9907506,9.39242643 C13.1144304,9.97618681 12.0659959,10.3153238 10.9376914,10.3153238 C9.81276172,10.3153238 8.76770204,9.97841065 7.89475658,9.39909798 C5.53015437,10.5421564 3.89675645,12.9717115 3.89675645,15.7837686 C3.89675645,18.7592786 18,18.7181374 18,15.7837686 C17.9988751,12.9650399 16.3621024,10.5321491 13.9907506,9.39242643 L13.9907506,9.39242643 L13.9907506,9.39242643 Z M6.19723768,4.76237272 C6.19723768,2.13267124 8.31885508,0 10.9376914,0 C13.5565277,0 15.6781451,2.1315593 15.6781451,4.76237272 C15.6781451,7.39207421 13.5565277,9.52252161 10.9376914,9.52252161 C8.31885506,9.52252161 6.19723768,7.39207423 6.19723768,4.76237272 L6.19723768,4.76237272 L6.19723768,4.76237272 L6.19723768,4.76237272 Z M3.06093368,16.0306158 C3.06093368,16.1395844 3.07780764,16.2429934 3.1104306,16.3452905 C1.3296669,16.0595259 0,15.4957801 0,14.6462698 C0,12.212267 1.41291169,10.1096177 3.46028373,9.12000491 C4.17461408,9.59479668 5.02506093,9.88167321 5.94187863,9.91169517 C4.18248858,11.3649805 3.06093368,13.5665911 3.06093368,16.0306158 L3.06093368,16.0306158 L3.06093368,16.0306158 Z M5.40866196,4.76237272 C5.40866196,3.55371077 5.79338792,2.43511471 6.44697206,1.5233366 C6.33222923,1.51332928 6.21861134,1.50888158 6.10386851,1.50888158 C3.94850322,1.50888158 2.20148741,3.26349848 2.20148741,5.42841553 C2.20148741,7.59333258 3.9473783,9.34794948 6.10274359,9.34794948 C6.58758829,9.34794948 7.05218426,9.25899551 7.47965753,9.09554261 C6.2174864,8.07813165 5.40866196,6.51587771 5.40866196,4.76237272 L5.40866196,4.76237272 Z" id="形状"></path></g></g></g></svg>'},5220:e=>{e.exports='<svg viewBox="0 0 18 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-189.000000, -342.000000)" fill="#9299B9" fill-rule="nonzero"><g id="角色管理备份" transform="translate(189.000000, 342.000000)"><g id="shouquandaiban"><path d="M12.5175681,9.49106778 C12.7554481,9.35197054 12.9471378,8.95322515 12.5452823,8.7631256 C12.4090209,8.70053184 12.2681405,8.64257466 12.1272602,8.58693577 C13.1295894,7.68512205 13.7647059,6.37992636 13.7647059,4.92172371 C13.7647059,2.20469112 11.5683577,0 8.86160679,0 C6.1548559,0 3.9585077,2.20469112 3.9585077,4.92172371 C3.9585077,6.37992636 4.59362416,7.68512205 5.59595341,8.58693577 C2.62591788,9.7576708 0.434188709,12.47934 0.00692854323,15.7597164 C0.00230951441,15.7991272 0,15.8385381 0,15.877949 C0,16.4969317 0.498855113,17 1.11780497,17 L10.41591,17 C9.98864982,16.2071458 9.74384129,15.2983772 9.74384129,14.3339697 C9.74615081,12.2660575 10.8616463,10.4624301 12.5175681,9.49106778 Z" id="路径"></path></g><g id="通用功能备份" transform="translate(11.000000, 11.000000)"><path d="M6.94390914,3.20384616 L5.40334488,5.79661539 C5.32881711,5.92235382 5.19039557,5.99993966 5.0404847,6 L1.95951531,6 C1.80960443,5.99993966 1.67118289,5.92235383 1.59665512,5.79661539 L0.0560908551,3.20384616 C-0.0186969517,3.07761875 -0.0186969517,2.9225351 0.0560908551,2.79630769 L1.59665512,0.203384613 C1.67118289,0.0776461742 1.80960443,6.03355797e-05 1.95951531,0 L5.0404847,0 C5.19039557,6.03376787e-05 5.32881711,0.077646176 5.40334488,0.203384613 L6.94390914,2.79630769 C7.01869695,2.9225351 7.01869695,3.07761875 6.94390914,3.20384616 Z M3.49992043,1.99998785 C3.07898482,1.99800654 2.69835222,2.24159691 2.53585108,2.61696765 C2.37334995,2.99233839 2.46105821,3.42539087 2.75799927,3.71380648 C3.05494033,4.0022221 3.50249768,4.08906725 3.89157614,3.9337686 C4.2806546,3.77846995 4.53444963,3.41168363 4.53439175,3.00476923 C4.53535884,2.45132419 4.07244075,2.0016969 3.49992043,1.99998785 Z" id="形状"></path></g></g></g></g></svg>'},2611:e=>{"use strict";e.exports=_},3078:e=>{"use strict";e.exports=xadmin},5907:e=>{"use strict";e.exports=xadminUi},2480:()=>{},7061:(e,t,n)=>{var r=n(8698).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,a=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},l="function"==typeof Symbol?Symbol:{},c=l.iterator||"@@iterator",u=l.asyncIterator||"@@asyncIterator",s=l.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),l=new j(r||[]);return o(a,"_invoke",{value:x(e,n,l)}),a}function m(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var f={};function h(){}function v(){}function y(){}var g={};d(g,c,(function(){return this}));var b=Object.getPrototypeOf,_=b&&b(b(D([])));_&&_!==n&&a.call(_,c)&&(g=_);var w=y.prototype=h.prototype=Object.create(g);function E(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(i,o,l,c){var u=m(e[i],e,o);if("throw"!==u.type){var s=u.arg,d=s.value;return d&&"object"==r(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,l,c)}),(function(e){n("throw",e,l,c)})):t.resolve(d).then((function(e){s.value=e,l(s)}),(function(e){return n("throw",e,l,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var l=C(o,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=m(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function C(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=m(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function D(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:I}}function I(){return{value:void 0,done:!0}}return v.prototype=y,o(w,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:v,configurable:!0}),v.displayName=d(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,d(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},E(k.prototype),d(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new k(p(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},E(w),d(w,s,"Generator"),d(w,c,(function(){return this})),d(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=D,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=a.call(i,"catchLoc"),c=a.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:D(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},8698:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4687:(e,t,n)=>{var r=n(7061)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var t=__webpack_require__.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&!e;)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e})(),__webpack_require__.nc=void 0;var __webpack_exports__={};(()=>{"use strict";var e=__webpack_require__(2611),t=__webpack_require__.n(e);const n=React;var r=__webpack_require__.n(n),i=__webpack_require__(3078),a=__webpack_require__(5907);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function c(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function d(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===s(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t,n,r,i,a,o){try{var l=e[a](o),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,i)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){p(a,r,i,o,l,"next",e)}function l(e){p(a,r,i,o,l,"throw",e)}o(void 0)}))}}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var h=__webpack_require__(4687),v=__webpack_require__.n(h),y=function(e,t){var n,r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),a=[];if(t=t||i.length,e)for(n=0;n<e;n++)a[n]=i[0|Math.random()*t];else for(a[8]=a[13]=a[18]=a[23]="-",a[14]="4",n=0;n<36;n++)a[n]||(r=0|16*Math.random(),a[n]=i[19==n?3&r|8:r]);return a.join("")};const g=xadminI18n,b=antd,w=xadminModel,E=Recoil;b.Layout.Content,b.Layout.Sider;const k=xadminAuth,x=icons,C=xadminForm;var S=__webpack_require__(2783),O=__webpack_require__.n(S),j=__webpack_require__(3379),D=__webpack_require__.n(j),I=__webpack_require__(2227);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}D()(I.Z,{insert:"head",singleton:!1}),I.Z.locals;var L=function(e){var t=(0,i.use)("redux",(function(e){return{user:e.user}})).user,n=(0,i.use)("settings").settings,o=(0,i.use)("form").form,l=function(){var n=m(v().mark((function n(r){return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,i.api)(i.app.get("models").User).save(T(T({},r),{},{id:e.id,password:O()(r.password).toString(),password2:O()(r.password2).toString()}),!0);case 3:b.message.success("修改密码成功"),e.onClose(),(null==e?void 0:e.id)==(null==t?void 0:t.userId)&&i.app.go("/login"),n.next=11;break;case 8:return n.prev=8,n.t0=n.catch(0),n.abrupt("return",n.t0.formError||n.t0.json);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}(),c=[{name:"password",required:!0,label:"新密码",attrs:{type:"password"},component:function(e){return r().createElement(F,e)},validate:function(e,t){var r,i,a=null===(r=o.getState().values)||void 0===r?void 0:r.name,l=null===(i=n.userExpand)||void 0===i?void 0:i.nousername;if(e){if(e.length<6)return"密码不能少于6位";if(e.length>30)return"密码不能多于30位";if(l&&e.includes(a))return"密码不能包含用户名"}return/^(?![^a-zA-Z]+$)(?!\D+$)/gi.test(e)?null:"密码必须为字母与数字组合"}},{name:"password2",required:!0,label:"重复密码",attrs:{type:"password"},component:function(e){return r().createElement(b.Input.Password,{type:"password",name:"password",autocomplete:"new-password",value:null==e?void 0:e.input.value,onChange:function(t){return null==e?void 0:e.input.onChange(t.target.value)},iconRender:function(e){return e?r().createElement(x.EyeTwoTone,null):r().createElement(x.EyeInvisibleOutlined,null)}})},validate:function(e,t){var n=t.password;if(e){if(e.length<6)return"密码不能少于6位";if(e.length>30)return"密码不能多于30位"}return e==n?/^(?![^a-zA-Z]+$)(?!\D+$)/gi.test(e)?null:"密码必须为字母与数字组合":"两次输入密码不一致"}}];return r().createElement(C.Form,{formKey:"userChangePassword",title:"修改用户密码",saveText:"修改密码",show:e.show,onClose:e.onClose,fields:c,onSubmit:l,component:(0,a.C)("Form.ModalLayout")})},P=function(e){var t=useI18n(),n=t.t,i=(t.i18n,e.input),a=i.value,o=i.onChange;return r().createElement(b.Input.Password,{type:"password",onChange:function(e){o(e.target.value)},value:a,placeholder:n("请输入当前登录用户的密码"),iconRender:function(e){return e?r().createElement(x.EyeTwoTone,null):r().createElement(x.EyeInvisibleOutlined,null)}})},M=function(e){(0,i.use)("redux",(function(e){return{user:e.user}})).user;var t=[{name:"password",required:!0,label:_r("密码"),attrs:{type:"password"},description:_r("当前操作是危险操作，需谨慎操作"),validate:function(e){if(e){if(e.length<6)return _r("密码不能少于6位");if(e.length>30)return _r("密码不能多于30位")}return/^(?![^a-zA-Z]+$)(?!\D+$)/gi.test(e)?null:_r("密码必须为字母与数字组合")},component:P}],n=function(){var t=m(v().mark((function t(n){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,i.api)({name:"core/user/changepwd"}).fetch("",{method:"POST",body:JSON.stringify({password:O()(n.password).toString()})}).then((function(t){200==t.status&&(b.message.success(_t1("校验成功")),e.getStatus(!0)),e.onClose()})).catch((function(t){b.message.success(_t1("校验失败，密码不正确")),e.getStatus(!1)}));case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return",t.t0.formError||t.t0.json);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}();return r().createElement(C.Form,{formKey:"userChangePassword",title:_t1("密码校验"),saveText:_t1("校验"),show:e.show,onClose:e.onClose,fields:t,onSubmit:n,component:(0,a.C)("Form.ModalLayout")})},F=function(e){var t=e.input,i=f(r().useState(),2),a=i[0],o=i[1],l=f((0,n.useState)(),2),c=l[0],u=l[1],s=new RegExp(/^(?![^a-zA-Z]+$)(?!\D+$)/gi),d=new RegExp(/(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*[\W_]).{8,}/),p=new RegExp(/^(?=.*\d)(?=.*[a-zA-Z])(?=.*[~!@#$%^&*])[\da-zA-Z~!@#$%^&*]{12,}$/),m=new RegExp(/^(?=.*[0-9].*)(?=.*[A-Z].*)(?=.*[a-z].*).{8,12}$/),h=new RegExp(/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,12}$/),v=new RegExp(/(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*[\W_]).{6,8}/),y=new RegExp(/^(?=.*\d)(?=.*[a-zA-Z])(?=.*[~!@#$%^&*])[\da-zA-Z~!@#$%^&*]{8,12}$/),g=new RegExp(/^(?=.*[0-9].*)(?=.*[A-Z].*)(?=.*[a-z].*).{6,8}$/),_=new RegExp(/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,8}$/);return r().createElement(r().Fragment,null,r().createElement("div",null,r().createElement(b.Input,{name:"password",type:"password",style:{display:"none"}}),r().createElement(b.Input.Password,{status:c,type:"password",name:"password",autocomplete:"new-password",value:t.value,onBlur:t.onBlur,onChange:function(e){var n=e.target.value;t.onChange(n),n||o(""),s.test(n)?(u(""),d.test(n)||p.test(n)?o("strong"):m.test(n)||h.test(n)||v.test(n)||y.test(n)?o("middle"):(g.test(n)||_.test(n))&&o("low")):u("error")},className:"passwordInput",iconRender:function(e){return e?r().createElement(x.EyeTwoTone,null):r().createElement(x.EyeInvisibleOutlined,null)}}),r().createElement("div",{style:{display:"flex",marginTop:"10px"}},r().createElement("div",{style:{width:"70px",marginRight:"10px",marginLeft:"20px"}},r().createElement("div",{style:{background:"low"===a?"#EE5148":"linear-gradient(90deg,#FAEEEC 50%,transparent 0)",backgroundSize:"low"===a?"100%,100%":"5px 100%",width:"70px",height:"14px",borderRadius:"4px"}}),r().createElement("div",{style:{textAlign:"center",fontSize:"12px",color:"#EE5148"}},"弱")),r().createElement("div",{style:{width:"70px",marginRight:"10px"}},r().createElement("div",{style:{background:"middle"===a?"#F9AE64":"linear-gradient(90deg,#FCF0E3 50%,transparent 0)",backgroundSize:"middle"===a?"100%,100%":"5px 100%",width:"70px",height:"14px",borderRadius:"4px"}}),r().createElement("div",{style:{textAlign:"center",fontSize:"12px",color:"#F9AE64"}},"中")),r().createElement("div",{style:{width:"70px",marginRight:"10px"}},r().createElement("div",{style:{background:"strong"===a?"#6BB339":"linear-gradient(90deg,#EAF4E3 50%,transparent 0)",backgroundSize:"strong"===a?"100%,100%":"5px 100%",width:"70px",height:"14px",borderRadius:"4px"}}),r().createElement("div",{style:{textAlign:"center",fontSize:"12px",color:"#6BB339"}},"强")))))};const R=function(e){var t=e.input,n=useI18n(),a=n.t,o=(n.i18n,(0,i.use)("form").formState.values),l=f(r().useState(!1),2),c=l[0],u=l[1],s=f(r().useState(!1),2),d=s[0],p=s[1];return o&&o.id?[r().createElement(b.Button,{onClick:function(){return p(!0)}},a("修改密码")),r().createElement(M,{show:d,onClose:function(){return p(!1)},id:o.id,getStatus:function(e){u(e)}}),r().createElement(L,{show:c,onClose:function(){return u(!1)},id:o.id})]:r().createElement(F,{input:t})};__webpack_require__(4420);var B=function(e){return{license:{title:e("授权信息"),children:[{key:"license.view",title:e("查看授权信息")},{key:"license.upgrade",title:e("升级授权信息")}]},driver:{title:e("驱动下载"),children:[{key:"driver.install",title:e("驱动下载")},{key:"driver.add",title:e("执行指令")}]},data:{title:e("实时数据及历史数据查询"),children:[{key:"data.view",title:e("数据查询")}]},analysis:{title:e("数据分析"),children:[{key:"analysis.view",title:e("数据分析")},{key:"analysis.export",title:e("导出PDF")}]},Development:{title:e("开发调试"),children:[{key:"Development.debugdev",title:e("设备调试")},{key:"Development.debugtime",title:e("时间分析")}]},Market:{title:e("扩展市场"),children:[{key:"Market.view",title:e("查看市场")}]},signature:{title:e("电子签名"),children:[{key:"signature.view",title:e("电子签名")}]},authorizer:{title:e("授权人"),children:[{key:"authorizer.view",title:e("授权人")}]},dashboardConfig:{title:e("记录日志组件"),children:[{key:"dashboardConfig.view",title:e("记录日志组件")}]},frontSystemMenu:{title:e("前台系统菜单"),children:[{key:"frontSystemMenu.view",title:e("查看")},{key:"frontSystemMenu.add",title:e("创建")},{key:"frontSystemMenu.edit",title:e("修改")},{key:"frontSystemMenu.delete",title:e("删除")}]},homeDashboardConfig:{title:e("首页画面设置"),children:[{key:"homeDashboardConfig.view",title:e("查看")}]},handler:{title:e("重启通知服务"),children:[{key:"handler.view",title:e("查看")}]},wechat:{title:e("微信绑定"),children:[{key:"wechat.add",title:e("创建")}],license:"handlerNotification"},fileServer:{title:e("文件下载"),children:[{key:"fileServer.view",title:e("下载")}]},cleancycle:{title:e("清除日志"),children:[{key:"cleancycle.view",title:e("查看")},{key:"cleancycle.add",title:e("添加")},{key:"cleancycle.edit",title:e("编辑")},{key:"cleancycle.delete",title:e("删除")},{key:"cleancycle.instant",title:e("一键清除")}]},archivecycle:{title:e("日志归档操作"),children:[{key:"archivecycle.view",title:e("查看")},{key:"archivecycle.add",title:e("添加")},{key:"archivecycle.delete",title:e("删除")},{key:"archivecycle.edit",title:e("修改")},{key:"archivecycle.instant",title:e("一键归档")}]},warningclean:{title:e("报警信息清除"),children:[{key:"warningclean.view",title:e("查看")},{key:"warningclean.add",title:e("添加")},{key:"warningclean.edit",title:e("编辑")},{key:"warningclean.delete",title:e("删除")},{key:"warningclean.instant",title:e("一键清除")}]},admin:{title:e("不允许登录中台"),children:[{key:"admin.disable",title:e("不允许登录中台")}]},preview:{title:e("萤石云视频预览"),children:[{key:"preview.view",title:e("查看")}]},ezopen:{title:e("萤石云视频回放"),children:[{key:"ezopen.view",title:e("查看")}]},ptz:{title:e("萤石云视频云台"),children:[{key:"ptz.add",title:e("创建")}]},resourceType:{title:e("我的组件分类"),children:[{key:"resourceType.view",title:e("查看")},{key:"resourceType.add",title:e("添加")},{key:"resourceType.edit",title:e("编辑")},{key:"resourceType.delete",title:e("删除")}]},gb28181:{title:e("视频"),children:[{key:"gb28181.view",title:e("国标设备列表")},{key:"gb28181.add",title:e("国标设备推送视频流")}],license:"video"},summary:{title:e("视频-概览"),children:[{key:"summary.view",title:e("概览")}],license:"video"},stream:{title:e("视频-流列表/流详情"),children:[{key:"stream.view",title:e("流列表/流详情")}],license:"video"},taskmanage:{title:e("后台任务管理"),children:[{key:"taskmanage.ongoing",title:e("启动")},{key:"taskmanage.pause",title:e("中止")},{key:"taskmanage.delete",title:e("删除")}]}}};function N(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $=b.Input.Search,H=b.Tabs.TabPane,Y=(b.Tree.TreeNode,b.Checkbox.Group);var Z=[{name:_t1("通用功能"),key:"common"},{name:_t1("系统设置"),key:"system"},{name:_t1("设备监控"),key:"device"},{name:_t1("权限管理"),key:"auth"},{name:_t1("表管理"),key:"table"},{name:_t1("可视化"),key:"dashboard"},{name:_t1("数据分析"),key:"dataset"},{name:_t1("业务流程"),key:"flow"},{name:_t1("二次开发"),key:"secondary"},{name:_t1("视频权限"),key:"video"},{name:_t1("其他"),key:"else"}],K=function(e){var o,l,u=e.permission,s=e.defaultCheckedKeys,d=e.inputOnChange,p=useI18n(),m=p.t,h=(p.i18n,f(r().useState("common"),2)),v=h[0],y=h[1],g=r().useState(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=e.reduce((function(e,t,n,r){if(-1!=t.indexOf(".")){var i=t.split(".");e[i[0]]=Array.from(new Set(r.filter((function(e){return-1!=e.indexOf(i[0]+".")}))))}return e}),{});return!0===e.analysis&&-1!==e.analysis.indexOf("analysis.view")&&(n.data=n.data?t().uniq([].concat(c(n.data),["analysis.view"])):["analysis.view"],n.analysis=[]),["dashboard_detailFilter","dashboard_deafultview","dashboard_deafultedit","dashboard_deafultdelete"].forEach((function(t){e.indexOf(t)>-1&&(n[t]=[])})),n}(s)),_=f(g,2),w=_[0],E=_[1],k=w,C=(0,i.use)("auth.user").user.license;C&&(Z=Z.filter((function(e){var t;return!e.license||e.license&&(null===(t=C.feature)||void 0===t?void 0:t.includes(e.license))})),null!==(o=C.feature)&&void 0!==o&&o.includes("sdk")||null!==(l=C.feature)&&void 0!==l&&l.includes("Oauth")||(Z=Z.filter((function(e){return"secondary"!=e.key}))));var S=function(e,n){if(!e)return[];var r=[];if(n){var i=u.filter((function(e){return(null==e?void 0:e.key)&&!(e.key.indexOf("ext_")>-1)}));r=t().differenceBy(i,e.map((function(e){return{key:e}})),"key"),e.forEach((function(e){u.forEach((function(t){"signature"==e&&t.key.indexOf("signature")>-1&&r.push(t)}))}))}else e.forEach((function(e){u.forEach((function(t){var n;null!=t&&t.key&&(null==t?void 0:t.key.toLowerCase())==e.toLowerCase()&&("log"==t.key&&"log"==e||!t.license||t.license&&null!==(n=C.feature)&&void 0!==n&&n.includes(t.license))&&r.push(t),"table"==e&&t.key&&t.key.indexOf("ext_")>-1&&r.push(t)}))}));return r};r().useEffect((function(){d(function(e){if("{}"==JSON.stringify(e))return[];var n=Object.keys(e).map((function(t){return e[t].concat(t)}));return t().flattenDeep(n)}(w))}),[w]);var O=["live","camera","play","video","preview","ezopen","ptz","summary","","stream","gb28181"],j=["signature","handler","taskmanage"],D=["oauthApp","app"],I=["flow","flowtask","allflowtask","job"],A=["dataset","view","analysis","report","reportcopy"],T=["site","dashboard","authorizer","resourceType"],L=["user","wechat","dingtalk","role","frontSystemMenu"],P=["driverInstance","Development","driver","warning","warningarchive","warningclean","rule","instruct","networkgraph","group","interface","p"],M=["system","homeDashboardConfig","dashboardconfig","admin"],F=["log","cleancycle","archivedlog","archivecycle","systemvariable","medialibrary","theme","license","fileServer","data"],R=["table"];Z.map((function(e){if("common"==e.key)e.child=S(F);else if("system"==e.key)e.child=S(M);else if("device"==e.key)e.child=S(P);else if("auth"==e.key)e.child=S(L);else if("table"==e.key)e.child=S(R);else if("dashboard"==e.key)e.child=S(T);else if("dataset"==e.key)e.child=S(A);else if("flow"==e.key)e.child=S(I);else if("secondary"==e.key)e.child=S(D);else if("video"==e.key)e.child=S(O);else if("else"==e.key){var t;e.child=S(j),null!==(t=e.child)&&void 0!==t&&t.length&&(e.child=e.child.filter((function(e){return!e.key.includes("dashboard_")})))}}));var B=f((0,n.useState)(""),2),N=B[0],q=B[1],U=f((0,n.useState)(!1),2),z=U[0],Y=U[1],K=f((0,n.useState)(u),2),V=K[0],G=K[1];return r().createElement("div",null,r().createElement($,{placeholder:m("搜索权限"),allowClear:!0,enterButton:r().createElement(x.SearchOutlined,null),value:N,onSearch:function(){if(""===N.trim())G([]),Y(!1);else{Y(!0);var e=u.filter((function(e){return"string"==typeof e.title&&e.title.toLowerCase().includes(N.toLowerCase())}));G(e)}},onChange:function(e){var t=e.target.value;q(t),""===t.trim()&&(G([]),Y(!1))}}),z?r().createElement("div",null,N&&V.length>0?r().createElement(W,{searchData:V,checkedList:w,setCheckedList:E,searchResult:V}):r().createElement(a.C,{is:"NoData"})):r().createElement(b.Tabs,{activeKey:v,onChange:function(e){return y(e)}},Z.map((function(e){return r().createElement(H,{tab:m(e.name),key:e.key},r().createElement(J,{tab:e,activeKey:v,checkedList:w,setCheckedList:E,Initdata:k}))}))))},V={width:"100%",height:40,lineHeight:"40px",textAlign:"left",paddingLeft:"16%",backgroundColor:"#F6F5FA",marginBottom:"10px"},G={textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",width:"120px"},W=function(e){var i=e.searchData,a=e.checkedList,o=e.setCheckedList,l=(e.searchResult,f((0,n.useState)(!1),2)),c=l[0],u=l[1],s=f((0,n.useState)({}),2),p=s[0],m=s[1];(0,n.useEffect)((function(){var e={},t={};i.forEach((function(n){var r,i,o=a[n.key]||[],l=o.length===(null===(r=n.children)||void 0===r?void 0:r.length),c=o.length>0&&o.length<(null===(i=n.children)||void 0===i?void 0:i.length);e[n.key]=c,t[n.key]=l})),u(e),m(t)}),[i,a]);var h=function(e,t,n){var r={},i={};i[n]=t,Object.keys(e).forEach((function(n){r[n]=0;var i,a=N(t||[]);try{for(a.s();!(i=a.n()).done;){var o=i.value;-1!=e[n].indexOf(o)&&(r[n]++,p[n]=r[n]===e[n].length,c[n]=!!r[n]&&r[n]<e[n].length)}}catch(e){a.e(e)}finally{a.f()}0===r[n]&&(p[n]=!1,c[n]=!1)})),o(z(z({},a),i)),u(c),m(p)};return r().createElement("div",null,r().createElement("div",null,r().createElement(b.Checkbox,{indeterminate:c,checked:Object.values(p).every((function(e){return e})),onChange:function(e){var t=e.target.checked,n={};i.forEach((function(e){var r,i=t?null===(r=e.children)||void 0===r?void 0:r.map((function(e){return e.key})):[];n[e.key]=i,p[e.key]=!0,c[e.key]=!1})),o(n)},style:{margin:"20px 0px 10px 10px"}},"全选")),i.map((function(e){var n;return r().createElement(b.Row,{gutter:[3,16]},r().createElement(b.Col,{span:6},r().createElement("div",{style:V,className:"Tabs-Col"},r().createElement(b.Checkbox,{style:G,key:e.key,indeterminate:c[e.key],checked:p[e.key],onChange:function(n){return function(e,n,r){if(e.target.checked){var i={};i[r]=n.map((function(e){return e.value})),p[r]=!0,o(z(z({},a),i)),m(z(z({},p),{},d({},r,!0))),u(t().omit(c,r))}else o(t().omit(a,r)),m(t().omit(p,r))}(n,(r=e&&e.children||[])&&r.length>0?r.map((function(e){return{label:e.title,value:e.key}})):[],e.key);var r}},r().createElement(b.Tooltip,{title:e.title},(null===(n=e.title)||void 0===n?void 0:n.length)>6?e.title.substring(0,6)+"...":e.title)))),r().createElement(b.Col,{span:18},r().createElement("div",{style:V,className:"Tabs-Col"},e.children&&e.children.length>0?r().createElement(X,{checkedList:a,onChange:h,cd:e,setCheckedList:o}):null)))})))},J=function(e){var n=e.tab,i=e.checkedList,o=e.setCheckedList,l=e.activeKey,c=e.Initdata,u=useI18n(),s=u.t,d=(u.i18n,f(r().useState([]),2)),p=d[0],m=d[1],h=f(r().useState({}),2),v=h[0],y=h[1],g=f(r().useState({}),2),_=g[0],w=g[1],E=f(r().useState({}),2),k=E[0],x=E[1],C=Z.filter((function(e){return e.key==l}))[0]||[],S=C&&C.child||[],O=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a={},l={};l[n]=t,Object.keys(e).forEach((function(n){a[n]=0;var r,i=N(t||[]);try{for(i.s();!(r=i.n()).done;){var o=r.value;-1!=e[n].indexOf(o)&&(a[n]++,_[n]=a[n]===e[n].length,p[n]=!!a[n]&&a[n]<e[n].length)}}catch(e){i.e(e)}finally{i.f()}0===a[n]&&(_[n]=!1,p[n]=!1)}));var c=z(z({},i),l);r&&(c=z(z({},c),{},{dashboard_detailFilter:[]})),o(c),m(p),w(_)};return r().useEffect((function(){if("{}"!=JSON.stringify(c)){var e={},t={},n={},r=Object.keys(c).reduce((function(e,t){return e[t]=c[t],e}),{});S.forEach((function(e){n[e.key]=e.children.map((function(e){return e.key}))})),Object.keys(r).forEach((function(i){var a=n[i]&&n[i].length,o=r[i]&&r[i].length;a<=o?t[i]=!0:o<a&&(e[i]=!0)}));var i=Object.keys(t),a=Object.keys(n),o={},u={};i.length==a.length?o[l]=!0:i.length<a.length&&(u[l]=!0),m(e),w(t),y(u),x(o)}}),[]),r().useEffect((function(){var e=Object.keys(_).filter((function(e){return _[e]}))||[],n=S.map((function(e){return e.key}))||[],r=Object.keys(p).filter((function(e){return!0===p[e]}))||[],a={};e.length===n.length?(v[l]=!1,a[l]=!0,x(z(z({},k),a)),y(v)):(e.length>0&&e.length<n.length||r.length)&&(v[l]=!0,y(v),x(t().omit(k,l)));var o=Object.keys(i).filter((function(e){return i[e].length>0}));0==t().intersection(o,n).length&&(v[l]=!1,y(v))}),[i]),n.child&&n.child.length>0?r().createElement("div",null,r().createElement(b.Checkbox,{style:{margin:"0px 0px 10px 10px"},indeterminate:v[l],checked:k[l],onChange:function(e){var n=e.target.checked,r={};!0===n?(S.forEach((function(e){r[e.key]=e&&e.children&&e.children.map((function(e){return e.key})),_[e.key]=!0,p[e.key]=!1})),k[l]=!0,o(z(z({},i),r)),m(p),w(_),x(k)):(S.forEach((function(e){i=t().omit(i,e.key),_[e.key]=!1,p[e.key]=!1})),k[l]=!1,o(z({},i)),m(p),w(_),x(k))}},s("全选"))," ",n.child.map((function(e){var n=e.title;return r().createElement(b.Row,{gutter:[3,16]},r().createElement(b.Col,{span:6},r().createElement("div",{style:V,className:"Tabs-Col"},r().createElement(b.Checkbox,{style:G,key:e.key,indeterminate:p[e.key],checked:_[e.key],onChange:function(n){return function(e,n,r){if(!0===e.target.checked){var a={};a[r]=n.map((function(e){return e.value})),_[r]=!0,o(z(z({},i),a)),m(t().omit(p,r)),w(_)}else o(t().omit(i,r)),w(t().omit(_,r))}(n,Q(e&&e.children||[],s),e.key)}},r().createElement(b.Tooltip,{title:s(e.title)},r().createElement("div",{style:{textOverflow:"ellipsis",overflow:"hidden",width:"120px"},dangerouslySetInnerHTML:{__html:s(n)}}))))),r().createElement(b.Col,{span:18},r().createElement("div",{style:V,className:"Tabs-Col"},e&&e.children&&e.children.length>0?r().createElement(X,{cd:e,checkedList:i,onChange:O,setCheckedList:o}):null)))}))):r().createElement(a.C,{is:"NoData"})},Q=function(e,t){return e&&e.length>0?e.map((function(e){return{label:t(e.title),value:e.key}})):[]},X=function(e){var t=useI18n(),n=t.t,i=(t.i18n,f(r().useState({show:!1,type:null}),2)),a=i[0],o=i[1],l=e.checkedList,s=e.onChange,p=e.cd,m=p.key,h=p.children,v=e.setCheckedList,y=Q(h,n),g=d({},m,y.map((function(e){return e.value}))),_=function(e,t){var n,r,i=e.target.value,a=e.target.checked,o=null!=l&&null!==(n=l[t])&&void 0!==n&&n.length?l[t]:[];if(a)r=[].concat(c(o),[i]),s(d({},t,r),r,t);else if((null==o?void 0:o.length)>0){var u=o.filter((function(e){return e!=i})),p=null!=u&&u.length?u:"";s(d({},t,p),p,t)}else s(d({},t,""),"",t)};return"dashboard"==m?r().createElement("div",null,y.map((function(e){return"dashboard.add"==(null==e?void 0:e.value)?r().createElement(b.Checkbox,{checked:!!(null!=l&&l[m]&&l[m].indexOf(null==e?void 0:e.value)>-1),value:null==e?void 0:e.value,onChange:function(e){return _(e,m)}},null==e?void 0:e.label):r().createElement(r().Fragment,null,r().createElement(b.Checkbox,{checked:!!(null!=l&&l[m]&&l[m].indexOf(null==e?void 0:e.value)>-1),value:null==e?void 0:e.value,onChange:function(e){return _(e,m)}},null==e?void 0:e.label),r().createElement(b.Button,{disabled:!(null!=l&&l[m]&&l[m].indexOf(null==e?void 0:e.value)>-1),size:"small",onClick:function(){o({show:!0,type:null==e?void 0:e.value})},style:{marginRight:".4rem"}},n("选择画面")))})),r().createElement(ee,u({},e,{cdAllKey:g,visible:a,setVisible:o,setCheckedList:v}))):r().createElement(Y,{options:y,value:l[m],onChange:function(e){return s(g,e,m)}})},ee=function(e){var n,o,l=e.visible,u=e.setVisible,s=(e.cdAllKey,e.cd,e.key,e.checkedList),p=e.onChange,m=e.setCheckedList,h=f(r().useState({loading:!1,data:[],currentData:[]}),2),v=h[0],y=h[1],g=f(r().useState(1),2),_=g[0],w=g[1],E=f(r().useState([]),2),k=E[0],x=E[1],C=f(r().useState(!1),2),S=C[0],O=C[1],j=f(r().useState(!1),2),D=j[0],I=j[1],A=f(r().useState(!0),2),T=(A[0],A[1]),L=f(r().useState({}),2),P=L[0],M=L[1];r().useEffect((function(){if(null!=P&&P.id){var e={sort:{createTime:-1},project:{name:1,type:1,cover:1,focus:1,isDelete:1,catalog:1,createTime:1},filter:{isDelete:{$ne:!0},siteId:null==P?void 0:P.id},withCount:!0},t=encodeURIComponent(JSON.stringify(e));y({loading:!0}),(0,i.api)({name:"core/dashboard"}).fetch("?query=".concat(t),{}).then((function(e){var t=e.json;y({loading:!1,data:t,currentData:t.slice(0,15)})}))}else(0,i.api)({name:"core/site"}).query({fields:["name","terminal","terminalType","terminalSize","theme","homeRoute","isDefault","settings","routes"]},{}).then((function(e){var t=e.items,n=null!=t&&t.length?t.filter((function(e){return null==e?void 0:e.isDefault})):[];(null==n?void 0:n.length)&&M(n[0])}))}),[P]),r().useEffect((function(){var e;if(null!=v&&null!==(e=v.data)&&void 0!==e&&e.length&&null!=l&&l.type&&s){t().cloneDeep(s);var n,r,i,a,o,u,d=(null==l?void 0:l.type)&&(null==l?void 0:l.type.substr((null==l?void 0:l.type.lastIndexOf("."))+1)),p=[],m=Object.entries(s);m.forEach((function(e){v.data.forEach((function(t){e[0]=="dashboard_".concat(null==t?void 0:t.id)&&e[1].indexOf(l.type.replace("dashboard","dashboard_".concat(null==t?void 0:t.id)))>-1&&(p=[].concat(c(p),[l.type.replace("dashboard","dashboard_".concat(null==t?void 0:t.id))]))}))})),(null==v||null===(n=v.data)||void 0===n?void 0:n.length)==(null===(r=p)||void 0===r?void 0:r.length)?(O(!0),function(e,t,n){var r=["view","edit","delete"];e.forEach((function(e){r.forEach((function(r){e[0].indexOf(n)>-1&&r==t&&I(!0)}))}))}(m,d,"dashboard_deafult".concat(d))):0!=(null===(i=p)||void 0===i?void 0:i.length)&&0!=(null==v||null===(a=v.data)||void 0===a?void 0:a.length)&&(null==v||null===(o=v.data)||void 0===o?void 0:o.length)==(null===(u=p)||void 0===u?void 0:u.length)||(O(!1),I(!1))}}),[JSON.stringify(v.data),JSON.stringify(s),null==l?void 0:l.type]);var F=(null==l?void 0:l.type)&&(null==l?void 0:l.type.substr((null==l?void 0:l.type.lastIndexOf("."))+1)),R=Object.keys(s).indexOf("dashboard_deafult".concat(F));return r().createElement(b.Modal,{width:"80%",visible:l.show,title:r().createElement("div",{style:{display:"flex",alignItems:"center"}},r().createElement("span",null,_t1("画面管理")),r().createElement(b.Input,{placeholder:_t1("搜索画面名称"),style:{marginLeft:"20px",width:"200px"},onChange:function(e){var t,n=e.target.value,r=null!==(t=v.data)&&void 0!==t&&t.length?v.data.filter((function(e){return null==e?void 0:e.name.includes(n)})).slice(0,15):[];y((function(e){return z(z({},e),{},{currentData:r})})),x(n?r:[])}})),onOk:function(){u({show:!1,type:null}),O(!1),I(!1)},onCancel:function(){u(z(z({},l),{},{show:!1,type:null})),O(!1),I(!1)}},r().createElement(b.Card,null,r().createElement(b.Row,{style:{justifyContent:"center",alignItems:"center"}},r().createElement(b.Col,{span:10,style:{textAlign:"right"}},_t1("前台选择"),"："),r().createElement(b.Col,{span:14},r().createElement(ke,{input:{value:P,onChange:function(e){M(e)}}})))),r().createElement("span",{style:{textAlign:"right"}},r().createElement(b.Checkbox,{onChange:function(e){var n,r=e.target.checked,i=t().cloneDeep(s)||{},a=(null==l?void 0:l.type)&&(null==l?void 0:l.type.substr((null==l?void 0:l.type.lastIndexOf("."))+1));null!=v&&null!==(n=v.data)&&void 0!==n&&n.length&&null!=l&&l.type&&(r?v.data.forEach((function(e){i["dashboard_".concat(e.id)]?i["dashboard_".concat(e.id)]=Array.from(new Set([].concat(c(i["dashboard_".concat(e.id)]),[l.type.replace("dashboard","dashboard_".concat(null==e?void 0:e.id))]))):i["dashboard_".concat(e.id)]=[l.type.replace("dashboard","dashboard_".concat(null==e?void 0:e.id))]})):(v.data.forEach((function(e){i["dashboard_".concat(e.id)]&&i["dashboard_".concat(e.id)].indexOf(l.type.replace("dashboard","dashboard_".concat(null==e?void 0:e.id)))>-1&&i["dashboard_".concat(e.id)].splice(i["dashboard_".concat(e.id)].indexOf("dashboard_".concat(e.id,".").concat(a)),1)})),Object.keys(i).indexOf("dashboard_deafult".concat(a))>-1&&delete i["dashboard_deafult".concat(a)])),m(i),T(!1),O(r)},checked:S},"全选"),S||R?r().createElement(b.Checkbox,{onChange:function(e){var n=e.target.checked,r=t().cloneDeep(s)||{},i=(null==l?void 0:l.type)&&(null==l?void 0:l.type.substr((null==l?void 0:l.type.lastIndexOf("."))+1));i&&["view","eidt","delete"].forEach((function(e){i==e&&(r=function(e,t,n){return n?e=z(z({},e),{},d({},"dashboard_deafult".concat(t),[])):Object.keys(e).indexOf("dashboard_deafult".concat(t))>-1&&delete e["dashboard_deafult".concat(t)],e}(r,i,n))})),m(r),I(n)},checked:D},"新增画面默认选中"):null,r().createElement(b.Pagination,{current:_,showSizeChanger:!1,pageSize:15,total:(null==k?void 0:k.length)||(null==v||null===(n=v.data)||void 0===n?void 0:n.length),onChange:function(e,t){w(e);var n=(e-1)*t,r=e*t;y((function(e){return z(z({},e),{},{currentData:v.data.slice(n,r)})}))}})),r().createElement(b.Row,{gutter:16},null!=v&&null!==(o=v.currentData)&&void 0!==o&&o.length?v.currentData.map((function(e){return r().createElement(b.Col,{span:8,xs:24,sm:12,md:12,lg:8,xl:6,xxl:4,style:{margin:".5rem 0"}},r().createElement(b.Card,null,r().createElement("div",{className:"cover-div"},r().createElement("span",{className:"cover-focus-span"},null!=l&&l.type?r().createElement(b.Checkbox,{checked:!!(s["dashboard_".concat(null==e?void 0:e.id)]&&s["dashboard_".concat(null==e?void 0:e.id)].indexOf(l.type.replace("dashboard","dashboard_".concat(null==e?void 0:e.id)))>-1),value:"".concat(l.type.replace("dashboard","dashboard_".concat(null==e?void 0:e.id))),onChange:function(t){return function(e,t){var n,r,i=e.target.value,a=e.target.checked,o=null!=s&&null!==(n=s[t])&&void 0!==n&&n.length?s[t]:[];if(a)r=i.indexOf(".edit")>-1||i.indexOf(".delete")>-1?null!=o&&o.length&&o.indexOf("".concat(t,".view"))>-1?[].concat(c(o),[i]):[].concat(c(o),["".concat(t,".view"),i]):[].concat(c(o),[i]),p(d({},t,r),r,t,"dashboard_default");else if((null==o?void 0:o.length)>0){var l=o.filter((function(e){return e!=i})),u=null!=l&&l.length?l:"";p(d({},t,u),u,t)}else p(d({},t,""),"",t)}(t,"dashboard_".concat(null==e?void 0:e.id))}}):null),null!=e&&e.cover?r().createElement("div",{style:{height:120,overflow:"hidden"}},r().createElement("img",{src:e.cover,width:"100%"})):r().createElement("div",{className:"cover-div-picture",style:{height:120,textAlign:"center",lineHeight:"142px"}},r().createElement("img",{src:__webpack_require__(7055),style:{width:"100%",height:"100%"}})),r().createElement("div",{style:{marginTop:"1rem",textAlign:"center"}},_t1(null==e?void 0:e.name)))))})):r().createElement("div",{style:{margin:"0 auto"}},r().createElement(a.C,{is:"NoData"}))))};const te=moment;var ne=__webpack_require__.n(te);const re=function(e){var n,o=(0,i.use)("model").model,l=(0,i.use)("model.transI18n",{model:o}).modelI18n,c=(0,i.use)("model").atoms,u=f((0,E.useRecoilState)(c.wheres),2),s=(u[0],u[1]),d=(0,i.use)("redux",(function(e){return{user:e.user}})).user,p=t().cloneDeep(l),m=useI18n(),h=m.t;if(m.i18n,(null==d||!d.isSuper)&&null!=d&&null!==(n=d.permissions)&&void 0!==n&&n.length){var v=me(d,"node.view"),y=me(d,"department.view"),g=me(d,"role.view");l&&-1==y&&fe(p,p.form,"department"),l&&-1==v&&fe(p,p.form,"node"),l&&-1==g&&fe(p,p.form,"roles")}return(0,i.use)("auth.userExpand",{newSchema:p}),r().createElement(w.Model,{schema:p,modelKey:"user"},r().createElement(a.Page,{title:r().createElement("span",null,r().createElement(a.Icon,{svg:__webpack_require__(4671),className:"equipmentIcon"}),null==l?void 0:l.title),sider:r().createElement(w.ModelBlock,{name:"model.list.sidemenu"}),subTitle:r().createElement(w.ModelBlock,{name:"model.list.nav"}),actions:r().createElement(k.HasPermission,{FailureComponent:null,permission:"user.add"},r().createElement(b.Button,{type:"primary",onClick:function(){return i.app.go("/app/model/user/add")}},r().createElement(x.PlusOutlined,null),h("添加用户")))},r().createElement(w.ModelBlock,{name:"model.list.submenu"}),r().createElement(b.Tabs,{onChange:function(e){s({filters:e?{status:"active"==e?{or:[{status:{in:["active","sleep",""]}},{status:{$exists:!1},disabled:{$in:[null,!1]}}]}:e}:{}})}},[{key:"",value:"全部用户"},{key:"active",value:"注册用户"},{key:"close",value:"注销用户"}].map((function(e){return r().createElement(b.Tabs.TabPane,{key:e.key,tab:e.value})}))),r().createElement("div",{key:"model-list-subnav",style:{display:"flex",justifyContent:"space-between",marginBottom:".5rem"}},r().createElement(a.C,{is:"Model.Pagination"})," ",r().createElement(a.C,{is:"Model.ListSubMenu"})),r().createElement("div",{className:"logTable"},r().createElement(a.C,{is:"Model.DataTable"})),r().createElement("div",{key:"model-list-downnav",style:{display:"flex",justifyContent:"space-between",marginTop:".5rem"}},r().createElement(a.C,{is:"Model.ActionBar"}),r().createElement(a.C,{is:"Model.Pagination"}))))};function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oe="Win"==window.operatingSystem,le=function(e){var t=e.input;return r().createElement(r().Fragment,null,r().createElement(b.Input,{type:"text",name:"name",style:{display:"none"}}),r().createElement(b.Input,{name:"name",type:"text",autocomplete:"off",value:t.value,onChange:function(e){return t.onChange(e.target.value)}}))},ce=function(e){var n=e.input,a=useI18n(),o=a.t,l=(a.i18n,f(r().useState(n.value),2)),c=l[0],u=l[1],s=f(r().useState(),2),d=s[0],p=s[1];return r().useEffect((function(){m(v().mark((function e(){var r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"edit"==location.href.slice(location.href.lastIndexOf("/")+1)&&(n.value||t().isNumber(n.value)?(u(n.value/86400),n.onChange(n.value/86400)):(u(null),n.onChange(null))),e.next=4,(0,i.api)({name:"core/license"}).fetch("",{}).then((function(e){return e.json.remainingTime}));case 4:r=e.sent,p(r);case 6:case"end":return e.stop()}}),e)})))()}),[]),r().createElement(b.Space,{direction:"horizontal"},r().createElement(b.InputNumber,{min:0,max:d,value:c,onChange:function(e){var t=Number((e+"").replace(/[^0-9]/g,""));u(t=t>d?d:t),n.onChange(t)}}),"（",o("天"),"）")},ue=function(e){var t=useI18n(),n=t.t,i=(t.i18n,e.input),a=i.value,o=i.onChange;return r().useEffect((function(){a||o({type:"createTime"})}),[]),r().createElement(r().Fragment,null,r().createElement(b.Radio.Group,{style:{marginTop:"0.3rem"},onChange:function(e){var t=e.target.value;o("createTime"==t?{type:t}:{type:t,time:ne()(new Date).format("YYYY-MM-DD HH:mm:ss")})},value:a.type},r().createElement(b.Radio,{value:"createTime"},n("以创建时间开始")),r().createElement(b.Radio,{value:"custom"},n("自定义起始时间"))),r().createElement("div",{style:{marginTop:"1rem"}},a&&"custom"==a.type?r().createElement(b.Space,{direction:"vertical"},r().createElement(b.DatePicker,{disabledDate:function(e){return e<=ne()(new Date)},allowClear:!0,onChange:function(e,t){o(ae(ae({},a),{},t?{time:t}:{time:null}))},value:a.time?ne()(a.time):null,showTime:!0})):null))},se=function(e){var t,n=e.input,a=n.value,o=n.onChange,l=(0,i.use)("settings").settings,c=null==l||null===(t=l.warning)||void 0===t?void 0:t.warningFilter;return r().createElement(b.Select,{mode:"multiple",allowClear:!0,labelInValue:!0,onChange:function(e){var t=null!=e&&e.length?e.map((function(e){return{id:e.value,name:e.label}})):[];o(t)},value:null!=a&&a.length?a.map((function(e){return{label:e.name,value:e.id}})):[]},null!=c&&c.length?c.map((function(e){return r().createElement(b.Select.Option,{key:e.id},e.name)})):null)},de=function(e){var n,r,a;return(0,i.api)({name:"core/user/".concat(e.id)}).fetch("",{method:"PATCH",body:JSON.stringify(ae(ae({},e),{},{pwdExpireConfig:{hasPwdExpire:null==e||null===(n=e.pwdExpireConfigSetting)||void 0===n?void 0:n.hasPwdExpire,pwdExpire:null==e||null===(r=e.pwdExpireConfigSetting)||void 0===r||null===(a=r.pwdExpire)||void 0===a?void 0:a.time},expireUse:t().isNumber(e.expireUse)||e.expireUse?86400*e.expireUse:null}))}).then((function(){return b.message.success("保存用户成功")}))},pe=function(e){return(0,i.api)({name:"core/role/".concat(e.id)}).fetch("",{method:"PATCH",body:JSON.stringify(ae({},e))}).then((function(){return b.message.success("保存角色成功")}))},me=function(e,t){return e.permissions.indexOf(t)},fe=function(e,t,n){return delete e.properties[n],t.forEach((function(e,r){e==n&&t.splice(r,1),(null==e?void 0:e.key)==n&&t.splice(r,1)})),e},he=function(e){var t,n,a=e.input,o=e.id,l=f(r().useState({loading:!1,data:[]}),2),c=l[0],u=l[1];r().useEffect((function(){o&&(u({loading:!0,data:[]}),(0,i.api)({name:"core/t/".concat(o,"/d")}).query({fields:["id","name"]},{}).then((function(e){var t=e.items;u({loading:!1,data:t})})))}),[o]);var s=null!=a&&null!==(t=a.value)&&void 0!==t&&t.length?null==a?void 0:a.value.map((function(e){return{value:null==e?void 0:e.id,label:null==e?void 0:e.name}})):void 0;return r().createElement(b.Select,{mode:"multiple",labelInValue:!0,allowClear:!0,loading:c.loading,onChange:function(e){a.onChange(null!=e&&e.length?e.map((function(e){return{id:null==e?void 0:e.value,name:null==e?void 0:e.label}})):[])},value:s},null!=c&&null!==(n=c.data)&&void 0!==n&&n.length?c.data.map((function(e){return r().createElement(b.Select.Option,{value:null==e?void 0:e.id},null==e?void 0:e.name)})):null)},ve=function(e,n){var a=(0,i.use)("model").model,o=(0,i.use)("model.transI18n",{model:a}).modelI18n,l=t().cloneDeep(o),c=f(r().useState(l),2),s=c[0],p=c[1],m=(0,i.use)("settings").settings,h=[{key:"name",component:le},"email",{key:"phone",validate:function(e){return e&&!/^1(3|4|5|6|7|8|9)\d{9}$/.test(e)?"请输入正确的电话号码":null}},"roles","tableSetting","tableDataSetting",{key:"password",attrs:{type:"password"},validate:function(e,t){var n,r=null==t?void 0:t.name,i=null===(n=m.userExpand)||void 0===n?void 0:n.nousername;return e&&i&&e.includes(r)?"密码不能包含用户名":/^(?![^a-zA-Z]+$)(?!\D+$)/gi.test(e)?null:"密码必须为字母与数字组合"},component:R},{key:"password2",attrs:{type:"password"},validate:function(e,t){return e==t.password?/^(?![^a-zA-Z]+$)(?!\D+$)/gi.test(e)?null:"密码必须为字母与数字组合":"两次输入密码不一致"}},"remark",{key:"expireUse",component:ce},{key:"startTime",component:ue},"pwdExpireConfigSetting",{key:"warningFilter",component:se},"onlyNode","noChildDept",{key:"status",label:"休眠",component:Oe},"binddingtalk","bindwechatee","custom"];return r().useEffect((function(){(0,i.api)({name:"core/t/schema"}).query({fields:["id","name"]},{wheres:{function:{$regex:"dataAuth"}}}).then((function(i){var a,c=i.items,s=t().cloneDeep(l);if(n||(s.form=h),(null==e||!e.isSuper)&&null!=e&&null!==(a=e.permissions)&&void 0!==a&&a.length){var m=me(e,"node.view"),f=me(e,"role.view");o&&-1==m&&fe(s,h,"node"),o&&-1==f&&fe(s,h,"roles"),s.form=h}var v=null!=c&&c.length?c.map((function(e,t){return s.properties=ae(ae({},s.properties),{},d({},null==e?void 0:e.id,{title:"".concat((null==e?void 0:e.title)||(null==e?void 0:e.name)||(null==e?void 0:e.id)),type:"array",items:{},user:"base"})),{key:null==e?void 0:e.id,component:function(t){return r().createElement(he,u({},t,{id:null==e?void 0:e.id}))}}})):[];s.form=s.form.concat(v),p(s)}))}),[null==e?void 0:e.id,JSON.stringify(l)]),{schema:s}},ye=function(e){var t=e.children,n=e.invalid,a=e.handleSubmit,o=(e.showCode,e.submitting),l=t.filter((function(e){var t,n,r;return"expand"==(null==e||null===(t=e.props)||void 0===t||null===(n=t.field)||void 0===n||null===(r=n.schema)||void 0===r?void 0:r.user)}));return r().createElement(b.Form,null,r().createElement(b.Card,{style:{marginTop:0,borderTop:"none",color:"#333"}},r().createElement("div",{style:{background:"#f0f2f5",margin:"0 0 10px 0",padding:"10px"}},_t1("基础配置")),t.filter((function(e){var t,n,r,i,a;return"base"==(null==e||null===(t=e.props)||void 0===t||null===(n=t.field)||void 0===n||null===(r=n.schema)||void 0===r?void 0:r.user)||"base"==(null==e||null===(i=e.props)||void 0===i||null===(a=i.field)||void 0===a?void 0:a.user)})),r().createElement("div",{style:{background:"#f0f2f5",margin:"0 0 10px 0",padding:"10px"}},_t1("设备与报警信息管理")),t.filter((function(e){var t,n,r;return"devicewarn"==(null==e||null===(t=e.props)||void 0===t||null===(n=t.field)||void 0===n||null===(r=n.schema)||void 0===r?void 0:r.user)})),r().createElement("div",{style:{background:"#f0f2f5",margin:"0 0 10px 0",padding:"10px"}},_t1("安全配置")),t.filter((function(e){var t,n,r;return"safety"==(null==e||null===(t=e.props)||void 0===t||null===(n=t.field)||void 0===n||null===(r=n.schema)||void 0===r?void 0:r.user)})),null!=l&&l.length?r().createElement("div",{style:{background:"#f0f2f5",margin:"0 0 10px 0",padding:"10px"}},_t1("扩展信息")):null,t.filter((function(e){var t,n,r;return"expand"==(null==e||null===(t=e.props)||void 0===t||null===(n=t.field)||void 0===n||null===(r=n.schema)||void 0===r?void 0:r.user)})),r().createElement("div",{style:{background:"#f0f2f5",margin:"0 0 10px 0",padding:"10px"}},_t1("高级配置")),t.filter((function(e){var t,n,r;return"high"==(null==e||null===(t=e.props)||void 0===t||null===(n=t.field)||void 0===n||null===(r=n.schema)||void 0===r?void 0:r.user)})),r().createElement(b.Row,{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r().createElement(b.Button,{type:"primary",disabled:n,loading:o,onClick:a,htmlType:"submit"},_t1("保存")),r().createElement(b.Button,{style:{marginLeft:"10px"},onClick:function(){i.app.go("/app/model/User/list")}},(0,g._t)("取消")))))},ge=function(e){e.saveItem;var n=(0,i.use)("auth.user").user,o=ve(n).schema,l=t().cloneDeep(o),c=(0,i.use)("auth.userExpand",{newSchema:l});return r().createElement(r().Fragment,null,o?r().createElement(w.Model,{schema:c,modelKey:"user",props:{required:["name","phone","email","password","password2","roles"]}},r().createElement(a.C,u({is:"Model.DataForm"},e,{component:ye,success:!0,onSubmit:function(e){var n,r,a;(0,i.api)({name:"core/user"}).fetch("",{method:"POST",body:JSON.stringify(ae(ae({},e),{},{password:O()(e.password).toString(),password2:O()(e.password2).toString(),pwdExpireConfig:{hasPwdExpire:null==e||null===(n=e.pwdExpireConfigSetting)||void 0===n?void 0:n.hasPwdExpire,pwdExpire:null==e||null===(r=e.pwdExpireConfigSetting)||void 0===r||null===(a=r.pwdExpire)||void 0===a?void 0:a.time},expireUse:t().isNumber(e.expireUse)||e.expireUse?86400*e.expireUse:null}))}).then((function(e){e.json,b.message.success("用户添加成功"),i.app.go("/app/model/User/list")}))},onSubmitSuccess:function(){i.app.go("/app/model/User/list")}}))):null)},be=function(e){var t=e.saveItem,n=i.app.get("models").Role;return r().createElement(r().Fragment,null,n?r().createElement(w.Model,{schema:n,modelKey:"role"},r().createElement(a.C,u({is:"Model.DataForm"},e,{onSubmit:function(e){t(ae({},e))},onSubmitSuccess:function(){i.app.go("/app/model/Role/list")}}))):null)},_e=function(e){var t,n,o=e.id,l=e.mainmenus,s=e.saveItem,d=f(r().useState([]),2),p=d[0],m=d[1],h=f(r().useState(l),2),v=h[0],y=h[1],g=f(r().useState(),2),_=g[0],w=g[1],E=f(r().useState(null),2),k=E[0],C=E[1];r().useEffect((function(){(0,i.api)({name:"core/site"}).query({fields:["name","terminal","terminalType","terminalSize","theme","homeRoute","isDefault","settings","routes"]},{}).then((function(e){var t=e.items;return m(t)}))}),[]);var S=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return t&&t.length&&null!=t&&null!==(e=t.filter((function(e){var t;return(null==e||null===(t=e.site)||void 0===t?void 0:t.id)==(null==n?void 0:n.id)})))&&void 0!==e&&e.length?t.map((function(e){var t;return(null==e||null===(t=e.site)||void 0===t?void 0:t.id)==(null==n?void 0:n.id)?ae(ae({},e),{},{menu:r}):ae({},e)})):[].concat(c(t),[{site:n,menu:r}])};return r().createElement(r().Fragment,null,r().createElement(xe,u({},e,{setSite:w,setRoutes:m,input:{onChange:function(e){y((function(t){return S(t,_,e)})),s({id:o,mainmenu:S(v,_,e)})},value:null!=v&&v.length?null===(t=v.filter((function(e){var t;return(null==e||null===(t=e.site)||void 0===t?void 0:t.id)==(null==_?void 0:_.id)})))||void 0===t||null===(n=t[0])||void 0===n?void 0:n.menu:[]},initValue:v,saveItem:s,type:"user",site:_,routes:p})),null!=v&&v.length?null:r().createElement(a.C,{is:"NoData"}),r().createElement(b.Row,{gutter:{xs:8,sm:16,md:24,lg:32}},null!=v&&v.length?v.map((function(t,n){var i;return r().createElement(b.Col,{onMouseEnter:function(){C(n)},onMouseLeave:function(){C(null)},span:6,style:{marginBottom:"1rem"}},r().createElement(b.Card,{title:null==t||null===(i=t.site)||void 0===i?void 0:i.name,extra:r().createElement(x.DeleteOutlined,{style:{display:n==k?"block":"none"},onClick:function(){var e=v.filter((function(e){var n,r;return(null==e||null===(n=e.site)||void 0===n?void 0:n.id)!=(null==t||null===(r=t.site)||void 0===r?void 0:r.id)}));y(e),s({id:o,mainmenu:e})}})},r().createElement(a.C,u({is:"MenuEditTree"},e,{input:{onChange:function(e){y((function(n){return S(n,null==t?void 0:t.site,e)})),s({id:o,mainmenu:S(v,null==t?void 0:t.site,e)})},value:t.menu},site:null==t?void 0:t.site,routes:p,type:"userModal"}))))})):null))},we=function(e){var t=e.id,n=(0,i.use)("model").model,o=(0,i.use)("model.transI18n",{model:n}).modelI18n;return r().createElement(r().Fragment,null,r().createElement(a.C,u({is:"Model.TabsForm"},e,{schema:o,schemaKey:"highSetting.schema",customSchema:[{name:"mainmenu",title:_r("前台系统菜单"),type:"object",showInList:!1,renderComponent:function(e){var n;return r().createElement(_e,u({},e,{id:t,mainmenus:null==e||null===(n=e.item)||void 0===n?void 0:n.mainmenu,saveItem:pe}))}}],saveItem:pe})))},Ee=function(e){var t=e.children,n=(e.change,e.invalid,e.handleSubmit);return e.submitting,(0,i.use)("form").formState.values,r().createElement(b.Form,{onSubmit:n},t)},ke=function(e){var t,n=e.input,a=n.value,o=n.onChange,l=e.init,c=f(r().useState({loading:!1,data:[]}),2),u=c[0],s=c[1];r().useEffect((function(){s(ae(ae({},u),{},{loading:!0})),(0,i.api)({name:"core/site"}).query({fields:["name","terminal","terminalType","terminalSize","theme","homeRoute","isDefault","settings","routes"]},{}).then((function(e){var t=e.items;return s({loading:!1,data:t})}))}),[]);var d=a?ae({label:null==a?void 0:a.name,value:null==a?void 0:a.value},a):a,p=[];return null==u||null===(t=u.data)||void 0===t||!t.length||u.data.forEach((function(e){(null!=l&&l.length?l.findIndex((function(t){var n;return(null==t||null===(n=t.site)||void 0===n?void 0:n.id)==(null==e?void 0:e.id)})):-1)<0&&p.push(e)})),r().createElement(b.Select,{style:{width:200},value:d,loading:null==u?void 0:u.loading,labelInValue:!0,onChange:function(e){o({id:null==e?void 0:e.value,name:null==e?void 0:e.label})}},null!=p&&p.length?p.map((function(e){return r().createElement(b.Select.Option,{value:null==e?void 0:e.id},null==e?void 0:e.name)})):null)},xe=function(e){var n=useI18n(),i=n.t,o=(n.i18n,e.input),l=e.setSite,c=e.initValue,s=e.routes,d=e.site,p=(e.setRoutes,null==e?void 0:e.type),m=f(r().useState(!1),2),h=m[0],v=m[1],y={title:i("前台"),type:"object",properties:{site:{title:i("前台"),type:"object",properties:{}}},form:[{key:"site",component:function(e){return r().createElement(ke,u({},e,{init:c}))}}],required:["site"]};return r().createElement("div",null,r().createElement(b.Button,{onClick:function(){return v(!0)},style:{marginBottom:"1rem"}},i("添加")),r().createElement(b.Modal,{destroyOnClose:!0,title:r().createElement("span",{style:{padding:".5rem"}},i("菜单")),width:800,bodyStyle:{padding:20},footer:null,visible:h,onOk:function(e){v(!1)},onCancel:function(e){v(!1),l(null)}},r().useMemo((function(){return r().createElement(r().Fragment,null,"user"==p||"role"==p?r().createElement(a.C,{is:"I18nSchemaForm",formKey:"".concat(y,"-").concat(h),schema:y,onChange:function(e){l(null==e?void 0:e.site)},component:function(e){return r().createElement(Ee,e)}}):null)}),[p,h]),t().isEmpty(d)?null:r().createElement(a.C,{is:"MenuEditTree",input:o,type:p,site:d,routes:s,handleCancel:function(){}})))},Ce=function(e){var n=useI18n(),o=n.t,l=(n.i18n,e.id),s=(0,i.use)("auth.user").user,d=ve(s,l).schema,p=t().cloneDeep(d),m=(0,i.use)("auth.userExpand",{newSchema:p}),f=[{name:"mainmenu",title:o("前台系统菜单"),type:"object",showInList:!1,renderComponent:function(e){var t;return r().createElement(_e,u({},e,{id:l,mainmenus:null==e||null===(t=e.item)||void 0===t?void 0:t.mainmenu,saveItem:de}))}}];return l==(null==s?void 0:s.userId)&&(f=[].concat(c(f),[{name:"wechatQrcode",title:o("微信绑定"),type:"object",showInList:!1,renderComponent:function(e){return r().createElement(a.C,u({is:"WechatQrcode"},e))}}])),r().createElement(r().Fragment,null,r().createElement(a.C,u({is:"Model.TabsForm"},e,{schema:m,schemaKey:"highSetting.schema",customSchema:f,saveItem:de})))},Se=function(e){var n=useI18n(),a=n.t,o=(n.i18n,(0,i.use)("model.getItems").getItems),l=(0,i.use)("model").atoms,c=f((0,E.useRecoilState)(l.selected),2),s=c[0],d=c[1],p=s&&!t().isEmpty(s);return r().createElement(b.Menu.Item,u({},e,{key:"action_delete_openid",onClick:function(){p&&Promise.all(s.map((function(e){return(0,i.api)({name:"core/user/".concat(null==e?void 0:e.id)}).fetch("",{method:"PATCH",body:JSON.stringify({openid:""})}).then((function(e){return e.json}))}))).then((function(e){b.message.success(a("批量解绑成功!")),d([]),o()}))},disabled:!p}),a("批量解绑openid"))},Oe=function(e){var t,n,a,o=e.input,l=o.value,c=o.onChange,s=f(r().useState(!1),2),d=s[0],p=s[1],m=(0,i.use)("form").form,h=null===(t=m.getState().values)||void 0===t?void 0:t.disabled,v=null===(n=m.getState().values)||void 0===n?void 0:n.status,y=f(r().useState(l?"active"!=l:h),2),g=y[0],b=y[1],_=null===(a=m.getState().values)||void 0===a?void 0:a.timeoutTimeUse,w=ne()(_).format("YYYY-MM-DD HH:mm:ss"),E=ne()().format("YYYY-MM-DD HH:mm:ss"),k=ne()(w).isBefore(E),x=i.app.get("form_fields").checkbox.component;return r().createElement(x,u({},e,{input:{checked:g,value:g,onChange:function(e){var t=e.target.checked;k&&"sleep"==v?p(!0):(c(t?"sleep":"active"),b(t))},disabled:d}}))};Oe.useGroup=!1;var je={name:"user",resource:"core/user",type:"object",icon:"user",title:_r("用户"),properties:{name:{type:"string",title:_r("用户名"),description:_r("用户名不可以重复"),user:"base"},email:{type:"string",title:_r("邮箱"),format:"email",user:"base"},phone:{type:"string",title:_r("电话"),user:"base"},password:{title:_r("密码"),type:"string",maxLength:30,minLength:6,showInList:!1,description:_r("用户登录密码需是6-16位数字与字母的组合"),user:"base"},password2:{title:_r("重复密码"),type:"string",maxLength:30,minLength:6,fieldType:"password",showInList:!1,description:_r("6-16位数字与字母的组合"),user:"base"},roles:{type:"array",title:_r("用户角色"),notInclude:!0,description:_r("用户角色决定了用户的权限，用户可以属于多个角色"),items:{type:"object",name:"Role",relateTo:"Role",properties:{id:{type:"string"},name:{type:"string"}}},field:{user:"base"}},tableSetting:{type:"array",title:_r("表管理"),items:{type:"object",properties:{}},fieldType:"table",user:"devicewarn",field:{component:function(e){return r().createElement(a.C,u({is:"TableListSelecttMultiple"},e,{filter:{function:{$not:{$regex:"dataAuth"}}}}))}}},tableDataSetting:{type:"array",title:_r("管理表记录"),properties:{},items:{type:"object",properties:{}},fieldType:"tableData_select",noRoute:!1,selectType:"multiple",user:"devicewarn"},onlyNode:{title:_r("仅管理个人设备"),type:"boolean",description:_r("勾选后，该用户将无法管理所属部门下的设备"),user:"devicewarn"},noChildDept:{title:_r("不查看子部门报警数据"),type:"boolean",description:_r("勾选后将无法查看用户所属部门的子部门及其子部门的报警数据"),user:"devicewarn"},binddingtalk:{title:_r("绑定钉钉"),type:"boolean",description:_r("绑定钉钉后，用户可以接收到平台推送的钉钉消息"),user:"high"},bindwechatee:{title:_r("绑定企业微信"),type:"boolean",description:_r("绑定企业微信后，用户可以在企业微信中接收到平台推送的消息"),user:"high"},status:{title:"用户状态",type:"string",enum:["active","sleep","close"],enum_title:["激活","休眠","注销"],user:"high"},remark:{title:_r("备注"),type:"string",user:"base"},startTime:{type:"object",title:_r("起始时间"),properties:{type:{title:_r("类型"),type:"string"},time:{type:"string",title:_r("起始时间")}},user:"safety"},expireUse:{title:_r("有效时长"),type:"number",description:_r("最大时长为项目的有效时长，且不可输入小数"),user:"safety"},warningFilter:{title:_r("报警分组"),type:"array",items:{type:"object",properties:{id:{type:"string",title:"id"},name:{type:"string",title:"名称"}}},user:"devicewarn"},pwdExpireConfigSetting:{title:_r("强制修改密码"),type:"object",properties:{hasPwdExpire:{title:_r("开启"),type:"boolean"},pwdExpire:{title:_r("时长"),type:"object",properties:{},field:{component:function(e){return r().createElement(a.C,u({is:"UserOverTime"},e))}}}},user:"safety",form:["*"],description:_r("启用时，定义修改密码的时长")},openid:{title:"openid",type:"string"},createTime:{title:_r("创建时间"),type:"string",format:"date-time"}},editableFields:["openid"],orders:{createTime:"DESC"},partialSave:!0,forceGetItem:!0,permission:{view:!0,add:!0,edit:!0,delete:!0},dataTableProps:function(e){return{scroll:{x:1e3},yScroll:!0,columns:e.map((function(e){return"__action__"==e.key?ae(ae({},e),{},{width:80}):ae(ae({},e),{},{width:e.width||100})}))}},formProps:{component:ye},itemActions:[function(e){var t=e.item,a=(0,i.use)("model.save",t).saveItem,o=(0,i.use)("model.delete",t).deleteItem,l=f((0,n.useState)(!0),2),c=l[0],u=l[1],s=function(e){var t=e.target.checked;u(t)},d=c?r().createElement(r().Fragment,null,r().createElement("div",null,"该用户将彻底删除，请谨慎操作!"),r().createElement(b.Checkbox,{onChange:s,defaultChecked:"true"},"彻底删除")):r().createElement(r().Fragment,null,r().createElement("div",null," 该用户将被注销，注销后无法恢复激活状态，请谨慎操作!!"),r().createElement(b.Checkbox,{onChange:s,defaultChecked:"true"},"彻底删除"));return r().createElement("div",null,r().createElement(b.Button,{onClick:function(){return i.app.go("/app/model/User/".concat(t.id,"/edit"))},style:{background:"#5FB698",borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px"}},r().createElement(x.EditOutlined,{style:{color:"#fff"}})),r().createElement(b.Popconfirm,{title:d,onConfirm:function(){c?o():(a({status:"close",id:t.id}),b.message.success("注销成功"))},onCancel:function(e){b.message.error("取消")},okText:"确认",cancelText:"取消"},r().createElement(b.Button,{style:{background:"#83CFEA"}},r().createElement(x.DeleteOutlined,{style:{color:"#fff"}}))))}],form:[{key:"name",component:le},"email","phone","roles","tableSetting","tableDataSetting",{key:"password",component:R},"remark",{key:"expireUse",component:ce},{key:"startTime",component:ue},{key:"warningFilter",component:se},"pwdExpireConfigSetting","onlyNode","noChildDept",{key:"status",label:"休眠",component:Oe},"binddingtalk","bindwechatee","custom"],formEffect:function(e){e.useField("expireUse",(function(t){t.value?e.setFieldData("startTime",{display:!0}):e.setFieldData("startTime",{display:!1})}));var t=e.getState().values||{},n=t.id,r=t.isSuper;e.setFieldData("status",{display:"admin"!=n&&1!=r})},blocks:{"model.list.sidemenu":function(e){return r().createElement(a.C,u({is:"DepartmentTressSidebar"},e))}},batchActions:["delete",function(e){return r().createElement(Se,e)}],components:{DataForm:function(e){var t=(0,i.use)("model.save",e).saveItem;return e.id?r().createElement(Ce,u({id:null==e?void 0:e.id},e,{saveItem:de})):r().createElement(ge,{saveItem:t})},DataEmpty:function(e){return r().createElement(b.Card,null,r().createElement(a.C,{is:"NoData"}))},ListPage:function(e){return r().createElement(re,e)}},searchFields:["name","email"],required:["name","email","phone","roles"],listFields:["name","email","status"],projectFields:["name","email","status","timeoutTimeUse","disabled"],filters:{submenu:["name","email","phone","remark"]},is_extend:!0,relations:{},fieldRender:{name:function(e){var t=e.item,n=e.wrap;return"sleep"==t.status?r().createElement(n,null,r().createElement(b.Tooltip,{title:"用户【".concat(t.name,"】已处于休眠状态，无法登录!")},r().createElement("span",null,t.name))):r().createElement("span",null,t.name)},expireUse:function(e){var t=e.item,n=e.wrap,i=useI18n(),a=i.t;return i.i18n,r().createElement(n,null,r().createElement("span",null,t.expireUse?"".concat(t.expireUse/86400).concat(a("天")):a("空")))},startTime:function(e){var t=e.item,n=e.wrap,i=useI18n(),a=i.t,o=(i.i18n,t.startTime&&"custom"==t.startTime.type?t.startTime.time:t.startTime&&"createTime"==t.startTime.type?ne()(t.createTime).format("YYYY-MM-DD HH:mm:ss"):a("空"));return r().createElement(n,null,r().createElement("span",null,o))},openid:function(e){var t=e.item,n=e.wrap;return r().createElement(n,null,r().createElement("span",null,t.openid?t.openid:_r("空")))},createTime:function(e){var t=e.item,n=e.wrap;return r().createElement(n,null,r().createElement("span",null,t.createTime?ne()(t.createTime).format("YYYY-MM-DD HH:mm:ss"):_r("空")))},tableDataSetting:function(e){var t,n=e.item,i=e.wrap;return r().createElement(i,null,r().createElement("span",null,null!=n&&null!==(t=n.tableDataSetting)&&void 0!==t&&t.length?null==n?void 0:n.tableDataSetting.map((function(e){var t;return null!=e&&null!==(t=e.selectRecord)&&void 0!==t&&t.length?e.selectRecord.map((function(e){var t;return null==e||null===(t=e._label)||void 0===t?void 0:t.name})).join(",")+",":null})):"空"))},tableSetting:function(e){var t,n=e.item,i=e.wrap;return r().createElement(i,null,r().createElement("span",null,null!=n&&null!==(t=n.tableSetting)&&void 0!==t&&t.length?null==n?void 0:n.tableSetting.map((function(e){return null==e?void 0:e.title})).join(","):"空"))},status:function(e){var t=e.item,n=e.wrap,i={active:"激活",sleep:"休眠",close:"注销"},a=null!=t&&t.disabled?"sleep":"active",o=null==t?void 0:t.timeoutTimeUse,l=ne()(o).format("YYYY-MM-DD HH:mm:ss"),c=ne()().format("YYYY-MM-DD HH:mm:ss"),u=ne()(l).isBefore(c),s=null!=t&&t.status?null==t?void 0:t.status:a;return u?r().createElement(n,null,r().createElement("span",null,"sleep"==(null==t?void 0:t.status)?r().createElement(r().Fragment,null,r().createElement(b.Tooltip,{title:"该用户登录有效时长已过期，无法取消休眠!"},r().createElement("span",null,"休眠"))):i[s])):r().createElement(n,null,r().createElement("span",null,i[s]))}}};const De={Role:{name:"role",resource:"core/role",type:"object",icon:r().createElement(a.Icon,{svg:__webpack_require__(5220)}),title:"角色",rolePermission:[{key:"role.view",title:_r("查看")}],properties:{name:{title:_r("名称"),type:"string",description:_r("角色名称不可以重复")},description:{title:_r("描述"),type:"string",description:_r("定义角色详细描述")},users:{type:"array",title:_r("用户列表"),notInclude:!0,description:_r("定义具有该角色的用户"),items:{type:"object",name:"User",relateTo:"User",properties:{Id:{type:"string"},name:{type:"string"}}}},disabled:{type:"boolean",title:_r("禁用"),description:_r("禁用后该角色的所有用户不可以登录平台")},permission:{type:"array",title:_r("角色权限"),items:{},showInList:!1}},components:{DataEmpty:function(e){return r().createElement(b.Card,null,r().createElement(a.C,{is:"NoData"}))},DataForm:function(e){var t=(0,i.use)("model.save",e).saveItem;return e.id?r().createElement(we,u({id:null==e?void 0:e.id},e,{saveItem:de})):r().createElement(be,{saveItem:t})}},orders:{createTime:"DESC"},itemActions:["edit","delete",function(e){var n=e.item,a=(0,i.use)("model.getItems").getItems,o=n.id;return r().createElement(b.Button,{onClick:function(){(0,i.api)({name:"core/role"}).fetch("/".concat(o),{method:"GET"}).then((function(e){var r,o,l,c=null===(r=e.json)||void 0===r?void 0:r.permission,u=null===(o=e.json)||void 0===o?void 0:o.users,s=null===(l=e.json)||void 0===l?void 0:l.disabled;(0,i.api)({name:"core/role"}).fetch("",{method:"POST",body:JSON.stringify(t().omit(ae(ae({},n),{},{permission:c,users:u,disabled:s,name:n.name+"副本".concat(y(4,16))}),"id"))}).then((function(){b.message.success("复制成功"),a()}))}))}},"复制")}],permission:{view:!0,add:!0,edit:!0,delete:!0},form:["name","description","users",{key:"permission",component:function(e){var n=useI18n(),o=n.t,l=(n.i18n,(0,i.use)("iot.cmdb.models")),u=l.models,s=l.loading,d=f(r().useState(null),2),p=d[0],m=d[1];if(r().useEffect((function(){if(!s||null!=u){var e=i.app.get("models");Object.keys(e).indexOf("Table")>-1&&(0,i.api)({name:"core/t/schema"}).query({fields:["schema","id"]},{}).then((function(e){var n=e.items,r=t().compact(n.map((function(e){return{schema:e.schema,name:e.id,title:o(null==e?void 0:e.title)}}))).map((function(e){var t=e.name,n=e.rolePermission||[{key:"ext_".concat(t,".view"),title:o("查看")},{key:"ext_".concat(t,".add"),title:o("创建")},{key:"ext_".concat(t,".edit"),title:o("修改")},{key:"ext_".concat(t,".delete"),title:o("删除")}];return{key:"ext_".concat(t),title:o(null==e?void 0:e.title),children:[].concat(c(n),c(B(o)[t]?B(o)[t].children:[]))}}));m((function(e){return[].concat(c(e),c(r))}))}));var n=Object.values(e).filter((function(e){return!(null!=e&&e.noAuth)})).filter((function(e){return(e.name||e.title)&&0!=(e.name||e.title).indexOf("auth_")})).map((function(e){var t=null==e?void 0:e.name,n=(null==e?void 0:e.rolePermission)||[{key:"".concat(t,".view"),title:o("查看")},{key:"".concat(t,".add"),title:o("创建")},{key:"".concat(t,".edit"),title:o("修改")},{key:"".concat(t,".delete"),title:o("删除")}];return null!=e&&e.rolePermission&&(n=null==e?void 0:e.rolePermission.map((function(t){var n=f(t.key.split("."),2)[1];return z(z({},t),{},{key:"".concat(null==e?void 0:e.name,".").concat(n)})}))),{key:t,title:e.title,children:[].concat(c(n),c(B(o)[t]?B(o)[t].children:[]))}})),r=Object.keys(B(o)).filter((function(t){return null==e[t]})).map((function(e){return z(z({},B(o)[e]),{},{key:e})})),a=(u&&Object.values(u).map((function(e){return{key:"=models-".concat(e.id),title:e.name,children:i.app.array("modelPermissions").map((function(t){return t(e,"models-".concat(e.id))}))}})),[["camera",o("视频监控地址")],["play",o("视频监控播放")],["live",o("视频监控连接")]].map((function(e){return{key:e[0],title:o(e[1]),children:[{key:"".concat(e[0],".view"),title:o("查看")},{key:"".concat(e[0],".add"),title:o("创建")},{key:"".concat(e[0],".edit"),title:o("修改")},{key:"".concat(e[0],".delete"),title:o("删除")}]}}))),l=n.concat(r).concat(a);m(l.filter((function(e){return Boolean(e)})))}}),[u]),null==p)return r().createElement(a.Loading,null);var h=e.input,v=(e.options,e.label,e.meta,e.field,e.bodyStyle);return r().createElement(b.Card,{bodyStyle:v},r().createElement(K,{permission:p,inputOnChange:h.onChange,defaultCheckedKeys:h.value||["homeDashboardConfig.view","homeDashboardConfig"]}))}},"disabled"],searchFields:["name"],forceGetItem:!0,is_extend:!0,required:["name","description"],listFields:["name","description","disabled"]},User:je,tRecord:{resource:"core/t/record",type:"object",icon:r().createElement(a.Icon,{svg:__webpack_require__(6018)}),title:_r("资产配置"),properties:{tableData:{title:_r("设备"),type:"object",properties:{name:{title:_r("名称"),type:"string"}}},tableInfo:{title:_r("设备表"),type:"object",properties:{}},"tableData.name":{title:_r("名称"),type:"string"}},form:["*","tableData","tableInfo","tableData.name"],listFields:["tableData","tableInfo","tableData.name"]},Licenseinfo:{name:"Licenseinfo",resource:"core/license/machineInfo",type:"object",title:_r("授权历史"),properties:{baseBoardSerialNumber:{type:"string",title:_r("主板序列号")},biosSerialNumber:{title:_r("biso序列号"),type:"string"},biosVersion:{title:_r("biso版本"),type:"string"},cpuId:{title:_r("cpu序列号"),type:"string"},macAddress:{title:_r("mac地址"),type:"string"},time:{type:"string",title:_r("时间"),format:"date-time",width:250},uuid:{title:_r("系统标识"),typee:"string"},biosAddr:{title:_r("bios地址"),typee:"string"}},filters:{submenu:[]},components:{DataEmpty:function(e){return r().createElement(b.Card,null,r().createElement(a.C,{is:"NoData"}))},ListPage:function(e){var n=(0,i.use)("model").model,o=n.icon||n.name;return t().isString(o)&&(o=r().createElement(a.Icon,{name:o})),r().createElement(a.Page,{title:r().createElement("span",null,r().createElement(x.ArrowLeftOutlined,{onClick:function(){return history.back()}}),null==n?void 0:n.icon," ",null==n?void 0:n.title)},r().createElement(a.C,{is:"Model.DataTable"}))}},dataTableProps:function(e){return{scroll:{x:1500},columns:e.map((function(e){return"__action__"==e.key?ae(ae({},e),{},{width:280}):ae(ae({},e),{},{width:e.width||100})}))}},projectFields:["message"],forceGetItem:!0,orders:{time:"DESC"},listFields:oe?["baseBoardSerialNumber","biosSerialNumber","biosVersion","cpuId","macAddress","time"]:["cpuId","time","uuid","biosAddr"],form:oe?["baseBoardSerialNumber","biosSerialNumber","biosVersion","cpuId","macAddress","time"]:["cpuId","time","uuid","biosAddr"]},SafeZone:{name:"safezone",resource:"core/safezone",type:"object",icon:r().createElement(a.Icon,{svg:__webpack_require__(5220)}),title:"安全区",properties:{num:{type:"number",title:"序号",width:150},name:{type:"string",title:"安全区",field:{validate:function(e){return e&&e.trim()?null:"安全区不能为空"}}}},components:{DataEmpty:function(e){return r().createElement(b.Card,null,r().createElement(a.C,{is:"NoData"}))}},itemActions:[],orders:{num:"ASC"},permission:{view:!0,add:!1,edit:!1,delete:!1},rolePermission:[{key:"safezone.view",title:"查看"},{key:"safezone.edit",title:"修改"}],forceGetItem:!0,is_extend:!0,form:["num","name"],required:["name"],listFields:["num","name"],editableFields:["name"],batchActions:null}};function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Ae={"auth.userExpand":function(e){return function(e,t){var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ie(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}(_.keys((null==t?void 0:t.properties)||[]));try{for(r.s();!(n=r.n()).done;){var i=n.value;null!=e&&e.properties&&t.properties&&(e.properties[i]=t.properties[i],e.properties[i].user="expand"),null==e||e.form.push(i),null==e||e.filters.submenu.push(i)}}catch(e){r.e(e)}finally{r.f()}return e}(e.newSchema,((0,i.use)("settings").settings||{}).userExpand)}};var Te=["permission","FailureComponent","children"];i.app.use({name:"iot.auth",models:De,hooks:Ae,components:{CheckPermission:function(e){var t,n,o,l=e.permission,c=e.FailureComponent,u=e.children,s=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,Te),d=null===(t=i.app.context)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.license;return!d||(null===(o=d.feature)||void 0===o?void 0:o.includes(l))?Object.keys(s).length>0?r().cloneElement(u,s):u:r().isValidElement(c)?c:_.isFunction(c)?r().createElement(c,null):c||r().createElement("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},r().createElement(a.C,{is:"NoData",description:_t1("无对应权限")}))}},menuItems:[{title:"权限管理",icon:"User",permission:"user.view",children:[{title:"用户管理",url:"/app/model/User/list",icon:"Users",permission:"user.view"},{title:"角色管理",url:"/app/model/Role/list",icon:"Role",permission:"role.view"},{title:"部门管理",url:"/app/model/Department/list",icon:"Department",permission:"department.view"}]}],frontMenuItems:[{title:"用户管理",url:"/app/model/User/list",icon:"User",permission:"user.view"},{title:"角色管理",url:"/app/model/Role/list",icon:"Role",permission:"role.view"},{title:"部门管理",url:"/app/model/Department/list",icon:"Department",permission:"department.view"}],field_render:[function(e,t){return"object"==t.type&&"User"==t.name?function(e){var t=e.value,n=e.wrap;return r().createElement(n,null,void 0!==t?r().createElement("span",null,r().createElement(a.Icon,{name:"user"})," ",t.username):"")}:e}]})})()})();
//# sourceMappingURL=front.js.map