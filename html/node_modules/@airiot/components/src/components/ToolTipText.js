import React, { useState } from 'react';
import {Tooltip}  from 'antd';


const styles = {
  overflow: "hidden",
  textOverflow: "ellipsis",
  whiteSpace: "nowrap",
  display: 'inline-block',
  width:'100%'
}
const TooltipText = ({ text, itemKey }) => {
    const [tooltipStates, setTooltipStates] = useState({});
    const isBeyond = (e,itemKey) => {
        const textContent = e.target;
        const clientW = textContent.clientWidth;
        const scrollW = textContent.scrollWidth;
        const isOverflow = scrollW > clientW;
        if (!isOverflow && tooltipStates[itemKey]) {
          handleLeave(itemKey);
        }
      
        return isOverflow;
      }
  
      const handleEnter = (e, itemKey) => {
        const isOverflow = isBeyond(e, itemKey);
        setTooltipStates((prevStates) => ({ ...prevStates, [itemKey]: isOverflow }));
      };
      
      const handleLeave = (itemKey) => {
        setTooltipStates((prevStates) => ({ ...prevStates, [itemKey]: false }));
      };

    return (
      <Tooltip 
        title={text} 
        open={tooltipStates[itemKey]}
        onClose={() => handleLeave(itemKey)}
          > 
            <span
               style={styles}
              onMouseEnter={(e) => {
                handleEnter(e, itemKey);
              }}
              onMouseLeave={() => handleLeave(itemKey)}>
          {text}
        </span>
      </Tooltip>
    );
  };

export default TooltipText;