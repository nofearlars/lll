import React from 'react';
import { app, Block, use } from 'xadmin'
import { Popconfirm, Tooltip, Button, message } from 'antd';
import { DeleteOutlined } from '@ant-design/icons';

const CustomDeleteButton = ({ confirmTitle, deleteMessage, props }) => {
    const { model } = use('model')
    const { canDelete } = use('model.permission');
    const { deleteItem } = use('model.delete', props);
    const onDelete = () => {
        deleteItem().then(() => {
            message.success(deleteMessage)
        })
    }
    if (canDelete) {
        return (
            <Popconfirm
                key="action-delete"
                title={confirmTitle}
                onConfirm={onDelete}
                okText="确认"
                cancelText="取消"
            >
                <Tooltip placement="top" title="删除">
                    <Button key="action-delete" size="small" className="model-list-action" type="danger">
                        <DeleteOutlined />
                    </Button>
                </Tooltip>
            </Popconfirm>
        );
    }

    return null;
};

export default CustomDeleteButton;