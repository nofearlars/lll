import _ from "lodash"

const getShowField = (schema) => {
  for (let key of _.keys(schema?.properties)) {
    if (schema?.properties[key]?.isShowField) {
      return key
    }
  }
  return null
}

const getFirst = (schema) => {
  for (let key of schema?.form) {
    if (schema?.properties[key]?.listFields && key.indexOf('upload') === -1 && !schema?.properties[key].relate) {
      return key
    }
  }
  return null
}

const getLabel = ({ recordLabel, schema, showField }) => {
  let titlekey = recordLabel || showField || getFirst(schema) || 'id'
  
  return titlekey
}

export { getLabel }
