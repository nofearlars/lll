import React from "react"
import { Spin } from "antd"
// 用来判断是否展开下拉框
const useDropdown = (props) => {
  const { fetch } = props
  const [ ready, setReady ] = React.useState(false)
  const onDropdownVisibleChange = async () => {
    if (!ready) {
      await fetch()
    }
    setReady(true)
  }

  const dropdownRender = (originNode, props) => {

    return ready ? originNode : <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', height: '200px' }}><Spin></Spin></div>
  }

  return { ready, onDropdownVisibleChange, dropdownRender }
}

export default useDropdown
