import _ from 'lodash';
import useField from './useField'

const useDependNameName = ({ depend, name }) => {
  if (_.isString(name)) {
    const nameList = name.split('.')
    nameList[nameList.length - 1] = depend
    return nameList.join('.')
  }
  return null
}

const useDepend = (props) => {
  const { depend, name } = props
  const dependName = useDependNameName({ depend, name })
  const dependValue = useField(dependName)
  return dependValue
}

export default useDepend
