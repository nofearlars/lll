import React from "react"
import { C } from 'xadmin-ui'
import { Collapse } from 'antd'
import SelectTableRecord from "../components/SelectTableRecord"
import SelectTable from "../components/SelectTable"
import ModelPointTable from "../components/ModelPointTable"
import PointTable from "../components/PointTable"
import SelectTableSchema from "../components/SelectTableSchema"
import SelectDepartment from "../components/SelectDepartment"
import TabelSchemaTabs from "../components/TabelSchemaTabs"

const input = { 
  onChange (e) {
    console.log(e)
  },
  value: {id: "fd", name: "sf", parent: {id: "web", name: "研发部"}}
}

const { Panel } = Collapse;
// 例子可以在这个结构里添加
const components = [
  {
    title: _r('表选择器'),
    children: [
      {
        title: _r('单选'),
        Comp: () => <SelectTable style={{ width: 200 }} onChange={value => { console.log(value) }}></SelectTable>
      },
      {
        title: _r('多选'),
        Comp: () => <SelectTable style={{ width: 200 }} func='device' mode='multiple'></SelectTable>
      }
    ]
  },
  {
    title: _r('表记录选择器'),
    children: [
      {
        title: _r('全部表单选'),
        Comp: () => <SelectTableRecord style={{ width: 200 }}></SelectTableRecord>
      },
      {
        title: _r('模型表单选'),
        Comp: () => <SelectTableRecord style={{ width: 200 }} func='device'></SelectTableRecord>
      },
      {
        title: _r('全部表多选'),
        Comp: () => <SelectTableRecord style={{ width: 200 }} multiple={true} ></SelectTableRecord>
      },
      {
        title: _r('单表单选'),
        Comp: () => <SelectTableRecord style={{ width: 200 }} table='myc11023' ></SelectTableRecord>
      },
      {
        title: _r('单表多选'),
        Comp: () => <SelectTableRecord style={{ width: 200 }} table='sadasdsf' mode='multiple' ></SelectTableRecord>
      },
    ]
  },
  {
    title: _r('表属性选择'),
    children: [
      {
        title: '只传表id',
        Comp: () => {
          return <SelectTableSchema style={{ width: 200 }} table='wxh测试数据表' input={{onChange: value => { console.log(value) }}}></SelectTableSchema>
        } 
      },
      {
        title: '传表id+记录id',
        Comp: () => {
          return <SelectTableSchema style={{ width: 200 }} table='myctest2332' id='63240e8cc1ab9185e3334c57'></SelectTableSchema>
        } 
      },
    ]
  },
  {
    title: _r('模型数据点选择'),
    Comp: () => <ModelPointTable fullLable={true} type="checkbox" onChange={e => { console.log(e) }}></ModelPointTable>
  },
  {
    title: _r('资产数据点选择'),
    Comp: () => {
      const [ value, setValue ] = React.useState([])

      const onChange = (val) => {
        console.log(val)
        setValue(val)
      }
      return <PointTable value={value} onChange={onChange}></PointTable>
    } 
  },
  {
    title: _r('部门选择器'),
    Comp: () => <SelectDepartment style={{ width: 200 }} input={input}></SelectDepartment>
  },
  {
    title: _r('表属性的面板选择'),
    children: [
      {
        title: _r('只有设备配置'),
        Comp: () => <C is="TabelSchemaTabs" table='myctest2332' id='63240e8cc1ab9185e3334c57' plugins={['tags','schema', 'device', 'network']} onClick={item => { console.log(item) }}></C>
      },
      {
        title: _r('全部插件'),
        Comp: () => <C is="TabelSchemaTabs" table='myctest2332' id='63240e8cc1ab9185e3334c57' plugins onClick={item => { console.log(item) }}></C>
      }
    ],
    
  },
]

const ComponentsList = ({ components, defaultActiveKey }) => {
  return <Collapse defaultActiveKey={defaultActiveKey}>
    {
      components.map((item, index) => {
        if (item.children) {
          return <Panel header={item.title} key={index}>
            <ComponentsList components={item.children} defaultActiveKey={item.children.map((c, i) => i)} ></ComponentsList>
          </Panel>
        } else {
          return <Panel header={item.title} key={index}>
            <item.Comp></item.Comp>
          </Panel>
        }
      })
    }
  </Collapse>
  
}


const Demo = () => {
  
  return <ComponentsList components={components}></ComponentsList>
}

export default Demo