import React from "react";
import { C } from 'xadmin-ui'
import { AlgorContext } from "../context";
import { LoadingOutlined } from '@ant-design/icons';

const BindSelector = ({ input }) => {
  const { value, onChange } = input
  const { bindData, loading } = React.useContext(AlgorContext)

  const handleChange = val => {
    const value = val?.stringify
    const r = { bind: true, value, initValue: _.cloneDeep(val) }
    onChange(r)
  }

  return loading ? <LoadingOutlined /> : <C 
    is='CodeEditor.VariableEditor'
    schema={bindData || []}
    // placement="right"
    value={value?.initValue}
    onChange={handleChange}
    // limit={limit}
    // nodeType={nodeType}
    // select={select}
    // hasLoading={hasLoading}
    // panelVisible={panelVisible}
    // panelTargetRef={panelTargetRef}
    // customStringify={customStringify}
  />
}

export default BindSelector
