
import { use } from 'xadmin'

const useField = field => {
  const [state, setState] = React.useState(null)
  const { form } = use('form')
  const cache = React.useRef(null)
  form.useField(field, state => {
    const value = state?.value
    if (!cache.current || value && cache.current != value) {
      cache.current = value
      value && setState(value)
    }
  })
  return state
}

export default useField
