/*! For license information please see index.js.LICENSE.txt */
(()=>{var __webpack_modules__={8643:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{OG:()=>WechatContentVar,fI:()=>SmsContent,jt:()=>SmsCode,nx:()=>WechatTemplate,pR:()=>WechatContent,q9:()=>SmsContentVar});var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4942),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(885),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7363),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),antd__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1821),antd__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_2__),xadmin__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3078),xadmin__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(xadmin__WEBPACK_IMPORTED_MODULE_3__),xadmin_ui__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5907),xadmin_ui__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(xadmin_ui__WEBPACK_IMPORTED_MODULE_4__),lodash__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2611),lodash__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_5__);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var WechatTemplate=function(e){var t,n=e.input,r=n.value,o=n.onChange,i=(0,xadmin__WEBPACK_IMPORTED_MODULE_3__.use)("form",(function(e){return{values:e.values}})),l=i.form,a=i.values,u=(0,xadmin__WEBPACK_IMPORTED_MODULE_3__.use)("settings").settings,c=null==u||null===(t=u.wechat)||void 0===t?void 0:t.template,s=react__WEBPACK_IMPORTED_MODULE_1___default().useState([]),d=(0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_6__.Z)(s,2),p=d[0],f=d[1],m=useI18n().t;return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){(0,xadmin__WEBPACK_IMPORTED_MODULE_3__.api)({name:"core/wechat/template"}).fetch("",{}).then((function(e){var t=e.json;if(t.errcode)f(c&&lodash__WEBPACK_IMPORTED_MODULE_5___default().isArray(c)?c:[]);else{var n,r=(null==t||null===(n=t.template_list)||void 0===n?void 0:n.map((function(e){return _objectSpread(_objectSpread({},e),{},{id:e.template_id})})))||[];f(r)}})).catch((function(){f(c&&lodash__WEBPACK_IMPORTED_MODULE_5___default().isArray(c)?c:[])}))}),[]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){if(r){var e,t=null==p||null===(e=p.find((function(e){return(null==e?void 0:e.id)==r})))||void 0===e?void 0:e.content;t!=(null==a?void 0:a.contentPreview)&&l.change("contentPreview",t)}}),JSON.stringify(p)),react__WEBPACK_IMPORTED_MODULE_1___default().createElement(antd__WEBPACK_IMPORTED_MODULE_2__.Select,{value:r,onChange:function(e){var t,n;o(e);var r=null==p||null===(t=p.find((function(t){return t.id==e})))||void 0===t?void 0:t.content;l.change("content",null),l.change("contentPreview",null==p||null===(n=p.find((function(t){return(null==t?void 0:t.id)==e})))||void 0===n?void 0:n.content),l.setFieldData("content",{display:!(!r||lodash__WEBPACK_IMPORTED_MODULE_5___default().isEmpty(r.match(/{{+.*.DATA}}/g)))})},allowClear:!0,notFoundContent:react__WEBPACK_IMPORTED_MODULE_1___default().createElement(antd__WEBPACK_IMPORTED_MODULE_2__.Empty,{description:m("尚未配置微信模板"),image:__webpack_require__(5002)})},null==p?void 0:p.map((function(e){return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(antd__WEBPACK_IMPORTED_MODULE_2__.Select.Option,{value:e.id},e.title||e.id)})))},WechatContent=function WechatContent(props){var _use3=(0,xadmin__WEBPACK_IMPORTED_MODULE_3__.use)("form"),form=_use3.form,_useState=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(),_useState2=(0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_6__.Z)(_useState,2),content=_useState2[0],setState=_useState2[1],contentValue=props.input.value;return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){form.useField("content",(function(_ref2){var value=_ref2.value;if(value&&lodash__WEBPACK_IMPORTED_MODULE_5___default().isArray(value)){var variable=contentValue;value.forEach((function(item){var _item$var,_item$var$value,_item$var$value$map,_variable,varItem=null!=item&&null!==(_item$var=item.var)&&void 0!==_item$var&&_item$var.bind?null==item||null===(_item$var$value=item.var.value)||void 0===_item$var$value||null===(_item$var$value$map=_item$var$value.map((function(e){return lodash__WEBPACK_IMPORTED_MODULE_5___default().isPlainObject(e)?"${"+e.name+"}":e})))||void 0===_item$var$value$map?void 0:_item$var$value$map.join(""):null==item?void 0:item.var,reg="/{{".concat(item.key,"+.*?}}/g");variable=null===(_variable=variable)||void 0===_variable?void 0:_variable.replace(eval(reg),varItem||"")})),setState(variable||"")}else setState(contentValue)}))}),[contentValue]),content||""},WechatContentVar=function(e){var t,n,r,o,i,l=e.input,a=l.value,u=l.onChange,c=(0,xadmin__WEBPACK_IMPORTED_MODULE_3__.use)("form").form,s=null===(t=c.getState().values)||void 0===t?void 0:t.contentPreview,d=null==s||null===(n=s.match(/{{+.*.DATA}}/g))||void 0===n?void 0:n[0].split(".DATA}}"),p=lodash__WEBPACK_IMPORTED_MODULE_5___default().compact(null==d?void 0:d.map((function(e){return e.replace(/^.*{{/g,"")}))),f=(null===(r=c.getState().values)||void 0===r||null===(o=r.content)||void 0===o?void 0:o.map((function(e){return e.key})))||[];return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(antd__WEBPACK_IMPORTED_MODULE_2__.Select,{value:a,onChange:u,allowClear:!0},null===(i=lodash__WEBPACK_IMPORTED_MODULE_5___default().difference(p,f))||void 0===i?void 0:i.map((function(e){return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(antd__WEBPACK_IMPORTED_MODULE_2__.Select.Option,{value:e},e)})))},SmsCode=function(e){var t=e.input,n=t.value,r=t.onChange,o=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),i=(0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_6__.Z)(o,2),l=i[0],a=i[1],u=(0,xadmin__WEBPACK_IMPORTED_MODULE_3__.use)("form").form,c=useI18n().t;return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){(0,xadmin__WEBPACK_IMPORTED_MODULE_3__.api)({name:"core/sms/template"}).fetch("",{}).then((function(e){var t=e.json;a(null==t?void 0:t.SmsTemplateList)})).catch((function(e){return antd__WEBPACK_IMPORTED_MODULE_2__.message.error(c("获取短信模板失败"))}))}),[]),react__WEBPACK_IMPORTED_MODULE_1___default().createElement(antd__WEBPACK_IMPORTED_MODULE_2__.Select,{value:n,onChange:function(e){var t;r(e),u.change("templateContent",null==l||null===(t=l.find((function(t){return t.TemplateCode==e})))||void 0===t?void 0:t.TemplateContent)},allowClear:!0,notFoundContent:react__WEBPACK_IMPORTED_MODULE_1___default().createElement(xadmin_ui__WEBPACK_IMPORTED_MODULE_4__.C,{is:"NoData",description:c("尚未配置短信模板")})},null==l?void 0:l.map((function(e){return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(antd__WEBPACK_IMPORTED_MODULE_2__.Select.Option,{value:e.TemplateCode},e.TemplateName)})))},SmsContent=function SmsContent(props){var _use6=(0,xadmin__WEBPACK_IMPORTED_MODULE_3__.use)("form"),form=_use6.form,_useState5=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(),_useState6=(0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_6__.Z)(_useState5,2),content=_useState6[0],setState=_useState6[1];return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){form.useField("templateContent",(function(_ref4){var _props$input4,templateContent=_ref4.value;setState(templateContent),(null===(_props$input4=props.input)||void 0===_props$input4?void 0:_props$input4.onChange)&&props.input.onChange(templateContent),form.useField("content",(function(_ref5){var value=_ref5.value;if(value&&lodash__WEBPACK_IMPORTED_MODULE_5___default().isArray(value)){var variable=templateContent;value.forEach((function(item){var _item$var2,_item$var$value2,_item$var$value2$map,_variable2,varItem=null!=item&&null!==(_item$var2=item.var)&&void 0!==_item$var2&&_item$var2.bind?null==item||null===(_item$var$value2=item.var.value)||void 0===_item$var$value2||null===(_item$var$value2$map=_item$var$value2.map((function(e){return lodash__WEBPACK_IMPORTED_MODULE_5___default().isPlainObject(e)?"${"+e.name+"}":e})))||void 0===_item$var$value2$map?void 0:_item$var$value2$map.join(""):null==item?void 0:item.var,reg="/\\$\\{".concat(item.key,"}/g");variable=null===(_variable2=variable)||void 0===_variable2?void 0:_variable2.replace(eval(reg),varItem||"")})),setState(variable||"")}}))}))}),[]),content||""},SmsContentVar=function(e){var t,n,r,o,i=e.input,l=i.value,a=i.onChange,u=(0,xadmin__WEBPACK_IMPORTED_MODULE_3__.use)("form").form,c=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(),s=(0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_6__.Z)(c,2),d=s[0],p=s[1];(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){u.useField("templateContent",(function(e){var t=e.value;p(t)}))}),[]);var f=null==d||null===(t=d.match(/\${.*.}/g))||void 0===t?void 0:t[0].split("}"),m=lodash__WEBPACK_IMPORTED_MODULE_5___default().compact(null==f?void 0:f.map((function(e){return e.replace(/^.*\${/g,"")}))),v=(null===(n=u.getState().values)||void 0===n||null===(r=n.content)||void 0===r?void 0:r.map((function(e){return e.key})))||[];return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(antd__WEBPACK_IMPORTED_MODULE_2__.Select,{value:l,onChange:a,allowClear:!0},null===(o=lodash__WEBPACK_IMPORTED_MODULE_5___default().difference(m,v))||void 0===o?void 0:o.map((function(e){return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(antd__WEBPACK_IMPORTED_MODULE_2__.Select.Option,{value:e},e)})))}},3084:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(4015),o=n.n(r),i=n(3645),l=n.n(i)()(o());l.push([e.id,".flow-edit-header .save-dropdown-button {\n  margin: 0 8px !important;\n}\n.flow-edit-header .save-dropdown-button .ant-btn-primary:first-child:not(:last-child) {\n  width: 75px !important;\n  background-color: #6F87EE !important;\n  border-right: 1px solid #c0bdbd !important;\n}\n.flow-edit-header .save-dropdown-button .ant-btn-primary:last-child:not(:first-child),\n.flow-edit-header .save-dropdown-button .ant-btn-primary + .ant-btn-primary {\n  background-color: #6F87EE !important;\n}\n.flow-edit-header .save-dropdown-button .ant-btn-primary:last-child:not(:first-child) span,\n.flow-edit-header .save-dropdown-button .ant-btn-primary + .ant-btn-primary span {\n  color: #FFF !important;\n}\n.flow-edit-header .save-dropdown-button button {\n  margin: 0 !important;\n}\n","",{version:3,sources:["webpack://./src/components/header.less"],names:[],mappings:"AACA;EAEI,wBAAA;AADJ;AADA;EAKM,sBAAA;EACA,oCAAA;EACA,0CAAA;AADN;AANA;;EAYM,oCAAA;AAFN;AAVA;;EAeQ,sBAAA;AADR;AAdA;EAoBM,oBAAA;AAHN",sourcesContent:["@primaryColor: #6F87EE;\n.flow-edit-header {\n  .save-dropdown-button {\n    margin: 0 8px !important;\n\n    .ant-btn-primary:first-child:not(:last-child) {\n      width: 75px !important;\n      background-color: @primaryColor !important;\n      border-right: 1px solid rgb(192, 189, 189) !important;\n    }\n\n    .ant-btn-primary:last-child:not(:first-child),\n    .ant-btn-primary+.ant-btn-primary {\n      background-color: @primaryColor !important;\n\n      span {\n        color: #FFF !important;\n      }\n    }\n\n    button {\n      margin: 0 !important;\n    }\n  }\n}\n  "],sourceRoot:""}]);const a=l},3703:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Ae});var r=n(4015),o=n.n(r),i=n(3645),l=n.n(i),a=n(1667),u=n.n(a),c=n(200),s=n.n(c),d=n(5140),p=n.n(d),f=n(7849),m=n.n(f),v=n(9815),y=n.n(v),g=n(5395),h=n.n(g),b=n(2617),w=n.n(b),_=n(257),E=n.n(_),C=n(8578),O=n.n(C),x=n(6003),k=n.n(x),S=n(9330),A=n.n(S),j=n(7781),D=n.n(j),P=n(3129),T=n.n(P),F=n(6521),L=n.n(F),B=n(870),M=n.n(B),N=n(8015),I=n.n(N),R=n(6697),Z=n.n(R),q=n(9763),z=n.n(q),U=n(3657),G=n.n(U),$=n(1193),Y=n.n($),H=n(3092),V=n.n(H),W=n(3473),K=n.n(W),X=n(4507),J=n.n(X),Q=n(9570),ee=n.n(Q),te=n(9769),ne=n.n(te),re=l()(o()),oe=u()(s()),ie=u()(p()),le=u()(m()),ae=u()(y()),ue=u()(h()),ce=u()(w()),se=u()(E()),de=u()(O()),pe=u()(k()),fe=u()(A()),me=u()(D()),ve=u()(T()),ye=u()(L()),ge=u()(M()),he=u()(I()),be=u()(Z()),we=u()(z()),_e=u()(G()),Ee=u()(Y()),Ce=u()(V()),Oe=u()(K()),xe=u()(J()),ke=u()(ee()),Se=u()(ne());re.push([e.id,".dndflow {\n  flex-direction: column;\n  display       : flex;\n  height        : 100%;\n  position      : relative;\n}\n\n.flow-edit-header {\n  display         : flex;\n  align-items     : center;\n  justify-content : space-between;\n  background-color: #FFFFFF !important;\n  box-shadow      : 0px 2px 6px 0px #e8e9ef;\n  height          : 50px;\n  padding         : 0 15px;\n  position        : relative;\n  z-index         : 4;\n}\n\n.flow-edit-header button {\n  border-radius: 4px;\n}\n\n.dndflow aside {\n  border-right: 1px solid #eee;\n  padding     : 15px 10px;\n  font-size   : 12px;\n  background  : #ccc;\n}\n\n.dndflow aside>* {\n  margin-bottom: 10px;\n  cursor       : grab;\n}\n\n.dndflow aside .description {\n  margin-bottom: 10px;\n}\n\n.dndflow .reactflow-wrapper {\n  flex-grow: 1;\n  height   : 100%;\n  position : absolute;\n  z-index  : 2;\n  width    : 100%;\n}\n\n@media screen and (min-width: 768px) {\n  .dndflow {\n    flex-direction: row;\n    height        : 100%;\n    min-height    : 600px;\n  }\n\n  .dndflow aside {\n    width    : 20%;\n    max-width: 180px;\n  }\n}\n\n.flow-add-node {\n  width          : 100%;\n  height         : 70px;\n  min-width      : 67px;\n  display        : flex;\n  flex-direction : column;\n  cursor         : move;\n  align-items    : center;\n  justify-content: space-between;\n}\n\n.flow-add-node:hover.flow-add-node>div:first-child {\n  background-color: rgba(92, 99, 128, 0.3);\n}\n\n.flow-node-level-title {\n  margin-bottom: 12px;\n  margin-top: 12px;\n  font-size: 12px;\n  font-family: PingFangSC-Medium, PingFang SC;\n  font-weight: 500;\n  color: #31395D;\n}\n\n.flow-node-level-title:first-child {\n  margin-top: 16px;\n}\n\n.flow-widgets-card .text-cell {\n  color: #5C6380;\n}\n\n.flow-editor-form {\n  padding: 10px\n}\n\n/* 连接线删除按钮样式 */\n.edgebutton-body {\n  align-items    : center;\n  background     : transparent;\n  display        : flex;\n  height         : 40px;\n  justify-content: center;\n  min-height     : 40px;\n  width          : 40px;\n}\n\n.edgebutton:hover {\n  box-shadow: 0 0 6px 2px rgb(0 0 0 / 8%);\n  transform : scale(1.1);\n}\n\n.edgebutton {\n  background   : darkgray;\n  border       : 1px solid #fff;\n  color        : #fff;\n  border-radius: 50%;\n  cursor       : pointer;\n  font-size    : 17px;\n  height       : 25px;\n  line-height  : 1;\n  width        : 25px;\n}\n\n/* 线删除按钮经过显示 */\n.react-flow__edge .edgebutton-body {\n  display: none\n}\n\n.react-flow__edge:hover.react-flow__edge .edgebutton-body {\n  display: flex\n}\n\n\n.card-remove-button {\n  position: absolute;\n  top: -12px;\n  right: 8px;\n  display: none;\n}\n\n.card-remove-button div, .flow-gateway-remove-button div, .card-remove-button img {\n  cursor: pointer;\n  height: 23px;\n  width: 23px;\n  display: block;\n  border: 1px solid #fff;\n  border-radius: 25px;\n  margin-left: 5px;\n}\n\n.react-flow-card:hover .card-remove-button {\n  display: flex;\n}\n\n.flow-editor-form .dashboard-slate-editor {\n  line-height: 26px;\n}\n\n.flow-editor-form .slate-data-editor {\n  display: flex;\n}\n\n.flow-editor-form .slate-data-editor-dropdown {\n  top  : 0 !important;\n  left : 0 !important;\n  width: calc(100% - 32px) !important;\n}\n\n.react-flow-card {\n  background-color: #fff;\n}\n\n.react-flow-card .react-flow-card-content {\n  line-height: 24px;\n  color: #31395D;\n}\n\n.react-flow-card-systemOpt {\n  background-image: url("+oe+") !important;\n  background-repeat: no-repeat !important;\n  background-size: 100% 142px !important;\n}\n\n.react-flow-card-systemOpt:hover {\n  background-image: url("+ie+") !important;\n}\n\n.react-flow-card-businessData {\n  background-image: url("+le+") !important;\n  background-repeat: no-repeat !important;\n  background-size: 100% 142px !important;\n}\n\n.react-flow-card-businessData:hover {\n  background-image: url("+ae+") !important;\n}\n\n.react-flow-card-start-high-level {\n  background-image: url("+ue+") !important;\n  background-repeat: no-repeat !important;\n  background-size: 100% 142px !important;\n}\n\n.react-flow-card-start-high-level:hover {\n  background-image: url("+ce+") !important;\n}\n\n.react-flow-card-exTableRecord {\n  background-image: url("+se+") !important;\n  background-repeat: no-repeat !important;\n  background-size: 100% 142px !important;\n}\n\n.react-flow-card-exTableRecord:hover {\n  background-image: url("+de+") !important;\n}\n\n.react-flow-card-systemVariable {\n  background-image: url("+pe+") !important;\n  background-repeat: no-repeat !important;\n  background-size: 100% 142px !important;\n}\n\n.react-flow-card-systemVariable:hover {\n  background-image: url("+fe+") !important;\n}\n.react-flow-card-nodeAttribute {\n  background-image: url("+me+") !important;\n  background-repeat: no-repeat !important;\n  background-size: 100% 142px !important;\n}\n\n.react-flow-card-nodeAttribute:hover {\n  background-image: url("+ve+") !important;\n}\n\n.react-flow-card-data {\n  background-image: url("+ye+") !important;\n  background-repeat: no-repeat !important;\n  background-size: 100% 142px !important;\n}\n\n.react-flow-card-data:hover {\n  background-image: url("+ge+") !important;\n}\n\n.react-flow-card-other {\n  background-image: url("+he+") !important;\n  background-repeat: no-repeat !important;\n  background-size: 100% 142px !important;\n}\n\n.react-flow-card-other:hover {\n  background-image: url("+be+") !important;\n}\n\n.react-flow-card-artificial {\n  background-image: url("+we+") !important;\n  background-repeat: no-repeat !important;\n  background-size: 100% 142px !important;\n}\n\n.react-flow-card-artificial:hover {\n  background-image: url("+_e+") !important;\n}\n\n.react-flow-card-high-level {\n  background-image: url("+Ee+") !important;\n  background-repeat: no-repeat !important;\n  background-size: 100% 142px !important;\n}\n\n.react-flow-card-high-level:hover {\n  background-image: url("+Ce+") !important;\n}\n\n.react-flow-card-gateway {\n  background-image: url("+Oe+") !important;\n  background-repeat: no-repeat !important;\n  background-size: 100% 142px !important;\n}\n\n.react-flow-card-gateway:hover {\n  background-image: url("+xe+") !important;\n}\n\n.react-flow-card-notification {\n  background-image: url("+ke+") !important;\n  background-repeat: no-repeat !important;\n  background-size: 100% 142px !important;\n}\n\n.react-flow-card-notification:hover {\n  background-image: url("+Se+") !important;\n}\n\n.react-flow__node {\n  border-radius   : 5px;\n  background-color: transparent !important;\n}\n\n.react-flow__node .ant-card-hoverable {\n  cursor: grab\n}\n\n.flow-bind-text {\n  border         : 1px solid #d9d9d9;\n  border-radius  : 2px;\n  padding        : 4px 11px;\n  display        : flex;\n  justify-content: space-between;\n}\n\n.flow-bind-text:hover {\n  border: 1px solid #613BE8\n}\n\n.right-sider {\n  overflow-y: auto;\n}\n\n.edgepanel-body {\n  width          : 100%;\n  height         : 100%;\n  user-select    : none;\n  display        : flex;\n  align-items    : center;\n  justify-content: center;\n}\n\n.flow-select-content {\n  position: relative;\n  overflow: hidden;\n}\n\n.flow-select-content .node-list {\n  font-size: 12px;\n}\n\n.flow-select-content .content-left {\n  float: left;\n  width: 30%;\n}\n\n.flow-select-content .content-right {\n  float     : right;\n  width     : 70%;\n  box-sizing: border-box;\n  padding   : 10px;\n  max-height: 200px;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n\n.flow-select-content .node-item:hover {\n  color: #613BE8;\n}\n\n.flow-select-content .node-item.active {\n  color: #613BE8;\n}\n\n.flow-select-content .node-item {\n  cursor: pointer;\n}\n\n.flow-select-content .flow-select-tag {\n  cursor       : pointer;\n  width        : 100%;\n  margin-bottom: 4px;\n  text-align   : left;\n  padding-left: 6px;\n}\n\n.flow-select-content .flow-select-tag:hover {\n  color: #613BE8;\n}\n\n\n.ant-radio-button-wrapper {\n  flex      : 1;\n  text-align: center;\n}\n\n.flow-editor-form .dashboard-modal-button {\n  width           : 100%;\n  line-height     : 1.5715;\n  position        : relative;\n  display         : inline-block;\n  font-weight     : 400;\n  white-space     : nowrap;\n  text-align      : center;\n  background-image: none;\n  border          : 1px solid transparent;\n  box-shadow      : 0 2px 0 rgb(0 0 0 / 2%);\n  cursor          : pointer;\n  transition      : all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\n  user-select     : none;\n  touch-action    : manipulation;\n  color           : rgba(0, 0, 0, 0.85);\n  border-color    : #d9d9d9;\n  background      : #fff;\n  height          : 24px;\n  padding         : 0px 7px;\n  font-size       : 14px;\n  border-radius   : 2px;\n}\n\n.flow-editor-form .dashboard-modal-button:hover,\n.flow-editor-form .dashboard-modal-button:focus {\n  color       : #8864f5;\n  border-color: #8864f5;\n  background  : #fff;\n}\n\n.flow-editor-form .dashboard-modal-button .array-delete {\n  float    : right;\n  position : relative;\n  font-size: 12px;\n  top      : 3px;\n}\n\n.flow-editor-form .ant-tabs-nav-list {\n  width: 100%;\n}\n\n.flow-editor-form .ant-tabs-tab {\n  flex: 1;\n}\n\n.select-multiple-bind .ant-select-selector>div:last-child,\n.select-multiple-bind .ant-select-selector>div:nth-child(2) {\n  top   : auto !important;\n  bottom: -1px !important;\n}\n\n.flow_radio {\n  display: flex !important;\n}\n\n.flow_radio div label {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.flow-tabpane .ant-collapse-header {\n  height: 40px;\n  background-color: #E7ECFC;\n  color: #4F71FF !important;\n}\n\n.flow-card:hover .text-cell {\n  color: #6F87EE !important;\n}\n\n.flow-card .add-cell {\n  font-size: 18px;\n}\n\n.flow-editor .sider-content{\n  overflow: auto !important;\n}\n\n.left-sider .sider-content .flow-tabpane .add-cell svg {\n  width: 30px !important;\n  height: 30px;\n}\n\n.react-flow-card-title svg circle, .react-flow-card-title svg path, .react-flow-card-title g path, .react-flow-card-title g polygon {\n  fill: #fff;\n}\n\n.react-flow-card-exTableRecord .react-flow-card-title svg path, .react-flow-card-exTableRecord .react-flow-card-title g path {\n  stroke: #EF874C;\n}\n\n.react-flow-card-nodeAttribute .react-flow-card-title svg path {\n  stroke: #B45FB3;\n}\n\n.react-flow-card-businessData .react-flow-card-title svg path {\n  stroke: #e26e6e;\n}\n\n.react-flow-card-businessData .react-flow-card-title svg polygon {\n  fill: #e26e6e;\n}\n\n.flow-editor .react-flow__controls-button svg{\n  max-width: 16px;\n  max-height: 16px;\n}\n.flow-editor .react-flow__controls-button{\n  width: 32px;\n  height: 32px;\n}\n.iot-flow-slate-editor-wrap {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.iot-flow-slate-editor-comp {\n  width: calc(100% - 37px);\n}\n.iot-flow-slate-editor {\n  border: 1px solid #ddd;\n  min-height: 30px;\n  line-height: 30px;\n  padding: 0 5px;\n}\n.iot-flow-slate-editor-icon {\n  width: 32px;\n  height: 32px;\n  margin-left: 5px;\n  border: 1px solid #ddd;\n  padding: 0 9px;\n  line-height: 32px;\n  cursor: pointer;\n}\n\n.search-wrap {\n  position: relative;\n  padding: 6px 10px;\n  width: 100%;\n}\n\n.search-wrap .search-icon {\n  position: absolute;\n  z-index: 2;\n  top: 14px;\n  font-size: 12px;\n  left: 18px;\n  color: #C3C4CA;\n}\n.search-wrap .ant-input-affix-wrapper {\n  border: none;\n  width: 100%;\n  height: 24px;\n  line-height: 24px;\n  background: #F0F1F5;\n  border-radius: 12px;\n  font-size: 12px;\n  padding-left: 24px;\n}\n.flow-types .ant-menu-item-selected svg g, .flow-types .ant-menu-item-selected svg path {\n  fill: #fff;\n}\n.flow-types .ant-menu-item-selected .flow-all-icon svg g, .flow-types .ant-menu-item-selected .flow-all-icon svg path {\n  fill: transparent;\n}\n.flow-types .ant-menu-item-selected .flow-all-icon svg path {\n  stroke: #fff;\n}\n.flow-types .ant-menu-item-selected .flow-all-icon svg circle, .flow-types .ant-menu-item-selected .flow-all-icon svg path:not(:nth-child(3)) {\n  fill: #fff;\n}\n.dndflow .react-flow__node .ant-card .ant-card-body {\n  background: #fff;\n}\n\n.react-flow-card.ant-card > .ant-card-body{\n  padding-right: 0;\n}\n\n.react-flow-card-content {\n  display: -webkit-box;\n  -webkit-line-clamp: 4;\n  -webkit-box-orient: vertical;\n  overflow: hidden auto;\n  word-wrap: break-word;\n}","",{version:3,sources:["webpack://./src/components/index.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,oBAAoB;EACpB,oBAAoB;EACpB,wBAAwB;AAC1B;;AAEA;EACE,sBAAsB;EACtB,wBAAwB;EACxB,+BAA+B;EAC/B,oCAAoC;EACpC,yCAAyC;EACzC,sBAAsB;EACtB,wBAAwB;EACxB,0BAA0B;EAC1B,mBAAmB;AACrB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,4BAA4B;EAC5B,uBAAuB;EACvB,kBAAkB;EAClB,kBAAkB;AACpB;;AAEA;EACE,mBAAmB;EACnB,mBAAmB;AACrB;;AAEA;EACE,mBAAmB;AACrB;;AAEA;EACE,YAAY;EACZ,eAAe;EACf,mBAAmB;EACnB,YAAY;EACZ,eAAe;AACjB;;AAEA;EACE;IACE,mBAAmB;IACnB,oBAAoB;IACpB,qBAAqB;EACvB;;EAEA;IACE,cAAc;IACd,gBAAgB;EAClB;AACF;;AAEA;EACE,qBAAqB;EACrB,qBAAqB;EACrB,qBAAqB;EACrB,qBAAqB;EACrB,uBAAuB;EACvB,qBAAqB;EACrB,uBAAuB;EACvB,8BAA8B;AAChC;;AAEA;EACE,wCAAwC;AAC1C;;AAEA;EACE,mBAAmB;EACnB,gBAAgB;EAChB,eAAe;EACf,2CAA2C;EAC3C,gBAAgB;EAChB,cAAc;AAChB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE;AACF;;AAEA,cAAc;AACd;EACE,uBAAuB;EACvB,4BAA4B;EAC5B,qBAAqB;EACrB,qBAAqB;EACrB,uBAAuB;EACvB,qBAAqB;EACrB,qBAAqB;AACvB;;AAEA;EACE,uCAAuC;EACvC,sBAAsB;AACxB;;AAEA;EACE,uBAAuB;EACvB,6BAA6B;EAC7B,mBAAmB;EACnB,kBAAkB;EAClB,sBAAsB;EACtB,mBAAmB;EACnB,mBAAmB;EACnB,gBAAgB;EAChB,mBAAmB;AACrB;;AAEA,cAAc;AACd;EACE;AACF;;AAEA;EACE;AACF;;;AAGA;EACE,kBAAkB;EAClB,UAAU;EACV,UAAU;EACV,aAAa;AACf;;AAEA;EACE,eAAe;EACf,YAAY;EACZ,WAAW;EACX,cAAc;EACd,sBAAsB;EACtB,mBAAmB;EACnB,gBAAgB;AAClB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,mBAAmB;EACnB,mBAAmB;EACnB,mCAAmC;AACrC;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE,iBAAiB;EACjB,cAAc;AAChB;;AAEA;EACE,oEAA0D;EAC1D,uCAAuC;EACvC,sCAAsC;AACxC;;AAEA;EACE,oEAA+D;AACjE;;AAEA;EACE,oEAA6D;EAC7D,uCAAuC;EACvC,sCAAsC;AACxC;;AAEA;EACE,oEAAkE;AACpE;;AAEA;EACE,oEAA+D;EAC/D,uCAAuC;EACvC,sCAAsC;AACxC;;AAEA;EACE,oEAAoE;AACtE;;AAEA;EACE,oEAAyD;EACzD,uCAAuC;EACvC,sCAAsC;AACxC;;AAEA;EACE,oEAA6D;AAC/D;;AAEA;EACE,oEAA+D;EAC/D,uCAAuC;EACvC,sCAAsC;AACxC;;AAEA;EACE,oEAAoE;AACtE;AACA;EACE,qEAA8D;EAC9D,uCAAuC;EACvC,sCAAsC;AACxC;;AAEA;EACE,qEAAmE;AACrE;;AAEA;EACE,qEAAqD;EACrD,uCAAuC;EACvC,sCAAsC;AACxC;;AAEA;EACE,qEAA0D;AAC5D;;AAEA;EACE,qEAAsD;EACtD,uCAAuC;EACvC,sCAAsC;AACxC;;AAEA;EACE,qEAA2D;AAC7D;;AAEA;EACE,qEAA2D;EAC3D,uCAAuC;EACvC,sCAAsC;AACxC;;AAEA;EACE,qEAAgE;AAClE;;AAEA;EACE,qEAA0D;EAC1D,uCAAuC;EACvC,sCAAsC;AACxC;;AAEA;EACE,qEAA+D;AACjE;;AAEA;EACE,qEAAwD;EACxD,uCAAuC;EACvC,sCAAsC;AACxC;;AAEA;EACE,qEAA6D;AAC/D;;AAEA;EACE,qEAA6D;EAC7D,uCAAuC;EACvC,sCAAsC;AACxC;;AAEA;EACE,qEAAkE;AACpE;;AAEA;EACE,qBAAqB;EACrB,wCAAwC;AAC1C;;AAEA;EACE;AACF;;AAEA;EACE,kCAAkC;EAClC,oBAAoB;EACpB,yBAAyB;EACzB,qBAAqB;EACrB,8BAA8B;AAChC;;AAEA;EACE;AACF;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,qBAAqB;EACrB,qBAAqB;EACrB,qBAAqB;EACrB,qBAAqB;EACrB,uBAAuB;EACvB,uBAAuB;AACzB;;AAEA;EACE,kBAAkB;EAClB,gBAAgB;AAClB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,WAAW;EACX,UAAU;AACZ;;AAEA;EACE,iBAAiB;EACjB,eAAe;EACf,sBAAsB;EACtB,gBAAgB;EAChB,iBAAiB;EACjB,gBAAgB;EAChB,kBAAkB;AACpB;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,sBAAsB;EACtB,mBAAmB;EACnB,kBAAkB;EAClB,mBAAmB;EACnB,iBAAiB;AACnB;;AAEA;EACE,cAAc;AAChB;;;AAGA;EACE,aAAa;EACb,kBAAkB;AACpB;;AAEA;EACE,sBAAsB;EACtB,wBAAwB;EACxB,0BAA0B;EAC1B,8BAA8B;EAC9B,qBAAqB;EACrB,wBAAwB;EACxB,wBAAwB;EACxB,sBAAsB;EACtB,uCAAuC;EACvC,yCAAyC;EACzC,yBAAyB;EACzB,+DAA+D;EAC/D,sBAAsB;EACtB,8BAA8B;EAC9B,qCAAqC;EACrC,yBAAyB;EACzB,sBAAsB;EACtB,sBAAsB;EACtB,yBAAyB;EACzB,sBAAsB;EACtB,qBAAqB;AACvB;;AAEA;;EAEE,qBAAqB;EACrB,qBAAqB;EACrB,kBAAkB;AACpB;;AAEA;EACE,gBAAgB;EAChB,mBAAmB;EACnB,eAAe;EACf,cAAc;AAChB;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,OAAO;AACT;;AAEA;;EAEE,uBAAuB;EACvB,uBAAuB;AACzB;;AAEA;EACE,wBAAwB;AAC1B;;AAEA;EACE,gBAAgB;EAChB,mBAAmB;EACnB,uBAAuB;AACzB;;AAEA;EACE,YAAY;EACZ,yBAAyB;EACzB,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,sBAAsB;EACtB,YAAY;AACd;;AAEA;EACE,UAAU;AACZ;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,eAAe;EACf,gBAAgB;AAClB;AACA;EACE,WAAW;EACX,YAAY;AACd;AACA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;AACzB;AACA;EACE,wBAAwB;AAC1B;AACA;EACE,sBAAsB;EACtB,gBAAgB;EAChB,iBAAiB;EACjB,cAAc;AAChB;AACA;EACE,WAAW;EACX,YAAY;EACZ,gBAAgB;EAChB,sBAAsB;EACtB,cAAc;EACd,iBAAiB;EACjB,eAAe;AACjB;;AAEA;EACE,kBAAkB;EAClB,iBAAiB;EACjB,WAAW;AACb;;AAEA;EACE,kBAAkB;EAClB,UAAU;EACV,SAAS;EACT,eAAe;EACf,UAAU;EACV,cAAc;AAChB;AACA;EACE,YAAY;EACZ,WAAW;EACX,YAAY;EACZ,iBAAiB;EACjB,mBAAmB;EACnB,mBAAmB;EACnB,eAAe;EACf,kBAAkB;AACpB;AACA;EACE,UAAU;AACZ;AACA;EACE,iBAAiB;AACnB;AACA;EACE,YAAY;AACd;AACA;EACE,UAAU;AACZ;AACA;EACE,gBAAgB;AAClB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,oBAAoB;EACpB,qBAAqB;EACrB,4BAA4B;EAC5B,qBAAqB;EACrB,qBAAqB;AACvB",sourcesContent:[".dndflow {\n  flex-direction: column;\n  display       : flex;\n  height        : 100%;\n  position      : relative;\n}\n\n.flow-edit-header {\n  display         : flex;\n  align-items     : center;\n  justify-content : space-between;\n  background-color: #FFFFFF !important;\n  box-shadow      : 0px 2px 6px 0px #e8e9ef;\n  height          : 50px;\n  padding         : 0 15px;\n  position        : relative;\n  z-index         : 4;\n}\n\n.flow-edit-header button {\n  border-radius: 4px;\n}\n\n.dndflow aside {\n  border-right: 1px solid #eee;\n  padding     : 15px 10px;\n  font-size   : 12px;\n  background  : #ccc;\n}\n\n.dndflow aside>* {\n  margin-bottom: 10px;\n  cursor       : grab;\n}\n\n.dndflow aside .description {\n  margin-bottom: 10px;\n}\n\n.dndflow .reactflow-wrapper {\n  flex-grow: 1;\n  height   : 100%;\n  position : absolute;\n  z-index  : 2;\n  width    : 100%;\n}\n\n@media screen and (min-width: 768px) {\n  .dndflow {\n    flex-direction: row;\n    height        : 100%;\n    min-height    : 600px;\n  }\n\n  .dndflow aside {\n    width    : 20%;\n    max-width: 180px;\n  }\n}\n\n.flow-add-node {\n  width          : 100%;\n  height         : 70px;\n  min-width      : 67px;\n  display        : flex;\n  flex-direction : column;\n  cursor         : move;\n  align-items    : center;\n  justify-content: space-between;\n}\n\n.flow-add-node:hover.flow-add-node>div:first-child {\n  background-color: rgba(92, 99, 128, 0.3);\n}\n\n.flow-node-level-title {\n  margin-bottom: 12px;\n  margin-top: 12px;\n  font-size: 12px;\n  font-family: PingFangSC-Medium, PingFang SC;\n  font-weight: 500;\n  color: #31395D;\n}\n\n.flow-node-level-title:first-child {\n  margin-top: 16px;\n}\n\n.flow-widgets-card .text-cell {\n  color: #5C6380;\n}\n\n.flow-editor-form {\n  padding: 10px\n}\n\n/* 连接线删除按钮样式 */\n.edgebutton-body {\n  align-items    : center;\n  background     : transparent;\n  display        : flex;\n  height         : 40px;\n  justify-content: center;\n  min-height     : 40px;\n  width          : 40px;\n}\n\n.edgebutton:hover {\n  box-shadow: 0 0 6px 2px rgb(0 0 0 / 8%);\n  transform : scale(1.1);\n}\n\n.edgebutton {\n  background   : darkgray;\n  border       : 1px solid #fff;\n  color        : #fff;\n  border-radius: 50%;\n  cursor       : pointer;\n  font-size    : 17px;\n  height       : 25px;\n  line-height  : 1;\n  width        : 25px;\n}\n\n/* 线删除按钮经过显示 */\n.react-flow__edge .edgebutton-body {\n  display: none\n}\n\n.react-flow__edge:hover.react-flow__edge .edgebutton-body {\n  display: flex\n}\n\n\n.card-remove-button {\n  position: absolute;\n  top: -12px;\n  right: 8px;\n  display: none;\n}\n\n.card-remove-button div, .flow-gateway-remove-button div, .card-remove-button img {\n  cursor: pointer;\n  height: 23px;\n  width: 23px;\n  display: block;\n  border: 1px solid #fff;\n  border-radius: 25px;\n  margin-left: 5px;\n}\n\n.react-flow-card:hover .card-remove-button {\n  display: flex;\n}\n\n.flow-editor-form .dashboard-slate-editor {\n  line-height: 26px;\n}\n\n.flow-editor-form .slate-data-editor {\n  display: flex;\n}\n\n.flow-editor-form .slate-data-editor-dropdown {\n  top  : 0 !important;\n  left : 0 !important;\n  width: calc(100% - 32px) !important;\n}\n\n.react-flow-card {\n  background-color: #fff;\n}\n\n.react-flow-card .react-flow-card-content {\n  line-height: 24px;\n  color: #31395D;\n}\n\n.react-flow-card-systemOpt {\n  background-image: url('../icons/systemOpt.png') !important;\n  background-repeat: no-repeat !important;\n  background-size: 100% 142px !important;\n}\n\n.react-flow-card-systemOpt:hover {\n  background-image: url('../icons/systemOptHover.png') !important;\n}\n\n.react-flow-card-businessData {\n  background-image: url('../icons/businessData.png') !important;\n  background-repeat: no-repeat !important;\n  background-size: 100% 142px !important;\n}\n\n.react-flow-card-businessData:hover {\n  background-image: url('../icons/businessDataHover.png') !important;\n}\n\n.react-flow-card-start-high-level {\n  background-image: url('../icons/startHighLevel.png') !important;\n  background-repeat: no-repeat !important;\n  background-size: 100% 142px !important;\n}\n\n.react-flow-card-start-high-level:hover {\n  background-image: url('../icons/startHighLevelHover.png') !important;\n}\n\n.react-flow-card-exTableRecord {\n  background-image: url('../icons/extCarde.png') !important;\n  background-repeat: no-repeat !important;\n  background-size: 100% 142px !important;\n}\n\n.react-flow-card-exTableRecord:hover {\n  background-image: url('../icons/extCardHover.png') !important;\n}\n\n.react-flow-card-systemVariable {\n  background-image: url('../icons/systemVariable.png') !important;\n  background-repeat: no-repeat !important;\n  background-size: 100% 142px !important;\n}\n\n.react-flow-card-systemVariable:hover {\n  background-image: url('../icons/systemVariableHover.png') !important;\n}\n.react-flow-card-nodeAttribute {\n  background-image: url('../icons/nodeAttribute.png') !important;\n  background-repeat: no-repeat !important;\n  background-size: 100% 142px !important;\n}\n\n.react-flow-card-nodeAttribute:hover {\n  background-image: url('../icons/nodeAttributeHover.png') !important;\n}\n\n.react-flow-card-data {\n  background-image: url('../icons/data.png') !important;\n  background-repeat: no-repeat !important;\n  background-size: 100% 142px !important;\n}\n\n.react-flow-card-data:hover {\n  background-image: url('../icons/dataHover.png') !important;\n}\n\n.react-flow-card-other {\n  background-image: url('../icons/other.png') !important;\n  background-repeat: no-repeat !important;\n  background-size: 100% 142px !important;\n}\n\n.react-flow-card-other:hover {\n  background-image: url('../icons/otherHover.png') !important;\n}\n\n.react-flow-card-artificial {\n  background-image: url('../icons/artificial.png') !important;\n  background-repeat: no-repeat !important;\n  background-size: 100% 142px !important;\n}\n\n.react-flow-card-artificial:hover {\n  background-image: url('../icons/artificialHover.png') !important;\n}\n\n.react-flow-card-high-level {\n  background-image: url('../icons/highLevel.png') !important;\n  background-repeat: no-repeat !important;\n  background-size: 100% 142px !important;\n}\n\n.react-flow-card-high-level:hover {\n  background-image: url('../icons/highLevelHover.png') !important;\n}\n\n.react-flow-card-gateway {\n  background-image: url('../icons/gateway.png') !important;\n  background-repeat: no-repeat !important;\n  background-size: 100% 142px !important;\n}\n\n.react-flow-card-gateway:hover {\n  background-image: url('../icons/gatewayHover.png') !important;\n}\n\n.react-flow-card-notification {\n  background-image: url('../icons/notification.png') !important;\n  background-repeat: no-repeat !important;\n  background-size: 100% 142px !important;\n}\n\n.react-flow-card-notification:hover {\n  background-image: url('../icons/notificationHover.png') !important;\n}\n\n.react-flow__node {\n  border-radius   : 5px;\n  background-color: transparent !important;\n}\n\n.react-flow__node .ant-card-hoverable {\n  cursor: grab\n}\n\n.flow-bind-text {\n  border         : 1px solid #d9d9d9;\n  border-radius  : 2px;\n  padding        : 4px 11px;\n  display        : flex;\n  justify-content: space-between;\n}\n\n.flow-bind-text:hover {\n  border: 1px solid #613BE8\n}\n\n.right-sider {\n  overflow-y: auto;\n}\n\n.edgepanel-body {\n  width          : 100%;\n  height         : 100%;\n  user-select    : none;\n  display        : flex;\n  align-items    : center;\n  justify-content: center;\n}\n\n.flow-select-content {\n  position: relative;\n  overflow: hidden;\n}\n\n.flow-select-content .node-list {\n  font-size: 12px;\n}\n\n.flow-select-content .content-left {\n  float: left;\n  width: 30%;\n}\n\n.flow-select-content .content-right {\n  float     : right;\n  width     : 70%;\n  box-sizing: border-box;\n  padding   : 10px;\n  max-height: 200px;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n\n.flow-select-content .node-item:hover {\n  color: #613BE8;\n}\n\n.flow-select-content .node-item.active {\n  color: #613BE8;\n}\n\n.flow-select-content .node-item {\n  cursor: pointer;\n}\n\n.flow-select-content .flow-select-tag {\n  cursor       : pointer;\n  width        : 100%;\n  margin-bottom: 4px;\n  text-align   : left;\n  padding-left: 6px;\n}\n\n.flow-select-content .flow-select-tag:hover {\n  color: #613BE8;\n}\n\n\n.ant-radio-button-wrapper {\n  flex      : 1;\n  text-align: center;\n}\n\n.flow-editor-form .dashboard-modal-button {\n  width           : 100%;\n  line-height     : 1.5715;\n  position        : relative;\n  display         : inline-block;\n  font-weight     : 400;\n  white-space     : nowrap;\n  text-align      : center;\n  background-image: none;\n  border          : 1px solid transparent;\n  box-shadow      : 0 2px 0 rgb(0 0 0 / 2%);\n  cursor          : pointer;\n  transition      : all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\n  user-select     : none;\n  touch-action    : manipulation;\n  color           : rgba(0, 0, 0, 0.85);\n  border-color    : #d9d9d9;\n  background      : #fff;\n  height          : 24px;\n  padding         : 0px 7px;\n  font-size       : 14px;\n  border-radius   : 2px;\n}\n\n.flow-editor-form .dashboard-modal-button:hover,\n.flow-editor-form .dashboard-modal-button:focus {\n  color       : #8864f5;\n  border-color: #8864f5;\n  background  : #fff;\n}\n\n.flow-editor-form .dashboard-modal-button .array-delete {\n  float    : right;\n  position : relative;\n  font-size: 12px;\n  top      : 3px;\n}\n\n.flow-editor-form .ant-tabs-nav-list {\n  width: 100%;\n}\n\n.flow-editor-form .ant-tabs-tab {\n  flex: 1;\n}\n\n.select-multiple-bind .ant-select-selector>div:last-child,\n.select-multiple-bind .ant-select-selector>div:nth-child(2) {\n  top   : auto !important;\n  bottom: -1px !important;\n}\n\n.flow_radio {\n  display: flex !important;\n}\n\n.flow_radio div label {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.flow-tabpane .ant-collapse-header {\n  height: 40px;\n  background-color: #E7ECFC;\n  color: #4F71FF !important;\n}\n\n.flow-card:hover .text-cell {\n  color: #6F87EE !important;\n}\n\n.flow-card .add-cell {\n  font-size: 18px;\n}\n\n.flow-editor .sider-content{\n  overflow: auto !important;\n}\n\n.left-sider .sider-content .flow-tabpane .add-cell svg {\n  width: 30px !important;\n  height: 30px;\n}\n\n.react-flow-card-title svg circle, .react-flow-card-title svg path, .react-flow-card-title g path, .react-flow-card-title g polygon {\n  fill: #fff;\n}\n\n.react-flow-card-exTableRecord .react-flow-card-title svg path, .react-flow-card-exTableRecord .react-flow-card-title g path {\n  stroke: #EF874C;\n}\n\n.react-flow-card-nodeAttribute .react-flow-card-title svg path {\n  stroke: #B45FB3;\n}\n\n.react-flow-card-businessData .react-flow-card-title svg path {\n  stroke: #e26e6e;\n}\n\n.react-flow-card-businessData .react-flow-card-title svg polygon {\n  fill: #e26e6e;\n}\n\n.flow-editor .react-flow__controls-button svg{\n  max-width: 16px;\n  max-height: 16px;\n}\n.flow-editor .react-flow__controls-button{\n  width: 32px;\n  height: 32px;\n}\n.iot-flow-slate-editor-wrap {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.iot-flow-slate-editor-comp {\n  width: calc(100% - 37px);\n}\n.iot-flow-slate-editor {\n  border: 1px solid #ddd;\n  min-height: 30px;\n  line-height: 30px;\n  padding: 0 5px;\n}\n.iot-flow-slate-editor-icon {\n  width: 32px;\n  height: 32px;\n  margin-left: 5px;\n  border: 1px solid #ddd;\n  padding: 0 9px;\n  line-height: 32px;\n  cursor: pointer;\n}\n\n.search-wrap {\n  position: relative;\n  padding: 6px 10px;\n  width: 100%;\n}\n\n.search-wrap .search-icon {\n  position: absolute;\n  z-index: 2;\n  top: 14px;\n  font-size: 12px;\n  left: 18px;\n  color: #C3C4CA;\n}\n.search-wrap .ant-input-affix-wrapper {\n  border: none;\n  width: 100%;\n  height: 24px;\n  line-height: 24px;\n  background: #F0F1F5;\n  border-radius: 12px;\n  font-size: 12px;\n  padding-left: 24px;\n}\n.flow-types .ant-menu-item-selected svg g, .flow-types .ant-menu-item-selected svg path {\n  fill: #fff;\n}\n.flow-types .ant-menu-item-selected .flow-all-icon svg g, .flow-types .ant-menu-item-selected .flow-all-icon svg path {\n  fill: transparent;\n}\n.flow-types .ant-menu-item-selected .flow-all-icon svg path {\n  stroke: #fff;\n}\n.flow-types .ant-menu-item-selected .flow-all-icon svg circle, .flow-types .ant-menu-item-selected .flow-all-icon svg path:not(:nth-child(3)) {\n  fill: #fff;\n}\n.dndflow .react-flow__node .ant-card .ant-card-body {\n  background: #fff;\n}\n\n.react-flow-card.ant-card > .ant-card-body{\n  padding-right: 0;\n}\n\n.react-flow-card-content {\n  display: -webkit-box;\n  -webkit-line-clamp: 4;\n  -webkit-box-orient: vertical;\n  overflow: hidden auto;\n  word-wrap: break-word;\n}"],sourceRoot:""}]);const Ae=re},399:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(4015),o=n.n(r),i=n(3645),l=n.n(i)()(o());l.push([e.id,"/* .flow-gateway-rhombus {\n  width          : 60px;\n  height         : 60px;\n  align-items    : center;\n  display        : flex;\n  justify-content: center;\n  background     : lightslategrey;\n  transform      : rotate(45deg);\n} */\n\n.flow-gateway-container {\n  color    : antiquewhite;\n  transform: rotate(45deg);\n  width          : 33px;\n  height         : 33px;\n  align-items    : center;\n  display        : flex;\n  justify-content: center;\n  background     : lightslategrey;\n}\n\n.flow-gateway-container span {\n  transform: rotate(-45deg) scale(2.5) translateY(-1px);\n}\n\n/* .react-flow__handle:hover {\n  transform: translate(-50%) ;\n} */\n\n.flow-gateway-rhombus .react-flow__handle.target {\n  background-color: rgba(0,0,0,0);\n  border: none;\n}\n\n.flow-gateway-rhombus .react-flow__handle.target div {\n  background-color: rgb(31 203 46);\n  margin: 5px auto;\n  bottom: 0px;\n}\n\n.flow-gateway-rhombus .react-flow__handle.target:hover div {\n  box-shadow: 0 0 12px 6px #7ac782;\n}\n\n.flow-gateway-rhombus .react-flow__handle.source {\n  background-color: rgba(0,0,0,0);\n  border: none;\n}\n\n.flow-gateway-rhombus .react-flow__handle.source div {\n  background-color: #6991FF;\n  margin: 5px auto;\n  bottom: 0px;\n}\n\n.flow-gateway-rhombus .react-flow__handle.source:hover div {\n  box-shadow: 0 0 12px 6px #AEC4FF;\n}\n\n.flow-gateway-remove-button {\n  position     : absolute;\n  top          : 5px;\n  left         : 28px;\n  z-index      : 1;\n  cursor       : pointer;\n  height       : 23px;\n  width        : 23px;\n  display      : none;\n}\n\n.flow-gateway-rhombus:hover .flow-gateway-remove-button {\n  display: block\n}","",{version:3,sources:["webpack://./src/nodes/gateway/style.css"],names:[],mappings:"AAAA;;;;;;;;GAQG;;AAEH;EACE,uBAAuB;EACvB,wBAAwB;EACxB,qBAAqB;EACrB,qBAAqB;EACrB,uBAAuB;EACvB,qBAAqB;EACrB,uBAAuB;EACvB,+BAA+B;AACjC;;AAEA;EACE,qDAAqD;AACvD;;AAEA;;GAEG;;AAEH;EACE,+BAA+B;EAC/B,YAAY;AACd;;AAEA;EACE,gCAAgC;EAChC,gBAAgB;EAChB,WAAW;AACb;;AAEA;EACE,gCAAgC;AAClC;;AAEA;EACE,+BAA+B;EAC/B,YAAY;AACd;;AAEA;EACE,yBAAyB;EACzB,gBAAgB;EAChB,WAAW;AACb;;AAEA;EACE,gCAAgC;AAClC;;AAEA;EACE,uBAAuB;EACvB,kBAAkB;EAClB,mBAAmB;EACnB,gBAAgB;EAChB,sBAAsB;EACtB,mBAAmB;EACnB,mBAAmB;EACnB,mBAAmB;AACrB;;AAEA;EACE;AACF",sourcesContent:["/* .flow-gateway-rhombus {\n  width          : 60px;\n  height         : 60px;\n  align-items    : center;\n  display        : flex;\n  justify-content: center;\n  background     : lightslategrey;\n  transform      : rotate(45deg);\n} */\n\n.flow-gateway-container {\n  color    : antiquewhite;\n  transform: rotate(45deg);\n  width          : 33px;\n  height         : 33px;\n  align-items    : center;\n  display        : flex;\n  justify-content: center;\n  background     : lightslategrey;\n}\n\n.flow-gateway-container span {\n  transform: rotate(-45deg) scale(2.5) translateY(-1px);\n}\n\n/* .react-flow__handle:hover {\n  transform: translate(-50%) ;\n} */\n\n.flow-gateway-rhombus .react-flow__handle.target {\n  background-color: rgba(0,0,0,0);\n  border: none;\n}\n\n.flow-gateway-rhombus .react-flow__handle.target div {\n  background-color: rgb(31 203 46);\n  margin: 5px auto;\n  bottom: 0px;\n}\n\n.flow-gateway-rhombus .react-flow__handle.target:hover div {\n  box-shadow: 0 0 12px 6px #7ac782;\n}\n\n.flow-gateway-rhombus .react-flow__handle.source {\n  background-color: rgba(0,0,0,0);\n  border: none;\n}\n\n.flow-gateway-rhombus .react-flow__handle.source div {\n  background-color: #6991FF;\n  margin: 5px auto;\n  bottom: 0px;\n}\n\n.flow-gateway-rhombus .react-flow__handle.source:hover div {\n  box-shadow: 0 0 12px 6px #AEC4FF;\n}\n\n.flow-gateway-remove-button {\n  position     : absolute;\n  top          : 5px;\n  left         : 28px;\n  z-index      : 1;\n  cursor       : pointer;\n  height       : 23px;\n  width        : 23px;\n  display      : none;\n}\n\n.flow-gateway-rhombus:hover .flow-gateway-remove-button {\n  display: block\n}"],sourceRoot:""}]);const a=l},8885:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(4015),o=n.n(r),i=n(3645),l=n.n(i)()(o());l.push([e.id,".statistics-node.ant-form-item {\n  flex-direction: row !important;\n}\n.statistics-node .ant-form-item {\n  flex-direction: row !important;\n}","",{version:3,sources:["webpack://./src/nodes/process/dataNode/style.css"],names:[],mappings:"AAAA;EACE,8BAA8B;AAChC;AACA;EACE,8BAA8B;AAChC",sourcesContent:[".statistics-node.ant-form-item {\n  flex-direction: row !important;\n}\n.statistics-node .ant-form-item {\n  flex-direction: row !important;\n}"],sourceRoot:""}]);const a=l},3395:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(4015),o=n.n(r),i=n(3645),l=n.n(i)()(o());l.push([e.id,".flow_modal_table section {\n    height: inherit !important;\n}","",{version:3,sources:["webpack://./src/nodes/process/index.css"],names:[],mappings:"AAAA;IACI,0BAA0B;AAC9B",sourcesContent:[".flow_modal_table section {\n    height: inherit !important;\n}"],sourceRoot:""}]);const a=l},7021:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(4015),o=n.n(r),i=n(3645),l=n.n(i)()(o());l.push([e.id,"/* container style */\n\n.editor-layout {\n  position: absolute;\n}\n\n.editor-layout.editor-layout-container {\n  width   : 100%;\n  height  : 100%;\n  overflow: hidden;\n}\n\n.editor-layout.editor-layout-header {\n  width: 100%;\n}","",{version:3,sources:["webpack://./src/style/index.css"],names:[],mappings:"AAAA,oBAAoB;;AAEpB;EACE,kBAAkB;AACpB;;AAEA;EACE,cAAc;EACd,cAAc;EACd,gBAAgB;AAClB;;AAEA;EACE,WAAW;AACb",sourcesContent:["/* container style */\n\n.editor-layout {\n  position: absolute;\n}\n\n.editor-layout.editor-layout-container {\n  width   : 100%;\n  height  : 100%;\n  overflow: hidden;\n}\n\n.editor-layout.editor-layout-header {\n  width: 100%;\n}"],sourceRoot:""}]);const a=l},5625:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(4015),o=n.n(r),i=n(3645),l=n.n(i)()(o());l.push([e.id,".flow-task-agree-btn:not([disabled]) {\n  background: #52c41a !important;\n  border-color: #52c41a !important;\n}\n","",{version:3,sources:["webpack://./src/task/index.css"],names:[],mappings:"AAAA;EACE,8BAA8B;EAC9B,gCAAgC;AAClC",sourcesContent:[".flow-task-agree-btn:not([disabled]) {\n  background: #52c41a !important;\n  border-color: #52c41a !important;\n}\n"],sourceRoot:""}]);const a=l},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var l=this[i][0];null!=l&&(o[l]=!0)}for(var a=0;a<e.length;a++){var u=[].concat(e[a]);r&&o[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}},4015:e=>{"use strict";function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.exports=function(e){var n,r,o=(r=4,function(e){if(Array.isArray(e))return e}(n=e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,o,i=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(e){a=!0,o=e}finally{try{l||null==n.return||n.return()}finally{if(a)throw o}}return i}}(n,r)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[1],l=o[3];if(!l)return i;if("function"==typeof btoa){var a=btoa(unescape(encodeURIComponent(JSON.stringify(l)))),u="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),c="/*# ".concat(u," */"),s=l.sources.map((function(e){return"/*# sourceURL=".concat(l.sourceRoot||"").concat(e," */")}));return[i].concat(s).concat([c]).join("\n")}return[i].join("\n")}},1667:e=>{"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},9763:(e,t,n)=>{e.exports=n.p+"8ee1847d94907875c14d431d213c9e12.png"},3657:(e,t,n)=>{e.exports=n.p+"0a1fdba42b3618dd485e5d1c2ecf97c2.png"},7849:(e,t,n)=>{e.exports=n.p+"21a2c86d0973c364959f0f10fa6ac306.png"},9815:(e,t,n)=>{e.exports=n.p+"3006acc038af7a082100964400da9ee4.png"},6521:(e,t,n)=>{e.exports=n.p+"a376862ca14a102d0a1197cfc5c3b1e6.png"},870:(e,t,n)=>{e.exports=n.p+"2805c99e5c1e912b36bd3e1796a9f37d.png"},8989:(e,t,n)=>{e.exports=n.p+"dd4a817b415f8324f065a677881d4357.png"},8578:(e,t,n)=>{e.exports=n.p+"1f42ab996c897ef44971288405f33d19.png"},257:(e,t,n)=>{e.exports=n.p+"92f9e9001e03de75f140be233c97125c.png"},3473:(e,t,n)=>{e.exports=n.p+"2f2dd1e4b48424ece739be62849dfbfc.png"},4507:(e,t,n)=>{e.exports=n.p+"192c9cfad24ccca988e04e1be72f0334.png"},1193:(e,t,n)=>{e.exports=n.p+"17be152474f4bb5e9ee1324884dc0be1.png"},3092:(e,t,n)=>{e.exports=n.p+"6fe0540ff5713d402d47d0c2390850d4.png"},2122:(e,t,n)=>{e.exports=n.p+"a37d22b38cda6ecfd65556b7ed9f5065.png"},7781:(e,t,n)=>{e.exports=n.p+"a5bccb4ae7caa9c95072fe6cd86410af.png"},3129:(e,t,n)=>{e.exports=n.p+"91c9fbe9506a277efa4d29a8fe88d2ce.png"},9570:(e,t,n)=>{e.exports=n.p+"65ef268b8884be5f218092910e19da3a.png"},9769:(e,t,n)=>{e.exports=n.p+"8552e026e75faa467e7da021c92b46df.png"},8015:(e,t,n)=>{e.exports=n.p+"a38c0ebaab36ecd55c67fc129ffbd978.png"},6697:(e,t,n)=>{e.exports=n.p+"ecc5d9c83ab1bdb4359e816a3a432cc7.png"},5395:(e,t,n)=>{e.exports=n.p+"ded8abecce7f568c6e7d4cf9614c2d6a.png"},2617:(e,t,n)=>{e.exports=n.p+"8714aee2c050e02296669c2c2741438f.png"},200:(e,t,n)=>{e.exports=n.p+"144d9e0cf7708e2da4c777432a11e184.png"},5140:(e,t,n)=>{e.exports=n.p+"3ee24648fca21e9306fb685ad56b2389.png"},6003:(e,t,n)=>{e.exports=n.p+"7558697b2a0a3ea81abf1c59f544c0e5.png"},9330:(e,t,n)=>{e.exports=n.p+"1b7f16b5ab8dbe9304cb439885850887.png"},1678:(e,t,n)=>{e.exports=n.p+"bac7d4ae41e9aec29350f576851121b4.png"},5002:(e,t,n)=>{e.exports=n.p+"175289d33ac0abfff29ac74598cc1a71.png"},1569:(e,t,n)=>{t.generic=n(6601),t.mongoose=n(4202),t.bigquery=n(6004),t.mysql=n(2646),t.json=n(3809),t.clickhouse=n(5682)},6004:(e,t,n)=>{var r=n(5040);function o(e){return Array.isArray(e)?"REPEATED":"NULLABLE"}function i(e){if(Array.isArray(e))return i(e[0]);if(e instanceof Date)return"TIMESTAMP";if("object"==typeof e)return"RECORD";if("boolean"==typeof e)return"BOOLEAN";if("string"==typeof e){if(r.isDateString(e))return"DATE";if(r.isTimestamp(e))return"TIMESTAMP"}return isNaN(e)?"STRING":Number.isInteger(parseFloat(e))?"INTEGER":"FLOAT"}function l(e){return Object.keys(e).map((function(t){var n=e[t],r={name:t,type:i(e[t]),mode:o(e[t])};return"RECORD"===r.type&&(r.fields=l("REPEATED"===r.mode?n[0]:n)),r}))}e.exports=function(e){return l(e)}},5682:(e,t,n)=>{var r=n(6334),o=n(5040),i={boolean:"String",string:"String",number:"Int32",date:"Date",timestamp:"DateTime",object:"Nested",regexp:"String",undefined:"String",null:"String"},l=function(e,t){return["  ",e," ",t,","].join("")};function a(e,t,n){var u,c,s,d,p=t.tableName,f=t.parentTableName,m=t.parentTableId,v=t.parentTableIdType,y=Object.keys(e),g=[],h=[],b=null,w="string";g.push(function(e){return["CREATE TABLE ",e," ("].join("")}(p)),f&&g.push(l(f+"_"+m,i[v]));for(var _=0;_<y.length;_++)("id"===y[_].toLowerCase()||y[_].toLowerCase().indexOf("_id")>-1)&&(e[u=y[_]]=e[y[_]],y[_]=u,b=y[_],w=typeof e[y[_]]);for(b||(b="id",w=v||w,g.push(l(b,i[w]))),_=0;_<y.length;_++)if("date"!=(d=(s=e[c=y[_]])instanceof Date?"date":r.string(s).toLowerCase())||n||(n=c),"undefined"!==d&&(d=o.isTimestamp(s)?"timestamp":d),"function"!==d)if("object"!==d||s.length)if("object"!==d&&"array"!==d)g.push(l(c,i[d]));else{if("object"==typeof s[0]){h.push(""),h.push(a(s[0],{parentTableName:p,parentTableId:b,parentTableIdType:w,tableName:p+"_"+c}).join(""));continue}h.push(""),h.push(a({value:typeof s[0]},{parentTableName:p,parentTableId:b,parentTableIdType:w,tableName:p+"_"+c}).join(""))}else h.push(""),h.push(a(s,{parentTableName:p,parentTableId:b,parentTableIdType:w,tableName:p+"_"+c}).join(""));return g[g.length-1]=o.arrayLastItem(g).substr(0,o.arrayLastItem(g).length-1),g.push(function(e,t){return t?[") ENGINE = MergeTree(",t,", (",e,", ",t,"), 8192);"].join(""):[") ENGINE = Memory;"].join("")}(b,n)),g.concat(h)}e.exports=function(e,t,n){return"string"!=typeof e&&(t=e,e="generic"),n||(n=null),a(t,{tableName:e},n).join("")}},6601:(e,t,n)=>{var r=n(6334),o=n(5040);e.exports=function e(t,n){for(var i in n=n||{},t){var l=t[i],a=r.string(l).toLowerCase();"undefined"===a&&(a="null"),"string"===a&&o.isDate(l)&&(a="date"),"object"!==a?n[i]={type:a}:(n[i]=e(t[i]),n[i].type=a)}return n}},3809:(e,t,n)=>{var r=n(6334);function o(e){return"date"===r.string(e).toLowerCase()?"date-time":null}function i(e){var t=r.string(e).toLowerCase();return"date"===t||"regexp"===t||"function"===t?"string":t}function l(e,t,n){var r,o,i;e=Object.keys(e),n=n||[];for(var l=0,a=(t=Object.keys(t)).length;l<a;l++)r=t[l],i=e.indexOf(r),o=n.indexOf(r),-1===i?-1!==o&&n.splice(o,1):-1===o&&n.push(r);return n}function a(e,t,n){var c,s,d;n&&t?t={items:t}:((t=t||{}).type=i(e),t.items=t.items||{},d=t.items.type||null);for(var p=0,f=e.length;p<f;p++){var m=i(e[p]),v=o(e[p]);if(d&&m!==d){t.items.oneOf=[],s=!0;break}d=m,c=v}if(!s&&d?(t.items.type=d,c&&(t.items.format=c)):s&&"object"!==d&&(t.items={oneOf:[{type:d}],required:t.items.required}),void 0!==t.items.oneOf||"object"===d)for(var y=0,g=e.length;y<g;y++){var h,b=e[y],w=i(b),_=o(b);if("object"===w?(t.items.properties&&(t.items.required=l(t.items.properties,b,t.items.required)),h=u(b,s?{}:t.items.properties,!0)):"array"===w?h=a(b,s?{}:t.items.properties,!0):((h={}).type=w,_&&(h.format=_)),s){var E=r.string(b).toLowerCase(),C={};h.type||"object"!==E||(C.properties=h,C.type="object",h=C),t.items.oneOf.push(h)}else{if("object"!==t.items.type)continue;t.items.properties=h}}return n?t.items:t}function u(e,t,n){for(var r in n&&t?t={properties:t}:((t=t||{}).type=i(e),t.properties=t.properties||{}),e){var l=e[r],c=i(l),s=o(l);if("object"!==(c="undefined"===c?"null":c))if("array"!==c)if(t.properties[r]){var d=t.properties[r],p=Array.isArray(d.type);p&&d.type.indexOf(c)<0&&d.type.push(c),p||d.type===c||(d.type=[d.type,c])}else t.properties[r]={},t.properties[r].type=c,s&&(t.properties[r].format=s);else t.properties[r]=a(l,t.properties[r]);else t.properties[r]=u(l,t.properties[r])}return n?t.properties:t}e.exports=function(e,t){var n,o={$schema:"http://json-schema.org/draft-04/schema#"};return"string"!=typeof e?(t=e,e=void 0):o.title=e,o.type=r.string(t).toLowerCase(),"object"===o.type&&(n=u(t),o.type=n.type,o.properties=n.properties),"array"===o.type&&(n=a(t),o.type=n.type,o.items=n.items,o.title&&(o.items.title=o.title,o.title+=" Set")),o}},4202:(e,t,n)=>{var r=n(6334),o=n(5040);function i(e){switch(e){case"array":return"Array";case"buffer":return"Buffer";case"boolean":return"Boolean";case"date":return"Date";case"number":return"Number";case"string":return"String";case"objectid":return"ObjectId";default:return"Mixed"}}e.exports=function e(t,n){for(var l in n=n||{},t){var a=t[l],u=null,c=null,s=null;if(a instanceof Buffer&&(s="buffer"),null!=a&&void 0!==a.toString&&a.toString().match(/^[0-9a-fA-F]{24}$/)&&(s="objectid"),s||(s=r.string(a).toLowerCase()),"string"===s&&o.isDate(a)&&(s="date"),"object"===s)n[l]=e(t[l]);else{if("undefined"===s&&(s="null"),"array"===s&&a.length){u=s,s=void 0;for(var d=0,p=a.length;d<p;d++){if(c=r.string(a[d]).toLowerCase(),s&&c!==s){s="mixed";break}s=c}}n[l]=u&&"array"===u?{type:[i(s)]}:{type:i(s)}}}return n}},2646:(e,t,n)=>{var r=n(6334),o=n(5040),i={boolean:"BOOLEAN",string:"TEXT",number:"INT",date:"DATE",timestamp:"TIMESTAMP",regexp:"TEXT",undefined:"TEXT",null:"TEXT"},l=function(e,t){return["  ",e," ",t,","].join("")};function a(e,t){var n,u,c,s,d=t.tableName,p=t.parentTableName,f=t.parentTableId,m=t.parentTableIdType,v=Object.keys(e),y=[],g=[],h=null,b="string";y.push(function(e){return["CREATE TABLE ",e," ("].join("")}(d)),p&&y.push(l(p+"_"+f,i[m]));for(var w=0;w<v.length;w++)("id"===v[w].toLowerCase()||v[w].toLowerCase().indexOf("_id")>-1)&&(e[n=v[w]]=e[v[w]],v[w]=n,h=v[w],b=typeof e[v[w]]);for(h||(h="id",b=m||b,y.push(l(h,i[b]))),w=0;w<v.length;w++)if("undefined"!==(s=(c=e[u=v[w]])instanceof Date?"date":r.string(c).toLowerCase())&&(s=o.isTimestamp(c)?"timestamp":s),"function"!==s)if("object"!==s||c.length)if("object"!==s&&"array"!==s)y.push(l(u,i[s]));else{if("object"==typeof c[0]){g.push(""),g.push(a(c[0],{parentTableName:d,parentTableId:h,parentTableIdType:b,tableName:d+"_"+u}).join("\n"));continue}g.push(""),g.push(a({value:typeof c[0]},{parentTableName:d,parentTableId:h,parentTableIdType:b,tableName:d+"_"+u}).join("\n"))}else g.push(""),g.push(a(c,{parentTableName:d,parentTableId:h,parentTableIdType:b,tableName:d+"_"+u}).join("\n"));return y.push(function(e){return["  PRIMARY KEY (",e,"),"].join("")}(h)),p&&y.push(["  FOREIGN KEY (",p+"_id",") REFERENCES ",p,"(",f,"),"].join("")),y[y.length-1]=o.arrayLastItem(y).substr(0,o.arrayLastItem(y).length-1),y.push(");"),y.concat(g)}e.exports=function(e,t){return"string"!=typeof e&&(t=e,e="generic"),a(t,{tableName:e}).join("\n")}},5040:(e,t)=>{var n=/\d{4}-\d{2}-\d{2}/;t.isNumber=function(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)},t.isDate=function(e){return"Invalid Date"!==new Date(e).toString()&&!isNaN(new Date(e))},t.isTimestamp=function(e){return e.length>18&&!isNaN(new Date(e).getTime())},t.isDateString=function(e){return e.match(n)},t.arrayLastItem=function(e){return e[e.length-1]}},4301:(e,t,n)=>{n(7147),e.exports=self.fetch.bind(self)},3379:(e,t,n)=>{"use strict";var r,o=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),l=[];function a(e){for(var t=-1,n=0;n<l.length;n++)if(l[n].identifier===e){t=n;break}return t}function u(e,t){for(var n={},r=[],o=0;o<e.length;o++){var i=e[o],u=t.base?i[0]+t.base:i[0],c=n[u]||0,s="".concat(u," ").concat(c);n[u]=c+1;var d=a(s),p={css:i[1],media:i[2],sourceMap:i[3]};-1!==d?(l[d].references++,l[d].updater(p)):l.push({identifier:s,updater:y(p,t),references:1}),r.push(s)}return r}function c(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var l=i(e.insert||"head");if(!l)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");l.appendChild(t)}return t}var s,d=(s=[],function(e,t){return s[e]=t,s.filter(Boolean).join("\n")});function p(e,t,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=d(t,o);else{var i=document.createTextNode(o),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(i,l[t]):e.appendChild(i)}}function f(e,t,n){var r=n.css,o=n.media,i=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var m=null,v=0;function y(e,t){var n,r,o;if(t.singleton){var i=v++;n=m||(m=c(t)),r=p.bind(null,n,i,!1),o=p.bind(null,n,i,!0)}else n=c(t),r=f.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=o());var n=u(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var o=a(n[r]);l[o].references--}for(var i=u(e,t),c=0;c<n.length;c++){var s=a(n[c]);0===l[s].references&&(l[s].updater(),l.splice(s,1))}n=i}}}},2291:e=>{e.exports='<svg viewBox="0 0 14 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 20备份 3</title><desc>Created with Sketch.</desc><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="新增变量" transform="translate(-371.000000, -115.000000)"><g id="编组-20备份-3" transform="translate(371.000000, 115.000000)"><circle id="椭圆形" fill="#FFFFFF" fill-rule="nonzero" cx="7" cy="7" r="7"></circle><path d="M3.73333333,7.23333333 L10.2362062,7.23333333" id="路径-44" stroke="#55B0C0" stroke-linecap="round"></path><path d="M3.74856355,7.24856355 L10.2514364,7.24856355" id="路径-44" stroke="#55B0C0" stroke-linecap="round" transform="translate(7.000000, 7.248564) rotate(-90.000000) translate(-7.000000, -7.248564) "></path></g></g></g></svg>'},5962:e=>{e.exports='<svg viewBox="0 0 14 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="页面-2" stroke="none" stroke-width="0" fill="none" fill-rule="evenodd"><g id="暂无数据图表" transform="translate(-533.000000, -244.000000)"><g id="？" transform="translate(516.000000, 226.000000)"><g id="gengxin" transform="translate(17.000000, 18.000000)" fill="#fff" fill-rule="nonzero"><path d="M12.3389,11.3435 C11.0117,12.999 9.06149999,14 6.94610001,14 C3.6022,14 0.73010001,11.5024 0,8.03879999 L1.38950001,7.7 C1.97330001,10.4685 4.27140001,12.467 6.94610001,12.467 C8.6863,12.467 10.2858,11.62 11.3491,10.2298 L9.8,8.4875 L14,8.4875 L14,13.2125 L12.3389,11.3435 Z M1.6611,2.6565 C2.9883,1.00100001 4.93850001,0 7.05389999,0 C10.3978,0 13.2699,2.4976 14,5.96120001 L12.6105,6.3 C12.0267,3.53149999 9.72859999,1.533 7.05389999,1.533 C5.3137,1.533 3.71419999,2.38 2.6509,3.7702 L4.2,5.5125 L0,5.5125 L0,0.787499999 L1.6611,2.6565 Z" id="形状"></path></g><line x1="21.7227004" y1="25" x2="26.1242006" y2="25" id="路径-31" stroke="#fff" stroke-width="2" stroke-linecap="round"></line><line x1="23.9234505" y1="27.2007501" x2="23.9234505" y2="22.7992499" id="路径-31" stroke="#fff" stroke-width="2" stroke-linecap="round"></line></g></g></g></svg>'},4721:e=>{e.exports='<svg viewBox="0 0 23 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><desc>Created with Sketch.</desc><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-535.000000, -961.000000)"><g id="编组-31" transform="translate(535.000000, 961.000000)"><circle id="椭圆形备份-6" fill="#62BF70" cx="11.5" cy="11.5" r="11.5"></circle><g id="编组-30" transform="translate(6.000000, 6.000000)" stroke="#FFFFFF"><rect id="矩形" x="0.5" y="0.5" width="9" height="9" rx="1"></rect><path d="M9.63426252,2 L11,2 C11.5522847,2 12,2.44771525 12,3 L12,11 C12,11.5522847 11.5522847,12 11,12 L3,12 C2.44771525,12 2,11.5522847 2,11 L2,9.58366094" id="形状"></path></g></g></g></g></svg>'},4207:e=>{e.exports='<svg viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 33</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="-2.13221305%" id="linearGradient-http"><stop stop-color="#E5689A" offset="0%"></stop><stop stop-color="#F477B3" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-47.000000, -1865.000000)"><g id="编组-33" transform="translate(47.000000, 1865.000000)"><g id="wangguan" fill="url(#linearGradient-http)" fill-rule="nonzero"><path d="M25.1142857,13.9090909 L26.6137143,13.9090909 C27.2843091,13.9090133 27.8933805,14.2821831 28.1725714,14.8641818 L30,18.6739091 L30,28.3636364 C30,29.267375 29.2324881,30 28.2857143,30 L1.71428571,30 C0.767511857,30 0,29.267375 0,28.3636364 L0,18.7186364 L1.82942857,14.8693636 C2.10736035,14.2846225 2.71788459,13.9090837 3.39057143,13.9090909 L4.88571429,13.9090909 C4.86666298,13.8193221 4.85709128,13.7279559 4.85714286,13.6363636 L4.85714286,1.36363636 C4.85714286,0.610520796 5.49673607,0 6.28571429,0 C7.0746925,0 7.71428571,0.610520796 7.71428571,1.36363636 L7.71428571,13.6363636 C7.71428571,13.7296364 7.70457143,13.821 7.68571429,13.9090909 L22.3142857,13.9090909 C22.2952344,13.8193221 22.2856627,13.7279559 22.2857143,13.6363636 L22.2857143,1.36363636 C22.2857143,0.610520796 22.9253075,0 23.7142857,0 C24.5032639,0 25.1428571,0.610520796 25.1428571,1.36363636 L25.1428571,13.6363636 C25.1428571,13.7296364 25.1331429,13.821 25.1142857,13.9090909 L25.1142857,13.9090909 Z M4.46228571,16.6363636 C4.35409551,16.6364188 4.25521816,16.6948011 4.20685714,16.7871818 L3.34971429,18.4235455 C3.30546891,18.5080643 3.31020418,18.6084216 3.36223014,18.6888015 C3.4142561,18.7691815 3.50615997,18.8181314 3.60514286,18.8181818 L26.4448571,18.8181818 C26.5385399,18.8181482 26.6262537,18.7742778 26.6796056,18.7007713 C26.7329574,18.6272648 26.7451684,18.5334622 26.7122857,18.4497273 L26.0694286,16.8133636 C26.027634,16.7069347 25.921073,16.6364063 25.802,16.6363636 L4.46228571,16.6363636 L4.46228571,16.6363636 Z M21,23.1818182 C20.2899196,23.1818182 19.7142857,23.7312869 19.7142857,24.4090909 C19.7142857,25.0868949 20.2899196,25.6363636 21,25.6363636 L24.1428571,25.6363636 C24.8529375,25.6363636 25.4285714,25.0868949 25.4285714,24.4090909 C25.4285714,23.7312869 24.8529375,23.1818182 24.1428571,23.1818182 L21,23.1818182 L21,23.1818182 Z M16.4285714,23.1818182 C15.718491,23.1818182 15.1428571,23.7312869 15.1428571,24.4090909 C15.1428571,25.0868949 15.718491,25.6363636 16.4285714,25.6363636 L17,25.6363636 C17.7100804,25.6363636 18.2857143,25.0868949 18.2857143,24.4090909 C18.2857143,23.7312869 17.7100804,23.1818182 17,23.1818182 L16.4285714,23.1818182 L16.4285714,23.1818182 Z M11.8571429,23.1818182 C11.1470625,23.1818182 10.5714286,23.7312869 10.5714286,24.4090909 C10.5714286,25.0868949 11.1470625,25.6363636 11.8571429,25.6363636 L12.4285714,25.6363636 C13.1386518,25.6363636 13.7142857,25.0868949 13.7142857,24.4090909 C13.7142857,23.7312869 13.1386518,23.1818182 12.4285714,23.1818182 L11.8571429,23.1818182 L11.8571429,23.1818182 Z" id="形状"></path></g><rect id="矩形" fill="#EB6EA3" x="7" y="21" width="21" height="6"></rect><text id="http" font-family="Arial-BoldMT, Arial" font-size="8" font-weight="bold" fill="#FFFFFF"><tspan x="10" y="27">db</tspan></text></g></g></g></svg>'},1944:e=>{e.exports='<svg viewBox="0 0 23 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><desc>Created with Sketch.</desc><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-562.000000, -961.000000)"><g id="编组-32" transform="translate(562.000000, 961.000000)"><circle id="椭圆形" fill="#E0605A" cx="11.5" cy="11.5" r="11.5"></circle><path d="M15.4904719,6.78391192 L7.49047189,16.7839119" id="路径-30" stroke="#FFFFFF" stroke-linecap="round" transform="translate(11.490472, 11.783912) rotate(7.000000) translate(-11.490472, -11.783912) "></path><path d="M7.49047189,6.78391192 L15.4904719,16.7839119" id="路径-30" stroke="#FFFFFF" stroke-linecap="round" transform="translate(11.490472, 11.783912) rotate(-6.000000) translate(-11.490472, -11.783912) "></path></g></g></g></svg>'},5789:e=>{e.exports='<svg viewBox="0 0 32 34" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M14.3228572,6.31087278e-06 C15.0308172,-0.00201544164 15.6477091,0.481925088 15.8142857,1.17001143 L15.8142857,1.17001143 L18,11.571429 L18,16.444281 C17.9929401,17.305553 17.2927304,17.9999937 16.4314286,17.9999937 L16.4314286,17.9999937 L1.56857143,17.9999937 C0.702273352,17.9999937 0,17.2977211 0,16.4314239 L0,16.4314239 L0,11.571429 L2.18571428,1.17001143 C2.4051542,0.485122027 3.03525865,0.0151265857 3.75428572,6.31087278e-06 L3.75428572,6.31087278e-06 Z M14.0914286,14.0657121 C13.6582795,14.0657121 13.3071428,14.4168484 13.3071428,14.849997 L13.3071428,14.849997 L13.3071428,15.6342819 C13.3071428,16.0674305 13.6582795,16.4185668 14.0914286,16.4185668 C14.5245776,16.4185668 14.8757143,16.0674305 14.8757143,15.6342819 L14.8757143,15.6342819 L14.8757143,14.849997 C14.8757143,14.4168484 14.5245776,14.0657121 14.0914286,14.0657121 Z M14.2457143,1.56858244 L3.75428572,1.56858244 L1.8,12.2399998 L16.2,12.2399998 L14.2457143,1.56858244 Z M13.25,9 C13.7045454,9 13.9524793,9.13774105 13.9938017,9.41322314 L14,9.5 C14,9.83333332 13.75,10 13.25,10 L4.75000001,10 C4.29545456,10 4.04752066,9.86225895 4.00619835,9.58677686 L4,9.5 C4,9.16666666 4.25,9 4.75000001,9 L13.25,9 Z M12.2,4 C12.6848485,4 12.9493113,4.13774105 12.9933884,4.41322314 L13,4.5 C13,4.83333332 12.7333333,5 12.2,5 L5.8,5 C5.31515151,5 5.05068871,4.86225895 5.00661157,4.58677686 L5,4.5 C5,4.16666666 5.26666667,4 5.8,4 L12.2,4 Z" id="path-2"></path><filter x="-58.3%" y="-41.7%" width="216.7%" height="216.7%" filterUnits="objectBoundingBox" id="filter-3"><feOffset dx="0" dy="3" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset><feGaussianBlur stdDeviation="3" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur><feColorMatrix values="0 0 0 0 0.21684124 0 0 0 0 0.325918763 0 0 0 0 0.804181749 0 0 0 1 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix></filter></defs><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="1" transform="translate(-146.000000, -466.000000)"><g id="驱动事件" transform="translate(146.000000, 469.000000)"><rect id="矩形备份-62" fill="#fff" x="0" y="0" width="32" height="32" rx="7"></rect><g id="驱动管理备份" transform="translate(7.000000, 7.000000)" fill-rule="nonzero"><g id="形状结合"><use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-2"></use><use fill="#E26E6E" xlink:href="#path-2"></use></g></g></g></g></g></svg>'},7620:e=>{e.exports='<svg viewBox="0 0 14 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 19备份 2</title><desc>Created with Sketch.</desc><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="计划事件" transform="translate(-374.000000, -439.000000)"><g id="编组-19备份-2" transform="translate(374.000000, 439.000000)"><rect id="矩形" fill="#FFFFFF" fill-rule="nonzero" x="0" y="0" width="14" height="14" rx="2"></rect><path d="M3.26666667,3.96666667 L10.6415113,3.96666667" id="路径-43" stroke="#6C78ED" stroke-linecap="round"></path><path d="M3.26666667,7.23333333 L10.6415113,7.23333333" id="路径-43" stroke="#6C78ED" stroke-linecap="round"></path><path d="M3.26666667,10.5 L10.6415113,10.5" id="路径-43" stroke="#6C78ED" stroke-linecap="round"></path></g></g></g></svg>'},7073:e=>{e.exports='<svg viewBox="0 0 14 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 6备份 2</title><desc>Created with Sketch.</desc><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="数据节点" transform="translate(-371.000000, -357.000000)"><g id="编组-6备份-2" transform="translate(371.000000, 357.000000)"><circle id="椭圆形" fill="#FFFFFF" fill-rule="nonzero" cx="7" cy="7" r="7"></circle><polyline id="路径-49" stroke="#68A926" stroke-linecap="round" points="6.95408898 3.67301792 6.95408898 7.46666667 10.6415113 9.98487551"></polyline></g></g></g></svg>'},6080:e=>{e.exports='<svg viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 33</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="-2.13221305%" id="linearGradient-http"><stop stop-color="#E5689A" offset="0%"></stop><stop stop-color="#F477B3" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-47.000000, -1865.000000)"><g id="编组-33" transform="translate(47.000000, 1865.000000)"><g id="wangguan" fill="url(#linearGradient-http)" fill-rule="nonzero"><path d="M25.1142857,13.9090909 L26.6137143,13.9090909 C27.2843091,13.9090133 27.8933805,14.2821831 28.1725714,14.8641818 L30,18.6739091 L30,28.3636364 C30,29.267375 29.2324881,30 28.2857143,30 L1.71428571,30 C0.767511857,30 0,29.267375 0,28.3636364 L0,18.7186364 L1.82942857,14.8693636 C2.10736035,14.2846225 2.71788459,13.9090837 3.39057143,13.9090909 L4.88571429,13.9090909 C4.86666298,13.8193221 4.85709128,13.7279559 4.85714286,13.6363636 L4.85714286,1.36363636 C4.85714286,0.610520796 5.49673607,0 6.28571429,0 C7.0746925,0 7.71428571,0.610520796 7.71428571,1.36363636 L7.71428571,13.6363636 C7.71428571,13.7296364 7.70457143,13.821 7.68571429,13.9090909 L22.3142857,13.9090909 C22.2952344,13.8193221 22.2856627,13.7279559 22.2857143,13.6363636 L22.2857143,1.36363636 C22.2857143,0.610520796 22.9253075,0 23.7142857,0 C24.5032639,0 25.1428571,0.610520796 25.1428571,1.36363636 L25.1428571,13.6363636 C25.1428571,13.7296364 25.1331429,13.821 25.1142857,13.9090909 L25.1142857,13.9090909 Z M4.46228571,16.6363636 C4.35409551,16.6364188 4.25521816,16.6948011 4.20685714,16.7871818 L3.34971429,18.4235455 C3.30546891,18.5080643 3.31020418,18.6084216 3.36223014,18.6888015 C3.4142561,18.7691815 3.50615997,18.8181314 3.60514286,18.8181818 L26.4448571,18.8181818 C26.5385399,18.8181482 26.6262537,18.7742778 26.6796056,18.7007713 C26.7329574,18.6272648 26.7451684,18.5334622 26.7122857,18.4497273 L26.0694286,16.8133636 C26.027634,16.7069347 25.921073,16.6364063 25.802,16.6363636 L4.46228571,16.6363636 L4.46228571,16.6363636 Z M21,23.1818182 C20.2899196,23.1818182 19.7142857,23.7312869 19.7142857,24.4090909 C19.7142857,25.0868949 20.2899196,25.6363636 21,25.6363636 L24.1428571,25.6363636 C24.8529375,25.6363636 25.4285714,25.0868949 25.4285714,24.4090909 C25.4285714,23.7312869 24.8529375,23.1818182 24.1428571,23.1818182 L21,23.1818182 L21,23.1818182 Z M16.4285714,23.1818182 C15.718491,23.1818182 15.1428571,23.7312869 15.1428571,24.4090909 C15.1428571,25.0868949 15.718491,25.6363636 16.4285714,25.6363636 L17,25.6363636 C17.7100804,25.6363636 18.2857143,25.0868949 18.2857143,24.4090909 C18.2857143,23.7312869 17.7100804,23.1818182 17,23.1818182 L16.4285714,23.1818182 L16.4285714,23.1818182 Z M11.8571429,23.1818182 C11.1470625,23.1818182 10.5714286,23.7312869 10.5714286,24.4090909 C10.5714286,25.0868949 11.1470625,25.6363636 11.8571429,25.6363636 L12.4285714,25.6363636 C13.1386518,25.6363636 13.7142857,25.0868949 13.7142857,24.4090909 C13.7142857,23.7312869 13.1386518,23.1818182 12.4285714,23.1818182 L11.8571429,23.1818182 L11.8571429,23.1818182 Z" id="形状"></path></g><rect id="矩形" fill="#EB6EA3" x="7" y="21" width="21" height="6"></rect><text id="http" font-family="Arial-BoldMT, Arial" font-size="8" font-weight="bold" fill="#FFFFFF"><tspan x="8" y="27">http</tspan></text></g></g></g></svg>'},7182:e=>{e.exports='<svg viewBox="0 0 20 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-267.000000, -301.000000)"><g id="全部流程" transform="translate(268.000000, 301.000000)"><path d="M8,0 L17,0 C17.5522847,-1.01453063e-16 18,0.44771525 18,1 L18,3 C18,3.55228475 17.5522847,4 17,4 L8,4 C7.44771525,4 7,3.55228475 7,3 L7,1 C7,0.44771525 7.44771525,1.01453063e-16 8,0 Z" id="矩形" fill="#9299B9"></path><path d="M1,14 L10,14 C10.5522847,14 11,14.4477153 11,15 L11,17 C11,17.5522847 10.5522847,18 10,18 L1,18 C0.44771525,18 6.76353751e-17,17.5522847 0,17 L0,15 C-6.76353751e-17,14.4477153 0.44771525,14 1,14 Z" id="矩形备份-64" fill="#9299B9"></path><path d="M8,2 L1,2 C0.44771525,2 -6.76353751e-17,2.44771525 0,3 L0,8 C6.76353751e-17,8.55228475 0.44771525,9 1,9 L17,9 C17.5522847,9 18,9.44771525 18,10 L18,15 C18,15.5522847 17.5522847,16 17,16 L10,16 C9.44771525,16 9,15.5522847 9,15" id="路径-110" stroke="#9299B9"></path><circle id="椭圆形" fill="#9299B9" cx="9" cy="9" r="2"></circle></g></g></g></svg>'},7611:e=>{e.exports='<svg viewBox="0 0 20 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-267.000000, -301.000000)"><g id="全部流程" transform="translate(268.000000, 301.000000)"><path d="M8,0 L17,0 C17.5522847,-1.01453063e-16 18,0.44771525 18,1 L18,3 C18,3.55228475 17.5522847,4 17,4 L8,4 C7.44771525,4 7,3.55228475 7,3 L7,1 C7,0.44771525 7.44771525,1.01453063e-16 8,0 Z" id="矩形" fill="#fff"></path><path d="M1,14 L10,14 C10.5522847,14 11,14.4477153 11,15 L11,17 C11,17.5522847 10.5522847,18 10,18 L1,18 C0.44771525,18 6.76353751e-17,17.5522847 0,17 L0,15 C-6.76353751e-17,14.4477153 0.44771525,14 1,14 Z" id="矩形备份-64" fill="#fff"></path><path d="M8,2 L1,2 C0.44771525,2 -6.76353751e-17,2.44771525 0,3 L0,8 C6.76353751e-17,8.55228475 0.44771525,9 1,9 L17,9 C17.5522847,9 18,9.44771525 18,10 L18,15 C18,15.5522847 17.5522847,16 17,16 L10,16 C9.44771525,16 9,15.5522847 9,15" id="路径-110" stroke="#9299B9"></path><circle id="椭圆形" fill="#fff" cx="9" cy="9" r="2"></circle></g></g></g></svg>'},6876:e=>{e.exports='<svg viewBox="0 0 18 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-267.000000, -380.000000)" fill="#9299B9"><g id="启动系统" transform="translate(267.000000, 380.557608)"><rect id="矩形" x="7.84453633" y="0" width="2" height="8" rx="1"></rect><path d="M11.3938891,0.764247787 C15.2024323,1.81249421 18,5.30073984 18,9.44239241 C18,14.4129552 13.9705627,18.4423924 9,18.4423924 C4.02943725,18.4423924 0,14.4129552 0,9.44239241 C0,5.37453041 2.69876891,1.93699966 6.40351672,0.822590176 L6.4,0.942392412 L6.4,6.94239241 C6.4,8.32310429 7.51928813,9.44239241 8.9,9.44239241 L8.9,9.44239241 L9.06437569,9.43707473 C10.3684641,9.35243108 11.4,8.26787581 11.4,6.94239241 L11.4,6.94239241 L11.4,0.942392412 C11.4,0.887163937 11.3982091,0.83235374 11.3946823,0.778016725 Z" id="形状结合"></path></g></g></g></svg>'},1528:e=>{e.exports='<svg viewBox="0 0 15 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-269.000000, -341.000000)" fill="#9299B9" fill-rule="nonzero"><g id="回收站" transform="translate(269.000000, 341.000000)"><path d="M13.3539018,2.30073677 L10.436208,2.30073677 L10.436208,1.16543871 C10.436208,0.522438044 9.90122892,0 9.24279308,0 L5.75925597,0 C5.10082013,0 4.56584102,0.522438044 4.56584102,1.16543871 L4.56584102,2.30073677 L1.64814721,2.30073677 C0.740740318,2.30073677 0,3.02210315 0,3.91024782 C0,4.59544541 0.440328967,5.18218352 1.05967018,5.41326189 L1.05967018,15.0261219 C1.05967018,16.6657736 2.42592454,18 4.10493593,18 L10.8950555,18 C12.5740669,18 13.9403213,16.6657736 13.9403213,15.0261219 L13.9403213,5.41326189 C14.5596625,5.18218352 15,4.59544541 15,3.91024782 C15.0020491,3.02210315 14.2633663,2.30073677 13.3539018,2.30073677 Z M5.22427685,14.5941058 C5.22427685,14.9055593 4.96707536,15.1567314 4.6481455,15.1567314 C4.32921564,15.1567314 4.07201414,14.9055593 4.07201414,14.5941058 L4.07201414,7.80040188 C4.07201414,7.48894843 4.32921564,7.23777629 4.6481455,7.23777629 C4.96707536,7.23777629 5.22427685,7.48894843 5.22427685,7.80040188 L5.22427685,14.5941058 Z M8.11933693,14.5941058 C8.11933693,14.9055593 7.86213543,15.1567314 7.54320557,15.1567314 C7.22427571,15.1567314 6.96707421,14.9055593 6.96707421,14.5941058 L6.96707421,7.80040188 C6.96707421,7.48894843 7.22427571,7.23777629 7.54320557,7.23777629 C7.86213543,7.23777629 8.11933693,7.48894843 8.11933693,7.80040188 L8.11933693,14.5941058 Z M11.0164546,14.5941058 C11.0164546,14.9055593 10.7592531,15.1567314 10.4403233,15.1567314 C10.1213934,15.1567314 9.8641919,14.9055593 9.8641919,14.5941058 L9.8641919,7.80040188 C9.8641919,7.48894843 10.1213934,7.23777629 10.4403233,7.23777629 C10.7592531,7.23777629 11.0164546,7.48894843 11.0164546,7.80040188 L11.0164546,14.5941058 Z" id="形状"></path></g></g></g></svg>'},206:e=>{e.exports='<svg viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-268.000000, -461.000000)" fill="#9299B9" fill-rule="nonzero"><g id="报警事件" transform="translate(268.000000, 461.000000)"><path d="M14.4,8.99999999 L14.4,15.75 C14.4,15.9975 14.1975,16.2 13.95,16.2 L4.04999999,16.2 C3.8025,16.2 3.6,15.9975 3.6,15.75 L3.6,8.99999999 C3.6,6.02099998 6.02099999,3.59999999 8.99999999,3.59999999 C11.979,3.59999999 14.4,6.02099998 14.4,8.99999999 Z M17.55,18 L0.450000003,18 C0.201471864,18 0,17.7985281 0,17.55 C0,17.3014719 0.201471864,17.1 0.450000003,17.1 L17.55,17.1 C17.7985281,17.1 18,17.3014719 18,17.55 C18,17.7985281 17.7985281,18 17.55,18 Z M8.99999999,2.69999998 C8.75147186,2.69999998 8.55,2.49852812 8.55,2.24999999 L8.55,0.449999993 C8.55,0.20147186 8.75147186,0 8.99999999,0 C9.24852813,0 9.44999999,0.20147186 9.44999999,0.449999993 L9.44999999,2.24999999 C9.44999999,2.49852812 9.24852813,2.69999998 8.99999999,2.69999998 L8.99999999,2.69999998 Z M2.25,9.44999999 L0.450000003,9.44999999 C0.20147187,9.44999999 1.05465006e-08,9.24852813 1.05465006e-08,8.99999999 C1.05465006e-08,8.75147186 0.20147187,8.55 0.450000003,8.55 L2.25,8.55 C2.49852813,8.55 2.69999999,8.75147186 2.69999999,8.99999999 C2.69999999,9.24852813 2.49852813,9.44999999 2.25,9.44999999 Z M17.55,9.44999999 L15.75,9.44999999 C15.5014719,9.44999999 15.3,9.24852813 15.3,8.99999999 C15.3,8.75147186 15.5014719,8.55 15.75,8.55 L17.55,8.55 C17.7985281,8.55 18,8.75147186 18,8.99999999 C18,9.24852813 17.7985281,9.44999999 17.55,9.44999999 L17.55,9.44999999 Z M13.959,4.49100109 C13.7768078,4.49140244 13.6123884,4.38179967 13.5426715,4.21347343 C13.4729547,4.04514718 13.511728,3.85138668 13.64085,3.72284999 L14.7303,2.63339999 C14.9060094,2.4576906 15.1908906,2.4576906 15.3666,2.63339999 C15.5423094,2.80910938 15.5423094,3.09399059 15.3666,3.26969998 L14.27715,4.35914998 C14.1928909,4.44371552 14.0783771,4.49117313 13.959,4.49100109 Z M4.041,4.49099999 C3.92580001,4.49099999 3.8106,4.44689998 3.7224,4.35914998 L2.6334,3.26969998 C2.4576906,3.09386632 2.45779134,2.80888437 2.633625,2.63317498 C2.80945866,2.45746559 3.09444061,2.45756633 3.27015,2.63339999 L4.35914999,3.72284999 C4.48780856,3.8515474 4.52628986,4.04506646 4.45665509,4.21319454 C4.38702033,4.38132261 4.22297816,4.49096113 4.041,4.49099999 Z" id="形状"></path></g></g></g></svg>'},3478:e=>{e.exports='<svg viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-268.000000, -501.000000)" fill="#9299B9"><path d="M277,501 C281.970563,501 286,505.029437 286,510 C286,514.970563 281.970563,519 277,519 C272.029437,519 268,514.970563 268,510 C268,505.029437 272.029437,501 277,501 Z M275.388889,505 C275.174361,505.000662 275.000601,505.192153 275,505.428571 L275,516.571429 C275,516.808122 275.174111,517 275.388889,517 C275.603666,517 275.777778,516.808122 275.777778,516.571429 L275.777778,513.571429 L282,509.714286 L275.777778,505.857143 L275.777778,505.428571 C275.777177,505.192153 275.603417,505.000662 275.388889,505 Z" id="指令事件"></path></g></g></svg>'},9829:e=>{e.exports='<svg viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-267.000000, -421.000000)" fill="#9299B9" fill-rule="nonzero"><g id="用户登陆" transform="translate(267.000000, 421.000000)"><path d="M1.38043478,16.608589 L7.67309949,16.6098052 C7.89864881,17.1041522 8.17631354,17.5697227 8.49907006,17.9994932 L1.38043478,18 C1.00223913,18 0.695652174,17.6885227 0.695652174,17.3042945 C0.695652174,16.9200663 1.00223913,16.608589 1.38043478,16.608589 Z M7.00649029,13.1851201 L1.52730435,13.1852761 C0.727770531,13.1852761 0.0761494901,12.5535146 0.00621484911,11.7587602 L0,11.6169129 L0,10.8441718 L7.48382424,10.8441168 C7.20641583,11.5765709 7.04041101,12.3637988 7.00649029,13.1851201 Z M16.4726957,0 C17.2722295,0 17.9238505,0.600536878 17.9937852,1.39180325 L18,1.53333497 L18.0010455,6.86559935 C16.9559356,6.3129402 15.7645134,6 14.5,6 C11.8488622,6 9.51900337,7.37555868 8.18520603,9.45189348 L0,9.45276074 L0,1.53333497 C0,0.721047853 0.607202496,0.0753839127 1.38783386,0.00615053397 L1.52730435,0 L16.4726957,0 Z" id="形状结合"></path><g id="yonghu" transform="translate(14.000000, 13.000000) scale(-1, 1) translate(-14.000000, -13.000000) translate(10.000000, 9.000000)"><path d="M3.87473904,0.00342529827 C2.88100209,0.0618553848 2.06263048,0.871529441 1.99582463,1.86484091 C1.92066806,3.03344264 2.83924843,4.0100598 3.99164927,4.0100598 C5.10229645,4.0100598 5.99582463,3.10856704 5.99582463,2.00674255 C6.00417537,0.854835131 5.03549061,-0.0633519435 3.87473904,0.00342529827 Z M4,4.66113791 C2.66388309,4.66113791 0,5.32891033 0,6.66445516 L0,7.66611379 C0,7.84975121 0.150313152,8 0.334029228,8 L7.66597077,8 C7.84968685,8 8,7.84975121 8,7.66611379 L8,6.65610801 C8,5.32891033 5.33611691,4.66113791 4,4.66113791 Z" id="形状"></path></g></g></g></g></svg>'},6309:e=>{e.exports='<svg viewBox="0 0 16 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-268.000000, -582.000000)" fill="#9299B9" fill-rule="nonzero"><path d="M278.680908,582.000001 C279.452041,581.999297 280.185195,582.339777 280.688919,582.932532 L280.688919,582.932532 L281.88518,584.27711 L283.284379,585.94699 C283.734644,586.431715 283.989926,587.069958 284,587.736146 L284,587.736146 L284,597.3 C284,598.791169 282.809281,600.000001 281.340454,600.000001 L281.340454,600.000001 L270.659546,600.000001 C269.190719,600.000001 268,598.791169 268,597.3 L268,597.3 L268,584.700002 C268,583.208833 269.190719,582.000001 270.659546,582.000001 L270.659546,582.000001 Z M280.25,594 L271.75,594 C271.335786,594 271,594.335786 271,594.75 C271,595.164214 271.335786,595.5 271.75,595.5 L271.75,595.5 L280.25,595.5 C280.664214,595.5 281,595.164214 281,594.75 C281,594.335786 280.664214,594 280.25,594 L280.25,594 Z M275.25,590 L271.75,590 C271.335786,590 271,590.335786 271,590.75 C271,591.164214 271.335786,591.5 271.75,591.5 L271.75,591.5 L275.25,591.5 C275.664214,591.5 276,591.164214 276,590.75 C276,590.335786 275.664214,590 275.25,590 L275.25,590 Z M278.456609,583.24699 L278.456609,586.500002 C278.456609,587.098865 278.934809,587.584339 279.5247,587.584339 L279.5247,587.584339 L282.461949,587.584339 L278.456609,583.24699 Z M275.25,586 L271.75,586 C271.335786,586 271,586.335786 271,586.75 C271,587.164214 271.335786,587.5 271.75,587.5 L271.75,587.5 L275.25,587.5 C275.664214,587.5 276,587.164214 276,586.75 C276,586.335786 275.664214,586 275.25,586 L275.25,586 Z" id="表事件"></path></g></g></svg>'},5079:e=>{e.exports='<svg viewBox="0 0 16 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-269.000000, -623.000000)" fill="#9299B9" fill-rule="nonzero"><g id="计划事件" transform="translate(269.000000, 623.000000)"><g id="编组-7"><path d="M3.08257142,0.516129032 L3.08257142,2.60371088 L10.3779879,2.60371088 L10.3779879,0.516129032 L11,0.516129032 C12.1045695,0.516129032 13,1.41155953 13,2.51612903 L13.0007074,10.3510118 C12.8363124,10.3322255 12.6692473,10.3225806 12.5,10.3225806 C10.0147186,10.3225806 8,12.4022902 8,14.9677419 C8,15.3225498 8.03853657,15.6680665 8.11152483,16.0000756 L2,16 C0.8954305,16 1.3527075e-16,15.1045695 0,14 L0,2.51612903 C-1.3527075e-16,1.41155953 0.8954305,0.516129032 2,0.516129032 L3.08257142,0.516129032 Z M2.5,12.3870968 C2.22385763,12.3870968 2,12.6181756 2,12.9032258 C2,13.188276 2.22385763,13.4193548 2.5,13.4193548 C2.77614237,13.4193548 3,13.188276 3,12.9032258 C3,12.6181756 2.77614237,12.3870968 2.5,12.3870968 Z M8,12.3870968 L4,12.3870968 L4,13.4193548 L8,13.4193548 L8,12.3870968 Z M2.5,9.29032258 C2.22385763,9.29032258 2,9.52140142 2,9.80645161 C2,10.0915018 2.22385763,10.3225806 2.5,10.3225806 C2.77614237,10.3225806 3,10.0915018 3,9.80645161 C3,9.52140142 2.77614237,9.29032258 2.5,9.29032258 Z M11,9.29032258 L4,9.29032258 L4,10.3225806 L11,10.3225806 L11,9.29032258 Z M2.5,6.19354839 C2.22385763,6.19354839 2,6.42462723 2,6.70967742 C2,6.99472761 2.22385763,7.22580645 2.5,7.22580645 C2.77614237,7.22580645 3,6.99472761 3,6.70967742 C3,6.42462723 2.77614237,6.19354839 2.5,6.19354839 Z M11,6.19354839 L4,6.19354839 L4,7.22580645 L11,7.22580645 L11,6.19354839 Z M8.5,0 C9.05228475,3.89074334e-16 9.5,0.44771525 9.5,1 L9.5,1.06451613 C9.5,1.61680088 9.05228475,2.06451613 8.5,2.06451613 L5,2.06451613 C4.44771525,2.06451613 4,1.61680088 4,1.06451613 L4,1 C4,0.44771525 4.44771525,1.01453063e-16 5,0 L8.5,0 Z" id="形状结合"></path></g><g id="编组-22" transform="translate(9.000000, 11.000000)"><path d="M3.5,0 C5.43299662,0 7,1.56700338 7,3.5 C7,5.43299662 5.43299662,7 3.5,7 C1.56700338,7 0,5.43299662 0,3.5 C0,1.56700338 1.56700338,0 3.5,0 Z M4.95489169,3.67949008 L3.42,3.679 L3.21492101,6.03096462 L4.95489169,3.67949008 Z M3.62595558,1.34677312 L2.11633998,3.67949008 L3.42,3.679 L3.62595558,1.34677312 Z" id="形状结合"></path></g></g></g></g></svg>'},9887:e=>{e.exports='<svg viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-267.000000, -661.000000)" fill="#9299B9"><g id="设备数据事件" transform="translate(267.000000, 661.000000)"><path d="M16,0 C17.1045695,-2.02906125e-16 18,0.8954305 18,2 L18,11 L0,11 L0,2 C-1.3527075e-16,0.8954305 0.8954305,2.02906125e-16 2,0 L16,0 Z M10.1154648,1.86945178 L6.70901107,7.21214313 L4.36990242,4.84039135 L1.70615258,8.60386183 L2.88397803,9.41661377 L4.55028533,7.21214313 L6.9698553,9.61307215 L10.2160202,4.56377635 L13.9787065,9.80272573 L16.6783573,5.12576724 L15.3960741,4.37895342 L13.8411632,7.01592987 L10.1154648,1.86945178 Z" id="形状结合"></path><path d="M18,12 L18,16 C18,17.1045695 17.1045695,18 16,18 L16,18 L2,18 C0.8954305,18 -1.3527075e-16,17.1045695 0,16 L0,16 L0,12 L18,12 Z M16,14 L2,14 L2,16 L16,16 L16,14 Z" id="形状结合"></path></g></g></g></svg>'},1641:e=>{e.exports='<svg viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-267.000000, -701.000000)" fill="#9299B9" fill-rule="nonzero"><path d="M271.131818,702.636361 C271.326246,703.588862 272.164223,704.272925 273.136364,704.272727 L278.863636,704.272727 C279.835777,704.272925 280.673754,703.588862 280.868182,702.636361 L282.544636,702.636361 C283.898649,702.635909 284.997292,703.731989 285,705.085999 L285,716.55036 C284.999349,717.200837 284.740268,717.824402 284.279775,718.283821 C283.819281,718.74324 283.195113,719.000865 282.544636,718.999998 L269.454545,718.999998 C268.100852,718.999998 267.002707,717.90405 267,716.55036 L267,705.085999 C267.000651,704.435522 267.259732,703.811958 267.720225,703.352538 C268.180719,702.893119 268.804887,702.635495 269.455364,702.636361 L271.131818,702.636361 Z M281,714 L271,714 L271,715 L271.005486,715.149262 C271.081835,716.184122 271.945638,717 273,717 L273,717 L279,717 L279.149262,716.994514 C280.184122,716.918165 281,716.054362 281,715 L281,715 L281,714 Z M279.888889,715 L279.888889,716 L272.111111,716 L272.111111,715 L279.888889,715 Z M279,707 L273,707 C271.895431,707 271,707.895431 271,709 L271,709 L271,713 L281,713 L281,709 C281,707.895431 280.104569,707 279,707 L279,707 Z M276.619703,708.019701 L278.689535,710.826871 L279.553374,709.38852 L280.265754,709.795873 L278.765948,712.346941 L276.675567,709.489333 L274.872142,712.243494 L273.527936,710.933896 L272.60221,712.136335 L271.947863,711.693016 L273.427724,709.640213 L274.727228,710.933896 L276.619703,708.019701 Z M278.863636,701 C279.54144,701 280.090909,701.549469 280.090909,702.227272 C280.090909,702.905076 279.54144,703.454545 278.863636,703.454545 L273.136364,703.454545 C272.45856,703.454545 271.909091,702.905076 271.909091,702.227272 C271.909091,701.549469 272.45856,701 273.136364,701 L278.863636,701 Z" id="设备表数据事件"></path></g></g></svg>'},2274:e=>{e.exports='<svg viewBox="0 0 15 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-269.000000, -542.000000)" fill="#9299B9" fill-rule="nonzero"><g id="驱动事件" transform="translate(269.000000, 542.000000)"><path d="M13.7083872,1.63928571 C13.7083872,0.733928571 12.9831784,0 12.0868133,0 L2.91142219,0 C2.01505705,0 1.28984825,0.733928571 1.28984825,1.63928571 L0,14.3589286 C0,15.2642857 0.725208799,16 1.62157393,16 L13.3784261,16 C14.2747912,16 15,15.2642857 15,14.3589286 L13.7083872,1.63928571 Z M13.7824962,13.9482143 C13.7824962,14.4017857 13.4190095,14.7678571 12.9725915,14.7678571 L2.02564404,14.7678571 C1.57746148,14.7678571 1.21397483,14.4 1.21397483,13.9482143 L1.21397483,12.0660714 C1.21397483,11.6125 1.57746148,11.2446429 2.02564404,11.2446429 L12.970827,11.2446429 C13.4190095,11.2446429 13.7807317,11.6125 13.7807317,12.0660714 L13.7824962,13.9482143 L13.7824962,13.9482143 Z M11.5874603,12.1357143 C11.1128103,12.1357143 10.7263851,12.525 10.7263851,13.0053571 C10.7263851,13.4875 11.1110458,13.8767857 11.5874603,13.8767857 C12.0621103,13.8767857 12.4485355,13.4875 12.4485355,13.0053571 C12.446771,12.5267857 12.0621103,12.1357143 11.5874603,12.1357143 Z" id="形状"></path></g></g></g></svg>'},3058:e=>{e.exports='<svg viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 33</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="-2.13221305%" id="linearGradient-mqtt"><stop stop-color="#E5689A" offset="0%"></stop><stop stop-color="#F477B3" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-47.000000, -1865.000000)"><g id="编组-33" transform="translate(47.000000, 1865.000000)"><g id="wangguan" fill="url(#linearGradient-mqtt)" fill-rule="nonzero"><path d="M25.1142857,13.9090909 L26.6137143,13.9090909 C27.2843091,13.9090133 27.8933805,14.2821831 28.1725714,14.8641818 L30,18.6739091 L30,28.3636364 C30,29.267375 29.2324881,30 28.2857143,30 L1.71428571,30 C0.767511857,30 0,29.267375 0,28.3636364 L0,18.7186364 L1.82942857,14.8693636 C2.10736035,14.2846225 2.71788459,13.9090837 3.39057143,13.9090909 L4.88571429,13.9090909 C4.86666298,13.8193221 4.85709128,13.7279559 4.85714286,13.6363636 L4.85714286,1.36363636 C4.85714286,0.610520796 5.49673607,0 6.28571429,0 C7.0746925,0 7.71428571,0.610520796 7.71428571,1.36363636 L7.71428571,13.6363636 C7.71428571,13.7296364 7.70457143,13.821 7.68571429,13.9090909 L22.3142857,13.9090909 C22.2952344,13.8193221 22.2856627,13.7279559 22.2857143,13.6363636 L22.2857143,1.36363636 C22.2857143,0.610520796 22.9253075,0 23.7142857,0 C24.5032639,0 25.1428571,0.610520796 25.1428571,1.36363636 L25.1428571,13.6363636 C25.1428571,13.7296364 25.1331429,13.821 25.1142857,13.9090909 L25.1142857,13.9090909 Z M4.46228571,16.6363636 C4.35409551,16.6364188 4.25521816,16.6948011 4.20685714,16.7871818 L3.34971429,18.4235455 C3.30546891,18.5080643 3.31020418,18.6084216 3.36223014,18.6888015 C3.4142561,18.7691815 3.50615997,18.8181314 3.60514286,18.8181818 L26.4448571,18.8181818 C26.5385399,18.8181482 26.6262537,18.7742778 26.6796056,18.7007713 C26.7329574,18.6272648 26.7451684,18.5334622 26.7122857,18.4497273 L26.0694286,16.8133636 C26.027634,16.7069347 25.921073,16.6364063 25.802,16.6363636 L4.46228571,16.6363636 L4.46228571,16.6363636 Z M21,23.1818182 C20.2899196,23.1818182 19.7142857,23.7312869 19.7142857,24.4090909 C19.7142857,25.0868949 20.2899196,25.6363636 21,25.6363636 L24.1428571,25.6363636 C24.8529375,25.6363636 25.4285714,25.0868949 25.4285714,24.4090909 C25.4285714,23.7312869 24.8529375,23.1818182 24.1428571,23.1818182 L21,23.1818182 L21,23.1818182 Z M16.4285714,23.1818182 C15.718491,23.1818182 15.1428571,23.7312869 15.1428571,24.4090909 C15.1428571,25.0868949 15.718491,25.6363636 16.4285714,25.6363636 L17,25.6363636 C17.7100804,25.6363636 18.2857143,25.0868949 18.2857143,24.4090909 C18.2857143,23.7312869 17.7100804,23.1818182 17,23.1818182 L16.4285714,23.1818182 L16.4285714,23.1818182 Z M11.8571429,23.1818182 C11.1470625,23.1818182 10.5714286,23.7312869 10.5714286,24.4090909 C10.5714286,25.0868949 11.1470625,25.6363636 11.8571429,25.6363636 L12.4285714,25.6363636 C13.1386518,25.6363636 13.7142857,25.0868949 13.7142857,24.4090909 C13.7142857,23.7312869 13.1386518,23.1818182 12.4285714,23.1818182 L11.8571429,23.1818182 L11.8571429,23.1818182 Z" id="形状"></path></g><rect id="矩形" fill="#EB6EA3" x="7" y="21" width="21" height="6"></rect><text id="http" font-family="Arial-BoldMT, Arial" font-size="8" font-weight="bold" fill="#FFFFFF"><tspan x="6" y="27">mqtt</tspan></text></g></g></g></svg>'},424:e=>{e.exports='<svg viewBox="0 0 32 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>新增资产表格</title><desc>Created with Sketch.</desc><defs></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-440.000000, -422.000000)"><g id="新增资产表格" transform="translate(425.000000, 414.000000)"><g id="操作日志表格" transform="translate(15.000000, 8.000000)"><rect id="Rectangle-18" fill="#4359C7" x="1" y="12" width="8" height="8" rx="2"></rect><rect id="Rectangle-18" fill="#4359C7" x="12" y="12" width="8" height="8" rx="2"></rect><rect id="Rectangle-18" fill="#4359C7" x="23" y="12" width="8" height="8" rx="2"></rect><rect id="Rectangle-18" fill="#4359C7" x="1" y="22" width="8" height="8" rx="2"></rect><rect id="Rectangle-18" fill="#4359C7" x="12" y="22" width="8" height="8" rx="2"></rect><rect id="Rectangle-17" fill="#575757" x="0" y="0" width="32" height="10" rx="3"></rect><path d="M24.3561154,25.8490745 L29.9713777,25.8490745" id="Path-10" stroke="#4359C7" stroke-width="2.5" stroke-linecap="round"></path><path d="M27.1637466,23.0414434 L27.1637466,28.6567056" id="Path-10" stroke="#4359C7" stroke-width="2.5" stroke-linecap="round"></path></g></g></g></g></svg>'},3526:e=>{e.exports='<svg viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 33</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="-2.13221305%" id="linearGradient-http"><stop stop-color="#E5689A" offset="0%"></stop><stop stop-color="#F477B3" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-47.000000, -1865.000000)"><g id="编组-33" transform="translate(47.000000, 1865.000000)"><g id="wangguan" fill="url(#linearGradient-http)" fill-rule="nonzero"><path d="M25.1142857,13.9090909 L26.6137143,13.9090909 C27.2843091,13.9090133 27.8933805,14.2821831 28.1725714,14.8641818 L30,18.6739091 L30,28.3636364 C30,29.267375 29.2324881,30 28.2857143,30 L1.71428571,30 C0.767511857,30 0,29.267375 0,28.3636364 L0,18.7186364 L1.82942857,14.8693636 C2.10736035,14.2846225 2.71788459,13.9090837 3.39057143,13.9090909 L4.88571429,13.9090909 C4.86666298,13.8193221 4.85709128,13.7279559 4.85714286,13.6363636 L4.85714286,1.36363636 C4.85714286,0.610520796 5.49673607,0 6.28571429,0 C7.0746925,0 7.71428571,0.610520796 7.71428571,1.36363636 L7.71428571,13.6363636 C7.71428571,13.7296364 7.70457143,13.821 7.68571429,13.9090909 L22.3142857,13.9090909 C22.2952344,13.8193221 22.2856627,13.7279559 22.2857143,13.6363636 L22.2857143,1.36363636 C22.2857143,0.610520796 22.9253075,0 23.7142857,0 C24.5032639,0 25.1428571,0.610520796 25.1428571,1.36363636 L25.1428571,13.6363636 C25.1428571,13.7296364 25.1331429,13.821 25.1142857,13.9090909 L25.1142857,13.9090909 Z M4.46228571,16.6363636 C4.35409551,16.6364188 4.25521816,16.6948011 4.20685714,16.7871818 L3.34971429,18.4235455 C3.30546891,18.5080643 3.31020418,18.6084216 3.36223014,18.6888015 C3.4142561,18.7691815 3.50615997,18.8181314 3.60514286,18.8181818 L26.4448571,18.8181818 C26.5385399,18.8181482 26.6262537,18.7742778 26.6796056,18.7007713 C26.7329574,18.6272648 26.7451684,18.5334622 26.7122857,18.4497273 L26.0694286,16.8133636 C26.027634,16.7069347 25.921073,16.6364063 25.802,16.6363636 L4.46228571,16.6363636 L4.46228571,16.6363636 Z M21,23.1818182 C20.2899196,23.1818182 19.7142857,23.7312869 19.7142857,24.4090909 C19.7142857,25.0868949 20.2899196,25.6363636 21,25.6363636 L24.1428571,25.6363636 C24.8529375,25.6363636 25.4285714,25.0868949 25.4285714,24.4090909 C25.4285714,23.7312869 24.8529375,23.1818182 24.1428571,23.1818182 L21,23.1818182 L21,23.1818182 Z M16.4285714,23.1818182 C15.718491,23.1818182 15.1428571,23.7312869 15.1428571,24.4090909 C15.1428571,25.0868949 15.718491,25.6363636 16.4285714,25.6363636 L17,25.6363636 C17.7100804,25.6363636 18.2857143,25.0868949 18.2857143,24.4090909 C18.2857143,23.7312869 17.7100804,23.1818182 17,23.1818182 L16.4285714,23.1818182 L16.4285714,23.1818182 Z M11.8571429,23.1818182 C11.1470625,23.1818182 10.5714286,23.7312869 10.5714286,24.4090909 C10.5714286,25.0868949 11.1470625,25.6363636 11.8571429,25.6363636 L12.4285714,25.6363636 C13.1386518,25.6363636 13.7142857,25.0868949 13.7142857,24.4090909 C13.7142857,23.7312869 13.1386518,23.1818182 12.4285714,23.1818182 L11.8571429,23.1818182 L11.8571429,23.1818182 Z" id="形状"></path></g><rect id="矩形" fill="#EB6EA3" x="7" y="21" width="21" height="6"></rect><text id="http" font-family="Arial-BoldMT, Arial" font-size="8" font-weight="bold" fill="#FFFFFF"><tspan x="3" y="27">opcda</tspan></text></g></g></g></svg>'},9147:e=>{e.exports='<svg viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 33</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="-2.13221305%" id="linearGradient-http"><stop stop-color="#E5689A" offset="0%"></stop><stop stop-color="#F477B3" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-47.000000, -1865.000000)"><g id="编组-33" transform="translate(47.000000, 1865.000000)"><g id="wangguan" fill="url(#linearGradient-http)" fill-rule="nonzero"><path d="M25.1142857,13.9090909 L26.6137143,13.9090909 C27.2843091,13.9090133 27.8933805,14.2821831 28.1725714,14.8641818 L30,18.6739091 L30,28.3636364 C30,29.267375 29.2324881,30 28.2857143,30 L1.71428571,30 C0.767511857,30 0,29.267375 0,28.3636364 L0,18.7186364 L1.82942857,14.8693636 C2.10736035,14.2846225 2.71788459,13.9090837 3.39057143,13.9090909 L4.88571429,13.9090909 C4.86666298,13.8193221 4.85709128,13.7279559 4.85714286,13.6363636 L4.85714286,1.36363636 C4.85714286,0.610520796 5.49673607,0 6.28571429,0 C7.0746925,0 7.71428571,0.610520796 7.71428571,1.36363636 L7.71428571,13.6363636 C7.71428571,13.7296364 7.70457143,13.821 7.68571429,13.9090909 L22.3142857,13.9090909 C22.2952344,13.8193221 22.2856627,13.7279559 22.2857143,13.6363636 L22.2857143,1.36363636 C22.2857143,0.610520796 22.9253075,0 23.7142857,0 C24.5032639,0 25.1428571,0.610520796 25.1428571,1.36363636 L25.1428571,13.6363636 C25.1428571,13.7296364 25.1331429,13.821 25.1142857,13.9090909 L25.1142857,13.9090909 Z M4.46228571,16.6363636 C4.35409551,16.6364188 4.25521816,16.6948011 4.20685714,16.7871818 L3.34971429,18.4235455 C3.30546891,18.5080643 3.31020418,18.6084216 3.36223014,18.6888015 C3.4142561,18.7691815 3.50615997,18.8181314 3.60514286,18.8181818 L26.4448571,18.8181818 C26.5385399,18.8181482 26.6262537,18.7742778 26.6796056,18.7007713 C26.7329574,18.6272648 26.7451684,18.5334622 26.7122857,18.4497273 L26.0694286,16.8133636 C26.027634,16.7069347 25.921073,16.6364063 25.802,16.6363636 L4.46228571,16.6363636 L4.46228571,16.6363636 Z M21,23.1818182 C20.2899196,23.1818182 19.7142857,23.7312869 19.7142857,24.4090909 C19.7142857,25.0868949 20.2899196,25.6363636 21,25.6363636 L24.1428571,25.6363636 C24.8529375,25.6363636 25.4285714,25.0868949 25.4285714,24.4090909 C25.4285714,23.7312869 24.8529375,23.1818182 24.1428571,23.1818182 L21,23.1818182 L21,23.1818182 Z M16.4285714,23.1818182 C15.718491,23.1818182 15.1428571,23.7312869 15.1428571,24.4090909 C15.1428571,25.0868949 15.718491,25.6363636 16.4285714,25.6363636 L17,25.6363636 C17.7100804,25.6363636 18.2857143,25.0868949 18.2857143,24.4090909 C18.2857143,23.7312869 17.7100804,23.1818182 17,23.1818182 L16.4285714,23.1818182 L16.4285714,23.1818182 Z M11.8571429,23.1818182 C11.1470625,23.1818182 10.5714286,23.7312869 10.5714286,24.4090909 C10.5714286,25.0868949 11.1470625,25.6363636 11.8571429,25.6363636 L12.4285714,25.6363636 C13.1386518,25.6363636 13.7142857,25.0868949 13.7142857,24.4090909 C13.7142857,23.7312869 13.1386518,23.1818182 12.4285714,23.1818182 L11.8571429,23.1818182 L11.8571429,23.1818182 Z" id="形状"></path></g><rect id="矩形" fill="#EB6EA3" x="7" y="21" width="21" height="6"></rect><text id="http" font-family="Arial-BoldMT, Arial" font-size="8" font-weight="bold" fill="#FFFFFF"><tspan x="3" y="27">opcua</tspan></text></g></g></g></svg>'},8327:e=>{e.exports='<svg viewBox="0 0 14 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 17备份</title><desc>Created with Sketch.</desc><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="计划事件" transform="translate(-372.000000, -114.000000)"><g id="编组-17备份" transform="translate(372.000000, 114.000000)"><path d="M2,0.516129032 L3.3196923,0.516129032 L3.3196923,2.60371088 L11.1762946,2.60371088 L11.1762946,0.516129032 L12,0.516129032 C13.1045695,0.516129032 14,1.41155953 14,2.51612903 L14,14 C14,15.1045695 13.1045695,16 12,16 L2,16 C0.8954305,16 1.11632554e-15,15.1045695 0,14 L0,2.51612903 C-3.57315355e-16,1.41155953 0.8954305,0.516129032 2,0.516129032 Z M5.30769231,0 L9.23076923,0 C9.78305398,3.89074334e-16 10.2307692,0.44771525 10.2307692,1 L10.2307692,1.06451613 C10.2307692,1.61680088 9.78305398,2.06451613 9.23076923,2.06451613 L5.30769231,2.06451613 C4.75540756,2.06451613 4.30769231,1.61680088 4.30769231,1.06451613 L4.30769231,1 C4.30769231,0.44771525 4.75540756,1.01453063e-16 5.30769231,0 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path><path d="M3.54204067,8.52124488 L5.86125239,10.8891096 C6.24770212,11.2836664 6.88083299,11.2902384 7.27538977,10.9037887 C7.28087407,10.8984171 7.28629634,10.8929825 7.2916555,10.887486 L11.6308454,6.43710198" id="路径-41" stroke="#7682F2" stroke-width="1.5" stroke-linecap="round"></path></g></g></g></svg>'},9816:e=>{e.exports='<svg viewBox="0 0 14 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 16</title><desc>Created with Sketch.</desc><g id="页面1" stroke="none" stroke-width="2" fill="none" fill-rule="evenodd"><g id="编组-14" transform="translate(0.000000,0.000000)"><circle id="椭圆形" fill="#fff" fill-rule="nonzero" cx="7" cy="7" r="7"></circle><polyline id="路径" stroke="#84C940" points="8.63338441 9.82511952 4.63338441 6.82511952 8.63338441 3.82511952 8.63338441 3.82511952"></polyline></g></g></svg>'},2694:e=>{e.exports='<svg viewBox="0 0 14 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 20备份 7</title><desc>Created with Sketch.</desc><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="新增变量" transform="translate(-918.000000, -115.000000)"><g id="编组-20备份-7" transform="translate(918.000000, 115.000000)"><circle id="椭圆形" fill="#FFFFFF" fill-rule="nonzero" cx="7" cy="7" r="7"></circle><path d="M3.73333333,7.23333333 L10.2362062,7.23333333" id="路径-44" stroke="#55B0C0" stroke-linecap="round"></path></g></g></g></svg>'},898:e=>{e.exports='<svg viewBox="0 0 20 15" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><desc>Created with Sketch.</desc><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="画板" transform="translate(-1073.000000, -25.000000)" fill="#C9D0EB" fill-rule="nonzero"><g id="weibiaoti545" transform="translate(1083.000000, 32.500000) scale(-1, 1) translate(-1083.000000, -32.500000) translate(1073.000000, 25.000000)"><path d="M7.97942215,3.63011208 L7.97942215,0 L0,6.43598313 L7.97942215,12.873346 L7.97942215,8.98064886 C10.196332,8.98064886 17.0445389,8.98064886 20,15 L20,14.3311637 C20,11.6559063 17.0441202,3.06057195 7.97942215,3.63011208 Z" id="路径"></path></g></g></g></svg>'},6703:e=>{e.exports='<svg viewBox="0 0 14 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>更新变量</title><desc>Created with Sketch.</desc><g id="页面1" stroke="#71CFDF" stroke-width="1" fill="none" fill-rule="evenodd"><g id="编组-20备份-2" transform="translate(0.000000, 1.000000)" fill="#71CFDF" fill-rule="evenodd"><path d="M13.410676,0.7375 L12.0740323,2.059375 L12.0345333,1.94375 C10.6568107,0.6609375 9.04525449,0 7.07978783,0 C5.11432118,0 3.42218711,0.6609375 2.04604446,2.021875 C0.66832186,3.3828125 0,5.0546875 0,6.9984375 C0,8.9421875 0.66832186,10.575 2.04446451,11.9375 C3.42060715,13.2984375 5.11116127,14 7.07820788,14 C9.04525449,14 10.6963097,13.2984375 12.0708724,11.9375 C12.8166121,11.2375 13.3300982,10.459375 13.6824286,9.565625 L10.3818982,8.3203125 C10.2239025,8.709375 9.91107099,9.0984375 9.59507956,9.4484375 C8.88725877,10.15 8.0609412,10.5 7.07978783,10.5 C6.09863447,10.5 5.27073694,10.15 4.56291615,9.45 C3.89459429,8.7890625 3.5406839,7.9734375 3.5406839,7 C3.5406839,6.0265625 3.89459429,5.2109375 4.56291615,4.5109375 C5.27073694,3.85 6.09705451,3.5 7.07978783,3.5 C8.02302223,3.5 8.8493398,3.8109375 9.51766166,4.4328125 L9.75307527,4.2375 L9.51766166,4.4328125 L9.59507956,4.509375 L8.25843584,5.83125 C8.14151902,5.9078125 8.14151902,5.9875 8.10044013,6.0640625 C8.0609412,6.18125 8.0609412,6.2203125 8.10044013,6.259375 C8.13993906,6.3359375 8.17785803,6.375 8.25843584,6.375 L13.5275928,6.4140625 C13.5670918,6.4140625 13.6460896,6.375 13.7250875,6.375 C13.8025054,6.2984375 13.8435842,6.21875 13.9225821,6.1421875 C13.962081,6.065625 14,5.9859375 14,5.946875 L13.9225821,0.7359375 L13.9225821,0.696875 C13.9225821,0.6203125 13.8830832,0.6203125 13.8451642,0.58125 C13.8451642,0.58125 13.8056653,0.58125 13.8056653,0.5421875 C13.7661663,0.5421875 13.7282474,0.58125 13.6476696,0.58125 C13.5670918,0.621875 13.448595,0.6609375 13.410676,0.7375 Z" id="路径"></path></g></g></svg>'},5318:e=>{e.exports='<svg viewBox="0 0 30 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>webhook</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="-3.89176883%" id="linearGradient-webhook"><stop stop-color="#50A6C5" offset="0%"></stop><stop stop-color="#63C0E2" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-145.000000, -1661.000000)" fill="url(#linearGradient-webhook)" fill-rule="nonzero"><g id="webhook" transform="translate(145.000000, 1661.000000)"><path d="M12.6723233,24.9770784 C10.4403852,28.1614267 6.08351977,28.9613596 2.93434685,26.7461607 C-0.199538841,24.5309619 -0.933326708,20.1159476 1.26803689,16.9008326 C2.51611625,15.0774237 4.54262753,13.9495717 6.74087141,13.8549342 L6.81730763,16.0547497 C5.42616812,16.162433 4.08089039,16.8854493 3.2095173,18.146882 C1.68079257,20.3620808 2.15469724,23.3464459 4.2490501,24.8386284 C6.35869022,26.3154277 9.30912894,25.7462446 10.8378536,23.5464291 C11.3117583,22.8541795 11.5869288,22.1003965 11.6939395,21.3312303 L11.6939395,19.7775144 L20.2242235,19.7159811 L20.3312342,19.5467645 C21.1414583,18.1314986 22.8994917,17.6392322 24.2753439,18.4391651 C24.9403691,18.8307454 25.4235278,19.4721783 25.6184879,20.2222991 C25.8134481,20.9724199 25.7042324,21.7697552 25.3148768,22.4388297 C24.5046527,23.8387123 22.731332,24.3309787 21.3554797,23.5310458 C20.7287026,23.1772293 20.2853724,22.6080463 20.0866382,21.9619466 L13.8647286,21.9927132 C13.6825144,23.0614625 13.2760149,24.0788541 12.6723233,24.9770784 L12.6723233,24.9770784 Z M23.8014393,13.9933842 C27.6691129,14.4702673 30.4208174,17.9622821 29.9469127,21.79273 C29.473008,25.6385614 25.9569412,28.3614099 22.0892676,27.8845268 C19.9125967,27.6294076 17.9761905,26.373911 16.8457418,24.4848119 L18.7413605,23.3772125 C19.5352993,24.6142875 20.8350635,25.4317456 22.2880018,25.6077947 C24.9632701,25.9308445 27.3327934,24.1002288 27.6538256,21.5312135 C27.9748578,18.9621982 26.0792391,16.6085494 23.4345454,16.2854996 C22.609034,16.1931997 21.8140972,16.3008829 21.0955965,16.5623995 L19.7961805,17.2392658 L15.8520707,9.90141964 L15.5157513,9.90141964 C13.9135771,9.85447614 12.6499297,8.5141524 12.6876106,6.90167123 C12.7334723,5.30180542 14.1093246,4.05575608 15.7144855,4.11728939 C17.3196465,4.20958934 18.588488,5.517172 18.5426262,7.1170378 C18.5120518,7.7939041 18.2521685,8.40923712 17.8394129,8.88612018 L20.7439898,14.2856673 C21.6917992,13.9780008 22.731332,13.8703175 23.8014393,13.9933842 L23.8014393,13.9933842 Z M9.29384168,9.80911969 C7.76511695,6.19403826 9.38556517,2.05592379 12.9169193,0.548357933 C16.4635606,-0.959207925 20.5605429,0.748341172 22.0892676,4.36342257 C22.9912152,6.47093811 22.8077682,8.77843689 21.7835227,10.624436 L19.887904,9.51683654 C20.5299684,8.27078719 20.6369791,6.747838 20.0254892,5.31718876 C18.9859564,2.85585671 16.2189647,1.67134068 13.8494414,2.67125681 C11.4646308,3.68655627 10.3945235,6.51708812 11.4340563,8.97842013 C11.8620992,9.99371959 12.5805998,10.7782692 13.4519729,11.3013022 L14.0481756,11.6243521 L9.35499068,19.3006314 C9.40085242,19.377548 9.46200143,19.4698479 9.50786313,19.5929145 C10.2569383,20.9927971 9.73717184,22.7618795 8.33074511,23.5156624 C6.9396056,24.2694454 5.18157219,23.7156457 4.41720981,22.2696131 C3.66813468,20.8389639 4.1879011,19.0698814 5.59432787,18.3160985 C6.19053051,17.9930487 6.84788215,17.9161321 7.47465928,18.054582 L11.0060134,12.2550684 C10.2875128,11.5935854 9.67602287,10.7628858 9.29384168,9.80911969 Z" id="形状"></path></g></g></g></svg>'},9527:e=>{e.exports='<svg viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>kefu</title><desc>Created with Sketch.</desc><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-460.000000, -1253.000000)" fill="#4F71FF" fill-rule="nonzero"><g id="kefu" transform="translate(460.000000, 1253.000000)"><path d="M9.92260758,9.96417931 C11.9277486,9.40039489 13.3754144,7.80437653 13.3754144,5.92123188 C13.3754144,3.56589908 11.1165337,1.65789258 8.33004247,1.65789258 C5.54355128,1.65789258 3.28467053,3.56664681 3.28467053,5.92123188 C3.28467053,7.71408877 4.59606461,9.24580281 6.45121825,9.87576088 C2.95770688,10.4447794 0.279171191,12.9386282 0.0112733728,16 L15.9280757,16 C15.6710177,13.0677976 13.2002079,10.6623672 9.92260758,9.96417931 Z" id="路径"></path><path d="M2.23343155,7.90812333 L2.23343155,5.2372507 C2.54490976,2.63890738 5.13296635,0.609021766 8.29000159,0.609021766 C11.348815,0.609021766 13.8711692,2.51571975 14.3089642,4.99667028 C14.304761,4.99667028 14.3010003,4.99517483 14.2967971,4.99498791 L14.2967971,7.90812333 C15.1994244,7.85156469 15.8976888,7.21636985 15.8979898,6.45155563 C15.8979898,5.92291427 15.5615137,5.46549369 15.0639891,5.20921103 C14.7341496,2.2876637 11.83373,0 8.29000159,0 C4.75733423,0 1.86487848,2.27345694 1.52065965,5.18173216 C0.853457473,5.49434266 0.508853517,6.14040244 0.673566638,6.769853 C0.83827976,7.39930356 1.47311478,7.86236069 2.23409519,7.90812333 L2.23343155,7.90812333 Z" id="路径"></path></g></g></g></svg>'},8114:e=>{e.exports='<svg viewBox="0 0 16 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-32.000000, -621.000000)" fill="#9299B9" fill-rule="nonzero"><g id="任务管理" transform="translate(32.000000, 621.000000)"><path d="M15.2843792,3.94698964 L13.8851802,2.27711033 L12.6889186,0.932532187 C12.1851947,0.339777084 11.4520408,-0.000703182388 10.6809079,1.09041752e-06 L2.65954606,1.09041752e-06 C1.19071933,1.09041752e-06 0,1.20883321 0,2.70000184 L0,15.3000003 C0,16.7911689 1.19071933,18.0000011 2.65954606,18.0000011 L13.3404539,18.0000011 C14.8092807,18.0000011 16,16.7911689 16,15.3000003 L16,5.73614604 C15.989926,5.06995807 15.7346436,4.43171479 15.2843792,3.94698964 L15.2843792,3.94698964 Z M10.8838451,9.5638564 L8.01068091,13.1638559 C7.84736907,13.3726586 7.60038114,13.4960409 7.33778371,13.5000005 C7.07731225,13.5043452 6.82784153,13.3935416 6.65420561,13.1963861 L5.09479306,11.3963863 C4.83184164,11.0228611 4.88798418,10.5082732 5.22507879,10.2022209 C5.56217341,9.89616867 6.07215079,9.89676955 6.40854473,10.2036154 L7.27369826,11.2012056 L9.50600801,8.4361457 C9.66907852,8.11516808 10.0053528,7.92424009 10.3601043,7.95121144 C10.7148559,7.97818279 11.0193677,8.21782901 11.1335278,8.55988415 C11.2476879,8.90193929 11.149383,9.2801456 10.8838451,9.52048291 L10.8838451,9.5638564 Z M11.5246996,5.58433883 C10.9348093,5.58433883 10.4566088,5.09886452 10.4566088,4.50000162 L10.4566088,1.24698998 L14.4619493,5.58433883 L11.5246996,5.58433883 Z" id="形状"></path></g></g></g></svg>'},4878:e=>{e.exports='<svg viewBox="0 0 16 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-32.000000, -621.000000)" fill="#9299B9" fill-rule="nonzero"><g id="任务管理" transform="translate(32.000000, 621.000000)"><path d="M15.2843792,3.94698964 L13.8851802,2.27711033 L12.6889186,0.932532187 C12.1851947,0.339777084 11.4520408,-0.000703182388 10.6809079,1.09041752e-06 L2.65954606,1.09041752e-06 C1.19071933,1.09041752e-06 0,1.20883321 0,2.70000184 L0,15.3000003 C0,16.7911689 1.19071933,18.0000011 2.65954606,18.0000011 L13.3404539,18.0000011 C14.8092807,18.0000011 16,16.7911689 16,15.3000003 L16,5.73614604 C15.989926,5.06995807 15.7346436,4.43171479 15.2843792,3.94698964 L15.2843792,3.94698964 Z M10.8838451,9.5638564 L8.01068091,13.1638559 C7.84736907,13.3726586 7.60038114,13.4960409 7.33778371,13.5000005 C7.07731225,13.5043452 6.82784153,13.3935416 6.65420561,13.1963861 L5.09479306,11.3963863 C4.83184164,11.0228611 4.88798418,10.5082732 5.22507879,10.2022209 C5.56217341,9.89616867 6.07215079,9.89676955 6.40854473,10.2036154 L7.27369826,11.2012056 L9.50600801,8.4361457 C9.66907852,8.11516808 10.0053528,7.92424009 10.3601043,7.95121144 C10.7148559,7.97818279 11.0193677,8.21782901 11.1335278,8.55988415 C11.2476879,8.90193929 11.149383,9.2801456 10.8838451,9.52048291 L10.8838451,9.5638564 Z M11.5246996,5.58433883 C10.9348093,5.58433883 10.4566088,5.09886452 10.4566088,4.50000162 L10.4566088,1.24698998 L14.4619493,5.58433883 L11.5246996,5.58433883 Z" id="形状"></path></g></g></g></svg>'},2604:e=>{e.exports='<svg viewBox="0 0 31 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>guanbi</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="4.45633742%" id="linearGradient-关闭系统"><stop stop-color="#5480F8" offset="0%"></stop><stop stop-color="#93AEF7" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-147.000000, -155.000000)" fill="url(#linearGradient-关闭系统)" fill-rule="nonzero"><g id="guanbi" transform="translate(147.000000, 155.000000)"><path d="M25.815947,3.86816698 C19.9105557,-1.32913377 10.8668042,-1.28903208 5.00987453,3.98816589 C-1.66995818,10.0067859 -1.66995818,19.9933298 5.00987453,26.0119498 C10.8668042,31.2891478 19.9105557,31.3289433 25.815947,26.1319487 C32.7280177,20.0484313 32.7280177,9.95137822 25.815947,3.86816698 L25.815947,3.86816698 Z M21.9767818,21.3231139 C21.6079702,21.6818862 21.0103821,21.6818862 20.6415705,21.3231139 L15.5458654,16.3661171 C15.5250962,16.3459132 15.4914248,16.3459132 15.4703409,16.3661171 L10.3762092,21.3218894 C10.0073976,21.6806617 9.40980955,21.6806617 9.04099795,21.3218894 L9.0397392,21.3206649 C8.67092759,20.9618926 8.67092759,20.3805712 9.0397392,20.0217989 L14.1341855,15.0660266 C14.1549548,15.0458227 14.1549548,15.0130679 14.1341855,14.9925579 L9.03848046,10.0361734 C8.66966885,9.67740104 8.66966885,9.09607969 9.03848046,8.73730736 L9.0397392,8.73608288 C9.40855081,8.37731055 10.0061389,8.37731055 10.3749505,8.73608288 L15.4706555,13.6930797 C15.4914248,13.7132836 15.5250962,13.7132836 15.5461801,13.6930797 L20.6431439,8.7348584 C21.0119555,8.37608607 21.6095436,8.37608607 21.9783552,8.7348584 L21.9796139,8.73608288 C22.3484255,9.09485521 22.3484255,9.67617657 21.9796139,10.0349489 L16.8823355,14.992864 C16.8615662,15.0130679 16.8615662,15.0458227 16.8823355,15.0663328 L21.9777258,20.0233295 C22.3465374,20.3821018 22.3465374,20.9634232 21.9777258,21.3221955 L21.9767818,21.3231139 Z" id="形状"></path></g></g></g></svg>'},4397:e=>{e.exports='<svg viewBox="0 0 28 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>写入数据点值</title><defs><linearGradient x1="50%" y1="99.1868821%" x2="50%" y2="0%" id="linearGradient-1"><stop stop-color="#71B032" offset="0%"></stop><stop stop-color="#84C940" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-247.000000, -1141.000000)" fill="url(#linearGradient-1)" fill-rule="nonzero"><path d="M269.217,1142.17665 L268.534534,1142.86446 L266.768432,1144.64144 L265.17676,1146.24292 C264.697078,1146.72555 264.297343,1147.13141 263.977555,1147.46048 C263.657767,1147.78955 263.454266,1147.99796 263.367051,1148.08571 C263.163549,1148.29047 263.007289,1148.47694 262.898271,1148.64513 C262.789252,1148.81332 262.691135,1148.9998 262.60392,1149.20455 C262.531241,1149.33618 262.436759,1149.5775 262.320472,1149.92851 C262.204185,1150.27951 262.084265,1150.66343 261.960711,1151.08025 C261.837156,1151.49707 261.72087,1151.89927 261.611851,1152.28684 C261.502832,1152.67441 261.433787,1152.97058 261.404716,1153.17533 C261.346572,1153.55559 261.382912,1153.82616 261.513734,1153.98704 C261.644557,1154.14792 261.906201,1154.20642 262.298668,1154.16254 C262.487634,1154.13329 262.774716,1154.06748 263.159916,1153.9651 C263.545115,1153.86272 263.952118,1153.74207 264.380924,1153.60312 C264.809731,1153.46418 265.220368,1153.32159 265.612835,1153.17533 C266.005302,1153.02908 266.303286,1152.90476 266.506787,1152.80239 C266.710289,1152.71463 266.906522,1152.59763 267.095488,1152.45138 C267.284454,1152.30512 267.451616,1152.16618 267.596974,1152.03456 C267.640581,1152.00165 267.753688,1151.8947 267.936294,1151.71371 L268.142067,1151.50804 C268.447319,1151.20091 268.832518,1150.80968 269.297664,1150.33436 C269.669781,1149.9541 270.07911,1149.54342 270.52565,1149.10232 L270.867533,1148.76579 L272.161,1147.44765 L272.16129,1158.17665 C272.16129,1159.28122 271.26586,1160.17665 270.16129,1160.17665 L249,1160.17665 C247.895431,1160.17665 247,1159.28122 247,1158.17665 L247,1144.17665 C247,1143.07208 247.895431,1142.17665 249,1142.17665 L269.217,1142.17665 Z M257.074837,1148 C256.49495,1148 255.979824,1148.37617 255.795133,1148.93462 C255.625833,1149.44653 255.768868,1150.00671 256.149946,1150.37049 L256.259722,1150.46465 L254.8691,1153.28427 C254.661031,1153.24154 254.446749,1153.24916 254.243362,1153.30555 L254.093132,1153.35695 L253.014336,1151.90006 C253.354488,1151.45395 253.323225,1150.8224 252.940736,1150.41321 C252.558247,1150.00403 251.939041,1149.93971 251.482959,1150.26179 C251.026877,1150.58388 250.870461,1151.19594 251.114714,1151.70275 C251.340178,1152.17057 251.844733,1152.41943 252.337971,1152.32244 L252.460877,1152.29091 L253.551822,1153.76426 C253.084372,1154.34932 253.169119,1155.20794 253.741604,1155.68706 C254.31409,1156.16617 255.159837,1156.08629 255.635568,1155.50816 C256.079583,1154.96858 256.046016,1154.18364 255.57971,1153.68504 L255.47318,1153.58278 L256.881576,1150.72888 C256.983296,1150.74377 257.086186,1150.74684 257.188269,1150.73815 L257.340542,1150.7163 L257.939898,1151.9748 C257.478478,1152.39186 257.390405,1153.09071 257.733515,1153.61242 C258.076626,1154.13412 258.745852,1154.31892 259.301709,1154.04546 C259.857566,1153.772 260.129836,1153.12401 259.939718,1152.52703 C259.762275,1151.96986 259.232755,1151.61637 258.668464,1151.66046 L258.547128,1151.67606 L257.947773,1150.41734 C258.379571,1150.04531 258.536976,1149.43906 258.341975,1148.89907 C258.146974,1148.35907 257.641007,1148 257.074837,1148 Z M254.600019,1154.00517 C254.938863,1154.00517 255.213549,1154.28423 255.213549,1154.62848 C255.213549,1154.97272 254.938863,1155.25178 254.600019,1155.25178 C254.261176,1155.25178 253.98649,1154.97272 253.98649,1154.62848 C253.98649,1154.28423 254.261176,1154.00517 254.600019,1154.00517 Z M258.762213,1152.3428 C259.07285,1152.3428 259.324671,1152.59863 259.324671,1152.91422 C259.324671,1153.2298 259.07285,1153.48564 258.762213,1153.48564 C258.451575,1153.48564 258.199754,1153.2298 258.199754,1152.91422 C258.199754,1152.59863 258.451575,1152.3428 258.762213,1152.3428 Z M270.562259,1142.70736 L272.901804,1145.07027 L270.211953,1147.77253 L269.211078,1148.79059 C268.877453,1149.11738 268.577191,1149.41693 268.310291,1149.68925 C268.043391,1149.96157 267.034175,1151.00069 266.859022,1151.17665 C266.683869,1151.35261 266.579611,1151.45316 266.546249,1151.47829 C266.462842,1151.55371 266.366925,1151.63331 266.258497,1151.7171 C266.150069,1151.80089 266.037471,1151.86792 265.920702,1151.9182 C265.803933,1151.97685 265.63295,1152.04807 265.407753,1152.13187 C265.182557,1152.21566 264.946934,1152.29735 264.700886,1152.37695 C264.454837,1152.45656 264.2213,1152.52568 264.000273,1152.58434 C263.779247,1152.64299 263.614519,1152.6807 263.506091,1152.69745 C263.280894,1152.72259 263.130763,1152.68908 263.055697,1152.59691 C262.980632,1152.50474 262.95978,1152.34972 262.993143,1152.13187 C263.009824,1152.01456 263.049442,1151.84488 263.111997,1151.62283 C263.174551,1151.40079 263.241276,1151.17036 263.312172,1150.93156 C263.383067,1150.69275 263.451877,1150.4728 263.518602,1150.2717 C263.585327,1150.07061 263.639541,1149.93235 263.681244,1149.85694 C263.731288,1149.73963 263.787587,1149.6328 263.850142,1149.53644 C263.912697,1149.44008 264.002358,1149.33324 264.119127,1149.21594 C264.169171,1149.16566 264.28594,1149.04626 264.469433,1148.85773 C264.652927,1148.6692 264.882294,1148.43668 265.157535,1148.16017 L266.859022,1146.42769 L267.872408,1145.40963 L270.562259,1142.70736 Z M252.125202,1150.68042 C252.407605,1150.68046 252.636516,1150.91305 252.636516,1151.19995 C252.636516,1151.48686 252.407605,1151.71945 252.125202,1151.71949 C251.942483,1151.71952 251.773633,1151.6205 251.682266,1151.45974 C251.590899,1151.29899 251.590899,1151.10092 251.682266,1150.94017 C251.773633,1150.77941 251.942483,1150.68039 252.125202,1150.68042 Z M257.074837,1148.7481 C257.41368,1148.7481 257.688367,1149.02717 257.688367,1149.37141 C257.688367,1149.71565 257.41368,1149.99471 257.074837,1149.99471 C256.735994,1149.99471 256.461307,1149.71565 256.461307,1149.37141 C256.461307,1149.02717 256.735994,1148.7481 257.074837,1148.7481 Z M272.743662,1141.00063 C272.864601,1141.00482 272.98137,1141.02367 273.093968,1141.05719 C273.206566,1141.0907 273.304569,1141.12841 273.387975,1141.17031 C273.563128,1141.26248 273.757048,1141.42377 273.969734,1141.6542 C274.182419,1141.88462 274.347147,1142.12552 274.463916,1142.3769 C274.497278,1142.45231 274.524385,1142.54029 274.545237,1142.64084 C274.566088,1142.74139 274.576514,1142.84613 274.576514,1142.95505 C274.576514,1143.06398 274.555662,1143.17291 274.513959,1143.28184 C274.472256,1143.39077 274.405531,1143.49551 274.313784,1143.59606 C274.213697,1143.69661 274.124035,1143.78459 274.044799,1143.86 C273.965563,1143.93541 273.896753,1144.00244 273.838369,1144.0611 C273.771644,1144.12813 273.709089,1144.18678 273.650705,1144.23706 L271.31116,1141.88672 C271.411247,1141.79455 271.530101,1141.68353 271.667721,1141.55365 C271.805342,1141.42377 271.920025,1141.32113 272.011772,1141.24572 C272.128541,1141.15355 272.24948,1141.08861 272.374589,1141.0509 C272.499699,1141.0132 272.622723,1140.99644 272.743662,1141.00063 Z" id="写入数据点值"></path></g></g></svg>'},2212:e=>{e.exports='<svg viewBox="0 0 20 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>code-branch-full</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="-3.89176883%" id="linearGradient-branch"><stop stop-color="#50A6C5" offset="0%"></stop><stop stop-color="#63C0E2" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-252.000000, -1739.000000)" fill="url(#linearGradient-branch)" fill-rule="nonzero"><g id="code-branch-full" transform="translate(252.000000, 1739.000000)"><path d="M18.9519345,10.21019 C18.7296849,10.4181954 18.6286623,10.7023718 18.6724388,10.9836185 C18.7229501,11.3029507 18.7532568,11.622283 18.7633591,11.9298966 C18.8105029,13.4386682 18.3895757,14.7452937 17.514047,15.8175469 C15.9953416,17.669088 13.5606984,18.2638077 11.7860691,18.6973964 C10.5805335,18.9903618 9.7117397,19.0665328 9.01131674,19.1251259 C8.24354546,19.1925079 7.8562924,19.2247341 7.30740329,19.5001215 C7.19964591,19.5557849 7.09188854,19.614378 6.98749859,19.6788304 C5.99411028,20.299917 5.42501667,21.3106474 5.42501667,22.3741117 L5.42501667,23.2119926 C5.42501667,23.5254655 5.61022464,23.8155013 5.90992484,23.9912805 C6.93025246,24.5889298 7.60036864,25.6084492 7.58016413,26.7627328 C7.55322478,28.5293139 5.89645518,29.9736331 3.86253475,29.9970703 C1.75116369,30.0263669 0.0337805765,28.5468918 0.0337805765,26.718788 C0.0337805765,25.5791527 0.700529331,24.5742815 1.7141221,23.9883508 C2.01045488,23.8155013 2.18892804,23.5225359 2.18892804,23.2119926 L2.18892804,6.7854249 C2.18892804,6.47195197 2.00372006,6.18191625 1.70401987,6.00613705 C0.683692248,5.40848771 0.0135760709,4.38896827 0.0337805765,3.23468473 C0.0607198949,1.46810361 1.71748953,0.0267140332 3.75140995,0.000347167969 C5.85941359,-0.0260197266 7.57679671,1.45345535 7.57679671,3.2815592 C7.57679671,4.42119445 6.91004795,5.42606563 5.89645518,6.01199634 C5.60012241,6.18484591 5.42164925,6.47781126 5.42164925,6.78835456 L5.42164925,16.9278856 C5.42164925,17.0480014 5.56981563,17.1212428 5.6910427,17.0626497 L5.69441009,17.0626497 C6.84943444,16.4855079 7.78557661,16.4064073 8.69141204,16.3273067 C9.3244866,16.2745729 9.98113312,16.2159798 10.9105405,15.9903965 C12.3686324,15.6359084 14.0220347,15.2316162 14.8807262,14.1857299 C15.4531872,13.4884723 15.5744143,12.6212949 15.523903,11.8537256 C15.5003311,11.4845893 15.2309377,11.165257 14.8369498,11.030493 C13.4192668,10.5529594 12.4157763,9.35180145 12.4258785,7.94556773 C12.4393482,6.13797146 14.1533639,4.67314468 16.2310608,4.68779291 C18.2986554,4.70244117 19.9688947,6.16726799 19.9688947,7.96900494 C19.9688947,8.83618239 19.5816416,9.62425922 18.9519345,10.21019 Z" id="路径"></path></g></g></g></svg>'},8649:e=>{e.exports='<svg viewBox="0 0 35 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 29</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="98.5705747%" x2="50%" y2="6.78490735%" id="linearGradient-删除变量"><stop stop-color="#55B0C0" offset="0%"></stop><stop stop-color="#71CFDF" offset="100%"></stop></linearGradient><linearGradient x1="50%" y1="98.5705747%" x2="50%" y2="6.78490735%" id="linearGradient-删除"><stop stop-color="#55B0C0" offset="0%"></stop><stop stop-color="#71CFDF" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-245.000000, -831.000000)"><g id="编组-29" transform="translate(245.000000, 831.000000)"><g id="编组-26备份-2" transform="translate(0.000000, 0.000000)"><path d="M30,20.3735982 C29.209578,20.1307225 28.3700549,20 27.5,20 C22.8055796,20 19,23.8055796 19,28.5 C19,29.0118259 19.0452378,29.513086 19.1319332,30 L2,30 C0.8954305,30 1.72441884e-13,29.1045695 1.72306613e-13,28 L1.72306613e-13,2 C1.72171343e-13,0.8954305 0.8954305,-1.57345071e-15 2,-1.77635684e-15 L28,-1.77635684e-15 C29.1045695,-1.97926296e-15 30,0.8954305 30,2 L30,20.3735982 Z" id="形状结合" fill="url(#linearGradient-删除变量)" fill-rule="nonzero"></path><path d="M6.5,5 L6.5,24.5369466" id="路径-29" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path><path d="M18.5,5 L18.5,24.5369466" id="路径-29备份" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path><path d="M12.5,9 L12.5,21.6001636" id="路径-29" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path><path d="M24.5,9 L24.5,17.749209" id="路径-29" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path></g><g id="icon_shanchu-mian备份-2" transform="translate(21.000000, 22.000000)" fill="url(#linearGradient-删除)" fill-rule="nonzero"><path d="M13.9151145,2.14040909 C13.8208332,1.98827252 13.6508485,1.8977507 13.469983,1.90336364 L13.469983,1.90909091 L9.91668348,1.90909091 L9.91668348,0.638590914 C9.91668348,0.461363643 9.84497145,0.306727271 9.71834478,0.180409086 C9.59236415,0.0563181719 9.42180578,0 9.24252567,0 L4.72466688,0 C4.54635586,0 4.40357781,0.0563181855 4.27695114,0.180409086 L4.27598206,0.182 C4.27436692,0.183590914 4.28405774,0.184545457 4.28276563,0.186136357 C4.16066134,0.306409086 4.1021934,0.469 4.10219342,0.638590914 L4.10219342,1.90909091 L0.529835319,1.90909091 C0.243956218,1.90909091 0.0113766101,2.10477273 0.0113766101,2.38636364 C0.0113766101,2.56422729 0.104408445,2.69913637 0.244602266,2.78090909 C0.325359076,2.83722727 0.42323632,2.86363636 0.529835319,2.86363636 L1.49181039,2.86363636 L2.11557597,13.3365909 C2.1265589,13.5090455 2.20343938,13.6913636 2.33168118,13.8075 C2.45346244,13.9271364 2.61529909,14 2.78844169,14 L11.1797199,14 C11.358354,14 11.5263282,13.9252273 11.6523088,13.8008182 C11.7779664,13.6770455 11.8493554,13.4912273 11.8480633,13.3178182 L12.4721519,2.86363636 L13.434127,2.86363636 C13.4438178,2.86363636 13.4531856,2.87031817 13.4628764,2.87031819 C13.4686909,2.87413637 13.4741823,2.8824091 13.4799968,2.88240909 C13.6576618,2.88240909 13.8201445,2.81622727 13.9138224,2.66731819 C14.016904,2.5064883 14.0174061,2.3017276 13.9151145,2.14040909 Z M5.71732955,11.2954545 C5.71732955,11.559045 5.50039322,11.7727273 5.23278871,11.7727273 C4.96518419,11.7727273 4.74824786,11.559045 4.74824786,11.2954545 L4.74824786,4.61363636 C4.74824786,4.35004591 4.96518419,4.13636363 5.23278871,4.13636363 C5.50039322,4.13636363 5.71732955,4.35004591 5.71732955,4.61363636 L5.71732955,11.2954545 Z M8.94760182,11.2954545 C8.94760182,11.559045 8.73066549,11.7727273 8.46306098,11.7727273 C8.19545646,11.7727273 7.97852013,11.559045 7.97852013,11.2954545 L7.97852013,4.61363636 C7.97852013,4.35004591 8.19545646,4.13636363 8.46306098,4.13636363 C8.73066549,4.13636363 8.94760182,4.35004591 8.94760182,4.61363636 L8.94760182,11.2954545 L8.94760182,11.2954545 Z M8.94760182,1.90909091 L5.07127509,1.90909091 L5.07127509,0.954545457 L8.94760182,0.954545457 L8.94760182,1.90909091 Z" id="形状"></path></g></g></g></g></svg>'},2536:e=>{e.exports='<svg viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 20备份 8</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="0%" id="linearGradient-删除属性"><stop stop-color="#B45FB3" offset="0%"></stop><stop stop-color="#D67CD5" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-145.000000, -943.000000)"><g id="编组-20备份-8" transform="translate(145.000000, 943.000000)"><circle id="椭圆形" fill="url(#linearGradient-删除属性)" fill-rule="nonzero" cx="15" cy="15" r="15"></circle><path d="M8,15.5 L21.9347276,15.5" id="路径-44" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path></g></g></g></svg>'},2829:e=>{e.exports='<svg viewBox="0 0 34 35" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 12</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="0%" id="linearGradient-删除记录"><stop stop-color="#EF874C" offset="0%"></stop><stop stop-color="#FFB185" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-245.000000, -621.000000)"><g id="编组-12" transform="translate(245.000000, 621.000000)"><g id="icon_shanchu-mian" transform="translate(20.000000, 21.000000)" fill="url(#linearGradient-删除记录)" fill-rule="nonzero"><path d="M13.9235209,2.14040909 C13.8291055,1.98827252 13.6588789,1.8977507 13.4777561,1.90336364 L13.4777561,1.90909091 L9.91940072,1.90909091 L9.91940072,0.638590914 C9.91940072,0.461363643 9.84758665,0.306727271 9.7207798,0.180409086 C9.59461993,0.0563181719 9.42381887,0 9.24428368,0 L4.71999661,0 C4.54143188,0 4.39845068,0.0563181855 4.27164384,0.180409086 L4.27067338,0.182 C4.26905594,0.183590914 4.27876055,0.184545457 4.2774666,0.186136357 C4.15518857,0.306409086 4.09663745,0.469 4.09663746,0.638590914 L4.09663746,1.90909091 L0.519196402,1.90909091 C0.232910536,1.90909091 0,2.10477273 0,2.38636364 C0,2.56422729 0.0931642061,2.69913637 0.233557503,2.78090909 C0.314429218,2.83722727 0.412445728,2.86363636 0.519196402,2.86363636 L1.48254023,2.86363636 L2.10719334,13.3365909 C2.1181919,13.5090455 2.19518176,13.6913636 2.32360603,13.8075 C2.44556057,13.9271364 2.60762749,14 2.78101645,14 L11.1842343,14 C11.3631225,14 11.5313357,13.9252273 11.6574956,13.8008182 C11.7833319,13.6770455 11.8548225,13.4912273 11.8535286,13.3178182 L12.4785052,2.86363636 L13.441849,2.86363636 C13.4515536,2.86363636 13.4609348,2.87031817 13.4706393,2.87031819 C13.4764621,2.87413637 13.4819614,2.8824091 13.4877842,2.88240909 C13.6657019,2.88240909 13.8284158,2.81622727 13.922227,2.66731819 C14.0254553,2.5064883 14.0259581,2.3017276 13.9235209,2.14040909 Z M5.7140717,11.2954545 C5.7140717,11.559045 5.49682671,11.7727273 5.22884142,11.7727273 C4.96085614,11.7727273 4.74361115,11.559045 4.74361115,11.2954545 L4.74361115,4.61363636 C4.74361115,4.35004591 4.96085614,4.13636363 5.22884142,4.13636363 C5.49682671,4.13636363 5.7140717,4.35004591 5.7140717,4.61363636 L5.7140717,11.2954545 Z M8.94894019,11.2954545 C8.94894019,11.559045 8.73169519,11.7727273 8.46370991,11.7727273 C8.19572463,11.7727273 7.97847964,11.559045 7.97847964,11.2954545 L7.97847964,4.61363636 C7.97847964,4.35004591 8.19572463,4.13636363 8.46370991,4.13636363 C8.73169519,4.13636363 8.94894019,4.35004591 8.94894019,4.61363636 L8.94894019,11.2954545 L8.94894019,11.2954545 Z M8.94894019,1.90909091 L5.067098,1.90909091 L5.067098,0.954545457 L8.94894019,0.954545457 L8.94894019,1.90909091 Z" id="形状"></path></g><g id="编组-8备份-2" transform="translate(0.000000, -0.000000)"><path d="M30,19.7517393 C28.9326322,19.2688344 27.7477109,19 26.5,19 C21.8055796,19 18,22.8055796 18,27.5 C18,28.3700549 18.1307225,29.209578 18.3735982,30 L2,30 C0.8954305,30 1.3527075e-16,29.1045695 0,28 L0,2 C-1.3527075e-16,0.8954305 0.8954305,-5.30877991e-14 2,-5.32907052e-14 L28,-5.32907052e-14 C29.1045695,-5.34936113e-14 30,0.8954305 30,2 L30,19.7517393 Z" id="形状结合" fill="url(#linearGradient-删除记录)" fill-rule="nonzero"></path><path d="M7,8.5 L22.8032385,8.5" id="路径-43" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path><path d="M7,15.5 L22.8032385,15.5" id="路径-43" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path><path d="M7,22.5 L16.3139823,22.5" id="路径-43" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path></g></g></g></g></svg>'},5048:e=>{e.exports='<svg viewBox="0 0 36 37" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 16</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="99.1868821%" x2="50%" y2="0%" id="linearGradient-实时数据"><stop stop-color="#71B032" offset="0%"></stop><stop stop-color="#84C940" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-245.000000, -1052.000000)"><g id="编组-16" transform="translate(245.000000, 1052.000000)"><g id="编组-14" transform="translate(22.000000, 23.000000)"><circle id="椭圆形" fill="url(#linearGradient-实时数据)" fill-rule="nonzero" cx="7" cy="7" r="7"></circle><polyline id="路径" stroke="#FFFFFF" points="8.63338441 9.82511952 4.63338441 6.82511952 8.63338441 3.82511952 8.63338441 3.82511952"></polyline></g><g id="编组-2备份-2" transform="translate(-0.000000, 0.000000)"><path d="M30,21.0549288 C29.6716661,21.0186333 29.3380091,21 29,21 C24.0294373,21 20,25.0294373 20,30 L2,30 C0.8954305,30 -1.05228703e-14,29.1045695 -1.0658141e-14,28 L-1.0658141e-14,2 C-1.07934118e-14,0.8954305 0.8954305,2.02906125e-16 2,0 L28,0 C29.1045695,-2.02906125e-16 30,0.8954305 30,2 L30,21.0549288 Z" id="形状结合" fill="url(#linearGradient-实时数据)" fill-rule="nonzero"></path><polygon id="矩形" fill="#FFFFFF" points="13 5 17 5 17 27 13 27"></polygon><polygon id="矩形备份-46" fill="#FFFFFF" points="5 11 9 11 9 27 5 27"></polygon><polygon id="矩形备份-47" fill="#FFFFFF" points="21 13 25 13 25 21 21 21"></polygon></g></g></g></g></svg>'},8308:e=>{e.exports='<svg viewBox="0 0 36 37" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 9</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="99.1868821%" x2="50%" y2="0%" id="linearGradient-历史数据"><stop stop-color="#71B032" offset="0%"></stop><stop stop-color="#84C940" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-47.000000, -1052.000000)"><g id="编组-9" transform="translate(47.000000, 1052.000000)"><g id="编组-2" transform="translate(-0.000000, 0.000000)"><path d="M30,21.0549288 C29.6716661,21.0186333 29.3380091,21 29,21 C24.0294373,21 20,25.0294373 20,30 L2,30 C0.8954305,30 -1.05228703e-14,29.1045695 -1.0658141e-14,28 L-1.0658141e-14,2 C-1.07934118e-14,0.8954305 0.8954305,2.02906125e-16 2,0 L28,0 C29.1045695,-2.02906125e-16 30,0.8954305 30,2 L30,21.0549288 Z" id="形状结合" fill="url(#linearGradient-历史数据)" fill-rule="nonzero"></path><polygon id="矩形" fill="#FFFFFF" points="13 5 17 5 17 27 13 27"></polygon><polygon id="矩形备份-46" fill="#FFFFFF" points="5 11 9 11 9 27 5 27"></polygon><polygon id="矩形备份-47" fill="#FFFFFF" points="21 13 25 13 25 21 21 21"></polygon></g><g id="编组-6" transform="translate(22.000000, 23.000000)"><circle id="椭圆形" fill="url(#linearGradient-历史数据)" fill-rule="nonzero" cx="7" cy="7" r="7"></circle><polyline id="路径-25" stroke="#FEFEFF" points="7 2.01840506 7 7 11.0254526 10.4939938"></polyline></g></g></g></g></svg>'},9208:e=>{e.exports='<svg viewBox="0 0 36 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="linearGradient-企业微信"><stop stop-color="#72D6BC" offset="0%"></stop><stop stop-color="#20A67E" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-378.000000, -734.000000)" fill="url(#linearGradient-企业微信)" fill-rule="nonzero"><g id="xingzhuang" transform="translate(378.000000, 734.000000)"><path d="M24.6995606,23.9941481 C25.692154,24.9848596 26.8927193,25.5800399 28.2237398,25.9529693 L28.6718248,26.0678617 C29.6058079,26.2373751 30.0954873,27.084942 30.1370817,27.9513438 C30.1370817,28.968424 29.3940547,29.8348258 28.3731015,29.9836208 C27.397524,30.1098141 26.3765708,29.495799 26.1648175,28.5220388 C25.8679848,27.0209036 25.2289437,25.7081167 24.1248018,24.6081632 C23.9981279,24.4800864 24.0832074,24.205098 24.0397223,23.9941481 L24.5369643,23.9564784 C24.6125905,23.9564784 24.6693101,23.9658958 24.6995606,23.9941481 L24.6995606,23.9941481 Z M26.5051352,4.8203012 C28.5848547,7.02020819 29.7343724,9.62318032 29.7759668,12.6499359 C29.2486054,12.4119791 28.6759968,12.2899262 28.097066,12.2920743 L28.0119865,12.2920743 C26.0268653,12.371843 24.3958038,13.8800268 24.1682868,15.8462049 C24.1257649,16.1977724 24.1257649,16.5531542 24.1682868,16.9047218 C23.4233691,17.6449302 22.5101832,18.1101503 21.385244,18.3003819 L21.3625562,18.3003819 C19.8970039,18.609848 18.7408333,19.7315144 18.3914739,21.1827968 C18.0421144,22.6340791 18.5618773,24.156129 19.7271404,25.0941015 C18.4510964,25.4821847 17.1297735,25.7031526 15.7964706,25.7514368 C14.0895944,25.8327504 12.3798669,25.6684526 10.7200644,25.2636149 C10.441151,25.2287273 10.1579238,25.2577156 9.89195788,25.3483716 L6.04636749,27.2318536 C5.55668809,27.4861237 5.11049372,27.5275603 4.68509656,27.190417 C4.28238724,26.8928269 4.24079285,26.4483251 4.28238724,25.9190667 C4.45254611,24.8624333 4.58111058,23.8039164 4.68698721,22.7453995 C4.66968314,22.4860633 4.56433822,22.2403053 4.38826387,22.0485111 C2.7112537,20.3740956 1.26679399,18.5339337 0.544564133,16.2059499 C-0.816706801,11.591419 0.415999655,7.6361068 3.77380129,4.33247936 C9.91275507,-1.65699343 20.6384356,-1.38200506 26.5051352,4.8203012 Z M34.152831,20.078389 C35.2153786,20.2064657 36,21.0521492 36,22.110666 C36,23.1277463 35.3836468,23.950828 34.3645842,24.1429431 C33.1167525,24.368961 31.9899227,24.8963359 31.0521583,25.7062332 L30.7118406,26.0264251 C30.4981966,26.2373751 30.1805668,26.4276068 29.9669228,26.1111818 C29.8818434,25.9416685 29.9253285,25.5386033 30.0520023,25.41241 C31.0525473,24.4026164 31.7132496,23.1079451 31.9426564,21.7076009 C32.1388199,20.6726016 33.1019364,19.9626482 34.152831,20.078389 L34.152831,20.078389 Z M26.2064119,18.1741886 C26.1648175,18.3851386 26.2498969,18.7015636 26.1213325,18.8296404 C25.0606755,19.8881573 24.4859167,21.1576241 24.189084,22.6192062 C23.9754401,23.6758396 22.9979719,24.2898547 21.9789094,24.1203413 C20.9579562,23.950828 20.1941319,23.0618245 20.1941319,22.067346 C20.1941319,21.1783425 20.8539702,20.3533773 21.7444683,20.1838639 C23.1819922,19.9502131 24.5112026,19.2775988 25.5484643,18.2589453 C25.6751381,18.1308686 25.9946586,18.1741886 26.2064119,18.1741886 L26.2064119,18.1741886 Z M28.097066,14.1943912 C29.0329397,14.1943912 29.9026406,14.8084063 30.0954873,15.7821665 C30.348835,17.2418651 30.987876,18.5132154 32.0277358,19.5698488 C32.1563003,19.6979256 32.0712208,20.0576707 32.1128152,20.2686206 C31.8575769,20.2686206 31.539947,20.3533773 31.4132732,20.227184 C30.348835,19.1253471 29.0310491,18.554652 27.5657922,18.238227 C26.5848147,18.0050774 25.9361399,17.0750805 26.0589409,16.0778732 C26.2064119,15.0212398 27.036409,14.2377112 28.097066,14.1943912 L28.097066,14.1943912 Z" id="形状"></path></g></g></g></svg>'},8776:e=>{e.exports='<svg viewBox="0 0 30 26" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>weixin</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="-58.4437809%" id="linearGradient-发送微信"><stop stop-color="#29B98E" offset="0%"></stop><stop stop-color="#5DE6C6" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="画板" transform="translate(-147.000000, -67.000000)" fill="url(#linearGradient-发送微信)" fill-rule="nonzero"><g id="weixin备份" transform="translate(147.000000, 67.000000)"><path d="M20.3290392,8.37526042 C20.6481882,8.37526042 20.9593584,8.38984375 21.2765126,8.42109375 C20.5604222,3.67109375 16.1003158,0.0106770833 10.7027094,0.0106770833 C4.80643285,0.0106770833 0.0271775266,4.37942708 0.0271775266,9.76692708 C0.0271775266,12.7794271 1.52318816,15.4731771 3.86893285,17.2648438 C3.56973072,18.8315104 3.1967254,20.8919271 3.25058178,20.8231771 C3.3323637,20.7919271 5.3948637,19.5960938 6.69140625,18.8127604 C7.93010306,19.2690104 9.28249668,19.5252604 10.7027094,19.5252604 C10.8523105,19.5252604 10.9979222,19.5210938 11.1475233,19.5169271 C10.9819648,18.8440104 10.8961935,18.1544271 10.8961935,17.4335938 C10.8941988,12.4315104 15.1169382,8.37526042 20.3290392,8.37526042 Z M14.8955286,5.18984375 C15.6335605,5.18984375 16.2299701,5.81276042 16.2299701,6.58151042 C16.2299701,7.35234375 15.6315658,7.97734375 14.8955286,7.97734375 C14.1594914,7.97734375 13.5610871,7.35026042 13.5610871,6.58151042 C13.5610871,5.81276042 14.1594914,5.18984375 14.8955286,5.18984375 Z M6.69938497,7.97734375 C5.96135306,7.97734375 5.36693816,7.35026042 5.36693816,6.58151042 C5.36693816,5.81276042 5.96334774,5.18984375 6.69938497,5.18984375 C7.43542221,5.18984375 8.03382646,5.81276042 8.03382646,6.58151042 C8.03382646,7.35234375 7.43542221,7.97734375 6.69938497,7.97734375 L6.69938497,7.97734375 Z M29.955369,17.1335938 C29.955369,12.6252604 25.8602892,8.97109375 20.8077626,8.97109375 C15.7532414,8.97109375 11.6561669,12.6273438 11.6561669,17.1335938 C11.6561669,21.6419271 15.7532414,25.3002604 20.8077626,25.3002604 C22.1820977,25.3002604 23.4846243,25.0273438 24.6574967,24.5419271 C25.8642786,25.2148438 27.1787733,25.9231771 27.2445977,25.9440104 C27.2904754,25.9960938 27.0311669,24.6773438 26.7499169,23.3460938 C28.7086935,21.8419271 29.955369,19.6210938 29.955369,17.1335938 Z M17.3749169,15.3419271 C16.636885,15.3419271 16.0384807,14.7190104 16.0384807,13.9502604 C16.0384807,13.1815104 16.636885,12.5544271 17.3749169,12.5544271 C18.1109541,12.5544271 18.7073637,13.1815104 18.7073637,13.9502604 C18.7073637,14.7190104 18.1109541,15.3419271 17.3749169,15.3419271 Z M24.0451297,15.3419271 C23.3090924,15.3419271 22.7086935,14.7190104 22.7086935,13.9502604 C22.7086935,13.1815104 23.3090924,12.5544271 24.0451297,12.5544271 C24.7811669,12.5544271 25.3815658,13.1815104 25.3815658,13.9502604 C25.3815658,14.7190104 24.7811669,15.3419271 24.0451297,15.3419271 Z" id="形状"></path></g></g></g></svg>'},9738:e=>{e.exports='<svg viewBox="0 0 30 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>xinfeng</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="0%" id="linearGradient-发送短信"><stop stop-color="#2ABA8F" offset="0%"></stop><stop stop-color="#49D4B1" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-47.000000, -1537.000000)" fill="url(#linearGradient-发送短信)" fill-rule="nonzero"><g id="xinfeng" transform="translate(47.000000, 1537.000000)"><path d="M15,11.8086463 L1.03125,0.0473699279 L1.24888393,1.86517468e-13 L28.7511161,1.86517468e-13 L28.9720982,0.0473699279 L15,11.8086463 Z M30,1.26545379 L30,18.9479712 L29.9397321,19.2558757 L20.0189732,9.23036881 L29.9263393,0.889877931 C29.9631696,1.01168632 30,1.1334947 30,1.26545379 Z M0.0770089286,0.886494365 L9.984375,9.23375238 L0.0636160714,19.2592593 L0,18.9513547 L0,1.26545379 C0,1.13011114 0.0368303571,1.00830275 0.0770089286,0.886494365 Z M18.9837456,10.5256216 L28.5155776,19.9344521 L28.2108666,20 L1.4277946,20 L1.12970776,19.9344521 L11.1521159,10.5256216 L14.5742675,13.4485749 C14.6868781,13.5486218 14.8292973,13.5969202 14.9684045,13.5969202 C15.1108238,13.5969202 15.2532431,13.5486218 15.3658537,13.4485749 L18.9837456,10.5256216 Z" id="形状结合"></path></g></g></g></svg>'},8904:e=>{e.exports='<svg viewBox="0 0 30 26" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>duanxin</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="0%" id="linearGradient-发送短信"><stop stop-color="#2ABA8F" offset="0%"></stop><stop stop-color="#49D4B1" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-148.000000, -1536.000000)" fill="url(#linearGradient-发送短信)" fill-rule="nonzero"><g id="duanxin" transform="translate(148.000000, 1536.000000)"><path d="M26.3585491,2.16715534e-13 L3.6196875,2.16715534e-13 C1.18459821,2.16715534e-13 1.26121336e-13,1.17504536 1.26121336e-13,3.52546371 L1.26121336e-13,17.627253 C1.26121336e-13,19.9778024 1.11137277,21.0886668 3.48575893,21.0886668 L6.97165179,21.0886668 L6.5428125,24.6782132 C6.5427355,25.1118475 6.78799327,25.5098903 7.1799442,25.7122505 C7.35481198,25.8048208 7.55048949,25.8533569 7.74930804,25.8533569 C7.98328125,25.8533569 8.21745536,25.787374 8.41767857,25.6558669 L15.3376674,21.0886668 L26.4924442,21.0886668 C28.9058705,21.0886668 29.9782366,19.9778352 29.9782366,17.627253 L29.9782366,3.52546371 C29.9782366,1.17504536 28.7717746,2.16715534e-13 26.3585491,2.16715534e-13 Z M8.02479911,12.2499446 C7.06526786,12.2499446 6.28543527,11.4865877 6.28543527,10.5504763 C6.28543527,9.61446321 7.06530134,8.84789567 8.02479911,8.84789567 C8.98422991,8.84789567 9.76419643,9.61138357 9.76419643,10.5504763 C9.76402902,11.4897001 8.98098214,12.2499446 8.02479911,12.2499446 Z M14.9853013,12.2499446 C14.0207143,12.2499446 13.2370647,11.4865877 13.2370647,10.5504763 C13.2370647,9.61446321 14.0208817,8.84789567 14.9853013,8.84789567 C15.9497879,8.84789567 16.7334375,9.61138357 16.7334375,10.5504763 C16.7334375,11.4897001 15.9463728,12.2499446 14.9853348,12.2499446 L14.9853013,12.2499446 Z M21.9566183,12.2499446 C20.9919978,12.2499446 20.2110938,11.4865877 20.2110938,10.5504763 C20.2110938,9.61446321 20.9919978,8.84789567 21.9565848,8.84789567 C22.9207701,8.84789567 23.7045871,9.61138357 23.7045871,10.5504763 C23.7045871,11.4897001 22.9209375,12.2499446 21.9565848,12.2499446 L21.9566183,12.2499446 Z" id="形状"></path></g></g></g></svg>'},3450:e=>{e.exports='<svg viewBox="0 0 30 26" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>youjian</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="0%" id="linearGradient-发送邮件"><stop stop-color="#2ABA8F" offset="0%"></stop><stop stop-color="#49D4B1" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-46.000000, -1454.000000)" fill="url(#linearGradient-发送邮件)" fill-rule="nonzero"><g id="youjian" transform="translate(46.000000, 1454.000000)"><path d="M29.991723,4.00303541 L14.8034212,13.2937605 L0.00413850186,4.24418212 L0.00413850186,2.89376054 C0.00413850186,1.29780776 1.22499655,0 2.73554973,0 L27.2685888,0 C28.7750034,0 30,1.29342327 30,2.89376054 L30,4.00303541 L29.991723,4.00303541 Z M29.991723,7.33962901 L29.991723,23.1062395 C29.991723,24.7021922 28.7708649,26 27.2603118,26 L2.73141123,26 C1.22499655,26 0,24.7065767 0,23.1062395 L0,7.58077572 L14.1247069,16.2182125 C14.6089116,16.5163575 15.1924403,16.4593592 15.6145675,16.1305228 C15.63526,16.1217538 15.651814,16.1086003 15.6725066,16.0998314 L29.991723,7.33962901 Z" id="形状"></path></g></g></g></svg>'},5678:e=>{e.exports='<svg viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>dingding</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="0%" id="linearGradient-发送钉钉"><stop stop-color="#2ABA8F" offset="0%"></stop><stop stop-color="#49D4B1" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-147.000000, -1452.000000)" fill="url(#linearGradient-发送钉钉)" fill-rule="nonzero"><g id="dingding" transform="translate(147.000000, 1452.000000)"><path d="M14.9715021,0.0193758878 C6.70472301,0.0193758878 0.00312943892,6.72093617 0.00312943892,14.9877486 C0.00312943892,23.254561 6.70472301,29.9561213 14.9715021,29.9561213 C23.2382812,29.9561213 29.9398748,23.2545277 29.9398748,14.9877486 C29.9398748,6.72096946 23.2383145,0.0193758878 14.9715021,0.0193758878 Z M21.908536,12.9948952 C21.8773415,13.1261319 21.800637,13.318426 21.692971,13.550637 L21.695368,13.550637 L21.6829834,13.5721436 C21.0548318,14.9162043 19.4146729,17.5521906 19.4146729,17.5521906 C19.4146729,17.5521906 19.4124423,17.5460316 19.4061168,17.5356778 L18.9268133,18.3700395 L21.2366721,18.3700395 L16.8250954,24.2364058 L17.8266158,20.2456388 L16.009011,20.2456388 L16.6405251,17.6066229 C16.1294944,17.7299028 15.5257457,17.8992587 14.810336,18.1292725 C14.810336,18.1292725 13.8428067,18.6959672 12.0230047,17.0391624 C12.0230047,17.0391624 10.7957653,15.9580078 11.5073464,15.6877441 C11.8100031,15.5728538 12.9765514,15.427002 13.8945091,15.3029563 C15.1349654,15.1352317 15.8980824,15.0464422 15.8980824,15.0464422 C15.8980824,15.0464422 12.0737416,15.1037043 11.1665039,14.960882 C10.2591331,14.8182595 9.10816539,13.3042769 8.86303711,11.9734331 C8.86303711,11.9734331 8.48384233,11.2427424 9.67835582,11.5886119 C10.872836,11.9345148 15.8176159,12.9350364 15.8176159,12.9350364 C15.8176159,12.9350364 9.38685192,10.9638894 8.95898438,10.4829878 C8.53101696,10.002053 7.69955167,7.85738858 7.80781694,6.53962846 C7.80781694,6.53962846 7.85475852,6.21113725 8.19163929,6.29909446 C8.19163929,6.29909446 12.9457897,8.47152433 16.1965776,9.66074441 C19.4473988,10.8499978 22.2736816,11.4550115 21.908536,12.9949285 L21.908536,12.9948952 Z" id="形状"></path></g></g></g></svg>'},876:e=>{e.exports='<svg viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>形状结合</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="4.45633742%" id="linearGradient-启动系统"><stop stop-color="#4971E0" offset="0%"></stop><stop stop-color="#93AEF7" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-47.000000, -155.000000)" fill="url(#linearGradient-启动系统)" fill-rule="nonzero"><path d="M62,185 C53.7157288,185 47,178.284271 47,170 C47,161.715729 53.7157288,155 62,155 C70.2842712,155 77,161.715729 77,170 C77,178.284271 70.2842712,185 62,185 Z M59.1105613,163.017114 L59.1105613,177.017114 L69.1105613,170.017114 L59.1105613,163.017114 Z" id="形状结合"></path></g></g></svg>'},9060:e=>{e.exports='<svg viewBox="0 0 13 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><desc>Created with Sketch.</desc><g id="é¡µé¢1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="ç»æ¿" transform="translate(-1408.000000, -683.000000)" fill="#F2D574" fill-rule="nonzero"><g id="ziyuanå¤ä»½" transform="translate(1408.000000, 683.000000)"><path d="M12.59375,1.6 L9.9165625,1.6 L8.2915625,0 L4.7084375,0 L3.0834375,1.6 L0.40625,1.6 C0.1828125,1.6 0,1.96 0,2.18 L0,3.2 L13,3.2 L13,2.18 C13,1.96 12.8171875,1.6 12.59375,1.6 Z M5.0415625,0.8 L7.9584375,0.8 L8.7709375,1.6 L4.2290625,1.6 L5.0415625,0.8 Z M0.8125,15.78 C0.8125,16 0.9953125,16 1.21875,16 L11.78125,16 C12.0046875,16 12.1875,16 12.1875,15.78 L12.1875,4 L0.8125,4 L0.8125,15.78 Z M7.3125,6.4 L8.125,6.4 L8.125,12.8 L7.3125,12.8 L7.3125,6.4 Z M4.875,6.4 L5.6875,6.4 L5.6875,12.8 L4.875,12.8 L4.875,6.4 Z" id="å½¢ç¶"></path></g></g></g></svg>'},8007:e=>{e.exports='<svg viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>a-tianxie2x</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="0%" id="linearGradient-填写"><stop stop-color="#EBBC09" offset="0%"></stop><stop stop-color="#FFEF26" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-245.000000, -1372.000000)" fill="url(#linearGradient-填写)" fill-rule="nonzero"><g id="a-tianxie2x" transform="translate(245.000000, 1372.000000)"><path d="M14.9939448,0 C23.1070781,-0.0011782932 29.7230444,6.53483404 29.8609675,14.6873547 L29.8609675,14.9413578 C29.86214,23.0950567 23.3586451,29.7441028 15.2466842,29.8827156 L14.9939448,29.8827156 C6.783115,29.9528565 0.0703447028,23.3202433 0.000552649087,15.0683594 C-0.0692394047,6.81647538 6.53037561,0.070141137 14.7412054,0 L14.9939448,0 Z M17.2760328,9.11422827 C17.1315072,9.01648706 16.93835,9.03527316 16.8151551,9.15905235 L7.31512759,18.6766973 L6.11089877,22.8453361 L6.11089877,22.9125722 C6.08115311,23.0948978 6.14400307,23.2801051 6.27840091,23.4061703 C6.41279875,23.5322354 6.60097621,23.5824919 6.77991477,23.5401093 L10.9278141,22.3672127 L20.3832406,12.819685 L20.4278416,12.7673903 C20.5250966,12.622142 20.5064039,12.428019 20.3832406,12.3042082 L17.3206339,9.15905235 L17.2760328,9.11422827 Z M21.4908338,6.32766505 C20.9219237,5.83023868 20.0645377,5.86970462 19.5432538,6.41731319 L18.3464584,7.62009248 L18.3018574,7.67238724 C18.1946257,7.81494958 18.214016,8.01631723 18.3464584,8.13556935 L21.4387992,11.2433718 L21.4908338,11.2881958 C21.6326868,11.3959636 21.8330526,11.3764764 21.9517115,11.2433718 L23.1708073,10.0405925 L23.252576,9.94347365 C23.7262354,9.3458229 23.6749267,8.48532824 23.1336398,7.94880236 L21.5874694,6.41731319 L21.4908338,6.32766505 Z" id="形状"></path></g></g></g></svg>'},5218:e=>{e.exports='<svg viewBox="0 0 17 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>系统模型备份</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="0.876266892%" x2="50%" y2="100%" id="linearGradient-处理"><stop stop-color="#2878FF" offset="0%"></stop><stop stop-color="#1859C6" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-20.000000, -545.000000)"><g id="系统模型备份" transform="translate(20.000000, 545.000000)"><polyline id="Path-10" stroke="#4F71FF" stroke-width="1.5" points="6 11 6 13.8279871 6 15"></polyline><polyline id="Path-10" stroke="#4F71FF" stroke-width="1.5" points="10 11 10 13.8279871 10 15"></polyline><path d="M2,0 L15,0 C16.1045695,-2.02906125e-16 17,0.8954305 17,2 L17,9 C17,10.1045695 16.1045695,11 15,11 L2,11 C0.8954305,11 1.3527075e-16,10.1045695 0,9 L0,2 C-1.3527075e-16,0.8954305 0.8954305,2.02906125e-16 2,0 Z" id="Rectangle-17" fill="#4F71FF"></path><path d="M3.42978363,15 L13,15" id="Path-19" stroke="#4F71FF" stroke-width="1.5" stroke-linecap="round"></path><path d="M5.28416806,7 C5.28416806,7 7.43944537,7 11.75,7" id="Path-26" stroke="#FFFFFF"></path><rect id="Rectangle-18" stroke="#FFFFFF" x="3.5" y="6.5" width="2" height="2" rx="1"></rect><path d="M8.5,7.5 L8.5,4.5" id="Path-26" stroke="#FFFFFF"></path><rect id="Rectangle-18" stroke="#FFFFFF" x="7.5" y="2.5" width="2" height="2" rx="1"></rect><rect id="Rectangle-18" stroke="#FFFFFF" x="11.5" y="6.5" width="2" height="2" rx="1"></rect></g></g></g></svg>'},8542:e=>{e.exports='<svg viewBox="0 0 36 37" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 17</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="99.1868821%" x2="50%" y2="0%" id="linearGradient-实时数据"><stop stop-color="#71B032" offset="0%"></stop><stop stop-color="#84C940" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-145.000000, -1052.000000)"><g id="编组-17" transform="translate(145.000000, 1052.000000)"><g id="huabanfuben" transform="translate(22.000000, 23.000000)" fill="url(#linearGradient-实时数据)" fill-rule="nonzero"><path d="M7.00406206,6.5954222 C7.00406158,6.6915481 7.04231976,6.78372034 7.11038797,6.85158438 C7.17845618,6.91944842 7.27073488,6.95742149 7.36684599,6.95711793 L13.6186828,6.95711793 C13.7235888,6.95694129 13.8239177,7.00007095 13.8959783,7.07632246 C13.968039,7.15257397 14.0054431,7.25518764 13.9993584,7.35993276 C13.8027848,11.1238396 10.6638945,14.0575744 6.89587037,13.9991422 C3.12784628,13.9407099 0.0814050036,10.9110567 0.0015998601,7.14286399 C-0.0782052834,3.37467128 2.8372333,0.218716048 6.59940381,0.000757155739 C6.70445238,-0.00587527163 6.80755814,0.0312899639 6.88422371,0.103422592 C6.96088928,0.17555522 7.00427117,0.276216388 7.00406206,0.381489517 L7.00406206,6.5954222 Z M8.15211167,6.20618557 C8.05718921,6.20648506 7.96605177,6.16879576 7.89882539,6.10143887 C7.83159901,6.03408198 7.79381443,5.94259853 7.79381443,5.84719098 L7.79381443,0.522383154 C7.79381443,0.410563172 7.8429927,0.304463604 7.92825034,0.232627424 C8.01350797,0.160791243 8.12604128,0.130595809 8.2355765,0.150164316 C11.0908865,0.654483064 13.3312851,2.89335034 13.8495261,5.76027694 C13.8696224,5.87065953 13.8398702,5.98430972 13.7683251,6.07045616 C13.69678,6.1566026 13.5908433,6.20633342 13.4791979,6.20618557 L8.15211167,6.20618557 Z" id="形状结合"></path></g><g id="编组-2备份" transform="translate(-0.000000, 0.000000)"><path d="M30,21.0549288 C29.6716661,21.0186333 29.3380091,21 29,21 C24.0294373,21 20,25.0294373 20,30 L2,30 C0.8954305,30 -1.05228703e-14,29.1045695 -1.0658141e-14,28 L-1.0658141e-14,2 C-1.07934118e-14,0.8954305 0.8954305,2.02906125e-16 2,0 L28,0 C29.1045695,-2.02906125e-16 30,0.8954305 30,2 L30,21.0549288 Z" id="形状结合" fill="url(#linearGradient-实时数据)" fill-rule="nonzero"></path><polygon id="矩形" fill="#FFFFFF" points="13 5 17 5 17 27 13 27"></polygon><polygon id="矩形备份-46" fill="#FFFFFF" points="5 11 9 11 9 27 5 27"></polygon><polygon id="矩形备份-47" fill="#FFFFFF" points="21 13 25 13 25 21 21 21"></polygon></g></g></g></g></svg>'},3939:e=>{e.exports='<svg viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>shenpi</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="0%" id="linearGradient-审批"><stop stop-color="#EBBC09" offset="0%"></stop><stop stop-color="#FFEF26" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-47.000000, -1371.000000)" fill="url(#linearGradient-审批)" fill-rule="nonzero"><g id="shenpi" transform="translate(47.000000, 1371.000000)"><path d="M15,6.9976894e-07 C19.0746123,-0.00152311456 22.6420457,2.48578521 23.6968865,6.06369927 C24.7517273,9.64161333 23.030794,13.4174476 19.5015,15.268637 L19.5,17.7272733 L27,17.7272733 C27.7956495,17.7272733 28.5587112,18.0146101 29.1213203,18.5260729 C29.6839295,19.0375358 30,19.7312282 30,20.4545459 L30,25.227273 L0,25.227273 L0,20.4545459 C0,19.7312282 0.316070511,19.0375358 0.878679652,18.5260729 C1.44128879,18.0146101 2.20435054,17.7272733 3,17.7272733 L10.5,17.7272733 L10.5,15.268637 C7.81866581,13.8620211 6.12114026,11.3010013 6.00600002,8.48863737 L6,8.18181921 C6,3.66312601 10.0294373,6.9976894e-07 15,6.9976894e-07 Z M0,27.2727274 L30,27.2727274 C30,27.9960451 29.6839295,28.6897375 29.1213203,29.2012004 C28.5587112,29.7126632 27.7956495,30 27,30 L3,30 C2.20435055,30 1.44128881,29.7126632 0.878679665,29.2012004 C0.316070524,28.6897375 0,27.9960451 0,27.2727274 L0,27.2727274 Z" id="形状"></path></g></g></g></svg>'},9543:e=>{e.exports='<svg viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>icon__yanshi</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="-3.89176883%" id="linearGradient-yanshi"><stop stop-color="#50A6C5" offset="0%"></stop><stop stop-color="#63C0E2" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-146.000000, -1739.000000)" fill-rule="nonzero"><g id="icon__yanshi" transform="translate(146.000000, 1739.000000)"><path d="M14.9655405,29.8643066 C8.56535787,29.8833048 2.86607454,25.8179767 0.800502137,19.7602451 C-1.26507027,13.7025135 0.763328982,7.00219113 5.84189973,3.10721735 C10.9204705,-0.787756437 17.9175813,-1.00948495 23.2325676,2.55613176 L21.7925676,4.71288851 C17.0910135,1.57392171 10.8567564,2.0360952 6.66946623,5.83403198 C2.48217602,9.63196876 1.41568186,15.7916892 4.08235777,20.7763219 C6.74903368,25.7609545 12.4650115,28.292192 17.9482139,26.9166142 C23.4314163,25.5410364 27.2756779,20.6114098 27.2736486,14.9582939 L29.8682432,14.9582939 C29.8610932,23.1863911 23.1936359,29.8552994 14.9655405,29.8643066 L14.9655405,29.8643066 Z" id="路径" fill="url(#linearGradient-yanshi)"></path><polygon id="路径" fill="#56AECE" points="21.3741892 16.9658615 13.3439189 16.9658615 13.3439189 7.70964527 15.9385135 7.70964527 15.9385135 14.3712669 21.3741892 14.3712669 21.3741892 16.9658615"></polygon><path d="M23.0444595,5.199375 C23.0444595,5.93913803 23.6441559,6.53883446 24.3839189,6.53883446 C25.123682,6.53883446 25.7233784,5.93913803 25.7233784,5.199375 C25.7233784,4.45961197 25.123682,3.85991554 24.3839189,3.85991554 C23.6441559,3.85991554 23.0444595,4.45961197 23.0444595,5.199375 Z" id="路径" fill="#56AECE"></path><path d="M25.4541892,8.36153716 C25.4541892,9.10130019 26.0538856,9.70099662 26.7936486,9.70099662 C27.5334117,9.70099662 28.1331081,9.10130019 28.1331081,8.36153716 C28.1331081,7.62177413 27.5334117,7.0220777 26.7936486,7.0220777 C26.0538856,7.0220777 25.4541892,7.62177413 25.4541892,8.36153716 Z" id="路径" fill="#56AECE"></path><path d="M26.9395946,12.2858615 C26.9395946,13.0256245 27.539291,13.6253209 28.2790541,13.6253209 C29.0188171,13.6253209 29.6185135,13.0256245 29.6185135,12.2858615 C29.6185135,11.5460985 29.0188171,10.946402 28.2790541,10.946402 C27.539291,10.946402 26.9395946,11.5460985 26.9395946,12.2858615 L26.9395946,12.2858615 Z" id="路径" fill="#56AECE"></path></g></g></g></svg>'},7770:e=>{e.exports='<svg viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><rect id="path-1" x="0" y="0" width="18" height="18" rx="2"></rect></defs><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-346.000000, -141.000000)"><g id="我的任务" transform="translate(346.000000, 141.000000)"><g id="我的任务备份-2"><mask id="mask-2" fill="white"><use xlink:href="#path-1"></use></mask><use id="蒙版" fill="#9299B9" xlink:href="#path-1"></use></g><path d="M14.368947,6.23549604 L9.31581701,6.23549604 C8.96729607,6.23549604 8.68476402,6.51325752 8.68476402,6.85589366 C8.68476402,7.1985298 8.96729607,7.47629127 9.31581701,7.47629127 L14.368947,7.47629127 C14.717468,7.47629127 15,7.1985298 15,6.85589366 C15,6.51325752 14.717468,6.23549604 14.368947,6.23549604 L14.368947,6.23549604 Z" id="路径" fill="#1A2554" fill-rule="nonzero"></path><path d="M14.368947,11.2056871 L9.31581701,11.2056871 C8.96729607,11.2056871 8.68476402,11.4834486 8.68476402,11.8260847 C8.68476402,12.1687208 8.96729607,12.4464823 9.31581701,12.4464823 L14.368947,12.4464823 C14.717468,12.4464823 15,12.1687208 15,11.8260847 C15,11.4834486 14.717468,11.2056871 14.368947,11.2056871 Z" id="路径" fill="#1A2554" fill-rule="nonzero"></path><path d="M5.52600516,9.65371165 C4.30504242,9.65371165 3.31553708,10.6267895 3.31553708,11.8268558 C3.31553708,13.0269221 4.30532764,14 5.52600516,14 C6.74668267,14 7.73647322,13.0269221 7.73647322,11.8268558 C7.73647322,10.6267895 6.74696788,9.65371165 5.52600516,9.65371165 Z" id="路径" fill="#1A2554" fill-rule="nonzero"></path><path d="M6.19677526,12.4865803 C5.87671939,12.8009298 5.37537312,12.8492556 4.99930818,12.6020066 C4.62324324,12.3547576 4.47718473,11.8807868 4.65044699,11.4699259 C4.82370924,11.059065 5.26804287,10.8257289 5.71173919,10.912602 C6.15543551,10.9994751 6.47493572,11.3823652 6.4748694,11.8271362 C6.4755024,12.0746685 6.37536207,12.3121589 6.19677526,12.4866504 L6.19677526,12.4865803 Z" id="路径" fill="#9299B9" fill-rule="nonzero"></path><path d="M6.9747174,4.17871708 L4.89431042,6.22392614 L4.0772929,5.42063392 C3.83084725,5.17834952 3.4312799,5.17834951 3.18483424,5.42063391 C2.93838859,5.66291831 2.93838858,6.05573894 3.18483423,6.29802335 L4.44808108,7.54001031 C4.56642708,7.65636194 4.72694109,7.72172793 4.89431042,7.72172793 C5.06167975,7.72172793 5.22219375,7.65636194 5.34053975,7.54001031 L7.86710475,5.0561065 C8.1106958,4.81336543 8.1093598,4.42285249 7.86411337,4.1817278 C7.61886694,3.94060311 7.22164702,3.93925847 6.9747174,4.17871708 L6.9747174,4.17871708 Z" id="路径" fill="#1A2554" fill-rule="nonzero"></path></g></g></g></svg>'},1471:e=>{e.exports='<svg viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><rect id="path-1" x="0" y="0" width="18" height="18" rx="2"></rect></defs><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-346.000000, -141.000000)"><g id="我的任务" transform="translate(346.000000, 141.000000)"><g id="我的任务备份-2"><mask id="mask-2" fill="white"><use xlink:href="#path-1"></use></mask><use id="蒙版" fill="#9299B9" xlink:href="#path-1"></use></g><path d="M14.368947,6.23549604 L9.31581701,6.23549604 C8.96729607,6.23549604 8.68476402,6.51325752 8.68476402,6.85589366 C8.68476402,7.1985298 8.96729607,7.47629127 9.31581701,7.47629127 L14.368947,7.47629127 C14.717468,7.47629127 15,7.1985298 15,6.85589366 C15,6.51325752 14.717468,6.23549604 14.368947,6.23549604 L14.368947,6.23549604 Z" id="路径" fill="#fff" fill-rule="nonzero"></path><path d="M14.368947,11.2056871 L9.31581701,11.2056871 C8.96729607,11.2056871 8.68476402,11.4834486 8.68476402,11.8260847 C8.68476402,12.1687208 8.96729607,12.4464823 9.31581701,12.4464823 L14.368947,12.4464823 C14.717468,12.4464823 15,12.1687208 15,11.8260847 C15,11.4834486 14.717468,11.2056871 14.368947,11.2056871 Z" id="路径" fill="#fff" fill-rule="nonzero"></path><path d="M5.52600516,9.65371165 C4.30504242,9.65371165 3.31553708,10.6267895 3.31553708,11.8268558 C3.31553708,13.0269221 4.30532764,14 5.52600516,14 C6.74668267,14 7.73647322,13.0269221 7.73647322,11.8268558 C7.73647322,10.6267895 6.74696788,9.65371165 5.52600516,9.65371165 Z" id="路径" fill="#fff" fill-rule="nonzero"></path><path d="M6.19677526,12.4865803 C5.87671939,12.8009298 5.37537312,12.8492556 4.99930818,12.6020066 C4.62324324,12.3547576 4.47718473,11.8807868 4.65044699,11.4699259 C4.82370924,11.059065 5.26804287,10.8257289 5.71173919,10.912602 C6.15543551,10.9994751 6.47493572,11.3823652 6.4748694,11.8271362 C6.4755024,12.0746685 6.37536207,12.3121589 6.19677526,12.4866504 L6.19677526,12.4865803 Z" id="路径" fill="#fff" fill-rule="nonzero"></path><path d="M6.9747174,4.17871708 L4.89431042,6.22392614 L4.0772929,5.42063392 C3.83084725,5.17834952 3.4312799,5.17834951 3.18483424,5.42063391 C2.93838859,5.66291831 2.93838858,6.05573894 3.18483423,6.29802335 L4.44808108,7.54001031 C4.56642708,7.65636194 4.72694109,7.72172793 4.89431042,7.72172793 C5.06167975,7.72172793 5.22219375,7.65636194 5.34053975,7.54001031 L7.86710475,5.0561065 C8.1106958,4.81336543 8.1093598,4.42285249 7.86411337,4.1817278 C7.61886694,3.94060311 7.22164702,3.93925847 6.9747174,4.17871708 L6.9747174,4.17871708 Z" id="路径" fill="#fff" fill-rule="nonzero"></path></g></g></g></svg>'},6862:e=>{e.exports='<svg viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 16</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="-58.4437809%" id="linearGradient-脚本"><stop stop-color="#50A6C5" offset="0%"></stop><stop stop-color="#63C0E2" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="删除表记录" transform="translate(-247.000000, -265.000000)"><g id="编组-16" transform="translate(247.000000, 265.000000)"><rect id="矩形" fill="url(#linearGradient-脚本)" fill-rule="nonzero" transform="translate(15.000000, 15.000000) scale(-1, 1) translate(-15.000000, -15.000000) " x="0" y="0" width="30" height="30" rx="4"></rect><polyline id="路径" stroke="#FFFFFF" stroke-width="1.5" points="10.0853155 20.3549669 3.81382086 16.3563605 10.0853155 12.3577541 10.0853155 12.3577541"></polyline><polyline id="路径" stroke="#FFFFFF" stroke-width="1.5" transform="translate(22.949568, 16.356360) scale(-1, 1) translate(-22.949568, -16.356360) " points="26.0853155 20.3549669 19.8138209 16.3563605 26.0853155 12.3577541 26.0853155 12.3577541"></polyline><path d="M17.5264101,12.3577541 L13.0552101,20.3549669" id="路径-40" stroke="#FFFFFF" stroke-width="1.5"></path></g></g></g></svg>'},6133:e=>{e.exports='<svg viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>1</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="设备部" transform="translate(-360.000000, -599.000000)" fill="#59B2D4" fill-rule="nonzero"><g id="1" transform="translate(360.000000, 599.000000)"><path d="M15.426,4.49999999 C16.848,4.49999999 18,5.65199999 18,7.074 L18,10.476 C18,11.898 16.848,13.05 15.426,13.05 L9.00000001,13.05 C9.00000001,13.401 9.28799999,13.914 9.63899999,13.914 L13.5,13.914 L13.5,15.426 C13.5,16.848 12.348,18 10.926,18 L7.07399999,18 C5.652,18 4.50000001,16.848 4.50000001,15.426 L4.50000001,12.051 C4.50000001,10.629 5.652,9.48599999 7.07399999,9.48599999 L11.799,9.48599999 C13.221,9.48599999 14.364,8.334 14.364,6.912 L14.364,4.49999999 L15.426,4.49999999 M11.574,15.111 C11.214,15.111 10.926,15.381 10.926,15.912 C10.926,16.443 11.214,16.551 11.574,16.551 C11.925,16.551 12.213,16.263 12.213,15.912 C12.213,15.381 11.925,15.111 11.574,15.111 M2.57400001,13.5 C1.15200001,13.5 0,12.348 0,10.926 L0,7.524 C0,6.102 1.15200001,4.94999999 2.57400001,4.94999999 L9,4.94999999 C9,4.59899999 8.71200001,4.08599999 8.36100001,4.08599999 L4.5,4.08599999 L4.5,2.57399999 C4.5,1.15199999 5.652,0 7.07399999,0 L10.926,0 C12.348,0 13.5,1.15199999 13.5,2.57399999 L13.5,5.94899999 C13.5,7.371 12.348,8.51399999 10.926,8.51399999 L6.20100001,8.51399999 C4.779,8.51399999 3.63600001,9.666 3.63600001,11.088 L3.63600001,13.5 L2.57400001,13.5 M6.42599999,2.889 C6.786,2.889 7.07399999,2.619 7.07399999,2.08799999 C7.07399999,1.55699999 6.786,1.44899999 6.42599999,1.44899999 C6.075,1.44899999 5.787,1.55699999 5.787,2.08799999 C5.787,2.619 6.075,2.889 6.42599999,2.889 Z" id="形状"></path></g></g></g></svg>'},6043:e=>{e.exports='<svg viewBox="0 0 36 26" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 15</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="-3.89176883%" id="linearGradient-执行指令"><stop stop-color="#50A6C5" offset="0%"></stop><stop stop-color="#63C0E2" offset="100%"></stop></linearGradient><linearGradient x1="50%" y1="100%" x2="50%" y2="-3.89176883%" id="linearGradient-指令"><stop stop-color="#50A6C5" offset="0%"></stop><stop stop-color="#63C0E2" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-242.000000, -1660.000000)" fill-rule="nonzero"><g id="编组-15" transform="translate(242.000000, 1660.000000)"><path d="M20.0815414,0 L36,13 L20.0815414,26 L20.0815414,17.6123299 C12.0271805,17.6123299 8,17.6123299 8,17.6123299 C8,17.6123299 8,14.9750847 8,9.70059413 L20.0815414,9.70059413 L20.0815414,0 Z" id="矩形" fill="url(#linearGradient-执行指令)"></path><polygon id="矩形" fill="url(#linearGradient-指令)" points="4 9.75399942 7 9.75399942 7 17.620578 4 17.620578"></polygon><polygon id="矩形备份-30" fill="url(#linearGradient-指令)" points="0 9.75399942 3 9.75399942 3 17.620578 0 17.620578"></polygon></g></g></g></svg>'},9411:e=>{e.exports='<svg viewBox="0 0 34 34" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round"><g id="测试流程" transform="translate(-235.000000, -1744.000000)" stroke="#53AACA" stroke-width="2.5"><g id="编组-5" transform="translate(237.000000, 1746.000000)"><path d="M7.5,0 L1,0 C0.44771525,1.01453063e-16 -6.76353751e-17,0.44771525 0,1 L0,7.92654197 L0,7.92654197" id="路径-157"></path><path d="M30.5,0 L24,0 C23.4477153,1.01453063e-16 23,0.44771525 23,1 L23,7.92654197 L23,7.92654197" id="路径-157备份-2" transform="translate(26.750000, 3.963271) scale(-1, 1) translate(-26.750000, -3.963271) "></path><path d="M7.5,22 L1,22 C0.44771525,22 -6.76353751e-17,22.4477153 0,23 L0,29.926542 L0,29.926542" id="路径-157备份-3" transform="translate(3.750000, 25.963271) scale(1, -1) translate(-3.750000, -25.963271) "></path><path d="M30.5,22 L24,22 C23.4477153,22 23,22.4477153 23,23 L23,29.926542 L23,29.926542" id="路径-157备份" transform="translate(26.750000, 25.963271) rotate(-180.000000) translate(-26.750000, -25.963271) "></path><line x1="29.5" y1="1" x2="17.7291353" y2="12.5599953" id="路径-158"></line><line x1="12.5" y1="18" x2="0.729135308" y2="29.5599953" id="路径-158备份"></line></g></g></g></svg>'},1923:e=>{e.exports='<svg viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>chaosongwode-tianchong</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="0%" id="linearGradient-抄送"><stop stop-color="#EBBC09" offset="0%"></stop><stop stop-color="#FFEF26" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-147.000000, -1372.000000)" fill="url(#linearGradient-抄送)" fill-rule="nonzero"><g id="chaosongwode-tianchong" transform="translate(147.000000, 1372.000000)"><path d="M28.961279,0.0433227273 L0.522142112,9.86036766 C0.223897688,9.96395926 0.0182438232,10.2348973 0.00114923634,10.5467482 C-0.0159453505,10.858599 0.158888991,11.1498912 0.444065524,11.2846927 L12.0790386,16.7608885 L21.2244096,9.03353924 L13.3449204,18.1317371 L18.9461348,29.5643883 C19.0844679,29.8470727 19.382458,30.0187038 19.699629,29.9983728 C20.0168,29.9780418 20.2898386,29.769807 20.3900312,29.4718329 L29.9601388,1.01464045 C30.0539129,0.735673557 29.979255,0.428305839 29.7675499,0.22174901 C29.5548622,0.0153549111 29.2423299,-0.0538525931 28.961279,0.0433227273 Z" id="路径"></path></g></g></g></svg>'},9170:e=>{e.exports='<svg viewBox="0 0 23 29" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>ziyuan备份 6</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="0%" id="linearGradient-报警事件"><stop stop-color="#E26E6E" offset="0%"></stop><stop stop-color="#FC8787" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-51.000000, -1261.000000)" fill-rule="nonzero"><g id="ziyuan备份-6" transform="translate(51.000000, 1261.000000)"><path d="M7.94505697,5.70689951 C7.94505697,5.70689951 7.19765492,-0.0160220129 11.3798872,0.00807248421 C11.3798872,0.00807248421 15.0069587,-0.458717945 14.7354522,5.70689951 C14.7354522,5.70689951 18.470944,7.04751652 19.1494065,10.854766 L19.1494065,20.9101967 L3.07828821,20.9101967 L3.07828821,11.0703313 C3.07828821,11.0703313 3.53110271,6.47310406 7.94505697,5.70689951 Z M3.23681884,22.2280042 C3.23681884,22.2280042 0.769572052,22.2212578 0,25.0550903 L8.19378607,25.0550903 C8.19378607,25.0550903 8.51084733,28.999839 11.1153658,28.9943775 C11.1153658,28.9943775 14.1711803,29.3156373 14.374962,25.1013517 L23,25.1013517 C23,25.1013517 22.7284935,22.6597774 19.5378369,22.2280042 L3.23681884,22.2280042 Z" id="形状" fill="url(#linearGradient-报警事件)"></path><path d="M8.86639851,3.5 C8.86639851,4.88071187 9.98568664,6 11.3663985,6 C12.7471104,6 13.8663985,4.88071187 13.8663985,3.5 C13.8663985,2.11928813 12.7471104,1 11.3663985,1 C9.98568664,1 8.86639851,2.11928813 8.86639851,3.5 Z" id="路径" fill="#FFFFFF"></path></g></g></g></svg>'},5406:e=>{e.exports='<svg viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 38</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="0%" id="linearGradient-指令事件"><stop stop-color="#E26E6E" offset="0%"></stop><stop stop-color="#FC8787" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-247.000000, -265.000000)"><g id="编组-38" transform="translate(247.000000, 265.000000)"><circle id="椭圆形" fill="url(#linearGradient-指令事件)" fill-rule="nonzero" cx="15" cy="15" r="15"></circle><path d="M14,5.5 L14,26" id="路径-31" stroke="#FFFFFF" stroke-width="2"></path><polygon id="路径-33" fill="#FFFFFF" points="13 6.2955988 19.8361294 10.4906392 14.6463081 13.2220751 14.6463081 15.3768035 23.9036 10.4906392 13 4"></polygon></g></g></g></svg>'},4325:e=>{e.exports='<svg viewBox="0 0 32 28" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="-3.89176883%" id="linearGradient-数据接口"><stop stop-color="#50A6C5" offset="0%"></stop><stop stop-color="#63C0E2" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-328.000000, -1661.000000)" fill="url(#linearGradient-数据接口)" fill-rule="nonzero"><g id="shujujiekou" transform="translate(328.000000, 1661.000000)"><path d="M20.7442928,3.5 C21.2681978,3.5 21.6936721,3.92263131 21.6936721,4.44303553 L21.6936721,4.44303553 L21.6936721,9.96202369 C21.6936721,10.4824279 21.2681978,10.9050592 20.7442928,10.9050592 L20.7442928,10.9050592 L16.9499506,10.9050592 L16.9499506,14.847966 C21.3110604,15.1595288 25.1565864,17.5708599 27.3503605,21.1697587 C27.6949662,21.0592274 28.0626789,21 28.4444444,21 C30.4081236,21 32,22.5670034 32,24.5 C32,26.4329966 30.4081236,28 28.4444444,28 C26.4807653,28 24.8888889,26.4329966 24.8888889,24.5 C24.8888889,23.6205101 25.2184295,22.8167858 25.7625934,22.201949 C23.914315,19.123801 20.6594553,17.0430209 16.9467754,16.7340371 L16.9467754,16.7340371 L16.946222,21.1252982 C18.4505826,21.5331107 19.5555556,22.8895315 19.5555556,24.5 C19.5555556,26.4329966 17.9636791,28 16,28 L16.003,28 C14.1017769,28 12.5509827,26.5357224 12.4497055,24.6920352 L12.4444444,24.5 C12.4444444,22.8891695 13.5499142,21.5325009 15.0547925,21.1250234 L15.0543671,16.740345 C11.3430263,17.0492174 8.08917559,19.1286082 6.23910772,22.2047903 C6.78262701,22.8193648 7.11111111,23.621921 7.11111111,24.5 C7.11111111,26.3058081 5.72182922,27.7922022 3.93800095,27.9799893 C3.85213632,27.991661 3.76735128,27.9975952 3.68337782,27.9979736 L3.55555556,28 C1.59187645,28 0,26.4329966 0,24.5 C0,22.5670034 1.59187645,21 3.55555556,21 C3.93841813,21 4.30714696,21.0595682 4.65269923,21.1698032 C6.84645497,17.5716017 10.6936578,15.1626541 15.0543671,14.85112 L15.0543671,14.85112 L15.0543671,10.9050592 L11.260025,10.9050592 C10.73612,10.9050592 10.3106457,10.4824279 10.3106457,9.96202369 L10.3106457,9.96202369 L10.3106457,4.44303553 C10.3106457,3.92263131 10.73612,3.5 11.260025,3.5 L11.260025,3.5 Z M22.2220734,0 C23.6953699,0 24.8888889,1.34241989 24.8888889,2.99952176 L24.8888889,2.99952176 L24.8888889,11.0004782 C24.8888889,12.6575801 23.6953699,14 22.2220734,14 L22.2220734,14 L19.7040757,14 C19.2129769,14 18.8141451,13.5514108 18.8141451,12.9990435 C18.8141451,12.4466762 19.2129769,11.998087 19.7040757,11.998087 L19.7040757,11.998087 L22.2220734,11.998087 C22.7131722,11.998087 23.112004,11.5494978 23.112004,10.9971306 L23.112004,10.9971306 L23.112004,2.99952176 C23.112004,2.44715447 22.7131722,1.99856528 22.2220734,1.99856528 L22.2220734,1.99856528 L9.7779266,1.99856528 C9.28682776,1.99856528 8.88799598,2.44715447 8.88799598,2.99952176 L8.88799598,2.99952176 L8.88799598,10.9937829 C8.88799598,11.5461502 9.28682776,11.9947394 9.7779266,11.9947394 L9.7779266,11.9947394 L11.9298324,11.9947394 C12.4209312,11.9947394 12.819763,12.4433286 12.819763,12.9956958 C12.819763,13.5480631 12.4209312,13.9966523 11.9298324,13.9966523 L11.9298324,13.9966523 L9.7779266,13.9966523 C8.30760645,13.9966523 7.11111111,12.6542324 7.11111111,10.9971306 L7.11111111,10.9971306 L7.11111111,2.99952176 C7.11111111,1.34241989 8.30463009,0 9.7779266,0 L9.7779266,0 Z" id="形状结合"></path></g></g></g></svg>'},4333:e=>{e.exports='<svg viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>tongji</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="99.1868821%" x2="50%" y2="0%" id="linearGradient-统计节点"><stop stop-color="#71B032" offset="0%"></stop><stop stop-color="#84C940" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-46.000000, -1134.000000)" fill="url(#linearGradient-统计节点)" fill-rule="nonzero"><g id="tongji" transform="translate(46.000000, 1134.000000)"><path d="M29.88,13.2 L15.72,16.32 L27.96,22.44 C29.28,20.28 30,17.76 30,15 C30,14.4 30,13.8 29.88,13.2 Z M29.52,11.4 C28.08,5.4 23.04,0.84 16.8,0.12 L13.08,15 L29.52,11.4 Z M21.6,28.44 C23.76,27.36 25.68,25.8 27.12,23.76 L14.88,17.64 L21.6,28.44 Z M15,0 C6.72,0 0,6.72 0,15 C0,23.28 6.72,30 15,30 C16.8,30 18.48,29.64 20.04,29.16 L11.28,15 L15,0 Z" id="形状"></path></g></g></g></svg>'},4911:e=>{e.exports='<svg viewBox="0 0 24 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>bg-calculator</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="99.1868821%" x2="50%" y2="0%" id="linearGradient-calculate"><stop stop-color="#71B032" offset="0%"></stop><stop stop-color="#84C940" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-150.000000, -1134.000000)" fill-rule="nonzero"><g id="bg-calculator" transform="translate(150.000000, 1134.000000)"><path d="M22.7846411,0 L1.21535892,0 C0.544134724,0 0,0.582029821 0,1.29999999 L0,28.7 C0,29.4179702 0.544134724,30 1.21535892,30 L22.7846411,30 C23.4558653,30 24,29.4179702 24,28.7 L24,1.29999999 C24,0.582029821 23.4558653,0 22.7846411,0 Z M4.8881469,6.62857143 C4.8881469,5.91060126 5.43228163,5.32857144 6.10350583,5.32857144 L17.9232054,5.32857144 C18.5944296,5.32857144 19.1385643,5.91060126 19.1385643,6.62857143 L19.1385643,12.8571429 C19.1385643,13.575113 18.5944296,14.1571429 17.9232054,14.1571429 L6.10350583,14.1571429 C5.43228163,14.1571429 4.8881469,13.575113 4.8881469,12.8571429 L4.8881469,6.62857143 Z M9.02838064,21.5285714 L8.29382303,21.5285714 L8.29382303,22.3142857 C8.22871242,22.9759167 7.70711247,23.478196 7.0851419,23.478196 C6.46317133,23.478196 5.94157138,22.9759167 5.87646077,22.3142857 L5.87646077,21.5285714 L5.14190317,21.5285714 C4.67974597,21.5806073 4.23030466,21.3461961 3.98402501,20.9246669 C3.73774536,20.5031377 3.73774536,19.9682908 3.98402501,19.5467617 C4.23030466,19.1252325 4.67974597,18.8908213 5.14190317,18.9428571 L5.87646077,18.9428571 L5.87646077,18.1571429 C5.94157138,17.4955119 6.46317133,16.9932326 7.0851419,16.9932326 C7.70711247,16.9932326 8.22871242,17.4955119 8.29382303,18.1571429 L8.29382303,18.9428571 L9.02838064,18.9428571 C9.49053783,18.8908213 9.93997914,19.1252325 10.1862588,19.5467617 C10.4325384,19.9682908 10.4325384,20.5031377 10.1862588,20.9246669 C9.93997914,21.3461961 9.49053783,21.5806073 9.02838064,21.5285714 L9.02838064,21.5285714 Z M18.8447412,25.0428571 L14.9582638,25.0428571 C14.4961066,25.0948931 14.0466652,24.8604818 13.8003855,24.4389526 C13.5541058,24.0174235 13.5541058,23.4825765 13.8003855,23.0610473 C14.0466652,22.6395182 14.4961066,22.4051069 14.9582638,22.4571429 L18.8580968,22.4571429 C19.3202541,22.4051069 19.7696954,22.6395182 20.0159751,23.0610473 C20.2622548,23.4825765 20.2622548,24.0174235 20.0159751,24.4389526 C19.7696954,24.8604818 19.3202541,25.0948931 18.8580968,25.0428571 L18.8447412,25.0428571 Z M18.8447412,19.4571429 L14.9582638,19.4571429 C14.4961066,19.5091787 14.0466653,19.2747675 13.8003856,18.8532383 C13.554106,18.4317092 13.554106,17.8968623 13.8003856,17.4753331 C14.0466653,17.0538039 14.4961066,16.8193927 14.9582638,16.8714286 L18.8580968,16.8714286 C19.320254,16.8193927 19.7696953,17.0538039 20.015975,17.4753331 C20.2622546,17.8968623 20.2622546,18.4317092 20.015975,18.8532383 C19.7696953,19.2747675 19.320254,19.5091787 18.8580968,19.4571429 L18.8447412,19.4571429 Z" id="形状" fill="url(#linearGradient-calculate)"></path><polygon id="路径" fill="#81C53D" points="7.08999849 8.07692308 16.9081803 8.07692308 16.9081803 11.5384615 7.08999849 11.5384615"></polygon></g></g></g></svg>'},4381:e=>{e.exports='<svg viewBox="0 0 35 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 28</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="98.5705747%" x2="50%" y2="6.78490735%" id="linearGradient-新增变量"><stop stop-color="#55B0C0" offset="0%"></stop><stop stop-color="#71CFDF" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-45.000000, -831.000000)"><g id="编组-28" transform="translate(45.000000, 831.000000)"><g id="编组-20备份-2" transform="translate(21.000000, 22.000000)"><circle id="椭圆形" fill="url(#linearGradient-新增变量)" fill-rule="nonzero" cx="7" cy="7" r="7"></circle><path d="M3.73333333,7.23333333 L10.2362062,7.23333333" id="路径-44" stroke="#FFFFFF" stroke-linecap="round"></path><path d="M3.74856355,7.24856355 L10.2514364,7.24856355" id="路径-44" stroke="#FFFFFF" stroke-linecap="round" transform="translate(7.000000, 7.248564) rotate(-90.000000) translate(-7.000000, -7.248564) "></path></g><g id="编组-26" transform="translate(0.000000, 0.000000)"><path d="M30,20.3735982 C29.209578,20.1307225 28.3700549,20 27.5,20 C22.8055796,20 19,23.8055796 19,28.5 C19,29.0118259 19.0452378,29.513086 19.1319332,30 L2,30 C0.8954305,30 1.72441884e-13,29.1045695 1.72306613e-13,28 L1.72306613e-13,2 C1.72171343e-13,0.8954305 0.8954305,-1.57345071e-15 2,-1.77635684e-15 L28,-1.77635684e-15 C29.1045695,-1.97926296e-15 30,0.8954305 30,2 L30,20.3735982 Z" id="形状结合" fill="url(#linearGradient-新增变量)" fill-rule="nonzero"></path><path d="M6.5,5 L6.5,24.5369466" id="路径-29" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path><path d="M18.5,5 L18.5,24.5369466" id="路径-29备份" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path><path d="M12.5,9 L12.5,21.6001636" id="路径-29" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path><path d="M24.5,9 L24.5,17.749209" id="路径-29" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path></g></g></g></g></svg>'},9766:e=>{e.exports='<svg viewBox="0 0 31 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="0%" id="linearGradient-新增或更新1"><stop stop-color="#EF874C" offset="0%"></stop><stop stop-color="#FFB185" offset="100%"></stop></linearGradient><linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="linearGradient-新增或更新2"><stop stop-color="#F59762" offset="0%"></stop><stop stop-color="#EF884D" offset="100%"></stop></linearGradient></defs><g id="页面-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="暂无数据图表" transform="translate(-533.000000, -244.000000)"><g id="？" transform="translate(533.000000, 244.000000)"><g id="编组-8备份" fill="url(#linearGradient-新增或更新1)" fill-rule="nonzero"><path d="M28,0 C29.1045695,-2.02906125e-16 30,0.8954305 30,2 L30.0010774,16.5546613 C28.4013117,15.568763 26.5170767,15 24.5,15 C23.8880164,15 23.2882613,15.0523559 22.7049692,15.1528331 C22.5791768,15.0574251 22.4212946,15 22.25,15 L22.25,15 L6.75,15 C6.33578644,15 6,15.3357864 6,15.75 C6,16.1642136 6.33578644,16.5 6.75,16.5 L6.75,16.5 L19.088977,16.4997849 C17.0190704,17.7469101 15.4144751,19.6879064 14.5971994,22.0007655 L6.75,22 C6.33578644,22 6,22.3357864 6,22.75 C6,23.1642136 6.33578644,23.5 6.75,23.5 L6.75,23.5 L14.1902064,23.5002089 C14.0653716,24.1475987 14,24.8161652 14,25.5 C14,27.1106349 14.3626442,28.6365697 15.0107352,30.0006072 L2,30 C0.8954305,30 1.3527075e-16,29.1045695 0,28 L0,2 C-1.3527075e-16,0.8954305 0.8954305,2.02906125e-16 2,0 L28,0 Z M22.25,8 L6.75,8 C6.33578644,8 6,8.33578644 6,8.75 C6,9.16421356 6.33578644,9.5 6.75,9.5 L6.75,9.5 L22.25,9.5 C22.6642136,9.5 23,9.16421356 23,8.75 C23,8.33578644 22.6642136,8 22.25,8 L22.25,8 Z" id="形状结合"></path></g><g id="gengxin" transform="translate(17.000000, 18.000000)" fill="url(#linearGradient-新增或更新2)" fill-rule="nonzero"><path d="M12.3389,11.3435 C11.0117,12.999 9.06149999,14 6.94610001,14 C3.6022,14 0.73010001,11.5024 0,8.03879999 L1.38950001,7.7 C1.97330001,10.4685 4.27140001,12.467 6.94610001,12.467 C8.6863,12.467 10.2858,11.62 11.3491,10.2298 L9.8,8.4875 L14,8.4875 L14,13.2125 L12.3389,11.3435 Z M1.6611,2.6565 C2.9883,1.00100001 4.93850001,0 7.05389999,0 C10.3978,0 13.2699,2.4976 14,5.96120001 L12.6105,6.3 C12.0267,3.53149999 9.72859999,1.533 7.05389999,1.533 C5.3137,1.533 3.71419999,2.38 2.6509,3.7702 L4.2,5.5125 L0,5.5125 L0,0.787499999 L1.6611,2.6565 Z" id="形状"></path></g><line x1="21.7227004" y1="25" x2="26.1242006" y2="25" id="路径-31" stroke="#F18E55" stroke-linecap="round"></line><line x1="23.9234505" y1="27.2007501" x2="23.9234505" y2="22.7992499" id="路径-31" stroke="#F18E55" stroke-linecap="round"></line></g></g></g></svg>'},7189:e=>{e.exports='<svg viewBox="0 0 34 35" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 10</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="0%" id="linearGradient-新增记录"><stop stop-color="#EF874C" offset="0%"></stop><stop stop-color="#FFB185" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-43.000000, -621.000000)"><g id="编组-10" transform="translate(43.000000, 621.000000)"><g id="编组-8"><path d="M30,19.7517393 C28.9326322,19.2688344 27.7477109,19 26.5,19 C21.8055796,19 18,22.8055796 18,27.5 C18,28.3700549 18.1307225,29.209578 18.3735982,30 L2,30 C0.8954305,30 1.3527075e-16,29.1045695 0,28 L0,2 C-1.3527075e-16,0.8954305 0.8954305,2.02906125e-16 2,0 L28,0 C29.1045695,-2.02906125e-16 30,0.8954305 30,2 L30,19.7517393 Z" id="形状结合" fill="url(#linearGradient-新增记录)" fill-rule="nonzero"></path><path d="M7,8.5 L22.8032385,8.5" id="新增记录路径-43" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path><path d="M7,15.5 L22.8032385,15.5" id="新增记录路径-43" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path><path d="M7,22.5 L16.3139823,22.5" id="新增记录路径-43" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path></g><g id="编组-20" transform="translate(20.000000, 21.000000)"><circle id="椭圆形" fill="url(#linearGradient-新增记录)" fill-rule="nonzero" cx="7" cy="7" r="7"></circle><path d="M3.10893884,7 L10.9673638,7" id="新增记录路径-44" stroke="#FFFFFF" stroke-linecap="round"></path><path d="M3.04332586,7.10269852 L11.0329768,7.10269852" id="新增记录路径-44" stroke="#FFFFFF" stroke-linecap="round" transform="translate(7.038151, 7.102699) rotate(-90.000000) translate(-7.038151, -7.102699) "></path></g></g></g></g></svg>'},542:e=>{e.exports='<svg viewBox="0 0 35 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>更新变量</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="98.5705747%" x2="50%" y2="6.78490735%" id="linearGradient-更新变量"><stop stop-color="#55B0C0" offset="0%"></stop><stop stop-color="#71CFDF" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-45.000000, -831.000000)"><g id="编组-28" transform="translate(45.000000, 831.000000)"><g id="编组-26" transform="translate(0.000000, 0.000000)"><path d="M30,20.3735982 C29.209578,20.1307225 28.3700549,20 27.5,20 C22.8055796,20 19,23.8055796 19,28.5 C19,29.0118259 19.0452378,29.513086 19.1319332,30 L2,30 C0.8954305,30 1.72441884e-13,29.1045695 1.72306613e-13,28 L1.72306613e-13,2 C1.72171343e-13,0.8954305 0.8954305,-1.57345071e-15 2,-1.77635684e-15 L28,-1.77635684e-15 C29.1045695,-1.97926296e-15 30,0.8954305 30,2 L30,20.3735982 Z" id="形状结合" fill="url(#linearGradient-更新变量)" fill-rule="nonzero"></path><path d="M6.5,5 L6.5,24.5369466" id="路径-29" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path><path d="M18.5,5 L18.5,24.5369466" id="路径-29备份" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path><path d="M12.5,9 L12.5,21.6001636" id="路径-29" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path><path d="M24.5,9 L24.5,17.749209" id="路径-29" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path></g><g id="编组-20备份-2" transform="translate(21.000000, 22.000000)" fill="url(#linearGradient-更新变量)" fill-rule="nonzero"><path d="M13.410676,0.7375 L12.0740323,2.059375 L12.0345333,1.94375 C10.6568107,0.6609375 9.04525449,0 7.07978783,0 C5.11432118,0 3.42218711,0.6609375 2.04604446,2.021875 C0.66832186,3.3828125 0,5.0546875 0,6.9984375 C0,8.9421875 0.66832186,10.575 2.04446451,11.9375 C3.42060715,13.2984375 5.11116127,14 7.07820788,14 C9.04525449,14 10.6963097,13.2984375 12.0708724,11.9375 C12.8166121,11.2375 13.3300982,10.459375 13.6824286,9.565625 L10.3818982,8.3203125 C10.2239025,8.709375 9.91107099,9.0984375 9.59507956,9.4484375 C8.88725877,10.15 8.0609412,10.5 7.07978783,10.5 C6.09863447,10.5 5.27073694,10.15 4.56291615,9.45 C3.89459429,8.7890625 3.5406839,7.9734375 3.5406839,7 C3.5406839,6.0265625 3.89459429,5.2109375 4.56291615,4.5109375 C5.27073694,3.85 6.09705451,3.5 7.07978783,3.5 C8.02302223,3.5 8.8493398,3.8109375 9.51766166,4.4328125 L9.75307527,4.2375 L9.51766166,4.4328125 L9.59507956,4.509375 L8.25843584,5.83125 C8.14151902,5.9078125 8.14151902,5.9875 8.10044013,6.0640625 C8.0609412,6.18125 8.0609412,6.2203125 8.10044013,6.259375 C8.13993906,6.3359375 8.17785803,6.375 8.25843584,6.375 L13.5275928,6.4140625 C13.5670918,6.4140625 13.6460896,6.375 13.7250875,6.375 C13.8025054,6.2984375 13.8435842,6.21875 13.9225821,6.1421875 C13.962081,6.065625 14,5.9859375 14,5.946875 L13.9225821,0.7359375 L13.9225821,0.696875 C13.9225821,0.6203125 13.8830832,0.6203125 13.8451642,0.58125 C13.8451642,0.58125 13.8056653,0.58125 13.8056653,0.5421875 C13.7661663,0.5421875 13.7282474,0.58125 13.6476696,0.58125 C13.5670918,0.621875 13.448595,0.6609375 13.410676,0.7375 Z" id="路径"></path></g></g></g></g></svg>'},7499:e=>{e.exports='<svg viewBox="0 0 30 26" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>gengxin备份 3</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="0%" id="linearGradient-更新属性"><stop stop-color="#B45FB3" offset="0%"></stop><stop stop-color="#D67CD5" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-46.000000, -946.000000)" fill="url(#linearGradient-更新属性)" fill-rule="nonzero"><g id="gengxin备份-3" transform="translate(46.000000, 946.000000)"><path d="M30,9.63192327 L20.5279018,0.0247713415 L20.5279018,5.99466463 L11.3671875,8.46354167 L11.2633929,11.060404 L20.6316964,12.3567708 L20.6316964,19.2349466 L30,9.63192327 Z M9.05357143,7.42314533 L9.15736607,13.2650534 L18.5256696,15.3417175 L18.5256696,17.6784807 L9.36830357,19.7551448 L9.36830357,25.9851372 L0,16.6380843 L9.05357143,7.42314533 Z" id="形状"></path></g></g></g></svg>'},197:e=>{e.exports='<svg viewBox="0 0 34 35" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 11</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="0%" id="linearGradient-更新记录"><stop stop-color="#EF874C" offset="0%"></stop><stop stop-color="#FFB185" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-145.000000, -621.000000)"><g id="编组-11" transform="translate(145.000000, 621.000000)"><g id="编组-8备份" transform="translate(0.000000, -0.000000)"><path d="M30,19.7517393 C28.9326322,19.2688344 27.7477109,19 26.5,19 C21.8055796,19 18,22.8055796 18,27.5 C18,28.3700549 18.1307225,29.209578 18.3735982,30 L2,30 C0.8954305,30 1.3527075e-16,29.1045695 0,28 L0,2 C-1.3527075e-16,0.8954305 0.8954305,-5.30877991e-14 2,-5.32907052e-14 L28,-5.32907052e-14 C29.1045695,-5.34936113e-14 30,0.8954305 30,2 L30,19.7517393 Z" id="形状结合" fill="url(#linearGradient-更新记录)" fill-rule="nonzero"></path><path d="M7,8.5 L22.8032385,8.5" id="路径-43" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path><path d="M7,15.5 L22.8032385,15.5" id="路径-43" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path><path d="M7,22.5 L16.3139823,22.5" id="路径-43" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path></g><g id="gengxin备份-7" transform="translate(20.000000, 21.000000)" fill="url(#linearGradient-更新记录)" fill-rule="nonzero"><path d="M13.410676,0.7375 L12.0740323,2.059375 L12.0345333,1.94375 C10.6568107,0.6609375 9.04525449,0 7.07978783,0 C5.11432118,0 3.42218711,0.6609375 2.04604446,2.021875 C0.66832186,3.3828125 0,5.0546875 0,6.9984375 C0,8.9421875 0.66832186,10.575 2.04446451,11.9375 C3.42060715,13.2984375 5.11116127,14 7.07820788,14 C9.04525449,14 10.6963097,13.2984375 12.0708724,11.9375 C12.8166121,11.2375 13.3300982,10.459375 13.6824286,9.565625 L10.3818982,8.3203125 C10.2239025,8.709375 9.91107099,9.0984375 9.59507956,9.4484375 C8.88725877,10.15 8.0609412,10.5 7.07978783,10.5 C6.09863447,10.5 5.27073694,10.15 4.56291615,9.45 C3.89459429,8.7890625 3.5406839,7.9734375 3.5406839,7 C3.5406839,6.0265625 3.89459429,5.2109375 4.56291615,4.5109375 C5.27073694,3.85 6.09705451,3.5 7.07978783,3.5 C8.02302223,3.5 8.8493398,3.8109375 9.51766166,4.4328125 L9.75307527,4.2375 L9.51766166,4.4328125 L9.59507956,4.509375 L8.25843584,5.83125 C8.14151902,5.9078125 8.14151902,5.9875 8.10044013,6.0640625 C8.0609412,6.18125 8.0609412,6.2203125 8.10044013,6.259375 C8.13993906,6.3359375 8.17785803,6.375 8.25843584,6.375 L13.5275928,6.4140625 C13.5670918,6.4140625 13.6460896,6.375 13.7250875,6.375 C13.8025054,6.2984375 13.8435842,6.21875 13.9225821,6.1421875 C13.962081,6.065625 14,5.9859375 14,5.946875 L13.9225821,0.7359375 L13.9225821,0.696875 C13.9225821,0.6203125 13.8830832,0.6203125 13.8451642,0.58125 C13.8451642,0.58125 13.8056653,0.58125 13.8056653,0.5421875 C13.7661663,0.5421875 13.7282474,0.58125 13.6476696,0.58125 C13.5670918,0.621875 13.448595,0.6609375 13.410676,0.7375 Z" id="路径"></path></g></g></g></g></svg>'},9634:e=>{e.exports='<svg viewBox="0 0 27 29" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 18</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="0%" id="linearGradient-模型事件"><stop stop-color="#E26E6E" offset="0%"></stop><stop stop-color="#FC8787" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-149.000000, -378.000000)" fill="url(#linearGradient-模型事件)" fill-rule="nonzero"><g id="编组-18" transform="translate(149.000000, 378.000000)"><path d="M2,0 L10,0 C11.1045695,-2.02906125e-16 12,0.8954305 12,2 L12,11 C12,12.1045695 11.1045695,13 10,13 L2,13 C0.8954305,13 1.3527075e-16,12.1045695 0,11 L0,2 C-1.3527075e-16,0.8954305 0.8954305,2.02906125e-16 2,0 Z M17,0 L25,0 C26.1045695,-2.02906125e-16 27,0.8954305 27,2 L27,11 C27,12.1045695 26.1045695,13 25,13 L17,13 C15.8954305,13 15,12.1045695 15,11 L15,2 C15,0.8954305 15.8954305,2.02906125e-16 17,0 Z M2,16 L10,16 C11.1045695,16 12,16.8954305 12,18 L12,27 C12,28.1045695 11.1045695,29 10,29 L2,29 C0.8954305,29 1.3527075e-16,28.1045695 0,27 L0,18 C-1.3527075e-16,16.8954305 0.8954305,16 2,16 Z M17,16 L25,16 C26.1045695,16 27,16.8954305 27,18 L27,27 C27,28.1045695 26.1045695,29 25,29 L17,29 C15.8954305,29 15,28.1045695 15,27 L15,18 C15,16.8954305 15.8954305,16 17,16 Z" id="形状结合"></path></g></g></g></svg>'},1231:e=>{e.exports='<svg viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>流程管理</title><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="自定义数据与流程首页" transform="translate(-22.500000, -156.000000)"><g id="流程管理" transform="translate(23.000000, 158.000000)"><circle id="椭圆形" fill="#9299B9" cx="7.5" cy="2.5" r="2.5"></circle><circle id="椭圆形" fill="#9299B9" cx="12.5" cy="10.5" r="2.5"></circle><circle id="椭圆形" stroke="#9299B9" stroke-width="0.5" cx="7.5" cy="7.5" r="5.5"></circle><circle id="椭圆形" fill="#9299B9" cx="2.5" cy="10.5" r="2.5"></circle></g></g></g></svg>'},8656:e=>{e.exports='<svg viewBox="0 0 23 29" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>ziyuan备份 6</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="0%" id="linearGradient-warningNode"><stop stop-color="#842FAD" offset="0%"></stop><stop stop-color="#AD53D8" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-51.000000, -1261.000000)" fill-rule="nonzero"><g id="ziyuan备份-6" transform="translate(51.000000, 1261.000000)"><path d="M7.94505697,5.70689951 C7.94505697,5.70689951 7.19765492,-0.0160220129 11.3798872,0.00807248421 C11.3798872,0.00807248421 15.0069587,-0.458717945 14.7354522,5.70689951 C14.7354522,5.70689951 18.470944,7.04751652 19.1494065,10.854766 L19.1494065,20.9101967 L3.07828821,20.9101967 L3.07828821,11.0703313 C3.07828821,11.0703313 3.53110271,6.47310406 7.94505697,5.70689951 Z M3.23681884,22.2280042 C3.23681884,22.2280042 0.769572052,22.2212578 0,25.0550903 L8.19378607,25.0550903 C8.19378607,25.0550903 8.51084733,28.999839 11.1153658,28.9943775 C11.1153658,28.9943775 14.1711803,29.3156373 14.374962,25.1013517 L23,25.1013517 C23,25.1013517 22.7284935,22.6597774 19.5378369,22.2280042 L3.23681884,22.2280042 Z" id="形状" fill="url(#linearGradient-warningNode)"></path><path d="M8.86639851,3.5 C8.86639851,4.88071187 9.98568664,6 11.3663985,6 C12.7471104,6 13.8663985,4.88071187 13.8663985,3.5 C13.8663985,2.11928813 12.7471104,1 11.3663985,1 C9.98568664,1 8.86639851,2.11928813 8.86639851,3.5 Z" id="路径" fill="#FFFFFF"></path></g></g></g></svg>'},2828:e=>{e.exports='<svg viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>denglu</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="-32.6669258%" id="linearGradient-用户登录"><stop stop-color="#87AAFF" offset="0%"></stop><stop stop-color="#78F8DB" offset="100%"></stop></linearGradient><linearGradient x1="50%" y1="100%" x2="50%" y2="4.45633742%" id="linearGradient-2"><stop stop-color="#5480F8" offset="0%"></stop><stop stop-color="#93AEF7" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-247.000000, -154.000000)" fill="url(#linearGradient-2)" fill-rule="nonzero"><g id="denglu" transform="translate(247.000000, 154.000000)"><path d="M18.4123272,16.4714648 L11.5872381,16.4714648 C5.19910286,16.4714648 0,20.9552344 0,26.4701953 L0,27.0581836 C0,30 5.11392594,30 11.5872381,30 L18.4123272,30 C24.6301086,30 29.9986623,30 30,27.0582129 L30,26.4687305 C30,20.9563477 24.800429,16.4699707 18.4123272,16.4699707 L18.4123272,16.4714648 Z M14.6586235,0 C9.58563062,0 5.45971681,3.56150391 5.45971681,7.94003906 C5.45971681,12.3185742 9.58389163,15.8808691 14.6586235,15.8808691 C19.7333553,15.8808691 23.8575301,12.3186035 23.8575301,7.94003906 C23.8575301,3.56147461 19.7312485,0 14.6586569,0 L14.6586235,0 Z" id="形状"></path></g></g></g></svg>'},6285:e=>{e.exports='<svg viewBox="0 0 34 34" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 2</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="页面为空" transform="translate(-230.000000, -262.000000)"><g id="编组-2" transform="translate(230.000000, 262.000000)"><text id="AI" font-family="Arial-Black, Arial Black" font-size="16" font-weight="700" fill="#53AACA"><tspan x="8" y="23">AI</tspan></text><path d="M20.6188136,3 L30,3 C30.5522847,3 31,3.44771525 31,4 C31,8.37596581 31,11.6579402 31,13.8459231 M31,20.4429822 C31,22.2575927 31,25.4432653 31,30 C31,30.5522847 30.5522847,31 30,31 C25.5052024,31 22.3559713,31 20.5523067,31 M13.6353888,31 C11.4941913,31 8.282395,31 4,31 C3.44771525,31 3,30.5522847 3,30 C3,25.3205688 3,22.0462721 3,20.1771098 M3,13.2358121 C3,11.1834094 3,8.10480537 3,4 C3,3.44771525 3.44771525,3 4,3 L13.7151987,3" id="形状" stroke="#53AACA" stroke-width="2"></path><circle id="椭圆形" fill="#53AACA" cx="3" cy="3" r="3"></circle><circle id="椭圆形备份-2" fill="#53AACA" cx="3" cy="31" r="3"></circle><circle id="椭圆形备份" fill="#53AACA" cx="31" cy="3" r="3"></circle><circle id="椭圆形备份-3" fill="#53AACA" cx="31" cy="31" r="3"></circle></g></g></g></svg>'},1088:e=>{e.exports='<svg t="1630029493130" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2125" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><style type="text/css"></style></defs><path d="M814.56 128c77.472 0 141.568 57.536 145.28 130.88L960 265.6v126.848a32 32 0 0 1-63.776 3.744L896 392.448V265.6c0-38.496-33.152-70.912-76.032-73.44L814.528 192H209.472c-43.648 0-78.56 30.848-81.28 68.8L128 265.6v492.8c0 38.496 33.152 70.912 76.032 73.44l5.44 0.16h207.872a32 32 0 0 1 3.744 63.776l-3.744 0.224H209.44c-77.472 0-141.568-57.536-145.28-130.88L64 758.4V265.6c0-74.272 61.824-133.984 138.464-137.44L209.44 128h605.12z" fill="#000000" p-id="2126"></path><path d="M896 320a32 32 0 0 1 3.744 63.776L896 384H128a32 32 0 0 1-3.744-63.776L128 320h768zM384 496a32 32 0 0 1 3.744 63.776L384 560H256a32 32 0 0 1-3.744-63.776L256 496h128zM922.944 489.536a112 112 0 0 1 4.224 153.92l-4.224 4.48-79.2 79.168a32 32 0 0 1-47.744-42.464l2.464-2.784 79.2-79.2a48 48 0 0 0-64.448-70.976l-3.424 3.104-79.2 79.2a32 32 0 0 1-47.744-42.464l2.496-2.784 79.2-79.2a112 112 0 0 1 158.4 0zM549.92 862.56a112 112 0 0 1-4.224-153.92l4.224-4.48 79.2-79.2a32 32 0 0 1 47.712 42.464l-2.464 2.784-79.2 79.2a48 48 0 0 0 64.448 71.008l3.424-3.136 79.2-79.168a32 32 0 0 1 47.744 42.464l-2.496 2.784-79.2 79.2a112 112 0 0 1-158.4 0z" fill="#000000" p-id="2127"></path><path d="M780.576 585.152a32 32 0 0 1 48.352 41.728l-2.624 3.04-139.2 142.144a32 32 0 0 1-48.32-41.728l2.624-3.072 139.168-142.112z" fill="#000000" p-id="2128"></path></svg>'},3392:e=>{e.exports='<svg viewBox="0 0 34 37" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 23</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="0%" id="linearGradient-表事件"><stop stop-color="#7682F2" offset="0%"></stop><stop stop-color="#9DA7FF" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-47.000000, -458.000000)"><g id="编组-23" transform="translate(47.000000, 458.000000)"><g id="编组-19"><path d="M30,21.3323798 C29.2034281,21.1156663 28.3652217,21 27.5,21 C22.4210121,21 18.2729385,24.9857176 18.0129321,30 L2,30 C0.8954305,30 1.3527075e-16,29.1045695 0,28 L0,2 C-1.3527075e-16,0.8954305 0.8954305,2.02906125e-16 2,0 L28,0 C29.1045695,-2.02906125e-16 30,0.8954305 30,2 L30,21.3323798 Z" id="形状结合" fill="url(#linearGradient-表事件)" fill-rule="nonzero"></path><path d="M7,8.5 L22.8032385,8.5" id="路径-43" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path><path d="M7,15.5 L22.8032385,15.5" id="路径-43" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path><path d="M7,22.5 L18,22.5" id="路径-43" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path></g><g id="编组-22备份" transform="translate(20.000000, 23.000000)"><circle id="椭圆形" fill="url(#linearGradient-表事件)" fill-rule="nonzero" cx="7" cy="7" r="7"></circle><polyline id="路径-28" stroke="#FFFFFF" points="7.25191115 2.69354624 4.23267996 7.35898016 9.90978338 7.35898016 6.42984203 12.0619292"></polyline></g></g></g></g></svg>'},5478:e=>{e.exports='<svg viewBox="0 0 34 35" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 13</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="0%" id="linearGradient-表查询"><stop stop-color="#EF874C" offset="0%"></stop><stop stop-color="#FFB185" offset="100%"></stop></linearGradient><linearGradient x1="50%" y1="0%" x2="50%" y2="98.5501676%" id="linearGradient-查询"><stop stop-color="#FFB083" offset="0%"></stop><stop stop-color="#F0884E" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-43.000000, -702.000000)"><g id="编组-13" transform="translate(43.000000, 702.000000)"><g id="编组-8备份-3" transform="translate(0.000000, -0.000000)"><path d="M30,19.7517393 C28.9326322,19.2688344 27.7477109,19 26.5,19 C21.8055796,19 18,22.8055796 18,27.5 C18,28.3700549 18.1307225,29.209578 18.3735982,30 L2,30 C0.8954305,30 1.3527075e-16,29.1045695 0,28 L0,2 C-1.3527075e-16,0.8954305 0.8954305,-5.30877991e-14 2,-5.32907052e-14 L28,-5.32907052e-14 C29.1045695,-5.34936113e-14 30,0.8954305 30,2 L30,19.7517393 Z" id="形状结合" fill="url(#linearGradient-表查询)" fill-rule="nonzero"></path><path d="M7,8.5 L22.8032385,8.5" id="路径-43" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path><path d="M7,15.5 L22.8032385,15.5" id="路径-43" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path><path d="M7,22.5 L16.3139823,22.5" id="路径-43" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round"></path></g><path d="M29.1989001,30.4431066 L33,33.895923 L29.1989001,30.4431066 C28.4160347,31.1026135 27.4050886,31.5 26.3013278,31.5 C23.8160465,31.5 21.8013278,29.4852814 21.8013278,27 C21.8013278,24.5147186 23.8160465,22.5 26.3013278,22.5 C28.7866092,22.5 30.8013278,24.5147186 30.8013278,27 C30.8013278,28.3815206 30.1787724,29.6176357 29.1989001,30.4431066 Z" id="形状结合" stroke="url(#linearGradient-查询)" stroke-width="3"></path></g></g></g></svg>'},4345:e=>{e.exports='<svg viewBox="0 0 32 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 25</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="0%" id="linearGradient-计划事件"><stop stop-color="#7682F2" offset="0%"></stop><stop stop-color="#9DA7FF" offset="100%"></stop></linearGradient><linearGradient x1="50%" y1="100%" x2="50%" y2="0%" id="linearGradient-2"><stop stop-color="#7682F2" offset="0%"></stop><stop stop-color="#9DA7FF" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-49.000000, -376.000000)"><g id="编组-25" transform="translate(49.000000, 376.000000)"><g id="编组-24"><g id="编组-7"><path d="M26,20.0549288 C25.6716661,20.0186333 25.3380091,20 25,20 C20.0294373,20 16,24.0294373 16,29 C16,29.687388 16.0770614,30.3567773 16.2230164,31 L2,31 C0.8954305,31 1.3527075e-16,30.1045695 0,29 L0,3 C-1.3527075e-16,1.8954305 0.8954305,1 2,1 L6.16514285,1 L6.16514285,5.04468982 L20.7559757,5.04468982 L20.7559757,1 L24,1 C25.1045695,1 26,1.8954305 26,3 L26,20.0549288 Z M9,0 L18,0 C18.5522847,-1.01453063e-16 19,0.44771525 19,1 L19,3 C19,3.55228475 18.5522847,4 18,4 L9,4 C8.44771525,4 8,3.55228475 8,3 L8,1 C8,0.44771525 8.44771525,1.01453063e-16 9,0 Z" id="形状结合" fill="url(#linearGradient-计划事件)" fill-rule="nonzero"></path><circle id="椭圆形" fill="#FFFFFF" cx="5" cy="13" r="1"></circle><circle id="椭圆形备份-3" fill="#FFFFFF" cx="5" cy="19" r="1"></circle><circle id="椭圆形备份-4" fill="#FFFFFF" cx="5" cy="25" r="1"></circle><polygon id="矩形" fill="#FFFFFF" points="8 12 22 12 22 14 8 14"></polygon><polygon id="矩形备份-45" fill="#FFFFFF" points="8 18 22 18 22 20 8 20"></polygon><polygon id="矩形备份-58" fill="#FFFFFF" points="8 24 16 24 16 26 8 26"></polygon></g></g><g id="编组-22" transform="translate(18.000000, 22.000000)"><circle id="椭圆形" fill="url(#linearGradient-2)" fill-rule="nonzero" cx="7" cy="7" r="7"></circle><polyline id="路径-28" stroke="#FFFFFF" points="7.25191115 2.69354624 4.23267996 7.35898016 9.90978338 7.35898016 6.42984203 12.0619292"></polyline></g></g></g></g></svg>'},4418:e=>{e.exports='<svg viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>moxing1备份</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="0%" id="linearGradient-资产数据事件"><stop stop-color="#7682F2" offset="0%"></stop><stop stop-color="#9DA7FF" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-247.000000, -378.000000)" fill="url(#linearGradient-资产数据事件)" fill-rule="nonzero"><g id="moxing1备份" transform="translate(247.000000, 378.000000)"><path d="M0.71071604,6.20911865 L15.0592405,0.0225958369 L29.3169545,6.20911865 L15.0138353,12.3577541 L0.71071604,6.20911865 Z M29.9362123,7.67015232 L29.9362123,23.6176634 L15.8907088,29.9966679 L15.8907088,14.0029573 L29.9362123,7.67015232 Z M0.0382894611,7.67015232 L0.0382894611,23.6176634 L14.0739108,29.9966679 L14.0739108,14.0029573 L0.0382894611,7.67015232 Z" id="形状"></path></g></g></g></svg>'},6380:e=>{e.exports='<svg viewBox="0 0 27 29" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 18</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="0%" id="linearGradient-模型数据事件"><stop stop-color="#7682F2" offset="0%"></stop><stop stop-color="#9DA7FF" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-149.000000, -378.000000)" fill="url(#linearGradient-模型数据事件)" fill-rule="nonzero"><g id="编组-18" transform="translate(149.000000, 378.000000)"><path d="M2,0 L10,0 C11.1045695,-2.02906125e-16 12,0.8954305 12,2 L12,11 C12,12.1045695 11.1045695,13 10,13 L2,13 C0.8954305,13 1.3527075e-16,12.1045695 0,11 L0,2 C-1.3527075e-16,0.8954305 0.8954305,2.02906125e-16 2,0 Z M17,0 L25,0 C26.1045695,-2.02906125e-16 27,0.8954305 27,2 L27,11 C27,12.1045695 26.1045695,13 25,13 L17,13 C15.8954305,13 15,12.1045695 15,11 L15,2 C15,0.8954305 15.8954305,2.02906125e-16 17,0 Z M2,16 L10,16 C11.1045695,16 12,16.8954305 12,18 L12,27 C12,28.1045695 11.1045695,29 10,29 L2,29 C0.8954305,29 1.3527075e-16,28.1045695 0,27 L0,18 C-1.3527075e-16,16.8954305 0.8954305,16 2,16 Z M17,16 L25,16 C26.1045695,16 27,16.8954305 27,18 L27,27 C27,28.1045695 26.1045695,29 25,29 L17,29 C15.8954305,29 15,28.1045695 15,27 L15,18 C15,16.8954305 15.8954305,16 17,16 Z" id="形状结合"></path></g></g></g></svg>'},187:e=>{e.exports='<svg viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>moxing1备份</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="0%" id="linearGradient-资产事件"><stop stop-color="#E26E6E" offset="0%"></stop><stop stop-color="#FC8787" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-247.000000, -378.000000)" fill="url(#linearGradient-资产事件)" fill-rule="nonzero"><g id="moxing1备份" transform="translate(247.000000, 378.000000)"><path d="M0.71071604,6.20911865 L15.0592405,0.0225958369 L29.3169545,6.20911865 L15.0138353,12.3577541 L0.71071604,6.20911865 Z M29.9362123,7.67015232 L29.9362123,23.6176634 L15.8907088,29.9966679 L15.8907088,14.0029573 L29.9362123,7.67015232 Z M0.0382894611,7.67015232 L0.0382894611,23.6176634 L14.0739108,29.9966679 L14.0739108,14.0029573 L0.0382894611,7.67015232 Z" id="形状"></path></g></g></g></svg>'},2833:e=>{e.exports='<svg viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>moxing1</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="0%" id="linearGradient-资产或模型事件"><stop stop-color="#E26E6E" offset="0%"></stop><stop stop-color="#FC8787" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-147.000000, -265.000000)" fill="url(#linearGradient-资产或模型事件)" fill-rule="nonzero"><g id="moxing1" transform="translate(147.000000, 265.000000)"><path d="M0.71071604,6.20911865 L15.0592405,0.0225958369 L29.3169545,6.20911865 L15.0138353,12.3577541 L0.71071604,6.20911865 Z M29.9362123,7.67015232 L29.9362123,23.6176634 L15.8907088,29.9966679 L15.8907088,14.0029573 L29.9362123,7.67015232 Z M0.0382894611,7.67015232 L0.0382894611,23.6176634 L14.0739108,29.9966679 L14.0739108,14.0029573 L0.0382894611,7.67015232 Z" id="形状"></path></g></g></g></svg>'},8322:e=>{e.exports='<svg viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>jiedian</title><desc>Created with Sketch.</desc><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-21.000000, -76.000000)" fill="#4F71FF"><g id="jiedian" transform="translate(21.000000, 76.000000)"><path d="M13.7895633,11.63828 C12.8420991,11.63828 12.0340784,12.2421096 11.7314031,13.0845354 L3.80957597,13.0845354 C2.54942045,13.0845354 1.52386168,12.1061035 1.5238617,10.9037534 C1.5238617,9.70062264 2.54942046,8.72297152 3.80957597,8.72297152 L5.94426566,8.72297152 C6.24960141,9.56024436 7.05511812,10.1597018 7.99898274,10.1597018 C8.94237786,10.1597018 9.74805107,9.56008822 10.0536998,8.72297152 L12.1905805,8.72297152 C14.2909962,8.72312767 16,7.09261609 16,5.08843909 C16,3.08426209 14.2909962,1.45375052 12.190424,1.45375052 L4.25091211,1.45375052 C3.95027142,0.607421 3.13990316,0 2.19009147,0 C0.984398688,0 0.00438206646,0.977651125 0.00438206646,2.18062577 C0.00438206646,3.38297581 0.984398688,4.36140769 2.19009147,4.36140769 C3.13974667,4.36140769 3.94995844,3.75367439 4.25075562,2.90765717 L12.190424,2.90765717 C13.4505796,2.90765717 14.4761383,3.88608905 14.4761383,5.08843909 C14.4761383,6.29156989 13.4505796,7.26922102 12.190424,7.26922102 L10.065907,7.26922102 C9.77011788,6.41399098 8.95521104,5.79829408 7.99913925,5.79829406 C7.04244145,5.79829406 6.22800412,6.41383483 5.93237151,7.26922102 L3.80957597,7.26922102 C1.70900376,7.26922102 0,8.89973259 0,10.9039096 C0,12.9080866 1.70900377,14.5385982 3.80957597,14.5385982 L11.7262386,14.5385982 C12.0246882,15.3885191 12.8366215,16 13.7895633,16 C14.99463,16 15.9752727,15.0215681 15.9752727,13.8192181 C15.9754292,12.6160873 14.99463,11.63828 13.7895633,11.63828 Z M2.18899595,3.23494622 C1.60696436,3.23494622 1.13385827,2.76259442 1.13385827,2.18218727 C1.13385827,1.60146781 1.60696434,1.1294283 2.18899595,1.1294283 C2.77071453,1.1294283 3.24413361,1.6014678 3.24413361,2.18218727 C3.24413361,2.76259442 2.77071453,3.23494622 2.18899595,3.23494622 L2.18899595,3.23494622 Z M7.99898274,6.92647317 C8.58070132,6.92647317 9.05412042,7.39851267 9.05412042,7.97923214 C9.05412042,8.5596393 8.58070134,9.03199109 7.99898274,9.03199109 C7.41695115,9.03199109 6.94384506,8.5596393 6.94384506,7.97923214 C6.94400157,7.39835653 7.41695113,6.92647317 7.99898274,6.92647317 L7.99898274,6.92647317 Z M13.7895633,14.8718209 C13.2075317,14.8718209 12.7344256,14.3994691 12.7344256,13.8190619 C12.7344256,13.2383425 13.2075317,12.766303 13.7895633,12.766303 C14.3712818,12.766303 14.8447009,13.2383425 14.8447009,13.8190619 C14.8447009,14.3994691 14.3712819,14.8718209 13.7895633,14.8718209 Z" id="形状"></path></g></g></g></svg>'},1160:e=>{e.exports='<svg viewBox="0 0 30 29" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="-3.89176883%" id="linearGradient-迭代"><stop stop-color="#50A6C5" offset="0%"></stop><stop stop-color="#63C0E2" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-369.000000, -1660.000000)" fill="url(#linearGradient-迭代)" fill-rule="nonzero"><path d="M396.243511,1664 C397.789492,1664.03134 399.020661,1665.32755 398.999737,1666.90182 L398.999737,1682.17455 C398.97981,1683.71912 397.76032,1684.96924 396.243511,1685 L392.345,1684.99921 L394.149837,1686.73396 C394.343781,1686.90889 394.453798,1687.15313 394.453798,1687.40876 C394.453798,1687.66438 394.343781,1687.90862 394.149837,1688.08356 C393.964643,1688.26519 393.712275,1688.36914 393.447701,1688.37276 C393.17661,1688.37212 392.916863,1688.2681 392.725505,1688.08356 L389.295072,1684.78667 C389.105181,1684.60567 388.998371,1684.35927 388.998371,1684.10223 C388.998371,1683.97371 389.025073,1683.84786 389.075512,1683.7315 C389.20921,1683.35474 389.555503,1683.09091 389.962316,1683.09091 L396.243511,1683.09091 C396.49215,1683.09091 396.730604,1682.99034 396.906418,1682.81133 C397.082232,1682.63232 397.181003,1682.38952 397.181003,1682.13636 L397.181003,1666.86364 C397.181003,1666.61048 397.082232,1666.36768 396.906418,1666.18867 C396.730604,1666.00966 396.49215,1665.90909 396.243511,1665.90909 L385.312357,1665.90909 C384.794595,1665.90909 384.374865,1665.48173 384.374865,1664.95455 C384.38484,1664.43163 384.798783,1664.01016 385.312357,1664 L396.243511,1664 Z M375.838283,1660.63121 C376.110711,1660.63121 376.371421,1660.7377 376.560479,1660.92621 L379.970851,1664.2231 C380.160741,1664.4041 380.267552,1664.6505 380.267552,1664.90754 C380.267552,1665.16458 380.160741,1665.41097 379.970851,1665.59198 C379.800724,1665.76123 379.56818,1665.85803 379.324876,1665.86251 C379.232373,1665.89233 379.133689,1665.90909 379.031162,1665.90909 L371.812475,1665.90909 C371.294713,1665.90909 370.874984,1666.33646 370.874984,1666.86364 L370.874984,1682.13636 C370.874984,1682.66354 371.294713,1683.09091 371.812475,1683.09091 L383.999869,1683.09091 C384.513442,1683.10107 384.927385,1683.52254 384.93736,1684.04545 C384.93736,1684.57264 384.517631,1685 383.999869,1685 L371.812475,1685 C370.259188,1685 369,1683.71791 369,1682.13636 L369,1666.86364 C369,1665.28209 370.259188,1664 371.812475,1664 L376.91,1663.99921 L375.116086,1662.27582 C374.733781,1661.90097 374.733781,1661.30106 375.116086,1660.92621 C375.305144,1660.7377 375.565854,1660.63121 375.838283,1660.63121 Z M391,1670 C391.552285,1670 392,1670.44772 392,1671 L392,1678 C392,1678.55228 391.552285,1679 391,1679 L377,1679 C376.447715,1679 376,1678.55228 376,1678 L376,1671 C376,1670.44772 376.447715,1670 377,1670 L391,1670 Z" id="形状结合"></path></g></g></svg>'},4914:e=>{e.exports='<svg viewBox="0 0 16 15" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>tongzhi</title><desc>Created with Sketch.</desc><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="画板" transform="translate(-15.000000, -12.000000)" fill="#4F71FF" fill-rule="nonzero"><g id="tongzhi" transform="translate(23.000000, 19.500000) scale(1, -1) translate(-23.000000, -19.500000) translate(15.000000, 12.000000)"><path d="M8.46056727,0.0905056666 L4.2499291,4.18190241 L1.50326493,4.18190241 C0.676464431,4.18190241 0,4.87103638 0,5.71332206 L0,9.28664543 C0,10.1289311 0.676480394,10.8180651 1.50326493,10.8180651 L4.24994505,10.8180651 L8.46056727,14.9094943 C8.66369006,15.1068657 9,14.9601982 9,14.6742251 L9,0.325774918 C9,0.0398017771 8.66370601,-0.106865686 8.46056727,0.0905056666 Z" id="路径"></path><path d="M14.1519109,3.18562193 C13.8724911,2.9222384 13.4373739,2.9415235 13.1810016,3.22832823 C12.9241869,3.51535154 12.9429755,3.96151465 13.2226082,4.22489818 C14.1141046,5.06463178 14.6255061,6.25845774 14.6255061,7.49981548 C14.6255061,8.74117322 14.1141046,9.9347638 13.2226082,10.7747328 C12.9429755,11.0383349 12.9243999,11.4847334 13.1810016,11.7717567 C13.3165672,11.9233136 13.5015858,12 13.6874889,12 C13.8534896,12 14.0199326,11.9384626 14.1519109,11.814463 C15.326398,10.7076637 16,9.13519767 16,7.49981548 C16,5.86419791 15.3263981,4.29171505 14.1519109,3.18562193 Z" id="路径"></path><path d="M12.1137542,4.25313732 C11.8861137,3.94901644 11.4868567,3.91437173 11.2213087,4.17392227 C10.9557608,4.43395616 10.9248527,4.89131128 11.1520859,5.1951905 C11.527434,5.69709869 11.734273,6.33786194 11.734273,6.99985738 C11.734273,7.66185283 11.527434,8.30308214 11.1520859,8.80474868 C10.9248527,9.10886956 10.9557608,9.56574135 11.2213087,9.8260169 C11.3405971,9.94294928 11.4870678,10 11.6327089,10 C11.8111135,10 11.9884924,9.91419089 12.1137392,9.74680185 C12.6852162,8.98249488 13,8.00697082 13,6.9998574 C13,5.9927267 12.6852313,5.01744429 12.1137542,4.25313732 Z" id="路径"></path></g></g></g></svg>'},8210:e=>{e.exports='<svg viewBox="0 0 30 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>luoji</title><desc>Created with Sketch.</desc><defs><linearGradient x1="50%" y1="100%" x2="50%" y2="-3.89176883%" id="linearGradient-逻辑处理"><stop stop-color="#50A6C5" offset="0%"></stop><stop stop-color="#63C0E2" offset="100%"></stop></linearGradient><linearGradient x1="50%" y1="100%" x2="50%" y2="-3.89176883%" id="linearGradient-逻辑"><stop stop-color="#50A6C5" offset="0%"></stop><stop stop-color="#63C0E2" offset="100%"></stop></linearGradient></defs><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-47.000000, -1739.000000)" fill-rule="nonzero"><g id="luoji" transform="translate(47.000000, 1739.000000)"><path d="M29.8523045,23.6072762 L21.3011119,17.3135411 L21.3011119,21.245065 L19.1457755,21.245065 L15.4022965,16.1942519 L12.6409583,19.9213695 L16.4784721,25.1007607 C16.8840461,25.649866 17.492147,25.9677935 18.1337823,25.9661905 L21.3011119,25.9661905 L21.3011119,29.9010113 L29.8523045,23.6072762 Z M5.31072496,3.93317232 L2.14190283,3.93317232 C1.37821781,3.93317232 0.672507406,4.38297874 0.290640373,5.11337793 C-0.0912266605,5.84377712 -0.0912266605,6.7436931 0.290640373,7.47409229 C0.672507406,8.20449148 1.37821781,8.65439169 2.14190283,8.65429788 L4.29425401,8.65429788 L8.03773298,13.7067594 L10.7990711,9.97799334 L6.96155739,4.79860213 C6.55577158,4.2525377 5.95036246,3.93515898 5.31072496,3.93317232 L5.31072496,3.93317232 Z" id="形状" fill="url(#linearGradient-逻辑处理)"></path><path d="M29.8523045,6.2937351 L21.3011119,0 L21.3011119,3.9315239 L18.1337823,3.9315239 C17.4924335,3.93133313 16.8848536,4.24898827 16.4784721,4.79695369 L4.29574663,21.2401197 L2.13891763,21.2401197 C1.3752326,21.2400259 0.669522199,21.6899261 0.287655166,22.4203253 C-0.0942118673,23.1507244 -0.0942118673,24.0506404 0.287655166,24.7810396 C0.669522199,25.5114388 1.3752326,25.9612452 2.13891763,25.9612452 L5.30773972,25.9612452 C5.94975448,25.960558 6.55792605,25.643166 6.96603524,25.0958154 L19.1457755,8.64770412 L21.3011119,8.64770412 L21.3011119,12.5825249 L29.8523045,6.2937351 Z" id="路径" fill="url(#linearGradient-逻辑)"></path></g></g></g></svg>'},7253:e=>{e.exports='<svg viewBox="0 0 17 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="自定义数据与流程首页" transform="translate(-20.000000, -77.000000)" fill="none"><path d="M30.6583426,78.055878 L36.2298921,83.4623409 C36.6262443,83.8469491 36.6357647,84.4800425 36.2511566,84.8763946 C36.0628299,85.0704719 35.8039285,85.18 35.5334975,85.18 L34.5589703,85.18 L34.5589703,85.18 L34.5589703,91 C34.5589703,92.1045695 33.6635398,93 32.5589703,93 L30.2984761,93 L30.2984761,93 L30.2984761,88.3389712 C30.2984761,87.7866865 29.8507609,87.3389712 29.2984761,87.3389712 L28.0293974,87.3389712 C27.4771126,87.3389712 27.0293974,87.7866865 27.0293974,88.3389712 L27.0293974,93 L27.0293974,93 L24.5831955,93 C23.478626,93 22.5831955,92.1045695 22.5831955,91 L22.5831955,85.52 L22.5831955,85.52 L21.4177448,85.52 C20.86546,85.52 20.4177448,85.0722847 20.4177448,84.52 C20.4177448,84.2544255 20.5233854,83.9997586 20.7113688,83.8121632 L26.4500308,78.0853447 C27.6095089,76.9282596 29.482775,76.9151429 30.6583426,78.055878 Z" id="路径-22"></path></g></g></svg>'},4997:e=>{e.exports='<svg viewBox="0 0 32 34" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><linearGradient x1="86.7775662%" y1="91.7555951%" x2="14.0452829%" y2="8.31185571%" id="linearGradient-驱动事件"><stop stop-color="#E26E6E" offset="0%"></stop><stop stop-color="#FC8787" offset="100%"></stop></linearGradient><path d="M14.3228572,6.31087278e-06 C15.0308172,-0.00201544164 15.6477091,0.481925088 15.8142857,1.17001143 L15.8142857,1.17001143 L18,11.571429 L18,16.444281 C17.9929401,17.305553 17.2927304,17.9999937 16.4314286,17.9999937 L16.4314286,17.9999937 L1.56857143,17.9999937 C0.702273352,17.9999937 0,17.2977211 0,16.4314239 L0,16.4314239 L0,11.571429 L2.18571428,1.17001143 C2.4051542,0.485122027 3.03525865,0.0151265857 3.75428572,6.31087278e-06 L3.75428572,6.31087278e-06 Z M14.0914286,14.0657121 C13.6582795,14.0657121 13.3071428,14.4168484 13.3071428,14.849997 L13.3071428,14.849997 L13.3071428,15.6342819 C13.3071428,16.0674305 13.6582795,16.4185668 14.0914286,16.4185668 C14.5245776,16.4185668 14.8757143,16.0674305 14.8757143,15.6342819 L14.8757143,15.6342819 L14.8757143,14.849997 C14.8757143,14.4168484 14.5245776,14.0657121 14.0914286,14.0657121 Z M14.2457143,1.56858244 L3.75428572,1.56858244 L1.8,12.2399998 L16.2,12.2399998 L14.2457143,1.56858244 Z M13.25,9 C13.7045454,9 13.9524793,9.13774105 13.9938017,9.41322314 L14,9.5 C14,9.83333332 13.75,10 13.25,10 L4.75000001,10 C4.29545456,10 4.04752066,9.86225895 4.00619835,9.58677686 L4,9.5 C4,9.16666666 4.25,9 4.75000001,9 L13.25,9 Z M12.2,4 C12.6848485,4 12.9493113,4.13774105 12.9933884,4.41322314 L13,4.5 C13,4.83333332 12.7333333,5 12.2,5 L5.8,5 C5.31515151,5 5.05068871,4.86225895 5.00661157,4.58677686 L5,4.5 C5,4.16666666 5.26666667,4 5.8,4 L12.2,4 Z" id="path-2"></path><filter x="-58.3%" y="-41.7%" width="216.7%" height="216.7%" filterUnits="objectBoundingBox" id="filter-3"><feOffset dx="0" dy="3" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset><feGaussianBlur stdDeviation="3" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur><feColorMatrix values="0 0 0 0 0.21684124 0 0 0 0 0.325918763 0 0 0 0 0.804181749 0 0 0 1 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix></filter></defs><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="1" transform="translate(-146.000000, -466.000000)"><g id="驱动事件" transform="translate(146.000000, 466.000000)"><rect id="矩形备份-62" fill="url(#linearGradient-驱动事件)" x="0" y="0" width="32" height="32" rx="7"></rect><g id="驱动管理备份" transform="translate(7.000000, 7.000000)" fill-rule="nonzero"><g id="形状结合"><use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-2"></use><use fill="#FFFFFF" xlink:href="#path-2"></use></g></g></g></g></g></svg>'},9872:e=>{e.exports='<svg viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>shoucang</title><desc>Created with Sketch.</desc><g id="页面1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="启动系统" transform="translate(-517.000000, -1253.000000)" fill="#4F71FF" fill-rule="nonzero"><g id="shoucang" transform="translate(517.000000, 1253.000000)"><path d="M12.2216576,10.2398915 C12.4022685,11.1327739 12.5616311,11.9408889 12.6997453,12.6642367 C12.7634903,12.969399 12.8219232,13.2745613 12.8750441,13.5797237 C12.9281649,13.884886 12.9786298,14.1617926 13.0264385,14.4104434 C13.0742473,14.6590941 13.1140879,14.8710124 13.1459604,15.0461982 C13.1778329,15.221384 13.1990813,15.3315815 13.2097054,15.3767907 C13.2415779,15.6028369 13.1937692,15.7525925 13.0662791,15.8260575 C12.9387891,15.8995225 12.7953628,15.936255 12.6360002,15.936255 C12.5828794,15.936255 12.5058542,15.9164759 12.4049245,15.8769179 C12.3039949,15.8373598 12.2269697,15.8062784 12.1738488,15.7836738 L8.0144863,13.2067475 C7.26017022,13.6814444 6.57491126,14.105281 5.95870941,14.4782572 C5.69310516,14.6364895 5.43015695,14.7947218 5.16986478,14.9529542 C4.90957261,15.1111865 4.67318483,15.2581165 4.46070144,15.3937442 C4.24821804,15.5293719 4.06495111,15.642395 3.91090064,15.7328134 C3.75685017,15.8232319 3.65326452,15.8797434 3.60014367,15.9023481 C3.49390197,15.9588596 3.38500423,15.9786386 3.27345044,15.9616852 C3.16189665,15.9447317 3.06096703,15.902348 2.97066159,15.8345342 C2.88035616,15.7667204 2.81395509,15.6847786 2.77145841,15.588709 C2.72896172,15.4926394 2.71833755,15.3937442 2.73958589,15.2920234 C2.75021006,15.2468142 2.77677048,15.1366167 2.81926717,14.9614309 C2.86176386,14.7862451 2.90957262,14.5771524 2.96269347,14.3341527 C3.01581431,14.0911531 3.07690329,13.8227233 3.14596041,13.5288633 C3.21501752,13.2350032 3.28673067,12.9354921 3.36109984,12.6303297 C3.5204624,11.9295866 3.70107329,11.138425 3.90293252,10.2568449 C3.27610648,9.68042722 2.71302547,9.16617218 2.21368948,8.71407984 C2.00120609,8.5219406 1.79137873,8.33262693 1.58420741,8.14613883 C1.37703608,7.95965073 1.19111311,7.7901161 1.02643848,7.63753494 C0.861763859,7.48495378 0.726305693,7.36062839 0.620063984,7.26455876 C0.513822276,7.16848913 0.455389339,7.11480317 0.444765172,7.10350086 C0.31727513,6.97917547 0.208377385,6.84072219 0.118071937,6.68814102 C0.0277664896,6.53555986 -0.0067620625,6.38015312 0.0144862812,6.22192079 C0.035734625,6.06368847 0.0941675625,5.93936308 0.189785094,5.84894461 C0.285402625,5.75852615 0.391644323,5.70201461 0.508510187,5.67940999 L5.43281297,5.20471303 L7.2654823,0.661185023 C7.32922732,0.480348088 7.41953276,0.324941345 7.53639862,0.194964794 C7.65326449,0.0649882425 7.81262704,-3.32446793e-08 8.01448628,-3.32446793e-08 C8.12072798,-3.32446793e-08 8.21368947,0.0254301585 8.29337075,0.0762905419 C8.37305203,0.127150925 8.43945309,0.186488043 8.49257394,0.254301895 C8.54569478,0.322115747 8.59084751,0.389929599 8.62803211,0.457743451 C8.66521671,0.525557303 8.69443318,0.582068844 8.71568152,0.627278075 L10.5005421,5.17080608 L15.4248449,5.6624565 C15.6373283,5.71896805 15.7860666,5.7867819 15.87106,5.86589806 C15.9560534,5.94501421 15.99855,6.06933961 15.99855,6.23887424 C15.99855,6.39710655 15.9533973,6.53555983 15.8630919,6.65423408 C15.7727864,6.77290832 15.6585766,6.91701275 15.5204624,7.08654737 L12.2216576,10.2398915 Z" id="路径"></path></g></g></g></svg>'},6334:e=>{e.exports=function(){var e,t,n,r=(t=[Object,Function,Array,String,Boolean,Number,Date,RegExp,Error],n=t.length,function(e){for(var r=0;r<n;r++)if(t[r]===e)return!0;return!1}),o=(e={}.toString,function(t){var n=e.call(t).slice(8,-1);if(null==t)return n.toLowerCase();var o=i(t);return o&&!r(o)?o.name:n});function i(e){return null==e?e:e.constructor}function l(e,t){return(i(t)===String?o:i)(e)===t}function a(e,t){return e instanceof t}function u(e,t){if(!l(t,Array))throw"Second argument to .any() should be array";for(var n=0;n<t.length;n++)if(l(e,t[n]))return!0;return!1}var c=function(e,t){return 1==arguments.length?i(e):l(t,Array)?u(e,t):l(e,t)};return c.instance=a,c.string=o,c.of=i,c.is=l,c.any=u,c.extension=function(e,t){return a(e.prototype,t)},c}()},7147:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DOMException:()=>_,Headers:()=>s,Request:()=>g,Response:()=>b,fetch:()=>E});var r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r&&r,o={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};if(o.arrayBuffer)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(e){return e&&i.indexOf(Object.prototype.toString.call(e))>-1};function a(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function u(e){return"string"!=typeof e&&(e=String(e)),e}function c(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return o.iterable&&(t[Symbol.iterator]=function(){return t}),t}function s(e){this.map={},e instanceof s?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function d(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function p(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function f(e){var t=new FileReader,n=p(t);return t.readAsArrayBuffer(e),n}function m(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:o.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:o.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o.arrayBuffer&&o.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=m(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||l(e))?this._bodyArrayBuffer=m(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o.blob&&(this.blob=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(f)}),this.text=function(){var e,t,n,r=d(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,n=p(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}s.prototype.append=function(e,t){e=a(e),t=u(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},s.prototype.delete=function(e){delete this.map[a(e)]},s.prototype.get=function(e){return e=a(e),this.has(e)?this.map[e]:null},s.prototype.has=function(e){return this.map.hasOwnProperty(a(e))},s.prototype.set=function(e,t){this.map[a(e)]=u(t)},s.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},s.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),c(e)},s.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),c(e)},s.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),c(e)},o.iterable&&(s.prototype[Symbol.iterator]=s.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function g(e,t){if(!(this instanceof g))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r,o=(t=t||{}).body;if(e instanceof g){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new s(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new s(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),y.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var i=/([?&])_=[^&]*/;i.test(this.url)?this.url=this.url.replace(i,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function h(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function b(e,t){if(!(this instanceof b))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new s(t.headers),this.url=t.url||"",this._initBody(e)}g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},v.call(g.prototype),v.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},b.error=function(){var e=new b(null,{status:0,statusText:""});return e.type="error",e};var w=[301,302,303,307,308];b.redirect=function(e,t){if(-1===w.indexOf(t))throw new RangeError("Invalid status code");return new b(null,{status:t,headers:{location:e}})};var _=r.DOMException;try{new _}catch(e){(_=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),_.prototype.constructor=_}function E(e,t){return new Promise((function(n,i){var l=new g(e,t);if(l.signal&&l.signal.aborted)return i(new _("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new s,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}})),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;setTimeout((function(){n(new b(o,r))}),0)},a.onerror=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},a.ontimeout=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},a.onabort=function(){setTimeout((function(){i(new _("Aborted","AbortError"))}),0)},a.open(l.method,function(e){try{return""===e&&r.location.href?r.location.href:e}catch(t){return e}}(l.url),!0),"include"===l.credentials?a.withCredentials=!0:"omit"===l.credentials&&(a.withCredentials=!1),"responseType"in a&&(o.blob?a.responseType="blob":o.arrayBuffer&&l.headers.get("Content-Type")&&-1!==l.headers.get("Content-Type").indexOf("application/octet-stream")&&(a.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof s?l.headers.forEach((function(e,t){a.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){a.setRequestHeader(e,u(t.headers[e]))})),l.signal&&(l.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&l.signal.removeEventListener("abort",c)}),a.send(void 0===l._bodyInit?null:l._bodyInit)}))}E.polyfill=!0,r.fetch||(r.fetch=E,r.Headers=s,r.Request=g,r.Response=b)},1128:(e,t,n)=>{var r={"./全部流程.svg":7182,"./全部流程选中.svg":7611,"./启动系统.svg":6876,"./回收站.svg":1528,"./报警事件.svg":206,"./指令事件.svg":3478,"./用户登录.svg":9829,"./表事件.svg":6309,"./计划事件.svg":5079,"./设备数据事件.svg":9887,"./设备表数据事件.svg":1641,"./驱动事件.svg":2274};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=1128},8074:(e,t,n)=>{var r={"./addTitleIcon.svg":2291,"./addUpdateTitleIcon.svg":5962,"./copyCard.svg":4721,"./db网关.svg":4207,"./deleteCard.svg":1944,"./driverEventTitleIcon.svg":5789,"./extTitleIcon.svg":7620,"./historyTitleIcon.svg":7073,"./http网关.svg":6080,"./listTypes/全部流程.svg":7182,"./listTypes/全部流程选中.svg":7611,"./listTypes/启动系统.svg":6876,"./listTypes/回收站.svg":1528,"./listTypes/报警事件.svg":206,"./listTypes/指令事件.svg":3478,"./listTypes/用户登录.svg":9829,"./listTypes/表事件.svg":6309,"./listTypes/计划事件.svg":5079,"./listTypes/设备数据事件.svg":9887,"./listTypes/设备表数据事件.svg":1641,"./listTypes/驱动事件.svg":2274,"./mqtt网关.svg":3058,"./node.svg":424,"./opcda网关.svg":3526,"./opcua网关.svg":9147,"./planTitleIcon.svg":8327,"./prevTitleIcon.svg":9816,"./subTitleIcon.svg":2694,"./test.svg":898,"./updateTitleIcon.svg":6703,"./webhook.svg":5318,"./人工.svg":9527,"./任务管理.svg":8114,"./任务管理新.svg":4878,"./关闭系统.svg":2604,"./写入数据点值.svg":4397,"./分支节点.svg":2212,"./删除变量.svg":8649,"./删除属性值.svg":2536,"./删除记录.svg":2829,"./前项数据.svg":5048,"./历史数据.svg":8308,"./发送企业微信.svg":9208,"./发送微信.svg":8776,"./发送短信.svg":9738,"./发送站内信.svg":8904,"./发送邮件.svg":3450,"./发送钉钉.svg":5678,"./启动系统.svg":876,"./垃圾桶.svg":9060,"./填写.svg":8007,"./处理.svg":5218,"./实时数据.svg":8542,"./审批.svg":3939,"./延时.svg":9543,"./我的任务.svg":7770,"./我的任务Page.svg":1471,"./执行Node脚本.svg":6862,"./执行Python脚本.svg":6133,"./执行指令.svg":6043,"./扩展.svg":9411,"./抄送.svg":1923,"./报警事件.svg":9170,"./指令事件.svg":5406,"./数据接口.svg":4325,"./数据统计.svg":4333,"./数据计算.svg":4911,"./新增变量.svg":4381,"./新增或更新记录.svg":9766,"./新增记录.svg":7189,"./更新变量.svg":542,"./更新属性值.svg":7499,"./更新记录.svg":197,"./模型事件.svg":9634,"./流程管理.svg":1231,"./生成报警.svg":8656,"./用户登录.svg":2828,"./算法.svg":6285,"./绑定.svg":1088,"./表事件.svg":3392,"./表查询.svg":5478,"./计划事件.svg":4345,"./设备数据事件.svg":4418,"./设备表数据事件.svg":6380,"./资产事件.svg":187,"./资产或模型事件.svg":2833,"./起始.svg":8322,"./迭代.svg":1160,"./通知.svg":4914,"./逻辑处理.svg":8210,"./首页.svg":7253,"./驱动事件.svg":4997,"./高级.svg":9872};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=8074},7363:e=>{"use strict";e.exports=React},2611:e=>{"use strict";e.exports=_},1821:e=>{"use strict";e.exports=antd},6640:e=>{"use strict";e.exports=icons},3078:e=>{"use strict";e.exports=xadmin},5907:e=>{"use strict";e.exports=xadminUi},7061:(e,t,n)=>{var r=n(8698).default;function o(){"use strict";e.exports=o=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,i=n.hasOwnProperty,l=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var o=t&&t.prototype instanceof v?t:v,i=Object.create(o.prototype),a=new A(r||[]);return l(i,"_invoke",{value:O(e,n,a)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var m={};function v(){}function y(){}function g(){}var h={};d(h,u,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(j([])));w&&w!==n&&i.call(w,u)&&(h=w);var _=g.prototype=v.prototype=Object.create(h);function E(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(o,l,a,u){var c=f(e[o],e,l);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==r(d)&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}var o;l(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}})}function O(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var l=n.delegate;if(l){var a=x(l,n);if(a){if(a===m)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=f(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,m;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function j(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:D}}function D(){return{value:void 0,done:!0}}return y.prototype=g,l(_,"constructor",{value:g,configurable:!0}),l(g,"constructor",{value:y,configurable:!0}),y.displayName=d(g,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,d(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},E(C.prototype),d(C.prototype,c,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var l=new C(p(e,n,r,o),i);return t.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},E(_),d(_,s,"Generator"),d(_,u,(function(){return this})),d(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=j,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return l.type="throw",l.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],l=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var a=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var l=o?o.completion:{};return l.type=e,l.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),m}},t}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},8698:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4687:(e,t,n)=>{var r=n(7061)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},907:(e,t,n)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:()=>r})},4942:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(9142);function o(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},885:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(181);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,l,a=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||(0,r.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2982:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(907),o=n(181);function i(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,o.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9142:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(1002);function o(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==(0,r.Z)(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===(0,r.Z)(t)?t:String(t)}},1002:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:()=>r})},181:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(907);function o(e,t){if(e){if("string"==typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},__webpack_module_cache__={},leafPrototypes,getProto,inProgress,dataWebpackPrefix;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=Object.create(null);__webpack_require__.r(n);var r={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var o=2&t&&e;"object"==typeof o&&!~leafPrototypes.indexOf(o);o=getProto(o))Object.getOwnPropertyNames(o).forEach((t=>r[t]=()=>e[t]));return r.default=()=>e,__webpack_require__.d(n,r),n},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,n)=>(__webpack_require__.f[n](e,t),t)),[])),__webpack_require__.u=e=>"chunks/"+e+"."+{67:"665326b41926614ba543",120:"3f0b1605b8beb7bdf46b",350:"9a57d3cba80efdf871c5"}[e]+".js",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),inProgress={},dataWebpackPrefix="@airiot/flow:",__webpack_require__.l=(e,t,n,r)=>{if(inProgress[e])inProgress[e].push(t);else{var o,i;if(void 0!==n)for(var l=document.getElementsByTagName("script"),a=0;a<l.length;a++){var u=l[a];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==dataWebpackPrefix+n){o=u;break}}o||(i=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,__webpack_require__.nc&&o.setAttribute("nonce",__webpack_require__.nc),o.setAttribute("data-webpack",dataWebpackPrefix+n),o.src=e),inProgress[e]=[t];var c=(t,n)=>{o.onerror=o.onload=null,clearTimeout(s);var r=inProgress[e];if(delete inProgress[e],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((e=>e(n))),t)return t(n)},s=setTimeout(c.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=c.bind(null,o.onerror),o.onload=c.bind(null,o.onload),i&&document.head.appendChild(o)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var t=__webpack_require__.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&!e;)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e})(),(()=>{var e={826:0};__webpack_require__.f.j=(t,n)=>{var r=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise(((n,o)=>r=e[t]=[n,o]));n.push(r[2]=o);var i=__webpack_require__.p+__webpack_require__.u(t),l=new Error;__webpack_require__.l(i,(n=>{if(__webpack_require__.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",l.name="ChunkLoadError",l.type=o,l.request=i,r[1](l)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,o,[i,l,a]=n,u=0;if(i.some((t=>0!==e[t]))){for(r in l)__webpack_require__.o(l,r)&&(__webpack_require__.m[r]=l[r]);a&&a(__webpack_require__)}for(t&&t(n);u<i.length;u++)o=i[u],__webpack_require__.o(e,o)&&e[o]&&e[o][0](),e[o]=0},n=this.webpackChunk_airiot_flow=this.webpackChunk_airiot_flow||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),__webpack_require__.nc=void 0;var __webpack_exports__={};(()=>{"use strict";var e=__webpack_require__(4942),t=__webpack_require__(3078),n=__webpack_require__.n(t);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}var o=__webpack_require__(885),i=__webpack_require__(7363),l=__webpack_require__.n(i),a=__webpack_require__(1821);const u=ReactDOM;var c=__webpack_require__.n(u);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function p(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,r=0;r<e.length;r++)""!==(n=p(e[r]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}function f(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var m="function"==typeof Symbol&&Symbol.observable||"@@observable",v=function(){return Math.random().toString(36).substring(7).split("").join(".")},y={INIT:"@@redux/INIT"+v(),REPLACE:"@@redux/REPLACE"+v(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+v()}};function g(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(f(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(f(1));return n(g)(e,t)}if("function"!=typeof e)throw new Error(f(2));var o=e,i=t,l=[],a=l,u=!1;function c(){a===l&&(a=l.slice())}function s(){if(u)throw new Error(f(3));return i}function d(e){if("function"!=typeof e)throw new Error(f(4));if(u)throw new Error(f(5));var t=!0;return c(),a.push(e),function(){if(t){if(u)throw new Error(f(6));t=!1,c();var n=a.indexOf(e);a.splice(n,1),l=null}}}function p(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(f(7));if(void 0===e.type)throw new Error(f(8));if(u)throw new Error(f(9));try{u=!0,i=o(i,e)}finally{u=!1}for(var t=l=a,n=0;n<t.length;n++)(0,t[n])();return e}return p({type:y.INIT}),(r={dispatch:p,subscribe:d,getState:s,replaceReducer:function(e){if("function"!=typeof e)throw new Error(f(10));o=e,p({type:y.REPLACE})}})[m]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(f(11));function n(){e.next&&e.next(s())}return n(),{unsubscribe:t(n)}}})[m]=function(){return this},e},r}function h(e,t){return function(){return t(e.apply(this,arguments))}}function b(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}var w={exports:{}},E={exports:{}},C={},O="function"==typeof Symbol&&Symbol.for,x=O?Symbol.for("react.element"):60103,k=O?Symbol.for("react.portal"):60106,S=O?Symbol.for("react.fragment"):60107,A=O?Symbol.for("react.strict_mode"):60108,j=O?Symbol.for("react.profiler"):60114,D=O?Symbol.for("react.provider"):60109,P=O?Symbol.for("react.context"):60110,T=O?Symbol.for("react.async_mode"):60111,F=O?Symbol.for("react.concurrent_mode"):60111,L=O?Symbol.for("react.forward_ref"):60112,B=O?Symbol.for("react.suspense"):60113,M=O?Symbol.for("react.suspense_list"):60120,N=O?Symbol.for("react.memo"):60115,I=O?Symbol.for("react.lazy"):60116,R=O?Symbol.for("react.block"):60121,Z=O?Symbol.for("react.fundamental"):60117,q=O?Symbol.for("react.responder"):60118,z=O?Symbol.for("react.scope"):60119;function U(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case x:switch(e=e.type){case T:case F:case S:case j:case A:case B:return e;default:switch(e=e&&e.$$typeof){case P:case L:case I:case N:case D:return e;default:return t}}case k:return t}}}function G(e){return U(e)===F}C.AsyncMode=T,C.ConcurrentMode=F,C.ContextConsumer=P,C.ContextProvider=D,C.Element=x,C.ForwardRef=L,C.Fragment=S,C.Lazy=I,C.Memo=N,C.Portal=k,C.Profiler=j,C.StrictMode=A,C.Suspense=B,C.isAsyncMode=function(e){return G(e)||U(e)===T},C.isConcurrentMode=G,C.isContextConsumer=function(e){return U(e)===P},C.isContextProvider=function(e){return U(e)===D},C.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===x},C.isForwardRef=function(e){return U(e)===L},C.isFragment=function(e){return U(e)===S},C.isLazy=function(e){return U(e)===I},C.isMemo=function(e){return U(e)===N},C.isPortal=function(e){return U(e)===k},C.isProfiler=function(e){return U(e)===j},C.isStrictMode=function(e){return U(e)===A},C.isSuspense=function(e){return U(e)===B},C.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===S||e===F||e===j||e===A||e===B||e===M||"object"==typeof e&&null!==e&&(e.$$typeof===I||e.$$typeof===N||e.$$typeof===D||e.$$typeof===P||e.$$typeof===L||e.$$typeof===Z||e.$$typeof===q||e.$$typeof===z||e.$$typeof===R)},C.typeOf=U,E.exports=C;Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map((function(e){return t[e]}));if("0123456789"!==r.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach((function(e){o[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}})()&&Object.assign;Function.call.bind(Object.prototype.hasOwnProperty),E.exports;function $(){}function Y(){}Y.resetWarningCache=$,w.exports=function(){function e(e,t,n,r,o,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Y,resetWarningCache:$};return n.PropTypes=n,n}(),w.exports;var H=l().createContext(null),V=function(e){e()},W=function(){return V},K={notify:function(){},get:function(){return[]}};function X(e,t){var n,r=K;function o(){l.onStateChange&&l.onStateChange()}function i(){n||(n=t?t.addNestedSub(o):e.subscribe(o),r=function(){var e=W(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,o=n={callback:e,next:null,prev:n};return o.prev?o.prev.next=o:t=o,function(){r&&null!==t&&(r=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}())}var l={addNestedSub:function(e){return i(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return Boolean(n)},trySubscribe:i,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=K)},getListeners:function(){return r}};return l}var J="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect;function Q(e){var t=e.store,n=e.context,r=e.children,o=(0,i.useMemo)((function(){var e=X(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),a=(0,i.useMemo)((function(){return t.getState()}),[t]);J((function(){var e=o.subscription;return e.trySubscribe(),a!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[o,a]);var u=n||H;return l().createElement(u.Provider,{value:o},r)}var ee=E.exports,te={};te[ee.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},te[ee.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var ne={},re=60103,oe=60106,ie=60107,le=60108,ae=60114,ue=60109,ce=60110,se=60112,de=60113,pe=60120,fe=60115,me=60116,ve=60121,ye=60122,ge=60117,he=60129,be=60131;if("function"==typeof Symbol&&Symbol.for){var we=Symbol.for;re=we("react.element"),oe=we("react.portal"),ie=we("react.fragment"),le=we("react.strict_mode"),ae=we("react.profiler"),ue=we("react.provider"),ce=we("react.context"),se=we("react.forward_ref"),de=we("react.suspense"),pe=we("react.suspense_list"),fe=we("react.memo"),me=we("react.lazy"),ve=we("react.block"),ye=we("react.server.block"),ge=we("react.fundamental"),he=we("react.debug_trace_mode"),be=we("react.legacy_hidden")}function _e(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case re:switch(e=e.type){case ie:case ae:case le:case de:case pe:return e;default:switch(e=e&&e.$$typeof){case ce:case se:case me:case fe:case ue:return e;default:return t}}case oe:return t}}}var Ee=ue,Ce=re,Oe=se,xe=ie,ke=me,Se=fe,Ae=oe,je=ae,De=le,Pe=de;function Te(){return(0,i.useContext)(H)}function Fe(e){void 0===e&&(e=H);var t=e===H?Te:function(){return(0,i.useContext)(e)};return function(){return t().store}}ne.ContextConsumer=ce,ne.ContextProvider=Ee,ne.Element=Ce,ne.ForwardRef=Oe,ne.Fragment=xe,ne.Lazy=ke,ne.Memo=Se,ne.Portal=Ae,ne.Profiler=je,ne.StrictMode=De,ne.Suspense=Pe,ne.isAsyncMode=function(){return!1},ne.isConcurrentMode=function(){return!1},ne.isContextConsumer=function(e){return _e(e)===ce},ne.isContextProvider=function(e){return _e(e)===ue},ne.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===re},ne.isForwardRef=function(e){return _e(e)===se},ne.isFragment=function(e){return _e(e)===ie},ne.isLazy=function(e){return _e(e)===me},ne.isMemo=function(e){return _e(e)===fe},ne.isPortal=function(e){return _e(e)===oe},ne.isProfiler=function(e){return _e(e)===ae},ne.isStrictMode=function(e){return _e(e)===le},ne.isSuspense=function(e){return _e(e)===de},ne.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===ie||e===ae||e===he||e===le||e===de||e===pe||e===be||"object"==typeof e&&null!==e&&(e.$$typeof===me||e.$$typeof===fe||e.$$typeof===ue||e.$$typeof===ce||e.$$typeof===se||e.$$typeof===ge||e.$$typeof===ve||e[0]===ye)},ne.typeOf=_e;var Le=Fe();function Be(e){void 0===e&&(e=H);var t=e===H?Le:Fe(e);return function(){return t().dispatch}}var Me=Be(),Ne=function(e,t){return e===t};function Ie(e){void 0===e&&(e=H);var t=e===H?Te:function(){return(0,i.useContext)(e)};return function(e,n){void 0===n&&(n=Ne);var r=t(),o=function(e,t,n,r){var o,l=(0,i.useReducer)((function(e){return e+1}),0)[1],a=(0,i.useMemo)((function(){return X(n,r)}),[n,r]),u=(0,i.useRef)(),c=(0,i.useRef)(),s=(0,i.useRef)(),d=(0,i.useRef)(),p=n.getState();try{if(e!==c.current||p!==s.current||u.current){var f=e(p);o=void 0!==d.current&&t(f,d.current)?d.current:f}else o=d.current}catch(e){throw u.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+u.current.stack+"\n\n"),e}return J((function(){c.current=e,s.current=p,d.current=o,u.current=void 0})),J((function(){function e(){try{var e=n.getState();if(e===s.current)return;var r=c.current(e);if(t(r,d.current))return;d.current=r,s.current=e}catch(e){u.current=e}l()}return a.onStateChange=e,a.trySubscribe(),e(),function(){return a.tryUnsubscribe()}}),[n,a]),o}(e,n,r.store,r.subscription);return(0,i.useDebugValue)(o),o}}var Re,Ze=Ie();function qe(e,t){return{type:e,payload:t}}Re=u.unstable_batchedUpdates,V=Re;var ze="SET_ON_CONNECT",Ue="SET_ON_CONNECT_START",Ge="SET_ON_CONNECT_STOP",$e="SET_ON_CONNECT_END",Ye="SET_ELEMENTS",He="UPDATE_NODE_DIMENSIONS",Ve="UPDATE_NODE_POS",We="UPDATE_NODE_POS_DIFF",Ke="SET_USER_SELECTION",Xe="UPDATE_USER_SELECTION",Je="UNSET_USER_SELECTION",Qe="UNSET_NODES_SELECTION",et="SET_SELECTED_ELEMENTS",tt="RESET_SELECTED_ELEMENTS",nt="ADD_SELECTED_ELEMENTS",rt="UPDATE_TRANSFORM",ot="UPDATE_SIZE",it="INIT_D3ZOOM",lt="SET_MINZOOM",at="SET_MAXZOOM",ut="SET_TRANSLATEEXTENT",ct="SET_CONNECTION_POSITION",st="SET_CONNECTION_NODEID",dt="SET_SNAPTOGRID",pt="SET_SNAPGRID",ft="SET_INTERACTIVE",mt="SET_NODES_DRAGGABLE",vt="SET_NODES_CONNECTABLE",yt="SET_ELEMENTS_SELECTABLE",gt="SET_MULTI_SELECTION_ACTIVE",ht="SET_CONNECTION_MODE",bt="SET_NODE_EXTENT",wt=Object.freeze({__proto__:null,setOnConnect:function(e){return qe(ze,{onConnect:e})},setOnConnectStart:function(e){return qe(Ue,{onConnectStart:e})},setOnConnectStop:function(e){return qe(Ge,{onConnectStop:e})},setOnConnectEnd:function(e){return qe($e,{onConnectEnd:e})},setElements:function(e){return qe(Ye,e)},updateNodeDimensions:function(e){return qe(He,e)},updateNodePos:function(e){return qe(Ve,e)},updateNodePosDiff:function(e){return qe(We,e)},setUserSelection:function(e){return qe(Ke,e)},updateUserSelection:function(e){return qe(Xe,e)},unsetUserSelection:function(){return qe(Je)},setSelection:function(e){return qe("SET_SELECTION",{selectionActive:e})},unsetNodesSelection:function(){return qe(Qe,{nodesSelectionActive:!1})},resetSelectedElements:function(){return qe(tt,{selectedElements:null})},setSelectedElements:function(e){return qe(et,e)},addSelectedElements:function(e){return qe(nt,e)},updateTransform:function(e){return qe(rt,{transform:e})},updateSize:function(e){return qe(ot,{width:e.width||500,height:e.height||500})},initD3Zoom:function(e){return qe(it,e)},setMinZoom:function(e){return qe(lt,e)},setMaxZoom:function(e){return qe(at,e)},setTranslateExtent:function(e){return qe(ut,e)},setConnectionPosition:function(e){return qe(ct,{connectionPosition:e})},setConnectionNodeId:function(e){return qe(st,e)},setSnapToGrid:function(e){return qe(dt,{snapToGrid:e})},setSnapGrid:function(e){return qe(pt,{snapGrid:e})},setInteractive:function(e){return qe(ft,{nodesDraggable:e,nodesConnectable:e,elementsSelectable:e})},setNodesDraggable:function(e){return qe(mt,{nodesDraggable:e})},setNodesConnectable:function(e){return qe(vt,{nodesConnectable:e})},setElementsSelectable:function(e){return qe(yt,{elementsSelectable:e})},setMultiSelectionActive:function(e){return qe(gt,{multiSelectionActive:e})},setConnectionMode:function(e){return qe(ht,{connectionMode:e})},setNodeExtent:function(e){return qe(bt,e)}});function _t(e){var t=Me(),n=e(wt);return(0,i.useMemo)((function(){return function(e,t){if("function"==typeof e)return h(e,t);if("object"!=typeof e||null===e)throw new Error(f(16));var n={};for(var r in e){var o=e[r];"function"==typeof o&&(n[r]=h(o,t))}return n}(n,t)}),[t,n])}var Et=Ze,Ct=function(){return Le()};function Ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xt(e,t){if(e){if("string"==typeof e)return Ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ot(e,t):void 0}}function kt(e){return function(e){if(Array.isArray(e))return Ot(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(e){a=!0,o=e}finally{try{l||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||xt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var At=function(e){var t=null==e?void 0:e.target;return["INPUT","SELECT","TEXTAREA","BUTTON"].includes(null==t?void 0:t.nodeName)||(null==t?void 0:t.hasAttribute("contenteditable"))},jt=function(e){return{width:e.offsetWidth,height:e.offsetHeight}},Dt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)},Pt=function(e,t){return{x:Dt(e.x,t[0][0],t[1][0]),y:Dt(e.y,t[0][1],t[1][1])}},Tt=function(e){var t=St((0,i.useState)(!1),2),n=t[0],r=t[1];return(0,i.useEffect)((function(){if(void 0!==e){var t=function(t){At(t)||t.key!==e&&t.keyCode!==e||(t.preventDefault(),r(!0))},n=function(t){At(t)||t.key!==e&&t.keyCode!==e||r(!1)},o=function(){return r(!1)};return window.addEventListener("keydown",t),window.addEventListener("keyup",n),window.addEventListener("blur",o),function(){window.removeEventListener("keydown",t),window.removeEventListener("keyup",n),window.removeEventListener("blur",o)}}}),[e,r]),n};function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Bt=function(e){return"id"in e&&"source"in e&&"target"in e},Mt=function(e){return"id"in e&&!("source"in e)&&!("target"in e)},Nt=function(e){var t=e.source,n=e.sourceHandle,r=e.target,o=e.targetHandle;return"reactflow__edge-".concat(t).concat(n,"-").concat(r).concat(o)},It=function(e,t){return e.source&&e.target?function(e,t){return t.some((function(t){return Bt(t)&&t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)}))}(n=Bt(e)?Lt({},e):Lt(Lt({},e),{},{id:Nt(e)}),t)?t:t.concat(n):(console.warn("Can't create edge. An edge needs a source and a target."),t);var n},Rt=function(e,t,n){if(!t.source||!t.target)return console.warn("Can't create new edge. An edge needs a source and a target."),n;var r=n.find((function(t){return Bt(t)&&t.id===e.id}));if(!r)return console.warn("The old edge with id=".concat(e.id," does not exist.")),n;var o=Lt(Lt({},e),{},{id:Nt(t),source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle});return n.filter((function(t){return t.id!==e.id})).concat(o)},Zt=function(e,t,n,r){var o=e.x,i=e.y,l=St(t,3),a=l[0],u=l[1],c=l[2],s=St(r,2),d=s[0],p=s[1],f={x:(o-a)/c,y:(i-u)/c};return n?{x:d*Math.round(f.x/d),y:p*Math.round(f.y/p)}:f},qt=function(e){return function(t){var n=e.getState(),r=n.transform,o=n.snapToGrid,i=n.snapGrid;return Zt(t,r,o,i)}},zt=function(e,t){var n,r;return Lt(Lt({},e),{},{id:e.id.toString(),type:e.type||"default",__rf:{position:Pt(e.position,t),width:(null===(n=e.style)||void 0===n?void 0:n.width)||null,height:(null===(r=e.style)||void 0===r?void 0:r.height)||null,handleBounds:{},isDragging:!1}})},Ut=function(e){return Lt(Lt({},e),{},{source:e.source.toString(),target:e.target.toString(),sourceHandle:e.sourceHandle?e.sourceHandle.toString():null,targetHandle:e.targetHandle?e.targetHandle.toString():null,id:e.id.toString(),type:e.type||"default"})},Gt=function(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}},$t=function(e){var t=e.x,n=e.y;return{x:t,y:n,x2:t+e.width,y2:n+e.height}},Yt=function(e){var t=e.x,n=e.y;return{x:t,y:n,width:e.x2-t,height:e.y2-n}},Ht=function(e){var t=e.reduce((function(e,t){var n=t.__rf,r=(n=void 0===n?{}:n).position,o=n.width,i=n.height;return Gt(e,$t(Lt(Lt({},r),{},{width:o,height:i})))}),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Yt(t)},Vt=function(e,t){var n=St(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,1],3),r=n[0],o=n[1],i=n[2],l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=$t({x:(t.x-r)/i,y:(t.y-o)/i,width:t.width/i,height:t.height/i});return e.filter((function(e){var t=e.selectable,n=void 0===t||t,r=e.__rf,o=r.position,i=r.width,c=r.height,s=r.isDragging;if(a&&!n)return!1;var d=$t(Lt(Lt({},o),{},{width:i,height:c})),p=Math.max(0,Math.min(u.x2,d.x2)-Math.max(u.x,d.x)),f=Math.max(0,Math.min(u.y2,d.y2)-Math.max(u.y,d.y)),m=Math.ceil(p*f);return!(null!==i&&null!==c&&!s)||(l?m>0:m>=i*c)}))},Wt=function(e,t){var n=e.map((function(e){return e.id}));return t.filter((function(e){return n.includes(e.source)||n.includes(e.target)}))},Kt=function(e,t){return[].concat(kt(e.map((function(e){var t=Lt({},e);return t.position=t.__rf.position,delete t.__rf,t}))),kt(t.map((function(e){return Lt({},e)}))))},Xt=function(e){return function(){var t=e.getState(),n=t.nodes,r=void 0===n?[]:n,o=t.edges;return Kt(r,void 0===o?[]:o)}},Jt=function(e){return function(){var t=e.getState(),n=t.nodes,r=void 0===n?[]:n,o=t.edges,i=void 0===o?[]:o,l=t.transform;return{elements:Kt(r,i),position:[l[0],l[1]],zoom:l[2]}}},Qt=function(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.1,l=t/(e.width*(1+i)),a=n/(e.height*(1+i)),u=Math.min(l,a),c=Dt(u,r,o);return[t/2-(e.x+e.width/2)*c,n/2-(e.y+e.height/2)*c,c]},en={value:()=>{}};function tn(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new nn(r)}function nn(e){this._=e}function rn(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}function on(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=en,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}nn.prototype=tn.prototype={constructor:nn,on:function(e,t){var n,r,o=this._,i=(r=o,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),l=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++l<a;)if(n=(e=i[l]).type)o[n]=on(o[n],e.name,t);else if(null==t)for(n in o)o[n]=on(o[n],e.name,null);return this}for(;++l<a;)if((n=(e=i[l]).type)&&(n=rn(o[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new nn(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(r=this._[e]).length;i<n;++i)r[i].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};var ln="http://www.w3.org/1999/xhtml",an={svg:"http://www.w3.org/2000/svg",xhtml:ln,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function un(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),an.hasOwnProperty(t)?{space:an[t],local:e}:e}function cn(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ln&&t.documentElement.namespaceURI===ln?t.createElement(e):t.createElementNS(n,e)}}function sn(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function dn(e){var t=un(e);return(t.local?sn:cn)(t)}function pn(){}function fn(e){return null==e?pn:function(){return this.querySelector(e)}}function mn(){return[]}function vn(e){return null==e?mn:function(){return this.querySelectorAll(e)}}function yn(e){return function(){return this.matches(e)}}function gn(e){return function(t){return t.matches(e)}}var hn=Array.prototype.find;function bn(){return this.firstElementChild}var wn=Array.prototype.filter;function _n(){return Array.from(this.children)}function En(e){return new Array(e.length)}function Cn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function On(e,t,n,r,o,i){for(var l,a=0,u=t.length,c=i.length;a<c;++a)(l=t[a])?(l.__data__=i[a],r[a]=l):n[a]=new Cn(e,i[a]);for(;a<u;++a)(l=t[a])&&(o[a]=l)}function xn(e,t,n,r,o,i,l){var a,u,c,s=new Map,d=t.length,p=i.length,f=new Array(d);for(a=0;a<d;++a)(u=t[a])&&(f[a]=c=l.call(u,u.__data__,a,t)+"",s.has(c)?o[a]=u:s.set(c,u));for(a=0;a<p;++a)c=l.call(e,i[a],a,i)+"",(u=s.get(c))?(r[a]=u,u.__data__=i[a],s.delete(c)):n[a]=new Cn(e,i[a]);for(a=0;a<d;++a)(u=t[a])&&s.get(f[a])===u&&(o[a]=u)}function kn(e){return e.__data__}function Sn(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function An(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function jn(e){return function(){this.removeAttribute(e)}}function Dn(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Pn(e,t){return function(){this.setAttribute(e,t)}}function Tn(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Fn(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Ln(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Bn(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Mn(e){return function(){this.style.removeProperty(e)}}function Nn(e,t,n){return function(){this.style.setProperty(e,t,n)}}function In(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Rn(e,t){return e.style.getPropertyValue(t)||Bn(e).getComputedStyle(e,null).getPropertyValue(t)}function Zn(e){return function(){delete this[e]}}function qn(e,t){return function(){this[e]=t}}function zn(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Un(e){return e.trim().split(/^|\s+/)}function Gn(e){return e.classList||new $n(e)}function $n(e){this._node=e,this._names=Un(e.getAttribute("class")||"")}function Yn(e,t){for(var n=Gn(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function Hn(e,t){for(var n=Gn(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function Vn(e){return function(){Yn(this,e)}}function Wn(e){return function(){Hn(this,e)}}function Kn(e,t){return function(){(t.apply(this,arguments)?Yn:Hn)(this,e)}}function Xn(){this.textContent=""}function Jn(e){return function(){this.textContent=e}}function Qn(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function er(){this.innerHTML=""}function tr(e){return function(){this.innerHTML=e}}function nr(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function rr(){this.nextSibling&&this.parentNode.appendChild(this)}function or(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ir(){return null}function lr(){var e=this.parentNode;e&&e.removeChild(this)}function ar(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ur(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function cr(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,i=t.length;r<i;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function sr(e,t,n){return function(){var r,o=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(o)for(var l=0,a=o.length;l<a;++l)if((r=o[l]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),void(r.value=t);this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function dr(e,t,n){var r=Bn(e),o=r.CustomEvent;"function"==typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function pr(e,t){return function(){return dr(this,e,t)}}function fr(e,t){return function(){return dr(this,e,t.apply(this,arguments))}}Cn.prototype={constructor:Cn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},$n.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var mr=[null];function vr(e,t){this._groups=e,this._parents=t}function yr(){return new vr([[document.documentElement]],mr)}function gr(e){return"string"==typeof e?new vr([[document.querySelector(e)]],[document.documentElement]):new vr([[e]],mr)}function hr(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}vr.prototype=yr.prototype={constructor:vr,select:function(e){"function"!=typeof e&&(e=fn(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,l,a=t[o],u=a.length,c=r[o]=new Array(u),s=0;s<u;++s)(i=a[s])&&(l=e.call(i,i.__data__,s,a))&&("__data__"in i&&(l.__data__=i.__data__),c[s]=l);return new vr(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){return function(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}(e.apply(this,arguments))}}(e):vn(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var l,a=t[i],u=a.length,c=0;c<u;++c)(l=a[c])&&(r.push(e.call(l,l.__data__,c,a)),o.push(l));return new vr(r,o)},selectChild:function(e){return this.select(null==e?bn:function(e){return function(){return hn.call(this.children,e)}}("function"==typeof e?e:gn(e)))},selectChildren:function(e){return this.selectAll(null==e?_n:function(e){return function(){return wn.call(this.children,e)}}("function"==typeof e?e:gn(e)))},filter:function(e){"function"!=typeof e&&(e=yn(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,l=t[o],a=l.length,u=r[o]=[],c=0;c<a;++c)(i=l[c])&&e.call(i,i.__data__,c,l)&&u.push(i);return new vr(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,kn);var n=t?xn:On,r=this._parents,o=this._groups;"function"!=typeof e&&(e=function(e){return function(){return e}}(e));for(var i=o.length,l=new Array(i),a=new Array(i),u=new Array(i),c=0;c<i;++c){var s=r[c],d=o[c],p=d.length,f=Sn(e.call(s,s&&s.__data__,c,r)),m=f.length,v=a[c]=new Array(m),y=l[c]=new Array(m);n(s,d,v,y,u[c]=new Array(p),f,t);for(var g,h,b=0,w=0;b<m;++b)if(g=v[b]){for(b>=w&&(w=b+1);!(h=y[w])&&++w<m;);g._next=h||null}}return(l=new vr(l,r))._enter=a,l._exit=u,l},enter:function(){return new vr(this._enter||this._groups.map(En),this._parents)},exit:function(){return new vr(this._exit||this._groups.map(En),this._parents)},join:function(e,t,n){var r=this.enter(),o=this,i=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(o=t(o))&&(o=o.selection()),null==n?i.remove():n(i),r&&o?r.merge(o).order():o},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,l=Math.min(o,i),a=new Array(o),u=0;u<l;++u)for(var c,s=n[u],d=r[u],p=s.length,f=a[u]=new Array(p),m=0;m<p;++m)(c=s[m]||d[m])&&(f[m]=c);for(;u<o;++u)a[u]=n[u];return new vr(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],i=o.length-1,l=o[i];--i>=0;)(r=o[i])&&(l&&4^r.compareDocumentPosition(l)&&l.parentNode.insertBefore(r,l),l=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=An);for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var l,a=n[i],u=a.length,c=o[i]=new Array(u),s=0;s<u;++s)(l=a[s])&&(c[s]=l);c.sort(t)}return new vr(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var l=r[o];if(l)return l}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,i=t[n],l=0,a=i.length;l<a;++l)(o=i[l])&&e.call(o,o.__data__,l,i);return this},attr:function(e,t){var n=un(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?Dn:jn:"function"==typeof t?n.local?Ln:Fn:n.local?Tn:Pn)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Mn:"function"==typeof t?In:Nn)(e,t,null==n?"":n)):Rn(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Zn:"function"==typeof t?zn:qn)(e,t)):this.node()[e]},classed:function(e,t){var n=Un(e+"");if(arguments.length<2){for(var r=Gn(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof t?Kn:t?Vn:Wn)(n,t))},text:function(e){return arguments.length?this.each(null==e?Xn:("function"==typeof e?Qn:Jn)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?er:("function"==typeof e?nr:tr)(e)):this.node().innerHTML},raise:function(){return this.each(rr)},lower:function(){return this.each(or)},append:function(e){var t="function"==typeof e?e:dn(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:dn(e),r=null==t?ir:"function"==typeof t?t:fn(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(lr)},clone:function(e){return this.select(e?ur:ar)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,i=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),l=i.length;if(!(arguments.length<2)){for(a=t?sr:cr,r=0;r<l;++r)this.each(a(i[r],t,n));return this}var a=this.node().__on;if(a)for(var u,c=0,s=a.length;c<s;++c)for(r=0,u=a[c];r<l;++r)if((o=i[r]).type===u.type&&o.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"==typeof t?fr:pr)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,o=e[t],i=0,l=o.length;i<l;++i)(r=o[i])&&(yield r)}};const br={capture:!0,passive:!1};function wr(e){e.preventDefault(),e.stopImmediatePropagation()}function Er(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Cr(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Or(){}var xr=.7,kr=1/xr,Sr="\\s*([+-]?\\d+)\\s*",Ar="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",jr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Dr=/^#([0-9a-f]{3,8})$/,Pr=new RegExp("^rgb\\("+[Sr,Sr,Sr]+"\\)$"),Tr=new RegExp("^rgb\\("+[jr,jr,jr]+"\\)$"),Fr=new RegExp("^rgba\\("+[Sr,Sr,Sr,Ar]+"\\)$"),Lr=new RegExp("^rgba\\("+[jr,jr,jr,Ar]+"\\)$"),Br=new RegExp("^hsl\\("+[Ar,jr,jr]+"\\)$"),Mr=new RegExp("^hsla\\("+[Ar,jr,jr,Ar]+"\\)$"),Nr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ir(){return this.rgb().formatHex()}function Rr(){return this.rgb().formatRgb()}function Zr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Dr.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?qr(t):3===n?new Gr(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?zr(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?zr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Pr.exec(e))?new Gr(t[1],t[2],t[3],1):(t=Tr.exec(e))?new Gr(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Fr.exec(e))?zr(t[1],t[2],t[3],t[4]):(t=Lr.exec(e))?zr(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Br.exec(e))?Vr(t[1],t[2]/100,t[3]/100,1):(t=Mr.exec(e))?Vr(t[1],t[2]/100,t[3]/100,t[4]):Nr.hasOwnProperty(e)?qr(Nr[e]):"transparent"===e?new Gr(NaN,NaN,NaN,0):null}function qr(e){return new Gr(e>>16&255,e>>8&255,255&e,1)}function zr(e,t,n,r){return r<=0&&(e=t=n=NaN),new Gr(e,t,n,r)}function Ur(e,t,n,r){return 1===arguments.length?((o=e)instanceof Or||(o=Zr(o)),o?new Gr((o=o.rgb()).r,o.g,o.b,o.opacity):new Gr):new Gr(e,t,n,null==r?1:r);var o}function Gr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function $r(){return"#"+Hr(this.r)+Hr(this.g)+Hr(this.b)}function Yr(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Hr(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Vr(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Kr(e,t,n,r)}function Wr(e){if(e instanceof Kr)return new Kr(e.h,e.s,e.l,e.opacity);if(e instanceof Or||(e=Zr(e)),!e)return new Kr;if(e instanceof Kr)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),l=NaN,a=i-o,u=(i+o)/2;return a?(l=t===i?(n-r)/a+6*(n<r):n===i?(r-t)/a+2:(t-n)/a+4,a/=u<.5?i+o:2-i-o,l*=60):a=u>0&&u<1?0:l,new Kr(l,a,u,e.opacity)}function Kr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Xr(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Er(Or,Zr,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Ir,formatHex:Ir,formatHsl:function(){return Wr(this).formatHsl()},formatRgb:Rr,toString:Rr}),Er(Gr,Ur,Cr(Or,{brighter:function(e){return e=null==e?kr:Math.pow(kr,e),new Gr(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?xr:Math.pow(xr,e),new Gr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$r,formatHex:$r,formatRgb:Yr,toString:Yr})),Er(Kr,(function(e,t,n,r){return 1===arguments.length?Wr(e):new Kr(e,t,n,null==r?1:r)}),Cr(Or,{brighter:function(e){return e=null==e?kr:Math.pow(kr,e),new Kr(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?xr:Math.pow(xr,e),new Kr(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Gr(Xr(e>=240?e-240:e+120,o,r),Xr(e,o,r),Xr(e<120?e+240:e-120,o,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var Jr=e=>()=>e;function Qr(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Jr(isNaN(e)?t:e)}var eo=function e(t){var n=function(e){return 1==(e=+e)?Qr:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Jr(isNaN(t)?n:t)}}(t);function r(e,t){var r=n((e=Ur(e)).r,(t=Ur(t)).r),o=n(e.g,t.g),i=n(e.b,t.b),l=Qr(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=o(t),e.b=i(t),e.opacity=l(t),e+""}}return r.gamma=e,r}(1);function to(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var no=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ro=new RegExp(no.source,"g");function oo(e,t){var n,r,o,i=no.lastIndex=ro.lastIndex=0,l=-1,a=[],u=[];for(e+="",t+="";(n=no.exec(e))&&(r=ro.exec(t));)(o=r.index)>i&&(o=t.slice(i,o),a[l]?a[l]+=o:a[++l]=o),(n=n[0])===(r=r[0])?a[l]?a[l]+=r:a[++l]=r:(a[++l]=null,u.push({i:l,x:to(n,r)})),i=ro.lastIndex;return i<t.length&&(o=t.slice(i),a[l]?a[l]+=o:a[++l]=o),a.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)a[(n=u[r]).i]=n.x(e);return a.join("")})}var io,lo=180/Math.PI,ao={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function uo(e,t,n,r,o,i){var l,a,u;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,l=-l),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*lo,skewX:Math.atan(u)*lo,scaleX:l,scaleY:a}}function co(e,t,n,r){function o(e){return e.length?e.pop()+" ":""}return function(i,l){var a=[],u=[];return i=e(i),l=e(l),function(e,r,o,i,l,a){if(e!==o||r!==i){var u=l.push("translate(",null,t,null,n);a.push({i:u-4,x:to(e,o)},{i:u-2,x:to(r,i)})}else(o||i)&&l.push("translate("+o+t+i+n)}(i.translateX,i.translateY,l.translateX,l.translateY,a,u),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(o(n)+"rotate(",null,r)-2,x:to(e,t)})):t&&n.push(o(n)+"rotate("+t+r)}(i.rotate,l.rotate,a,u),function(e,t,n,i){e!==t?i.push({i:n.push(o(n)+"skewX(",null,r)-2,x:to(e,t)}):t&&n.push(o(n)+"skewX("+t+r)}(i.skewX,l.skewX,a,u),function(e,t,n,r,i,l){if(e!==n||t!==r){var a=i.push(o(i)+"scale(",null,",",null,")");l.push({i:a-4,x:to(e,n)},{i:a-2,x:to(t,r)})}else 1===n&&1===r||i.push(o(i)+"scale("+n+","+r+")")}(i.scaleX,i.scaleY,l.scaleX,l.scaleY,a,u),i=l=null,function(e){for(var t,n=-1,r=u.length;++n<r;)a[(t=u[n]).i]=t.x(e);return a.join("")}}}var so=co((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ao:uo(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),po=co((function(e){return null==e?ao:(io||(io=document.createElementNS("http://www.w3.org/2000/svg","g")),io.setAttribute("transform",e),(e=io.transform.baseVal.consolidate())?uo((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):ao)}),", ",")",")");function fo(e){return((e=Math.exp(e))+1/e)/2}var mo,vo,yo=function e(t,n,r){function o(e,o){var i,l,a=e[0],u=e[1],c=e[2],s=o[0],d=o[1],p=o[2],f=s-a,m=d-u,v=f*f+m*m;if(v<1e-12)l=Math.log(p/c)/t,i=function(e){return[a+e*f,u+e*m,c*Math.exp(t*e*l)]};else{var y=Math.sqrt(v),g=(p*p-c*c+r*v)/(2*c*n*y),h=(p*p-c*c-r*v)/(2*p*n*y),b=Math.log(Math.sqrt(g*g+1)-g),w=Math.log(Math.sqrt(h*h+1)-h);l=(w-b)/t,i=function(e){var r=e*l,o=fo(b),i=c/(n*y)*(o*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(t*r+b)-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[a+i*f,u+i*m,c*o/fo(t*r+b)]}}return i.duration=1e3*l*t/Math.SQRT2,i}return o.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},o}(Math.SQRT2,2,4),go=0,ho=0,bo=0,wo=1e3,_o=0,Eo=0,Co=0,Oo="object"==typeof performance&&performance.now?performance:Date,xo="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ko(){return Eo||(xo(So),Eo=Oo.now()+Co)}function So(){Eo=0}function Ao(){this._call=this._time=this._next=null}function jo(e,t,n){var r=new Ao;return r.restart(e,t,n),r}function Do(){Eo=(_o=Oo.now())+Co,go=ho=0;try{!function(){ko(),++go;for(var e,t=mo;t;)(e=Eo-t._time)>=0&&t._call.call(void 0,e),t=t._next;--go}()}finally{go=0,function(){for(var e,t,n=mo,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:mo=t);vo=e,To(r)}(),Eo=0}}function Po(){var e=Oo.now(),t=e-_o;t>wo&&(Co-=t,_o=e)}function To(e){go||(ho&&(ho=clearTimeout(ho)),e-Eo>24?(e<1/0&&(ho=setTimeout(Do,e-Oo.now()-Co)),bo&&(bo=clearInterval(bo))):(bo||(_o=Oo.now(),bo=setInterval(Po,wo)),go=1,xo(Do)))}function Fo(e,t,n){var r=new Ao;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r}Ao.prototype=jo.prototype={constructor:Ao,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?ko():+n)+(null==t?0:+t),this._next||vo===this||(vo?vo._next=this:mo=this,vo=this),this._call=e,this._time=n,To()},stop:function(){this._call&&(this._call=null,this._time=1/0,To())}};var Lo=tn("start","end","cancel","interrupt"),Bo=[],Mo=0,No=2,Io=3,Ro=5,Zo=6;function qo(e,t,n,r,o,i){var l=e.__transition;if(l){if(n in l)return}else e.__transition={};!function(e,t,n){var r,o=e.__transition;function i(u){var c,s,d,p;if(1!==n.state)return a();for(c in o)if((p=o[c]).name===n.name){if(p.state===Io)return Fo(i);4===p.state?(p.state=Zo,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete o[c]):+c<t&&(p.state=Zo,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete o[c])}if(Fo((function(){n.state===Io&&(n.state=4,n.timer.restart(l,n.delay,n.time),l(u))})),n.state=No,n.on.call("start",e,e.__data__,n.index,n.group),n.state===No){for(n.state=Io,r=new Array(d=n.tween.length),c=0,s=-1;c<d;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++s]=p);r.length=s+1}}function l(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(a),n.state=Ro,1),i=-1,l=r.length;++i<l;)r[i].call(e,o);n.state===Ro&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){for(var r in n.state=Zo,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=jo((function(e){n.state=1,n.timer.restart(i,n.delay,n.time),n.delay<=e&&i(e-n.delay)}),0,n.time)}(e,n,{name:t,index:r,group:o,on:Lo,tween:Bo,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Mo})}function zo(e,t){var n=Go(e,t);if(n.state>Mo)throw new Error("too late; already scheduled");return n}function Uo(e,t){var n=Go(e,t);if(n.state>Io)throw new Error("too late; already running");return n}function Go(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function $o(e,t){var n,r,o,i=e.__transition,l=!0;if(i){for(o in t=null==t?null:t+"",i)(n=i[o]).name===t?(r=n.state>No&&n.state<Ro,n.state=Zo,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[o]):l=!1;l&&delete e.__transition}}function Yo(e,t){var n,r;return function(){var o=Uo(this,e),i=o.tween;if(i!==n)for(var l=0,a=(r=n=i).length;l<a;++l)if(r[l].name===t){(r=r.slice()).splice(l,1);break}o.tween=r}}function Ho(e,t,n){var r,o;if("function"!=typeof n)throw new Error;return function(){var i=Uo(this,e),l=i.tween;if(l!==r){o=(r=l).slice();for(var a={name:t,value:n},u=0,c=o.length;u<c;++u)if(o[u].name===t){o[u]=a;break}u===c&&o.push(a)}i.tween=o}}function Vo(e,t,n){var r=e._id;return e.each((function(){var e=Uo(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return Go(e,r).value[t]}}function Wo(e,t){var n;return("number"==typeof t?to:t instanceof Zr?eo:(n=Zr(t))?(t=n,eo):oo)(e,t)}function Ko(e){return function(){this.removeAttribute(e)}}function Xo(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Jo(e,t,n){var r,o,i=n+"";return function(){var l=this.getAttribute(e);return l===i?null:l===r?o:o=t(r=l,n)}}function Qo(e,t,n){var r,o,i=n+"";return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===r?o:o=t(r=l,n)}}function ei(e,t,n){var r,o,i;return function(){var l,a,u=n(this);if(null!=u)return(l=this.getAttribute(e))===(a=u+"")?null:l===r&&a===o?i:(o=a,i=t(r=l,u));this.removeAttribute(e)}}function ti(e,t,n){var r,o,i;return function(){var l,a,u=n(this);if(null!=u)return(l=this.getAttributeNS(e.space,e.local))===(a=u+"")?null:l===r&&a===o?i:(o=a,i=t(r=l,u));this.removeAttributeNS(e.space,e.local)}}function ni(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,o)),n}return o._value=t,o}function ri(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,o)),n}return o._value=t,o}function oi(e,t){return function(){zo(this,e).delay=+t.apply(this,arguments)}}function ii(e,t){return t=+t,function(){zo(this,e).delay=t}}function li(e,t){return function(){Uo(this,e).duration=+t.apply(this,arguments)}}function ai(e,t){return t=+t,function(){Uo(this,e).duration=t}}var ui=yr.prototype.constructor;function ci(e){return function(){this.style.removeProperty(e)}}var si=0;function di(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function pi(){return++si}var fi=yr.prototype;di.prototype={constructor:di,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=fn(e));for(var r=this._groups,o=r.length,i=new Array(o),l=0;l<o;++l)for(var a,u,c=r[l],s=c.length,d=i[l]=new Array(s),p=0;p<s;++p)(a=c[p])&&(u=e.call(a,a.__data__,p,c))&&("__data__"in a&&(u.__data__=a.__data__),d[p]=u,qo(d[p],t,n,p,d,Go(a,n)));return new di(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=vn(e));for(var r=this._groups,o=r.length,i=[],l=[],a=0;a<o;++a)for(var u,c=r[a],s=c.length,d=0;d<s;++d)if(u=c[d]){for(var p,f=e.call(u,u.__data__,d,c),m=Go(u,n),v=0,y=f.length;v<y;++v)(p=f[v])&&qo(p,t,n,v,f,m);i.push(f),l.push(u)}return new di(i,l,t,n)},selectChild:fi.selectChild,selectChildren:fi.selectChildren,filter:function(e){"function"!=typeof e&&(e=yn(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i,l=t[o],a=l.length,u=r[o]=[],c=0;c<a;++c)(i=l[c])&&e.call(i,i.__data__,c,l)&&u.push(i);return new di(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),l=new Array(r),a=0;a<i;++a)for(var u,c=t[a],s=n[a],d=c.length,p=l[a]=new Array(d),f=0;f<d;++f)(u=c[f]||s[f])&&(p[f]=u);for(;a<r;++a)l[a]=t[a];return new di(l,this._parents,this._name,this._id)},selection:function(){return new ui(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=pi(),r=this._groups,o=r.length,i=0;i<o;++i)for(var l,a=r[i],u=a.length,c=0;c<u;++c)if(l=a[c]){var s=Go(l,t);qo(l,e,n,c,a,{time:s.time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease})}return new di(r,this._parents,e,n)},call:fi.call,nodes:fi.nodes,node:fi.node,size:fi.size,empty:fi.empty,each:fi.each,on:function(e,t){var n=this._id;return arguments.length<2?Go(this.node(),n).on.on(e):this.each(function(e,t,n){var r,o,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?zo:Uo;return function(){var l=i(this,e),a=l.on;a!==r&&(o=(r=a).copy()).on(t,n),l.on=o}}(n,e,t))},attr:function(e,t){var n=un(e),r="transform"===n?po:Wo;return this.attrTween(e,"function"==typeof t?(n.local?ti:ei)(n,r,Vo(this,"attr."+e,t)):null==t?(n.local?Xo:Ko)(n):(n.local?Qo:Jo)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=un(e);return this.tween(n,(r.local?ni:ri)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?so:Wo;return null==t?this.styleTween(e,function(e,t){var n,r,o;return function(){var i=Rn(this,e),l=(this.style.removeProperty(e),Rn(this,e));return i===l?null:i===n&&l===r?o:o=t(n=i,r=l)}}(e,r)).on("end.style."+e,ci(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,o,i;return function(){var l=Rn(this,e),a=n(this),u=a+"";return null==a&&(this.style.removeProperty(e),u=a=Rn(this,e)),l===u?null:l===r&&u===o?i:(o=u,i=t(r=l,a))}}(e,r,Vo(this,"style."+e,t))).each(function(e,t){var n,r,o,i,l="style."+t,a="end."+l;return function(){var u=Uo(this,e),c=u.on,s=null==u.value[l]?i||(i=ci(t)):void 0;c===n&&o===s||(r=(n=c).copy()).on(a,o=s),u.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,o,i=n+"";return function(){var l=Rn(this,e);return l===i?null:l===r?o:o=t(r=l,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,o;function i(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,i,n)),r}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Vo(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=Go(this.node(),n).tween,i=0,l=o.length;i<l;++i)if((r=o[i]).name===e)return r.value;return null}return this.each((null==t?Yo:Ho)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?oi:ii)(t,e)):Go(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?li:ai)(t,e)):Go(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){Uo(this,e).ease=t}}(t,e)):Go(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;Uo(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,o=n.size();return new Promise((function(i,l){var a={value:l},u={value:function(){0==--o&&i()}};n.each((function(){var n=Uo(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),n.on=t})),0===o&&i()}))},[Symbol.iterator]:fi[Symbol.iterator]};var mi={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function vi(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}yr.prototype.interrupt=function(e){return this.each((function(){$o(this,e)}))},yr.prototype.transition=function(e){var t,n;e instanceof di?(t=e._id,e=e._name):(t=pi(),(n=mi).time=ko(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var l,a=r[i],u=a.length,c=0;c<u;++c)(l=a[c])&&qo(l,e,t,c,a,n||vi(l,t));return new di(r,this._parents,e,t)};var yi=e=>()=>e;function gi(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function hi(e,t,n){this.k=e,this.x=t,this.y=n}hi.prototype={constructor:hi,scale:function(e){return 1===e?this:new hi(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new hi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var bi,wi,_i,Ei,Ci,Oi,xi=new hi(1,0,0);function ki(e){e.stopImmediatePropagation()}function Si(e){e.preventDefault(),e.stopImmediatePropagation()}function Ai(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function ji(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Di(){return this.__zoom||xi}function Pi(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Ti(){return navigator.maxTouchPoints||"ontouchstart"in this}function Fi(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],l=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),l>i?(i+l)/2:Math.min(0,i)||Math.max(0,l))}!function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(bi||(bi={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(wi||(wi={})),function(e){e.Lines="lines",e.Dots="dots"}(_i||(_i={})),function(e){e.Strict="strict",e.Loose="loose"}(Ei||(Ei={})),function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep"}(Ci||(Ci={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(Oi||(Oi={}));var Li=function(e){return{x:e.x,y:e.y,zoom:e.k}},Bi=function(e){return e.target.closest(".nowheel")},Mi=function(e){var t,n,r=e.onMove,o=e.onMoveStart,a=e.onMoveEnd,u=e.zoomOnScroll,c=void 0===u||u,s=e.zoomOnPinch,d=void 0===s||s,p=e.panOnScroll,f=void 0!==p&&p,m=e.panOnScrollSpeed,v=void 0===m?.5:m,y=e.panOnScrollMode,g=void 0===y?Oi.Free:y,h=e.zoomOnDoubleClick,b=void 0===h||h,w=e.selectionKeyPressed,_=e.elementsSelectable,E=e.paneMoveable,C=void 0===E||E,O=e.defaultPosition,x=void 0===O?[0,0]:O,k=e.defaultZoom,S=void 0===k?1:k,A=e.translateExtent,j=e.zoomActivationKeyCode,D=e.preventScrolling,P=void 0===D||D,T=e.children,F=(0,i.useRef)(null),L=(0,i.useRef)({x:0,y:0,zoom:0}),B=Ct(),M=Et((function(e){return e.d3Zoom})),N=Et((function(e){return e.d3Selection})),I=Et((function(e){return e.d3ZoomHandler})),R=_t((function(e){return e.initD3Zoom})),Z=_t((function(e){return e.updateTransform})),q=Tt(j);return t=F,n=_t((function(e){return e.updateSize})),(0,i.useEffect)((function(){var e,r=function(){if(t.current){var e=jt(t.current);0!==e.height&&0!==e.width||console.warn("The React Flow parent container needs a width and a height to render the graph."),n(e)}};return r(),window.onresize=r,t.current&&(e=new ResizeObserver((function(){return r()}))).observe(t.current),function(){window.onresize=null,e&&t.current&&e.unobserve(t.current)}}),[]),(0,i.useEffect)((function(){if(F.current){var e=B.getState(),t=void 0!==A?A:e.translateExtent,n=function(){var e,t,n,r=Ai,o=ji,i=Fi,l=Pi,a=Ti,u=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],s=250,d=yo,p=tn("start","zoom","end"),f=500,m=150,v=0,y=10;function g(e){e.property("__zoom",Di).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",x).on("dblclick.zoom",k).filter(a).on("touchstart.zoom",S).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",j).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(e,t){return(t=Math.max(u[0],Math.min(u[1],t)))===e.k?e:new hi(t,e.x,e.y)}function b(e,t,n){var r=t[0]-n[0]*e.k,o=t[1]-n[1]*e.k;return r===e.x&&o===e.y?e:new hi(e.k,r,o)}function w(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function _(e,t,n,r){e.on("start.zoom",(function(){E(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){E(this,arguments).event(r).end()})).tween("zoom",(function(){var e=this,i=arguments,l=E(e,i).event(r),a=o.apply(e,i),u=null==n?w(a):"function"==typeof n?n.apply(e,i):n,c=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),s=e.__zoom,p="function"==typeof t?t.apply(e,i):t,f=d(s.invert(u).concat(c/s.k),p.invert(u).concat(c/p.k));return function(e){if(1===e)e=p;else{var t=f(e),n=c/t[2];e=new hi(n,u[0]-t[0]*n,u[1]-t[1]*n)}l.zoom(null,e)}}))}function E(e,t,n){return!n&&e.__zooming||new C(e,t)}function C(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,t),this.taps=0}function O(e,...t){if(r.apply(this,arguments)){var n=E(this,t).event(e),o=this.__zoom,a=Math.max(u[0],Math.min(u[1],o.k*Math.pow(2,l.apply(this,arguments)))),s=hr(e);if(n.wheel)n.mouse[0][0]===s[0]&&n.mouse[0][1]===s[1]||(n.mouse[1]=o.invert(n.mouse[0]=s)),clearTimeout(n.wheel);else{if(o.k===a)return;n.mouse=[s,o.invert(s)],$o(this),n.start()}Si(e),n.wheel=setTimeout((function(){n.wheel=null,n.end()}),m),n.zoom("mouse",i(b(h(o,a),n.mouse[0],n.mouse[1]),n.extent,c))}}function x(e,...t){if(!n&&r.apply(this,arguments)){var o=e.currentTarget,l=E(this,t,!0).event(e),a=gr(e.view).on("mousemove.zoom",(function(e){if(Si(e),!l.moved){var t=e.clientX-s,n=e.clientY-d;l.moved=t*t+n*n>v}l.event(e).zoom("mouse",i(b(l.that.__zoom,l.mouse[0]=hr(e,o),l.mouse[1]),l.extent,c))}),!0).on("mouseup.zoom",(function(e){a.on("mousemove.zoom mouseup.zoom",null),function(e,t){var n=e.document.documentElement,r=gr(e).on("dragstart.drag",null);t&&(r.on("click.drag",wr,br),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(e.view,l.moved),Si(e),l.event(e).end()}),!0),u=hr(e,o),s=e.clientX,d=e.clientY;!function(e){var t=e.document.documentElement,n=gr(e).on("dragstart.drag",wr,br);"onselectstart"in t?n.on("selectstart.drag",wr,br):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}(e.view),ki(e),l.mouse=[u,this.__zoom.invert(u)],$o(this),l.start()}}function k(e,...t){if(r.apply(this,arguments)){var n=this.__zoom,l=hr(e.changedTouches?e.changedTouches[0]:e,this),a=n.invert(l),u=n.k*(e.shiftKey?.5:2),d=i(b(h(n,u),l,a),o.apply(this,t),c);Si(e),s>0?gr(this).transition().duration(s).call(_,d,l,e):gr(this).call(g.transform,d,l,e)}}function S(n,...o){if(r.apply(this,arguments)){var i,l,a,u,c=n.touches,s=c.length,d=E(this,o,n.changedTouches.length===s).event(n);for(ki(n),l=0;l<s;++l)u=[u=hr(a=c[l],this),this.__zoom.invert(u),a.identifier],d.touch0?d.touch1||d.touch0[2]===u[2]||(d.touch1=u,d.taps=0):(d.touch0=u,i=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),i&&(d.taps<2&&(t=u[0],e=setTimeout((function(){e=null}),f)),$o(this),d.start())}}function A(e,...t){if(this.__zooming){var n,r,o,l,a=E(this,t).event(e),u=e.changedTouches,s=u.length;for(Si(e),n=0;n<s;++n)o=hr(r=u[n],this),a.touch0&&a.touch0[2]===r.identifier?a.touch0[0]=o:a.touch1&&a.touch1[2]===r.identifier&&(a.touch1[0]=o);if(r=a.that.__zoom,a.touch1){var d=a.touch0[0],p=a.touch0[1],f=a.touch1[0],m=a.touch1[1],v=(v=f[0]-d[0])*v+(v=f[1]-d[1])*v,y=(y=m[0]-p[0])*y+(y=m[1]-p[1])*y;r=h(r,Math.sqrt(v/y)),o=[(d[0]+f[0])/2,(d[1]+f[1])/2],l=[(p[0]+m[0])/2,(p[1]+m[1])/2]}else{if(!a.touch0)return;o=a.touch0[0],l=a.touch0[1]}a.zoom("touch",i(b(r,o,l),a.extent,c))}}function j(e,...r){if(this.__zooming){var o,i,l=E(this,r).event(e),a=e.changedTouches,u=a.length;for(ki(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),f),o=0;o<u;++o)i=a[o],l.touch0&&l.touch0[2]===i.identifier?delete l.touch0:l.touch1&&l.touch1[2]===i.identifier&&delete l.touch1;if(l.touch1&&!l.touch0&&(l.touch0=l.touch1,delete l.touch1),l.touch0)l.touch0[1]=this.__zoom.invert(l.touch0[0]);else if(l.end(),2===l.taps&&(i=hr(i,this),Math.hypot(t[0]-i[0],t[1]-i[1])<y)){var c=gr(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return g.transform=function(e,t,n,r){var o=e.selection?e.selection():e;o.property("__zoom",Di),e!==o?_(e,t,n,r):o.interrupt().each((function(){E(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},g.scaleBy=function(e,t,n,r){g.scaleTo(e,(function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)}),n,r)},g.scaleTo=function(e,t,n,r){g.transform(e,(function(){var e=o.apply(this,arguments),r=this.__zoom,l=null==n?w(e):"function"==typeof n?n.apply(this,arguments):n,a=r.invert(l),u="function"==typeof t?t.apply(this,arguments):t;return i(b(h(r,u),l,a),e,c)}),n,r)},g.translateBy=function(e,t,n,r){g.transform(e,(function(){return i(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),o.apply(this,arguments),c)}),null,r)},g.translateTo=function(e,t,n,r,l){g.transform(e,(function(){var e=o.apply(this,arguments),l=this.__zoom,a=null==r?w(e):"function"==typeof r?r.apply(this,arguments):r;return i(xi.translate(a[0],a[1]).scale(l.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,c)}),r,l)},C.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=gr(this.that).datum();p.call(e,this.that,new gi(e,{sourceEvent:this.sourceEvent,target:g,type:e,transform:this.that.__zoom,dispatch:p}),t)}},g.wheelDelta=function(e){return arguments.length?(l="function"==typeof e?e:yi(+e),g):l},g.filter=function(e){return arguments.length?(r="function"==typeof e?e:yi(!!e),g):r},g.touchable=function(e){return arguments.length?(a="function"==typeof e?e:yi(!!e),g):a},g.extent=function(e){return arguments.length?(o="function"==typeof e?e:yi([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),g):o},g.scaleExtent=function(e){return arguments.length?(u[0]=+e[0],u[1]=+e[1],g):[u[0],u[1]]},g.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],g):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},g.constrain=function(e){return arguments.length?(i=e,g):i},g.duration=function(e){return arguments.length?(s=+e,g):s},g.interpolate=function(e){return arguments.length?(d=e,g):d},g.on=function(){var e=p.on.apply(p,arguments);return e===p?g:e},g.clickDistance=function(e){return arguments.length?(v=(e=+e)*e,g):Math.sqrt(v)},g.tapDistance=function(e){return arguments.length?(y=+e,g):y},g}().scaleExtent([e.minZoom,e.maxZoom]).translateExtent(t),r=gr(F.current).call(n),o=Dt(x[0],t[0][0],t[1][0]),i=Dt(x[1],t[0][1],t[1][1]),l=Dt(S,e.minZoom,e.maxZoom),a=xi.translate(o,i).scale(l);n.transform(r,a),R({d3Zoom:n,d3Selection:r,d3ZoomHandler:r.on("wheel.zoom"),transform:[o,i,l]})}}),[]),(0,i.useEffect)((function(){N&&M&&(f&&!q?N.on("wheel",(function(e){if(Bi(e))return!1;e.preventDefault(),e.stopImmediatePropagation();var t=N.property("__zoom").k||1;if(e.ctrlKey&&d){var n=hr(e),r=-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*10,o=t*Math.pow(2,r);M.scaleTo(N,o,n)}else{var i=1===e.deltaMode?20:1,l=g===Oi.Vertical?0:e.deltaX*i,a=g===Oi.Horizontal?0:e.deltaY*i;M.translateBy(N,-l/t*v,-a/t*v)}})).on("wheel.zoom",null):void 0!==I&&N.on("wheel",(function(e){if(!P||Bi(e))return null;e.preventDefault()})).on("wheel.zoom",I))}),[f,g,N,M,I,q,d,P]),(0,i.useEffect)((function(){M&&(w?M.on("zoom",null):M.on("zoom",(function(e){if(Z([e.transform.x,e.transform.y,e.transform.k]),r){var t=Li(e.transform);r(t)}})))}),[w,M,Z,r]),(0,i.useEffect)((function(){M&&(o?M.on("start",(function(e){var t=Li(e.transform);L.current=t,o(t)})):M.on("start",null))}),[M,o]),(0,i.useEffect)((function(){M&&(a?M.on("end",(function(e){if(function(e,t){return e.x!==t.x||e.y!==t.y||e.zoom!==t.k}(L.current,e.transform)){var t=Li(e.transform);L.current=t,a(t)}})):M.on("end",null))}),[M,a]),(0,i.useEffect)((function(){M&&M.filter((function(e){var t=q||c,n=d&&e.ctrlKey;return!(!(C||t||f||b||d)||w||!b&&"dblclick"===e.type||Bi(e)&&"wheel"===e.type||(e.target.closest(".react-flow__node")||e.target.closest(".react-flow__edge"))&&"wheel"!==e.type||e.target.closest(".react-flow__nodesselection")&&"wheel"!==e.type||!d&&e.ctrlKey&&"wheel"===e.type||!(t||f||n||"wheel"!==e.type)||!(C||"mousedown"!==e.type&&"touchstart"!==e.type)||e.ctrlKey&&"wheel"!==e.type||e.button)}))}),[M,c,d,f,b,C,w,_,q]),l().createElement("div",{className:"react-flow__renderer react-flow__zoompane",ref:F},T)};function Ni(e){var t=e.target.closest(".react-flow");if(t){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}}var Ii=function(){var e=Et((function(e){return e.userSelectionRect}));return e.draw?l().createElement("div",{className:"react-flow__selection",style:{width:e.width,height:e.height,transform:"translate(".concat(e.x,"px, ").concat(e.y,"px)")}}):null},Ri=(0,i.memo)((function(e){var t=e.selectionKeyPressed,n=Et((function(e){return e.selectionActive})),r=Et((function(e){return e.elementsSelectable})),o=_t((function(e){return e.setUserSelection})),i=_t((function(e){return e.updateUserSelection})),a=_t((function(e){return e.unsetUserSelection})),u=_t((function(e){return e.unsetNodesSelection}));return r&&(n||t)?l().createElement("div",{className:"react-flow__selectionpane",onMouseDown:function(e){var t=Ni(e);t&&o(t)},onMouseMove:function(e){if(t&&n){var r=Ni(e);r&&i(r)}},onMouseUp:function(){return a()},onMouseLeave:function(){a(),u()}},l().createElement(Ii,null)):null})),Zi={exports:{}},qi={};function zi(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=zi(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var Ui=Object.freeze({__proto__:null,default:function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=zi(e))&&(r&&(r+=" "),r+=t);return r}}),Gi=b(Ui),$i={},Yi={};Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.findInArray=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]},Yi.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},Yi.isNum=function(e){return"number"==typeof e&&!isNaN(e)},Yi.int=function(e){return parseInt(e,10)},Yi.dontSetMe=function(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))};var Hi={};Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.getPrefix=Wi,Hi.browserPrefixToKey=Ki,Hi.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},Hi.default=void 0;var Vi=["Moz","Webkit","O","ms"];function Wi(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";var r=null===(e=window.document)||void 0===e||null===(t=e.documentElement)||void 0===t?void 0:t.style;if(!r)return"";if(n in r)return"";for(var o=0;o<Vi.length;o++)if(Ki(n,Vi[o])in r)return Vi[o];return""}function Ki(e,t){return t?"".concat(t).concat(function(e){for(var t="",n=!0,r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):"-"===e[r]?n=!0:t+=e[r];return t}(e)):e}var Xi=Wi();function Ji(e){return Ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ji(e)}Hi.default=Xi,Object.defineProperty($i,"__esModule",{value:!0}),$i.matchesSelector=ll,$i.matchesSelectorAndParentsTo=function(e,t,n){var r=e;do{if(ll(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1},$i.addEvent=function(e,t,n,r){if(e){var o=rl({capture:!0},r);e.addEventListener?e.addEventListener(t,n,o):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}},$i.removeEvent=function(e,t,n,r){if(e){var o=rl({capture:!0},r);e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}},$i.outerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return(t+=(0,Qi.int)(n.borderTopWidth))+(0,Qi.int)(n.borderBottomWidth)},$i.outerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return(t+=(0,Qi.int)(n.borderLeftWidth))+(0,Qi.int)(n.borderRightWidth)},$i.innerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return(t-=(0,Qi.int)(n.paddingTop))-(0,Qi.int)(n.paddingBottom)},$i.innerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return(t-=(0,Qi.int)(n.paddingLeft))-(0,Qi.int)(n.paddingRight)},$i.offsetXYFromParent=function(e,t,n){var r=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect();return{x:(e.clientX+t.scrollLeft-r.left)/n,y:(e.clientY+t.scrollTop-r.top)/n}},$i.createCSSTransform=function(e,t){var n=al(e,t,"px");return ol({},(0,el.browserPrefixToKey)("transform",el.default),n)},$i.createSVGTransform=function(e,t){return al(e,t,"")},$i.getTranslation=al,$i.getTouch=function(e,t){return e.targetTouches&&(0,Qi.findInArray)(e.targetTouches,(function(e){return t===e.identifier}))||e.changedTouches&&(0,Qi.findInArray)(e.changedTouches,(function(e){return t===e.identifier}))},$i.getTouchIdentifier=function(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:void 0},$i.addUserSelectStyles=function(e){if(e){var t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t)),e.body&&ul(e.body,"react-draggable-transparent-selection")}},$i.removeUserSelectStyles=function(e){if(e)try{if(e.body&&cl(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{var t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(e){}},$i.addClassName=ul,$i.removeClassName=cl;var Qi=Yi,el=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==Ji(e)&&"function"!=typeof e)return{default:e};var n=tl(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(r,i,l):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(Hi);function tl(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(tl=function(e){return e?n:t})(e)}function nl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nl(Object(n),!0).forEach((function(t){ol(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ol(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var il="";function ll(e,t){return il||(il=(0,Qi.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,Qi.isFunction)(e[t])}))),!!(0,Qi.isFunction)(e[il])&&e[il](t)}function al(e,t,n){var r=e.x,o=e.y,i="translate(".concat(r).concat(n,",").concat(o).concat(n,")");if(t){var l="".concat("string"==typeof t.x?t.x:t.x+n),a="".concat("string"==typeof t.y?t.y:t.y+n);i="translate(".concat(l,", ").concat(a,")")+i}return i}function ul(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function cl(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var sl={};Object.defineProperty(sl,"__esModule",{value:!0}),sl.getBoundPosition=function(e,t,n){if(!e.props.bounds)return[t,n];var r=e.props.bounds;r="string"==typeof r?r:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(r);var o=fl(e);if("string"==typeof r){var i,l=o.ownerDocument,a=l.defaultView;if(!((i="parent"===r?o.parentNode:l.querySelector(r))instanceof a.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');var u=i,c=a.getComputedStyle(o),s=a.getComputedStyle(u);r={left:-o.offsetLeft+(0,dl.int)(s.paddingLeft)+(0,dl.int)(c.marginLeft),top:-o.offsetTop+(0,dl.int)(s.paddingTop)+(0,dl.int)(c.marginTop),right:(0,pl.innerWidth)(u)-(0,pl.outerWidth)(o)-o.offsetLeft+(0,dl.int)(s.paddingRight)-(0,dl.int)(c.marginRight),bottom:(0,pl.innerHeight)(u)-(0,pl.outerHeight)(o)-o.offsetTop+(0,dl.int)(s.paddingBottom)-(0,dl.int)(c.marginBottom)}}return(0,dl.isNum)(r.right)&&(t=Math.min(t,r.right)),(0,dl.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,dl.isNum)(r.left)&&(t=Math.max(t,r.left)),(0,dl.isNum)(r.top)&&(n=Math.max(n,r.top)),[t,n]},sl.snapToGrid=function(e,t,n){return[Math.round(t/e[0])*e[0],Math.round(n/e[1])*e[1]]},sl.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},sl.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},sl.getControlPosition=function(e,t,n){var r="number"==typeof t?(0,pl.getTouch)(e,t):null;if("number"==typeof t&&!r)return null;var o=fl(n),i=n.props.offsetParent||o.offsetParent||o.ownerDocument.body;return(0,pl.offsetXYFromParent)(r||e,i,n.props.scale)},sl.createCoreData=function(e,t,n){var r=e.state,o=!(0,dl.isNum)(r.lastX),i=fl(e);return o?{node:i,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:i,deltaX:t-r.lastX,deltaY:n-r.lastY,lastX:r.lastX,lastY:r.lastY,x:t,y:n}},sl.createDraggableData=function(e,t){var n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}};var dl=Yi,pl=$i;function fl(e){var t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var ml={},vl={};function yl(e){return yl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yl(e)}Object.defineProperty(vl,"__esModule",{value:!0}),vl.default=function(){},Object.defineProperty(ml,"__esModule",{value:!0}),ml.default=void 0;var gl=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==yl(e)&&"function"!=typeof e)return{default:e};var n=xl(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(r,i,l):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(l()),hl=Ol(w.exports),bl=Ol(c()),wl=$i,_l=sl,El=Yi,Cl=Ol(vl);function Ol(e){return e&&e.__esModule?e:{default:e}}function xl(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(xl=function(e){return e?n:t})(e)}function kl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Al(e,t){return Al=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Al(e,t)}function jl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dl(e){return Dl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Dl(e)}function Pl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Tl={start:"touchstart",move:"touchmove",stop:"touchend"},Fl={start:"mousedown",move:"mousemove",stop:"mouseup"},Ll=Fl,Bl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Al(e,t)}(l,e);var t,n,r,o,i=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Dl(r);if(o){var n=Dl(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===yl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jl(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Pl(jl(e=i.call.apply(i,[this].concat(n))),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),Pl(jl(e),"mounted",!1),Pl(jl(e),"handleDragStart",(function(t){if(e.props.onMouseDown(t),!e.props.allowAnyClick&&"number"==typeof t.button&&0!==t.button)return!1;var n=e.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var r=n.ownerDocument;if(!(e.props.disabled||!(t.target instanceof r.defaultView.Node)||e.props.handle&&!(0,wl.matchesSelectorAndParentsTo)(t.target,e.props.handle,n)||e.props.cancel&&(0,wl.matchesSelectorAndParentsTo)(t.target,e.props.cancel,n))){"touchstart"===t.type&&t.preventDefault();var o=(0,wl.getTouchIdentifier)(t);e.setState({touchIdentifier:o});var i=(0,_l.getControlPosition)(t,o,jl(e));if(null!=i){var l=i.x,a=i.y,u=(0,_l.createCoreData)(jl(e),l,a);(0,Cl.default)("DraggableCore: handleDragStart: %j",u),(0,Cl.default)("calling",e.props.onStart),!1!==e.props.onStart(t,u)&&!1!==e.mounted&&(e.props.enableUserSelectHack&&(0,wl.addUserSelectStyles)(r),e.setState({dragging:!0,lastX:l,lastY:a}),(0,wl.addEvent)(r,Ll.move,e.handleDrag),(0,wl.addEvent)(r,Ll.stop,e.handleDragStop))}}})),Pl(jl(e),"handleDrag",(function(t){var n=(0,_l.getControlPosition)(t,e.state.touchIdentifier,jl(e));if(null!=n){var r=n.x,o=n.y;if(Array.isArray(e.props.grid)){var i=r-e.state.lastX,l=o-e.state.lastY,a=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(e){a=!0,o=e}finally{try{l||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return kl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kl(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,_l.snapToGrid)(e.props.grid,i,l),2);if(i=a[0],l=a[1],!i&&!l)return;r=e.state.lastX+i,o=e.state.lastY+l}var u=(0,_l.createCoreData)(jl(e),r,o);if((0,Cl.default)("DraggableCore: handleDrag: %j",u),!1!==e.props.onDrag(t,u)&&!1!==e.mounted)e.setState({lastX:r,lastY:o});else try{e.handleDragStop(new MouseEvent("mouseup"))}catch(t){var c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.handleDragStop(c)}}})),Pl(jl(e),"handleDragStop",(function(t){if(e.state.dragging){var n=(0,_l.getControlPosition)(t,e.state.touchIdentifier,jl(e));if(null!=n){var r=n.x,o=n.y,i=(0,_l.createCoreData)(jl(e),r,o);if(!1===e.props.onStop(t,i)||!1===e.mounted)return!1;var l=e.findDOMNode();l&&e.props.enableUserSelectHack&&(0,wl.removeUserSelectStyles)(l.ownerDocument),(0,Cl.default)("DraggableCore: handleDragStop: %j",i),e.setState({dragging:!1,lastX:NaN,lastY:NaN}),l&&((0,Cl.default)("DraggableCore: Removing handlers"),(0,wl.removeEvent)(l.ownerDocument,Ll.move,e.handleDrag),(0,wl.removeEvent)(l.ownerDocument,Ll.stop,e.handleDragStop))}}})),Pl(jl(e),"onMouseDown",(function(t){return Ll=Fl,e.handleDragStart(t)})),Pl(jl(e),"onMouseUp",(function(t){return Ll=Fl,e.handleDragStop(t)})),Pl(jl(e),"onTouchStart",(function(t){return Ll=Tl,e.handleDragStart(t)})),Pl(jl(e),"onTouchEnd",(function(t){return Ll=Tl,e.handleDragStop(t)})),e}return t=l,(n=[{key:"componentDidMount",value:function(){this.mounted=!0;var e=this.findDOMNode();e&&(0,wl.addEvent)(e,Tl.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.findDOMNode();if(e){var t=e.ownerDocument;(0,wl.removeEvent)(t,Fl.move,this.handleDrag),(0,wl.removeEvent)(t,Tl.move,this.handleDrag),(0,wl.removeEvent)(t,Fl.stop,this.handleDragStop),(0,wl.removeEvent)(t,Tl.stop,this.handleDragStop),(0,wl.removeEvent)(e,Tl.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,wl.removeUserSelectStyles)(t)}}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current)&&void 0!==e?e:bl.default.findDOMNode(this)}},{key:"render",value:function(){return gl.cloneElement(gl.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}])&&Sl(t.prototype,n),l}(gl.Component);ml.default=Bl,Pl(Bl,"displayName","DraggableCore"),Pl(Bl,"propTypes",{allowAnyClick:hl.default.bool,disabled:hl.default.bool,enableUserSelectHack:hl.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:hl.default.arrayOf(hl.default.number),handle:hl.default.string,cancel:hl.default.string,nodeRef:hl.default.object,onStart:hl.default.func,onDrag:hl.default.func,onStop:hl.default.func,onMouseDown:hl.default.func,scale:hl.default.number,className:El.dontSetMe,style:El.dontSetMe,transform:El.dontSetMe}),Pl(Bl,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),function(e){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return d.default}}),e.default=void 0;var n=function(e,n){if(e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var r=v(n);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var a=i?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(o,l,a):o[l]=e[l]}return o.default=e,r&&r.set(e,o),o}(l()),r=m(w.exports),o=m(c()),i=m(Gi),a=$i,u=sl,s=Yi,d=m(ml),p=m(vl),f=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function m(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(g,e);var r,l,c,s,m,v=(s=g,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=O(s);if(m){var r=O(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return C(e)}(this,e)});function g(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),x(C(t=v.call(this,e)),"onDragStart",(function(e,n){if((0,p.default)("Draggable: onDragStart: %j",n),!1===t.props.onStart(e,(0,u.createDraggableData)(C(t),n)))return!1;t.setState({dragging:!0,dragged:!0})})),x(C(t),"onDrag",(function(e,n){if(!t.state.dragging)return!1;(0,p.default)("Draggable: onDrag: %j",n);var r=(0,u.createDraggableData)(C(t),n),o={x:r.x,y:r.y};if(t.props.bounds){var i=o.x,l=o.y;o.x+=t.state.slackX,o.y+=t.state.slackY;var a=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(e){a=!0,o=e}finally{try{l||null==n.return||n.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,u.getBoundPosition)(C(t),o.x,o.y),2),c=a[0],s=a[1];o.x=c,o.y=s,o.slackX=t.state.slackX+(i-o.x),o.slackY=t.state.slackY+(l-o.y),r.x=o.x,r.y=o.y,r.deltaX=o.x-t.state.x,r.deltaY=o.y-t.state.y}if(!1===t.props.onDrag(e,r))return!1;t.setState(o)})),x(C(t),"onDragStop",(function(e,n){if(!t.state.dragging)return!1;if(!1===t.props.onStop(e,(0,u.createDraggableData)(C(t),n)))return!1;(0,p.default)("Draggable: onDragStop: %j",n);var r={dragging:!1,slackX:0,slackY:0};if(Boolean(t.props.position)){var o=t.props.position,i=o.x,l=o.y;r.x=i,r.y=l}t.setState(r)})),t.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:h({},e.position),slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),t}return r=g,l=[{key:"componentDidMount",value:function(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current)&&void 0!==e?e:o.default.findDOMNode(this)}},{key:"render",value:function(){var e,t=this.props;t.axis,t.bounds;var r=t.children,o=t.defaultPosition,l=t.defaultClassName,c=t.defaultClassNameDragging,s=t.defaultClassNameDragged,p=t.position,m=t.positionOffset;t.scale;var v=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,f),g={},b=null,w=!Boolean(p)||this.state.dragging,_=p||o,E={x:(0,u.canDragX)(this)&&w?this.state.x:_.x,y:(0,u.canDragY)(this)&&w?this.state.y:_.y};this.state.isElementSVG?b=(0,a.createSVGTransform)(E,m):g=(0,a.createCSSTransform)(E,m);var C=(0,i.default)(r.props.className||"",l,(x(e={},c,this.state.dragging),x(e,s,this.state.dragged),e));return n.createElement(d.default,y({},v,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),n.cloneElement(n.Children.only(r),{className:C,style:h(h({},r.props.style),g),transform:b}))}}],c=[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.position,r=t.prevPropsPosition;return!n||r&&n.x===r.x&&n.y===r.y?null:((0,p.default)("Draggable: getDerivedStateFromProps %j",{position:n,prevPropsPosition:r}),{x:n.x,y:n.y,prevPropsPosition:h({},n)})}}],l&&_(r.prototype,l),c&&_(r,c),g}(n.Component);e.default=k,x(k,"displayName","Draggable"),x(k,"propTypes",h(h({},d.default.propTypes),{},{axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:s.dontSetMe,style:s.dontSetMe,transform:s.dontSetMe})),x(k,"defaultProps",h(h({},d.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))}(qi);var Ml=qi.default,Nl=qi.DraggableCore;Zi.exports=Ml,Zi.exports.default=Ml;var Il=Zi.exports.DraggableCore=Nl,Rl=Zi.exports;function Zl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ql(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zl(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var zl=function(e){var t=e.onSelectionDragStart,n=e.onSelectionDrag,r=e.onSelectionDragStop,o=e.onSelectionContextMenu,a=St(Et((function(e){return e.transform})),3),u=a[0],c=a[1],s=a[2],d=Et((function(e){return e.selectedNodesBbox})),p=Et((function(e){return e.selectionActive})),f=Et((function(e){return e.selectedElements})),m=Et((function(e){return e.snapToGrid})),v=Et((function(e){return e.snapGrid})),y=Et((function(e){return e.nodes})),g=_t((function(e){return e.updateNodePosDiff})),h=(0,i.useRef)(null),b=(0,i.useMemo)((function(){return m?v:[1,1]}),[m,v]),w=(0,i.useMemo)((function(){return f?f.filter(Mt).map((function(e){var t=y.find((function(t){return t.id===e.id}));return ql(ql({},t),{},{position:null==t?void 0:t.__rf.position})})):[]}),[f,y]),_=(0,i.useMemo)((function(){return{transform:"translate(".concat(u,"px,").concat(c,"px) scale(").concat(s,")")}}),[u,c,s]),E=(0,i.useMemo)((function(){return{width:d.width,height:d.height,top:d.y,left:d.x}}),[d]),C=(0,i.useCallback)((function(e){null==t||t(e,w)}),[t,w]),O=(0,i.useCallback)((function(e,t){n&&n(e,w),g({diff:{x:t.deltaX,y:t.deltaY},isDragging:!0})}),[n,w,g]),x=(0,i.useCallback)((function(e){g({isDragging:!1}),null==r||r(e,w)}),[w,r]),k=(0,i.useCallback)((function(e){var t=f?f.filter(Mt).map((function(e){return y.find((function(t){return t.id===e.id}))})):[];null==o||o(e,t)}),[o]);return!f||p?null:l().createElement("div",{className:"react-flow__nodesselection",style:_},l().createElement(Rl,{scale:s,grid:b,onStart:function(e){return C(e)},onDrag:function(e,t){return O(e,t)},onStop:function(e){return x(e)},nodeRef:h,enableUserSelectHack:!1},l().createElement("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:k,style:E})))},Ul=function(e){var t=e.children,n=e.onPaneClick,r=e.onPaneContextMenu,o=e.onPaneScroll,a=e.onElementsRemove,u=e.deleteKeyCode,c=e.onMove,s=e.onMoveStart,d=e.onMoveEnd,p=e.selectionKeyCode,f=e.multiSelectionKeyCode,m=e.zoomActivationKeyCode,v=e.elementsSelectable,y=e.zoomOnScroll,g=e.zoomOnPinch,h=e.panOnScroll,b=e.panOnScrollSpeed,w=e.panOnScrollMode,_=e.zoomOnDoubleClick,E=e.paneMoveable,C=e.defaultPosition,O=e.defaultZoom,x=e.translateExtent,k=e.preventScrolling,S=e.onSelectionDragStart,A=e.onSelectionDrag,j=e.onSelectionDragStop,D=e.onSelectionContextMenu,P=_t((function(e){return e.unsetNodesSelection})),T=_t((function(e){return e.resetSelectedElements})),F=Et((function(e){return e.nodesSelectionActive})),L=Tt(p);!function(e){var t=e.deleteKeyCode,n=e.multiSelectionKeyCode,r=e.onElementsRemove,o=Ct(),l=_t((function(e){return e.unsetNodesSelection})),a=_t((function(e){return e.setMultiSelectionActive})),u=_t((function(e){return e.resetSelectedElements})),c=Tt(t),s=Tt(n);(0,i.useEffect)((function(){var e=o.getState(),t=e.edges,n=e.selectedElements;if(r&&c&&n){var i=n.filter(Mt),a=Wt(i,t),s=[].concat(kt(n),kt(a)).reduce((function(e,t){return e.set(t.id,t)}),new Map);r(Array.from(s.values())),l(),u()}}),[c]),(0,i.useEffect)((function(){a(s)}),[s])}({onElementsRemove:a,deleteKeyCode:u,multiSelectionKeyCode:f});var B=(0,i.useCallback)((function(e){null==n||n(e),P(),T()}),[n]),M=(0,i.useCallback)((function(e){null==r||r(e)}),[r]),N=(0,i.useCallback)((function(e){null==o||o(e)}),[o]);return l().createElement(Mi,{onMove:c,onMoveStart:s,onMoveEnd:d,selectionKeyPressed:L,elementsSelectable:v,zoomOnScroll:y,zoomOnPinch:g,panOnScroll:h,panOnScrollSpeed:b,panOnScrollMode:w,zoomOnDoubleClick:_,paneMoveable:E,defaultPosition:C,defaultZoom:O,translateExtent:x,zoomActivationKeyCode:m,preventScrolling:k},t,l().createElement(Ri,{selectionKeyPressed:L}),F&&l().createElement(zl,{onSelectionDragStart:S,onSelectionDrag:A,onSelectionDragStop:j,onSelectionContextMenu:D}),l().createElement("div",{className:"react-flow__pane",onClick:B,onContextMenu:M,onWheel:N}))};Ul.displayName="FlowRenderer";var Gl=(0,i.memo)(Ul),$l=function(e){var t=Et((function(e){return e.transform})),n=Et((function(e){return e.selectedElements})),r=Et((function(e){return e.nodesDraggable})),o=Et((function(e){return e.nodesConnectable})),a=Et((function(e){return e.elementsSelectable})),u=Et((function(e){return e.width})),c=Et((function(e){return e.height})),s=Et((function(e){return e.nodes})),d=_t((function(e){return e.updateNodeDimensions})),p=e.onlyRenderVisibleElements?Vt(s,{x:0,y:0,width:u,height:c},t,!0):s,f=(0,i.useMemo)((function(){return{transform:"translate(".concat(t[0],"px,").concat(t[1],"px) scale(").concat(t[2],")")}}),[t[0],t[1],t[2]]),m=(0,i.useMemo)((function(){return"undefined"==typeof ResizeObserver?null:new ResizeObserver((function(e){var t=e.map((function(e){return{id:e.target.getAttribute("data-id"),nodeElement:e.target}}));d(t)}))}),[]);return l().createElement("div",{className:"react-flow__nodes",style:f},p.map((function(i){var u=i.type||"default",c=e.nodeTypes[u]||e.nodeTypes.default;e.nodeTypes[u]||console.warn('Node type "'.concat(u,'" not found. Using fallback type "default".'));var s=!!(i.draggable||r&&void 0===i.draggable),d=!!(i.selectable||a&&void 0===i.selectable),p=!!(i.connectable||o&&void 0===i.connectable);return l().createElement(c,{key:i.id,id:i.id,className:i.className,style:i.style,type:u,data:i.data,sourcePosition:i.sourcePosition,targetPosition:i.targetPosition,isHidden:i.isHidden,xPos:i.__rf.position.x,yPos:i.__rf.position.y,isDragging:i.__rf.isDragging,isInitialized:null!==i.__rf.width&&null!==i.__rf.height,snapGrid:e.snapGrid,snapToGrid:e.snapToGrid,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onElementClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onNodeDoubleClick:e.onNodeDoubleClick,onNodeDragStart:e.onNodeDragStart,onNodeDrag:e.onNodeDrag,onNodeDragStop:e.onNodeDragStop,scale:t[2],selected:(null==n?void 0:n.some((function(e){return e.id===i.id})))||!1,isDraggable:s,isSelectable:d,isConnectable:p,resizeObserver:m,dragHandle:i.dragHandle})})))};$l.displayName="NodeRenderer";var Yl=(0,i.memo)($l),Hl=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"];function Vl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Wl=function(e){var t=e.x,n=e.y,r=e.label,o=e.labelStyle,a=void 0===o?{}:o,u=e.labelShowBg,c=void 0===u||u,f=e.labelBgStyle,m=void 0===f?{}:f,v=e.labelBgPadding,y=void 0===v?[2,4]:v,g=e.labelBgBorderRadius,h=void 0===g?2:g,b=e.children,w=e.className,_=d(e,Hl),E=(0,i.useRef)(null),C=St((0,i.useState)({x:0,y:0,width:0,height:0}),2),O=C[0],x=C[1],k=p(["react-flow__edge-textwrapper",w]);return(0,i.useEffect)((function(){if(E.current){var e=E.current.getBBox();x({x:e.x,y:e.y,width:e.width,height:e.height})}}),[r]),void 0!==r&&r?l().createElement("g",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vl(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({transform:"translate(".concat(t-O.width/2," ").concat(n-O.height/2,")"),className:k},_),c&&l().createElement("rect",{width:O.width+2*y[0],x:-y[0],y:-y[1],height:O.height+2*y[1],className:"react-flow__edge-textbg",style:m,rx:h,ry:h}),l().createElement("text",{className:"react-flow__edge-text",y:O.height/2,dy:"0.3em",ref:E,style:a},r),b):null},Kl=(0,i.memo)(Wl),Xl=function(e,t){return void 0!==t&&t?"url(#".concat(t,")"):void 0!==e?"url(#react-flow__".concat(e,")"):"none"},Jl=[bi.Left,bi.Right],Ql=function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,i=e.sourcePosition,l=void 0===i?bi.Bottom:i,a=e.targetPosition,u=void 0===a?bi.Top:a,c=Jl.includes(l),s=Jl.includes(u);if(c&&!s||s&&!c){var d=c?Math.abs(r-t):0,p=t>r?t-d:t+d,f=c?0:Math.abs(o-n);return[p,n<o?n+f:n-f,d,f]}var m=Math.abs(r-t)/2,v=r<t?r+m:r-m,y=Math.abs(o-n)/2;return[v,o<n?o+y:o-y,m,y]};function ea(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=void 0===r?bi.Bottom:r,i=e.targetX,l=e.targetY,a=e.targetPosition,u=void 0===a?bi.Top:a,c=e.centerX,s=e.centerY,d=St(Ql({sourceX:t,sourceY:n,targetX:i,targetY:l}),2),p=d[0],f=d[1],m=[bi.Left,bi.Right],v=void 0!==c?c:p,y=void 0!==s?s:f,g="M".concat(t,",").concat(n," C").concat(t,",").concat(y," ").concat(i,",").concat(y," ").concat(i,",").concat(l);return m.includes(o)&&m.includes(u)?g="M".concat(t,",").concat(n," C").concat(v,",").concat(n," ").concat(v,",").concat(l," ").concat(i,",").concat(l):m.includes(u)?g="M".concat(t,",").concat(n," Q").concat(t,",").concat(l," ").concat(i,",").concat(l):m.includes(o)&&(g="M".concat(t,",").concat(n," Q").concat(i,",").concat(n," ").concat(i,",").concat(l)),g}var ta=(0,i.memo)((function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,i=e.sourcePosition,a=void 0===i?bi.Bottom:i,u=e.targetPosition,c=void 0===u?bi.Top:u,s=e.label,d=e.labelStyle,p=e.labelShowBg,f=e.labelBgStyle,m=e.labelBgPadding,v=e.labelBgBorderRadius,y=e.style,g=e.arrowHeadType,h=e.markerEndId,b=St(Ql({sourceX:t,sourceY:n,targetX:r,targetY:o,sourcePosition:a,targetPosition:c}),2),w=b[0],_=b[1],E=ea({sourceX:t,sourceY:n,sourcePosition:a,targetX:r,targetY:o,targetPosition:c}),C=s?l().createElement(Kl,{x:w,y:_,label:s,labelStyle:d,labelShowBg:p,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:v}):null,O=Xl(g,h);return l().createElement(l().Fragment,null,l().createElement("path",{style:y,d:E,className:"react-flow__edge-path",markerEnd:O}),C)})),na=function(e,t,n){return"L ".concat(e,",").concat(t-n,"Q ").concat(e,",").concat(t," ").concat(e+n,",").concat(t)},ra=function(e,t,n){return"L ".concat(e+n,",").concat(t,"Q ").concat(e,",").concat(t," ").concat(e,",").concat(t-n)},oa=function(e,t,n){return"L ".concat(e,",").concat(t-n,"Q ").concat(e,",").concat(t," ").concat(e-n,",").concat(t)},ia=function(e,t,n){return"L ".concat(e-n,",").concat(t,"Q ").concat(e,",").concat(t," ").concat(e,",").concat(t-n)},la=function(e,t,n){return"L ".concat(e+n,",").concat(t,"Q ").concat(e,",").concat(t," ").concat(e,",").concat(t+n)},aa=function(e,t,n){return"L ".concat(e,",").concat(t+n,"Q ").concat(e,",").concat(t," ").concat(e+n,",").concat(t)},ua=function(e,t,n){return"L ".concat(e,",").concat(t+n,"Q ").concat(e,",").concat(t," ").concat(e-n,",").concat(t)},ca=function(e,t,n){return"L ".concat(e-n,",").concat(t,"Q ").concat(e,",").concat(t," ").concat(e,",").concat(t+n)};function sa(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=void 0===r?bi.Bottom:r,i=e.targetX,l=e.targetY,a=e.targetPosition,u=void 0===a?bi.Top:a,c=e.borderRadius,s=void 0===c?5:c,d=e.centerX,p=e.centerY,f=St(Ql({sourceX:t,sourceY:n,targetX:i,targetY:l}),4),m=f[0],v=f[1],y=f[2],g=f[3],h=Math.min(s,Math.abs(i-t)),b=Math.min(s,Math.abs(l-n)),w=Math.min(h,b,y,g),_=[bi.Left,bi.Right],E=void 0!==d?d:m,C=void 0!==p?p:v,O=null,x=null;return t<=i?(O=n<=l?na(t,C,w):aa(t,C,w),x=n<=l?ca(i,C,w):ia(i,C,w)):(O=n<l?oa(t,C,w):ua(t,C,w),x=n<l?la(i,C,w):ra(i,C,w)),_.includes(o)&&_.includes(u)?t<=i?(O=n<=l?ca(E,n,w):ia(E,n,w),x=n<=l?na(E,l,w):aa(E,l,w)):(o===bi.Right&&u===bi.Left||o===bi.Left&&u===bi.Right||o===bi.Left&&u===bi.Left)&&(O=n<=l?la(E,n,w):ra(E,n,w),x=n<=l?oa(E,l,w):ua(E,l,w)):_.includes(o)&&!_.includes(u)?(O=t<=i?n<=l?ca(i,n,w):ia(i,n,w):n<=l?la(i,n,w):ra(i,n,w),x=""):!_.includes(o)&&_.includes(u)&&(O=t<=i?n<=l?na(t,l,w):aa(t,l,w):n<=l?oa(t,l,w):ua(t,l,w),x=""),"M ".concat(t,",").concat(n).concat(O).concat(x,"L ").concat(i,",").concat(l)}var da=(0,i.memo)((function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,i=e.label,a=e.labelStyle,u=e.labelShowBg,c=e.labelBgStyle,s=e.labelBgPadding,d=e.labelBgBorderRadius,p=e.style,f=e.sourcePosition,m=void 0===f?bi.Bottom:f,v=e.targetPosition,y=void 0===v?bi.Top:v,g=e.arrowHeadType,h=e.markerEndId,b=e.borderRadius,w=void 0===b?5:b,_=St(Ql({sourceX:t,sourceY:n,targetX:r,targetY:o,sourcePosition:m,targetPosition:y}),2),E=_[0],C=_[1],O=sa({sourceX:t,sourceY:n,sourcePosition:m,targetX:r,targetY:o,targetPosition:y,borderRadius:w}),x=Xl(g,h),k=i?l().createElement(Kl,{x:E,y:C,label:i,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:s,labelBgBorderRadius:d}):null;return l().createElement(l().Fragment,null,l().createElement("path",{style:p,className:"react-flow__edge-path",d:O,markerEnd:x}),k)})),pa=function(e){var t=e.connectionNodeId,n=e.connectionHandleId,r=e.connectionHandleType,o=e.connectionLineStyle,a=e.connectionPositionX,u=e.connectionPositionY,c=e.connectionLineType,s=void 0===c?Ci.Bezier:c,d=e.nodes,p=void 0===d?[]:d,f=e.transform,m=e.isConnectable,v=e.CustomConnectionLineComponent,y=St((0,i.useState)(null),2),g=y[0],h=y[1],b=t,w=n;if((0,i.useEffect)((function(){var e=p.find((function(e){return e.id===b}))||null;h(e)}),[]),!g||!m)return null;var _=function(e,t,n){var r="source"===n?"target":"source",o=t.__rf.handleBounds[n]||t.__rf.handleBounds[r];return e?o.find((function(t){return t.id===e})):o[0]}(w,g,r),E=_?_.x+_.width/2:g.__rf.width/2,C=_?_.y+_.height/2:g.__rf.height,O=g.__rf.position.x+E,x=g.__rf.position.y+C,k=(a-f[0])/f[2],S=(u-f[1])/f[2],A=(null==_?void 0:_.position)===bi.Left||(null==_?void 0:_.position)===bi.Right?bi.Left:bi.Top;if(v)return l().createElement("g",{className:"react-flow__connection"},l().createElement(v,{sourceX:O,sourceY:x,sourcePosition:null==_?void 0:_.position,targetX:k,targetY:S,targetPosition:A,connectionLineType:s,connectionLineStyle:o,sourceNode:g,sourceHandle:_}));var j;return j=s===Ci.Bezier?ea({sourceX:O,sourceY:x,sourcePosition:null==_?void 0:_.position,targetX:k,targetY:S,targetPosition:A}):s===Ci.Step?sa({sourceX:O,sourceY:x,sourcePosition:null==_?void 0:_.position,targetX:k,targetY:S,targetPosition:A,borderRadius:0}):s===Ci.SmoothStep?sa({sourceX:O,sourceY:x,sourcePosition:null==_?void 0:_.position,targetX:k,targetY:S,targetPosition:A}):"M".concat(O,",").concat(x," ").concat(k,",").concat(S),l().createElement("g",{className:"react-flow__connection"},l().createElement("path",{d:j,className:"react-flow__connection-path",style:o}))},fa=function(e){var t=e.id,n=e.children;return l().createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:"12.5",markerHeight:"12.5",viewBox:"-10 -10 20 20",orient:"auto",refX:"0",refY:"0"},n)},ma=function(e){var t=e.color;return l().createElement("defs",null,l().createElement(fa,{id:"react-flow__arrowclosed"},l().createElement("polyline",{stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",fill:t,points:"-5,-4 0,0 -5,4 -5,-4"})),l().createElement(fa,{id:"react-flow__arrow"},l().createElement("polyline",{stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",fill:"none",points:"-5,-4 0,0 -5,4"})))};function va(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ya(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?va(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):va(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}ma.displayName="MarkerDefinitions";var ga=(0,i.memo)((function(e){return l().createElement(da,ya(ya({},e),{},{borderRadius:0}))})),ha=(0,i.memo)((function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,i=e.label,a=e.labelStyle,u=e.labelShowBg,c=e.labelBgStyle,s=e.labelBgPadding,d=e.labelBgBorderRadius,p=e.style,f=e.arrowHeadType,m=e.markerEndId,v=Math.abs(o-n)/2,y=o<n?o+v:o-v,g=Math.abs(r-t)/2,h=r<t?r+g:r-g,b=Xl(f,m),w=i?l().createElement(Kl,{x:h,y,label:i,labelStyle:a,labelShowBg:u,labelBgStyle:c,labelBgPadding:s,labelBgBorderRadius:d}):null;return l().createElement(l().Fragment,null,l().createElement("path",{style:p,className:"react-flow__edge-path",d:"M ".concat(t,",").concat(n,"L ").concat(r,",").concat(o),markerEnd:b}),w)}));function ba(e,t,n,r,o,i,l){var a=l.elementFromPoint(e.clientX,e.clientY),u=(null==a?void 0:a.classList.contains("target"))||!1,c=(null==a?void 0:a.classList.contains("source"))||!1,s={elementBelow:a,isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(a&&(u||c)&&(s.isHoveringHandle=!0,t!==Ei.Strict||n&&c||!n&&u)){var d=a.getAttribute("data-nodeid"),p=a.getAttribute("data-handleid"),f=n?{source:d,sourceHandle:p,target:r,targetHandle:o}:{source:r,sourceHandle:o,target:d,targetHandle:p};s.connection=f,s.isValid=i(f)}return s}function wa(e){null==e||e.classList.remove("react-flow__handle-valid"),null==e||e.classList.remove("react-flow__handle-connecting")}function _a(e,t,n,r,o,i,l,a,u,c,s,d,p,f){var m,v,y,g=e.target.closest(".react-flow"),h=(null===(v=(m=e.target).getRootNode)||void 0===v?void 0:v.call(m))||(null===(y=window)||void 0===y?void 0:y.document);if(h){var b=h.elementFromPoint(e.clientX,e.clientY),w=null==b?void 0:b.classList.contains("target"),_=null==b?void 0:b.classList.contains("source");if(g&&(w||_||c)){var E,C=c||(w?"target":"source"),O=g.getBoundingClientRect();o({x:e.clientX-O.left,y:e.clientY-O.top}),r({connectionNodeId:n,connectionHandleId:t,connectionHandleType:C}),null==d||d(e,{nodeId:n,handleId:t,handleType:C}),h.addEventListener("mousemove",x),h.addEventListener("mouseup",(function e(o){var d=ba(o,u,l,n,t,a,h),m=d.connection,v=d.isValid;null==p||p(o),v&&(null==i||i(m)),null==f||f(o),c&&s&&s(o),wa(E),r({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null}),h.removeEventListener("mousemove",x),h.removeEventListener("mouseup",e)}))}}function x(e){o({x:e.clientX-O.left,y:e.clientY-O.top});var r=ba(e,u,l,n,t,a,h),i=r.connection,c=r.elementBelow,s=r.isValid;if(!r.isHoveringHandle)return wa(E);i.source!==i.target&&c&&(E=c,c.classList.add("react-flow__handle-connecting"),c.classList.toggle("react-flow__handle-valid",s))}}var Ea=function(e,t,n){return n===bi.Left?e-t:n===bi.Right?e+t:e},Ca=function(e,t,n){return n===bi.Top?e-t:n===bi.Bottom?e+t:e},Oa=function(e){var t=e.className,n=e.position,r=e.centerX,o=e.centerY,i=e.radius,a=void 0===i?10:i;return l().createElement("circle",{className:p(["react-flow__edgeupdater",t]),cx:Ea(r,a,n),cy:Ca(o,a,n),r:a,stroke:"transparent",fill:"transparent"})},xa=function(e){var t=function(t){var n=t.id,r=t.className,o=t.type,a=t.data,u=t.onClick,c=t.onEdgeDoubleClick,s=t.selected,d=t.animated,f=t.label,m=t.labelStyle,v=t.labelShowBg,y=t.labelBgStyle,g=t.labelBgPadding,h=t.labelBgBorderRadius,b=t.style,w=t.arrowHeadType,_=t.source,E=t.target,C=t.sourceX,O=t.sourceY,x=t.targetX,k=t.targetY,S=t.sourcePosition,A=t.targetPosition,j=t.elementsSelectable,D=t.markerEndId,P=t.isHidden,T=t.sourceHandleId,F=t.targetHandleId,L=t.handleEdgeUpdate,B=t.onConnectEdge,M=t.onContextMenu,N=t.onMouseEnter,I=t.onMouseMove,R=t.onMouseLeave,Z=t.edgeUpdaterRadius,q=t.onEdgeUpdateStart,z=t.onEdgeUpdateEnd,U=_t((function(e){return e.addSelectedElements})),G=_t((function(e){return e.setConnectionNodeId})),$=_t((function(e){return e.unsetNodesSelection})),Y=_t((function(e){return e.setConnectionPosition})),H=Et((function(e){return e.connectionMode})),V=St((0,i.useState)(!1),2),W=V[0],K=V[1],X=!j&&!u,J=p(["react-flow__edge","react-flow__edge-".concat(o),r,{selected:s,animated:d,inactive:X,updating:W}]),Q=(0,i.useMemo)((function(){var e={id:n,source:_,target:E,type:o};return T&&(e.sourceHandle=T),F&&(e.targetHandle=F),void 0!==a&&(e.data=a),e}),[n,_,E,o,T,F,a]),ee=(0,i.useCallback)((function(e){j&&($(),U(Q)),null==u||u(e,Q)}),[j,Q,u]),te=(0,i.useCallback)((function(e){null==c||c(e,Q)}),[Q,c]),ne=(0,i.useCallback)((function(e){null==M||M(e,Q)}),[Q,M]),re=(0,i.useCallback)((function(e){null==N||N(e,Q)}),[Q,M]),oe=(0,i.useCallback)((function(e){null==I||I(e,Q)}),[Q,M]),ie=(0,i.useCallback)((function(e){null==R||R(e,Q)}),[Q,M]),le=(0,i.useCallback)((function(e,t){var n=t?E:_,r=t?F:T,o=t;null==q||q(e,Q),_a(e,r,n,G,Y,B,o,(function(){return!0}),H,t?"target":"source",z?function(e){return z(e,Q)}:void 0)}),[n,_,E,o,T,F,G,Y,Q,B]),ae=(0,i.useCallback)((function(e){le(e,!0)}),[n,_,T,le]),ue=(0,i.useCallback)((function(e){le(e,!1)}),[n,E,F,le]),ce=(0,i.useCallback)((function(){return K(!0)}),[K]),se=(0,i.useCallback)((function(){return K(!1)}),[K]);return P?null:l().createElement("g",{className:J,onClick:ee,onDoubleClick:te,onContextMenu:ne,onMouseEnter:re,onMouseMove:oe,onMouseLeave:ie},l().createElement(e,{id:n,source:_,target:E,selected:s,animated:d,label:f,labelStyle:m,labelShowBg:v,labelBgStyle:y,labelBgPadding:g,labelBgBorderRadius:h,data:a,style:b,arrowHeadType:w,sourceX:C,sourceY:O,targetX:x,targetY:k,sourcePosition:S,targetPosition:A,markerEndId:D,sourceHandleId:T,targetHandleId:F}),L&&l().createElement("g",{onMouseDown:ae,onMouseEnter:ce,onMouseOut:se},l().createElement(Oa,{position:S,centerX:C,centerY:O,radius:Z})),L&&l().createElement("g",{onMouseDown:ue,onMouseEnter:ce,onMouseOut:se},l().createElement(Oa,{position:A,centerX:x,centerY:k,radius:Z})))};return t.displayName="EdgeWrapper",(0,i.memo)(t)};function ka(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ka(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ka(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Aa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=((null==n?void 0:n.x)||0)+t.__rf.position.x,o=((null==n?void 0:n.y)||0)+t.__rf.position.y,i=(null==n?void 0:n.width)||t.__rf.width,l=(null==n?void 0:n.height)||t.__rf.height;switch(e){case bi.Top:return{x:r+i/2,y:o};case bi.Right:return{x:r+i,y:o+l/2};case bi.Bottom:return{x:r+i/2,y:o+l};case bi.Left:return{x:r,y:o+l/2}}}function ja(e,t){if(!e)return null;var n=null;return 1!==e.length&&t?t&&(n=e.find((function(e){return e.id===t}))):n=e[0],void 0===n?null:n}var Da=function(e){var t=e.edge,n=e.props,r=e.nodes,o=e.selectedElements,a=e.elementsSelectable,u=e.transform,c=e.width,s=e.height,d=e.onlyRenderVisibleElements,p=e.connectionMode,f=t.sourceHandle||null,m=t.targetHandle||null,v=function(e,t){return t.reduce((function(t,n){return n.id===e.source&&(t.sourceNode=n),n.id===e.target&&(t.targetNode=n),t}),{sourceNode:null,targetNode:null})}(t,r),y=v.sourceNode,g=v.targetNode,h=(0,i.useCallback)((function(e){var r;null===(r=n.onEdgeUpdate)||void 0===r||r.call(n,t,e)}),[t,n.onEdgeUpdate]);if(!y)return console.warn("couldn't create edge for source id: ".concat(t.source,"; edge id: ").concat(t.id)),null;if(!g)return console.warn("couldn't create edge for target id: ".concat(t.target,"; edge id: ").concat(t.id)),null;if(!y.__rf.width||!g.__rf.width)return null;var b=t.type||"default",w=n.edgeTypes[b]||n.edgeTypes.default,_=g.__rf.handleBounds,E=p===Ei.Strict?_.target:_.target||_.source,C=ja(y.__rf.handleBounds.source,f),O=ja(E,m),x=C?C.position:bi.Bottom,k=O?O.position:bi.Top;if(!C)return console.warn("couldn't create edge for source handle id: ".concat(f,"; edge id: ").concat(t.id)),null;if(!O)return console.warn("couldn't create edge for target handle id: ".concat(m,"; edge id: ").concat(t.id)),null;var S=function(e,t,n,r,o,i){var l=Aa(n,e,t),a=Aa(i,r,o);return{sourceX:l.x,sourceY:l.y,targetX:a.x,targetY:a.y}}(y,C,x,g,O,k),A=S.sourceX,j=S.sourceY,D=S.targetX,P=S.targetY,T=!d||function(e){var t=e.sourcePos,n=e.targetPos,r=e.width,o=e.height,i=e.transform,l={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x,n.x),y2:Math.max(t.y,n.y)};l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);var a=$t({x:(0-i[0])/i[2],y:(0-i[1])/i[2],width:r/i[2],height:o/i[2]}),u=Math.max(0,Math.min(a.x2,l.x2)-Math.max(a.x,l.x)),c=Math.max(0,Math.min(a.y2,l.y2)-Math.max(a.y,l.y));return Math.ceil(u*c)>0}({sourcePos:{x:A,y:j},targetPos:{x:D,y:P},width:c,height:s,transform:u});if(!T)return null;var F=(null==o?void 0:o.some((function(e){return Bt(e)&&e.id===t.id})))||!1;return l().createElement(w,{key:t.id,id:t.id,className:t.className,type:t.type,data:t.data,onClick:n.onElementClick,selected:F,animated:t.animated,label:t.label,labelStyle:t.labelStyle,labelShowBg:t.labelShowBg,labelBgStyle:t.labelBgStyle,labelBgPadding:t.labelBgPadding,labelBgBorderRadius:t.labelBgBorderRadius,style:t.style,arrowHeadType:t.arrowHeadType,source:t.source,target:t.target,sourceHandleId:f,targetHandleId:m,sourceX:A,sourceY:j,targetX:D,targetY:P,sourcePosition:x,targetPosition:k,elementsSelectable:a,markerEndId:n.markerEndId,isHidden:t.isHidden,onConnectEdge:h,handleEdgeUpdate:void 0!==n.onEdgeUpdate,onContextMenu:n.onEdgeContextMenu,onMouseEnter:n.onEdgeMouseEnter,onMouseMove:n.onEdgeMouseMove,onMouseLeave:n.onEdgeMouseLeave,edgeUpdaterRadius:n.edgeUpdaterRadius,onEdgeDoubleClick:n.onEdgeDoubleClick,onEdgeUpdateStart:n.onEdgeUpdateStart,onEdgeUpdateEnd:n.onEdgeUpdateEnd})},Pa=function(e){var t=Et((function(e){return e.transform})),n=Et((function(e){return e.nodes})),r=Et((function(e){return e.edges})),o=Et((function(e){return e.connectionNodeId})),i=Et((function(e){return e.connectionHandleId})),a=Et((function(e){return e.connectionHandleType})),u=Et((function(e){return e.connectionPosition})),c=Et((function(e){return e.selectedElements})),s=Et((function(e){return e.nodesConnectable})),d=Et((function(e){return e.elementsSelectable})),p=Et((function(e){return e.width})),f=Et((function(e){return e.height}));if(!p)return null;var m=e.connectionLineType,v=e.arrowHeadColor,y=e.connectionLineStyle,g=e.connectionLineComponent,h=e.onlyRenderVisibleElements,b="translate(".concat(t[0],"px,").concat(t[1],"px) scale(").concat(t[2],")"),w=o&&a;return l().createElement("svg",{width:p,height:f,className:"react-flow__edges"},l().createElement(ma,{color:v}),l().createElement("g",{style:{transform:b}},r.map((function(r){return l().createElement(Da,{key:r.id,edge:r,props:e,nodes:n,selectedElements:c,elementsSelectable:d,transform:t,width:p,height:f,onlyRenderVisibleElements:h})})),w&&l().createElement(pa,{nodes:n,connectionNodeId:o,connectionHandleId:i,connectionHandleType:a,connectionPositionX:u.x,connectionPositionY:u.y,transform:t,connectionLineStyle:y,connectionLineType:m,isConnectable:s,CustomConnectionLineComponent:g})))};Pa.displayName="EdgeRenderer";var Ta=(0,i.memo)(Pa),Fa={zoomIn:function(){},zoomOut:function(){},zoomTo:function(e){},transform:function(e){},fitView:function(){},setCenter:function(e,t){},fitBounds:function(e){},project:function(e){return e},initialized:!1},La=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.transition().duration(t)},Ba=function(){var e=Ct(),t=Et((function(e){return e.d3Zoom})),n=Et((function(e){return e.d3Selection})),r=(0,i.useMemo)((function(){return n&&t?{zoomIn:function(e){return t.scaleBy(La(n,e),1.2)},zoomOut:function(e){return t.scaleBy(La(n,e),1/1.2)},zoomTo:function(e,r){return t.scaleTo(La(n,r),e)},transform:function(e,r){var o=xi.translate(e.x,e.y).scale(e.zoom);t.transform(La(n,r),o)},fitView:function(){var r,o,i,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{padding:.1,includeHiddenNodes:!1,duration:0},a=e.getState(),u=a.nodes,c=a.width,s=a.height,d=a.minZoom,p=a.maxZoom;if(u.length){var f=Ht(l.includeHiddenNodes?u:u.filter((function(e){return!e.isHidden}))),m=St(Qt(f,c,s,null!==(r=l.minZoom)&&void 0!==r?r:d,null!==(o=l.maxZoom)&&void 0!==o?o:p,null!==(i=l.padding)&&void 0!==i?i:.1),3),v=m[0],y=m[1],g=m[2],h=xi.translate(v,y).scale(g);t.transform(La(n,l.duration),h)}},setCenter:function(r,o,i,l){var a=e.getState(),u=a.width,c=a.height,s=a.maxZoom,d=void 0!==i?i:s,p=u/2-r*d,f=c/2-o*d,m=xi.translate(p,f).scale(d);t.transform(La(n,l),m)},fitBounds:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,i=arguments.length>2?arguments[2]:void 0,l=e.getState(),a=l.width,u=l.height,c=l.minZoom,s=l.maxZoom,d=St(Qt(r,a,u,c,s,o),3),p=d[0],f=d[1],m=d[2],v=xi.translate(p,f).scale(m);t.transform(La(n,i),v)},project:function(t){var n=e.getState(),r=n.transform,o=n.snapToGrid,i=n.snapGrid;return Zt(t,r,o,i)},initialized:!0}:Fa}),[t,n]);return r},Ma=function(e){var t=e.nodeTypes,n=e.edgeTypes,r=e.onMove,o=e.onMoveStart,a=e.onMoveEnd,u=e.onLoad,c=e.onElementClick,s=e.onNodeDoubleClick,d=e.onEdgeDoubleClick,p=e.onNodeMouseEnter,f=e.onNodeMouseMove,m=e.onNodeMouseLeave,v=e.onNodeContextMenu,y=e.onNodeDragStart,g=e.onNodeDrag,h=e.onNodeDragStop,b=e.onSelectionDragStart,w=e.onSelectionDrag,_=e.onSelectionDragStop,E=e.onSelectionContextMenu,C=e.connectionMode,O=e.connectionLineType,x=e.connectionLineStyle,k=e.connectionLineComponent,S=e.selectionKeyCode,A=e.multiSelectionKeyCode,j=e.zoomActivationKeyCode,D=e.onElementsRemove,P=e.deleteKeyCode,T=e.onConnect,F=e.onConnectStart,L=e.onConnectStop,B=e.onConnectEnd,M=e.snapToGrid,N=e.snapGrid,I=e.onlyRenderVisibleElements,R=e.nodesDraggable,Z=e.nodesConnectable,q=e.elementsSelectable,z=e.selectNodesOnDrag,U=e.minZoom,G=e.maxZoom,$=e.defaultZoom,Y=e.defaultPosition,H=e.translateExtent,V=e.preventScrolling,W=e.nodeExtent,K=e.arrowHeadColor,X=e.markerEndId,J=e.zoomOnScroll,Q=e.zoomOnPinch,ee=e.panOnScroll,te=e.panOnScrollSpeed,ne=e.panOnScrollMode,re=e.zoomOnDoubleClick,oe=e.paneMoveable,ie=e.onPaneClick,le=e.onPaneScroll,ae=e.onPaneContextMenu,ue=e.onEdgeUpdate,ce=e.onEdgeContextMenu,se=e.onEdgeMouseEnter,de=e.onEdgeMouseMove,pe=e.onEdgeMouseLeave,fe=e.edgeUpdaterRadius,me=e.onEdgeUpdateStart,ve=e.onEdgeUpdateEnd,ye=(0,i.useRef)(!1),ge=_t((function(e){return e.setOnConnect})),he=_t((function(e){return e.setOnConnectStart})),be=_t((function(e){return e.setOnConnectStop})),we=_t((function(e){return e.setOnConnectEnd})),_e=_t((function(e){return e.setSnapGrid})),Ee=_t((function(e){return e.setSnapToGrid})),Ce=_t((function(e){return e.setNodesDraggable})),Oe=_t((function(e){return e.setNodesConnectable})),xe=_t((function(e){return e.setElementsSelectable})),ke=_t((function(e){return e.setMinZoom})),Se=_t((function(e){return e.setMaxZoom})),Ae=_t((function(e){return e.setTranslateExtent})),je=_t((function(e){return e.setNodeExtent})),De=_t((function(e){return e.setConnectionMode})),Pe=Ct(),Te=Ba(),Fe=Te.zoomIn,Le=Te.zoomOut,Be=Te.zoomTo,Me=Te.transform,Ne=Te.fitView,Ie=Te.initialized;return(0,i.useEffect)((function(){!ye.current&&Ie&&(u&&u({fitView:function(){return Ne(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{padding:.1})},zoomIn:Fe,zoomOut:Le,zoomTo:Be,setTransform:Me,project:qt(Pe),getElements:Xt(Pe),toObject:Jt(Pe)}),ye.current=!0)}),[u,Fe,Le,Be,Me,Ne,Ie]),(0,i.useEffect)((function(){T&&ge(T)}),[T]),(0,i.useEffect)((function(){F&&he(F)}),[F]),(0,i.useEffect)((function(){L&&be(L)}),[L]),(0,i.useEffect)((function(){B&&we(B)}),[B]),(0,i.useEffect)((function(){void 0!==M&&Ee(M)}),[M]),(0,i.useEffect)((function(){void 0!==N&&_e(N)}),[N]),(0,i.useEffect)((function(){void 0!==R&&Ce(R)}),[R]),(0,i.useEffect)((function(){void 0!==Z&&Oe(Z)}),[Z]),(0,i.useEffect)((function(){void 0!==q&&xe(q)}),[q]),(0,i.useEffect)((function(){void 0!==U&&ke(U)}),[U]),(0,i.useEffect)((function(){void 0!==G&&Se(G)}),[G]),(0,i.useEffect)((function(){void 0!==H&&Ae(H)}),[H]),(0,i.useEffect)((function(){void 0!==W&&je(W)}),[W]),(0,i.useEffect)((function(){void 0!==C&&De(C)}),[C]),l().createElement(Gl,{onPaneClick:ie,onPaneContextMenu:ae,onPaneScroll:le,onElementsRemove:D,deleteKeyCode:P,selectionKeyCode:S,multiSelectionKeyCode:A,zoomActivationKeyCode:j,elementsSelectable:q,onMove:r,onMoveStart:o,onMoveEnd:a,zoomOnScroll:J,zoomOnPinch:Q,zoomOnDoubleClick:re,panOnScroll:ee,panOnScrollSpeed:te,panOnScrollMode:ne,paneMoveable:oe,defaultPosition:Y,defaultZoom:$,translateExtent:H,onSelectionDragStart:b,onSelectionDrag:w,onSelectionDragStop:_,onSelectionContextMenu:E,preventScrolling:V},l().createElement(Yl,{nodeTypes:t,onElementClick:c,onNodeDoubleClick:s,onNodeMouseEnter:p,onNodeMouseMove:f,onNodeMouseLeave:m,onNodeContextMenu:v,onNodeDragStop:h,onNodeDrag:g,onNodeDragStart:y,selectNodesOnDrag:z,snapToGrid:M,snapGrid:N,onlyRenderVisibleElements:I}),l().createElement(Ta,{edgeTypes:n,onElementClick:c,onEdgeDoubleClick:d,connectionLineType:O,connectionLineStyle:x,connectionLineComponent:k,connectionMode:C,arrowHeadColor:K,markerEndId:X,onEdgeUpdate:ue,onlyRenderVisibleElements:I,onEdgeContextMenu:ce,onEdgeMouseEnter:se,onEdgeMouseMove:de,onEdgeMouseLeave:pe,onEdgeUpdateStart:me,onEdgeUpdateEnd:ve,edgeUpdaterRadius:fe}))};Ma.displayName="GraphView";var Na=(0,i.memo)(Ma),Ia=function(e){var t=e.elements,n=_t((function(e){return e.setElements}));return(0,i.useEffect)((function(){n(t)}),[t]),null},Ra=(0,i.createContext)(null),Za=Ra.Provider;Ra.Consumer;var qa=["type","position","isValidConnection","isConnectable","id","onConnect","children","className"];function za(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ua=function(){return!0},Ga=(0,i.forwardRef)((function(e,t){var n=e.type,r=void 0===n?"source":n,o=e.position,a=void 0===o?bi.Top:o,u=e.isValidConnection,c=void 0===u?Ua:u,f=e.isConnectable,m=void 0===f||f,v=e.id,y=e.onConnect,g=e.children,h=e.className,b=d(e,qa),w=(0,i.useContext)(Ra),_=_t((function(e){return e.setConnectionPosition})),E=_t((function(e){return e.setConnectionNodeId})),C=Et((function(e){return e.onConnect})),O=Et((function(e){return e.onConnectStart})),x=Et((function(e){return e.onConnectStop})),k=Et((function(e){return e.onConnectEnd})),S=Et((function(e){return e.connectionMode})),A=v||null,j="target"===r,D=(0,i.useCallback)((function(e){null==C||C(e),null==y||y(e)}),[C,y]),P=(0,i.useCallback)((function(e){_a(e,A,w,E,_,D,j,c,S,void 0,void 0,O,x,k)}),[A,w,E,_,D,j,c,S,O,x,k]),T=p(["react-flow__handle","react-flow__handle-".concat(a),"nodrag",h,{source:!j,target:j,connectable:m}]);return l().createElement("div",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?za(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):za(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({"data-handleid":A,"data-nodeid":w,"data-handlepos":a,className:T,onMouseDown:P,ref:t},b),g)}));Ga.displayName="Handle";var $a=(0,i.memo)(Ga),Ya=function(e){var t=e.data,n=e.isConnectable,r=e.targetPosition,o=void 0===r?bi.Top:r,i=e.sourcePosition,a=void 0===i?bi.Bottom:i;return l().createElement(l().Fragment,null,l().createElement($a,{type:"target",position:o,isConnectable:n}),t.label,l().createElement($a,{type:"source",position:a,isConnectable:n}))};Ya.displayName="DefaultNode";var Ha=(0,i.memo)(Ya),Va=function(e){var t=e.data,n=e.isConnectable,r=e.sourcePosition,o=void 0===r?bi.Bottom:r;return l().createElement(l().Fragment,null,t.label,l().createElement($a,{type:"source",position:o,isConnectable:n}))};Va.displayName="InputNode";var Wa=(0,i.memo)(Va),Ka=function(e){var t=e.data,n=e.isConnectable,r=e.targetPosition,o=void 0===r?bi.Top:r;return l().createElement(l().Fragment,null,l().createElement($a,{type:"target",position:o,isConnectable:n}),t.label)};Ka.displayName="OutputNode";var Xa=(0,i.memo)(Ka);function Ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Qa=function(e){var t=function(t){var n=t.id,r=t.type,o=t.data,a=t.scale,u=t.xPos,c=t.yPos,d=t.selected,f=t.onClick,m=t.onMouseEnter,v=t.onMouseMove,y=t.onMouseLeave,g=t.onContextMenu,h=t.onNodeDoubleClick,b=t.onNodeDragStart,w=t.onNodeDrag,_=t.onNodeDragStop,E=t.style,C=t.className,O=t.isDraggable,x=t.isSelectable,k=t.isConnectable,S=t.selectNodesOnDrag,A=t.sourcePosition,j=t.targetPosition,D=t.isHidden,P=t.isInitialized,T=t.snapToGrid,F=t.snapGrid,L=t.isDragging,B=t.resizeObserver,M=t.dragHandle,N=_t((function(e){return e.updateNodeDimensions})),I=_t((function(e){return e.addSelectedElements})),R=_t((function(e){return e.updateNodePosDiff})),Z=_t((function(e){return e.unsetNodesSelection})),q=(0,i.useRef)(null),z=(0,i.useMemo)((function(){return{id:n,type:r,position:{x:u,y:c},data:o}}),[n,r,u,c,o]),U=(0,i.useMemo)((function(){return T?F:[1,1]}),[T,F]),G=(0,i.useMemo)((function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ja(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ja(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({zIndex:d?10:3,transform:"translate(".concat(u,"px,").concat(c,"px)"),pointerEvents:x||O||f||m||v||y?"all":"none",opacity:P?1:0},E)}),[d,u,c,x,O,f,P,E,m,v,y]),$=(0,i.useMemo)((function(){if(m&&!L)return function(e){return m(e,z)}}),[m,L,z]),Y=(0,i.useMemo)((function(){if(v&&!L)return function(e){return v(e,z)}}),[v,L,z]),H=(0,i.useMemo)((function(){if(y&&!L)return function(e){return y(e,z)}}),[y,L,z]),V=(0,i.useMemo)((function(){if(g)return function(e){return g(e,z)}}),[g,z]),W=(0,i.useCallback)((function(e){O||(x&&(Z(),d||I(z)),null==f||f(e,z))}),[x,d,O,f,z]),K=(0,i.useCallback)((function(e){null==b||b(e,z),S&&x?(Z(),d||I(z)):S||d||!x||(Z(),I([]))}),[z,d,S,x,b]),X=(0,i.useCallback)((function(e,t){w&&(z.position.x+=t.deltaX,z.position.y+=t.deltaY,w(e,z)),R({id:n,diff:{x:t.deltaX,y:t.deltaY},isDragging:!0})}),[n,z,w]),J=(0,i.useCallback)((function(e){if(!L)return!x||S||d||I(z),void(null==f||f(e,z));R({id:z.id,isDragging:!1}),null==_||_(e,z)}),[z,x,S,f,_,L,d]),Q=(0,i.useCallback)((function(e){null==h||h(e,z)}),[z,h]);if((0,i.useLayoutEffect)((function(){q.current&&!D&&N([{id:n,nodeElement:q.current,forceUpdate:!0}])}),[n,D,A,j]),(0,i.useEffect)((function(){if(q.current){var e=q.current;return null==B||B.observe(e),function(){return null==B?void 0:B.unobserve(e)}}}),[]),D)return null;var ee=p(["react-flow__node","react-flow__node-".concat(r),C,{selected:d,selectable:x}]);return l().createElement(Il,{onStart:K,onDrag:X,onStop:J,scale:a,disabled:!O,cancel:".nodrag",nodeRef:q,grid:U,enableUserSelectHack:!1,handle:M},l().createElement("div",{className:ee,ref:q,style:G,onMouseEnter:$,onMouseMove:Y,onMouseLeave:H,onContextMenu:V,onClick:W,onDoubleClick:Q,"data-id":n},l().createElement(Za,{value:n},l().createElement(e,{id:n,data:o,type:r,xPos:u,yPos:c,selected:d,isConnectable:k,sourcePosition:A,targetPosition:j,isDragging:L,dragHandle:M}))))};return t.displayName="NodeWrapper",(0,i.memo)(t)};function eu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eu(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nu=function(e){var t=e.onSelectionChange,n=Et((function(e){return e.selectedElements}));return(0,i.useEffect)((function(){t(n)}),[n]),null},ru=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,o,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(o=r;0!=o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=r;0!=o--;)if(!Object.prototype.hasOwnProperty.call(n,i[o]))return!1;for(o=r;0!=o--;){var l=i[o];if(!e(t[l],n[l]))return!1}return!0}return t!=t&&n!=n};function ou(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var iu=function(e,t){var n=e.getBoundingClientRect();return{source:lu(".source",e,n,t),target:lu(".target",e,n,t)}},lu=function(e,t,n,r){var o=t.querySelectorAll(e);return o&&o.length?Array.from(o).map((function(e){var t=e.getBoundingClientRect(),o=jt(e);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ou(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ou(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:e.getAttribute("data-handleid"),position:e.getAttribute("data-handlepos"),x:(t.left-n.left)/r,y:(t.top-n.top)/r},o)})):null};function au(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?au(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):au(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:du,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ye:var n=t.payload.reduce((function(t,n){if(Mt(n)){var r=e.nodes.find((function(e){return e.id===n.id}));if(r){var o=uu(uu({},r),n);r.position.x===n.position.x&&r.position.y===n.position.y||(o.__rf.position=n.position),void 0!==n.type&&n.type!==r.type&&(o.__rf.width=null),t.nextNodes.push(o)}else t.nextNodes.push(zt(n,e.nodeExtent))}else if(Bt(n)){var i=e.edges.find((function(e){return e.id===n.id}));i?t.nextEdges.push(uu(uu({},i),n)):t.nextEdges.push(Ut(n))}return t}),{nextNodes:[],nextEdges:[]}),r=n.nextNodes,o=n.nextEdges;return uu(uu({},e),{},{nodes:r,edges:o});case He:var i=e.nodes.map((function(n){var r=t.payload.find((function(e){return e.id===n.id}));if(r){var o=jt(r.nodeElement);if(o.width&&o.height&&(n.__rf.width!==o.width||n.__rf.height!==o.height||r.forceUpdate)){var i=iu(r.nodeElement,e.transform[2]);return uu(uu({},n),{},{__rf:uu(uu(uu({},n.__rf),o),{},{handleBounds:i})})}}return n}));return uu(uu({},e),{},{nodes:i});case Ve:var l=t.payload,a=l.id,u=l.pos,c=u;if(e.snapToGrid){var s=St(e.snapGrid,2),d=s[0],p=s[1];c={x:d*Math.round(u.x/d),y:p*Math.round(u.y/p)}}var f=e.nodes.map((function(e){return e.id===a?uu(uu({},e),{},{__rf:uu(uu({},e.__rf),{},{position:c})}):e}));return uu(uu({},e),{},{nodes:f});case We:var m=t.payload,v=m.id,y=m.diff,g=m.isDragging,h=e.nodes.map((function(t){var n;if(v===t.id||null!==(n=e.selectedElements)&&void 0!==n&&n.find((function(e){return e.id===t.id}))){var r=uu(uu({},t),{},{__rf:uu(uu({},t.__rf),{},{isDragging:g})});return y&&(r.__rf.position={x:t.__rf.position.x+y.x,y:t.__rf.position.y+y.y}),r}return t}));return uu(uu({},e),{},{nodes:h});case Ke:var b=t.payload;return uu(uu({},e),{},{selectionActive:!0,userSelectionRect:{width:0,height:0,startX:b.x,startY:b.y,x:b.x,y:b.y,draw:!0}});case Xe:var w,_,E=t.payload,C=null!==(w=e.userSelectionRect.startX)&&void 0!==w?w:0,O=null!==(_=e.userSelectionRect.startY)&&void 0!==_?_:0,x=uu(uu({},e.userSelectionRect),{},{x:E.x<C?E.x:C,y:E.y<O?E.y:O,width:Math.abs(E.x-C),height:Math.abs(E.y-O)}),k=Vt(e.nodes,x,e.transform,!1,!0),S=Wt(k,e.edges),A=[].concat(kt(k),kt(S)),j=ru(A,e.selectedElements)?{}:{selectedElements:A.length>0?A:null};return uu(uu(uu({},e),j),{},{userSelectionRect:x});case Je:var D,P=null===(D=e.selectedElements)||void 0===D?void 0:D.filter((function(e){return Mt(e)&&e.__rf})),T=uu(uu({},e),{},{selectionActive:!1,userSelectionRect:uu(uu({},e.userSelectionRect),{},{draw:!1})});if(P&&0!==P.length){var F=Ht(P);T.selectedNodesBbox=F,T.nodesSelectionActive=!0}else T.selectedElements=null,T.nodesSelectionActive=!1;return T;case et:var L=t.payload,B=Array.isArray(L)?L:[L],M=ru(B,e.selectedElements)?e.selectedElements:B;return uu(uu({},e),{},{selectedElements:M});case nt:var N=e.multiSelectionActive,I=e.selectedElements,R=t.payload,Z=Array.isArray(R)?R:[R],q=Z;N&&(q=I?[].concat(kt(I),kt(Z)):Z);var z=ru(q,e.selectedElements)?e.selectedElements:q;return uu(uu({},e),{},{selectedElements:z});case it:var U=t.payload,G=U.d3Zoom,$=U.d3Selection,Y=U.d3ZoomHandler,H=U.transform;return uu(uu({},e),{},{d3Zoom:G,d3Selection:$,d3ZoomHandler:Y,transform:H});case lt:var V,W=t.payload;return null===(V=e.d3Zoom)||void 0===V||V.scaleExtent([W,e.maxZoom]),uu(uu({},e),{},{minZoom:W});case at:var K,X=t.payload;return null===(K=e.d3Zoom)||void 0===K||K.scaleExtent([e.minZoom,X]),uu(uu({},e),{},{maxZoom:X});case ut:var J,Q=t.payload;return null===(J=e.d3Zoom)||void 0===J||J.translateExtent(Q),uu(uu({},e),{},{translateExtent:Q});case bt:var ee=t.payload;return uu(uu({},e),{},{nodeExtent:ee,nodes:e.nodes.map((function(e){return uu(uu({},e),{},{__rf:uu(uu({},e.__rf),{},{position:Pt(e.__rf.position,ee)})})}))});case ze:case Ue:case Ge:case $e:case tt:case Qe:case rt:case ot:case ct:case st:case dt:case pt:case ft:case mt:case vt:case yt:case gt:case ht:return uu(uu({},e),t.payload);default:return e}}function su(e){return g(cu,e)}var du={width:0,height:0,transform:[0,0,1],nodes:[],edges:[],selectedElements:null,selectedNodesBbox:{x:0,y:0,width:0,height:0},d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodesSelectionActive:!1,selectionActive:!1,userSelectionRect:{startX:0,startY:0,x:0,y:0,width:0,height:0,draw:!1},connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionMode:Ei.Strict,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,multiSelectionActive:!1,reactFlowVersion:"9.7.4"},pu=su(du),fu=function(e){var t=e.children,n=(0,i.useContext)(H);return(0,i.useMemo)((function(){var e,t;return null==n||null===(e=n.store)||void 0===e||null===(t=e.getState())||void 0===t?void 0:t.reactFlowVersion}),[n])?l().createElement(l().Fragment,null,t):l().createElement(Q,{store:pu},t)};function mu(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}fu.displayName="ReactFlowWrapper",mu(".react-flow{height:100%;overflow:hidden;position:relative;width:100%}.react-flow__pane,.react-flow__renderer,.react-flow__selectionpane{height:100%;left:0;position:absolute;top:0;width:100%}.react-flow__pane{z-index:1}.react-flow__renderer{z-index:4}.react-flow__selectionpane{z-index:5}.react-flow__edges,.react-flow__selection{left:0;position:absolute;top:0}.react-flow__edges{pointer-events:none;z-index:2}.react-flow__edge{pointer-events:visibleStroke}.react-flow__edge.inactive{pointer-events:none}@-webkit-keyframes dashdraw{0%{stroke-dashoffset:10}}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edge-path{fill:none}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__connection-path{fill:none}.react-flow__nodes{height:100%;pointer-events:none;width:100%;z-index:3}.react-flow__node,.react-flow__nodes{position:absolute;transform-origin:0 0}.react-flow__node{pointer-events:all;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__nodesselection{height:100%;left:0;pointer-events:none;position:absolute;top:0;transform-origin:left top;width:100%;z-index:3}.react-flow__nodesselection-rect{cursor:-webkit-grab;cursor:grab;pointer-events:all;position:absolute}.react-flow__handle{pointer-events:none}.react-flow__handle.connectable{pointer-events:all}.react-flow__handle-bottom{bottom:-4px;left:50%;top:auto;transform:translate(-50%)}.react-flow__handle-top{left:50%;top:-4px;transform:translate(-50%)}.react-flow__handle-left{left:-4px;top:50%;transform:translateY(-50%)}.react-flow__handle-right{right:-4px;top:50%;transform:translateY(-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__background{height:100%;left:0;position:absolute;top:0;width:100%}.react-flow__controls{bottom:10px;left:10px;position:absolute;z-index:5}.react-flow__controls-button{border:none;height:24px;width:24px}.react-flow__controls-button svg{width:100%}.react-flow__minimap{bottom:10px;position:absolute;right:10px;z-index:5}"),mu(".react-flow__selection{background:rgba(0,89,220,.08);border:1px dotted rgba(0,89,220,.8)}.react-flow__edge.selected .react-flow__edge-path{stroke:#555}.react-flow__edge.animated path{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-path{stroke:#b1b1b7;stroke-width:1}.react-flow__edge-text{font-size:10px}.react-flow__edge-textbg{fill:#fff}.react-flow__connection-path{stroke:#b1b1b7;stroke-width:1}.react-flow__node{cursor:-webkit-grab;cursor:grab}.react-flow__node-default,.react-flow__node-input,.react-flow__node-output{border-radius:3px;border-style:solid;border-width:1px;color:#222;font-size:12px;padding:10px;text-align:center;width:150px}.react-flow__node-default.selectable:hover,.react-flow__node-input.selectable:hover,.react-flow__node-output.selectable:hover{box-shadow:0 1px 4px 1px rgba(0,0,0,.08)}.react-flow__node-input{background:#fff;border-color:#0041d0}.react-flow__node-input.selected,.react-flow__node-input.selected:hover{box-shadow:0 0 0 .5px #0041d0}.react-flow__node-input .react-flow__handle{background:#0041d0}.react-flow__node-default{background:#fff;border-color:#1a192b}.react-flow__node-default.selected,.react-flow__node-default.selected:hover{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-default .react-flow__handle{background:#1a192b}.react-flow__node-output{background:#fff;border-color:#ff0072}.react-flow__node-output.selected,.react-flow__node-output.selected:hover{box-shadow:0 0 0 .5px #ff0072}.react-flow__node-output .react-flow__handle{background:#ff0072}.react-flow__nodesselection-rect{background:rgba(0,89,220,.08);border:1px dotted rgba(0,89,220,.8)}.react-flow__handle{background:#555;border:1px solid #fff;border-radius:100%;height:6px;position:absolute;width:6px}.react-flow__handle.connectable{cursor:crosshair}.react-flow__minimap{background-color:#fff}.react-flow__controls{box-shadow:0 0 2px 1px rgba(0,0,0,.08)}.react-flow__controls-button{align-items:center;background:#fefefe;border-bottom:1px solid #eee;box-sizing:content-box;cursor:pointer;display:flex;height:16px;justify-content:center;padding:5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:16px}.react-flow__controls-button svg{max-height:12px;max-width:12px}.react-flow__controls-button:hover{background:#f4f4f4}");var vu=["elements","className","nodeTypes","edgeTypes","onElementClick","onLoad","onMove","onMoveStart","onMoveEnd","onElementsRemove","onConnect","onConnectStart","onConnectStop","onConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","deleteKeyCode","selectionKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","elementsSelectable","minZoom","maxZoom","defaultZoom","defaultPosition","translateExtent","preventScrolling","nodeExtent","arrowHeadColor","markerEndId","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","paneMoveable","onPaneClick","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","nodeTypesId","edgeTypesId"];function yu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yu(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hu={input:Wa,default:Ha,output:Xa},bu={default:ta,straight:ha,step:ga,smoothstep:da},wu=(0,i.forwardRef)((function(e,t){var n=e.elements,r=void 0===n?[]:n,o=e.className,a=e.nodeTypes,u=void 0===a?hu:a,c=e.edgeTypes,s=void 0===c?bu:c,f=e.onElementClick,m=e.onLoad,v=e.onMove,y=e.onMoveStart,g=e.onMoveEnd,h=e.onElementsRemove,b=e.onConnect,w=e.onConnectStart,_=e.onConnectStop,E=e.onConnectEnd,C=e.onNodeMouseEnter,O=e.onNodeMouseMove,x=e.onNodeMouseLeave,k=e.onNodeContextMenu,S=e.onNodeDoubleClick,A=e.onNodeDragStart,j=e.onNodeDrag,D=e.onNodeDragStop,P=e.onSelectionChange,T=e.onSelectionDragStart,F=e.onSelectionDrag,L=e.onSelectionDragStop,B=e.onSelectionContextMenu,M=e.connectionMode,N=void 0===M?Ei.Strict:M,I=e.connectionLineType,R=void 0===I?Ci.Bezier:I,Z=e.connectionLineStyle,q=e.connectionLineComponent,z=e.deleteKeyCode,U=void 0===z?"Backspace":z,G=e.selectionKeyCode,$=void 0===G?"Shift":G,Y=e.multiSelectionKeyCode,H=void 0===Y?"Meta":Y,V=e.zoomActivationKeyCode,W=void 0===V?"Meta":V,K=e.snapToGrid,X=void 0!==K&&K,J=e.snapGrid,Q=void 0===J?[15,15]:J,ee=e.onlyRenderVisibleElements,te=void 0!==ee&&ee,ne=e.selectNodesOnDrag,re=void 0===ne||ne,oe=e.nodesDraggable,ie=e.nodesConnectable,le=e.elementsSelectable,ae=e.minZoom,ue=e.maxZoom,ce=e.defaultZoom,se=void 0===ce?1:ce,de=e.defaultPosition,pe=void 0===de?[0,0]:de,fe=e.translateExtent,me=e.preventScrolling,ve=void 0===me||me,ye=e.nodeExtent,ge=e.arrowHeadColor,he=void 0===ge?"#b1b1b7":ge,be=e.markerEndId,we=e.zoomOnScroll,_e=void 0===we||we,Ee=e.zoomOnPinch,Ce=void 0===Ee||Ee,Oe=e.panOnScroll,xe=void 0!==Oe&&Oe,ke=e.panOnScrollSpeed,Se=void 0===ke?.5:ke,Ae=e.panOnScrollMode,je=void 0===Ae?Oi.Free:Ae,De=e.zoomOnDoubleClick,Pe=void 0===De||De,Te=e.paneMoveable,Fe=void 0===Te||Te,Le=e.onPaneClick,Be=e.onPaneScroll,Me=e.onPaneContextMenu,Ne=e.children,Ie=e.onEdgeUpdate,Re=e.onEdgeContextMenu,Ze=e.onEdgeDoubleClick,qe=e.onEdgeMouseEnter,ze=e.onEdgeMouseMove,Ue=e.onEdgeMouseLeave,Ge=e.onEdgeUpdateStart,$e=e.onEdgeUpdateEnd,Ye=e.edgeUpdaterRadius,He=void 0===Ye?10:Ye,Ve=e.nodeTypesId,We=void 0===Ve?"1":Ve,Ke=e.edgeTypesId,Xe=void 0===Ke?"1":Ke,Je=d(e,vu),Qe=(0,i.useMemo)((function(){return function(e){var t={input:Qa(e.input||Wa),default:Qa(e.default||Ha),output:Qa(e.output||Xa)},n=Object.keys(e).filter((function(e){return!["input","default","output"].includes(e)})).reduce((function(t,n){return t[n]=Qa(e[n]||Ha),t}),{});return tu(tu({},t),n)}(u)}),[We]),et=(0,i.useMemo)((function(){return function(e){var t={default:xa(e.default||ta),straight:xa(e.bezier||ha),step:xa(e.step||ga),smoothstep:xa(e.step||da)},n=Object.keys(e).filter((function(e){return!["default","bezier"].includes(e)})).reduce((function(t,n){return t[n]=xa(e[n]||ta),t}),{});return Sa(Sa({},t),n)}(s)}),[Xe]),tt=p(["react-flow",o]);return l().createElement("div",gu(gu({},Je),{},{ref:t,className:tt}),l().createElement(fu,null,l().createElement(Na,{onLoad:m,onMove:v,onMoveStart:y,onMoveEnd:g,onElementClick:f,onNodeMouseEnter:C,onNodeMouseMove:O,onNodeMouseLeave:x,onNodeContextMenu:k,onNodeDoubleClick:S,onNodeDragStart:A,onNodeDrag:j,onNodeDragStop:D,nodeTypes:Qe,edgeTypes:et,connectionMode:N,connectionLineType:R,connectionLineStyle:Z,connectionLineComponent:q,selectionKeyCode:$,onElementsRemove:h,deleteKeyCode:U,multiSelectionKeyCode:H,zoomActivationKeyCode:W,onConnect:b,onConnectStart:w,onConnectStop:_,onConnectEnd:E,snapToGrid:X,snapGrid:Q,onlyRenderVisibleElements:te,nodesDraggable:oe,nodesConnectable:ie,elementsSelectable:le,selectNodesOnDrag:re,minZoom:ae,maxZoom:ue,defaultZoom:se,defaultPosition:pe,translateExtent:fe,preventScrolling:ve,nodeExtent:ye,arrowHeadColor:he,markerEndId:be,zoomOnScroll:_e,zoomOnPinch:Ce,zoomOnDoubleClick:Pe,panOnScroll:xe,panOnScrollSpeed:Se,panOnScrollMode:je,paneMoveable:Fe,onPaneClick:Le,onPaneScroll:Be,onPaneContextMenu:Me,onSelectionDragStart:T,onSelectionDrag:F,onSelectionDragStop:L,onSelectionContextMenu:B,onEdgeUpdate:Ie,onEdgeContextMenu:Re,onEdgeDoubleClick:Ze,onEdgeMouseEnter:qe,onEdgeMouseMove:ze,onEdgeMouseLeave:Ue,onEdgeUpdateStart:Ge,onEdgeUpdateEnd:$e,edgeUpdaterRadius:He}),l().createElement(Ia,{elements:r}),P&&l().createElement(nu,{onSelectionChange:P}),Ne))}));wu.displayName="ReactFlow";var _u=function(e){var t=e.x,n=e.y,r=e.width,o=e.height,i=e.style,a=e.color,u=e.strokeColor,c=e.strokeWidth,s=e.className,d=e.borderRadius,f=e.shapeRendering,m=i||{},v=m.background,y=m.backgroundColor,g=a||v||y;return l().createElement("rect",{className:p(["react-flow__minimap-node",s]),x:t,y:n,rx:d,ry:d,width:r,height:o,fill:g,stroke:u,strokeWidth:c,shapeRendering:f})};_u.displayName="MiniMapNode";var Eu;function Cu(){return Cu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cu.apply(this,arguments)}var Ou,xu=function(e){return i.createElement("svg",Cu({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},e),Eu||(Eu=i.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})))};function ku(){return ku=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ku.apply(this,arguments)}var Su,Au=function(e){return i.createElement("svg",ku({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},e),Ou||(Ou=i.createElement("path",{d:"M0 0h32v4.2H0z"})))};function ju(){return ju=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ju.apply(this,arguments)}var Du,Pu=function(e){return i.createElement("svg",ju({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},e),Su||(Su=i.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})))};function Tu(){return Tu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tu.apply(this,arguments)}var Fu,Lu=function(e){return i.createElement("svg",Tu({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},e),Du||(Du=i.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})))};function Bu(){return Bu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bu.apply(this,arguments)}var Mu=function(e){return i.createElement("svg",Bu({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},e),Fu||(Fu=i.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"})))},Nu=["children","className"];function Iu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ru=function(e){var t=e.children,n=e.className,r=d(e,Nu);return l().createElement("button",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Iu(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Iu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"button",className:p(["react-flow__controls-button",n])},r),t)},Zu=function(e){var t=e.style,n=e.showZoom,r=void 0===n||n,o=e.showFitView,a=void 0===o||o,u=e.showInteractive,c=void 0===u||u,s=e.fitViewParams,d=e.onZoomIn,f=e.onZoomOut,m=e.onFitView,v=e.onInteractiveChange,y=e.className,g=e.children,h=St((0,i.useState)(!1),2),b=h[0],w=h[1],_=_t((function(e){return e.setInteractive})),E=Ba(),C=E.zoomIn,O=E.zoomOut,x=E.fitView,k=Et((function(e){return e.nodesDraggable&&e.nodesConnectable&&e.elementsSelectable})),S=p(["react-flow__controls",y]),A=(0,i.useCallback)((function(){null==C||C(),null==d||d()}),[C,d]),j=(0,i.useCallback)((function(){null==O||O(),null==f||f()}),[O,f]),D=(0,i.useCallback)((function(){null==x||x(s),null==m||m()}),[x,s,m]),P=(0,i.useCallback)((function(){null==_||_(!k),null==v||v(!k)}),[k,_,v]);return(0,i.useEffect)((function(){w(!0)}),[]),b?l().createElement("div",{className:S,style:t},r&&l().createElement(l().Fragment,null,l().createElement(Ru,{onClick:A,className:"react-flow__controls-zoomin"},l().createElement(xu,null)),l().createElement(Ru,{onClick:j,className:"react-flow__controls-zoomout"},l().createElement(Au,null))),a&&l().createElement(Ru,{className:"react-flow__controls-fitview",onClick:D},l().createElement(Pu,null)),c&&l().createElement(Ru,{className:"react-flow__controls-interactive",onClick:P},k?l().createElement(Mu,null):l().createElement(Lu,null)),g):null};Zu.displayName="Controls";var qu,zu=(0,i.memo)(Zu);function Uu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uu(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $u=(s(qu={},_i.Dots,"#81818a"),s(qu,_i.Lines,"#eee"),qu),Yu=function(e){var t=e.variant,n=void 0===t?_i.Dots:t,r=e.gap,o=void 0===r?15:r,a=e.size,u=void 0===a?.4:a,c=e.color,s=e.style,d=e.className,f=St(Et((function(e){return e.transform})),3),m=f[0],v=f[1],y=f[2],g=(0,i.useMemo)((function(){return"pattern-".concat(Math.floor(1e5*Math.random()))}),[]),h=p(["react-flow__background",d]),b=o*y,w=m%b,_=v%b,E=n===_i.Lines,C=c||$u[n],O=E?function(e,t,n){return l().createElement("path",{stroke:n,strokeWidth:t,d:"M".concat(e/2," 0 V").concat(e," M0 ").concat(e/2," H").concat(e)})}(b,u,C):function(e,t){return l().createElement("circle",{cx:e,cy:e,r:e,fill:t})}(u*y,C);return l().createElement("svg",{className:h,style:Gu(Gu({},s),{},{width:"100%",height:"100%"})},l().createElement("pattern",{id:g,x:w,y:_,width:b,height:b,patternUnits:"userSpaceOnUse"},O),l().createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#".concat(g,")")}))};Yu.displayName="Background";var Hu=(0,i.memo)(Yu),Vu=function(e){var t=e.children,n=(0,i.useMemo)((function(){return su(du)}),[]);return l().createElement(Q,{store:n},t)};Vu.displayName="ReactFlowProvider";var Wu=__webpack_require__(2982),Ku=__webpack_require__(2611),Xu=__webpack_require__.n(Ku);function Ju(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qu(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Ju(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ju(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ec=function e(t){var n=t.selected,r=t.edges,o=t.nodes,i=t.parents,l=void 0===i?[]:i,a=n.id,u=o.some((function(e){return e.id==a}));if(u)r.forEach((function(t){if(t.target==a){var n=o.find((function(e){return e.id==t.source}));n&&(l.push(n),e({selected:n,edges:r,nodes:o,parents:l}))}}));else{var c=o.find((function(e){return e.id==n.source}));c&&(l.push(c),e({selected:c,edges:r,nodes:o,parents:l}))}return l},tc=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=t.properties,i=t.required||[];return r=[].concat((0,Wu.Z)(r),(0,Wu.Z)(i.map((function(e){return n?n+"."+e:e})))),o&&Object.keys(o).forEach((function(t){var n=o[t];n&&"object"==n.type&&n.required&&(r=[].concat((0,Wu.Z)(r),(0,Wu.Z)(e(n,t,r))))})),r},nc=function(e){var n="",r=t.app.get("flowNodes")[null==e?void 0:e.type],o=null==r?void 0:r.requiredInfo;if(o&&Xu().isFunction(o))return o(e);var i=null==e?void 0:e.paramSchema,l=tc(i),a=i.properties,u=null==e?void 0:e.data;return l&&l.length>0&&(n=l.map((function(e){var t=Xu().get(u,e),n=Xu().isNil(t),r=Xu().isObject(t)&&Xu().isEmpty(t),o=Xu().isString(t)&&" "==t;if(n||r||o){var i,l=e.replace(".",".properties.");return null===(i=Xu().get(a,l))||void 0===i?void 0:i.title}return null})).filter(Boolean).join(", ")),n},rc=function(e){var t=Et((function(e){return{edges:e.edges,nodes:e.nodes,selectedElements:e.selectedElements}})),n=t.edges,r=t.nodes,o=t.selectedElements,i=l().useContext(mc).context,a=o&&o[0],u=function(e){var t=e.selected,n=e.context;return t?ec({selected:t,edges:e.edges,nodes:e.nodes,context:n}).reverse().map((function(e){return null!=n&&n.outputSchema[e.id]?{status:(null==n?void 0:n.status)&&(null==n?void 0:n.status[e.id]),schema:Qu(Qu({},e),n.outputSchema[e.id])}:null})).filter(Boolean):null}({selected:a,edges:n,nodes:r,context:i}),c=null==u?void 0:u.map((function(e){return null==e?void 0:e.schema})),s=null==u?void 0:u.map((function(e){return null==e?void 0:e.status})),d=null==i?void 0:i.errors,p=null==i?void 0:i.systemVariable,f=d[null==a?void 0:a.id],m=[],v=null==s?void 0:s.some((function(e){return 1==(null==e?void 0:e.loading)}));if(f&&f.length>0&&e&&Xu().isArray(e)&&e.length>0){var y=f.map((function(e){var t;return e.value||(null==e||null===(t=e.variable)||void 0===t?void 0:t.path)}));e.forEach((function(e){"formula"==e.type&&e.children&&e.children.forEach((function(e){var t,n;(null==y?void 0:y.indexOf(null==e||null===(t=e.variable)||void 0===t?void 0:t.path))>=0&&m.push(null==e||null===(n=e.variable)||void 0===n?void 0:n.title)})),(null==y?void 0:y.indexOf(null==e?void 0:e.value))>=0&&m.push(null==e?void 0:e.name)}))}return{errors:f,errorTips:m,hasLoading:v,parentSchema:c,systemVariable:p}},oc=function(e){var n=l().useState(null),r=(0,o.Z)(n,2),i=r[0],a=r[1],u=(0,t.use)("form").form,c=l().useRef(null);return u.useField(e,(function(e){var t=null==e?void 0:e.value;(!c.current||t&&c.current!=t)&&(c.current=t,t&&a(t))})),i},ic=[{description:"不能连自己本身",rule:function(e,t){return e.source!==e.target}},{description:"不能循环",rule:function(e,t){return!function(e){for(var t=new Set,n=[],r=0;r<e.length;r++){var o=e[r].source;if(!t.has(o)&&i(o))return!0}function i(r){t.add(r),n.push(r);for(var o=e.filter((function(e){return e.source===r})).map((function(e){return e.target})),l=0;l<o.length;l++){var a=o[l];if(t.has(a)){if(n.includes(a))return!0}else if(i(a))return!0}return n.pop(),!1}return!1}([].concat((0,Wu.Z)(t),[Qu(Qu({},e),{},{type:"defaultEdge"})]).filter((function(e){return"defaultEdge"==e.type||"gatewayEdge"==e.type})))}}];function lc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ac(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?lc(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var uc=l().createContext({}),cc=function(){return{status:{},outputSchema:{},values:{},errors:{},showRequiredInfo:!1}},sc=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;return Object.keys(t).forEach((function(i){var l=t[i],a=o?"#."+i:i,u=n?n+"."+a:a;if("object"==l.type&&l.properties)l.addition?u=n:r[u]=!0,Xu().isPlainObject(l.properties)&&e(l.properties,u,r);else if("array"==l.type){var c,s;r[u]=!0,(null==l||null===(c=l.items)||void 0===c?void 0:c.properties)&&e(null==l||null===(s=l.items)||void 0===s?void 0:s.properties,u,r,!0)}else r[u]=!0})),r},dc=function(e,t){var n=sc(e),r={};return function e(t,o){t.forEach((function(t){if("formula"==t.type&&t.children)e(t.children,t.id);else{var i,l,a=["systemVariable","systemTime"].indexOf(null==t?void 0:t.type)<0,u=null==t?void 0:t.value;"variable"==(null==t?void 0:t.type)&&(u=null==t||null===(i=t.variable)||void 0===i?void 0:i.path),a&&u&&!Xu().has(n,u)&&(r[(null==t?void 0:t.id)||o]=[].concat((0,Wu.Z)(r[null==t?void 0:t.id]||[]),[ac(ac({},t),{},{name:t.name||(null==t||null===(l=t.variable)||void 0===l?void 0:l.title)})]))}}))}(t),r},pc=function e(t){var n=t.data,r=t.variables,o=void 0===r?[]:r,i=t.id;return n?(Xu().isPlainObject(n)?null!=n&&n.bind&&null!=n&&n.value?Xu().isArray(null==n?void 0:n.value)?n.value.forEach((function(e){Xu().isPlainObject(e)&&o.push(ac(ac({},e),{},{id:i}))})):Xu().isPlainObject(n.value)&&o.push(ac(ac({},n.value),{},{id:i})):Object.keys(n).forEach((function(t){var r=n[t];e({data:r,variables:o,id:i})})):Xu().isArray(n)&&n.length>0&&n.forEach((function(t){e({data:t,variables:o,id:i})})),o):o},fc=function(n){var r=Et((function(e){return{nodes:e.nodes,edges:e.edges}})),i=r.nodes,a=r.edges,u=l().useState(cc),c=(0,o.Z)(u,2),s=c[0],d=c[1],p=_t((function(e){return e.setSelectedElements})),f=[].concat((0,Wu.Z)(i),(0,Wu.Z)(a)).map((function(e){return e.id})),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return e&&e.length>0&&e.forEach((function(e){var t=e.data;n=Xu().concat(n,pc({data:t,id:e.id}))})),t&&t.length>0&&t.forEach((function(e){var t=e.data;n=Xu().concat(n,pc({data:t,id:e.id}))})),n}(i,a);l().useEffect((function(){if(0==(null==f?void 0:f.length))d({status:{},outputSchema:{},values:{},errors:{},showRequiredInfo:!1});else{var e=function(e,t){return-1==f.indexOf(t)};d((function(t){var n=Xu().omitBy(t.outputSchema,e),r=Xu().omitBy(t.values,e);return ac(ac({},t),{},{outputSchema:n,values:r,errors:dc(n,m)})}))}}),[JSON.stringify(f)]);var v=m.map((function(e){return e.value})).join("-");return l().useEffect((function(){d((function(e){return ac(ac({},e),{},{errors:dc(e.outputSchema,m)})}))}),[v]),l().useEffect((function(){var e;(e=JSON.stringify({project:{uid:1,name:1,type:1,value:1},sort:{createTime:-1}}),(0,t.api)({name:"core/systemVariable"}).fetch("?query=".concat(e))).then((function(e){var t=e.json;d((function(e){return ac(ac({},e),{},{systemVariable:t})}))}))}),[]),l().createElement(uc.Provider,{value:{context:s,setContext:d,updateStatus:function(t,n){return d((function(r){return ac(ac({},r),{},{status:ac(ac({},r.status),{},(0,e.Z)({},t,n))})}))},updateOutputSchema:function(t,n){return d((function(r){var o=ac(ac({},r.outputSchema),{},(0,e.Z)({},t,{type:"object",properties:n}));return ac(ac({},r),{},{outputSchema:o,errors:dc(o,m)})}))},updateOutputValues:function(t,n){return d((function(r){return ac(ac({},r),{},{values:ac(ac({},r.values),{},(0,e.Z)({},t,n))})}))},updateSelectedElements:function(e){p(e)}}},n.children)};const mc=uc;var vc=__webpack_require__(6640);function yc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gc(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?yc(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var hc=function(e){var t=e.node,n=l().useContext(mc).context,r=null==n?void 0:n.showRequiredInfo,o=nc(t),i=useI18n().t;return r&&o&&o.length>0?l().createElement("div",{style:{fontSize:14,color:"#eac504",margin:10}},i("必填项:")," ",i("{{info}}未填写",{info:o})):null},bc=function(e){var t=e.id,n=e.right,r=void 0===n?-29:n,o=e.top,i=void 0===o?5:o,u=l().useContext(mc).context,c=useI18n().t,s=(null==u?void 0:u.errors)[t],d={position:"absolute",color:"red",right:r,top:i,fontSize:22,cursor:"pointer"};if(s&&s.length>0){var p=l().createElement("div",null,s.map((function(e){return l().createElement("div",{style:{color:"red"}},null==e?void 0:e.name)})));return l().createElement(a.Popover,{placement:"rightTop",title:c("已不存在变量"),content:p,trigger:"hover"},l().createElement(vc.WarningOutlined,{style:d}))}return null},wc=function(e){if(!_.isEmpty(e))switch(_.last(e)){case"系统操作节点":default:return"systemOpt";case"业务数据节点":return"businessData";case"起始高级节点":return"start-high-level";case"表处理节点":return"exTableRecord";case"全局变量处理节点":return"systemVariable";case"资产属性处理节点":return"nodeAttribute";case"数据节点":return"data";case"其他节点":return"other";case"人工节点":return"artificial";case"高级节点":return"high-level";case"网关":return"gateway";case"通知":return"notification"}},_c=function(e){var n,o,i,u=e.id,c=e.title,s=e.nodeType,d=void 0===s?"default":s,p=e.selected,f=e.onElementsRemove,m=e.onElementsCopy,v=e.cardProps,y=e.type,g=e.titleIcon,h=e.editable,b=void 0===h||h,w=e.extraChildren,_=useI18n().t,E=(0,t.use)("FlowContext").updateSelectedElements,C=null===(n=t.app.get("flowNodes")[y])||void 0===n?void 0:n.category,O=gc(gc({},null==v?void 0:v.headStyle),{},{borderBottom:"none",backgroundImage:"inherit",backgroundSize:"inherit",borderRadius:"5px 5px 0 0"}),x={width:30,height:20,borderRadius:"25px"},k=null;try{var S;k=__webpack_require__(8074)("./".concat(g||(null===(S=t.app.get("flowNodes")[y])||void 0===S?void 0:S.title),".svg"))}catch(e){k=__webpack_require__(876)}var A=l().createElement("div",{style:{display:"flex",alignItems:"center"},className:"react-flow-card-title"},l().createElement("div",{dangerouslySetInnerHTML:{__html:null===(o=k)||void 0===o?void 0:o.replace(/\<title.*\/title>/,"")},style:{width:14,height:18,marginRight:5}}),l().createElement("span",null,_(c))),j=document.querySelector(".card-content-".concat(u));return l().useEffect((function(){j&&j.addEventListener("mousewheel",(function(e){e.stopPropagation()}))}),[j]),l().createElement(a.Card,r({size:"small",hoverable:!0,title:A,bordered:!1,bodyStyle:{maxWidth:300,minWidth:200,minHeight:60,overflow:"hidden"},className:"react-flow-card react-flow-card-".concat(wc(C))},v,{headStyle:O,extra:b?[l().createElement("div",{className:"card-remove-button"},C&&"起始节点"==C[0]?null:l().createElement("div",{dangerouslySetInnerHTML:{__html:__webpack_require__(4721)},onClick:function(){return m(e,E)}}),l().createElement("div",{dangerouslySetInnerHTML:{__html:__webpack_require__(1944)},onClick:function(){return f([{id:u}])}}))]:null,style:gc({borderRadius:5,boxShadow:p?"0 0 1px 1px ".concat((null==v||null===(i=v.headStyle)||void 0===i?void 0:i.background)||"#4971E0"):""},null==v?void 0:v.style)}),l().createElement("div",{className:"flow-gateway-rhombus"},"default"==d||"output"==d?l().createElement($a,{type:"target",position:"top",style:gc(gc({},x),{},{top:-10}),isConnectable:b},l().createElement("div",{"data-nodeid":e.id,className:"target",style:{width:10,height:10,borderRadius:25}})):null,l().createElement("div",{className:"react-flow-card-content card-content-".concat(u)},w?l().createElement(l().Fragment,null,w,l().createElement("br",null)):null,e.children),"default"==d||"input"==d?l().createElement($a,{type:"source",position:"bottom",style:gc(gc({},x),{},{bottom:-10}),isConnectable:b},l().createElement("div",{"data-nodeid":e.id,className:"source",style:{width:10,height:10,borderRadius:25}})):null))};const Ec=function(e){var t=e.id,n=e.editable,r=void 0===n||n;return l().createElement(l().Fragment,null,r&&l().createElement(bc,{id:t}),l().createElement(_c,e),r&&l().createElement(hc,{node:e}))};var Cc=__webpack_require__(5907);const Oc=xadminModel,xc=moment;var kc=__webpack_require__.n(xc);function Sc(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}a.Tabs.TabPane,a.Select.Option,a.Select.OptGroup,a.Collapse.Panel;var Ac=["input","field"];function jc(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Dc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dc(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(a)throw i}}}}function Dc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pc=__webpack_require__(1088),Tc="_$slate&$br_",Fc=["node","table","user","model","department"],Lc=function(e,t){var n,r,o={defineSchema:{type:e.variable.type,format:e.variable.format},name:e.variable.title,value:e.variable.path,type:t||(null===(n=e.variable)||void 0===n||null===(r=n.defineSchema)||void 0===r?void 0:r.nodeType)||e.variable.type};return-1!==e.variable.path.indexOf("#$systemVariable")?o.type="systemVariable":-1!==e.variable.path.indexOf("#$time")&&(o.type="systemTime"),o.value=e.variable.path.replace&&e.variable.path.replace(".models","").replace(".nodes",""),o},Bc=function(e){var t,n,r=e.errorTips,i=e.parentSchema,a=e.hasLoading,u=e.systemVariable,c=e.value,s=e.onChange,d=e.field,p=e.select,f=e.children,m=e.style,v=l().useState(!1),y=(0,o.Z)(v,2),g=y[0],h=(y[1],l().useRef(null)),b=l().useRef(null),w=!(r&&r.length>0),_=c&&Xu().isPlainObject(c)&&c.bind,E=null==d||null===(t=d.extendFlow)||void 0===t?void 0:t.type,C=E?null:(null==d?void 0:d.limit)||(null==d||null===(n=d.extendFlow)||void 0===n?void 0:n.limit),O=null==d?void 0:d.isFormula,x=null==d?void 0:d.attrExt,k=useI18n().t,S=l().useCallback((function(e,t){if("variable"===(null==e?void 0:e.type)){var n=function(e,t,n){var r,o,i=Lc(e,t),l=i.value;if(l!=Tc&&i.type!=Tc){var a,u=null===(r=l)||void 0===r?void 0:r.split("."),c=null===(o=i.name)||void 0===o?void 0:o.split(".");if("modelProperties"==(null==i?void 0:i.type))return"{{"+(l=u[0]+".#$tableData."+u.slice(2).join("."))+"}}";if("nodeProperties"==(null==i?void 0:i.type))return"{{"+(l="".concat(u[0],".").concat(u[1],".#$tableData.").concat(u.slice(2).join(".")))+"}}";if("触发用户"==(null==c?void 0:c[1])&&"表事件"==(null==c?void 0:c[0]))return u[1]="flowTriggerUserMap.#$user","{{"+(l=u.join("."))+"}}";if("extUserMap"==u[1])return u[2]?u[2]="array"==(null===(a=i.defineSchema)||void 0===a?void 0:a.type)?u[2]+".#.#$user":u[2]+".#$user":u[1]="extUserMap.#$user","{{"+(l=u.join("."))+"}}";if("userFields"==u[1])l=Xu().difference(u,["userFields"]).join(".");else if(l.indexOf(".#$tableRecord")>-1){var s,d,p;return"{{"+(l="tableRecord"==(null==i?void 0:i.type)?"data"==u[1]?u[0]+".data":null===(s=l)||void 0===s?void 0:s.replace(".#$tableRecord",""):null===(d=l)||void 0===d||null===(p=d.replace("#$tableRecord.#.",""))||void 0===p?void 0:p.replace(".#$tableRecord",""))+"}}"}return Fc.indexOf(null==i?void 0:i.type)>=0?("node"==(null==i?void 0:i.type)||"department"==(null==i?void 0:i.type)?l=l.replace(".#$tableData","")+".#$".concat(null==i?void 0:i.type,".id"):"user"==(null==i?void 0:i.type)||(l=u[0]+".#$".concat(null==i?void 0:i.type,".id")),"{{"+l+"}}"):n(e)}}(e,E,t);return n}return t(e)}),[E]),A=null;c&&Xu().isPlainObject(c)&&c.bind&&(A=c.initValue);var j=function(e,t){var n,r={tableData:{processName:"触发数据表记录",groupName:"资产组",icon:""},table:{processName:"触发数据表",groupName:"表组",icon:""},user:{processName:"触发用户",groupName:"用户组",icon:""},tableRecord:{processName:"触发表记录",groupName:"表记录组",icon:""}},o={},i=jc(Xu().keys(e));try{for(i.s();!(n=i.n()).done;){var l=n.value;o[l]=Xu().cloneDeep(e[l]);var a=o[l];if(t)if(l==="#$".concat(t))delete o[l].properties;else if(a.nodeType===t){var u,c=jc(Xu().keys(o[l].properties));try{for(c.s();!(u=c.n()).done;){var s=u.value;delete o[l].properties[s].properties,o[l].properties[s].nodeType=t}}catch(e){c.e(e)}finally{c.f()}}else delete o[l];if(r[a.nodeType]&&-1===l.indexOf("#$")){a.title=r[a.nodeType].groupName;var d,p=jc(Xu().keys(a.properties));try{for(p.s();!(d=p.n()).done;){var f=d.value;if(a.properties[f].nodeType){var m,v=jc(Xu().keys(a.properties[f].properties));try{for(v.s();!(m=v.n()).done;){var y=m.value;a.properties[f].properties[y].nodeType=a.properties[f].nodeType}}catch(e){v.e(e)}finally{v.f()}}a.properties[f].nodeType=a.nodeType}}catch(e){p.e(e)}finally{p.f()}delete a.nodeType}-1!==l.indexOf("#$")&&r[l.replace("#$","")]&&(a.nodeType=l.replace("#$",""))}}catch(e){i.e(e)}finally{i.f()}return o};return l().createElement(l().Fragment,null,l().createElement("div",{style:{fontSize:12,color:"red"}},w?null:k("变量[ {{errorTips}} ] 已不存在",{errorTips:r.join(", ")})),l().createElement("div",{className:"iot-flow-slate-editor-wrap",ref:h},l().createElement("div",{className:"iot-flow-slate-editor-comp"},f&&!_?l().createElement("div",null,f):null,l().createElement("div",{className:"iot-flow-slate-editor",style:{display:f&&!_?"none":"block"}},l().createElement(Cc.C,{is:"CodeEditor.VariableEditor",rootRef:b,schema:function(){var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r={type:"object",properties:{}},o=jc(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]);try{for(o.s();!(e=o.n()).done;){var i=e.value,l=j(i.properties,n);Xu().isEmpty(l)||(r.properties[i.id]={title:i.title,type:i.type,properties:j(i.properties,n)})}}catch(e){o.e(e)}finally{o.f()}if(!n){r.properties["#$time"]={title:_r("系统时间"),type:"string",format:"datetime"},r.properties["#$systemVariable"]={title:"系统变量",type:"object",properties:{}};var a,u=jc(t);try{for(u.s();!(a=u.n()).done;){var c=a.value;r.properties["#$systemVariable"].properties[c.id]={title:c.name,type:c.type},"date"===c.type&&(r.properties["#$systemVariable"].properties[c.id].type="string",r.properties["#$systemVariable"].properties[c.id].format="datetime")}}catch(e){u.e(e)}finally{u.f()}}return r}(i,u,E)||[],placement:"right",panelWidth:500,value:A,onChange:function(e){var t=function(e,t){return null==e?void 0:e.filter((function(e){return(null==e?void 0:e.type)||(null==e?void 0:e.text)})).map((function(e){return Xu().isString(e)?e:e.text?e.text:"variable"===e.type?Lc(e,t):e}))}(null==e?void 0:e.origin,E);t&&t.length>0?s("single"===p?{bind:!0,value:t[0],initValue:Xu().cloneDeep(e)}:{bind:!0,value:t,initValue:Xu().cloneDeep(e)}):s(null)},limit:C,nodeType:E,select:p,hasLoading:a,panelVisible:g,panelTargetRef:h,customStringify:S,notfocusedShow:!0,isFormula:O,attrExt:x,style:m}))),l().createElement("div",{className:"iot-flow-slate-editor-icon",dangerouslySetInnerHTML:{__html:Pc},onClick:function(){b.current.full()}})))};const Mc=function(e){var t=e.input,n=t.onChange,o=t.value,i=e.field,a=Sc(e,Ac),u=rc(null==o?void 0:o.value),c=u.errorTips,s=u.parentSchema,d=u.hasLoading,p=u.systemVariable;return l().createElement(Bc,r({errorTips:c,parentSchema:s,hasLoading:d,systemVariable:p,value:o,onChange:n,field:i},a))};function Nc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ic(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Nc(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Nc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Rc=function(e){var t=e.valid,n=e.errorTips,r=useI18n().t;return React.createElement("div",{style:{fontSize:12,color:"red"}},t?null:r("变量[ {{errorTips}} ] 已不存在",{errorTips:n.join(", ")}))},Zc=function(e){var t=e.children,n=e.onChange,r=e.value,o=e.field,i=(e.error,useI18n().t),l=o.extendFlow,u=o.type,c=null==l?void 0:l.show,s=null==l?void 0:l.onlySelect,d=null!=l&&l.mode?l.mode:"single",p=r;if(r&&_.isPlainObject(r)&&r.bind&&_.isPlainObject(r)){var f=r.value;_.isArray(f)&&(p=f),_.isPlainObject(f)&&(p=[f])}var m=rc(p).errorTips,v=!(m&&m.length>0),y=s?React.createElement(a.Input,{placeholder:i("仅支持变量"),disabled:!0}):t,g=React.createElement(React.Fragment,null,React.createElement(Rc,{valid:v,errorTips:m}),React.createElement(Mc,{input:{onChange:n,value:r},field:o,select:"single"},y)),h=React.createElement(React.Fragment,null,React.createElement(Rc,{valid:v,errorTips:m}),React.createElement(Mc,{input:{onChange:n,value:r},field:o,select:"multiple"},y)),b=React.createElement(React.Fragment,null,React.createElement(Rc,{valid:v,errorTips:m}),React.createElement(Mc,{input:{onChange:n,value:r},field:o},y));return c?"input"==u||"string"==u?b:"multiple"==d?h:g:t};const qc=function(e){var t,n=e.label,o=e.meta,i=e.input,l=e.field,u=e.children,c=l.attrs||{},s=o.touched&&(o.error||o.submitError),d=l.description||l.help,p={required:l.required},f=l.option&&l.option.groupSize||c.groupSize||{labelCol:{sm:{span:24}},wrapperCol:{sm:{span:24}}};!((null==i?void 0:i.value)&&_.isPlainObject(i.value)&&(null==i||null===(t=i.value)||void 0===t?void 0:t.bind))&&s&&(p.validateStatus="error",p.help=s);var m=Ic(Ic(Ic({},p),f),{},{labelAlign:"left"}),v=u||React.createElement(a.Input,r({},i,c));return React.createElement(a.Form.Item,r({label:n?React.createElement(React.Fragment,null,React.createElement("span",null,n),d?React.createElement(a.Tooltip,{placement:"bottom",title:d},React.createElement(vc.QuestionCircleOutlined,{className:"label-des"})):null):null},m),React.createElement(Zc,r({},i,c,{field:l}),v),l.formText?React.createElement("span",{className:"ant-form-text"}," ",l.formText):null)};function zc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uc(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?zc(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Gc=a.Select.Option,$c=a.DatePicker.RangePicker,Yc=function(e){var t=[];return function e(n,r){return Object.keys(n).map((function(o){var i=n[o]||{};if((i.relateTo||i.relate)&&(i.properties={}),i.properties&&!Xu().isEmpty(i.properties))i.key=o,e(i.properties,i);else{var l=i.title?r&&r.title?r.title+"-"+i.title:i.title:o;t.push(Uc(Uc({},i),{},{title:l,key:r&&r.key?r.key+"."+o:o}))}}))}(e),t},Hc=function(e,t){if(Xu().isPlainObject(e)&&e.gte&&e.lte){var n=t||"YYYY-MM-DD HH:mm:ss";e=[kc()(e.gte,n),kc()(e.lte,n)]}else e=null;return e},Vc=function(e){var t=e.input;return l().createElement(a.Input,r({style:{width:"100%"}},t))},Wc=function(e){var t=e.input;return l().createElement(a.InputNumber,r({style:{width:"100%"}},t,{value:Number(t.value)}))},Kc=function(e){var t=e.input,n=e.field.schema,r=void 0===n?{}:n,o=r.enum_title||[],i=r.enum||[];return l().createElement(a.Select,{value:t.value,onChange:t.onChange,style:{width:"100%"}},null==i?void 0:i.map((function(e,t){return l().createElement(Gc,{value:e},o[t]||e)})))},Xc=function(e){var t=e.input,n=e.field.schema,r=void 0===n?{}:n,o=r.enum_title||[],i=r.enum||[];return l().createElement(a.Select,{mode:"multiple",value:t.value,onChange:t.onChange,style:{width:"100%"}},null==i?void 0:i.map((function(e,t){return l().createElement(Gc,{value:e},o[t]||e)})))},Jc=function(t){var n,r,o=t.input,i=function(t,n){o.onChange(Uc(Uc({},o.value),{},(0,e.Z)({},n,t)))};return l().createElement("div",{style:{display:"flex"}},l().createElement(a.InputNumber,{value:null===(n=o.value)||void 0===n?void 0:n.gte,onChange:function(e){return i(e,"gte")},style:{flexGrow:1,width:"100%"}}),l().createElement("span",{style:{margin:"auto 5px"}},"~"),l().createElement(a.InputNumber,{value:null===(r=o.value)||void 0===r?void 0:r.lte,onChange:function(e){return i(e,"lte")},style:{flexGrow:1,width:"100%"}}))},Qc=function(e){var t=e.input,n=e.field.schema,r=(null==n?void 0:n.format)||(null==n?void 0:n.formatType),o="time"==r?"HH:mm:ss":"date"==r?"YYYY-MM-DD":"YYYY-MM-DD HH:mm:ss",i=function(e){var n={gte:kc()(e[0]).format(o),lte:kc()(e[1]).format(o)};t.onChange(n)};return"time"==r?l().createElement(a.TimePicker.RangePicker,{onChange:i,value:Hc(t.value,o),style:{width:"100%"}}):l().createElement($c,{showTime:"date"!==r,onChange:i,value:Hc(t.value,o),style:{width:"100%"}})},es=function(e){var t=e.input,n=e.field.schema,r=(null==n?void 0:n.format)||(null==n?void 0:n.formatType),o="time"==r?"HH:mm:ss":"date"==r?"YYYY-MM-DD":"YYYY-MM-DD HH:mm:ss",i=function(e){t.onChange(kc()(e).format(o))};return"time"==r?l().createElement(a.TimePicker,{onChange:i,value:t.value&&"string"==typeof t.value?kc()(t.value,o):null,style:{width:"100%"}}):l().createElement(a.DatePicker,{showTime:"date"!==r,onChange:i,value:t.value&&"string"==typeof t.value?kc()(t.value,o):null,style:{width:"100%"}})},ts=function(){return null},ns={string:[{name:"是",key:"eq",component:Vc},{name:"不是",key:"ne",component:Vc},{name:"包含",key:"contains",component:Vc},{name:"不包含",key:"notContains",component:Vc},{name:"开始为",key:"startsWith",component:Vc},{name:"结尾为",key:"endsWith",component:Vc},{name:"为空",key:"isNull",component:ts},{name:"不为空",key:"notNull",component:ts}],number:[{name:"等于",key:"eq",component:Wc},{name:"不等于",key:"ne",component:Wc},{name:"大于",key:"gt",component:Wc},{name:"小于",key:"lt",component:Wc},{name:"大于等于",key:"gte",component:Wc},{name:"小于等于",key:"lte",component:Wc},{name:"在范围内",key:"range",component:Jc},{name:"不在范围内",key:"notRange",component:Jc},{name:"为空",key:"isNull",component:ts},{name:"不为空",key:"notNull",component:ts}],boolean:[{name:"等于",key:"eq",component:function(e){var t=e.input;return l().createElement(a.Radio.Group,{options:[{label:"真",value:!0},{label:"假",value:!1}],onChange:t.onChange,value:t.value,optionType:"button",buttonStyle:"solid"})}},{name:"为空",key:"isNull",component:ts},{name:"不为空",key:"notNull",component:ts}],date:[{name:"等于",key:"eq",component:es},{name:"为空",key:"isNull",component:ts},{name:"不为空",key:"notNull",component:ts},{name:"在范围内",key:"range",component:Qc},{name:"不在范围内",key:"notRange",component:Qc}],datetime:[{name:"等于",key:"eq",component:es},{name:"为空",key:"isNull",component:ts},{name:"不为空",key:"notNull",component:ts},{name:"在范围内",key:"range",component:Qc},{name:"不在范围内",key:"notRange",component:Qc}],time:[{name:"等于",key:"eq",component:es},{name:"为空",key:"isNull",component:ts},{name:"不为空",key:"notNull",component:ts},{name:"在范围内",key:"range",component:Qc},{name:"不在范围内",key:"notRange",component:Qc}],requiredTime:[{name:"等于",key:"eq",component:es},{name:"在范围内",key:"range",component:Qc},{name:"不在范围内",key:"notRange",component:Qc}],eventtime:[{name:"等于",key:"eq",component:Kc},{name:"不等于",key:"ne",component:Kc},{name:"早于",key:"lt",component:Kc},{name:"晚于",key:"gt",component:Kc},{name:"为空",key:"isNull",component:ts},{name:"不为空",key:"notNull",component:ts},{name:"在范围内",key:"range",component:Qc},{name:"不在范围内",key:"notRange",component:Qc}],select:[{name:"等于",key:"eq",component:Kc},{name:"不等于",key:"ne",component:Kc},{name:"是",key:"range",component:Xc},{name:"不是",key:"notRange",component:Xc},{name:"为空",key:"isNull",component:ts},{name:"不为空",key:"notNull",component:ts}],enum:[{name:"等于",key:"eq",component:Kc},{name:"不等于",key:"ne",component:Kc},{name:"为空",key:"isNull",component:ts},{name:"不为空",key:"notNull",component:ts}],relate:[{name:"包含",key:"in"},{name:"不包含",key:"nin"},{name:"为空",key:"isNull",component:ts},{name:"不为空",key:"notNull",component:ts}],relateTo:[{name:"等于",key:"eq"},{name:"不等于",key:"ne"},{name:"为空",key:"isNull",component:ts},{name:"不为空",key:"notNull",component:ts}],other:[{name:"为空",key:"isNull",component:ts},{name:"不为空",key:"notNull",component:ts}]},rs=function(e){var n,u=e.value,c=e.schema,s=e.field,d=e.onChange,p=e.unbind,f=e.formField,m=(0,i.useState)(),v=(0,o.Z)(m,2),y=v[0],g=v[1],h=(0,i.useState)({schema:c.properties[s]||{}}),b=(0,o.Z)(h,2),w=b[0],_=b[1],E=c.filters?null===(n=Xu().map(c.filters,(function(e){return e})))||void 0===n?void 0:n.reduce((function(e,t){return e.concat(t)})):[],C=E.filter((function(e){return e.key==s}))[0],O=s.replace(".",".properties."),x=Xu().omit(Xu().get(c.properties,O),"filterByRes")||{},k=Yc(c.properties).filter((function(e){return"model"!=e.key&&"dashboard"!=e.key})),S=(null==f?void 0:f.DataWrap)||Zc;l().useEffect((function(){var e=Xu().find(k,(function(e){return(e.key||e.id)==s}));if(e)if("multiple"==x.selectType&&"tableData_select"!=(null==x?void 0:x.fieldType))g(ns.other);else if(C)g(ns.relate);else if(x.relateTo||x.relate)g(ns[x.relate?"relate":"relateTo"]);else if("object"!=e.type&&"array"!=e.type||!x.fieldType||"attachment"==x.fieldType||"attachments"==x.fieldType||"map"==x.fieldType)if("area"===x.fieldType)g(ns.enum);else if(["date","datetime","date-time","time"].includes(e.format)||"datePicker"==e.fieldType){var t,n,r,o=null!==(t=c.required)&&void 0!==t&&t.includes(e.key)?"requiredTime":(null===(n=e.format)||void 0===n?void 0:n.replace("-",""))||(null===(r=e.formatType)||void 0===r?void 0:r.replace("-",""));g(ns[o])}else g(ns[e.enum||e.enum1?"enum":e.type]||ns.other);else g(ns.relateTo);else g([])}),[c,s]);var A,j=function(e){d(Uc(Uc({},u),{},{value:null!=e&&e.target?e.target.value:e}))},D=null==u?void 0:u.method,P=function(e){var n;if(e.fieldType||e.relateTo||e.relate){var r=function(e,n){var r={};return t.app.load_list("filter_converter").reduce((function(t,n){return n(t,e,r)}),{})}(e);_(Uc(Uc({},e),r));var o=r.type;return null===(n=t.app.get("form_fields")[o])||void 0===n?void 0:n.component}},T=l().useMemo((function(){if(!y)return ts;var e=Xu().find(y,(function(e){return e.key==D}))||y&&y[0];null!=x&&x.selectFace&&(x.selectFace="select");var t=Uc(Uc({},C),x);return _({schema:t}),"isNull"==(null==e?void 0:e.key)||"notNull"==(null==e?void 0:e.key)?null==e?void 0:e.component:t.fieldType&&(t.enum||t.enum1)||t.relateTo||"area"===t.fieldType?t.component||P(t)||Vc:t.component||(null==e?void 0:e.component)||P(t)||Vc}),[y,D]);return A="关联字段"==(null==x?void 0:x.config)?{show:!0}:["attachment","attachments","map"].includes(null==x?void 0:x.fieldType)?null:"input"==(null==x?void 0:x.fieldType)?{show:!0,limit:null}:"select"==(null==x?void 0:x.fieldType)?{show:!0,limit:function(e,t,n){var r,o;return!(!["string","number"].includes(null==e||null===(r=e.defineSchema)||void 0===r?void 0:r.type)||null!=e&&null!==(o=e.defineSchema)&&void 0!==o&&o.format)}}:"bytesArray"==(null==x?void 0:x.fieldType)?{show:!0,limit:["bytesArray","nodeDataPoint"]}:{show:!0,limit:null!=x&&x.format?["time"]:[null==x?void 0:x.type]},l().createElement("div",{style:{width:"100%",marginBottom:"0.5rem"}},l().createElement(a.Select,{value:D,placeholder:"请选择",style:{marginRight:"0.5rem",marginBottom:"0.5rem",width:"100%"},onChange:function(e){d(Uc(Uc({},u),{},{method:e}))}},(y||[]).map((function(e){return l().createElement(Gc,{value:e.key},e.name)}))),D?l().createElement("div",null,"isNull"===D||"notNull"===D||"定位"===x.config||"附件"===x.config||"附件组"===x.config?l().createElement(T,{input:{value:null==u?void 0:u.value,onChange:j},field:w}):l().createElement(S,{field:Uc(Uc({},x),{},{extendFlow:A,unbind:p}),value:null==u?void 0:u.value,onChange:j},l().createElement(T,r({},x,{input:{value:null==u?void 0:u.value,onChange:j},field:w,label:x.title})))):null)},os=function(e){var t=e.schema,n=e.value,r=e.onChange,o=e.getSchema,i=Yc(t.properties).filter((function(e){return"model"!=e.key&&"dashboard"!=e.key&&"editableTable"!==e.fieldType&&"table"!=e.fieldType}));return l().createElement(a.Select,{showSearch:!0,value:n,style:{marginRight:"0.5rem",flexGrow:1},placeholder:"过滤字段",optionFilterProp:"children",onChange:r,onDropdownVisibleChange:function(e){e&&o&&o()}},i.map((function(e){var t=e.key||e.id,n=e.title||e.name;return t&&n?l().createElement(Gc,{value:t,key:t},l().createElement("span",{style:{color:"#999"}},"[",function(e){if(e.config)return e.config;switch(e.type){case"string":default:return"字符串";case"number":return"数字";case"integer":return"整数";case"boolean":return"布尔";case"object":return"对象";case"array":return"数组"}}(e),"]")," ",n):null})))},is=function(e){var t=e.value,n=e.schema,r=e.onChange,i=e.onDelete,a=e.unbind,u=e.getNewSchema,c=e.field,s=l().useState(n),d=(0,o.Z)(s,2),p=d[0],f=d[1];return l().useEffect((function(){f(n)})),l().createElement(l().Fragment,null,l().createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",marginBottom:"0.5rem"}},l().createElement(os,{schema:p,value:null==t?void 0:t.field,onChange:function(e){return r({field:e})},getSchema:function(){u&&u().then((function(e){f(e)})).catch((function(e){return console.error(e)}))}}),l().createElement("div",{style:{margin:"auto"}},l().createElement(Cc.Icon,{svg:__webpack_require__(9060),className:"array-delete",onClick:i}))),null!=t&&t.field?l().createElement(rs,{schema:p,field:null==t?void 0:t.field,value:t,onChange:r,unbind:a,formField:c}):null)},ls=function(e){var t=e.query,n=e.schema,r=e.field,o=e.onChange,i=e.relation,u=e.unbind,c=e.getNewSchema,s=function(e){return function(r){var i,l=r.field.replace(".",".properties.");"boolean"==(null===(i=Xu().get(n.properties,l))||void 0===i?void 0:i.type)&&Xu().isNil(null==r?void 0:r.value)&&(r.value=!0),o([].concat((0,Wu.Z)(t.slice(0,e)),[r],(0,Wu.Z)(t.slice(e+1))))}},d=function(e){return function(){o([].concat((0,Wu.Z)(t.slice(0,e)),(0,Wu.Z)(t.slice(e+1))))}},p=function(){o([].concat((0,Wu.Z)(t),[{}]))};return t.map((function(e,o){return l().createElement(l().Fragment,null,l().createElement(is,{onChange:s(o),onDelete:d(o),value:e,schema:n,fieldProp:{},unbind:u,getNewSchema:c,field:r}),i&&"and"!=i?null:o==t.length-1?l().createElement(a.Button,{onClick:p},"+ 且"):l().createElement("div",{style:{margin:"0 1rem 0.5rem 1rem"}},"且"))}))};const as=function(e){var t=e.schema,n=e.input,r=e.relation,u=e.unbind,c=e.getNewSchema,s=e.style,d=e.field,p=n.value,f=void 0===p?[]:p,m=n.onChange,v=(0,i.useState)(f),y=(0,o.Z)(v,2),g=y[0],h=y[1];l().useEffect((function(){f||h([[{}]])}),[f]);var b=function(e){var t=e.filter((function(e){return!Xu().isEmpty(e)}));h(t),m&&m(t)},w=((0,i.useCallback)((function(){m(g)}),[g]),(0,i.useCallback)((function(e,t){var n=g[e]||[],r=[].concat((0,Wu.Z)(n),[{field:t}]);b((0,Wu.Z)(Xu().set(g,e,r)))}),[g])),_=(0,i.useCallback)((function(){b([].concat((0,Wu.Z)(g),[[{}]]))}),[g]),E=function(e){return function(t){Xu().isEmpty(t)?b([].concat((0,Wu.Z)(g.slice(0,e)),(0,Wu.Z)(g.slice(e+1)))):b((0,Wu.Z)(Xu().set(g,e,t)))}};return Xu().isEmpty(g)?l().createElement(a.Button,{onClick:function(){return w(0)}},"添加过滤条件"):g.map((function(e,n){return l().createElement("div",{style:s},l().createElement(ls,{query:e,schema:t,field:d,onChange:E(n),relation:r,unbind:u,getNewSchema:c}),r&&"or"!=r?null:n==g.length-1?l().createElement(a.Button,{style:{marginLeft:"0.5rem"},onClick:_},"+ 或"):l().createElement(a.Divider,{plain:!0},"或"))}))};var us=__webpack_require__(3379),cs=__webpack_require__.n(us),ss=__webpack_require__(3395);cs()(ss.Z,{insert:"head",singleton:!1}),ss.Z.locals;const ds=Recoil;function ps(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fs(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ps(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ps(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ms=function(e){var n,r,u,c,s,d,p,f,m=e.option.form,v=e.input,y=(v.onChange,v.value),g=e.input,h=useI18n().t,b=l().useState(!1),w=(0,o.Z)(b,2),_=w[0],E=w[1],C=l().useState(!1),O=(0,o.Z)(C,2),x=O[0],k=O[1],S=l().useState([]),A=(0,o.Z)(S,2),j=A[0],D=A[1],P=(0,i.useState)(null),T=(0,o.Z)(P,2),F=(T[0],T[1]),L=(0,i.useState)([]),B=(0,o.Z)(L,2),M=B[0],N=B[1],I=l().useState({}),R=(0,o.Z)(I,2),Z=R[0],q=R[1],z=(null===(n=m.getState())||void 0===n||null===(r=n.values)||void 0===r||null===(u=r.table)||void 0===u?void 0:u.id)||(null===(c=m.getState())||void 0===c||null===(s=c.values)||void 0===s||null===(d=s.table)||void 0===d||null===(p=d.value)||void 0===p||null===(f=p.value)||void 0===f?void 0:f.split(".")[2]);return l().useEffect((function(){k(!0),(0,t.api)({name:"core/t/schema"}).get(z).then((function(e){q(fs(fs({},null==e?void 0:e.schema),{},{resource:"core/t/"+e.id+"/d",type:"object",orders:{createTime:"DESC"},components:{DataEmpty:function(){return l().createElement(a.Empty,{style:{padding:20},image:__webpack_require__(5002)})}}})),k(!1)}))}),[z]),l().useEffect((function(){g.value&&N((0,Wu.Z)(g.value))}),[JSON.stringify(g.value)]),Object.keys(M).forEach((function(e){var t,n;(null===(t=M[e])||void 0===t?void 0:t.length)>0&&"(".concat(null===(n=M[e])||void 0===n?void 0:n.length,")、")})),l().createElement(l().Fragment,null,l().createElement(a.Button,{style:{color:"#a0a0a0",marginTop:5,width:"100%"}},"已选择 ",y.length||0," 条记录"),l().createElement(a.Button,{style:{marginTop:5,width:"100%"},disabled:x,onClick:function(){var e,t;E((null===(e=m.getState())||void 0===e||null===(t=e.values)||void 0===t?void 0:t.table)&&!0)}},h("选择记录")),l().createElement(a.Modal,{title:h("选择记录"),destroyOnClose:!0,visible:_,onOk:function(){g.onChange(j),E(!1)},bodyStyle:{padding:5,position:"relative"},width:"70%",onCancel:function(){E(!1)}},l().createElement(Oc.Model,{modelKey:z,schema:Z,destroyOnClose:!0},l().createElement("div",{key:"model-list-subnav",style:{display:"flex",justifyContent:"space-between",marginBottom:".5rem"}},l().createElement(Cc.C,{is:"Model.Pagination"})),!Xu().isEmpty(Z)&&(null==Z?void 0:Z.resource)&&l().createElement(Cc.C,{is:"Model.DataTable"}),l().createElement("div",{key:"model-list-downnav",style:{display:"flex",justifyContent:"space-between",marginTop:".5rem"}},l().createElement(Cc.C,{is:"Model.Pagination"})),l().createElement(vs,{loading:x,values:M,setTable:F,setModelSelected:D}))))},vs=function(e){e.loading;var n=e.values,r=e.setTable,o=e.setModelSelected,l=(0,t.use)("model").model,a=(0,t.use)("model.select"),u=a.selected,c=a.onSelect,s=a.onSelectAll;return(0,i.useEffect)((function(){r({id:null==l?void 0:l.name,title:null==l?void 0:l.title}),o((0,Wu.Z)(u))}),[JSON.stringify(u)]),(0,i.useEffect)((function(){s(!1),setTimeout((function(){n.forEach((function(e){Xu().isEmpty(e)||c(e,!0)}))}),100)}),[JSON.stringify(n)]),null},ys=function(e){var n,o=(0,t.use)("FlowContext").context,i=(0,t.use)("form").form,a=e.input.value,u=i.getState().values||{};if(a&&a.bind&&a.value&&Xu().isArray(a.value)&&a.value.forEach((function(e){var t,r,i,l,a,c,s,d,p,f=null===(t=e.value)||void 0===t?void 0:t.split("."),m=Xu().keys((null===(r=o.outputSchema[null==f?void 0:f[0]])||void 0===r||null===(i=r.properties)||void 0===i||null===(l=i.table)||void 0===l?void 0:l.properties)||{})[0];((null===(a=u.table)||void 0===a?void 0:a.id)||(null===(c=u.table)||void 0===c||null===(s=c.value)||void 0===s||null===(d=s.value)||void 0===d||null===(p=d.split("."))||void 0===p?void 0:p[2]))===m||(n=!0)})),a&&a.bind&&a.value&&Xu().isPlainObject(a.value)){var c,s,d,p,f,m,v,y,g,h=null===(c=a.value.value)||void 0===c?void 0:c.split("."),b=Xu().keys((null===(s=o.outputSchema[null==h?void 0:h[0]])||void 0===s||null===(d=s.properties)||void 0===d||null===(p=d.table)||void 0===p?void 0:p.properties)||{})[0];((null===(f=u.table)||void 0===f?void 0:f.id)||(null===(m=u.table)||void 0===m||null===(v=m.value)||void 0===v||null===(y=v.value)||void 0===y||null===(g=y.split("."))||void 0===g?void 0:g[2]))!==b&&(n=!0)}return l().createElement(l().Fragment,null,l().createElement("div",{style:{fontSize:12,color:"red"}},n?_t1("绑定的记录不属于当前表"):null),l().createElement(Zc,r({},e.input,{field:fs(fs({},e.field),{},{extendFlow:{show:!0,type:"tableRecord",mode:"multiple"}})}),l().createElement(ms,e)))};var gs=function(e,t){var n;return(null==e?void 0:e.bind)?null==e||null===(n=e.initValue)||void 0===n?void 0:n.stringify:e},hs={justify:"",njustify:"@#$ne",eq:"",ne:"@#$ne",gt:"@#$gt",lt:"@#$lt",gte:"@#$gte",lte:"@#$lte",range:["@#$lte","@#$gte"],notRange:["@#$lt","@#$gt"],contains:"@#$regex",notContains:"@#$regex",startsWith:"@#$regex",endsWith:"@#$regex",isNull:null,notNull:{"@#$ne":null}},bs=function(e,t){var n,r=Xu().find(null==e?void 0:e.properties,(function(e){return(e.key||e.id)==t.field})),o=null==e?void 0:e.properties[t.field];if("multiple"==(null==o?void 0:o.selectType))n="other";else if(e.filters)n="relate";else if(null!=o&&o.relateTo||null!=o&&o.relate)n=o.relate?"relate":"relateTo";else if("object"!=(null==r?void 0:r.type)&&"array"!=(null==r?void 0:r.type)||null==o||!o.fieldType||"attachment"==(null==o?void 0:o.fieldType)||"attachments"==(null==o?void 0:o.fieldType)||"map"==(null==o?void 0:o.fieldType)){var i,l,a;n=["date","datetime","date-time","time"].includes(null==r?void 0:r.format)||"datePicker"==(null==r?void 0:r.fieldType)?null!==(i=e.required)&&void 0!==i&&i.includes(null==r?void 0:r.key)?"requiredTime":(null==r||null===(l=r.format)||void 0===l?void 0:l.replace("-",""))||(null==r||null===(a=r.formatType)||void 0===a?void 0:a.replace("-","")):(null==r?void 0:r.enum)||(null!=r&&r.enum1?"enum":null==r?void 0:r.type)||"other"}else n="relateTo";return n};function ws(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _s(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ws(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ws(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Es={eventType:{type:"string",title:_r("事件类型"),fieldType:"flow_select",enum:[_r("新增记录时"),_r("更新记录时"),_r("添加或更新记录时"),_r("删除记录时"),_r("删除数据表"),_r("修改数据表")]},logic:{title:_r("触发条件"),type:"object",fieldType:"table",properties:{},field:{component:function(n){var i=React.useState(null),l=(0,o.Z)(i,2),a=l[0],u=l[1],c=function(e){var n=React.useState({id:null}),r=(0,o.Z)(n,2),i=r[0],l=r[1],a=(0,t.use)("form").form,u=React.useRef(null);return a.useField("table",(function(e){var t,n=null==e||null===(t=e.value)||void 0===t?void 0:t.id;(!u.current||n&&u.current!=n)&&(u.current=n,n&&l({id:n}))})),i}(),s=n.input,d=s.onChange,p=s.value,f=window._flow_form_httpCache_;return React.useEffect((function(){var n;null!=c&&c.id&&(f&&f[null==c?void 0:c.id]&&!_.isEmpty(f[null==c?void 0:c.id].schema)?u(null===(n=f[null==c?void 0:c.id])||void 0===n?void 0:n.schema):(0,t.api)({name:"core/t/schema"}).get(c.id).then((function(t){t.schema&&u(t.schema),window._flow_form_httpCache_=_s(_s({},window._flow_form_httpCache_||{}),{},(0,e.Z)({},null==c?void 0:c.id,t))})))}),[null==c?void 0:c.id]),a&&a.listFields.map((function(e){var t;null!==(t=a.properties)&&void 0!==t&&t[e]&&(a.properties[e].field={extendFlow:{show:!0}})})),a&&React.createElement(as,r({unbind:!0},n,{input:{onChange:function(e){d({cond:e.map((function(e){return e.map((function(e){var t,n;return a?_s(_s({},e),{},{fieldMethod:bs(a,e),name:null==a||null===(t=a.properties[e.field])||void 0===t?void 0:t.title,dataType:null==a||null===(n=a.properties[e.field])||void 0===n?void 0:n.config}):e}))})),viewSchema:a})},value:p.cond},schema:a}))}}},selectType:{type:"string",title:_r("记录"),fieldType:"flow_select",enum:[_r("记录选择"),_r("范围定义")]},selectRecord:{type:"object",fieldType:"table",properties:{},title:_r("记录选择"),field:{component:function(e){var n,r,i,a,u,c,s,d,p=e.option.form,f=e.input,m=(f.onChange,f.value,l().useState(!1)),v=(0,o.Z)(m,2),y=(v[0],v[1],l().useState({})),g=(0,o.Z)(y,2),h=(g[0],g[1]),b=l().useState(!1),w=(0,o.Z)(b,2),_=(w[0],w[1],(null===(n=p.getState())||void 0===n||null===(r=n.values)||void 0===r||null===(i=r.table)||void 0===i?void 0:i.id)||(null===(a=p.getState())||void 0===a||null===(u=a.values)||void 0===u||null===(c=u.table)||void 0===c||null===(s=c.value)||void 0===s||null===(d=s.value)||void 0===d?void 0:d.split(".")[2]));return l().useEffect((function(){(0,t.api)({name:"core/t/schema"}).get(_).then((function(e){h(fs(fs({},null==e?void 0:e.schema),{},{resource:"core/t/"+e.id+"/d",type:"object",orders:{createTime:"DESC"}}))}))}),[_]),l().createElement(ms,e)}}}};const Cs=Es;function Os(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xs(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Os(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Os(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ks={type:"object",properties:xs({table:{type:"object",title:_r("表"),fieldType:"table"},data:{type:"object",title:_r("更新字段"),field:{component:function(e){var n,r,i,u,c,s,d=e.input,p=d.onChange,f=d.value,m=l().useState(null),v=(0,o.Z)(m,2),y=v[0],g=v[1],h=l().useState(!1),b=(0,o.Z)(h,2),w=(b[0],b[1]),_=("table",n=l().useState({id:null}),i=(r=(0,o.Z)(n,2))[0],u=r[1],c=(0,t.use)("form").form,s=l().useRef(null),c.useField("table",(function(e){var t,n=null==e||null===(t=e.value)||void 0===t?void 0:t.id;(!s.current||n&&s.current!=n)&&(s.current=n,n&&u({id:n}))})),i),E=a.Select.Option;return f=f||[],l().useEffect((function(){null!=_&&_.id&&(w(!1),(0,t.api)({name:"core/t/schema"}).get(_.id).then((function(e){e.schema&&g(e.schema),w(!0)})))}),[null==_?void 0:_.id]),l().useMemo((function(){return l().createElement(a.Select,{mode:"multiple",value:f,onChange:p},null==y?void 0:y.listFields.filter((function(e){return!(null!=y&&y.properties[e].tableFields)})).map((function(e){var t,n;return l().createElement(E,{key:e,value:e},l().createElement("span",{style:{color:"#999"}},"[",null==y||null===(t=y.properties[e])||void 0===t?void 0:t.config,"]")," ",null==y||null===(n=y.properties[e])||void 0===n?void 0:n.title)})))}),[y,f])}}}},Cs),required:["table","eventType"],form:["*","table","eventType","data","selectType","logic","selectRecord"],formEffect:function(e){var t=e.getState(),n=t.initialValues,r=(t.visited,["logic","selectType","data","selectRecord"]),o={新增记录时:["logic"],删除记录时:["selectType"],更新记录时:["data","selectType"],添加或更新记录时:["data","selectType"]};n.eventType||r.map((function(t){e.setFieldData(t,{display:!1})})),e.useField("eventType",(function(t){r.map((function(n){var r;e.setFieldData(n,{display:(null===(r=o[t.value])||void 0===r?void 0:r.includes(n))||!1})})),n.eventType!=t.value&&(e.change("logic",null),e.change("data",null),e.change("selectType",null),e.change("selectRecord",null))})),e.useField("selectType",(function(t){if("新增记录时"!=n.eventType||"新增记录时"!=e.getState().values.eventType)switch(t.value){case"记录选择":setTimeout((function(){e.setFieldData("logic",{display:!1}),e.setFieldData("selectRecord",{display:!0}),e.change("logic",null)}),10);break;case"范围定义":e.setFieldData("logic",{display:!0}),e.setFieldData("selectRecord",{display:!1}),e.change("selectRecord",null)}})),e.useField("table",(function(t){var r,o;(null==n||null===(r=n.table)||void 0===r?void 0:r.id)!=(null==t||null===(o=t.value)||void 0===o?void 0:o.id)&&(e.change("data",null),e.change("logic",null),e.change("selectRecord",null))}))}},Ss={background:"#8590F7"},As=function(n,r,o){var i,l,a,u,c,s,d,p,f=null===(i=window._flow_form_httpCache_)||void 0===i?void 0:i[null===(l=n.data)||void 0===l||null===(a=l.table)||void 0===a?void 0:a.id],m={};null==f||null===(u=f.schema)||void 0===u||u.form.map((function(e){var t,n,r;m[e]="bytesArray"==(null===(t=f.schema)||void 0===t?void 0:t.properties[e].fieldType)?xs(xs({},null===(n=f.schema)||void 0===n?void 0:n.properties[e]),{},{nodeType:"bytesArray"}):null===(r=f.schema)||void 0===r?void 0:r.properties[e]})),m.table={type:"object",title:_r("表"),nodeType:"table",properties:(0,e.Z)({},null==f?void 0:f.id,{type:"object",title:null==f?void 0:f.title,properties:null==f||null===(c=f.schema)||void 0===c?void 0:c.properties})};var v=Xu().omit(null===(s=t.app.get("models").User)||void 0===s?void 0:s.properties,["password","password2","roles","node","department","startTime"]),y=(null==f||null===(d=f.schema)||void 0===d?void 0:d.properties)&&Xu().cloneDeep(Xu().pickBy(f.schema.properties,(function(e){return"User"==e.relateTo})));Xu().forEach(y,(function(e){Xu().isEmpty(e.properties)&&(e.properties=v)})),Xu().isEmpty(y)||(m.extUserMap={type:"object",title:_r("用户组"),nodeType:"user",properties:y});var g=["删除记录时","删除数据表","修改数据表"].includes(null==n||null===(p=n.data)||void 0===p?void 0:p.eventType)?null:{"#$tableRecord":{type:"object",title:_r("表记录"),properties:{id:{type:"string",title:"表记录Id"}}}};for(var h in m.id={type:"string",title:"更改记录ID"},m){var b,w,_;["attachments"].includes(null===(b=m[h])||void 0===b?void 0:b.fieldType)&&delete m[h],"表格"!=(null===(w=m[h])||void 0===w?void 0:w.config)&&"editableTable"!=(null===(_=m[h])||void 0===_?void 0:_.fieldType)||delete m[h]}o(r,xs(xs({},m),{},{"#$user":{type:"object",title:_r("触发用户"),properties:v}},g))};const js={title:_r("表事件"),category:["起始节点","起始高级节点"],component:function(n){var i,a,u,c,s,d,p,f,m,v=(0,t.use)("FlowContext"),y=(v.context,v.updateOutputValues,v.updateOutputSchema),g=l().useState(!1),h=(0,o.Z)(g,2),b=h[0],w=h[1],_=n.id,E=(n.data,l().useState(null)),C=(0,o.Z)(E,2),O=(C[0],C[1]),x=null==n||null===(i=n.data)||void 0===i||null===(a=i.table)||void 0===a?void 0:a.id;return l().useEffect((function(){var r=window._flow_form_httpCache_;r&&r[x]&&!Xu().isEmpty(r[x])?(O(r[x]),As(n,_,y)):(w(!0),(0,t.api)({name:"core/t/schema"}).get(x).then((function(t){t.schema&&O(t),window._flow_form_httpCache_=xs(xs({},window._flow_form_httpCache_||{}),{},(0,e.Z)({},x,t)),w(!1),As(n,_,y)})))}),[null==n||null===(u=n.data)||void 0===u||null===(c=u.table)||void 0===c?void 0:c.id,null==n||null===(s=n.data)||void 0===s?void 0:s.eventType]),l().createElement(Ec,r({},n,{nodeType:"input",title:(null==n||null===(d=n.data)||void 0===d?void 0:d.name)||_t1("表事件"),titleIcon:"extTitleIcon",cardProps:{headStyle:{background:Ss.background,color:"#FFF"}}}),b?l().createElement("div",null,l().createElement(vc.LoadingOutlined,null)," ",_t1("正在获取节点配置相关数据"),"..."):l().createElement(l().Fragment,null,l().createElement("span",null,null===(p=n.data)||void 0===p?void 0:p.eventType,_t1("触发")," "),l().createElement("br",null),l().createElement("span",null,_t1("表名"),": "),l().createElement("span",{style:{color:Ss.background}},null===(f=n.data)||void 0===f||null===(m=f.table)||void 0===m?void 0:m.title),l().createElement("br",null)))},paramSchema:ks,style:Ss,titleIcon:"extTitleIcon"},Ds=function(){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(n){n&&(e.setFieldData(n&&n.name,{display:n.display}),(n.value||"null"==JSON.stringify(n.value)&&t)&&e.change(n.name,n.value),e.setFieldData(n.name,{field:{required:n.required}}))}))};var Ps={background:"#7682F2"},Ts={type:"object",title:_r("用户登录"),properties:{sendTo:{title:_r("用户范围"),type:"string",enum:["all","user","deptRole"],enum_title:[_r("全部"),_r("指定用户"),_r("指定部门角色")],description:"按照不同的维度定义事件内包括的用户"},department:{type:"array",title:_r("用户所属部门"),items:{},fieldType:"tableData",field:{func:"dataAuth",style:{width:"100%"}}},role:{type:"array",title:_r("用户角色"),notInclude:!0,items:{type:"object",name:"Role",relateTo:"Role",properties:{id:{type:"string"},name:{type:"string"}}}},users:{type:"array",title:_r("用户列表"),notInclude:!0,items:{type:"object",name:"User",relateTo:"User",properties:{Id:{type:"string"},name:{type:"string"}}}}},formEffect:function(e){e.useField("sendTo",(function(t){"user"===t.value?Ds([{name:"users",display:!0},{name:"role",display:!1,value:null},{name:"department",display:!1,value:null}],e):"deptRole"===t.value?Ds([{name:"users",display:!1,value:null},{name:"role",display:!0},{name:"department",display:!0}],e):Ds([{name:"users",display:!1,value:null},{name:"role",display:!1,value:null},{name:"department",display:!1,value:null}],e)}))},required:["sendTo"],form:["*"]};const Fs={title:_r("用户登录"),category:["起始节点","系统操作节点"],component:function(e){var n=e.id,o=e.data,i=e.paramSchema,a=void 0===i?{}:i,u=o||{},c=u.users,s=u.role,d=u.department,p=(0,t.use)("FlowContext").updateOutputSchema;l().useEffect((function(){var e;p(n,(e=t.app.get("models").User,{"#$user":{type:"object",title:_r("用户"),properties:_.omit(null==e?void 0:e.properties,["password","password2","roles","node","department","startTime"])}}))}),[n]);var f=[],m=[],v=[];return d&&d.length&&d.forEach((function(e){f.push(null==e?void 0:e.name)})),c&&c.length&&c.forEach((function(e){m.push(null==e?void 0:e.name)})),s&&s.length&&s.forEach((function(e){v.push(null==e?void 0:e.name)})),l().createElement(Ec,r({},e,{title:"".concat(o.name?_t1(o.name)+"("+_t1(a.title)+")":_t1(o.type)),nodeType:"input",cardProps:{headStyle:{background:Ps.background||"#4971E0",color:"#FFF"}}}),l().createElement("div",null,_t1("用户登录时触发")),f.length>0&&l().createElement("div",null,_t1("包含部门"),": ",l().createElement("span",{style:{color:"#7682F2"}},f.join(", "))),m.length>0&&l().createElement("div",null,_t1("包含用户"),":",l().createElement("span",{style:{color:"#7682F2"}},m.join(", "))),v.length>0&&l().createElement("div",null,_t1("包含角色"),":",l().createElement("span",{style:{color:"#7682F2"}},v.join(", "))))},paramSchema:Ts,style:Ps};function Ls(e,t,n,r,o,i,l){try{var a=e[i](l),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,o)}function Bs(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function l(e){Ls(i,r,o,l,a,"next",e)}function a(e){Ls(i,r,o,l,a,"throw",e)}l(void 0)}))}}var Ms=__webpack_require__(4687),Ns=__webpack_require__.n(Ms);function Is(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Rs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rs(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(a)throw i}}}}function Rs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qs(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Zs(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zs(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var zs=a.Select.Option,Us=a.Select.OptGroup,Gs=function(e){var t=[];return e&&0==e.length?[]:(e.map((function(e){e&&e.warning&&e.warning.rules&&e.warning.rules.forEach((function(n){n.sign=e.title||e.name,t.push(qs(qs({},n),{},{table:Xu().pick(e,["id","title"])}))}))})),t)},$s=function(e){var n=e.input,r=l().useState([]),i=(0,o.Z)(r,2),u=i[0],c=i[1];return l().useEffect((function(){(0,t.api)({name:"warning/rule"}).query({},{where:{}}).then((function(e){var t=e.items;t&&t.length>0&&c(t)}))}),[]),l().createElement(a.Select,{mode:"multiple",placeholder:"请选择",value:(n.value||[]).map((function(e){return e.id})),style:{minWidth:200},onChange:function(e){n.onChange((e||[]).map((function(e){return{id:e}})))}},u.map((function(e){return l().createElement(zs,{key:e.id},e.name)})))},Ys=function(e){var n=e.input,r=n.onChange,i=n.value,u=(e.field,e.field),c=(u.key,u.option.form,(0,t.use)("form",(function(e){return{table:e.values&&e.values.table&&e.values.majorType?"commonTable"==e.values.majorType?e.values.commonTable:e.values.table:null,tableData:e.values&&e.values.tableData}}))),s=c.table,d=c.tableData,p=l().useState({loading:!1,options:{}}),f=(0,o.Z)(p,2),m=f[0],v=(m.loading,m.options),y=f[1],g=l().useState(i&&i.map((function(e){return e.id}))||[]),h=(0,o.Z)(g,2),b=(h[0],h[1],l().useState([])),w=(0,o.Z)(b,2),_=w[0],E=w[1],C={fields:["name","icon","warning"]},O=function(){var e=Bs(Ns().mark((function e(n){var r,o,i,l,a;return Ns().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.next=3,(0,t.api)({name:"core/t/schema"}).query(C,{where:{id:{$in:n.map((function(e){var t;return null==e||null===(t=e.table)||void 0===t?void 0:t.id}))}}}).then((function(e){var t=e.items;t&&t.length>0&&(r.model=Gs(t))}));case 3:o=Xu().uniq((n||[]).map((function(e){var t;return null==e||null===(t=e.table)||void 0===t?void 0:t.id}))),i=Is(o),e.prev=5,a=Ns().mark((function e(){var o,i,a;return Ns().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=l.value,e.next=3,(0,t.api)({name:"core/t/".concat(o,"/d")}).query(C,{where:{id:{$in:n.filter((function(e){var t;return(null==e||null===(t=e.table)||void 0===t?void 0:t.id)===o})).map((function(e){return e.id}))}}});case 3:i=e.sent,(a=i.items)&&a.length>0&&(r.node||(r.node=[]),r.node=[].concat((0,Wu.Z)(r.node),(0,Wu.Z)(Gs(a.map((function(e){return qs(qs({},e),null==e?void 0:e._settings)}))))));case 6:case"end":return e.stop()}}),e)})),i.s();case 8:if((l=i.n()).done){e.next=12;break}return e.delegateYield(a(),"t0",10);case 10:e.next=8;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(5),i.e(e.t1);case 17:return e.prev=17,i.f(),e.finish(17);case 20:y({options:r});case 21:case"end":return e.stop()}}),e,null,[[5,14,17,20]])})));return function(t){return e.apply(this,arguments)}}();l().useEffect((function(){s&&s.length>0&&(0,t.api)({name:"core/t/schema"}).query(C,{where:{id:{$in:s.map((function(e){return e.id}))}}}).then((function(e){var t=e.items;t&&t.length>0&&y((function(e){return{options:{model:Gs(t)}}}))})),d&&d.length>0&&O(d)}),[s,d]),l().useEffect((function(){var e=Object.keys(v).reduce((function(e,t){return e.concat(v[t])}),[]);if(e&&e.length>0){var t=Xu().intersectionBy(e,i,"id");E(e),r(t)}}),[JSON.stringify(v)]);var x=function(e){return(v[e]||[]).map((function(e){return qs({label:"".concat(e.warningname||e.description," "),value:e.id},e)})).filter((function(e){return e.id}))},k=[],S=Object.keys(v).reduce((function(e,t,n){return e.concat(v[t])}),[]);return i&&(k=Xu().intersectionBy(S,i,"id").map((function(e){return e.id}))),l().createElement(a.Select,{mode:"multiple",placeholder:"请选择",value:k,style:{minWidth:200},onChange:function(e){var t=Xu().intersectionBy(_,e.map((function(e){return{id:e}})),"id");r(t)}},Object.keys(v).map((function(e){return Xu().isArray(x(e))&&x(e).length>0?l().createElement(Us,{label:"model"==e?"设备表":"设备"},x(e).map((function(e){return l().createElement(zs,{key:e.value},e.label,"-( ",e.sign," )")}))):null})))};function Hs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vs(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Hs(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hs(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ws(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ks(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ks(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(a)throw i}}}}function Ks(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xs=a.Select.Option,Js=a.Select.OptGroup,Qs=function(e){var n=l().useState({id:null}),r=(0,o.Z)(n,2),i=r[0],a=r[1],u=(0,t.use)("form").form,c=l().useRef(null);return u.useField(e,(function(e){var t=null==e?void 0:e.value;(!c.current||t&&c.current!=t)&&(c.current=t,t&&a(t))})),i},ed=function(e){var n,r=e.input,i=Qs("table"),u=l().useState([]),c=(0,o.Z)(u,2),s=c[0],d=c[1],p=function(){var e=Bs(Ns().mark((function e(n){var r,o,i,l,a;return Ns().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],o=Ws(n),e.prev=2,o.s();case 4:if((i=o.n()).done){e.next=12;break}return l=i.value,e.next=8,(0,t.api)({name:"core/t/schema/tag"}).get(l.id);case 8:a=e.sent,r.push({id:l.id,name:l.title,tags:a.tags,table:l});case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),o.e(e.t0);case 17:return e.prev=17,o.f(),e.finish(17);case 20:d(r);case 21:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})));return function(t){return e.apply(this,arguments)}}();l().useEffect((function(){var e=_.isArray(i)||_.isEmpty(i)?i:[i];null!=e&&e.length&&p(e)}),[JSON.stringify(i)]);var f=null!==(n=r.value)&&void 0!==n&&n.length?r.value.map((function(e){return e.id})):[];return l().createElement(a.Select,{defaultValue:f,onChange:function(e,t){r.onChange(t.map((function(e){return e.tag})))},mode:"multiple"},s.map((function(e){var t;return l().createElement(Js,{label:e.name},null===(t=e.tags)||void 0===t?void 0:t.map((function(t){return l().createElement(Xs,{value:t.id,tag:Vs(Vs({},t),{},{table:e.table})},t.name)})))})))},td=function(e){var t=e.input;return"event"==e.field.origin?l().createElement(Cc.C,r({is:"PointTable",fullLable:!0,type:"checkbox"},e)):l().createElement(Cc.C,{is:"Dashboard.FormModalButton",title:"数据点",align:"left",offset:30,width:800,compStyle:!1,ButtonBody:function(){var e=t.value;return e&&e.length?e.map((function(e){var t;return console.log(e,"item"),l().createElement(a.Tag,null,null==e||null===(t=e.tableData)||void 0===t?void 0:t.name,"-",e.name)})):_t1("点击配置")}},l().createElement("div",{className:"flow-editor-form",style:{padding:0}},l().createElement(Cc.C,r({is:"PointTable",fullLable:!0,type:"checkbox"},e))))};function nd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rd(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?nd(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nd(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var od={background:"#E26E6E"},id={type:"object",title:_r("报警事件"),properties:{majorType:{type:"string",title:_r("报警范围"),enum:["unlimited","table","commonTable","global"],enum_title:[_r("不限"),_r("设备表报警"),_r("其他表报警"),_r("全局报警")]},warningType:{type:"string",title:_r("类型"),enum:["timeout","dataPoint","complex"],enum_title:[_r("数据点采集超时报警"),_r("数据点报警"),_r("复杂报警")]},dateType:{type:"string",title:_r("数据类型"),enum:["table","tableData"],enum_title:[_r("设备表数据点"),_r("设备数据点")]},eventRange:{title:_r("报警维度"),type:"array",selectType:"multiple",selectFace:"select",enum1:["warnType","warnLevel","department","table","tableData"],enum_title1:[_r("按报警类型"),_r("按级别"),_r("按部门"),_r("按设备表"),_r("按设备")],items:{},description:_r("定义报警信息的筛选范围")},warnType:{type:"array",title:_r("报警类型"),items:{},fieldType:"warningType"},table:{type:"array",title:_r("设备表"),fieldType:"table",field:{func:"device",style:{wdith:"100%"}},items:{}},commonTable:{type:"array",title:_r("其他表"),fieldType:"table",field:{filter:{function:{$not:{$regex:"device"}}},style:{wdith:"100%"}},items:{}},department:{type:"array",title:_r("部门"),fieldType:"tableData",field:{func:"dataAuth",style:{wdith:"100%"}},items:{}},tableData:{type:"array",title:_r("设备"),fieldType:"tableData",field:{depend:"table",dependRelate:"department",style:{wdith:"100%"},func:"device"},items:{type:"object",name:"table",properties:{id:{type:"string"},name:{type:"string"}}}},level:{title:_r("级别"),type:"array",items:{},selectType:"multiple",selectFace:"select",enum1:["低","中","高"],enum_title1:[_r("低"),_r("中"),_r("高")]},rule:{type:"array",items:{},title:_r("报警规则"),field:{component:function(e){return"global"===oc("majorType")?l().createElement($s,e):l().createElement(Ys,e)}}},dataPoint:{type:"array",title:_r("数据点"),items:{},field:{component:function(e){return e.input,"table"===Qs("dateType")?l().createElement(ed,e):l().createElement(td,e)}}},jzLevel:{type:"array",title:_r("报警值级别"),items:{},selectType:"multiple",selectFace:"select",enum1:["llow","low","high","hhigh"],enum_title1:[_r("低低"),_r("低"),_r("高"),_r("高高")]},action:{title:_r("报警动作"),type:"array",items:{},selectType:"multiple",selectFace:"select",enum1:["报警发生时","报警确认时","报警处理时","报警恢复时"],enum_title1:[_r("报警发生"),_r("报警确认"),_r("报警处理"),_r("报警恢复")],field:{component:function(e){var t=e.input,n=t.value,r=t.onChange,o=useI18n().t,i=e.option.form.getState().values,u=[o("报警发生时"),o("报警处理时"),o("抑制设备表报警时"),o("抑制设备报警时"),o("报警确认时")];return"timeout"==i.warningType&&(u=[o("报警发生时")]),"global"==i.majorType&&(u=[o("报警发生时"),o("报警处理时"),o("报警确认时"),o("禁用报警时")]),"commonTable"==i.majorType&&(u=[o("报警发生时"),o("报警处理时"),o("报警确认时")]),l().createElement(a.Select,{mode:"multiple",onChange:r,value:n||[]},u.map((function(e){return l().createElement(Option,{key:e},e)})))}},description:_r("定义报警信息的执行什么动作时触发事件")},triggerInterval:{title:_r("执行频率"),type:"integer",minimum:0,description:_r("配置频率后，事件按照设定的执行频率触发执行，否则实时触发，单位秒。")}},required:["majorType","action"],formEffect:function(e){var t=e.getState(),n=(t.initialValues,t.values);console.log(n,"values");var r=!1;e.useField("majorType",(function(t){var n=t.value;n?"unlimited"===n?Ds([{name:"warningType",display:!1},{name:"dateType",display:!1},{name:"eventRange",display:!1},{name:"warnType",display:!0},{name:"table",display:!0},{name:"department",display:!0},{name:"tableData",display:!0},{name:"level",display:!0},{name:"rule",display:!1,value:null},{name:"dataPoint",display:!1},{name:"jzLevel",display:!1,value:null},{name:"ruleType",display:!1},{name:"commonTable",display:!1}],e,r):"global"===n?Ds([{name:"warningType",display:!1},{name:"dateType",display:!1},{name:"eventRange",display:!1},{name:"warnType",display:!1,value:null},{name:"table",display:!1},{name:"department",display:!1,value:null},{name:"tableData",display:!1},{name:"level",display:!1,value:null},{name:"rule",display:!0},{name:"dataPoint",display:!1},{name:"jzLevel",display:!1,value:null},{name:"ruleType",display:!0},{name:"commonTable",display:!1}],e,r):"table"===n?Ds([{name:"warningType",display:!0,required:!0},{name:"dateType",display:!1},{name:"eventRange",display:!1},{name:"warnType",display:!1,value:null},{name:"table",display:!1},{name:"department",display:!1,value:null},{name:"tableData",display:!1},{name:"level",display:!1,value:null},{name:"rule",display:!1,value:null},{name:"dataPoint",display:!1},{name:"jzLevel",display:!1,value:null},{name:"ruleType",display:!1},{name:"commonTable",display:!1}],e,r):"commonTable"===n&&Ds([{name:"warningType",display:!1,value:"complex"},{name:"dateType",display:!1},{name:"eventRange",display:!1,value:["table"]},{name:"warnType",display:!1,value:null},{name:"table",display:!1},{name:"commonTable",display:!0},{name:"department",display:!1,value:null},{name:"tableData",display:!1},{name:"level",display:!1,value:null},{name:"rule",display:!0},{name:"dataPoint",display:!1},{name:"jzLevel",display:!1,value:null},{name:"ruleType",display:!1}],e,r):Ds([{name:"warningType",display:!1},{name:"dateType",display:!1},{name:"eventRange",display:!1},{name:"warnType",display:!1},{name:"table",display:!0},{name:"department",display:!1},{name:"tableData",display:!1},{name:"level",display:!1},{name:"rule",display:!1},{name:"dataPoint",display:!1},{name:"jzLevel",display:!1},{name:"ruleType",display:!1},{name:"commonTable",display:!1}],e),r&&"commonTable"!==n&&e.change("warningType",null)})),e.useField("warningType",(function(t){var n=t.value;if("timeout"===n)Ds([{name:"dateType",display:!0},{name:"eventRange",display:!1},{name:"warnType",display:!1,value:null},{name:"tableData",display:!1},{name:"department",display:!1,value:null},{name:"level",display:!1,value:null},{name:"rule",display:!1,value:null},{name:"dataPoint",display:!1},{name:"jzLevel",display:!1,value:null}],e,r);else if("complex"===n){var o=e.getState().values.majorType;Ds([{name:"dateType",display:!1},{name:"eventRange",display:"commonTable"!=o},{name:"warnType",display:!1,value:null},{name:"table",display:!1},{name:"department",display:!1,value:null},{name:"tableData",display:!1},{name:"level",display:!1,value:null},"commonTable"!=o?{name:"rule",display:!1,value:null}:{name:"rule",display:!1},{name:"action",display:!0,required:!0},{name:"dataPoint",display:!1},{name:"jzLevel",display:!1,value:null}],e,r)}else"dataPoint"===n&&Ds([{name:"dateType",display:!0},{name:"eventRange",display:!1},{name:"warnType",display:!1,value:null},{name:"tableData",display:!1},{name:"department",display:!1,value:null},{name:"level",display:!1,value:null},{name:"rule",display:!1,value:null},{name:"action",display:!0,required:!0},{name:"jzLevel",display:!0}],e,r);r&&(e.change("dateType",null),e.change("table",[]),e.change("dataPoint",[]),e.change("action",[]))})),e.useField("dateType",(function(t){var n=t.value;Ds(n?[{name:"dataPoint",display:!0}]:[{name:"dataPoint",display:!1}],e),Ds("table"===n?[{name:"table",display:!0}]:[{name:"table",display:!1}],e),r&&(e.change("node",null),e.change("table",null),e.change("department",null),e.change("dataPoint",null),e.change("eventRange",null),e.change("action",null))})),e.useField("eventRange",(function(t){if(t.value){var n=e.getState().values,o={warnType:[{name:"warnType",display:!0,value:_.get(n,"warnType"),required:!0}],warnLevel:[{name:"level",display:!0,value:_.get(n,"level"),required:!0}],department:[{name:"department",display:!0,value:_.get(n,"department"),required:!0}],table:[{name:"rule",display:!0,required:!0},{name:"table",display:"commonTable"!==n.majorType&&"global"!==n.majorType,value:_.get(n,"table")},{name:"tableData",display:!1,value:null}],tableData:[{name:"rule",display:!0,required:!0},{name:"table",display:!1,value:null},{name:"tableData",display:!0,value:_.get(n,"tableData")}]},i=[{name:"table",display:!1,value:null},{name:"tableData",display:!1,value:null},{name:"warnType",display:!1,value:null},{name:"level",display:!1,value:null},{name:"department",display:!1,value:null},{name:"rule",display:!1,value:_.get(n,"rule")}];if(_.isArray(t.value)){var l=t.value.flatMap((function(e){return o[e]}));t.value.includes("table")&&t.value.includes("tableData")&&Ds([{name:"rule",display:!0,value:[]}],e,r);var a=_.differenceBy(i,l,"name");Ds([].concat((0,Wu.Z)(l),(0,Wu.Z)(a)),e,r)}else e.change("rule",[]),e.change("table",null),e.change("tableData",null)}})),r=!0}},ld=function(e){var t=e.node,n=e.dataPoint,r=e.action;return JSON.stringify(t)+JSON.stringify(n)+r},ad=function(n){var r,o,i=n.node,l=n.dataPoint,a=n.action;console.log(l,"dataPoint");var u=i||(null==l||null===(r=l.filter((function(e){var t;return null==e||null===(t=e.node)||void 0===t?void 0:t.id})))||void 0===r?void 0:r.map((function(e){return e.node}))),c=[],s=(null==a?void 0:a.indexOf("报警处理时"))>-1||(null==a?void 0:a.indexOf("报警确认时"))>-1?{"#$user":{type:"object",title:_r("用户"),properties:_.omit(null===(o=t.app.get("models").User)||void 0===o?void 0:o.properties,["password","password2","roles","node","department","startTime"])}}:null;return console.log(u,"_nodes"),null!=u&&u.length?u.forEach((function(t){var n;c=rd(rd({},c),{},(n={},(0,e.Z)(n,"".concat(t.id,".desc"),{type:"string",title:"".concat(t.name,"-").concat(_r("报警描述"))}),(0,e.Z)(n,"".concat(t.id,".type"),{type:"string",title:"".concat(t.name,"-").concat(_r("报警类型"))}),(0,e.Z)(n,"".concat(t.id,".level"),{type:"string",title:"".concat(t.name,"-").concat(_r("报警等级"))}),(0,e.Z)(n,"".concat(t.id,".action"),{type:"string",title:"".concat(t.name,"-").concat(_r("报警动作"))}),(0,e.Z)(n,"".concat(t.id,".time"),{type:"string",title:"".concat(t.name,"-").concat(_r("报警时间"))}),(0,e.Z)(n,"".concat(t.id,".tagInfo"),{type:"string",title:_r("报警数值")}),(0,e.Z)(n,"".concat(t.id,".#$tableData"),{type:"object",title:"".concat(t.name,"-报警设备"),properties:{name:{title:_r("名称"),type:"string"},uid:{title:_r("编号"),type:"string"}}}),(0,e.Z)(n,"".concat(t.id,".#$table"),{type:"object",title:"".concat(t.name,"-").concat(_r("报警设备表")),properties:{name:{title:_r("名称"),type:"string"},uid:{title:_r("编号"),type:"string"}}}),(0,e.Z)(n,"".concat(t.id,".#$department"),{type:"object",title:"".concat(t.name,"-报警部门")}),n))})):c={desc:{type:"string",title:_r("报警描述")},type:{type:"string",title:_r("报警类型")},level:{type:"string",title:_r("报警等级")},action:{type:"string",title:_r("报警动作")},time:{type:"string",title:_r("报警时间")},tagInfo:{type:"string",title:_r("报警数值")},"#$tableData":{type:"object",title:_r("报警设备"),properties:{name:{title:_r("名称"),type:"string"},uid:{title:_r("编号"),type:"string"}}},"#$table":{type:"object",title:_r("报警设备表"),properties:{name:{title:_r("名称"),type:"string"},uid:{title:_r("编号"),type:"string"}}},"#$department":{type:"object",title:_r("报警部门")}},c=rd(rd({},c),s)},ud=function(e){var t=e.fn,n=e.data,r=e.id,o=e.callback,i=e.onStatusChange;if(!o||!_.isFunction(o))return t(n);if(t&&_.isFunction(t)){var l,a=t(n);"Promise"==(null==a||null===(l=a.constructor)||void 0===l?void 0:l.name)?(i(!0),a.then((function(e){o(r,e),i(!1)})).catch((function(e){message.error((null==e?void 0:e.message)||e),i(!1)}))):o(r,a)}};const cd={title:_r("报警事件"),category:[_r("起始节点"),_r("业务数据节点")],component:function(e){var n=e.id,o=e.data,i=void 0===o?{}:o,a=e.paramSchema,u=void 0===a?{}:a,c=i.majorType,s=i.warningType,d=i.action,p=i.dataPoint,f=(0,t.use)("FlowContext"),m=f.updateStatus,v=f.updateOutputSchema,y=useI18n().t,g=l().useRef(0),h=function(e){m&&m(n,{loading:e,mount:g.current>=1}),e&&(g.current+=1)},b=ud({fn:ld,data:i,onStatusChange:h});l().useEffect((function(){ud({fn:ad,data:i,id:n,callback:v,onStatusChange:h})}),[b]);var w={timeout:y("数据点采集超时报警"),complex:y("复杂报警"),dataPoint:y("数据点报警")},_={unlimited:y("不限"),global:y("全局报警"),table:y("设备表报警"),commonTable:y("普通表报警")};return l().createElement(Ec,r({},e,{title:"".concat(i.name?y(i.name)+"("+y(u.title)+")":y(i.type)),nodeType:"input",cardProps:{headStyle:{background:od.background||"#4971E0",color:"#FFF"}}}),l().createElement("div",null,l().createElement("span",null,y("报警范围"),"：",_[c])),"table"===c?l().createElement("div",null,l().createElement("span",null,y("报警类型"),"：",w[s])):null,null!=d&&d.length?l().createElement("div",null,l().createElement("span",null,y("包含了"),(null==d?void 0:d.length)||0,y("个报警动作"))):null,s&&"complex"!==s?l().createElement("div",null,l().createElement("span",null,y("数据点"),"："),l().createElement("span",{style:{color:"#E26E6E"}},null==p?void 0:p.map((function(e){var t,n;return"".concat(null!=e&&null!==(t=e.tableData)&&void 0!==t&&t.name?"".concat(null==e||null===(n=e.tableData)||void 0===n?void 0:n.name,"-"):"").concat(e.name)})).join(","))):null)},paramSchema:id,style:od,requiredInfo:function(e){var t=e.data,n=t.majorType,r=t.action,o=t.warningType;return n?_.isEmpty(r)?_r("报警动作"):o||"table"!=n?null:_r("类型"):_r("报警范围")}};function sd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dd(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?sd(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sd(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var pd=a.Select.Option;var fd={background:"#E26E6E"},md={type:"object",title:_r("指令事件"),properties:{table:{type:"object",title:_r("设备表"),properties:{},fieldType:"table",field:{func:"device"},description:"选择指令所属的设备表"},selectType:{title:_r("执行设备"),type:"string",enum:["设备选择","触发条件"]},selectRecord:{type:"object",properties:{},title:_r("设备选择"),field:{component:ys}},query:{type:"object",properties:{},title:_r("触发条件"),field:{component:function(e){var n=e.input,r=void 0===n?{}:n,o=r.value,i=void 0===o?{}:o,a=r.onChange,u=(0,t.use)("form",(function(e){return{table:e.values&&e.values.table}})).table,c=(0,t.use)("table.schema",null==u?void 0:u.id).schema,s=void 0===c?{type:"object",properties:{}}:c,d=i.cond;return l().createElement(Cc.C,{is:"QueryEditor",schema:s,input:{value:d,onChange:function(e){a({cond:e,schema:s})}},DataWrap:Mc})}}},command:{title:_r("指令"),type:"array",items:{},field:{component:function(e){var n=e.input,r=e.input.value,i=l().useState([]),u=(0,o.Z)(i,2),c=(u[0],u[1],l().useState([])),s=(0,o.Z)(c,2),d=(s[0],s[1]),p=l().useState(!1),f=(0,o.Z)(p,2),m=f[0],v=f[1],y=l().useState({node:[],model:[]}),g=(0,o.Z)(y,2),h=g[0],b=g[1],w=(0,t.use)("form",(function(e){return{table:e.values&&e.values.table}})).table;l().useEffect((function(){v(!0),w&&w.id?(0,t.api)({name:"core/t/schema"}).fetch("/command/".concat(w.id),{}).then((function(e){var t=e.json;d(t),b((function(e){return dd(dd({},e),{},{model:t})})),v(!1)})):(b((function(e){return dd(dd({},e),{},{model:[]})})),v(!1))}),[w]);var _=Object.keys(h).reduce((function(e,t){return e.concat(h[t])}),[]),E=[];return r&&Xu().isArray(r)&&(E=r.map((function(e){return{label:e.name,value:e.id,key:e.id}}))),l().createElement(a.Select,{showSearch:!0,loading:m,mode:"multiple",style:{minWidth:160,width:"100%"},placeholder:_t1("请选择指令"),onChange:function(e){var t=Xu().intersectionBy(_.map((function(e){return dd({key:e.id},e)}))||[],e,"key");n.onChange(t)},optionFilterProp:"label",labelInValue:!0,dropdownMatchSelectWidth:!1,getPopupContainer:function(e){return e},allowClear:!0,value:E},_&&_.map((function(e){return l().createElement(pd,{value:e.id,key:e.id},e.name)})))}}},cmdStatus:{title:_r("指令状态"),type:"string",enum:["send","success","fail"],enum_title:[_r("指令发送时"),_r("指令发送成功时"),_r("指令发送失败时")]}},required:["table","command","cmdStatus"],formEffect:function(e){var t=e.getState().initialValues;e.useField("selectType",(function(t){"设备选择"===t.value?(e.setFieldData("query",{display:!1}),e.setFieldData("selectRecord",{display:!0}),e.change("query",null)):"触发条件"===t.value?(e.setFieldData("query",{display:!0}),e.setFieldData("selectRecord",{display:!1}),e.change("selectRecord",null)):(e.setFieldData("query",{display:!1}),e.setFieldData("selectRecord",{display:!1}),e.change("query",null),e.change("selectRecord",null))})),e.useField("table",(function(n){var r,o;(null==t||null===(r=t.table)||void 0===r?void 0:r.id)!=(null==n||null===(o=n.value)||void 0===o?void 0:o.id)&&e.change("selectRecord",null)}))}};const vd={title:_r("指令事件"),category:["起始节点","业务数据节点"],component:function(e){var n=e.id,o=e.data,i=void 0===o?{}:o,a=e.paramSchema,u=void 0===a?{}:a,c=i.command,s=i.cmdStatus,d=(0,t.use)("FlowContext").updateOutputSchema;return l().useEffect((function(){d(n,{cmdName:{title:_r("指令名称"),type:"string"},"#$tableData":{type:"object",title:_r("设备"),properties:{}},"#$table":{type:"object",title:_r("设备表"),properties:{}}})}),[n]),l().createElement(Ec,r({},e,{title:"".concat(i.name?_t1(i.name)+"("+_t1(u.title)+")":_t1(i.type)),nodeType:"input",cardProps:{headStyle:{background:fd.background||"#4971E0",color:"#FFF"}}}),l().createElement("div",null,{send:_t1("指令发送时"),success:_t1("指令发送成功时"),fail:_t1("指令发送失败时")}[s]),l().createElement("div",null,_t1("包含"),l().createElement("span",{style:{color:"#7682F2"}},(null==c?void 0:c.length)||0),_t1("个指令")))},paramSchema:md,style:fd};var yd=__webpack_require__(9142);function gd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(0,yd.Z)(r.key),r)}}function hd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bd(e,t){return bd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bd(e,t)}var wd=__webpack_require__(1002);function _d(e){return _d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_d(e)}var Ed=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bd(e,t)}(c,t);var n,r,o,i,u=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_d(o);if(i){var n=_d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===(0,wd.Z)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hd(e)}(this,e)});function c(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=u.call.apply(u,[this].concat(r)),(0,e.Z)(hd(t),"onChange",(function(e){t.props.input.onChange(t.getValue(e))})),(0,e.Z)(hd(t),"disabledEndDate",(function(e){var n=t.props.EndDate&&kc()().subtract(1,"days");return!(!e||!n)&&e.valueOf()<=n.valueOf()})),t}return n=c,(r=[{key:"getValue",value:function(e){var t=this.props,n=t.field,r=(t.EndDate,n.datetimeFormat||"YYYY-MM-DD HH:mm:ss");return e&&e.format(r)||void 0}},{key:"render",value:function(){var e=this.props,t=e.input,n=e.field.datetimeFormat||"YYYY-MM-DD HH:mm:ss";return l().createElement(a.DatePicker,{onChange:this.onChange,disabledDate:this.disabledEndDate,showTime:!0,value:t.value?kc()(t.value):null,format:n,placeholder:_t1("选择日期")})}}])&&gd(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),c}(l().Component);function Cd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Od(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Cd(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cd(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}a.Select.Option,Array.from({length:12},(function(e,t){return"".concat(t+1)}));const xd=function(e){var n=e.input,r=e.relevanceField,i=void 0===r?"type":r,u=(0,t.use)("form",(function(e){return{planCycle:e&&e.values&&e.values[i]||("once"===e.values.selectType||"fixed"===e.values.selectType)&&"once"}})),c=(u.planCycle,u.formState,l().useRef());c.current=n.value,n.value,n.onChange,l().useEffect((function(){n.onChange(c.current)}),[c.current]);var s=[{activeKey:"second",title:_t1("秒"),component:function(){var e,t,r,i,u,s,d,p,f=l().useState(null===(e=c.current)||void 0===e||null===(t=e.execution)||void 0===t?void 0:t.second),m=(0,o.Z)(f,2),v=m[0],y=m[1];return l().createElement("div",null,_t1("从")," ",l().createElement(a.InputNumber,{min:0,max:(null==v?void 0:v.next)||59,defaultValue:null===(r=c.current)||void 0===r||null===(i=r.execution)||void 0===i||null===(u=i.second)||void 0===u?void 0:u.prev,onChange:function(e){var t,r,o,i,l,a,u,s,d,p=(e||"")+"-"+((null===(t=c.current)||void 0===t||null===(r=t.execution)||void 0===r||null===(o=r.second)||void 0===o?void 0:o.next)||"");c.current=Od(Od({},c.current),{},{execution:Od(Od({},c.current.execution),{},{second:{prev:e,next:null===(i=c.current)||void 0===i||null===(l=i.execution)||void 0===l||null===(a=l.second)||void 0===a?void 0:a.next},secondCycle:e||null!==(u=c.current)&&void 0!==u&&null!==(s=u.execution)&&void 0!==s&&null!==(d=s.second)&&void 0!==d&&d.next?p:null})}),y(Od(Od({},v),{},{prev:e})),n.onChange(c.current)}})," - ",l().createElement(a.InputNumber,{min:(null==v?void 0:v.prev)||0,max:59,defaultValue:null===(s=c.current)||void 0===s||null===(d=s.execution)||void 0===d||null===(p=d.second)||void 0===p?void 0:p.next,onChange:function(e){var t,r,o,i,l,a,u,s,d,p=((null===(t=c.current)||void 0===t||null===(r=t.execution)||void 0===r||null===(o=r.second)||void 0===o?void 0:o.prev)||"")+"-"+(e||"");c.current=Od(Od({},c.current),{},{execution:Od(Od({},c.current.execution),{},{second:{next:e,prev:null===(i=c.current)||void 0===i||null===(l=i.execution)||void 0===l||null===(a=l.second)||void 0===a?void 0:a.prev},secondCycle:e||null!==(u=c.current)&&void 0!==u&&null!==(s=u.execution)&&void 0!==s&&null!==(d=s.second)&&void 0!==d&&d.prev?p:null})}),y(Od(Od({},v),{},{next:e})),n.onChange(c.current)}})," ",_t1("秒"))}},{activeKey:"minute",title:_t1("分"),component:function(){var e,t,r,i,u,s,d,p,f=l().useState(null===(e=c.current)||void 0===e||null===(t=e.execution)||void 0===t?void 0:t.minute),m=(0,o.Z)(f,2),v=m[0],y=m[1];return l().createElement("div",null,_t1("从")," ",l().createElement(a.InputNumber,{min:0,max:(null==v?void 0:v.next)||59,value:null===(r=c.current)||void 0===r||null===(i=r.execution)||void 0===i||null===(u=i.minute)||void 0===u?void 0:u.prev,onChange:function(e){var t,r,o,i,l,a,u,s,d,p=(e||"")+"-"+((null===(t=c.current)||void 0===t||null===(r=t.execution)||void 0===r||null===(o=r.minute)||void 0===o?void 0:o.next)||"");c.current=Od(Od({},c.current),{},{execution:Od(Od({},c.current.execution),{},{minute:{prev:e,next:null===(i=c.current)||void 0===i||null===(l=i.execution)||void 0===l||null===(a=l.minute)||void 0===a?void 0:a.next},minuteCycle:e||null!==(u=c.current)&&void 0!==u&&null!==(s=u.execution)&&void 0!==s&&null!==(d=s.minute)&&void 0!==d&&d.next?p:null})}),y(Od(Od({},v),{},{prev:e})),n.onChange(c.current)}})," - ",l().createElement(a.InputNumber,{min:(null==v?void 0:v.prev)||0,max:59,value:null===(s=c.current)||void 0===s||null===(d=s.execution)||void 0===d||null===(p=d.minute)||void 0===p?void 0:p.next,onChange:function(e){var t,r,o,i,l,a,u,s,d,p=((null===(t=c.current)||void 0===t||null===(r=t.execution)||void 0===r||null===(o=r.minute)||void 0===o?void 0:o.prev)||"")+"-"+(e||"");c.current=Od(Od({},c.current),{},{execution:Od(Od({},c.current.execution),{},{minute:{next:e,prev:null===(i=c.current)||void 0===i||null===(l=i.execution)||void 0===l||null===(a=l.minute)||void 0===a?void 0:a.prev},minuteCycle:e||null!==(u=c.current)&&void 0!==u&&null!==(s=u.execution)&&void 0!==s&&null!==(d=s.minute)&&void 0!==d&&d.prev?p:null})}),y(Od(Od({},v),{},{next:e})),n.onChange(c.current)}})," ",_t1("分"))}},{activeKey:"hour",title:_t1("小时"),component:function(){var e,t,r,i,u,s,d,p,f=l().useState(null===(e=c.current)||void 0===e||null===(t=e.execution)||void 0===t?void 0:t.hour),m=(0,o.Z)(f,2),v=m[0],y=m[1];return l().createElement("div",null,_t1("从")," ",l().createElement(a.InputNumber,{min:0,max:(null==v?void 0:v.next)||23,value:null===(r=c.current)||void 0===r||null===(i=r.execution)||void 0===i||null===(u=i.hour)||void 0===u?void 0:u.prev,onChange:function(e){var t,r,o,i,l,a,u,s,d,p=(e||"")+"-"+((null===(t=c.current)||void 0===t||null===(r=t.execution)||void 0===r||null===(o=r.hour)||void 0===o?void 0:o.next)||"");c.current=Od(Od({},c.current),{},{execution:Od(Od({},c.current.execution),{},{hour:{prev:e,next:null===(i=c.current)||void 0===i||null===(l=i.execution)||void 0===l||null===(a=l.hour)||void 0===a?void 0:a.next},hourCycle:e||null!==(u=c.current)&&void 0!==u&&null!==(s=u.execution)&&void 0!==s&&null!==(d=s.hour)&&void 0!==d&&d.next?p:null})}),y(Od(Od({},v),{},{prev:e})),n.onChange(c.current)}})," - ",l().createElement(a.InputNumber,{min:(null==v?void 0:v.prev)||0,max:23,value:null===(s=c.current)||void 0===s||null===(d=s.execution)||void 0===d||null===(p=d.hour)||void 0===p?void 0:p.next,onChange:function(e){var t,r,o,i,l,a,u,s,d,p=((null===(t=c.current)||void 0===t||null===(r=t.execution)||void 0===r||null===(o=r.hour)||void 0===o?void 0:o.prev)||"")+"-"+(e||"");c.current=Od(Od({},c.current),{},{execution:Od(Od({},c.current.execution),{},{hour:{next:e,prev:null===(i=c.current)||void 0===i||null===(l=i.execution)||void 0===l||null===(a=l.hour)||void 0===a?void 0:a.prev},hourCycle:e||null!==(u=c.current)&&void 0!==u&&null!==(s=u.execution)&&void 0!==s&&null!==(d=s.hour)&&void 0!==d&&d.prev?p:null})}),y(Od(Od({},v),{},{next:e})),n.onChange(c.current)}})," ",_t1("小时"))}},{activeKey:"day",title:_t1("日"),component:function(){var e,t,r,i,u,s,d,p,f=l().useState(null===(e=c.current)||void 0===e||null===(t=e.execution)||void 0===t?void 0:t.day),m=(0,o.Z)(f,2),v=m[0],y=m[1];return l().createElement("div",null,_t1("从")," ",l().createElement(a.InputNumber,{min:1,max:(null==v?void 0:v.next)||31,value:null===(r=c.current)||void 0===r||null===(i=r.execution)||void 0===i||null===(u=i.day)||void 0===u?void 0:u.prev,onChange:function(e){var t,r,o,i,l,a,u,s,d,p=(e||"")+"-"+((null===(t=c.current)||void 0===t||null===(r=t.execution)||void 0===r||null===(o=r.day)||void 0===o?void 0:o.next)||"");c.current=Od(Od({},c.current),{},{execution:Od(Od({},c.current.execution),{},{day:{prev:e,next:null===(i=c.current)||void 0===i||null===(l=i.execution)||void 0===l||null===(a=l.day)||void 0===a?void 0:a.next},dayCycle:e||null!==(u=c.current)&&void 0!==u&&null!==(s=u.execution)&&void 0!==s&&null!==(d=s.day)&&void 0!==d&&d.next?p:null,week:{next:null,prev:null},weekCycle:null})}),y(Od(Od({},v),{},{prev:e})),n.onChange(c.current)}})," - ",l().createElement(a.InputNumber,{min:(null==v?void 0:v.prev)||1,max:31,value:null===(s=c.current)||void 0===s||null===(d=s.execution)||void 0===d||null===(p=d.day)||void 0===p?void 0:p.next,onChange:function(e){var t,r,o,i,l,a,u,s,d,p=((null===(t=c.current)||void 0===t||null===(r=t.execution)||void 0===r||null===(o=r.day)||void 0===o?void 0:o.prev)||"")+"-"+(e||"");c.current=Od(Od({},c.current),{},{execution:Od(Od({},c.current.execution),{},{day:{next:e,prev:null===(i=c.current)||void 0===i||null===(l=i.execution)||void 0===l||null===(a=l.day)||void 0===a?void 0:a.prev},dayCycle:e||null!==(u=c.current)&&void 0!==u&&null!==(s=u.execution)&&void 0!==s&&null!==(d=s.day)&&void 0!==d&&d.prev?p:null,week:{next:null,prev:null},weekCycle:null})}),y(Od(Od({},v),{},{next:e})),n.onChange(c.current)}})," ",_t1("日"))}},{activeKey:"week",title:_t1("周"),component:function(){var e,t,r,i,u,s,d,p,f=l().useState(null===(e=c.current)||void 0===e||null===(t=e.execution)||void 0===t?void 0:t.week),m=(0,o.Z)(f,2),v=m[0],y=m[1];return l().createElement("div",null,_t1("从星期")," ",l().createElement(a.InputNumber,{min:1,max:(null==v?void 0:v.next)||7,value:null===(r=c.current)||void 0===r||null===(i=r.execution)||void 0===i||null===(u=i.week)||void 0===u?void 0:u.prev,onChange:function(e){var t,r,o,i,l,a,u,s,d,p=(e||"")+"-"+((null===(t=c.current)||void 0===t||null===(r=t.execution)||void 0===r||null===(o=r.week)||void 0===o?void 0:o.next)||"");c.current=Od(Od({},c.current),{},{execution:Od(Od({},c.current.execution),{},{week:{prev:e,next:null===(i=c.current)||void 0===i||null===(l=i.execution)||void 0===l||null===(a=l.week)||void 0===a?void 0:a.next},weekCycle:e||null!==(u=c.current)&&void 0!==u&&null!==(s=u.execution)&&void 0!==s&&null!==(d=s.week)&&void 0!==d&&d.next?p:null,day:{next:null,prev:null},dayCycle:null})}),y(Od(Od({},v),{},{prev:e})),n.onChange(c.current)}})," - ",l().createElement(a.InputNumber,{min:(null==v?void 0:v.prev)||1,max:7,value:null===(s=c.current)||void 0===s||null===(d=s.execution)||void 0===d||null===(p=d.week)||void 0===p?void 0:p.next,onChange:function(e){var t,r,o,i,l,a,u,s,d,p=((null===(t=c.current)||void 0===t||null===(r=t.execution)||void 0===r||null===(o=r.week)||void 0===o?void 0:o.prev)||"")+"-"+(e||"");c.current=Od(Od({},c.current),{},{execution:Od(Od({},c.current.execution),{},{week:{next:e,prev:null===(i=c.current)||void 0===i||null===(l=i.execution)||void 0===l||null===(a=l.week)||void 0===a?void 0:a.prev},weekCycle:e||null!==(u=c.current)&&void 0!==u&&null!==(s=u.execution)&&void 0!==s&&null!==(d=s.year)&&void 0!==d&&d.week?p:null,day:{next:null,prev:null},dayCycle:null})}),y(Od(Od({},v),{},{next:e})),n.onChange(c.current)}}))}},{activeKey:"month",title:_t1("月"),component:function(){var e,t,r,i,u,s,d,p,f=l().useState(null===(e=c.current)||void 0===e||null===(t=e.execution)||void 0===t?void 0:t.month),m=(0,o.Z)(f,2),v=m[0],y=m[1];return l().createElement("div",null,_t1("从")," ",l().createElement(a.InputNumber,{min:1,max:(null==v?void 0:v.next)||12,value:null===(r=c.current)||void 0===r||null===(i=r.execution)||void 0===i||null===(u=i.month)||void 0===u?void 0:u.prev,onChange:function(e){var t,r,o,i,l,a,u,s,d,p=(e||"")+"-"+((null===(t=c.current)||void 0===t||null===(r=t.execution)||void 0===r||null===(o=r.month)||void 0===o?void 0:o.next)||"");c.current=Od(Od({},c.current),{},{execution:Od(Od({},c.current.execution),{},{month:{prev:e,next:null===(i=c.current)||void 0===i||null===(l=i.execution)||void 0===l||null===(a=l.month)||void 0===a?void 0:a.next},monthCycle:e||null!==(u=c.current)&&void 0!==u&&null!==(s=u.execution)&&void 0!==s&&null!==(d=s.month)&&void 0!==d&&d.next?p:null})}),y(Od(Od({},v),{},{prev:e})),n.onChange(c.current)}})," - ",l().createElement(a.InputNumber,{min:(null==v?void 0:v.prev)||1,max:12,value:null===(s=c.current)||void 0===s||null===(d=s.execution)||void 0===d||null===(p=d.month)||void 0===p?void 0:p.next,onChange:function(e){var t,r,o,i,l,a,u,s,d,p=((null===(t=c.current)||void 0===t||null===(r=t.execution)||void 0===r||null===(o=r.month)||void 0===o?void 0:o.prev)||"")+"-"+(e||"");c.current=Od(Od({},c.current),{},{execution:Od(Od({},c.current.execution),{},{month:{next:e,prev:null===(i=c.current)||void 0===i||null===(l=i.execution)||void 0===l||null===(a=l.month)||void 0===a?void 0:a.prev},monthCycle:e||null!==(u=c.current)&&void 0!==u&&null!==(s=u.execution)&&void 0!==s&&null!==(d=s.month)&&void 0!==d&&d.prev?p:null})}),y(Od(Od({},v),{},{next:e})),n.onChange(c.current)}})," ",_t1("月"))}},{activeKey:"year",title:_t1("年"),component:function(){var e,t,r,i,u,s,d,p,f,m,v,y,g,h,b=l().useState(null===(e=c.current)||void 0===e||null===(t=e.execution)||void 0===t?void 0:t.year),w=(0,o.Z)(b,2),_=w[0],E=w[1];return l().createElement("div",null,_t1("从")," ",l().createElement(a.InputNumber,{min:(new Date).getFullYear(),max:null==_?void 0:_.next,defaultValue:null===(r=c.current)||void 0===r||null===(i=r.execution)||void 0===i||null===(u=i.year)||void 0===u?void 0:u.prev,value:null===(s=c.current)||void 0===s||null===(d=s.execution)||void 0===d||null===(p=d.year)||void 0===p?void 0:p.prev,onChange:function(e){var t,r,o,i,l,a,u,s,d,p=(e||"")+"-"+((null===(t=c.current)||void 0===t||null===(r=t.execution)||void 0===r||null===(o=r.year)||void 0===o?void 0:o.next)||"");c.current=Od(Od({},c.current),{},{execution:Od(Od({},c.current.execution),{},{year:{prev:e,next:null===(i=c.current)||void 0===i||null===(l=i.execution)||void 0===l||null===(a=l.year)||void 0===a?void 0:a.next},yearCycle:e||null!==(u=c.current)&&void 0!==u&&null!==(s=u.execution)&&void 0!==s&&null!==(d=s.year)&&void 0!==d&&d.next?p:null})}),E(Od(Od({},_),{},{prev:e})),n.onChange(c.current)}})," - ",l().createElement(a.InputNumber,{min:(null==_?void 0:_.prev)||(new Date).getFullYear(),defaultValue:null===(f=c.current)||void 0===f||null===(m=f.execution)||void 0===m||null===(v=m.year)||void 0===v?void 0:v.next,value:null===(y=c.current)||void 0===y||null===(g=y.execution)||void 0===g||null===(h=g.year)||void 0===h?void 0:h.next,onChange:function(e){var t,r,o,i,l,a,u,s,d,p=((null===(t=c.current)||void 0===t||null===(r=t.execution)||void 0===r||null===(o=r.year)||void 0===o?void 0:o.prev)||"")+"-"+(e||"");c.current=Od(Od({},c.current),{},{execution:Od(Od({},c.current.execution),{},{year:{next:e,prev:null===(i=c.current)||void 0===i||null===(l=i.execution)||void 0===l||null===(a=l.year)||void 0===a?void 0:a.prev},yearCycle:e||null!==(u=c.current)&&void 0!==u&&null!==(s=u.execution)&&void 0!==s&&null!==(d=s.year)&&void 0!==d&&d.prev?p:null})}),E(Od(Od({},_),{},{next:e})),n.onChange(c.current)}}))}}],d=function(e){return e?Xu().filter(s,(function(t){return e.includes(t.activeKey)})):s};return l().useMemo((function(){var e;return l().createElement(a.Tabs,{defaultActiveKey:"second",centered:!0,size:"small"},d()?d().map((function(e){var t=e.component;return l().createElement(a.Tabs.TabPane,{tab:e.title,key:e.activeKey},l().createElement(t,null))})):_t1("请先选择周期"),4==(null===(e=d())||void 0===e?void 0:e.length)?l().createElement(a.Tabs.TabPane,null):null)}),[])};function kd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sd(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?kd(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kd(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const Ad=function(e){var n,r=e.input,i=r.value,u=r.onChange,c=e.relevanceField,s=void 0===c?"type":c,d=(0,t.use)("form",(function(e){return{planCycle:e&&e.values&&e.values[s]||("once"===e.values.selectType||"fixed"===e.values.selectType)&&"once"}})),p=(d.planCycle,d.formState),f=((void 0===p?{}:p).values,l().useState(i||{})),m=(0,o.Z)(f,2),v=m[0],y=m[1];l().useEffect((function(){u(v)}),[v]);var g=function(e){return Array.from({length:e},(function(t,n){return"".concat([60,24].includes(e)?n:n+1)}))},h=[{key:"second",title:_t1("秒"),component:function(){var e;return l().createElement(a.Checkbox.Group,{value:null==v||null===(e=v.specifyConditions)||void 0===e?void 0:e.second,onChange:function(e){return y(Sd(Sd({},v),{},{specifyConditions:Sd(Sd({},null==v?void 0:v.specifyConditions),{},{second:e,secondCycle:e.join(",")})}))},options:g(60)})}},{key:"minute",title:_t1("分"),component:function(){var e;return l().createElement(a.Checkbox.Group,{value:null==v||null===(e=v.specifyConditions)||void 0===e?void 0:e.minute,onChange:function(e){return y(Sd(Sd({},v),{},{specifyConditions:Sd(Sd({},null==v?void 0:v.specifyConditions),{},{minute:e,minuteCycle:e.join(",")})}))},options:g(60)})}},{key:"hour",title:_t1("小时"),component:function(){var e;return l().createElement(a.Checkbox.Group,{value:null==v||null===(e=v.specifyConditions)||void 0===e?void 0:e.hour,onChange:function(e){return y(Sd(Sd({},v),{},{specifyConditions:Sd(Sd({},null==v?void 0:v.specifyConditions),{},{hour:e,hourCycle:e.join(",")})}))},options:g(24)})}},{key:"day",title:_t1("日"),component:function(){var e;return l().createElement(a.Checkbox.Group,{value:null==v||null===(e=v.specifyConditions)||void 0===e?void 0:e.day,onChange:function(e){return y(Sd(Sd({},v),{},{specifyConditions:Sd(Sd({},null==v?void 0:v.specifyConditions),{},{day:e,dayCycle:e.join(","),week:null,weekCycle:null,weekCycleNum:null,weekCycleNo:null})}))},options:g(31)})}},{key:"week",title:_t1("星期"),component:function(){var e;return l().createElement(a.Checkbox.Group,{value:null==v||null===(e=v.specifyConditions)||void 0===e?void 0:e.week,onChange:function(e){return y(Sd(Sd({},v),{},{specifyConditions:Sd(Sd({},null==v?void 0:v.specifyConditions),{},{week:e,weekCycle:e.join(","),day:null,dayCycle:null})}))},options:g(7)})}},{key:"month",title:_t1("月"),component:function(){var e;return l().createElement(a.Checkbox.Group,{value:null==v||null===(e=v.specifyConditions)||void 0===e?void 0:e.month,onChange:function(e){return y(Sd(Sd({},v),{},{specifyConditions:Sd(Sd({},null==v?void 0:v.specifyConditions),{},{month:e,monthCycle:e.join(",")})}))},options:g(12)})}},{key:"year",title:_t1("年"),component:function(){var e;return l().createElement(a.Checkbox.Group,{value:null==v||null===(e=v.specifyConditions)||void 0===e?void 0:e.year,onChange:function(e){return y(Sd(Sd({},v),{},{specifyConditions:Sd(Sd({},null==v?void 0:v.specifyConditions),{},{year:e,yearCycle:e[0]})}))},options:[{label:_t1("每年"),value:"*"}]})}}],b=function(){return h};return l().createElement(a.Tabs,{defaultActiveKey:"second",centered:!0,size:"small"},b()?b().map((function(e){var t,n,r,o=e.component;return l().createElement(l().Fragment,null,l().createElement(a.Tabs.TabPane,{tab:e.title,key:e.key},l().createElement(o,null),l().createElement("div",null,"day"==e.key?l().createElement(a.Checkbox.Group,{value:null==v||null===(t=v.specifyConditions)||void 0===t?void 0:t.dayCycle,onChange:function(e){return y(Sd(Sd({},v),{},{specifyConditions:Sd(Sd({},null==v?void 0:v.specifyConditions),{},{day:e,dayCycle:e[0]})}))},options:[{label:_t1("每个月最后一天"),value:"L"}]}):null,"week"==e.key?l().createElement("div",null,_t1("第")," ",l().createElement(a.InputNumber,{min:1,max:4,value:null==v||null===(n=v.specifyConditions)||void 0===n?void 0:n.weekCycleNum,onChange:function(e){var t;y(Sd(Sd({},v),{},{specifyConditions:Sd(Sd({},null==v?void 0:v.specifyConditions),{},{week:null,weekCycleNum:e,weekCycle:(e||"")+"#"+(null==v||null===(t=v.specifyConditions)||void 0===t?void 0:t.weekCycleNo)})}))}})," ",_t1("周的星期")," ",l().createElement(a.InputNumber,{min:1,max:7,value:null==v||null===(r=v.specifyConditions)||void 0===r?void 0:r.weekCycleNo,onChange:function(e){var t;y(Sd(Sd({},v),{},{specifyConditions:Sd(Sd({},null==v?void 0:v.specifyConditions),{},{week:null,weekCycleNo:e,weekCycle:(null==v||null===(t=v.specifyConditions)||void 0===t?void 0:t.weekCycleNum)+"#"+(e||"")})}))}})):null)))})):_t1("请先选择周期"),4==(null===(n=b())||void 0===n?void 0:n.length)?l().createElement(a.Tabs.TabPane,null):null)};var jd=[_t1("年"),_t1("月"),_t1("星期"),_t1("日"),_t1("时"),_t1("分"),_t1("秒")],Dd=function(e){var t=e.executionType||{},n=t.execution,r=void 0===n?{}:n,o=t.specifyConditions,i=void 0===o?{}:o,l=["secondCycle","minuteCycle","hourCycle","dayCycle","weekCycle","monthCycle","yearCycle"],a=[];l.reduce((function(e,t,n){return i[t]?1==n?(a.push(i[e]||r[e]||"*"),a.push(i[t]||r[t]||"*"),t):(a.push(i[t]),t):i[e]&&1==n?(a.push(i[e]||"*"),a.push(i[t]||r[t]||"*"),t):1==n?r[e]||r[t]?(a.push(r[e]||"*"),a.push(r[t]||"*"),t):(a.push("*"),a.push("*"),t):r[l[n-1]]||"yearCycle"==l[n]?(a.push(r[t]||"*"),t):(a.push(r[t]||"*"),"")}));var u=[];a.map((function(e){return u.unshift(e)}));var c=u.map((function(e,t){return e.indexOf(",")>-1?e.split(",").join("".concat(jd[t],"、"))+jd[t]:e.indexOf("-")>-1?"星期"==jd[t]?_t1("从")+jd[t]+e:_t1("从")+e+jd[t]:e+jd[t]=="*星期"?"":"*"==e?3==t&&"*"!=u[t-1]?"":_t1("每")+jd[t]:"星期"==jd[t]?jd[t]+e:_t1(e)+_t1(jd[t])}));return c.join(" ")};const Pd=function(e){var t=React.useState("cycle"),n=(0,o.Z)(t,2),r=n[0],i=n[1],l=[{label:_t1("周期限制"),value:"cycle"},{label:_t1("指定时间条件"),value:"appoint"}];return React.createElement(React.Fragment,null,React.createElement(a.Radio.Group,{options:l,onChange:function(e){return i(e.target.value)},value:r,optionType:"button",buttonStyle:"solid"}),React.createElement("div",null,"cycle"==r?React.createElement(xd,e):React.createElement(Ad,e)))};function Td(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fd(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Td(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Td(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ld=a.Select.Option;function Bd(e){var t=[];return e?(t="1"==e||"3"==e||"5"==e||"7"==e||"8"==e||"10"==e||"12"==e?Array.from({length:31},(function(e,t){return"".concat(t+1)})):"2"==e?Array.from({length:28},(function(e,t){return"".concat(t+1)})):Array.from({length:30},(function(e,t){return"".concat(t+1)})),t):[]}var Md=function(t){var n=t.ops,o=void 0===n?[]:n,i=t.name,u=t.setState,c=t.state,s=t.label;return l().createElement(l().Fragment,null,l().createElement(a.Select,r({onChange:function(t){u((function(n){return Fd(Fd({},n),{},(0,e.Z)({},i,t))}))}},t,{placeholder:"请选择几"+s,value:c[i]||void 0,style:{width:"120px",marginRight:10},suffixIcon:s||null}),o.map((function(e){return l().createElement(Ld,{key:e.id||e},e.name||e)}))))},Nd={year:Array.from({length:12},(function(e,t){return"".concat(t+1)})),week:[{id:"1",name:"星期一"},{id:"2",name:"星期二"},{id:"3",name:"星期三"},{id:"4",name:"星期四"},{id:"5",name:"星期五"},{id:"6",name:"星期六"},{id:"7",name:"星期日"}]};xd.useGroup=!1,Ad.useGroup=!1;var Id={background:"#7682F2"},Rd=a.Select.Option,Zd=[{name:_r("秒"),value:"second"},{name:_r("分钟"),value:"minute"},{name:_r("小时"),value:"hour"},{name:_r("天"),value:"day"},{name:_r("周"),value:"week"},{name:_r("月"),value:"month"},{name:_r("年"),value:"year"}],qd={title:_r("计划事件"),type:"object",properties:{selectType:{type:"string",title:_r("类型"),enum:["once","period"],enum_title:[_r("只执行一次"),_r("周期执行")],fieldType:"flow_select",field:{effect:function(e,t){var n=e.value,r=t.getState().values.planSetting;setTimeout((function(){t.setFieldData("type",{display:!!n&&"period"===n&&"cycle"===r}),t.setFieldData("startTime",{display:!!n&&"period"===n&&"cycle"===r}),t.setFieldData("startValidTime",{display:!!n&&"once"===n}),t.setFieldData("executionType",{display:!!n&&"period"===n&&"senior"===r}),t.setFieldData("execution",{display:!!n&&"period"===n}),t.setFieldData("specifyConditions",{display:!!n&&"period"===n}),t.setFieldData("planSetting",{display:!!n&&"period"===n})}))}}},planSetting:{title:_r("执行配置"),type:"string",enum:["cycle","senior"],enum_title:[_r("周期配置"),_r("高级配置")],fieldType:"flow_select",field:{effect:function(e,t){var n=e.value,r=t.getState().values.selectType;setTimeout((function(){t.setFieldData("type",{display:!!n&&"cycle"===n&&"period"===r}),t.setFieldData("startTime",{display:!!n&&"cycle"===n&&"period"===r}),t.setFieldData("executionType",{display:!!n&&"senior"===n&&"period"===r})}))}}},type:{title:_r("周期定义"),type:"string",description:_r("定义事件的执行周期"),field:{component:function(e){var t=e.input,n=function(e){for(var t=parseInt(e),n=null,r=0,o=Zd;r<o.length;r++){var i=o[r];e&&-1!==e.indexOf(i.value)&&(n=i.value)}return{num:t,type:n}},r=l().useState(n(t.value).num),i=(0,o.Z)(r,2),u=i[0],c=i[1],s=l().useState(n(t.value).type),d=(0,o.Z)(s,2),p=d[0],f=d[1];return l().useEffect((function(){u&&p?t.onChange("".concat(u).concat(p)):t.onChange(null)}),[u,p]),l().createElement(l().Fragment,null,l().createElement(a.InputNumber,{defaultValue:u,style:{width:"50%"},precision:0,min:1,onChange:function(e){return c(e)}}),l().createElement(a.Select,{defaultValue:p,style:{width:"50%"},onChange:function(e){return f(e)}},Zd.map((function(e){return l().createElement(Rd,{value:e.value},e.name)}))))},effect:function(e,t){e.value,setTimeout((function(){t.getFieldState("selectType").value}))}}},startTime:{type:"object",title:_r("执行时间"),properties:{},description:_r("每个周期内触发事件的时间点"),field:{component:function(e){var n=e.input,i=e.relevanceField,u=void 0===i?"type":i,c=(0,t.use)("form",(function(e){return{planCycle:e&&e.values&&e.values[u]||("once"===e.values.selectType||"fixed"===e.values.selectType)&&"once"}})),s=c.planCycle,d=l().useState(n.value||{}),p=(0,o.Z)(d,2),f=p[0],m=p[1],v=l().useState(null),y=(0,o.Z)(v,2),g=y[0],h=y[1];if(l().useEffect((function(){h(s),g&&g!=s&&m({})}),[s]),l().useEffect((function(){n.onChange(f)}),[f]),!s)return _t1("请先选择周期");if(Xu().includes(s,"year"))return[l().createElement(Md,{name:"month",label:_t1("月"),ops:Nd.year,setState:m,state:f}),l().createElement(Md,{name:"day",label:_t1("日"),ops:Bd(parseInt(f.month)),setState:m,state:f}),l().createElement(a.TimePicker,{value:f.hms&&kc()(f.hms,"HH:mm:ss"),onChange:function(e,t){return m((function(e){return Fd(Fd({},e),{},{hms:t})}))}})];if(Xu().includes(s,"hour")){var b=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24];return[l().createElement(a.TimePicker,{value:f.hms&&kc()(f.hms,"mm:ss"),format:"mm:ss",hideDisabledOptions:!0,disabledHours:function(e){return b},onChange:function(e,t){return m((function(e){return Fd(Fd({},e),{},{hms:t})}))}})]}if(Xu().includes(s,"day"))return[l().createElement(a.TimePicker,{value:f.hms&&kc()(f.hms,"HH:mm:ss"),onChange:function(e,t){return m((function(e){return Fd(Fd({},e),{},{hms:t})}))}})];if(Xu().includes(s,"week"))return[l().createElement(Md,{name:"week",label:_t1("日"),ops:Nd.week,setState:m,state:f}),l().createElement(a.TimePicker,{value:f.hms&&kc()(f.hms,"HH:mm:ss"),onChange:function(e,t){return m((function(e){return Fd(Fd({},e),{},{hms:t})}))}})];if(Xu().includes(s,"month"))return[l().createElement(Md,{name:"day",label:_t1("日"),ops:Bd(2),setState:m,state:f}),l().createElement(a.TimePicker,{value:f.hms&&kc()(f.hms,"HH:mm:ss"),onChange:function(e,t){return m((function(e){return Fd(Fd({},e),{},{hms:t})}))}})];if("once"==s)return l().createElement(Ed,r({},e,{EndDate:kc()().subtract(0,"days")}));if(Xu().includes(s,"second")){var w=s.split("second")[0],_=Array.from({length:Number(w)},(function(e,t){return"".concat(t)})).map((function(e){return 1==e.length?"0"+e.toString():e}));return l().createElement(Md,{name:"hms",label:_t1("秒"),ops:_,setState:m,state:f,onChange:function(e){m((function(t){return Fd(Fd({},t),{},{minute:1,hms:"00:00:"+e})}))}})}if(Xu().includes(s,"minute")){var E=Array.from({length:60},(function(e,t){return"".concat(t)})).map((function(e){return 1==e.length?"0"+e.toString():e}));return l().createElement(Md,{name:"hms",label:_t1("秒"),ops:E,setState:m,state:f,onChange:function(e){m((function(t){return Fd(Fd({},t),{},{minute:1,hms:"00:00:"+e})}))}})}return _t1("请先选择周期")},validate:function(e,t){var n=t&&t.planCycle||void 0;if("{}"==JSON.stringify(e))return!1;if(!e||"string"==typeof e)return!1;if("second"!=t.type&&"minute"!=t.type&&e&&!e.hms)return _r("请选择执行时间");if("year"==n){if(!e.hour)return _r("请选择执行月");if(!e.day)return _r("请选择执行日")}else if("week"==n){if(!e.week)return _r("请选择执行日")}else if("month"==n&&!e.day)return _r("请选择执行日")}}},executionType:{title:_r("执行条件"),type:"object",field:{component:Pd}},startValidTime:{type:"string",title:_r("执行时间"),description:_r("计划事件的生效时间"),field:{component:function(e){return l().createElement(Ed,r({},e,{EndDate:moment().subtract(0,"days")}))}}}}};const zd={title:_r("计划事件"),category:[_r("起始节点"),_r("起始高级节点")],component:function(e){var n=e.id,o=e.data,i=void 0===o?{}:o,a=e.paramSchema,u=void 0===a?{}:a,c=i.selectType,s=i.startTime,d=i.planSetting,p=(0,t.use)("FlowContext").updateOutputSchema,f=useI18n().t;l().useEffect((function(){p(n,{flowName:{type:"string",title:_r("名称")},interval:{type:"string",title:_r("周期")},time:{type:"string",title:_r("时间")}})}),[n]);var m={selectType:f("类型"),type:f("周期"),startTime:f("操作时间"),endTime:f("结束时间"),once:f("只执行一次"),period:f("周期执行"),fixed:f("固定时间"),second:f("每秒"),minute:f("每分钟"),hour:f("每小时"),day:f("每天"),week:f("每周"),month:f("每月"),year:f("每年")},v=[f("一"),f("二"),f("三"),f("四"),f("五"),f("六"),f("日")],y=function(e){if(!e)return"";var t="";return e.month&&(t+="".concat(e.month).concat(f("月"))),e.day&&(t+="".concat(e.day).concat(f("日"))),e.week&&(t+="".concat(f("星期")).concat(v[e.week-1])),e.hms&&(t+=" ".concat(e.hms)),t};return l().createElement(Ec,r({},e,{titleIcon:"planTitleIcon",title:"".concat(i.name?f(i.name)+"("+f(u.title)+")":f(i.type)),nodeType:"input",cardProps:{headStyle:{background:Id.background||"#4971E0",color:"#FFF"}}}),l().createElement("div",null,l().createElement("span",null,m[c])),"period"===c&&"cycle"===d?l().createElement("div",null,l().createElement("span",null,f("执行时间"),"："),y(s)?l().createElement("span",{style:{color:"#7682F2"}},y(s)):null):null,"period"===c&&"senior"===d?l().createElement("div",null,l().createElement("span",null,f("执行条件：")),null!=e&&e.data?l().createElement("span",{style:{color:"#7682F2"}},Dd(null==e?void 0:e.data)+f("执行")):null):null)},paramSchema:qd,style:Id,titleIcon:"planTitleIcon"};function Ud(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gd(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Ud(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ud(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var $d={background:"#7682F2"},Yd=function(e){var t=e.input,n=e.field,o=useI18n().t;return"event"==n.origin?React.createElement(Cc.C,r({is:"PointTable",fullLable:!0,type:"checkbox"},e)):React.createElement(Cc.C,{is:"Dashboard.FormModalButton",title:o("数据点"),align:"left",offset:30,width:800,compStyle:!1,ButtonBody:function(){var e=t.value;return e&&e.length?e.map((function(e){var t;return React.createElement(a.Tag,null,null==e||null===(t=e.tableData)||void 0===t?void 0:t.name,"-",e.name)})):o("点击配置")}},React.createElement("div",{className:"flow-editor-form",style:{padding:0}},React.createElement(Cc.C,r({is:"PointTable",fullLable:!0,type:"checkbox"},e))))},Hd={type:"object",title:_r("设备数据事件"),properties:{tags:{title:_r("数据"),type:"array",items:{},field:{component:function(e){return React.createElement(Yd,e)}}},triggerInterval:{title:"执行频率",type:"integer",minimum:0,description:"配置频率后，事件按照设定的执行频率触发执行，否则实时触发，单位秒。"}}};const Vd={title:_r("设备数据事件"),category:[_r("起始节点"),_r("起始高级节点")],paramSchema:Hd,component:function(n){var o=n.id,i=n.data,l=void 0===i?{}:i,a=n.paramSchema,u=void 0===a?{}:a,c=l.tags,s=l.loading,d=useI18n().t,p=(d("设备数据上数时触发"),(null==c?void 0:c.map((function(e){var t;return null==e||null===(t=e.tableData)||void 0===t?void 0:t.name})))||[]),f=(0,Wu.Z)(new Set(p)),m=(0,t.use)("FlowContext").updateOutputSchema;return React.useEffect((function(){var t=function(t){var n={};return t&&t.length>0&&t.forEach((function(t){var r,o,i=null==t||null===(r=t.tableData)||void 0===r?void 0:r.id,l=null==t||null===(o=t.tableData)||void 0===o?void 0:o.name,a="".concat(i,".").concat(null==t?void 0:t.id);n=Gd((0,e.Z)({},a,{type:"number",nodeType:"nodeDataPoint",title:l+"-"+(null==t?void 0:t.name)}),n)})),n}(c);m(o,Gd(Gd({"#$tableData":{type:"object",title:_r("触发设备"),nodeType:"node",properties:{id:{title:_r("编号"),type:"string"}}},"#$table":{type:"object",title:_r("触发设备表"),nodeType:"model",properties:{id:{title:_r("名称"),type:"string"},title:{title:_r("标题"),type:"string"}}}},t),{},{upFields:{type:"array",title:_r("数据项"),items:{type:"object",properties:{id:{type:"string",title:_r("编号")},name:{type:"string",title:_r("名称")},value:{type:"number",title:_r("值")},time:{type:"string",title:_r("时间")},unit:{type:"string",title:_r("单位")}}}}}))}),[c]),React.createElement(Ec,r({},n,{title:"".concat(l.name?d(l.name)+"("+d(u.title)+")":d(l.type)),nodeType:"input",cardProps:{headStyle:{background:$d.background||"#4971E0",color:"#FFF"}}}),s?React.createElement("div",null,React.createElement(vc.LoadingOutlined,null)," ",d("正在获取节点配置相关数据"),"..."):React.createElement(React.Fragment,null,React.createElement("div",null,d("设备表下的设备数据上数时触发")),React.createElement("div",null,d("目标设备"),":",React.createElement("span",{style:{color:"#7682F2"}},f&&f.join(", ")," ")),c&&React.createElement("div",null,d("包含"),(null==c?void 0:c.length)||0,d("个数据点"))))},style:$d};function Wd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kd(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Wd(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wd(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Xd={background:"#7682F2"},Jd=function(e){var t=e.input,n=useI18n().t;return React.createElement(Cc.C,{is:"Dashboard.FormModalButton",title:"数据点",align:"left",offset:30,width:800,compStyle:!1,ButtonBody:function(){var e=t.value;return e&&e.length?e.map((function(e){var t;return React.createElement(a.Tag,null,null==e||null===(t=e.table)||void 0===t?void 0:t.name,"-",e.name)})):n("点击配置")}},React.createElement("div",{className:"flow-editor-form",style:{padding:0}},React.createElement(Cc.C,r({is:"ModelPointTable",fullLable:!0,type:"checkbox"},e))))},Qd={type:"object",title:_r("设备表数据事件"),properties:{tags:{title:_r("数据"),type:"array",items:{},field:{component:function(e){return React.createElement(Jd,r({fullLable:!0,type:"checkbox"},e))}}},triggerInterval:{title:_r("执行频率"),type:"integer",minimum:0,description:_r("配置频率后，事件按照设定的执行频率触发执行，否则实时触发，单位秒。")}}};const ep={title:_r("设备表数据事件"),category:[_r("起始节点"),_r("起始高级节点")],paramSchema:Qd,component:function(n){var o=n.id,i=n.data,l=void 0===i?{}:i,a=n.paramSchema,u=void 0===a?{}:a,c=l.tags,s=l.loading,d=useI18n().t,p=d("设备表下的")+p,f=(null==c?void 0:c.map((function(e){var t;return null==e||null===(t=e.table)||void 0===t?void 0:t.name})))||[],m=(0,Wu.Z)(new Set(f)),v=(0,t.use)("FlowContext").updateOutputSchema;return React.useEffect((function(){var t=function(t){var n={};return t&&t.length>0&&t.forEach((function(t){var r=null==t?void 0:t.id;n=Kd((0,e.Z)({},r,{nodeType:"nodeDataPoint",type:"number",title:t.name}),n)})),n}(c);v(o,Kd(Kd({"#$tableData":{type:"object",title:_r("触发设备"),nodeType:"node",properties:{id:{title:_r("编号"),type:"string"}}},"#$table":{type:"object",title:_r("触发设备表"),nodeType:"model",properties:{id:{title:_r("名称"),type:"string"},title:{title:_r("标题"),type:"string"}}}},t),{},{upFields:{type:"array",title:_r("数据项"),items:{type:"object",properties:{id:{type:"string",title:_r("编号")},name:{type:"string",title:_r("名称")},value:{type:"number",title:"值"},time:{type:"string",title:_r("时间")},unit:{type:"string",title:_r("单位")}}}}}))}),[c]),React.createElement(Ec,r({},n,{title:"".concat(l.name?d(l.name)+"("+d(u.title)+")":d(l.type)),nodeType:"input",cardProps:{headStyle:{background:Xd.background||"#4971E0",color:"#FFF"}}}),s?React.createElement("div",null,React.createElement(vc.LoadingOutlined,null)," ",d("正在获取节点配置相关数据"),"..."):React.createElement(React.Fragment,null,React.createElement("div",null,d("设备表下的设备数据上数时触发")),React.createElement("div",null,d("目标设备表"),":",React.createElement("span",{style:{color:"#7682F2"}},m&&m.join(", ")," ")),c&&React.createElement("div",null,d("包含"),(null==c?void 0:c.length)||0,d("个数据点"))))},style:Xd};function tp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function np(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?tp(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tp(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var rp={background:"#E26E6E"},op={type:"object",title:_r("驱动事件"),properties:{table:{type:"object",title:_r("设备表"),properties:{},fieldType:"table",field:{func:"device"}},tableData:{type:"object",title:_r("设备"),table:"table",fieldType:"tableData",field:{func:"device",depend:"table"}},event:{type:"object",title:_r("事件"),properties:{},field:{component:function(e){var n=e.input,r=n.value,i=n.onChange,u=(0,t.use)("form",(function(e){var t,n;return{table:null===(t=e.values)||void 0===t?void 0:t.table,tableData:null===(n=e.values)||void 0===n?void 0:n.tableData}})),c=u.table,s=u.tableData,d=l().useState([]),p=(0,o.Z)(d,2),f=p[0],m=p[1],v=function(e,n){(0,t.api)({name:"core/t/schema"}).get(e).then((function(e){var t;m(Xu().uniq([].concat((0,Wu.Z)((null===(t=e.device)||void 0===t?void 0:t.events)||[]),(0,Wu.Z)(n||[]))))}))};return l().useEffect((function(){var e;null!=s&&s.id&&null!=s&&null!==(e=s.table)&&void 0!==e&&e.id?(0,t.api)({name:"core/t"}).fetch("/".concat(s.table.id,"/d/").concat(s.id),{}).then((function(e){var t,n,r=(null===(t=e.json._settings)||void 0===t||null===(n=t.device)||void 0===n?void 0:n.events)||[];v(s.table.id,r)})):null!=c&&c.id&&v(null==c?void 0:c.id)}),[c,s]),l().createElement(a.Select,{allowClear:!0,value:null==r?void 0:r.id,onChange:function(e){return i(f.find((function(t){return(null==t?void 0:t.id)==e})))}},f.map((function(e){return l().createElement(a.Select.Option,{value:e.id,key:e.id},e.name)})))}}}},formEffect:function(e){var t=e.getState().values;e.useField("table",(function(n){Xu().isEqual(n.value,null==t?void 0:t.table)||(e.change("tableData",null),e.change("event",null))})),e.useField("tableData",(function(n){Xu().isEqual(n.value,null==t?void 0:t.tableData)||e.change("event",null)}))}};const ip={title:_r("驱动事件"),category:[_r("起始节点"),_r("业务数据节点")],paramSchema:op,component:function(e){var n=e.id,o=e.data,i=void 0===o?{}:o,a=e.paramSchema,u=void 0===a?{}:a,c=i.table,s=i.tableData,d=i.event,p=(0,t.use)("FlowContext").updateOutputSchema,f=(0,t.use)("device.ext").getFormSchema,m=useI18n().t;return l().useEffect((function(){var e={"#$table":{type:"object",title:_r("设备表"),properties:{name:{title:_r("名称"),type:"string"},id:{title:_r("编号"),type:"string"}},fieldType:"table",field:{func:"device"}},"#$tableData":{type:"object",title:_r("设备"),properties:{name:{title:_r("名称"),type:"string"},id:{title:_r("编号"),type:"string"}},fieldType:"tableData",field:{func:"device",depend:"#$table"}}};if(!Xu().isEmpty(null==d?void 0:d.writeOut)){var r,o=null===(r=f(d.writeOut||{}))||void 0===r?void 0:r.schema;"table"==d.writeOut.type?d.writeOut.tableValue&&(0,t.api)({name:"core/t/schema"}).get(d.writeOut.tableValue).then((function(t){e[d.id]=np(np({},(null==t?void 0:t.schema)||{}),{},{title:d.name||""})})):"array"==d.writeOut.type&&"table"==d.writeOut.arrayValue?d.writeOut.tableValue2&&(0,t.api)({name:"core/t/schema"}).get(d.writeOut.tableValue2).then((function(t){e[d.id]={type:"array",items:np({},(null==t?void 0:t.schema)||{}),title:d.name||""}})):e[d.id]=np(np({},o||d.writeOut||{}),{},{title:d.name||""})}p(n,e)}),[c,s,d]),l().createElement(Ec,r({},e,{titleIcon:"driverEventTitleIcon",title:"".concat(i.name?i.name+"("+m(u.title)+")":m(i.type)),tableDataType:"input",cardProps:{headStyle:{background:rp.background||"#E26E6E",color:"#FFF"}}}),l().createElement("div",null,m("设备表"),":",l().createElement("span",{style:{color:"#E26E6E"}},null==c?void 0:c.title," ")),l().createElement("div",null,m("表记录"),":",l().createElement("span",{style:{color:"#E26E6E"}},null==s?void 0:s.name," ")),l().createElement("div",null,m("事件"),":",l().createElement("span",{style:{color:"#E26E6E"}},null==d?void 0:d.name," ")))},style:rp,titleIcon:"driverEventTitleIcon",requiredInfo:function(e){var t="",n=e.data,r=n.table,o=n.tableData,i=n.event;return Xu().isEmpty(r)&&Xu().isEmpty(o)&&(t=_r("模型、资产至少有一项不为空 ")),Xu().isEmpty(i)&&(t+=_r("事件")),t}},lp={用户登录:Fs,表事件:js,报警事件:cd,指令事件:vd,计划事件:zd,设备数据事件:Vd,设备表数据事件:ep,驱动事件:ip};var ap={background:"#78B937"},up={type:"object",properties:{name:{type:"string",title:_r("名称")},calculator:{type:"array",title:_r("公式"),fieldType:"flow_calculator",items:{type:"string"},field:{isFormula:!0}},fix:{type:"number",title:_r("小数位数"),fieldType:"inputNumber",minimum:0}}};const cp={title:_r("数据计算"),icon:"",category:[_r("处理节点"),_r("数据节点")],component:function(e){var n=(0,t.use)("FlowContext"),o=(n.context,n.updateOutputValues,n.updateOutputSchema),i=e.id,a=e.data,u=a.calculator,c=a.name,s=useI18n().t,d=null==u?void 0:u.value;l().useEffect((function(){o(i,{value:{type:"number",title:"值"}})}),[]);var p={background:"rgb(226, 226, 226)",padding:"0px 5px",display:"inline-block",borderRadius:"2px"};return l().createElement(Ec,r({},e,{title:c?"".concat(c,"(").concat(s("数据计算"),")"):s("数据计算"),cardProps:{headStyle:{background:ap.background,color:"#FFF"}}}),l().createElement("span",null,s("公式"),": "),l().createElement("span",{style:{color:ap.background}},null==d?void 0:d.map((function(e){return _.isPlainObject(e)?l().createElement("span",{style:p},e.name.slice(3)):e}))))},paramSchema:up,style:ap};function sp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dp(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?sp(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sp(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function pp(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return fp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fp(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(a)throw i}}}}function fp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}a.Select.Option,a.Select.OptGroup;const mp=function(e){var n,r,i=e.input,u=e.field,c=u.mode,s=u.option.form,d=(i.name,i.value),p=i.onChange,f=null===(n=s.getFieldState("node"))||void 0===n||null===(r=n.value)||void 0===r?void 0:r.id,m=l().useState(null),v=(0,o.Z)(m,2),y=v[0],g=v[1],h=l().useState([]),b=(0,o.Z)(h,2),w=b[0],_=b[1],E="multiple"===c?(d||[]).map((function(e){return e.key})):d.key,C=function(e){var t,n=pp(w);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.key===e)return r}}catch(e){n.e(e)}finally{n.f()}return null};return l().useEffect((function(){f&&(0,t.api)({name:"core/node"}).get(f).then((function(e){g(e.model.id)}))}),[f]),l().useEffect((function(){y&&(0,t.api)({name:"core/model"}).get(y).then((function(e){var t,n,r,o=null==e||null===(t=e.custom)||void 0===t||null===(n=t.schema)||void 0===n?void 0:n.properties,i=[],l=pp(Xu().keys(o));try{for(l.s();!(r=l.n()).done;){var a=r.value;i.push(dp({key:a},o[a]))}}catch(e){l.e(e)}finally{l.f()}_(i)}))}),[y]),l().createElement(a.Select,{defaultValue:E,onChange:function(e){p("multiple"===c?e.map((function(e){return C(e)})):C(e))},mode:c},w.map((function(e){return l().createElement(Option,{value:e.key},e.title)})))};function vp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yp(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?vp(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vp(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var gp=a.DatePicker.RangePicker;const hp=function(e){var t=e.input,n=t.onChange,r=t.value;e.field.fields,r=r||{type:"forward"};var o=[{key:_t1("前"),value:"forward"},{key:_t1("后"),value:"backward"},{key:_t1("当前"),value:"now"},{key:_t1("早于"),value:"before"},{key:_t1("晚于"),value:"after"},{key:_t1("介于之间"),value:"between"}],i=[{key:_t1("天"),value:"d"},{key:_t1("周"),value:"w"},{key:_t1("月"),value:"M"},{key:_t1("年"),value:"Y"},{key:_t1("季度"),value:"Q"},{key:_t1("时"),value:"h"},{key:_t1("分"),value:"m"},{key:_t1("秒"),value:"s"}],u=function(e){return n(yp(yp({},r),{},{unit:e,range:{gte:r.range&&r.range.gte,lte:r.range&&r.range.lte}}))},c=function(e){return n(yp(yp({},r),{},{type:e,range:{gte:r.range&&r.range.gte,lte:r.range&&r.range.lte}}))};return l().createElement("div",{className:"statistics-node"},r&&!r.type?l().createElement(a.Row,{className:"ant-form-item"},l().createElement(a.Col,{sm:24},l().createElement(a.Select,{width:"100%",allowClear:!0,onChange:c,value:r.type||""},o.map((function(e){return l().createElement(a.Select.Option,{value:e.value},e.key)}))))):null,r&&r.type&&"forward"==r.type||"backward"==r.type?l().createElement(l().Fragment,null,l().createElement(a.Row,{className:"ant-form-item",gutter:6},l().createElement(a.Col,{sm:24},l().createElement(a.Select,{width:"100%",allowClear:!0,onChange:c,value:r.type||""},o.map((function(e){return l().createElement(a.Select.Option,{value:e.value},e.key)}))))),l().createElement(a.Row,{className:"ant-form-item",gutter:6},l().createElement(a.Col,{sm:12},l().createElement(a.InputNumber,{min:0,placeholder:_t1("输入数值"),onChange:function(e){return n(yp(yp({},r),{},{count:e,range:{gte:r.range&&r.range.gte,lte:r.range&&r.range.lte}}))},value:r.count||null})),l().createElement(a.Col,{sm:12},l().createElement(a.Select,{allowClear:!0,onChange:u,value:r.unit||""},i.map((function(e){return l().createElement(a.Select.Option,{value:e.value},e.key)}))))),l().createElement(a.Row,{className:"ant-form-item",gutter:6},l().createElement(a.Col,{sm:24},l().createElement(a.Checkbox,{checked:r.fromNow,onChange:function(e){n(yp(yp({},r),{},{fromNow:e.target.checked,range:{gte:r.range&&r.range.gte,lte:r.range&&r.range.lte}}))}},_t1("从当前开始"))))):null,r&&r.type&&"now"==r.type?l().createElement(l().Fragment,null,l().createElement(a.Row,{className:"ant-form-item",gutter:6},l().createElement(a.Col,{sm:12},l().createElement(a.Select,{allowClear:!0,onChange:c,value:r.type||""},o.map((function(e){return l().createElement(a.Select.Option,{value:e.value},e.key)})))),l().createElement(a.Col,{sm:12},l().createElement(a.Select,{allowClear:!0,onChange:u,value:r.unit||""},i.map((function(e){return l().createElement(a.Select.Option,{value:e.value},e.key)})))))):null,r&&r.type&&"before"==r.type||"after"==r.type?l().createElement(l().Fragment,null,l().createElement(a.Row,{className:"ant-form-item"},l().createElement(a.Col,{sm:24},l().createElement(a.Select,{allowClear:!0,onChange:c,value:r.type||""},o.map((function(e){return l().createElement(a.Select.Option,{value:e.value},e.key)}))))),l().createElement(a.Row,{className:"ant-form-item"},l().createElement(a.Space,{direction:"vertical",size:12},l().createElement(a.DatePicker,{showTime:!0,onChange:function(e,t){n(yp(yp({},r),{},{time:t,range:{gte:r.range&&r.range.gte,lte:r.range&&r.range.lte}}))},defaultValue:r.time?kc()(r.time,"YYYY-MM-DD HH:mm:ss"):kc()(new Date,"YYYY-MM-DD HH:mm:ss")})))):null,r&&r.type&&"between"==r.type?l().createElement(l().Fragment,null,l().createElement(a.Row,{className:"ant-form-item"},l().createElement(a.Col,{sm:24},l().createElement(a.Select,{allowClear:!0,onChange:c,value:r.type||""},o.map((function(e){return l().createElement(a.Select.Option,{value:e.value},e.key)}))))),l().createElement(a.Row,{className:"ant-form-item"},l().createElement(a.Space,{direction:"vertical",size:12,style:{width:"100%"}},l().createElement(gp,{showTime:{format:"HH:mm:ss"},format:"YYYY-MM-DD HH:mm:ss",onChange:function(e,t){"compute"===(null==e?void 0:e.type)?n(yp(yp({},r),{},{range:e})):n(yp(yp({},r),{},{range:{gte:t&&Xu().isArray(t)&&t[0],lte:Xu().isArray(t)&&t&&t[1]}}))},defaultValue:[r.range&&r.range.gte?kc()(r.range.gte,"YYYY-MM-DD HH:mm:ss"):"",r.range&&r.range.lte?kc()(r.range.lte,"YYYY-MM-DD HH:mm:ss"):""]})))):null)};function bp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wp(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?bp(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bp(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const _p=function(e){var t=e.input,n=t.onChange,r=t.value,o=[{key:_t1("天"),value:"d"},{key:_t1("周"),value:"w"},{key:_t1("分"),value:"m"},{key:_t1("时"),value:"h"}];return l().createElement(a.Row,{className:"statistics-node ant-form-item",gutter:6},l().createElement(a.Col,{sm:12},l().createElement(a.InputNumber,{min:0,style:{width:"100%"},placeholder:_t1("输入数值"),onChange:function(e){return n(wp(wp({},r),{},{count:e}))},value:r.count||null})),l().createElement(a.Col,{sm:12},l().createElement(a.Select,{allowClear:!0,onChange:function(e){return n(wp(wp({},r),{},{unit:e}))},value:r.unit||""},o.map((function(e){return l().createElement(a.Select.Option,{value:e.value},e.key)})))))};var Ep=__webpack_require__(8885);function Cp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Op(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Cp(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cp(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}cs()(Ep.Z,{insert:"head",singleton:!1}),Ep.Z.locals;var xp={background:"#78B937"},kp={table:{type:"object",title:_r("表"),fieldType:"table",properties:{}},group:{type:"string",title:_r("范围"),enum_title:[_r("无"),_r("按时间"),_r("按字段")],enum:["none","time","field"]},time:{type:"object",title:"时间",field:{component:hp}},tableQuery:{type:"object",title:_r("筛选条件"),field:{component:function(e){var n=e.input,r=void 0===n?{}:n,o=r.value,i=void 0===o?{}:o,a=r.onChange,u=(0,t.use)("form",(function(e){var t;return{table:e.values&&(null===(t=e.values)||void 0===t?void 0:t.table)}})).table,c=(0,t.use)("table.schema",null==u?void 0:u.id).schema,s=void 0===c?{type:"object",properties:{}}:c,d=i.cond;return l().createElement(Cc.C,{is:"QueryEditor",schema:s,input:{value:d,onChange:function(e){a({cond:e,schema:s})}},DataWrap:Mc})}}}},Sp={type:"object",properties:{selectType:{type:"string",title:_r("数据类型"),fieldType:"flow_select",enum:["报警相关统计","表相关统计"],enum_title:[_r("报警相关统计"),_r("表相关统计")]},statistical:{type:"object",title:_r("统计条件"),fieldType:"flow_modal",properties:Op({alarmQuery:{type:"object",title:_r("限定条件"),field:{component:function(e){var n,r=e.input,o=void 0===r?{}:r,i=o.value,a=void 0===i?{}:i,u=o.onChange,c=(0,t.use)("settings").settings,s=(null==c||null===(n=c.warning)||void 0===n?void 0:n.warningkind)||[],d=t.app.get("models").Warning,p=Op(Op({},d),{},{properties:Op(Op({},d.properties),{},{type:Op(Op({},d.properties.type),{},{type:"array",enum:s.map((function(e){return e.id})),enum_title:s.map((function(e){return e.name}))})}),form:["status","processed","type","level","table","department","tableData","time","confirmUser","confirmTime","handleUser","handleTime"]}),f=a.cond;return l().createElement(Cc.C,{is:"QueryEditor",schema:p,input:{value:f,onChange:function(e){u({cond:e,schema:d})}},DataWrap:Mc})}}}},kp),formEffect:function(e,t){var n=t.getState(),r=n.initialValues;n.visited,e.useField("selectType",(function(e){switch(e.value){case"报警相关统计":setTimeout((function(){t.setFieldData("assetsModel",{display:!1}),t.setFieldData("condition",{display:!1}),t.setFieldData("alarmQuery",{display:!0}),t.setFieldData("table",{display:!1}),t.setFieldData("time",{display:!1}),t.setFieldData("attribute",{display:!1}),t.setFieldData("column",{display:!1}),t.setFieldData("group",{display:!1}),t.setFieldData("updateFields",{display:!1}),t.setFieldData("onlineRate",{display:!1}),t.setFieldData("dataCalculator",{display:!1}),t.setFieldData("tableQuery",{display:!1})}),0);break;case"表相关统计":setTimeout((function(){t.setFieldData("assetsModel",{display:!1}),t.setFieldData("condition",{display:!1}),t.setFieldData("alarmQuery",{display:!1}),t.setFieldData("table",{display:!0}),t.setFieldData("group",{display:!0}),t.setFieldData("updateFields",{display:!0}),t.setFieldData("time",{display:!1}),t.setFieldData("model",{display:!1}),t.setFieldData("attribute",{display:!1}),t.setFieldData("department",{display:!1}),t.setFieldData("node",{display:!1}),t.setFieldData("column",{display:!1}),t.setFieldData("onlineRate",{display:!1}),t.setFieldData("dataCalculator",{display:!1}),t.setFieldData("tableQuery",{display:!1})}),0);break;default:setTimeout((function(){t.setFieldData("assetsModel",{display:!1}),t.setFieldData("condition",{display:!1}),t.setFieldData("alarmQuery",{display:!1}),t.setFieldData("table",{display:!1}),t.setFieldData("group",{display:!1}),t.setFieldData("updateFields",{display:!1}),t.setFieldData("time",{display:!1}),t.setFieldData("model",{display:!1}),t.setFieldData("attribute",{display:!1}),t.setFieldData("node",{display:!1}),t.setFieldData("column",{display:!1}),t.setFieldData("dataCalculator",{display:!1}),t.setFieldData("onlineRate",{display:!1}),t.setFieldData("tableQuery",{display:!1})}),0)}})),setTimeout((function(){t.useField("node",(function(e){(null==r?void 0:r.node)!=e.value&&t.change("attribute",null),t.setFieldData("attribute",{field:{component:mp}})})),t.useField("group",(function(e){var n=e.value;"none"!==n&&n?"time"===n?(t.setFieldData("time",{display:!0}),t.setFieldData("tableQuery",{display:!1})):"field"===n&&(t.setFieldData("time",{display:!1}),t.setFieldData("tableQuery",{display:!0})):(t.setFieldData("time",{display:!1}),t.setFieldData("tableQuery",{display:!1}))}))}))}}},required:["selectType","statistical"],formEffect:function(e){var t=e.getState(),n=t.initialValues;t.visited,e.useField("selectType",(function(t){n.selectType!=t.value&&e.change("statistical",null)}))}};const Ap={title:_r("数据统计"),icon:"",category:[_r("处理节点"),_r("数据节点")],component:function(e){var n,o=(0,t.use)("FlowContext"),i=(o.context,o.updateOutputValues,o.updateOutputSchema),a=e.id,u=e.data,c=(u.calculator,u.selectType),s=u.name,d=useI18n().t;return l().useEffect((function(){"设备相关统计"===c?i(a,{count:{type:"number",title:_r("设备数量")},results:{type:"array",title:_r("历史数据")}}):"报警相关统计"===c?i(a,{count:{type:"number",title:_r("报警条数")}}):"表相关统计"===c&&i(a,{count:{type:"number",title:_r("表条数")}})}),[c]),l().createElement(Ec,r({},e,{title:e.title||e.data.name||(s?"".concat(s,"(").concat(d("统计节点"),")"):d("统计节点")),cardProps:{headStyle:{background:xp.background,color:"#FFF"}}}),l().createElement("span",null,d("统计类型"),": "),l().createElement("span",{style:{color:xp.background}},d(null==e||null===(n=e.data)||void 0===n?void 0:n.selectType)))},requiredInfo:function(e){var t=e.data,n=t.selectType,r=t.statistical;if(!n)return"统计条件";if("设备相关统计"===n){var o,i;if(null==r||!r.assetsModel)return _r("设备表");if(null==r||null===(o=r.dataCalculator)||void 0===o||!o.time)return _r("时间");if(null==r||null===(i=r.dataCalculator)||void 0===i||!i.column)return _r("列值")}else if("表相关统计"===n&&(null==r||!r.table))return _r("表");return null},paramSchema:Sp,style:xp};var jp=a.Select.Option,Dp=(a.Select.OptGroup,function(e){var n=(0,t.use)("form").form.getState().values;return Xu().get(n,e)}),Pp=function(e){var n,r,i=e.input,u=e.tableData,c=e.table,s=e.field.mode,d=l().useState([]),p=(0,o.Z)(d,2),f=p[0],m=p[1],v=function(){var e=Bs(Ns().mark((function e(n){var r,o,i,l,a,u;return Ns().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.tableData,o=n.table,i=[],!r){e.next=10;break}return e.next=5,(0,t.api)({name:"core/t/".concat(null==r||null===(l=r.table)||void 0===l?void 0:l.id,"/d/tag/")}).fetch(r.id,{});case 5:a=e.sent,i.push({id:r.id,name:r.name,tags:Xu().isArray(a.json)?a.json:[]}),m(i),e.next=16;break;case 10:if(!o){e.next=16;break}return e.next=13,(0,t.api)({name:"core/t/schema/tag"}).get(o.id);case 13:u=e.sent,i.push({id:o.id,name:o.title,tags:Xu().isArray(u.tags)?u.tags:[]}),m(i);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();l().useEffect((function(){(c||u)&&(console.log(c,u),v({table:c,tableData:u}))}),[JSON.stringify(c),JSON.stringify(u)]);var y="multiple"===s?null!==(n=i.value)&&void 0!==n&&n.length?i.value.map((function(e){return e.id})):[]:(null===(r=i.value)||void 0===r?void 0:r.id)||null;return l().createElement(a.Select,{value:y,onChange:function(e,t){"multiple"===s?i.onChange(t.map((function(e){return e.tag}))):i.onChange(t.tag)},mode:s},(f||[]).map((function(e){return((null==e?void 0:e.tags)||[]).map((function(e){return l().createElement(jp,{value:e.id,tag:e},e.name)}))})))},Tp=function(e){var t=e.input;return l().createElement(Cc.C,{is:"Dashboard.FormModalButton",title:"数据点",align:"left",offset:30,width:800,compStyle:!1,ButtonBody:function(){var e=t.value;return e&&e.length?e.map((function(e){var t;return l().createElement(a.Tag,null,null==e||null===(t=e.tableData)||void 0===t?void 0:t.name,"-",e.name)})):_t1("点击配置")}},l().createElement("div",{className:"flow-editor-form",style:{padding:0}},l().createElement(Cc.C,r({is:"PointTable",fullLable:!0,type:"checkbox"},e))))},Fp=function(e){var t,n=Dp("tagObj.table"),o=Dp("tagObj.tableData");return null!==(t=o)&&void 0!==t&&t.bind&&(o={id:node.value.value.split(".")[1],name:node.value.name}),l().createElement(Pp,r({tableData:o,table:n},e))};const Lp=function(e){var t,n=e.input.name,o=parseInt(n.split("[")[1][0]),i=Dp("tagList[".concat(o,"].table")),a=Dp("tagList[".concat(o,"].tableData"));return null!==(t=a)&&void 0!==t&&t.bind&&(a={id:a.value.value.split(".")[1],name:a.value.name}),l().createElement(Pp,r({tableData:a,table:i},e))};function Bp(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Mp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mp(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(a)throw i}}}}function Mp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Np(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ip(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Np(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Np(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}a.Select.Option;var Rp={background:"#78B937"},Zp=function(e){var n={type:"object",title:"数据点",properties:Ip({table:{type:"object",title:_r("设备表"),fieldType:"table",field:{func:"device",extendFlow:{show:!0,type:"model"},formEffect:function(e,t){var n=t.field.name,r=!1;e.useField(n,(function(t){r&&(e.change("".concat(n.split(".")[0],".tableData"),null),e.change("".concat(n.split(".")[0],".tag"),null))})),r=!0}}},tableData:{type:"object",title:_r("设备"),fieldType:"tableData",field:{func:"device",depend:"table"}},otherCondition:{type:"object",title:_r("数据值筛选"),field:{component:function(e){e.input;var n=e.field,i=n.key.replace(".otherCondition",".table"),a=n.key.replace(".otherCondition",".tableData"),u=oc(i),c=oc(a),s=l().useState({type:"object",properties:{}}),d=(0,o.Z)(s,2),p=d[0],f=d[1],m=function(e){var t,n={type:"object",properties:{}},r=Bp(e||[]);try{for(r.s();!(t=r.n()).done;){var o=t.value;n.properties[o.id]={title:o.name,type:"number",filterMethodFn:function(e){return e.filter((function(e){return"isNull"!==e.key&&"notNull"!==e.key}))}}}}catch(e){r.e(e)}finally{r.f()}return n};return l().useEffect((function(){Bs(Ns().mark((function e(){var n,r,o,i,l;return Ns().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==c||!c.id){e.next=8;break}return e.next=3,(0,t.api)({name:"core/t/".concat(null==c||null===(n=c.table)||void 0===n?void 0:n.id,"/d/tag/")}).fetch(c.id,{});case 3:r=e.sent,o=r.json,f(m(o)),e.next=14;break;case 8:if(null==u||!u.id){e.next=14;break}return e.next=11,(0,t.api)({name:"core/t/schema/tag"}).get(null==u?void 0:u.id);case 11:i=e.sent,l=i.tags,f(m(l));case 14:case"end":return e.stop()}}),e)})))()}),[null==u?void 0:u.id,null==c?void 0:c.id]),l().createElement(Cc.C,r({is:"QueryEditor"},e,{schema:p,DataWrap:Mc}))}}},tag:e?{type:"object",title:"数据",field:{component:Lp,extendFlow:{show:!0,type:"nodeDataPoint"}}}:{type:"array",title:"数据点",items:{type:"object",properties:{tag:{type:"object",title:"数据",field:{component:Fp,extendFlow:{show:!0,type:"nodeDataPoint"}}},method:{type:"string",title:"聚合方法",enum:["MEAN","MEDIAN","COUNT","MIN","MAX","SUM","FIRST","LAST"],enum_title:["平均值","中位值","数量","最小值","最大值","求和","首个值","最末值"]}}}},timeRage:{type:"object",title:_r("周期定义"),field:{component:hp,formEffect:function(e,t){var n=t.field.name;e.useField("".concat(n,".type"),(function(t){var r=t.value;e.setFieldData("".concat(n,".count"),{display:-1!==["forward","backward"].indexOf(r)}),e.setFieldData("".concat(n,".unit"),{display:-1!==["forward","backward","now"].indexOf(r)}),e.setFieldData("".concat(n,".fromNow"),{display:-1!==["forward","backward"].indexOf(r)}),e.setFieldData("".concat(n,".time"),{display:-1!==["before","after"].indexOf(r)}),e.setFieldData("".concat(n,".range"),{display:-1!==["between"].indexOf(r)})}))},expand:!0}},noTime:{title:_r("统计数据"),type:"boolean",field:{formEffect:function(e,t){var n=t.field.name;setTimeout((function(){e.useField(n,(function(t){t.value?e.setFieldData("".concat(n.split(".")[0],".group"),{display:!1}):e.setFieldData("".concat(n.split(".")[0],".group"),{display:!0})}))}))}}},group:{type:"string",title:_r("时间分组"),field:{component:_p}}},e?{method:{type:"string",title:"聚合方法",enum:["MEAN","MEDIAN","COUNT","MIN","MAX","SUM","FIRST","LAST"],enum_title:["平均值","中位值","数量","最小值","最大值","求和","首个值","最末值"]}}:null),required:["tag","timeRage"]};return n},qp={type:"object",properties:{name:{type:"string",title:_r("名称")},queryType:{type:"string",title:"查询方式",description:"未选择默认是多查询",enum:["multi","single"],enum_title:["多查询","单查询"],field:{effect:function(e,t){var n=e.value;setTimeout((function(){t.setFieldData("tagList",{display:!n||"multi"===n}),t.setFieldData("tagObj",{display:"single"===n}),"multi"===n&&t.change("tagObj",null),"single"===n&&t.change("tagList",null)}))}}},tagList:{type:"array",title:_r("数据点"),dataType:"analysis",field:{ButtonBody:function(e){var t,n,r,o,i,l,a,u,c=e.input,s=e.index,d=e.inputName;return null!=c&&null!==(t=c.value[s])&&void 0!==t&&null!==(n=t.tag)&&void 0!==n&&n.name&&null!=c&&null!==(r=c.value[s])&&void 0!==r&&null!==(o=r.node)&&void 0!==o&&o.name?"".concat(null==c||null===(i=c.value[s])||void 0===i||null===(l=i.node)||void 0===l?void 0:l.name,"-").concat(null==c||null===(a=c.value[s])||void 0===a||null===(u=a.tag)||void 0===u?void 0:u.name):d}},items:Zp(!0)},tagObj:Zp()}};const zp={title:_r("历史数据"),icon:"",category:[_r("处理节点"),_r("数据节点")],component:function(e){var n=(0,t.use)("FlowContext"),o=(n.context,n.updateOutputValues,n.updateOutputSchema),i=e.id,a=e.data,u=a.tagList,c=void 0===u?[]:u,s=a.name,d=useI18n().t;return l().useEffect((function(){o(i,{results:{type:"array",title:_r("历史数据")}})}),[]),l().createElement(Ec,r({},e,{title:e.title||e.data.name||(s?"".concat(s,"(").concat(d("历史数据"),")"):d("历史数据")),titleIcon:"historyTitleIcon",cardProps:{headStyle:{background:Rp.background,color:"#FFF"}}}),l().createElement("span",null,d("目标数据点"),": "),l().createElement("span",{style:{color:Rp.background,marginLeft:5}},c.filter((function(e){return null==e?void 0:e.tag})).map((function(e){var t;return null==e||null===(t=e.tag)||void 0===t?void 0:t.name})).join(",")))},requiredInfo:function(e){var t,n=e.data.tagList,r=Bp(void 0===n?[]:n);try{for(r.s();!(t=r.n()).done;){var o=t.value;if(!o.tag)return _r("数据点");if(!o.timeRage)return _r("周期定义");if(o.group&&!o.method)return _r("聚合方法");if(o.noTime&&!o.method)return _r("聚合方法")}}catch(e){r.e(e)}finally{r.f()}return null},paramSchema:qp,style:Rp,titleIcon:"historyTitleIcon"};var Up={background:"#78B937"},Gp={type:"object",properties:{tagList:{title:_r("数据"),type:"array",field:{ButtonBody:function(e){var t,n,r,o,i,l,a,u,c=e.input,s=e.index,d=e.inputName;return null!=c&&null!==(t=c.value[s])&&void 0!==t&&null!==(n=t.tags)&&void 0!==n&&n.length&&null!=c&&null!==(r=c.value[s])&&void 0!==r&&null!==(o=r.node)&&void 0!==o&&o.name?"".concat(null==c||null===(i=c.value[s])||void 0===i||null===(l=i.node)||void 0===l?void 0:l.name,"-").concat(null==c||null===(a=c.value[s])||void 0===a||null===(u=a.tags)||void 0===u?void 0:u.map((function(e){return e.name})).join(",")):d}},items:{type:"object",properties:{table:{type:"object",title:_r("设备表"),fieldType:"table",field:{func:"device",extendFlow:{show:!0,type:"model"}}},tableData:{type:"object",title:_r("设备"),fieldType:"tableData",field:{depend:"table",func:"device",extendFlow:{show:!0,type:"node"}}},tags:{type:"array",title:_r("数据"),items:{},field:{component:Lp,mode:"multiple",extendFlow:{show:!0,type:"nodeDataPoint",mode:"multiple"}}}},required:["tags","tableData"]}}}};const $p={title:_r("实时数据"),icon:"",category:[_r("处理节点"),_r("数据节点")],component:function(e){var n=(0,t.use)("FlowContext"),o=(n.context,n.updateOutputValues,n.updateOutputSchema),i=e.id,a=e.data,u=a.tagList,c=void 0===u?[]:u,s=a.name,d=useI18n().t;return l().useEffect((function(){var e={};null==c||c.forEach((function(t){var n;t.tags&&t.tags.length&&null!=t&&null!==(n=t.node)&&void 0!==n&&n.id&&(t.tags.forEach((function(n){e["".concat(t.node.id,".").concat(n.id,".time")]={type:"string",title:"".concat(t.node.name,"-").concat(n.name,"-").concat(d("时间戳"))},e["".concat(t.node.id,".").concat(n.id,".value")]={type:"number",title:"".concat(t.node.name,"-").concat(n.name,"-").concat(d("数据值"))}})),e["".concat(t.node.id,".#$tableData")]={type:"object",title:"".concat(t.node.name,"-").concat(d("数据设备"))})})),o(i,e)}),[JSON.stringify(c)]),l().createElement(Ec,r({},e,{title:e.title||e.data.name||s?"".concat(s):d("实时数据"),titleIcon:"historyTitleIcon",cardProps:{headStyle:{background:Up.background,color:"#FFF"}}}),l().createElement("span",null,d("目标数据点"),": "),l().createElement("span",{style:{color:Up.background,marginLeft:5}},c.filter((function(e){return e.tags&&e.tags.length})).map((function(e){return e.tags.map((function(e){return e.name}))})).join(",")))},paramSchema:Gp,style:Up,titleIcon:"historyTitleIcon"};var Yp={background:"#78B937"},Hp={first:_r("前一项数据"),second:_r("前两项数据"),third:_r("前三项数据")},Vp={type:"object",properties:{tags:{title:_r("数据"),type:"array",items:{},field:{component:function(e){return l().createElement(Tp,e)},extendFlow:{show:!0,type:"nodeDataPoint",mode:"multiple"}}},preType:{type:"string",title:_r("前项数"),field:{component:function(e){var t=e.input,n=t.onChange,r=t.value,o=useI18n().t,i=a.Select.Option;return l().createElement(a.Select,{onChange:n,value:r||[],mode:"multiple"},l().createElement(i,{key:"first",value:"first"},o("前一项数据")),l().createElement(i,{key:"second",value:"second"},o("前两项数据")),l().createElement(i,{key:"third",value:"third"},o("前三项数据")))}}}}};const Wp={title:_r("前项数据"),icon:"",category:[_r("处理节点"),_r("数据节点")],component:function(e){e.id;var n,o,i,a,u,c,s=e.data,d=s.name,p=s.preType,f=s.tags,m=(0,t.use)("FlowContext"),v=(m.context,m.updateOutputValues,m.updateOutputSchema),y=useI18n().t;return l().useEffect((function(){var t,n=_.cloneDeep(null==e||null===(t=e.paramSchema)||void 0===t?void 0:t.properties),r={first:y("前一项"),second:y("前两项"),third:y("前三项")};(_.isArray(f)?_.uniqBy(null==f?void 0:f.map((function(e){var t,n;return{id:null==e||null===(t=e.tableData)||void 0===t?void 0:t.id,name:null==e||null===(n=e.tableData)||void 0===n?void 0:n.name}})),"id"):[]).map((function(e){n[null==e?void 0:e.id]={title:null==e?void 0:e.name,type:"object",properties:{}},function(e){return _.isArray(f)?_.filter(f,(function(t){var n;return(null==t||null===(n=t.tableData)||void 0===n?void 0:n.id)==e})):[]}(null==e?void 0:e.id).map((function(t){n[e.id].properties[null==t?void 0:t.id]={title:t.name,type:"object",properties:{}},null==p||p.map((function(o){n[e.id].properties[null==t?void 0:t.id].properties[o]={title:r[o],type:"string"}}))}))})),null==n||delete n.preType,v(e.id,n)}),[null==e?void 0:e.data]),l().createElement(Ec,r({},e,{title:e.title||e.data.name||(d?"".concat(d,"(").concat(y("前向数据"),")"):y("前向数据")),titleIcon:"prevTitleIcon",cardProps:{headStyle:{background:Yp.background,color:"#FFF"}}}),l().createElement("span",null,y("目标数据点"),": "),l().createElement("span",{style:{color:Yp.background}},_.isArray(null==e||null===(n=e.data)||void 0===n?void 0:n.tags)&&(null==e||null===(o=e.data)||void 0===o||null===(i=o.tags)||void 0===i?void 0:i.map((function(e){return e.name+" "})))),l().createElement("br",null),l().createElement("span",null,y("前项数"),": "),l().createElement("span",{style:{color:Yp.background}},null==e||null===(a=e.data)||void 0===a||null===(u=a.preType)||void 0===u||null===(c=u.map((function(e){return y(Hp[e])})))||void 0===c?void 0:c.join("、")))},paramSchema:Vp,style:Yp,titleIcon:"prevTitleIcon"};var Kp={background:"#78B937"},Xp={type:"object",properties:{table:{title:_r("设备表"),type:"object",fieldType:"table",field:{func:"device",extendFlow:{show:!0,type:"model"}}},tableData:{title:_r("设备"),type:"object",fieldType:"tableData",field:{depend:"table",func:"device",extendFlow:{show:!0,type:"node"}}},tags:{title:_r("数据点及值"),type:"array",items:{type:"object",properties:{tag:{title:_r("数据点"),type:"object",field:{component:function(e){var t,n,o=oc("table"),i=oc("tableData");if(null!==(t=o)&&void 0!==t&&t.bind&&(o={id:o.value.value.split(".")[1],name:o.value.name}),null!==(n=i)&&void 0!==n&&n.bind){var a=i.value.value.split(".")[1];i="#$tableData"!==a?{id:a,name:i.value.name}:null}return l().createElement(Pp,r({table:o,tableData:i},e))},extendFlow:{show:!0,type:"nodeDataPoint"}}},value:{title:_r("写入值"),type:"object",field:{component:function(e){var t,n=_.isPlainObject(e.input.value)?null===(t=e.input.value)||void 0===t?void 0:t.value:e.input.value;return l().createElement(a.InputNumber,{value:n,onChange:function(t){return e.input.onChange({value:t})}})},extendFlow:{show:!0,limit:["number"]}}}}}},time:{type:"string",title:_r("写入时间"),format:"datetime",description:_r("未填写时间时，默认为当前时间")}},required:["tableData","tags"]};const Jp={fx:cp,StatisticsNode:Ap,historyData:zp,realTimeData:$p,prevData:Wp,writePoints:{title:_r("写入数据点值"),icon:"",category:[_r("处理节点"),_r("数据节点")],component:function(e){e.id;var t=e.data,n=(t.node,t.tags),o=t.name,i=useI18n().t;return l().createElement(Ec,r({},e,{title:e.title||e.data.name||o?"".concat(o):i("写入数据点值"),cardProps:{headStyle:{background:Kp.background,color:"#FFF"}}}),l().createElement("span",null,i("目标数据点个数"),": "),l().createElement("span",{style:{color:Kp.background,marginLeft:5}},null==n?void 0:n.length))},paramSchema:Xp,style:Kp}},Qp=xadminForm;function ef(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tf(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ef(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ef(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var nf=function(e){var t=null==e?void 0:e.properties;return t&&Object.keys(t).map((function(e){var n,r,o,i,l,a,u,c,s;if("关联字段"==(null===(n=t[e])||void 0===n?void 0:n.config))c={show:!0},"User"==(null===(s=t[e])||void 0===s?void 0:s.relateTo)&&(c.type="user");else if(["attachments","map"].includes(null===(r=t[e])||void 0===r?void 0:r.fieldType))c=null;else if("input"==(null===(o=t[e])||void 0===o?void 0:o.fieldType))c={show:!0,limit:[]};else if("select"==(null===(i=t[e])||void 0===i?void 0:i.fieldType))c={show:!0,limit:function(e,t,n){var r,o;return!(!["string","number"].includes(null==e||null===(r=e.defineSchema)||void 0===r?void 0:r.type)||null!=e&&null!==(o=e.defineSchema)&&void 0!==o&&o.format)}};else if("node_data_Point"==(null===(l=t[e])||void 0===l?void 0:l.fieldType))c={show:!0};else if("bytesArray"==(null===(a=t[e])||void 0===a?void 0:a.fieldType))t[e].type="string",c={show:!0,limit:["bytesArray","nodeDataPoint"]};else{var d,p;c={show:!0,limit:null!==(d=t[e])&&void 0!==d&&d.format?["time"]:[null===(p=t[e])||void 0===p?void 0:p.type]}}t[e].field=tf(tf({},(null===(u=t[e])||void 0===u?void 0:u.field)||{}),{},{extendFlow:c})})),e},rf=function(n){var i=n.input,u=i.onChange,c=i.value,s=n.extendfield,d=l().useState(null),p=(0,o.Z)(d,2),f=p[0],m=p[1],v=function(e){var n=l().useState({id:null}),r=(0,o.Z)(n,2),i=r[0],a=r[1],u=(0,t.use)("form").form,c=l().useRef(null);return u.useField("table",(function(e){var t,n,r,o,i,l=(null==e||null===(t=e.value)||void 0===t?void 0:t.id)||(null==e||null===(n=e.value)||void 0===n||null===(r=n.value)||void 0===r||null===(o=r.value)||void 0===o||null===(i=o.split("."))||void 0===i?void 0:i[2]);(!c.current||l&&c.current!=l)&&(c.current=l,l&&a({id:l}))})),i}(),y=(0,t.use)("form").form;l().useEffect((function(){var n;if(null!=v&&v.id||null!==(n=y.getState().values.table)&&void 0!==n&&n.id){var r=window._flow_form_httpCache_;if(r&&r[null==v?void 0:v.id]&&!_.isEmpty(r[null==v?void 0:v.id].schema)){var o=_.cloneDeep(r[null==v?void 0:v.id].schema);_.isEmpty(s)||(o.properties=tf(tf({},s),o.properties),o.form&&(o.form=_.uniq([].concat((0,Wu.Z)(_.keys(s)),(0,Wu.Z)(o.form))))),m(o)}else(0,t.api)({name:"core/t/schema"}).get(v.id).then((function(t){if(t.schema){var n=_.cloneDeep(t.schema);_.isEmpty(s)||(n.properties=tf(tf({},s),n.properties),n.form&&(n.form=_.uniq([].concat((0,Wu.Z)(_.keys(s)),(0,Wu.Z)(n.form))))),m(n)}window._flow_form_httpCache_=tf(tf({},window._flow_form_httpCache_||{}),{},(0,e.Z)({},null==v?void 0:v.id,t))}))}y.getState().values.table||m(null)}),[null==v?void 0:v.id,y.getState().values.table]);var g=c&&""!=c?c:{},h=nf(f),b=function(e){return e.form=e.form.filter((function(t){return"表格"!=e.properties[t].config&&"editableTable"!=e.properties[t].fieldType&&"table"!=e.properties[t].fieldType})),e};return l().useMemo((function(){return f?l().createElement(Cc.C,{is:"I18nSchemaForm",formKey:"model.".concat(null==v?void 0:v.id),schema:b(h),initialValues:g,group:function(e){return l().createElement(Cc.C,r({is:"Flow.BindDataGroup"},e))},component:function(e){return e.children},onSubmit:u,onChange:u}):l().createElement(a.Empty,{state:{padding:20},description:null!=v&&v.id?_t1("此表未配置任何字段"):_t1("请选择表"),image:__webpack_require__(5002)})}),[f])},of={type:"object",properties:{table:{type:"object",title:_r("表"),fieldType:"table",properties:{},field:{extendFlow:{show:!0,type:"table"}}},addType:{type:"string",title:_r("新增方式"),enum:["single","multiple"],enum_title:[_r("单条新增"),_r("批量新增")]},data:{type:"object",title:_r("新增记录"),field:{component:rf},properties:{}},multipleData:{type:"object",title:_r("新增记录"),properties:{},field:{extendFlow:{show:!0}}}},required:["table"],formEffect:function(e){var t=e.getState(),n=t.initialValues;t.visited,e.useField("table",(function(t){var r,o;(null==n||null===(r=n.table)||void 0===r?void 0:r.id)!=(null==t||null===(o=t.value)||void 0===o?void 0:o.id)&&(e.change("data",null),e.change("multipleData",null))})),e.useField("addType",(function(t){var n=t.value;e.setFieldData("data",{display:"multiple"!==n}),e.setFieldData("multipleData",{display:"multiple"==n})}))}},lf={background:"#EF874C"};const af={title:_r("新增记录"),category:[_r("处理节点"),_r("表处理节点")],component:function(n){var i,a=l().useState([]),u=(0,o.Z)(a,2),c=u[0],s=u[1],d=(0,t.use)("FlowContext"),p=(d.context,d.updateOutputValues,d.updateOutputSchema),f=null===(i=n.data)||void 0===i?void 0:i.data,m=[];return l().useEffect((function(){var r,o,i,l,a,u,c,d,v,y,g,h;f&&Object.keys(f).map((function(e){(f[e]||_.isNumber(f[e]))&&m.push(f[e])})),s(m);var b=(null===(r=n.data)||void 0===r||null===(o=r.table)||void 0===o?void 0:o.id)||(null===(i=n.data)||void 0===i||null===(l=i.table)||void 0===l||null===(a=l.value)||void 0===a||null===(u=a.value)||void 0===u||null===(c=u.split("."))||void 0===c?void 0:c[2]),w=window._flow_form_httpCache_;_.isEmpty(null==w?void 0:w[b])&&(0,t.api)({name:"core/t/schema"}).get(b).then((function(t){window._flow_form_httpCache_=tf(tf({},window._flow_form_httpCache_||{}),{},(0,e.Z)({},b,t))}));var E=null===(d=window._flow_form_httpCache_)||void 0===d?void 0:d[b],C={};null==E||null===(v=E.schema)||void 0===v||v.form.map((function(e){var t,n,r;C[e]="bytesArray"==(null===(t=E.schema)||void 0===t?void 0:t.properties[e].fieldType)?tf(tf({},null===(n=E.schema)||void 0===n?void 0:n.properties[e]),{},{nodeType:"bytesArray"}):null===(r=E.schema)||void 0===r?void 0:r.properties[e]})),(null!=E&&E.id||b)&&(C.table={type:"object",title:_r("表"),nodeType:"table",properties:(0,e.Z)({},(null==E?void 0:E.id)||b,{type:"object",title:null==E?void 0:E.name,properties:null==E||null===(y=E.schema)||void 0===y?void 0:y.properties})});var O=_.omit(null===(g=t.app.get("models").User)||void 0===g?void 0:g.properties,["password","password2","roles","node","department","startTime"]),x=(null==E||null===(h=E.schema)||void 0===h?void 0:h.properties)&&_.cloneDeep(_.pickBy(E.schema.properties,(function(e){return"User"==e.relateTo&&"array"!=e.type})));for(var k in _.forEach(x,(function(e){_.isEmpty(e.properties)&&(e.properties=O)})),_.isEmpty(x)||(C.extUserMap={type:"object",title:_r("用户组"),nodeType:"user",properties:x}),C){var S,A;["attachment","attachments"].includes(null===(S=C[k])||void 0===S?void 0:S.fieldType)&&delete C[k],"editableTable"==(null===(A=C[k])||void 0===A?void 0:A.fieldType)&&delete C[k]}p(n.id,tf(tf({},C),{},{"#$tableRecord":{type:"object",title:_r("表记录"),properties:{id:{type:"string",title:_r("表记录Id")}}}}))}),[n]),l().useMemo((function(){var e,t,o,i,a;return l().createElement(Ec,r({},n,{title:n.title||n.data.name||_r("添加表记录"),category:"exTableRecord",titleIcon:"addTitleIcon",cardProps:{headStyle:{background:lf.background,color:"#FFF"}}}),l().createElement("span",null,_t1("节点类型"),"："),l().createElement("span",{style:{color:lf.background}},n.data.name||_r("添加表记录")),l().createElement("br",null),l().createElement("span",null,_t1("目标表"),": "),l().createElement("span",{style:{color:lf.background}},(null===(e=n.data)||void 0===e||null===(t=e.table)||void 0===t?void 0:t.title)||(null===(o=n.data)||void 0===o||null===(i=o.table)||void 0===i||null===(a=i.value)||void 0===a?void 0:a.name)),l().createElement("br",null),l().createElement("span",null,_t1("填写了"),c.length,_t1("个字段")," "))}),[c])},requiredInfo:function(e){var t,n=window._flow_form_httpCache_,r=[];if(n){var o,i,l,a,u,c,s,d=null===(o=n[null==e||null===(i=e.data)||void 0===i||null===(l=i.table)||void 0===l?void 0:l.id])||void 0===o?void 0:o.schema;if(null!=d&&d.required&&(null==d||null===(a=d.required)||void 0===a?void 0:a.length)>0)return null!=e&&null!==(u=e.data)&&void 0!==u&&u.data?null===(c=d.required)||void 0===c||c.map((function(t){var n,o;_.isEmpty(null==e||null===(n=e.data)||void 0===n?void 0:n.data[t])&&!_.isNumber(null==e||null===(o=e.data)||void 0===o?void 0:o.data[t])&&r.push(d.properties[t].title)})):null===(s=d.required)||void 0===s||s.map((function(e){r.push(d.properties[e].title)})),r.join(" ")}if(null==e||null===(t=e.data)||void 0===t||!t.table)return _t1("表")},paramSchema:of,style:lf,titleIcon:"addTitleIcon"};function uf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cf(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?uf(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uf(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const sf=function(e){var n,i,u,c=(0,t.use)("form").form,s=null===(n=c.getState().initialValues)||void 0===n||null===(i=n.query)||void 0===i?void 0:i.fields,d=e.input,p=d.onChange,f=d.value,m=a.Select.Option,v=(a.Select.OptGroup,l().useState((null==f?void 0:f.time)||null)),y=(0,o.Z)(v,2),g=(y[0],y[1]),h=l().useState(f.rangeType),b=(0,o.Z)(h,2),w=b[0],_=b[1],E=function(e){var n=l().useState({id:null}),r=(0,o.Z)(n,2),i=r[0],a=r[1],u=(0,t.use)("form").form,c=l().useRef(null);return u.useField("table",(function(e){var t,n,r,o,i,l,u=(null==e||null===(t=e.value)||void 0===t?void 0:t.id)||(null==e||null===(n=e.value)||void 0===n||null===(r=n.value)||void 0===r||null===(o=r.value)||void 0===o?void 0:o.split(".")[2])||(null==e||null===(i=e.value)||void 0===i||null===(l=i.value)||void 0===l?void 0:l.value);(!c.current||u&&c.current!=u)&&(c.current=u,u&&a({id:u}))})),i}(),C=(0,t.use)("FlowContext").context.outputSchema,O=l().useState(null),x=(0,o.Z)(O,2),k=x[0],S=x[1],A=a.DatePicker.RangePicker,j="YYYY-MM-DD HH:mm:ss",D=[{title:_r("等于"),value:"eq"},{title:_r("不等于"),value:"ne"},{title:_r("早于"),value:"lt"},{title:_r("晚于"),value:"gt"},{title:_r("在范围内"),value:"range"},{title:_r("不在范围内"),value:"notRange"}],P=[{title:_r("等于"),value:"eq"},{title:_r("不等于"),value:"ne"}],T=["今天","昨天","这周","上周","这个月","上个月","今年","去年","指定时间"];l().useEffect((function(){var e,n,r,o;if(null!=E&&null!==(e=E.id)&&void 0!==e&&e.includes("#$table")){var i,l,a=null===(i=C[null==E||null===(l=E.id)||void 0===l?void 0:l.split(".")[0]])||void 0===i?void 0:i.properties["#$table"],u=Xu().pick((null==a?void 0:a.properties)||{},Xu().drop(Object.keys((null==a?void 0:a.properties)||{}),2));S(cf(cf({},a),{},{properties:u}))}else if(null!=E&&E.id||null!==(n=E.value)&&void 0!==n&&null!==(r=n.value)&&void 0!==r&&r.split(".")[1]&&(null==E||null===(o=E.id)||void 0===o||!o.includes("#$table"))){var c,s;(0,t.api)({name:"core/t/schema"}).get(E.id||(null===(c=E.value)||void 0===c||null===(s=c.value)||void 0===s?void 0:s.split(".")[1])).then((function(e){var t={type:"string",title:_r("记录编号")};e.schema&&S(cf(cf({},e.schema),{},{properties:cf({id:t},e.schema.properties),form:["id"].concat((0,Wu.Z)(e.schema.form))}))}))}}),[E]),k&&(null==k||null===(u=k.listFields)||void 0===u||u.map((function(e){k.properties[e].field={extendFlow:{show:!0}}})));var F={users:{type:"array",title:_r("创建人"),notInclude:!0,field:{extendFlow:{show:!0,type:"user"}},items:{type:"object",name:"User",relateTo:"User",properties:{id:{type:"string"},name:{type:"string"}}}}},L=["按照创建时间","按照创建人员","按字段值"];return l().useMemo((function(){return l().createElement("div",{className:"ant-row ant-form-item"},l().createElement(a.Radio.Group,{className:"flow_radio",value:f.rangeType,buttonStyle:"solid",onChange:function(e){_(e.target.value),p({rangeType:e.target.value})},style:{width:"100%",height:32}},null==L?void 0:L.map((function(e,t){return l().createElement(a.Tooltip,{key:e,title:e},l().createElement(a.Radio.Button,{value:e,style:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}},e))}))),l().createElement("div",{className:"slate-data-editor",style:{width:"100%",marginTop:10}},["按照创建时间","按照创建人员"].includes(w)&&l().createElement(a.Select,{value:f.relation,style:{width:102,height:32},dropdownClassName:"slate-data-editor-dropdown",onChange:function(e){p(cf(cf({},f),{},{rangeType:f.rangeType,relation:e}))}},("按照创建人员"==w?P:D).map((function(e){return l().createElement(m,{value:e.value,key:e.value},e.title)}))),"按照创建时间"!=w||["isNull","notNull"].includes(f.relation)?null:["range","notRange"].includes(f.relation)?l().createElement(A,{onChange:function(e,t){p(cf(cf({},f),{},{time:t}))},format:j,showTime:!0,defaultValue:Xu().isArray(f.time)?[moment(f.time[0],j),moment(f.time[1],j)]:null,style:{width:"100%"}}):["eq","ne"].includes(f.relation)?l().createElement(a.Select,{style:{width:"100%",height:32,marginLeft:5},value:f.time,onChange:function(e){g(e),p(cf(cf({},f),{},{time:e}))},dropdownClassName:"slate-data-editor-dropdown"},T.map((function(e){return l().createElement(m,{value:e,key:e},e)}))):null,"按照创建人员"==w&&l().createElement("div",{style:{width:"100%",height:32,marginLeft:5}},l().createElement(Cc.C,{is:"I18nSchemaForm",schema:{type:"object",properties:F},initialValues:f.personnel||"",component:function(e){return e.children},group:function(e){return l().createElement(qc,r({},e,{label:null}))},onChange:function(e){var t,n;p(cf(cf({},null==c||null===(t=c.getState())||void 0===t||null===(n=t.values)||void 0===n?void 0:n.range),{},{personnel:e}))},onSubmit:function(e){}}))),"按字段值"==w&&k?l().createElement("div",{style:{width:"100%",marginTop:10}},l().createElement(as,r({unbind:!0},e,{selectedValue:s,input:cf(cf({},e.input),{},{value:f.fields,onChange:function(e){p(cf(cf({},f),{},{fields:e,viewSchema:k}))}}),schema:k}))):null,"指定时间"==f.time||["lt","gt"].includes(f.relation)?l().createElement(a.DatePicker,{showTime:!0,style:{width:"100%",marginTop:10},defaultValue:f.appointTime?moment(f.appointTime,j):null,format:j,onChange:function(e,t){p(cf(cf({},f),{},{appointTime:t}))}}):null,l().createElement("div",{className:"dropdown-menu",style:{position:"relative"}}))}),[f,k])};function df(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pf(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?df(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):df(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}sf.useGroup=!1;var ff={type:"object",properties:{table:{type:"object",title:_r("表"),fieldType:"table",properties:{},field:{extendFlow:{show:!0,type:"table"}}},selectType:{type:"string",title:_r("记录选择"),fieldType:"flow_select",enum:["记录选择","范围定义"],enum_title:[_r("记录选择"),_r("范围定义")]},range:{type:"string",title:_r("范围"),field:{component:sf}},cycle:{type:"string",field:{}},fixedNote:{type:"object",fieldType:"table",properties:{},title:_r("固定记录"),field:{component:ys}}},required:["table"],formEffect:function(e){var t=e.getState(),n=t.initialValues;t.visited,e.useField("selectType",(function(t){switch(t.value){case void 0:e.setFieldData("fixedNote",{display:!1}),e.setFieldData("range",{display:!1}),e.setFieldData("cycle",{display:!1});break;case"记录选择":e.setFieldData("fixedNote",{display:!0}),e.setFieldData("range",{display:!1}),e.setFieldData("cycle",{display:!1});break;case"范围定义":e.setFieldData("fixedNote",{display:!1}),e.setFieldData("range",{display:!0}),e.setFieldData("cycle",{display:!1});break;default:e.setFieldData("fixedNote",{display:!1}),e.setFieldData("range",{display:!1}),e.setFieldData("cycle",{display:!1})}(null==n?void 0:n.selectType)!=(null==t?void 0:t.value)&&(e.change("fixedNote",null),e.change("range",null))})),e.useField("range",(function(t){switch(t.value){case"按照创建时间":e.setFieldData("cycle",{display:!0});break;case"按照创建人员":case"按字段值":e.setFieldData("cycle",{display:!1})}}))}},mf={background:"#EF874C"};const vf={title:_r("删除记录"),category:["处理节点","表处理节点"],component:function(n){var i,a,u,c,s,d,p,f,m,v,y,g=l().useState(null),h=(0,o.Z)(g,2),b=(h[0],h[1]),w=(0,t.use)("FlowContext"),_=(w.context,w.updateOutputValues,w.updateOutputSchema),E=(n.id,n.data.table||{});return l().useEffect((function(){var r,o,i,l,a,u,c,s,d,p,f=window._flow_form_httpCache_;f&&f[null==E?void 0:E.id]&&!Xu().isEmpty(f[null==E?void 0:E.id])?b(f[null==E?void 0:E.id]):(0,t.api)({name:"core/t/schema"}).get(E.id).then((function(t){t.schema&&b(t),window._flow_form_httpCache_=pf(pf({},window._flow_form_httpCache_||{}),{},(0,e.Z)({},null==E?void 0:E.id,t))}));var m=(null===(r=n.data)||void 0===r||null===(o=r.table)||void 0===o?void 0:o.id)||(null===(i=n.data)||void 0===i||null===(l=i.table)||void 0===l||null===(a=l.value)||void 0===a||null===(u=a.value)||void 0===u||null===(c=u.split("."))||void 0===c?void 0:c[2]),v=null===(s=window._flow_form_httpCache_)||void 0===s?void 0:s[m],y={};for(var g in null==v||null===(d=v.schema)||void 0===d||d.form.map((function(e){var t,n,r;y[e]="bytesArray"==(null===(t=v.schema)||void 0===t?void 0:t.properties[e].fieldType)?pf(pf({},null===(n=v.schema)||void 0===n?void 0:n.properties[e]),{},{nodeType:"bytesArray"}):null===(r=v.schema)||void 0===r?void 0:r.properties[e]})),(null!=v&&v.id||m)&&(y.table={type:"object",title:_r("表"),nodeType:"table",properties:(0,e.Z)({},(null==v?void 0:v.id)||m,{type:"object",title:null==v?void 0:v.name,properties:null==v||null===(p=v.schema)||void 0===p?void 0:p.properties})}),y.fixedNote=n.paramSchema.properties.fixedNote,y){var h,w;["attachment","attachments"].includes(null===(h=y[g])||void 0===h?void 0:h.fieldType)&&delete y[g],"editableTable"==(null===(w=y[g])||void 0===w?void 0:w.fieldType)&&delete y[g]}_(n.id,pf({},y))}),[n]),l().createElement(Ec,r({},n,{title:n.title||n.data.name,category:"exTableRecord",titleIcon:"subTitleIcon",cardProps:{headStyle:{background:mf.background,color:"#FFF"}}}),l().createElement("span",null,_t1("节点类型"),"："),l().createElement("span",{style:{color:mf.background}},n.title||_t1("删除表记录")),l().createElement("br",null),l().createElement("span",null,_t1("目标表"),": "),l().createElement("span",{style:{color:mf.background}},(null===(i=n.data)||void 0===i||null===(a=i.table)||void 0===a?void 0:a.title)||(null===(u=n.data)||void 0===u||null===(c=u.table)||void 0===c||null===(s=c.value)||void 0===s?void 0:s.title)||(null===(d=n.data)||void 0===d||null===(p=d.table)||void 0===p||null===(f=p.value)||void 0===f?void 0:f.name)),l().createElement("br",null),null!==(m=n.data)&&void 0!==m&&m.fixedNote?l().createElement("span",null,_t1("删除记录"),": ",((null===(v=n.data)||void 0===v||null===(y=v.fixedNote)||void 0===y?void 0:y.length)||0)+" "+_t1("条")):null)},paramSchema:ff,style:mf,titleIcon:"subTitleIcon"};function yf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gf(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?yf(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yf(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var hf=a.Select.Option,bf=a.DatePicker.RangePicker,wf=function(e,t){var n=[];return function e(r,o){return r&&Object.keys(r).map((function(i){if("id"!=i&&!Xu().includes(t,i)){var l=r[i]||{};if((l.relateTo||l.relate)&&(l.properties={}),l.properties&&!Xu().isEmpty(l.properties))l.key=i,e(l.properties,l);else{var a=l.title?o&&o.title?o.title+"-"+l.title:l.title:i;n.push(gf(gf({},l),{},{title:a,key:o&&o.key?o.key+"."+i:i}))}}}))}(e),n},_f=function(e,t){if(Xu().isPlainObject(e)&&e.gte&&e.lte){var n=t||"YYYY-MM-DD HH:mm:ss";e=[kc()(e.gte,n),kc()(e.lte,n)]}else e=null;return e},Ef=function(e){var t=e.input;return l().createElement(a.Input,r({style:{width:"100%"}},t))},Cf=function(e){var t=e.input;return l().createElement(a.InputNumber,r({style:{width:"100%"}},t,{value:Number(t.value)}))},Of=function(e){var t=e.input,n=e.field.schema,r=void 0===n?{}:n,o=r.enum_title||[],i=r.enum||[];return l().createElement(a.Select,{value:t.value,onChange:t.onChange,style:{width:"100%"}},null==i?void 0:i.map((function(e,t){return l().createElement(hf,{value:e},o[t]||e)})))},xf=function(e){var t=e.input,n=e.field.schema,r=void 0===n?{}:n,o=r.enum_title||[],i=r.enum||[];return l().createElement(a.Select,{mode:"multiple",value:t.value,onChange:t.onChange,style:{width:"100%"}},null==i?void 0:i.map((function(e,t){return l().createElement(hf,{value:e},o[t]||e)})))},kf=function(t){var n,r,o=t.input,i=function(t,n){o.onChange(gf(gf({},o.value),{},(0,e.Z)({},n,t)))};return l().createElement("div",{style:{display:"flex"}},l().createElement(a.InputNumber,{value:null===(n=o.value)||void 0===n?void 0:n.gte,onChange:function(e){return i(e,"gte")},style:{flexGrow:1,width:"100%"}}),l().createElement("span",{style:{margin:"auto 5px"}},"~"),l().createElement(a.InputNumber,{value:null===(r=o.value)||void 0===r?void 0:r.lte,onChange:function(e){return i(e,"lte")},style:{flexGrow:1,width:"100%"}}))},Sf=function(e){var t=e.input,n=e.field.schema,r=(null==n?void 0:n.format)||(null==n?void 0:n.formatType),o="time"==r?"HH:mm:ss":"date"==r?"YYYY-MM-DD":"YYYY-MM-DD HH:mm:ss",i=function(e){var n={gte:kc()(e[0]).format(o),lte:kc()(e[1]).format(o)};t.onChange(n)};return"time"==r?l().createElement(a.TimePicker.RangePicker,{onChange:i,value:_f(t.value,o),style:{width:"100%"}}):l().createElement(bf,{showTime:"date"!==r,onChange:i,value:_f(t.value,o),style:{width:"100%"}})},Af=function(e){var t=e.input,n=e.field.schema,r=(null==n?void 0:n.format)||(null==n?void 0:n.formatType),o="time"==r?"HH:mm:ss":"date"==r?"YYYY-MM-DD":"YYYY-MM-DD HH:mm:ss",i=function(e){t.onChange(kc()(e).format(o))};return"time"==r?l().createElement(a.TimePicker,{onChange:i,value:t.value&&"string"==typeof t.value?kc()(t.value,o):null,style:{width:"100%"}}):l().createElement(a.DatePicker,{showTime:"date"!==r,onChange:i,value:t.value&&"string"==typeof t.value?kc()(t.value,o):null,style:{width:"100%"}})},jf=function(){return null},Df=function(e){var t=e.input,n=t.value,r=t.onChange,o=e.field.schema,i="date"==((null==o?void 0:o.format)||(null==o?void 0:o.formatType))?["天"]:["秒","分","时","天"],u=function(e){var t=e.time,n=void 0===t?0:t,r=e.unit;return n*("秒"==r?1:"分"==r?60:"时"==r?3600:"天"==r?86400:1)},c=l().createElement(a.Select,{value:(null==n?void 0:n.unit)||i[0],onChange:function(e){return r(gf(gf({},n||{}),{},{unit:e,seconds:u(gf(gf({},n||{}),{},{unit:e}))}))},style:{width:100}},i.map((function(e){return l().createElement(a.Select.Option,{key:e,value:e},e)})));return l().createElement(a.InputNumber,{value:null==n?void 0:n.time,onChange:function(e){return r({time:e,unit:(null==n?void 0:n.unit)||i[0],seconds:u({time:e,unit:(null==n?void 0:n.unit)||i[0]})})},style:{width:"100%"},addonAfter:c})},Pf={string:[{name:"是",key:"eq",component:Ef},{name:"不是",key:"ne",component:Ef},{name:"包含",key:"contains",component:Ef},{name:"不包含",key:"notContains",component:Ef},{name:"开始为",key:"startsWith",component:Ef},{name:"结尾为",key:"endsWith",component:Ef},{name:"为空",key:"isNull",component:jf},{name:"不为空",key:"notNull",component:jf}],number:[{name:"等于",key:"eq",component:Cf},{name:"不等于",key:"ne",component:Cf},{name:"大于",key:"gt",component:Cf},{name:"小于",key:"lt",component:Cf},{name:"大于等于",key:"gte",component:Cf},{name:"小于等于",key:"lte",component:Cf},{name:"在范围内",key:"range",component:kf},{name:"不在范围内",key:"notRange",component:kf},{name:"为空",key:"isNull",component:jf},{name:"不为空",key:"notNull",component:jf}],boolean:[{name:"等于",key:"eq",component:function(e){var t=e.input;return l().createElement(a.Radio.Group,{options:[{label:"真",value:!0},{label:"假",value:!1}],onChange:t.onChange,value:t.value,optionType:"button",buttonStyle:"solid"})}},{name:"为空",key:"isNull",component:jf},{name:"不为空",key:"notNull",component:jf}],date:[{name:"等于",key:"eq",component:Af},{name:"为空",key:"isNull",component:jf},{name:"不为空",key:"notNull",component:jf},{name:"在范围内",key:"range",component:Sf},{name:"不在范围内",key:"notRange",component:Sf}],datetime:[{name:"等于",key:"eq",component:Af},{name:"为空",key:"isNull",component:jf},{name:"不为空",key:"notNull",component:jf},{name:"在范围内",key:"range",component:Sf},{name:"不在范围内",key:"notRange",component:Sf}],time:[{name:"等于",key:"eq",component:Af},{name:"为空",key:"isNull",component:jf},{name:"不为空",key:"notNull",component:jf},{name:"在范围内",key:"range",component:Sf},{name:"不在范围内",key:"notRange",component:Sf}],requiredTime:[{name:"等于",key:"eq",component:Af},{name:"在范围内",key:"range",component:Sf},{name:"不在范围内",key:"notRange",component:Sf}],eventtime:[{name:"等于",key:"eq",component:Of},{name:"不等于",key:"ne",component:Of},{name:"早于",key:"lt",component:Of},{name:"晚于",key:"gt",component:Of},{name:"为空",key:"isNull",component:jf},{name:"不为空",key:"notNull",component:jf},{name:"在范围内",key:"range",component:Sf},{name:"不在范围内",key:"notRange",component:Sf}],select:[{name:"等于",key:"eq",component:Of},{name:"不等于",key:"ne",component:Of},{name:"是",key:"range",component:xf},{name:"不是",key:"notRange",component:xf},{name:"为空",key:"isNull",component:jf},{name:"不为空",key:"notNull",component:jf}],enum:[{name:"等于",key:"eq",component:Of},{name:"不等于",key:"ne",component:Of},{name:"为空",key:"isNull",component:jf},{name:"不为空",key:"notNull",component:jf}],relate:[{name:"包含",key:"in"},{name:"不包含",key:"nin"},{name:"为空",key:"isNull",component:jf},{name:"不为空",key:"notNull",component:jf}],relateTo:[{name:"等于",key:"eq"},{name:"不等于",key:"ne"},{name:"为空",key:"isNull",component:jf},{name:"不为空",key:"notNull",component:jf}],other:[{name:"为空",key:"isNull",component:jf},{name:"不为空",key:"notNull",component:jf}]},Tf=function(e){var n,r,a,u,c=e.value,s=e.schema,d=e.field,p=e.onChange,f=e.unbind,m=e.method,v=(0,i.useState)(),y=(0,o.Z)(v,2),g=y[0],h=y[1],b=(0,i.useState)({schema:s.properties[d]||{}}),w=(0,o.Z)(b,2),_=w[0],E=w[1],C=s.filters?null===(n=Xu().map(s.filters,(function(e){return e})))||void 0===n?void 0:n.reduce((function(e,t){return e.concat(t)})):[],O=null==C?void 0:C.filter((function(e){return e.key==d}))[0],x=null==d?void 0:d.replace(".",".properties."),k=Xu().omit(Xu().get(s.properties,x),"filterByRes")||{},S=wf(s.properties).filter((function(e){return"model"!=e.key&&"dashboard"!=e.key}));l().useEffect((function(){var e=Xu().find(S,(function(e){return(e.key||e.id)==d}));if(e)if("multiple"!=k.selectType||k.relateTo||k.relate)if(O)h(Pf.relate);else if(k.relateTo||k.relate)h(Pf[k.relate?"relate":"relateTo"]);else if("attachment"==e.fieldType||"attachments"==e.fieldType)h(Pf.attachment);else if("object"!=e.type&&"array"!=e.type||!k.fieldType||"attachment"==k.fieldType||"attachments"==k.fieldType)if(["date","datetime","date-time","time"].includes(e.format)||"datePicker"==e.fieldType){var t,n,r,o=null!==(t=s.required)&&void 0!==t&&t.includes(e.key)?"requiredTime":(null===(n=e.format)||void 0===n?void 0:n.replace("-",""))||(null===(r=e.formatType)||void 0===r?void 0:r.replace("-",""));h(Pf[o])}else h(Pf[e.enum||e.enum1?"enum":e.type]||Pf.other);else h(Pf.relateTo);else h(Pf.other);else h([])}),[s,d,c]);var A=function(e){var t=e;null!=e&&e.$in&&(t={"@#$in":e.$in}),(!Xu().isUndefined(null==e?void 0:e.target)||!Xu().isUndefined(t))&&p(gf(gf({},c),{},{value:null!=e&&e.target?e.target.value:t}))},j=(null==c?void 0:c.method)||m,D=function(e){var n;if(e.fieldType||e.relateTo||e.relate){var r=function(e,n){return t.app.get("schema_converter").reduce((function(t,n){return n(t,e,{path:[],lookup:{}})}),{})}(e);return E(gf(gf({},e),r)),null===(n=t.app.get("form_fields")[r.type])||void 0===n?void 0:n.component}},P=l().useMemo((function(){var e=Xu().find(g,(function(e){return e.key==j}))||g&&g[0];null!=k&&k.selectFace&&(k.selectFace="select");var t=gf(gf({},O),k);return E({schema:t}),"datePicker"==k.fieldType&&["增加","减少"].includes(j)?Df:t.fieldType||t.enum||t.enum1||t.relateTo?t.component||D(t)||Ef:t.component||(null==e?void 0:e.component)||D(t)||Ef}),[g,j,c,d]),T="User"==k.relateTo&&"user";return l().createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",marginBottom:"0.5rem"}},l().createElement("div",{style:{flexGrow:1}},l().createElement(Zc,{field:gf(gf({},k),{},{extendFlow:{show:!0,type:T},unbind:f,limit:null==k||null===(r=k.field)||void 0===r||null===(a=r.extendFlow)||void 0===a?void 0:a.limit}),value:null==c?void 0:c.value,onChange:A},l().createElement(P,{input:{value:null!=c&&null!==(u=c.value)&&void 0!==u&&u["@#$in"]?{$in:null==c?void 0:c.value["@#$in"]}:null==c?void 0:c.value,onChange:A},field:_,schema:null==_?void 0:_.schema}))))},Ff=function(e){var t=e.schema,n=e.value,r=e.onChange,o=(e.getSchema,e.field,e.excludes);return wf(null==t?void 0:t.properties,o).filter((function(e){return"model"!=e.key&&"dashboard"!=e.key&&!e.key.includes("table")})),t&&l().createElement(Tf,{schema:t,field:null==n?void 0:n.id,value:n.compare,method:null==n?void 0:n.change,onChange:function(e){var t=n||{};t.compare=e.compare?{value:e.compare.value}:{value:e.value},r(t)},unbind:!0})},Lf=function(e){var t=e.schema,n=e.value,r=e.onChange,o=e.getSchema,i=wf(t.properties).filter((function(e){return"model"!=e.key&&"dashboard"!=e.key&&"editableTable"!==e.fieldType&&"table"!=e.fieldType}));return l().createElement(a.Select,{showSearch:!0,value:n,style:{marginRight:"0.5rem",flexGrow:1},placeholder:"过滤字段",optionFilterProp:"children",onChange:r,onDropdownVisibleChange:function(e){e&&o&&o()}},i.map((function(e){var t=e.key||e.id,n=e.title||e.name;return t&&n?l().createElement(hf,{value:t,key:t},l().createElement("span",{style:{color:"#999"}},"[",function(e){if(e.config)return e.config;switch(e.type){case"string":default:return"字符串";case"number":return"数字";case"integer":return"整数";case"boolean":return"布尔";case"object":return"对象";case"array":return"数组"}}(e),"]")," ",n):null})))},Bf=function(e){var t=e.value,n=e.schema,r=e.onChange,i=e.onDelete,a=e.unbind,u=e.getNewSchema,c=l().useState(n),s=(0,o.Z)(c,2),d=s[0],p=s[1];return l().useEffect((function(){p(n)})),l().createElement(l().Fragment,null,l().createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",marginBottom:"0.5rem"}},l().createElement(Lf,{schema:d,value:null==t?void 0:t.field,onChange:function(e){return r({field:e})},getSchema:function(){u&&u().then((function(e){p(e)})).catch((function(e){return console.error(e)}))}}),l().createElement("div",{style:{margin:"auto"}},l().createElement(Cc.Icon,{svg:__webpack_require__(9060),className:"array-delete",onClick:i}))),null!=t&&t.field?l().createElement(Tf,{schema:d,field:null==t?void 0:t.field,value:t,onChange:r,unbind:a}):null)},Mf=function(e){var t=e.query,n=e.schema,r=e.onChange,o=(e.relation,e.unbind),i=e.getNewSchema,a=function(e){return function(o){var i,l=o.field.replace(".",".properties.");"boolean"==(null===(i=Xu().get(n.properties,l))||void 0===i?void 0:i.type)&&Xu().isNil(null==o?void 0:o.value)&&(o.value=!0),r([].concat((0,Wu.Z)(t.slice(0,e)),[o],(0,Wu.Z)(t.slice(e+1))))}},u=function(e){return function(){r([].concat((0,Wu.Z)(t.slice(0,e)),(0,Wu.Z)(t.slice(e+1))))}};return t.map((function(e,t){return l().createElement(l().Fragment,null,l().createElement(Bf,{onChange:a(t),onDelete:u(t),value:e,schema:n,fieldProp:{},unbind:o,getNewSchema:i}))}))},Nf=["input","schema"],If=["input","schema","item"];function Rf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zf(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Rf(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rf(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}sf.useGroup=!1;var qf=[{title:_r("设定为"),key:"设定为"},{title:_r("增加"),key:"增加"},{title:_r("减少"),key:"减少"}],zf=["input","attachments","attachment","map","area","dateRange","link","textEditor","rate","timePicker"],Uf=function(e){var t=e.input,n=t.onChange,r=t.value,o=e.schema,i=Sc(e,Nf),u=a.Select.Option;r=r||[];var c=[];return i.queries.map((function(e,t){t<i.index&&c.push(e.id)})),l().useMemo((function(){return l().createElement(a.Select,{value:r,onChange:n},null==o?void 0:o.listFields.map((function(e){var t,n;if(!c.includes(e))return l().createElement(u,{key:e,value:e},l().createElement("span",{style:{color:"#999"}},"[",null==o||null===(t=o.properties[e])||void 0===t?void 0:t.config,"]")," ",null==o||null===(n=o.properties[e])||void 0===n?void 0:n.title)})))}),[o,i])},Gf=function(e){var t=e.input,n=t.onChange,r=t.value,o=e.schema,i=e.item,u=Sc(e,If),c=a.Select.Option;return l().useMemo((function(){var e,t=(null==o||null===(e=o.properties)||void 0===e?void 0:e[null==i?void 0:i.id])||{};return zf.includes(t.fieldType)||"single"==t.selectType||["boolean","object"].includes(t.type)&&!t.relate&&!t.relateTo?l().createElement("div",{style:{width:102,height:32,textAlign:"center"}},_t1("设定为")):l().createElement(a.Select,{style:{width:102,height:32,textAlign:"center",marginLeft:5},value:r,onChange:n},qf.map((function(e){return l().createElement(c,{key:e.key,value:e.key},e.title)})))}),[o,u])},$f={type:"object",title:_r("更新记录"),properties:{table:{type:"object",title:_r("表"),fieldType:"table",properties:{},field:{extendFlow:{show:!0,type:"table"}}},selectType:{type:"string",title:_r("记录选择"),fieldType:"flow_select",enum:["记录选择","范围定义"],enum_title:[_r("记录选择"),_r("范围定义")]},range:{type:"object",title:"",field:{component:sf}},selectRecord:{type:"object",fieldType:"table",title:_r("固定记录"),field:{component:ys}},updateField:{type:"object",title:_r("更新字段"),field:{component:function(e){var n,i,u,c,s,d,p=e.input,f=p.onChange,m=p.value,v=l().useState(null),y=(0,o.Z)(v,2),g=y[0],h=y[1],b=l().useState(m),w=(0,o.Z)(b,2),_=w[0],E=w[1],C=("table",n=l().useState({id:null}),i=(0,o.Z)(n,2),u=i[0],c=i[1],s=(0,t.use)("form").form,d=l().useRef(null),s.useField("table",(function(e){var t,n,r,o,i,l=(null==e||null===(t=e.value)||void 0===t?void 0:t.id)||(null==e||null===(n=e.value)||void 0===n||null===(r=n.value)||void 0===r||null===(o=r.value)||void 0===o||null===(i=o.split("."))||void 0===i?void 0:i[2]);(!d.current||l&&d.current!=l)&&(d.current=l,l&&c({id:l}))})),u).id;l().useEffect((function(){C&&(0,t.api)({name:"core/t/schema"}).get(C).then((function(e){var t=e.schema;if(t){var n=[],r=[];for(var o in null==t?void 0:t.properties){var i=(null==t?void 0:t.properties[o]).fieldType,l="editableTable"!==i||(null==t?void 0:t.properties[o].relate)||(null==t?void 0:t.properties[o].relateTo);"editableTable"!==i&&n.push(o),t.listFields.includes(o)&&l&&r.push(o)}t.form=n,t.listFields=r,h(function(e){var t=null==e?void 0:e.properties;return t&&Object.keys(t).map((function(e){var n,r,o,i,l,a,u,c;if("关联字段"==(null===(n=t[e])||void 0===n?void 0:n.config))u={show:!0},"User"==(null===(c=t[e])||void 0===c?void 0:c.relateTo)&&(u.type="user");else if(["attachments","map"].includes(null===(r=t[e])||void 0===r?void 0:r.fieldType))u=null;else if("input"==(null===(o=t[e])||void 0===o?void 0:o.fieldType))u={show:!0,limit:["string","number"]};else if("select"==(null===(i=t[e])||void 0===i?void 0:i.fieldType))u={show:!0,limit:function(e,t,n){var r,o;return!(!["string","number"].includes(null==e||null===(r=e.defineSchema)||void 0===r?void 0:r.type)||null!=e&&null!==(o=e.defineSchema)&&void 0!==o&&o.format)}};else if("bytesArray"==(null===(l=t[e])||void 0===l?void 0:l.fieldType))u={show:!0,limit:["bytesArray"]};else{var s,d;u={show:!0,limit:null!==(s=t[e])&&void 0!==s&&s.format?["time"]:[null===(d=t[e])||void 0===d?void 0:d.type]}}t[e].field=Zf(Zf({},(null===(a=t[e])||void 0===a?void 0:a.field)||{}),{},{extendFlow:u})})),e}(t))}}))}),[C]);var O=l().useCallback((function(){E([].concat((0,Wu.Z)(_),[{}])),f([].concat((0,Wu.Z)(_),[{}]))}),[m]);return l().createElement(l().Fragment,null,_&&(null==_?void 0:_.map((function(t,n){return l().createElement(l().Fragment,null,l().createElement("div",{className:"slate-data-editor",style:{marginTop:10}},l().createElement(Uf,r({},e,{schema:g,index:n,queries:_,input:{value:null==t?void 0:t.id,onChange:function(e){return function(e,t){var n=_.map((function(n,r){return r==t?{id:e,fieldType:g.properties[e].fieldType}:n}));E(n),f(n)}(e,n)}}})),l().createElement(Gf,r({},e,{schema:g,item:t,index:n,queries:_,input:{value:null==t?void 0:t.change,onChange:function(e){return function(e,t){var n=_.map((function(n,r){return r==t?{id:n.id,fieldType:n.fieldType,change:e}:n}));E(n),f(n)}(e,n)}}})),l().createElement("div",{style:{margin:"auto"}},l().createElement(Cc.Icon,{svg:__webpack_require__(9060),className:"array-delete",onClick:function(){return e=n,f([].concat((0,Wu.Z)(_.slice(0,e)),(0,Wu.Z)(_.slice(e+1)))),void E([].concat((0,Wu.Z)(_.slice(0,e)),(0,Wu.Z)(_.slice(e+1))));var e}}))),l().createElement("div",{style:{marginTop:10}},l().createElement(Ff,{schema:g,value:t,onChange:function(e){f(_.map((function(t,r){return r==n?Zf(Zf({},t),e):t})))}})))}))),l().createElement(a.Button,{style:{marginTop:10},onClick:O},_t1("添加字段")))}}}},required:["table","updateField"],formEffect:function(e){var t=e.getState(),n=t.initialValues;t.visited,e.useField("selectType",(function(t){switch(t.value){case"记录选择":e.setFieldData("selectRecord",{display:!0}),e.setFieldData("range",{display:!1}),e.change("range",null);break;case"范围定义":e.setFieldData("selectRecord",{display:!1}),e.setFieldData("range",{display:!0}),e.change("selectRecord",null);break;default:e.setFieldData("selectRecord",{display:!1}),e.setFieldData("range",{display:!1})}})),e.useField("table",(function(t){var r,o;(null==n||null===(r=n.table)||void 0===r?void 0:r.id)!=(null==t||null===(o=t.value)||void 0===o?void 0:o.id)&&(e.change("range",null),e.change("updateField",null),e.change("selectRecord",null))}))}},Yf={background:"#EF874C"};const Hf={title:_r("更新记录"),category:["处理节点","表处理节点"],component:function(n){var i,a,u,c,s,d,p,f,m=l().useState(null),v=(0,o.Z)(m,2),y=(v[0],v[1]),g=(0,t.use)("FlowContext"),h=(g.context,g.updateOutputValues,g.updateOutputSchema),b=(n.id,n.data),w=n.data,_=w.updateField,E=w.selectRecord,C=b.table||{};l().useEffect((function(){var r,o,i,l,a,u,c,s,d,p,f,m=window._flow_form_httpCache_;m&&m[null==C?void 0:C.id]&&!Xu().isEmpty(m[null==C?void 0:C.id])?y(m[null==C?void 0:C.id]):(0,t.api)({name:"core/t/schema"}).get(C.id).then((function(t){t.schema&&y(t),window._flow_form_httpCache_=Zf(Zf({},window._flow_form_httpCache_||{}),{},(0,e.Z)({},null==C?void 0:C.id,t))}));var v,g=(null===(r=n.data)||void 0===r||null===(o=r.table)||void 0===o?void 0:o.id)||(null===(i=n.data)||void 0===i||null===(l=i.table)||void 0===l||null===(a=l.value)||void 0===a||null===(u=a.value)||void 0===u||null===(c=u.split("."))||void 0===c?void 0:c[2]),b=null===(s=window._flow_form_httpCache_)||void 0===s?void 0:s[g],w={};null==b||null===(d=b.schema)||void 0===d||d.form.map((function(e){var t,n,r,o=null===(t=b.schema)||void 0===t?void 0:t.properties[e];if(null!=o&&o.relate){var i,l={};null==o||null===(i=o.relate)||void 0===i||i.fields.map((function(e){l[null==e?void 0:e.title]=(null==e?void 0:e.fieldSchema)||{}})),o.properties=l}if(_&&-1!==(null===(n=_.filter((function(e){return!["增加","减少"].includes(e.change)})))||void 0===n||null===(r=n.map((function(e){return e.id})))||void 0===r?void 0:r.indexOf(e))){var a,u=o||(null===(a=b.schema)||void 0===a?void 0:a.properties[e]);w[e]="bytesArray"==u.fieldType?Zf(Zf({},u),{},{nodeType:"bytesArray"}):u}})),(null!=b&&b.id||g)&&(w.table={type:"object",title:_r("表"),nodeType:"table",properties:(0,e.Z)({},(null==b?void 0:b.id)||g,{type:"object",title:null==b?void 0:b.name,properties:null==b||null===(v=b.schema)||void 0===v?void 0:v.properties})});var E=Xu().omit(null===(p=t.app.get("models").User)||void 0===p?void 0:p.properties,["password","password2","roles","node","department","startTime"]),O=(null==b||null===(f=b.schema)||void 0===f?void 0:f.properties)&&Xu().cloneDeep(Xu().pickBy(b.schema.properties,(function(e){return"User"==e.relateTo&&"array"!=e.type})));for(var x in Xu().forEach(O,(function(e){Xu().isEmpty(e.properties)&&(e.properties=E)})),Xu().isEmpty(O)||(w.extUserMap={type:"object",title:_r("用户组"),nodeType:"user",properties:O}),w.selectRecord=n.paramSchema.properties.selectRecord,w){var k,S;["attachment","attachments"].includes(null===(k=w[x])||void 0===k?void 0:k.fieldType)&&delete w[x],"editableTable"==(null===(S=w[x])||void 0===S?void 0:S.fieldType)&&delete w[x]}h(n.id,Zf({},w))}),[n]);var O,x=[],k=[];return _&&!Xu().isArray(_)?null===(O=Object.keys(_))||void 0===O||O.map((function(e){return x.push(e)})):x=_,E&&!Xu().isArray(E)&&(null===(i=Object.keys(E))||void 0===i||i.map((function(e){return k.push(e)}))),l().createElement(Ec,r({},n,{title:n.title||n.data.name||_t1("更新表记录"),titleIcon:"updateTitleIcon",category:"exTableRecord",cardProps:{headStyle:{background:Yf.background,color:"#FFF"}}}),l().createElement("span",null,_t1("节点类型"),"："),l().createElement("span",{style:{color:Yf.background}},n.title||_t1("更新表记录")),l().createElement("br",null),l().createElement("span",null,_t1("目标表"),": "),l().createElement("span",{style:{color:Yf.background}},(null==b||null===(a=b.table)||void 0===a?void 0:a.title)||(null==b||null===(u=b.table)||void 0===u||null===(c=u.value)||void 0===c?void 0:c.title)||(null==b||null===(s=b.table)||void 0===s||null===(d=s.value)||void 0===d?void 0:d.name)),l().createElement("br",null),!(null===(p=x)||void 0===p||!p.length)&&l().createElement(l().Fragment,null,l().createElement("span",null,_t1("填写了"),null===(f=x)||void 0===f?void 0:f.length,_t1("个字段")," "),l().createElement("br",null)),null!=k&&k.length&&!Xu().isArray(E)?l().createElement("span",null,_t1("选了"),Xu().isObject(E)?1:k.length,_t1("条记录")," "):null!=E&&E.length?l().createElement("span",null,_t1("选了"),(null==E?void 0:E.length)||0,_t1("条记录")," "):null)},paramSchema:$f,style:Yf,titleIcon:"updateTitleIcon"};function Vf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wf(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Vf(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vf(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}_r("数值类型"),_r("文本类型"),_r("选择器类型"),_r("时间类型"),_r("今天"),_r("昨天"),_r("明天"),_r("这周"),_r("上周"),_r("下周"),_r("这个月"),_r("上个月"),_r("下个月"),_r("今年"),_r("明年"),_r("去年"),_r("布尔值类型"),_r("关联字段类型");var Kf={newest:_r("最新一条数据"),custom:_r("自定义数量"),screen:_r("条件筛选")},Xf={type:"object",properties:{table:{type:"object",title:_r("表"),fieldType:"table",properties:{},field:{extendFlow:{show:!0,type:"table"}}},searchRange:{type:"string",title:_r("查询范围"),fieldType:"flow_select",enum_title:[_r("最新一条数据"),_r("自定义数量"),_r("条件筛选")],enum:["newest","custom","screen"]},custom:{type:"number",title:_r("自定义条数"),field:{component:function(e){return l().createElement(a.InputNumber,r({},e.input,{style:{width:"100%"},min:1}))},validate:function(e){return/^(0+)|[^\d]+/g.test(e)?_r("条数只能为大于0的正整数"):null}}},triggerCondition:{title:_r("触发条件"),type:"object",fieldType:"table",properties:{},field:{component:function(e){var n,i,a,u,c,s,d=l().useState(null),p=(0,o.Z)(d,2),f=p[0],m=p[1],v=("table",n=l().useState({id:null}),a=(i=(0,o.Z)(n,2))[0],u=i[1],c=(0,t.use)("form").form,s=l().useRef(null),c.useField("table",(function(e){var t,n,r,o,i,l=(null==e||null===(t=e.value)||void 0===t?void 0:t.id)||(null==e||null===(n=e.value)||void 0===n||null===(r=n.value)||void 0===r||null===(o=r.value)||void 0===o||null===(i=o.split("."))||void 0===i?void 0:i[2]);(!s.current||l&&s.current!=l)&&(s.current=l,l&&u({id:l}))})),a),y=e.input,g=y.onChange,h=y.value;l().useEffect((function(){null!=v&&v.id&&(0,t.api)({name:"core/t/schema"}).get(v.id).then((function(e){e.schema&&(e.schema.properties=Wf({id:{title:_t1("记录编号"),type:"string"}},e.schema.properties),m(e))}))}),[null==v?void 0:v.id]),(null==f?void 0:f.schema)&&(null==f||f.schema.listFields.map((function(e){f.schema.properties[e].field={extendFlow:{show:!0}}})));var b=function(e){g({cond:e.map((function(e){return e.map((function(e){var t,n,r,o;return f?Wf(Wf({},e),{},{name:null==f||null===(t=f.schema)||void 0===t||null===(n=t.properties[e.field])||void 0===n?void 0:n.title,dataType:null==f||null===(r=f.schema)||void 0===r||null===(o=r.properties[e.field])||void 0===o?void 0:o.config}):e}))})),viewSchema:null==f?void 0:f.schema})};return l().useMemo((function(){return f&&l().createElement(as,r({unbind:!0},e,{input:{onChange:b,value:null==h?void 0:h.cond},schema:null==f?void 0:f.schema}))}),[f])}}},selectOne:{type:"boolean",title:_r("取最新一条数据")}},required:["table"],formEffect:function(e){var t=e.getState(),n=t.initialValues;t.visited,e.setFieldData("selectOne",{display:!1}),e.useField("searchRange",(function(t){switch(t.value){case"custom":e.setFieldData("custom",{display:!0}),e.setFieldData("triggerCondition",{display:!1}),e.setFieldData("selectOne",{display:!1});break;case"screen":e.setFieldData("custom",{display:!1}),e.setFieldData("triggerCondition",{display:!0}),e.setFieldData("selectOne",{display:!0});break;default:e.setFieldData("custom",{display:!1}),e.setFieldData("triggerCondition",{display:!1}),e.setFieldData("selectOne",{display:!1})}n.searchRange!=t.value&&(e.change("custom",null),e.change("triggerCondition",null),e.change("selectOne",null))})),e.useField("triggerCondition",(function(t){var n;0!=(null===(n=t.value)||void 0===n?void 0:n.length)&&e.change("time","norestrictions")}))}},Jf={background:"#EF874C"};const Qf={title:_r("表查询"),category:["处理节点","表处理节点"],component:function(n){var i,a,u,c,s,d,p,f,m,v,y,g,h,b,w,_,E,C,O=(0,t.use)("FlowContext"),x=(O.context,O.updateOutputValues,O.updateOutputSchema),k=n.id,S=n.data,A=l().useState(null),j=(0,o.Z)(A,2),D=(j[0],j[1]),P=(null==n||null===(i=n.data)||void 0===i||null===(a=i.table)||void 0===a?void 0:a.id)||(null===(u=n.data)||void 0===u||null===(c=u.table)||void 0===c||null===(s=c.value)||void 0===s||null===(d=s.value)||void 0===d||null===(p=d.split("."))||void 0===p?void 0:p[2]);return l().useEffect((function(){var n,r,o,i=window._flow_form_httpCache_;i&&i[P]&&!Xu().isEmpty(i[P])?D(i[P]):(0,t.api)({name:"core/t/schema"}).get(P).then((function(t){t.schema&&D(t),window._flow_form_httpCache_=Wf(Wf({},window._flow_form_httpCache_||{}),{},(0,e.Z)({},P,t))}));var l=null===(n=window._flow_form_httpCache_)||void 0===n?void 0:n[P],a={};for(var u in null==l||null===(r=l.schema)||void 0===r||r.form.map((function(e){var t,n,r;a[e]="bytesArray"==(null===(t=l.schema)||void 0===t?void 0:t.properties[e].fieldType)?Wf(Wf({},null===(n=l.schema)||void 0===n?void 0:n.properties[e]),{},{nodeType:"bytesArray"}):null===(r=l.schema)||void 0===r?void 0:r.properties[e]})),(null!=l&&l.id||P)&&(a.table={type:"object",title:_r("表"),nodeType:"table",properties:(0,e.Z)({},(null==l?void 0:l.id)||P,{type:"object",title:null==l?void 0:l.name,properties:null==l||null===(o=l.schema)||void 0===o?void 0:o.properties})}),a){var c,s;["attachment","attachments"].includes(null===(c=a[u])||void 0===c?void 0:c.fieldType)&&delete a[u],"editableTable"==(null===(s=a[u])||void 0===s?void 0:s.fieldType)&&delete a[u]}S.selectOne||1==S.custom||"newest"==S.searchRange?a["#$tableRecord"]={type:"object",title:_r("表记录"),properties:{id:{type:"string",title:_r("表记录Id")}}}:"screen"==S.searchRange&&!Xu().isEmpty(S.triggerCondition)&&!S.selectOne||S.custom>1?a.data={type:"array",title:"",nodeType:"tableRecord",items:{type:"object",properties:{"#$tableRecord":{type:"object",title:_r("表记录"),nodeType:"tableRecord",properties:{id:{type:"string",title:"表记录Id"}}}}}}:S.searchRange||(a.data={type:"array",title:"",nodeType:"tableRecord",items:{type:"object",properties:{"#$tableRecord":{type:"object",title:_r("表记录"),nodeType:"tableRecord",properties:{id:{type:"string",title:"表记录Id"}}}}}}),x(k,Wf({},a))}),[n]),l().createElement(Ec,r({},n,{title:n.title||n.data.name||_t1("表查询"),category:"exTableRecord",titleIcon:"extTitleIcon",cardProps:{headStyle:{background:Jf.background,color:"#FFF"}}}),l().createElement("span",null,_t1("目标表"),": "),l().createElement("span",{style:{color:Jf.background}},_t1((null===(f=n.data)||void 0===f||null===(m=f.table)||void 0===m?void 0:m.title)||(null===(v=n.data)||void 0===v||null===(y=v.table)||void 0===y||null===(g=y.value)||void 0===g?void 0:g.title)||(null===(h=n.data)||void 0===h||null===(b=h.table)||void 0===b||null===(w=b.value)||void 0===w?void 0:w.name))),l().createElement("br",null),l().createElement("span",null,_t1("查询范围"),": "),l().createElement("span",{style:{color:Jf.background}},_t1(Kf[null===(_=n.data)||void 0===_?void 0:_.searchRange])),"custom"==(null===(E=n.data)||void 0===E?void 0:E.searchRange)?l().createElement(l().Fragment,null,l().createElement("br",null),l().createElement("span",{style:{color:Jf.background}},_t1("自定义数量"),": "),l().createElement("span",{style:{color:Jf.background}},_t1(null===(C=n.data)||void 0===C?void 0:C.custom))):null)},paramSchema:Xf,style:Jf,titleIcon:"extTitleIcon"};function em(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tm(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?em(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):em(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var nm=function(e){var n,o,i,u,c,s=e.input,d=e.data,p=e.schema,f=(0,t.use)("FlowContext").context,m=null==d||null===(n=d.value)||void 0===n||null===(o=n.value)||void 0===o||null===(i=o.replace(/\./g,".properties."))||void 0===i?void 0:i.replace(/\.properties.#./g,".items."),v=Xu().get(f.outputSchema,m),y=null==v||null===(u=v.items)||void 0===u?void 0:u.properties,g=null===(c=Xu().map(y,(function(e,t){return tm(tm({},e),{},{key:t})})))||void 0===c?void 0:c.filter((function(e){return(null==e?void 0:e.type)==(null==p?void 0:p.originType)}));return l().createElement(a.Select,r({allowClear:!0},s),Xu().map(g,(function(e){return l().createElement(a.Select.Option,{value:e.key},function(e){var t;switch(e.type){case"string":t=_r("字符串");break;case"number":t=_r("数字");break;case"boolean":t=_r("布尔");break;case"object":t=_r("对象");break;case"array":t=_r("数组");break;default:t=e.type}return l().createElement("span",null,l().createElement("span",{style:{color:"#999"}},"[".concat(_t1(t),"]"))," ",e.title||e.key)}(e))})))},rm={type:"object",title:_r("新增或更新记录"),properties:{table:{type:"object",title:_r("表"),fieldType:"table",properties:{},field:{extendFlow:{show:!0,type:"table"}}},selectType:{type:"string",title:_r("记录配置"),fieldType:"flow_select",enum:["single","multiple"],enum_title:[_r("单条记录"),_r("批量记录")]},data:{type:"object",title:_r("字段"),properties:{},field:{component:function(e){return l().createElement(rf,r({},e,{extendfield:{id:{type:"string",title:_r("记录ID"),description:_r("记录ID需要可包含汉字、字母、数字及特殊字符!@$-_")}}}))}}},multipleData:{type:"object",title:_r("数据"),properties:{},description:_r("数据仅支持绑定对象数组"),field:{extendFlow:{show:!0,onlySelect:!0,mode:"single",limit:["array"]}}},mapping:{type:"object",title:_r("数据映射"),properties:{},field:{component:function(n){var i=useI18n().t,u=n.input,c=u.value,s=u.onChange,d=(0,t.use)("form",(function(e){var t,n,r,o,i,l,a,u;return{tableId:null!==(t=e.values)&&void 0!==t&&null!==(n=t.table)&&void 0!==n&&n.bind?null===(r=e.values.table.value)||void 0===r||null===(o=r.value)||void 0===o||null===(i=o.split("."))||void 0===i?void 0:i[2]:null===(l=e.values)||void 0===l||null===(a=l.table)||void 0===a?void 0:a.id,data:null===(u=e.values)||void 0===u?void 0:u.multipleData}})),p=(d.form,d.tableId),f=d.data,m=l().useState({}),v=(0,o.Z)(m,2),y=v[0],g=v[1];return l().useEffect((function(){if(p){var n=window._flow_form_httpCache_,r={id:{type:"string",title:_r("记录ID"),description:_r("记录ID需要可包含汉字、字母、数字及特殊字符!@$-_")}};if(n&&n[p]&&!Xu().isEmpty(n[p].schema)){var o=Xu().cloneDeep(n[p].schema);o.properties=tm(tm({},r),o.properties),o.form&&(o.form=Xu().uniq(["id"].concat((0,Wu.Z)(o.form)))),g(o)}else(0,t.api)({name:"core/t/schema"}).get(p).then((function(t){if(t.schema){var n=Xu().cloneDeep(t.schema);n.properties=tm(tm({},r),n.properties),n.form&&(n.form=Xu().uniq(["id"].concat((0,Wu.Z)(n.form)))),g(n)}window._flow_form_httpCache_=tm(tm({},window._flow_form_httpCache_||{}),{},(0,e.Z)({},p,t))}))}else g(null)}),[p]),null!=y&&y.properties&&(y.properties=Xu().mapValues(y.properties,(function(e){return tm(tm({},e),{},{field:tm(tm({},e.field||{}),{},{component:function(e){return l().createElement(nm,r({},e,{data:f}))}})})}))),l().useMemo((function(){return Xu().isEmpty(y)?l().createElement(a.Empty,{state:{padding:20},description:"".concat(i(p?"请选择表":"此表未配置任何字段")),image:__webpack_require__(5002)}):l().createElement(Qp.SchemaForm,{schema:tm(tm({},y),{},{properties:Xu().mapValues(y.properties,(function(e){return tm(tm({},e),{},{originType:e.type||"string",type:"string"})}))}),initialValues:c,group:function(e){return l().createElement(Cc.C,r({is:"Flow.BindDataGroup"},e))},component:function(e){return e.children},onChange:s})}),[JSON.stringify(y),JSON.stringify(c||{}),JSON.stringify(f||{})])}}}},required:["table","selectType","multipleData"],formEffect:function(e){var t=e.getState().initialValues;e.useField("selectType",(function(t){e.setFieldData("data",{display:"single"==t.value}),e.setFieldData("multipleData",{display:"multiple"==t.value}),e.setFieldData("mapping",{display:"multiple"==t.value})})),e.useField("table",(function(n){var r,o;(null==t||null===(r=t.table)||void 0===r?void 0:r.id)!=(null==n||null===(o=n.value)||void 0===o?void 0:o.id)&&(e.change("data",null),e.change("multipleData",null),e.change("mapping",null))})),e.useField("multipleData",(function(n){var r,o,i,l,a,u;(null==t||null===(r=t.multipleData)||void 0===r||null===(o=r.value)||void 0===o?void 0:o.value)==(null==n||null===(i=n.value)||void 0===i||null===(l=i.value)||void 0===l?void 0:l.value)&&null!=n&&null!==(a=n.value)&&void 0!==a&&null!==(u=a.value)&&void 0!==u&&u.value||e.change("mapping",null)}))}},om={background:"#EF874C"};const im={title:_r("新增或更新记录"),category:[_r("处理节点"),_r("表处理节点")],component:function(n){var o,i,a,u=(0,t.use)("FlowContext"),c=(u.context,u.updateOutputSchema),s=n.id,d=n.data,p=n.data,f=p.selectType,m=p.table,v=void 0===m?{}:m,y=p.mapping,g=p.data,h=useI18n().t;return l().useEffect((function(){var n,r,o,i,l=(null==v?void 0:v.id)||(null==v||null===(n=v.value)||void 0===n||null===(r=n.value)||void 0===r||null===(o=r.split("."))||void 0===o?void 0:o[2]),a=window._flow_form_httpCache_;Xu().isEmpty(null==a?void 0:a[l])&&(0,t.api)({name:"core/t/schema"}).get(l).then((function(t){window._flow_form_httpCache_=tm(tm({},window._flow_form_httpCache_||{}),{},(0,e.Z)({},l,t))}));var u=null===(i=window._flow_form_httpCache_)||void 0===i?void 0:i[l],d={};if("single"==f)Xu().forEach(g,(function(e,t){var n,r,o=null==u||null===(n=u.schema)||void 0===n||null===(r=n.properties)||void 0===r?void 0:r[t];"id"==t?d[t]={type:"string",title:_r("编号")}:o&&"editableTable"!==(null==o?void 0:o.fieldType)&&(d[t]="bytesArray"==o.fieldType?tm(tm({},o),{},{nodeType:"bytesArray"}):o)}));else if("multiple"==f&&!Xu().isEmpty(y)){var p={};Xu().forEach(y,(function(e,t){var n,r,o=null==u||null===(n=u.schema)||void 0===n||null===(r=n.properties)||void 0===r?void 0:r[t];"id"==t?p[t]={type:"string",title:_r("编号")}:o&&"editableTable"!==(null==o?void 0:o.fieldType)&&(p[t]="bytesArray"==o.fieldType?tm(tm({},o),{},{nodeType:"bytesArray"}):o)})),d.data={type:"array",title:_r("表记录"),items:{type:"object",properties:p}}}(null!=u&&u.id||l)&&(d.table={type:"object",title:_r("表"),nodeType:"table",properties:{}}),c(s,d)}),[n]),l().createElement(Ec,r({},n,{title:n.title||n.data.name||h("新增或更新表记录"),titleIcon:"addUpdateTitleIcon",category:"exTableRecord",cardProps:{headStyle:{background:om.background,color:"#FFF"}}}),l().createElement("span",null,h("节点类型"),"："),l().createElement("span",{style:{color:om.background}},n.title||h("新增或更新表记录")),l().createElement("br",null),l().createElement("span",null,h("目标表"),": "),l().createElement("span",{style:{color:om.background}},(null==d||null===(o=d.table)||void 0===o?void 0:o.title)||(null==d||null===(i=d.table)||void 0===i||null===(a=i.value)||void 0===a?void 0:a.name)),l().createElement("br",null))},paramSchema:rm,style:om,titleIcon:"addUpdateTitleIcon",requiredInfo:function(e){var t=[],n=window._flow_form_httpCache_,r=e.data,o=r.table,i=r.selectType,l=r.multipleData,a=r.data,u=r.mapping;if(Xu().isEmpty(o)&&t.push(_r("表")),i||t.push(_r("记录配置")),Xu().isEmpty(l)&&"multiple"==i&&t.push(_r("数据")),n){var c,s,d=(null===(c=n[null==o?void 0:o.id])||void 0===c?void 0:c.schema)||{};if(null!=d&&d.required&&(null==d||null===(s=d.required)||void 0===s?void 0:s.length)>0){var p,f="multiple"==i?u:a;null===(p=d.required)||void 0===p||p.map((function(e){(Xu().isNil(null==f?void 0:f[e])||Xu().isObject(null==f?void 0:f[e])&&Xu().isEmpty(null==f?void 0:f[e]))&&t.push(d.properties[e].title)}))}}return t.join(" ")}},lm={addExTableRecord:af,addUpdateExTableRecord:im,updateExTableRecord:Hf,deleteExTableRecord:vf,searchExTableRecord:Qf};function am(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function um(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?am(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):am(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var cm=function(e){return null!=e&&e.insideFilter&&!Xu().isEmpty(null==e?void 0:e.insideFilter)&&e.insideFilter.forEach((function(e){null==e||e.forEach((function(e){e.value=Xu().isPlainObject(e.value)?Xu().omit(e.value,["icon","child","parent"]):e.value}))})),null!=e&&e.relateModel&&(e.relateModel=Xu().map(e.relateModel,(function(e){return{id:e.id,name:e.name}}))),e};const sm=function(e){var n=e.input,r=n.value,i=void 0===r?[]:r,u=n.onChange,c=e.label,s=e.columns,d=void 0===s?[]:s,p=e.tableId,f=l().useState(),m=(0,o.Z)(f,2),v=m[0],y=m[1];return l().useEffect((function(){p&&(y(!0),(0,t.api)({name:"core/t/schema"}).get(p).then((function(e){var t,n,r,o=[],l=(null===(t=e.schema)||void 0===t?void 0:t.properties)||{};null!==(n=e.schema)&&void 0!==n&&n.properties&&(o=e.schema.form?e.schema.form.map((function(e){var t,n=i&&cm(Xu().find(i,(function(t){return t.key==e})));return um(um({},cm(l[e])),{},{key:e,view:!0,edit:!(null!==(t=l[e])&&void 0!==t&&t.disabled)},n)})):Xu().map(l,(function(e,t){var n,r=i&&cm(Xu().find(i,(function(e){return e.key==t})));return um(um({},cm(e)),{},{view:!0,edit:!(null!==(n=l[t])&&void 0!==n&&n.disabled)},r)}))),y(!1),u(null===(r=o)||void 0===r?void 0:r.filter((function(e){return!("id"==e.key||e.schemaHide||"bytes"==e.type||"bytes"==e.dbType&&"bytesArray"==e.fieldType)})))})).catch((function(e){y(!1),a.message.error(_t1("获取表失败"))})))}),[p]),l().createElement(Cc.C,{is:"Dashboard.FormModalButton",title:c,align:"left",offset:30,width:400,compStyle:!1},l().createElement(a.Table,{columns:d,dataSource:i,loading:v,pagination:!1,scroll:{y:350},size:"small",bordered:!0}))},dm=function(e){var n=e.input,o=void 0===n?{}:n,i=o.value,l=void 0===i?{}:i,a=o.onChange,u=t.app.get("models").User,c={properties:_.omit(u.properties,["createTime","dashboard","expireUse","mainmenu","noChildDept","onlyNode","password","password2","startTime","warningFilter"])},s=l.cond;return c?React.createElement(Cc.C,r({is:"QueryEditor"},e,{input:{value:s,onChange:function(e){a({cond:e,viewSchema:c})}},schema:c,DataWrap:Mc})):null};function pm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fm(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?pm(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pm(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var mm=a.Select.Option,vm=function(e){var n=e.input,r=n.value,i=n.onChange,u=e.omitUsers,c=e.roleType,s=l().useState(),d=(0,o.Z)(s,2),p=d[0],f=d[1],m=l().useState(!1),v=(0,o.Z)(m,2),y=v[0],g=v[1],h=useI18n().t;l().useEffect((function(){b()}),[]);var b=function(){var e=window._flow_form_httpCache_;if(e&&e.assignUsers&&e.assignRoles){var n,r=Xu().differenceBy(e.assignUsers,u,"id")||[],o=(null===(n=e.assignRoles.filter((function(e){var t;return c?(null==e||null===(t=e.permission)||void 0===t?void 0:t.indexOf(c))>-1||"超级管理员"==(null==e?void 0:e.name):e})))||void 0===n?void 0:n.map((function(e){return null==e?void 0:e.id})))||[];f(r.filter((function(e){var t;return(null==e||null===(t=e.roles)||void 0===t?void 0:t.find((function(e){return o.indexOf(null==e?void 0:e.id)>-1})))||(null==e?void 0:e.isSuper)})))}else{g(!0);var i=encodeURIComponent(JSON.stringify({filter:{$or:[{permission:{$regex:"flowtask.view"}},{name:"超级管理员"}]},project:{permission:1}}));(0,t.api)({name:"core/role"}).fetch("?query="+i,{}).then((function(e){var t=e.json;w(t)})).catch((function(){return g(!1)}))}},w=function(e){var n={filter:{$or:[{rolesId:{$in:null==e?void 0:e.map((function(e){return e.id}))}},{isSuper:!0}]},project:{isSuper:1}},r=encodeURIComponent(JSON.stringify(n));(0,t.api)({name:"core/user"}).fetch("?query="+r,{}).then((function(t){var n,r=t.json,o=Xu().uniqBy(Xu().differenceBy(r,u,"id"),"name"),i=(null==e||null===(n=e.filter((function(e){var t;return c?(null==e||null===(t=e.permission)||void 0===t?void 0:t.indexOf(c))>-1||"超级管理员"==(null==e?void 0:e.name):e})))||void 0===n?void 0:n.map((function(e){return null==e?void 0:e.id})))||[];f(null==o?void 0:o.filter((function(e){var t;return(null==e||null===(t=e.roles)||void 0===t?void 0:t.find((function(e){return i.indexOf(null==e?void 0:e.id)>-1})))||(null==e?void 0:e.isSuper)}))),window._flow_form_httpCache_=fm(fm({},window._flow_form_httpCache_||{}),{},{assignUsers:o,assignRoles:e}),g(!1)})).catch((function(){return g(!1)}))};return l().createElement(a.Select,{showSearch:!0,labelInValue:!0,allowClear:!0,mode:"multiple",value:r&&Xu().isArray(r)?r.map((function(e){return{label:e.name,value:e.id}})):[],notFoundContent:l().createElement(Cc.C,{is:"NoData"}),dropdownRender:function(e){return y?l().createElement("div",{style:{margin:"2px",textAlign:"center"}},l().createElement(a.Spin,{size:"small"})):e},onSearch:function(){return null},onChange:function(e){i(null==e?void 0:e.map((function(e){return{id:e.value,name:e.label}})))},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},placeholder:h("请选择用户"),style:{minWidth:150}},null==p?void 0:p.map((function(e){return l().createElement(mm,{key:e.id,value:e.id},e.name)})))},ym=function(e){var n,o=(0,t.use)("form").form,i=Xu().get(o.getState().values,"assignSetting"),a=Xu().flatten(null==i||null===(n=i.filter((function(e){return"user"==e.type})))||void 0===n?void 0:n.map((function(e){var t;return null===(t=e.data)||void 0===t?void 0:t.user})));return l().createElement(vm,r({},e,{omitUsers:a}))};const gm=function(n){var o,i=n.input,u=i.value,c=i.onChange,s=n.field,d=(0,t.use)("form").form,p=null===(o=s.key)||void 0===o?void 0:o.replace(".data",".type"),f=Xu().get(d.getState().values,p),m=function(t){c(fm(fm({},u),{},(0,e.Z)({},f,t)))};return"templateUser"==f?l().createElement(Zc,{field:fm(fm({},s),{},{extendFlow:{show:!0,type:"user"}}),value:u.templateUser,onChange:m},l().createElement(a.Input,{readOnly:!0})):"filter"==f?l().createElement(dm,r({},n,{input:{value:u.filter,onChange:m}})):"user"==f?l().createElement(vm,r({},n,{input:{value:u.user,onChange:m}})):l().createElement(l().Fragment,null)},hm=function(e){var n,r=e.input,u=r.value,c=r.onChange,s=e.authType,d=(0,i.useState)(),p=(0,o.Z)(d,2),f=p[0],m=p[1];(0,i.useEffect)((function(){"eSignature"==s&&(n={$regex:"signature.view"}),"authorizer"==s&&(n={$regex:"authorizer.view"}),v(n)}),[]);var v=function(){var e=Bs(Ns().mark((function e(n){var r,o;return Ns().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={filter:{permission:n}},o=encodeURIComponent(JSON.stringify(r)),(0,t.api)({name:"core/role"}).fetch("?query="+o,{}).then((function(e){var t=e.json.map((function(e){return e.id}));y(t)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){var n={filter:{$or:[{rolesId:{$in:e}},{isSuper:!0}]}},r=encodeURIComponent(JSON.stringify(n));(0,t.api)({name:"core/user"}).fetch("?query="+r,{}).then((function(e){var t=e.json,n=function(e,t){var n=new Map;return e.filter((function(e){return!n.has(e[t])&&n.set(e[t],1)}))}(t,"name");t&&m(n)}))};return l().createElement(a.Select,{mode:"multiple",defaultValue:u||void 0,onChange:function(e){!function(e){c(e)}(e)}},f?f.map((function(e){return l().createElement(Option,{value:"authorizer"==s?e.name:e.id},e.name)})):null)};function bm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wm(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?bm(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bm(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var _m={background:"#ECBE0A"},Em=[{value:"or",title:_r("或签（一名审批人通过或否决即可）")},{value:"and",title:_r("会签（一名审批人通过即通过，否决需要全员否决）")},{value:"all",title:_r("会签（需要所有审批人通过）")}],Cm=function(e){var t=e.assignSetting,n=useI18n().t;return t?t.map((function(e){var t,r,o,i,u,c;return"user"!=(null==e?void 0:e.type)||Xu().isEmpty(null==e||null===(t=e.data)||void 0===t?void 0:t.user)?"templateUser"==(null==e?void 0:e.type)&&null!=e&&null!==(o=e.data)&&void 0!==o&&null!==(i=o.templateUser)&&void 0!==i&&null!==(u=i.value)&&void 0!==u&&u.name?l().createElement(l().Fragment,null,l().createElement(a.Tag,{color:"blue",style:{whiteSpace:"normal",marginBottom:5}},e.data.templateUser.value.name)):"filter"==(null==e?void 0:e.type)&&null!=e&&null!==(c=e.data)&&void 0!==c&&c.filter?l().createElement(l().Fragment,null,l().createElement(a.Tag,{color:"green",style:{whiteSpace:"normal",marginBottom:5}},n("范围筛选用户"))):null:l().createElement(l().Fragment,null,l().createElement(a.Tag,{color:"gold",style:{whiteSpace:"normal",marginBottom:5}},null===(r=e.data.user.map((function(e){return e.name})))||void 0===r?void 0:r.join("、")))})):n("未配置用户")},Om=function(e){var t,n,r,o,i,a,u,c=e.input,s=e.index,d=null==c||null===(t=c.value)||void 0===t||null===(n=t[s])||void 0===n?void 0:n.type,p=null==c||null===(r=c.value)||void 0===r||null===(o=r[s])||void 0===o||null===(i=o.data)||void 0===i?void 0:i[d],f=useI18n().t;return"user"==d?l().createElement(l().Fragment,null,l().createElement(Cc.Icon,{type:"user",style:{float:"left",lineHeight:"30px"}}),l().createElement("div",{style:{display:"inline-flex",width:"calc(100% - 50px)",justifyContent:"center"}},l().createElement("span",{style:{"text-overflow":"ellipsis",overflow:"hidden"}},(null==p||null===(a=p.map((function(e){return e.name})))||void 0===a?void 0:a.join("、"))||f("未配置用户")))):"filter"!=d||Xu().isEmpty(p)?"templateUser"==d?l().createElement("span",null,l().createElement(Cc.Icon,{type:"link",style:{float:"left",lineHeight:"30px"}}),(null==p||null===(u=p.value)||void 0===u?void 0:u.name)||f("未配置用户")):f("未配置用户"):l().createElement(l().Fragment,null,l().createElement(Cc.Icon,{type:"search",style:{float:"left",lineHeight:"30px"}}),f("范围筛选用户"))},xm={type:"object",properties:{name:{type:"string",title:_r("名称")},table:{type:"object",title:_r("审批对象"),field:{extendFlow:{show:!0,type:"table"}}},approveType:{type:"string",title:_r("审批形式"),field_type:"select",enum:Em.map((function(e){return e.value})),enum_title:Em.map((function(e){return e.title}))},assignSetting:{type:"array",title:_r("审批人"),items:{type:"object",properties:{type:{title:_r("审批人"),type:"string",enum:["user","filter","templateUser"],enum_title:[_r("用户"),_r("范围筛选"),_r("前序节点变量用户")]},data:{type:"object",title:_r("用户"),field:{attrs:{groupSize:{labelCol:{span:0},wrapperCol:{span:24}}},component:function(e){return l().createElement(gm,r({},e,{roleType:"flowtask.edit"}))}}}}},field:{ButtonBody:Om}},approveSetting:{title:_r("审批设置"),type:"object",properties:{referral:{type:"boolean",title:_r("允许转审")},referralType:{type:"string",title:_r("转审对象"),enum:["all","specific"],enum_title:[_r("可转给所有用户"),_r("可转给指定用户")],field:{attrs:{groupSize:{labelCol:{span:0},wrapperCol:{span:22,offset:2}}}}},referralUser:{type:"array",title:_r("用户"),items:{},field:{component:function(e){return l().createElement(ym,r({},e,{roleType:"flowtask.edit"}))},attrs:{groupSize:{labelCol:{span:0},wrapperCol:{span:22,offset:2}}}}},reject:{type:"boolean",title:_r("允许拒绝")}}},securitySetting:{title:_r("安全设置"),type:"object",properties:{eSignature:{type:"boolean",title:_r("电子签名")},causeDescription:{type:"boolean",title:_r("事由说明")},usersList:{type:"array",title:_r("用户列表"),items:{},field:{component:function(e){return l().createElement(hm,r({},e,{authType:"eSignature"}))}}},authorizer:{type:"array",title:_r("授权人"),items:{},field:{component:function(e){return l().createElement(hm,r({},e,{authType:"authorizer"}))}}},validateHost:{type:"boolean",title:_r("IP验证")},host:{type:"array",title:_r("IP地址"),items:{type:"object",properties:{ip:{type:"string",title:_r("IP地址"),field:{validate:function(e){return!e||/^((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)$/.test(e)?null:_r("IP地址格式错误")}}}}},field:{ButtonBody:function(e){var t,n,r=e.input,o=e.index,i=e.inputName;return(null==r||null===(t=r.value)||void 0===t||null===(n=t[o])||void 0===n?void 0:n.ip)||i}}}}},buttonText:{title:_r("按钮名称"),type:"object",properties:{confirm:{type:"string",title:_r("通过按钮")},cancel:{type:"string",title:_r("拒绝按钮")}}},approveFields:{title:_r("审批字段"),type:"array",items:{},field:{component:function(n){var i=n.input,u=i.value,c=void 0===u?{}:u,s=i.onChange,d=(n.label,(0,t.use)("form").form),p=l().useState(),f=(0,o.Z)(p,2),m=f[0],v=f[1],y=useI18n().t;l().useEffect((function(){d.useField("table",(function(e){var t,n,r,o=e.value;o?v(null!=o&&o.bind?(null===(t=o.value)||void 0===t||null===(n=t.value)||void 0===n?void 0:n.split(".")[2])||(null==o||null===(r=o.value)||void 0===r?void 0:r.value):null==o?void 0:o.id):s(null)}))}),[]);var g=function(t,n,r){var o=t.target.checked,i=c.findIndex((function(e){return e.key==n.key})),l=wm(wm({},n),{},"need"==r&&o?(0,e.Z)({view:o,edit:o},r,o):"edit"==r&&o?(0,e.Z)({view:o},r,o):"view"!=r||o?"edit"!=r||o?(0,e.Z)({},r,o):(0,e.Z)({need:o},r,o):(0,e.Z)({edit:o,need:o},r,o));c&&c.splice(i,1,l),s((0,Wu.Z)(c))},h=[{title:"",dataIndex:"title",key:"title"},{title:y("查看"),dataIndex:"view",key:"view",render:function(e,t){return l().createElement(a.Checkbox,{checked:e,onChange:function(e){return g(e,t,"view")}})}},{title:y("编辑"),dataIndex:"edit",key:"edit",render:function(e,t){return l().createElement(a.Checkbox,{checked:e,onChange:function(e){return g(e,t,"edit")}})}},{title:y("必填"),dataIndex:"need",key:"need",render:function(e,t){return l().createElement(a.Checkbox,{checked:e,onChange:function(e){return g(e,t,"need")}})}}];return l().createElement(sm,r({},n,{columns:h,tableId:m}))}}}},required:["approveType"],formEffect:function(e){e.useField("approveSetting.reject",(function(t){var n=t.value;e.change("approveSetting.reject",!(!Xu().isNil(n)&&!n))})),e.useField("approveSetting.referral",(function(t){var n=t.value;e.setFieldData("approveSetting.referralType",{display:!!n}),n?e.change("approveSetting.referralType",e.getFieldState("approveSetting.referralType").value||"all"):(e.change("approveSetting.referralType",null),e.change("approveSetting.referralUser",null))})),e.useField("approveSetting.referralType",(function(t){var n=t.value;e.setFieldData("approveSetting.referralUser",{display:"specific"==n}),"specific"!=n&&e.change("approveSetting.referralUser",null)})),e.useField("table",(function(t){var n=t.value;e.setFieldData("approveFields",{display:!!n})})),e.useField("securitySetting.eSignature",(function(t){var n=t.value;e.setFieldData("securitySetting.usersList",{display:!!n}),e.setFieldData("securitySetting.causeDescription",{display:!!n}),e.setFieldData("securitySetting.authorizer",{display:!!n}),n||(e.change("securitySetting.usersList",null),e.change("securitySetting.causeDescription",null),e.change("securitySetting.authorizer",null))})),e.useField("securitySetting.validateHost",(function(t){var n=t.value;e.setFieldData("securitySetting.host",{display:!!n}),n||e.change("securitySetting.host",null)}))}};const km={title:_r("审批"),icon:"",category:[_r("人工节点")],component:function(n){var o,i=(0,t.use)("FlowContext"),a=(i.context,i.updateOutputValues,i.updateOutputSchema),u=n.id,c=n.data,s=(c.name,c.assignSetting),d=c.approveType,p=c.approveFields,f=c.table,m=void 0===f?{}:f,v=c.securitySetting,y=void 0===v?{}:v,g=useI18n().t;return l().useEffect((function(){window._flow_form_httpCache_&&(window._flow_form_httpCache_=Xu().omit(window._flow_form_httpCache_,["assignUsers","assignRoles"]))}),[]),l().useEffect((function(){var t,n,r={},o=(null==m?void 0:m.id)||(null==m||null===(t=m.value)||void 0===t||null===(n=t.value)||void 0===n?void 0:n.split(".")[2]);Xu().forEach(p,(function(e){(e.view||e.edit||e.need)&&(r[e.key]=e)}));var i,l,c,s=null==p?void 0:p.filter((function(e){return"User"==e.relateTo}));Xu().isEmpty(s)||(r.userFields={title:_r("用户组"),type:"object",nodeType:"user",properties:{}},null==s||s.forEach((function(e){r.userFields.properties[e.key]=e}))),o&&(r.table={type:"object",title:_r("表"),nodeType:"table",properties:(0,e.Z)({},o,{type:"object",title:(null==m?void 0:m.name)||(null===(i=m.value)||void 0===i||null===(l=i.name)||void 0===l||null===(c=l.split("."))||void 0===c?void 0:c.slice(-1)),properties:p})}),r.approvalStatus={type:"string",title:_r("审批状态")},r.agreeUser={type:"array",title:_r("审批通过人"),nodeType:"user",items:{type:"object",properties:{"#$user":{type:"object",title:_r("通过人"),nodeType:"user",properties:{id:{type:"string",title:"id"},name:{type:"string",title:_r("用户名")}}}}}},r.disagreeUser={type:"array",title:_r("审批拒绝人"),nodeType:"user",items:{type:"object",properties:{"#$user":{type:"object",title:_r("拒绝人"),nodeType:"user",properties:{id:{type:"string",title:"id"},name:{type:"string",title:_r("用户名")}}}}}},y.eSignature&&(r.signatures={type:"array",title:_r("电子签名")},Xu().isEmpty(y.authorizer)||(r.authorizers={type:"array",title:_r("授权人"),items:{type:"string"}})),a(u,r)}),[JSON.stringify(p),JSON.stringify(m),JSON.stringify(y)]),l().createElement(Ec,r({},n,{title:n.title||n.data.name||g("审批"),cardProps:{headStyle:{background:_m.background,color:"#FFF"}}}),l().createElement("span",null,g("审批人"),": "),l().createElement(Cm,{assignSetting:s}),l().createElement("br",null),l().createElement("span",null,g("审批形式"),": "),l().createElement("span",{style:{color:_m.background}},g(null===(o=Em.find((function(e){return e.value==d})))||void 0===o?void 0:o.title)))},paramSchema:xm,style:_m,requiredInfo:function(e){var t,n="",r=e.data,o=r.assignSetting,i=r.table,l=r.approveFields,a=r.approveType,u=r.securitySetting;return a||(n=_r("审批形式 ")),!Xu().isEmpty(i)&&Xu().isEmpty(l)&&(n+=_r("审批字段 ")),Xu().isEmpty(o)&&(n+=_r("审批人 ")),null!=u&&u.validateHost&&Xu().isEmpty(Xu().compact(null==u||null===(t=u.host)||void 0===t?void 0:t.map((function(e){return null==e?void 0:e.ip}))))&&(n+=_r("IP地址")),n}};function Sm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Am(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Sm(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sm(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var jm={background:"#ECBE0A"},Dm={type:"object",properties:{name:{type:"string",title:_r("名称")},assignSetting:{type:"array",title:_r("抄送用户"),items:{type:"object",properties:{type:{title:_r("抄送用户"),type:"string",enum:["user","filter","templateUser"],enum_title:[_r("用户"),_r("范围筛选"),_r("前序节点变量用户")]},data:{type:"object",title:_r("用户"),field:{attrs:{groupSize:{labelCol:{span:0},wrapperCol:{span:24}}},component:gm}}}},field:{ButtonBody:Om}},table:{type:"object",title:_r("抄送内容"),field:{extendFlow:{show:!0,type:"table"}}},sendFields:{title:_r("抄送字段"),type:"array",items:{},field:{component:function(n){var i=n.input,u=i.value,c=void 0===u?[]:u,s=i.onChange,d=(0,t.use)("form").form,p=l().useState(),f=(0,o.Z)(p,2),m=f[0],v=f[1],y=useI18n().t;l().useEffect((function(){d.useField("table",(function(e){var t,n,r,o=e.value;o?v((null==o?void 0:o.id)||(null==o||null===(t=o.value)||void 0===t||null===(n=t.value)||void 0===n?void 0:n.split(".")[2])||(null==o||null===(r=o.value)||void 0===r?void 0:r.value)):s(null)}))}),[]);var g=function(t,n,r){var o=t.target.checked,i=c.findIndex((function(e){return e.key==n.key})),l=Am(Am({},n),{},(0,e.Z)({},r,o));c&&c.splice(i,1,l),s((0,Wu.Z)(c))},h=[{title:"",dataIndex:"title",key:"title"},{title:y("查看"),dataIndex:"view",key:"view",align:"center",render:function(e,t){return l().createElement(a.Checkbox,{checked:e,onChange:function(e){return g(e,t,"view")}})}}];return l().createElement(sm,r({},n,{columns:h,tableId:m}))}}}},required:["table","sendFields"],formEffect:function(e){e.useField("table",(function(t){var n=t.value;e.setFieldData("sendFields",{display:!!n})}))}};const Pm={title:_r("抄送"),icon:"",category:["人工节点"],component:function(n){var o,i=(0,t.use)("FlowContext"),a=(i.context,i.updateOutputValues,i.updateOutputSchema),u=n.id,c=n.data,s=(c.name,c.assignSetting),d=c.sendFields,p=c.table,f=void 0===p?{}:p,m=useI18n().t;return l().useEffect((function(){window._flow_form_httpCache_&&(window._flow_form_httpCache_=_.omit(window._flow_form_httpCache_,["assignUsers","assignRoles"]))}),[]),l().useEffect((function(){var t,n,r,o,i,l={},c=(null==f?void 0:f.id)||(null==f||null===(t=f.value)||void 0===t||null===(n=t.value)||void 0===n?void 0:n.split(".")[2]);_.forEach(d,(function(e){e.view&&(l[e.key]=e)})),c&&(l.table={type:"object",title:_r("表"),nodeType:"table",properties:(0,e.Z)({},c,{type:"object",title:(null==f?void 0:f.name)||(null===(r=f.value)||void 0===r||null===(o=r.name)||void 0===o||null===(i=o.split("."))||void 0===i?void 0:i.slice(-1)),properties:d})}),a(u,l)}),[JSON.stringify(d),JSON.stringify(f)]),l().createElement(Ec,r({},n,{title:n.title||n.data.name||m("抄送"),cardProps:{headStyle:{background:jm.background,color:"#FFF"}}}),l().createElement("span",null,m("抄送用户"),": "),l().createElement(Cm,{assignSetting:s}),l().createElement("br",null),l().createElement("span",null,m("抄送内容"),": "),l().createElement("span",{style:{color:jm.background,wordWrap:"break-word"}},(null==f?void 0:f.name)||(null==f||null===(o=f.value)||void 0===o?void 0:o.name)))},paramSchema:Dm,style:jm,requiredInfo:function(e){var t="",n=e.data,r=n.assignSetting,o=n.table,i=n.sendFields;return _.isEmpty(o)&&(t=_r("抄送内容,")),_.isEmpty(i)&&(t+=_r("抄送字段,")),_.isEmpty(r)&&(t+=_r("抄送用户")),t}};function Tm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fm(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Tm(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tm(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Lm={background:"#ECBE0A"},Bm={type:"object",properties:{name:{type:"string",title:_r("名称")},assignSetting:{type:"array",title:_r("填写用户"),items:{type:"object",properties:{type:{title:_r("填写用户"),type:"string",enum:["user","filter","templateUser"],enum_title:[_r("用户"),_r("范围筛选"),_r("前序节点变量用户")]},data:{type:"object",title:_r("用户"),field:{attrs:{groupSize:{labelCol:{span:0},wrapperCol:{span:24}}},component:function(e){return l().createElement(gm,r({},e,{roleType:"flowtask.fillin"}))}}}}},field:{ButtonBody:Om}},table:{type:"object",title:_r("填写表"),fieldType:"table",field:{extendFlow:{show:!0,type:"table"}}},buttonText:{type:"string",title:_r("提交按钮文字")},isUpdate:{type:"boolean",title:_r("数据更新到表"),field:{effect:function(e,t){var n=e.value,r=t.getState().values.type;setTimeout((function(){t.setFieldData("type",{display:!!n}),t.setFieldData("selectRecord",{display:!!n&&"update"===r})}))}}},type:{type:"string",title:_r("更新方式"),enum:["add","update"],enum_title:[_r("新增记录"),_r("更新记录")],field:{effect:function(e,t){var n=e.value,r=t.getState().values.isUpdate;setTimeout((function(){t.setFieldData("selectRecord",{display:!!r&&"update"===n})}))}}},selectRecord:{type:"string",title:_r("记录选择"),field:{component:ys}},fillInFields:{title:_r("填写字段"),type:"array",items:{},field:{component:function(n){var i=n.input,u=i.value,c=void 0===u?[]:u,s=i.onChange,d=(0,t.use)("form").form,p=l().useState(),f=(0,o.Z)(p,2),m=f[0],v=f[1],y=useI18n().t;l().useEffect((function(){d.useField("table",(function(e){var t,n,r,o,i=e.value;i?v((null==i?void 0:i.id)||(null==i||null===(t=i.value)||void 0===t||null===(n=t.value)||void 0===n||null===(r=n.split("."))||void 0===r?void 0:r[2])||(null==i||null===(o=i.value)||void 0===o?void 0:o.value)):s(null)}))}),[]);var g=function(t,n,r){var o=t.target.checked,i=c.findIndex((function(e){return e.key==n.key})),l=Fm(Fm({},n),{},"edit"==r&&o?(0,e.Z)({view:o},r,o):"view"!=r||o?(0,e.Z)({},r,o):(0,e.Z)({edit:o},r,o));c&&c.splice(i,1,l),s((0,Wu.Z)(c))},h=[{title:"",dataIndex:"title",key:"title"},{title:y("查看"),dataIndex:"view",key:"view",align:"center",render:function(e,t){return l().createElement(a.Checkbox,{checked:e,onChange:function(e){return g(e,t,"view")}})}},{title:y("编辑"),dataIndex:"edit",key:"edit",render:function(e,t){return l().createElement(a.Checkbox,{checked:e,onChange:function(e){return g(e,t,"edit")}})}}];return l().createElement(sm,r({},n,{columns:h,tableId:m}))}}}},required:["table","fillInFields","type","selectRecord"],formEffect:function(e){e.useField("table",(function(t){var n,r,o,i,l,a,u,c=t.value;e.setFieldData("fillInFields",{display:!!c});var s=e.getState().initialValues;(null==c||null===(n=c.value)||void 0===n||null===(r=n.value)||void 0===r||null===(o=r.split("."))||void 0===o?void 0:o[2])!=(null==s||null===(i=s.table)||void 0===i||null===(l=i.value)||void 0===l||null===(a=l.value)||void 0===a||null===(u=a.split("."))||void 0===u?void 0:u[2])&&e.change("selectRecord",null)}))}};const Mm={title:_r("填写"),icon:"",category:["人工节点"],component:function(n){var o,i=(0,t.use)("FlowContext").updateOutputSchema,a=n.id,u=n.data,c=(u.name,u.assignSetting),s=u.fillInFields,d=u.table,p=void 0===d?{}:d,f=useI18n().t;return l().useEffect((function(){window._flow_form_httpCache_&&(window._flow_form_httpCache_=Xu().omit(window._flow_form_httpCache_,["assignUsers","assignRoles"]))}),[]),l().useEffect((function(){var t,n,r,o={},l=(null==p?void 0:p.id)||(null==p||null===(t=p.value)||void 0===t||null===(n=t.value)||void 0===n||null===(r=n.split("."))||void 0===r?void 0:r[2]);Xu().forEach(s,(function(e){(e.view||e.edit)&&(o[e.key]=e)}));var u,c,d,f=null==s?void 0:s.filter((function(e){return"User"==e.relateTo}));Xu().isEmpty(f)||(o.userFields={title:_r("用户组"),type:"object",nodeType:"user",properties:{}},null==f||f.forEach((function(e){o.userFields.properties[e.key]=e}))),l&&(o.table={type:"object",title:_r("表"),nodeType:"table",properties:(0,e.Z)({},l,{type:"object",title:(null==p?void 0:p.name)||(null===(u=p.value)||void 0===u||null===(c=u.name)||void 0===c||null===(d=c.split("."))||void 0===d?void 0:d.slice(-1)),properties:s})}),o.agreeUser={type:"array",title:_r("填写人"),nodeType:"user",items:{type:"object",properties:{"#$user":{type:"object",title:_r("用户"),nodeType:"user",properties:{id:{type:"string",title:"id"},name:{type:"string",title:_r("用户名")}}}}}},i(a,o)}),[JSON.stringify(s),JSON.stringify(p)]),l().createElement(Ec,r({},n,{title:n.title||n.data.name||f("填写"),cardProps:{headStyle:{background:Lm.background,color:"#FFF"}}}),l().createElement("span",null,f("填写用户"),": "),l().createElement(Cm,{assignSetting:c}),l().createElement("br",null),l().createElement("span",null,f("填写了")," ",(null===(o=Xu().filter(s,(function(e){return e.edit||e.need})))||void 0===o?void 0:o.length)||0," ",f("个字段")," "))},paramSchema:Bm,style:Lm,requiredInfo:function(e){var t="",n=e.data,r=n.assignSetting,o=n.table,i=n.fillInFields,l=n.isUpdate,a=n.type,u=n.selectRecord;return Xu().isEmpty(o)&&(t=_r("填写表,")),Xu().isEmpty(i)?t+=_r("填写字段,"):Xu().find(i,(function(e){return e.edit||e.need}))||(t+=_r("填写字段可编辑项,")),Xu().isEmpty(r)&&(t+=_r("填写用户")),l&&(a||(t+=_r("更新方式")),"update"==a&&Xu().isEmpty(u)&&(t+=_r("记录选择"))),t}},Nm={flowUserApprove:km,flowUserCC:Pm,flowUserFillin:Mm};function Im(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rm(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Im(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Im(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Zm=function(e){var t=e.dataSource,n=e.getParamList,r=e.showMockBody,o=void 0===r||r,i=useI18n().t,u=function(e){return l().createElement("div",{style:{maxHeight:200,overflowY:"auto"}},e)},c=[{title:i("参数名"),dataIndex:"name",key:"name",render:function(e,t){return l().createElement("div",{style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:200}},l().createElement(a.Tooltip,{placement:"topLeft",title:function(){return u(e)}},e))}},{title:i("类型"),dataIndex:"type",key:"type",width:80},{title:i("参考值"),dataIndex:"example",key:"example",render:function(e,t){var n="布尔"==t.type?null==e?void 0:e.toString():e;return l().createElement("div",{style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:200}},l().createElement(a.Tooltip,{title:function(){return u(n)}},n))}}];return l().createElement(l().Fragment,null,l().createElement(a.Table,{size:"small",dataSource:t,columns:c,scroll:{x:"100%",y:350},pagination:!1}),l().createElement("div",{style:{fontSize:12,margin:"10px 0",color:"#aaa"}},i("向URL发送请求测试获取参数列表；请求中的动态参数将取测试值")),l().createElement(a.Button,{type:"primary",onClick:n},i("发送请求")),o?l().createElement("div",{style:{fontSize:12,margin:"10px 0",color:"#aaa"}},"body中值绑定变量时使用模拟值发送请求"):null)};function qm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zm(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?qm(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qm(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Um={background:"#54ABCB"},Gm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;if("字符串"==t)return"string";if("数字"==t)return"number";if("数组"==t)return"array";if("布尔"==t)return"boolean";if("未知"==t)try{var n=e.example&&JSON.parse(e.example);return(0,wd.Z)(n)}catch(e){return"string"}return"string"},$m={groupSize:{labelCol:{span:0},wrapperCol:{span:24}}},Ym={type:"object",properties:{name:{type:"string",title:_r("名称")},method:{type:"string",title:_r("请求方式"),enum:["GET","POST"],field:{effect:function(e,t){var n=e.value;setTimeout((function(){t.setFieldData("body",{display:"POST"===n}),"POST"!==n&&t.change("body",null)}))}}},url:{type:"string",title:"Webhook URL",fieldType:"input",field:{extendFlow:{show:!0,limit:["string","number","boolean"]}}},mustSuccess:{type:"boolean",title:_r("在请求不成功时报错")},headers:{title:"headers",type:"array",field:{ButtonBody:function(e){var t,n=e.input,r=e.index,o=e.inputName;return(null==n||null===(t=n.value[r])||void 0===t?void 0:t.key)||o}},items:{type:"object",properties:{key:{type:"string",title:"Key",field:{attrs:{placeholder:"Key"}}},value:{type:"string",title:_r("值"),fieldType:"input",field:{extendFlow:{show:!0,limit:["string","number","boolean"]}}}}}},body:{title:"Body",type:"object",properties:{type:{type:"string",enum:["key-value pairs","raw(application/json)"],field:{effect:function(e,t){var n=e.value;setTimeout((function(){t.setFieldData("body.keyVal",{display:"key-value pairs"===n}),t.setFieldData("body.raw",{display:"raw(application/json)"===n}),"key-value pairs"===n?t.change("body.raw",null):t.change("body.keyVal",null)}))},attrs:$m}},keyVal:{type:"array",title:"body",items:{type:"object",properties:{key:{type:"string",title:"Key",field:{attrs:{placeholder:"Key"}}},value:{type:"string",title:_r("值"),fieldType:"input",field:{extendFlow:{show:!0},effect:function(e,t){var n=e.value,r=e.name.replace("value","mockValue");setTimeout((function(){var e;t.setFieldData(r,{display:!(!n||!n.bind||gs(n)==(null===(e=n.value)||void 0===e?void 0:e[0]))})}))}}},mockValue:{type:"string",title:_r("模拟值")}}},field:{attrs:$m,ButtonBody:function(e){var t,n=e.input,r=e.index,o=e.inputName;return(null==n||null===(t=n.value[r])||void 0===t?void 0:t.key)||o}}},raw:{type:"string",title:"body",fieldType:"input",field:{extendFlow:{show:!0},attrs:$m,effect:function(e,t){var n=e.value;setTimeout((function(){var e;t.setFieldData("body.mockRaw",{display:!(!n||!n.bind||gs(n)==(null===(e=n.value)||void 0===e?void 0:e[0]))})}))}}},mockRaw:{type:"string",title:_r("模拟值")}}},paramList:{type:"array",title:_r("返回参数列表"),items:{},field:{component:function(n){var r=n.input,i=r.onChange,u=r.value,c=(0,t.use)("form").form,s=useI18n().t,d=l().useState(),p=(0,o.Z)(d,2),f=p[0],m=p[1];return l().useEffect((function(){c.useEffect((function(e){var t=e.values;m(t)}))}),[]),l().createElement(Zm,{dataSource:u,getParamList:function(){var n,r,o=_.omit(f,["name","seq","paramList"]);if(o=_.mapValues(o,(function(e){return gs(e)})),"raw(application/json)"==(null===(n=o.body)||void 0===n?void 0:n.type)){var l,u,c,d,p=null!==(l=o.body)&&void 0!==l&&l.raw&&null!==(u=o.body)&&void 0!==u&&null!==(c=u.raw)&&void 0!==c&&c.bind?o.body.mockRaw:null===(d=o.body)||void 0===d?void 0:d.raw;try{o.body=p&&JSON.parse(p)}catch(e){}}else{var m,v;o.body=null===(m=o.body)||void 0===m||null===(v=m.keyVal)||void 0===v?void 0:v.reduce((function(t,n){var r,o,i;return null!=n&&n.key?null!=n&&null!==(r=n.value)&&void 0!==r&&r.bind&&gs(null==n?void 0:n.value)!=(null==n||null===(o=n.value)||void 0===o||null===(i=o.value)||void 0===i?void 0:i[0])?Rm(Rm({},t),{},(0,e.Z)({},n.key,null==n?void 0:n.mockValue)):Rm(Rm({},t),{},(0,e.Z)({},n.key,gs(null==n?void 0:n.value))):t}),{})}o.headers=null===(r=o.headers)||void 0===r?void 0:r.reduce((function(t,n){return null!=n&&n.key?Rm(Rm({},t),{},(0,e.Z)({},n.key,gs(n.value))):null}),{}),(0,t.api)({name:"engine/webhook/test"}).fetch("",{method:"POST",body:JSON.stringify(o)}).then((function(e){var t=e.json;i(t)})).catch((function(e){i(null),a.message.error(s("发送请求失败"))}))},showMockBody:"POST"==(null==f?void 0:f.method)})}}}},required:["method","url"]};const Hm={title:"webhook",icon:"",category:["高级节点"],component:function(n){var o,i,a=(0,t.use)("FlowContext").updateOutputSchema,u=n.id,c=n.data,s=useI18n().t;return l().useEffect((function(){var t,n=(null==c||null===(t=c.paramList)||void 0===t?void 0:t.reduce((function(t,n){return r=n.example,moment(r).isValid()&&/^[0-9]{4}-[0-9]{2}-[0-9]{2}/.test(r)?zm(zm({},t),{},(0,e.Z)({},n.name,{title:n.name,type:Gm(n),format:"datetime"})):zm(zm({},t),{},(0,e.Z)({},n.name,{title:n.name,type:Gm(n)}));var r}),{}))||{};n.statusCode={title:_r("请求状态码"),type:"number"},a(u,n)}),[JSON.stringify(null==c?void 0:c.paramList)]),l().createElement(Ec,r({},n,{title:n.title||n.data.name||"webhook",cardProps:{headStyle:{background:Um.background,color:"#FFF"}}}),l().createElement("span",null,s("请求方式"),": "),l().createElement("span",{style:{color:Um.background}},c.method),l().createElement("br",null),null!=c&&null!==(o=c.paramList)&&void 0!==o&&o.length?l().createElement(l().Fragment,null,l().createElement("span",null,s("已配置"),": "),l().createElement("span",{style:{color:Um.background,overflowWrap:"break-word"}},s("{{count}}个返回值",{count:null==c||null===(i=c.paramList)||void 0===i?void 0:i.length})),l().createElement("br",null)):"")},paramSchema:Ym,initParams:{method:"GET"},style:Um};function Vm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wm(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Vm(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vm(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Km(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xm=function(e){var t,n=nf(e),r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Km(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Km(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(a)throw i}}}}(_.keys((null==n?void 0:n.properties)||{}));try{for(r.s();!(t=r.n()).done;){var o=t.value,i=null==n?void 0:n.properties[o];"表格"===(null==i?void 0:i.config)&&delete i.field.extendFlow}}catch(e){r.e(e)}finally{r.f()}return n},Jm={background:"#54ABCB"},Qm=function(e){var t,n,o,i,a,u,c=e.input,s=e.command;return l().createElement(Cc.C,{is:"Device.CommandValue",input:{value:c.value,onChange:function(e){c.onChange(e)}},commandV:{formSchema:(t=null==s?void 0:s.formSchema,null!=t&&t.schema?t.schema=Xm(null==t?void 0:t.schema):null!=t&&null!==(n=t.properties)&&void 0!==n&&null!==(o=n.arr)&&void 0!==o&&null!==(i=o.items)&&void 0!==i&&i.schema?t.properties.arr.items.schema=Xm(t.properties.arr.items.schema):null!=t&&null!==(a=t.properties)&&void 0!==a&&null!==(u=a.arr)&&void 0!==u&&u.items&&(t.properties.arr.items.field={extendFlow:{show:!0}}),t),commandForms:s.form},customGroup:function(e){return l().createElement(Cc.C,r({is:"Flow.BindDataGroup"},e))}})},ev={type:"object",properties:{type:{type:"string",title:_r("指令类型"),enum:["table","tableData"],enum_title:[_r("设备表指令"),_r("设备指令")],field:{effect:function(e,t){var n=e.value,r=t.getState().values;setTimeout((function(){t.setFieldData("table",{display:"table"===n}),t.setFieldData("tableData",{display:"tableData"===n}),t.setFieldData("command",{display:!!n}),t.setFieldData("commandValue",{display:!!n}),t.setFieldData("commandStyle",{display:"table"===n}),t.setFieldData("commandBatchType",{display:"table"===n}),t.setFieldData("commandNodes",{display:"table"===n&&"tableData"===r.commandStyle}),t.setFieldData("commandNodeFilter",{display:"table"===n&&"tableData"===r.commandStyle}),t.setFieldData("retry",{display:"table"===n}),t.setFieldData("paramsScript",{display:"table"===n})}))}}},table:{type:"object",title:_r("设备表"),fieldType:"table",field:{func:"device"}},tableData:{type:"object",title:_r("设备"),fieldType:"tableData",field:{func:"device",required:!0,depend:"table",extendFlow:{show:!0,type:"node"}}},commandStyle:{type:"string",title:_r("设备选择方式"),enum:["query","node"],enum_title:[_r("范围筛选"),_r("固定设备")],field:{effect:function(e,t){var n=e.value,r=t.getState().values;setTimeout((function(){t.setFieldData("commandNodes",{display:"node"===n&&"table"===r.type}),t.setFieldData("commandNodeFilter",{display:"query"===n&&"table"===r.type})}))}}},commandNodes:{title:_r("设备"),type:"array",items:{},fieldType:"tableData",field:{func:"device",depend:"table"}},commandNodeFilter:{title:_r("筛选条件"),type:"object",properties:{},unbind:!0,field:{component:function(e){var n=e.input,r=void 0===n?{}:n,o=r.value,i=void 0===o?{}:o,a=r.onChange,u=(0,t.use)("form",(function(e){return{table:e.values&&e.values.table}})).table,c=(0,t.use)("table.schema",null==u?void 0:u.id).schema,s=void 0===c?{type:"object",properties:{}}:c,d=i.cond;return l().createElement(Cc.C,{is:"QueryEditor",schema:s,input:{value:d,onChange:function(e){a({cond:e,viewSchema})}},DataWrap:Mc})}}},commandBatchType:{type:"string",title:_r("顺序"),enum:["async","sync","all"],enum_title:[_r("并行"),_r("串行"),_r("全部")],field:{placeholder:"默认并行"}},command:{type:"object",title:_r("指令"),field:{component:function(e){var n=e.input,r=n.onChange,i=n.value,u=(e.option,oc("table")),c=oc("tableData"),s=oc("type"),d=l().useState([]),p=(0,o.Z)(d,2),f=p[0],m=p[1];l().useEffect((function(){var e,n,r,o,i;o=null==u?void 0:u.id,i=null!=c&&c.bind?null==c||null===(e=c.value)||void 0===e||null===(n=e.value)||void 0===n?void 0:n.split(".")[1]:null==c?void 0:c.id,"tableData"===s?function(e,n){e&&n&&(0,t.api)({name:"core/t/".concat(e,"/d/command")}).getOrigin(n).then((function(e){e.status;var t=e.json;m(t&&t.map((function(e){return Wm(Wm({},e),{},{tableDataId:n})}))||[])}))}(null==c||null===(r=c.table)||void 0===r?void 0:r.id,i):"table"===s?function(e){e&&(0,t.api)({name:"core/t/schema/command"}).getOrigin(e).then((function(e){e.status;var t=e.json;m(t)}))}(o):m([])}),[u,c]);var v=void 0;return i&&_.isPlainObject(i)&&(v=i.id),l().createElement(a.Select,{value:v,onChange:function(e){var t=(f||[]).filter((function(t){return t.id==e}))[0];r(t||null)},allowClear:!0},f&&f.length>0?f.map((function(e){var t=e.title||e.name,n=t&&t.length;return l().createElement(a.Select.Option,{value:e.id},v==e.id&&n>10?l().createElement(a.Tooltip,{title:t,placement:"left"},l().createElement("span",{style:{fontSize:12}},t)):t)})):null)}}},commandValue:{type:"string",title:"值",field:{component:function(e){var t,n,o,i,a=useI18n().t,u=e.input,c=e.group,s=null!==(t=oc("command"))&&void 0!==t?t:{},d=s&&((null===(n=s.formSchema)||void 0===n||null===(o=n.schema)||void 0===o?void 0:o.type)||(null==s?void 0:s.form)&&(null==s||null===(i=s.form[0])||void 0===i?void 0:i.type));"select"===d&&(d="string"),"numSelect"===d&&(d="number");var p={type:"object",title:a("值"),field:{component:function(e){var t=e.input;return e.field,l().createElement(Qm,{command:s,input:t})}}};"string"!==d&&"number"!==d&&"boolean"!==d||(p.field.extendFlow={show:!0,limit:[d]}),"array"===d&&(p.items={});var f={type:"object",properties:{value:p}},m=function(e){u.onChange(e.value)},v={value:u.value},y=c||function(e){return l().createElement(Cc.C,r({is:"Flow.BindDataGroup"},e))};return l().useMemo((function(){return l().createElement(Cc.C,{is:"I18nSchemaForm",formKey:"model.".concat(JSON.stringify(s)),schema:f,initialValues:v,group:function(e){return l().createElement(y,r({},e,{label:null}))},component:function(e){return e.children},onSubmit:m,onChange:m})}),[JSON.stringify(s)])}}},retry:{type:"number",title:_r("重试次数")},signatures:{type:"string",title:_r("电子签名"),fieldType:"flow_calculator"},authorizers:{type:"string",title:_r("授权人"),fieldType:"flow_calculator"}},formEffect:function(e){var t=!1;e.useField("type",(function(n){n.value,t&&(e.change("table",null),e.change("tableData",null),e.change("command",null),e.change("commandValue",null),e.change("commandStyle",null),e.change("commandNodeFilter",null),e.change("commandNodes",null))})),e.useField("table",(function(n){n.value,t&&(e.change("tableData",null),e.change("command",null),e.change("commandValue",null))})),e.useField("command",(function(n){var r=n.value;t&&(e.change("commandValue",null),e.change("retry",(null==r?void 0:r.retry)||null),e.change("paramsScript",(null==r?void 0:r.paramsScript)||null))})),t=!0},required:["command"]};const tv={title:_r("执行指令"),icon:"",category:[_r("高级节点")],component:function(e){var n,o,i=(0,t.use)("FlowContext"),a=(i.context,i.updateOutputValues,i.updateOutputSchema,e.id,e.data),u=a.type,c=a.table,s=void 0===c?{}:c,d=a.tableData,p=a.command,f=void 0===p?{}:p,m=a.commandNodes,v=useI18n().t,y={table:v("设备表指令"),tableData:v("设备指令")};return l().createElement(Ec,r({},e,{title:e.title||e.data.name||"执行指令",cardProps:{headStyle:{background:Jm.background,color:"#FFF"}}}),l().createElement("div",null,l().createElement("span",null,v("指令类型"),": "),l().createElement("span",{style:{color:null==Jm?void 0:Jm.background}},y[u])),null!=s&&s.title?l().createElement("div",null,l().createElement("span",null,v("目标设备表"),": "),l().createElement("span",{style:{color:Jm.background}},null==s?void 0:s.title)):null,l().createElement("div",null,l().createElement("span",null,v("目标设备"),": "),l().createElement("span",{style:{color:Jm.background}},d?null==d?void 0:d.name:null===(n=m||[])||void 0===n||null===(o=n.map((function(e){return e.name})))||void 0===o?void 0:o.join(","))),l().createElement("div",null,l().createElement("span",null,v("目标指令"),": "),l().createElement("span",{style:{color:Jm.background}},null==f?void 0:f.name)))},paramSchema:ev,style:Jm};var nv={background:"#54ABCB"},rv={type:"object",properties:{name:{type:"string",title:_r("名称")},delay_type:{type:"string",title:_r("延时类型"),enum_title:[_r("指定日期"),_r("时间范围")],enum:["date","period"]},date:{type:"string",title:_r("延时时间"),fieldType:"datePicker",field:{extendFlow:{show:!0,limit:["time"]},component:function(e){var t,n,r;return l().createElement(a.DatePicker,{onChange:null==e||null===(t=e.input)||void 0===t?void 0:t.onChange,value:null!==(n=e.input)&&void 0!==n&&n.value?moment(null===(r=e.input)||void 0===r?void 0:r.value):null,format:"YYYY-MM-DD HH:mm:ss",disabledDate:function(e){return e&&e<moment().endOf("second")||e>moment(new Date((new Date).getTime()+87264e5)).startOf("day")},showTime:{defaultValue:moment("00:00:00","HH:mm:ss")},showNow:!1})}},description:_r("延时天数不能超过100天")},seconds:{type:"number",title:"秒",fieldType:"inputNumber",field:{component:function(e){var t=e.input,n=t.onChange,r=t.value;return l().createElement(a.InputNumber,{min:0,max:59,step:1,onChange:function(e){return n(Math.abs(Math.floor(e)))},placeholder:_t1("请输入数字"),value:r,style:{width:"100%"}})}}},minutes:{type:"number",title:"分",fieldType:"inputNumber",field:{component:function(e){var t=e.input,n=t.onChange,r=t.value;return l().createElement(a.InputNumber,{min:0,max:59,step:1,onChange:function(e){return n(Math.abs(Math.floor(e)))},placeholder:_t1("请输入数字"),value:r,style:{width:"100%"}})}}},hours:{type:"number",title:"时",fieldType:"inputNumber",field:{component:function(e){var t=e.input,n=t.onChange,r=t.value;return l().createElement(a.InputNumber,{min:0,max:23,step:1,onChange:function(e){return n(Math.abs(Math.floor(e)))},placeholder:_t1("请输入数字"),value:r,style:{width:"100%"}})}}},days:{type:"number",title:"天",formWidth:"100%",fieldType:"inputNumber",field:{component:function(e){var t=e.input,n=t.onChange,r=t.value;return l().createElement(a.InputNumber,{min:0,max:99,step:1,onChange:function(e){return n(Math.abs(Math.floor(e)))},placeholder:_t1("请输入数字"),value:r,style:{width:"100%"}})}},description:_r("延时天数不能超过100天")}},formEffect:function(e){["date","seconds","minutes","hours","days"].map((function(t){e.setFieldData(t,{display:!1})})),e.useField("delay_type",(function(t){switch(t.value){case"period":["seconds","minutes","hours","days"].map((function(t){e.setFieldData(t,{display:!0})})),e.setFieldData("date",{display:!1}),e.setFieldData("date",{field:{required:!1}}),e.change("date",null);break;case"date":["seconds","minutes","hours","days"].map((function(t){e.setFieldData(t,{display:!1}),e.change(t,null)})),e.setFieldData("date",{display:!0,field:{required:!0}})}}))},required:["delay_type"]};const ov={title:_r("延时"),icon:"",category:["高级节点"],component:function(e){var n,o,i,a=(0,t.use)("FlowContext"),u=(a.context,a.updateOutputValues,a.updateOutputSchema,e.id,e.data),c={date:_t1("指定日期"),period:_t1("时间范围")};return l().createElement(Ec,r({},e,{title:e.title||e.data.name||"webhook",cardProps:{headStyle:{background:nv.background,color:"#FFF"}}}),l().createElement("span",null,_t1("延时类型"),": "),l().createElement("span",{style:{color:nv.background}},c[null==u?void 0:u.delay_type]),l().createElement("br",null),l().createElement("span",null,_t1("延时时长"),": "),l().createElement("span",{style:{color:nv.background}},"date"==(null==u?void 0:u.delay_type)?null!=u&&null!==(n=u.date)&&void 0!==n&&n.bind?null==u||null===(o=u.date)||void 0===o||null===(i=o.value)||void 0===i?void 0:i.name:moment(null==u?void 0:u.date).format("YYYY-MM-DD HH:mm:ss")||"":(null!=u&&u.days?(null==u?void 0:u.days)+_t1("天"):"")+(null!=u&&u.hours?(null==u?void 0:u.hours)+_t1("时"):"")+(null!=u&&u.minutes?(null==u?void 0:u.minutes)+_t1("分"):"")+(null!=u&&u.seconds?(null==u?void 0:u.seconds)+_t1("秒"):"")))},paramSchema:rv,style:nv};var iv=__webpack_require__(1569);function lv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function av(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?lv(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lv(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var uv={background:"#54ABCB"},cv={type:"object",properties:{name:{type:"string",title:_r("名称")},body:{type:"array",title:"body",items:{type:"object",properties:{key:{type:"string",title:"Key",field:{attrs:{placeholder:"Key"}}},value:{type:"string",title:_r("值"),fieldType:"input",field:{extendFlow:{show:!0},effect:function(e,t){var n=e.value,r=e.name.replace("value","mockValue");setTimeout((function(){var e;t.setFieldData(r,{display:!(!n||!n.bind||gs(n)==(null===(e=n.value)||void 0===e?void 0:e[0]))})}))}}},mockValue:{type:"string",title:_r("模拟值")}}},field:{ButtonBody:function(e){var t,n=e.input,r=e.index,o=e.inputName;return(null==n||null===(t=n.value[r])||void 0===t?void 0:t.key)||o}}},opKey:{title:_r("操作标识"),type:"string",field:{component:function(e){var n=e.input,r=n.value,i=n.onChange,u=l().useState(),c=(0,o.Z)(u,2),s=c[0],d=c[1];return l().useEffect((function(){(0,t.api)({name:"ds/interface"}).query({limit:1e3,fields:["id","name","key"]},{}).then((function(e){var t=e.items;d(t)}))}),[]),l().createElement(a.Select,{value:r,onChange:i,labelInValue:!0,allowClear:!0},null==s?void 0:s.map((function(e){return l().createElement(a.Select.Option,{value:e.key},e.name)})))}}},mustSuccess:{type:"boolean",title:_r("在请求不成功时报错")},params:{type:"object",title:_r("返回参数"),field:{component:function(n){var r=n.input,i=r.onChange,u=r.value,c=(0,t.use)("form").form,s=useI18n().t,d=l().useState(),p=(0,o.Z)(d,2),f=p[0],m=p[1];return l().useEffect((function(){c.useEffect((function(e){var t=e.values;m(t)}))}),[]),l().createElement(l().Fragment,null,!_.isEmpty(u)&&l().createElement(Cc.C,{is:"Dashboard.VariableTree",rootName:s("返回参数"),data:u,nodeLabels:{body:s("响应体"),header:s("响应头"),statusCode:s("请求状态码")},onClick:function(){return null}}),l().createElement("div",{style:{fontSize:12,margin:"10px 0",color:"#aaa"}},s("向URL发送请求测试获取参数列表；请求中的动态参数将取测试值")),l().createElement(a.Button,{type:"primary",onClick:function(n){var r,o=null!=f&&f.body?f.body.reduce((function(t,n){var r,o,i;return null!=n&&n.key?null!=n&&null!==(r=n.value)&&void 0!==r&&r.bind&&gs(null==n?void 0:n.value)!=(null==n||null===(o=n.value)||void 0===o||null===(i=o.value)||void 0===i?void 0:i[0])?av(av({},t),{},(0,e.Z)({},n.key,null==n?void 0:n.mockValue)):av(av({},t),{},(0,e.Z)({},n.key,gs(null==n?void 0:n.value))):t}),{}):{};(0,t.api)({name:"engine/dataInterface/test"}).fetch("",{method:"POST",body:JSON.stringify({body:o,opKey:null===(r=f.opKey)||void 0===r?void 0:r.value})}).then((function(e){var t=e.json;i(t)})).catch((function(e){i(null)}))}},s("发送请求")),l().createElement("div",{style:{fontSize:12,margin:"10px 0",color:"#aaa"}},s("body中值绑定变量时使用模拟值发送请求")))}}}},required:["opKey"]};const sv={title:_r("数据接口"),icon:"",category:[_r("高级节点")],component:function(e){var n,o=(0,t.use)("FlowContext"),i=o.updateOutputSchema,a=(o.context,e.id),u=e.data,c=useI18n().t;return l().useEffect((function(){var e,t,n=null!=u&&null!==(e=u.params)&&void 0!==e&&e.body?iv.json(_r("响应体"),u.params.body):{},r=null!=u&&null!==(t=u.params)&&void 0!==t&&t.header?iv.json(_r("响应头"),u.params.header):{},o={title:_r("请求状态码"),type:"number"};i(a,{header:_.omit(r,"$schema"),body:_.omit(n,"$schema"),statusCode:o})}),[JSON.stringify(null==u?void 0:u.params)]),l().createElement(Ec,r({},e,{title:e.title||e.data.name||c("数据接口"),cardProps:{headStyle:{background:uv.background,color:"#FFF"}}}),l().createElement("span",null,c("操作标识"),": "),l().createElement("span",{style:{color:uv.background,overflowWrap:"break-word"}},(null==u||null===(n=u.opKey)||void 0===n?void 0:n.label)||""),l().createElement("br",null),_.isEmpty(null==u?void 0:u.params)?c("暂无返回参数"):c("已配置返回参数"))},paramSchema:cv,style:uv};var dv={background:"#54ABCB"},pv={type:"object",properties:{name:{type:"string",title:_r("名称")},range:{title:_r("迭代项"),type:"object",properties:{},field:{extendFlow:{show:!0,onlySelect:!0,mode:"single",limit:["array"]}}}},required:["range"]};const fv={title:_r("迭代"),icon:"",category:["高级节点"],component:function(e){var n,o,i=(0,t.use)("FlowContext"),a=i.context,u=void 0===a?{}:a,c=i.updateOutputSchema,s=e.id,d=e.data,p=void 0===d?{}:d,f=u.outputSchema,m=useI18n().t;return l().useEffect((function(){var e,t,n,r,o,i,l=null===(e=p.range)||void 0===e||null===(t=e.value)||void 0===t||null===(n=t.value)||void 0===n?void 0:n.replace(/\./g,".properties."),a=null===(r=Xu().get(f,l))||void 0===r?void 0:r.items,u=null==a?void 0:a.properties,d=(null==a?void 0:a.type)||"string",m=u?{value:{type:"object",title:_r("迭代值"),properties:null===(o=Xu().get(f,l))||void 0===o||null===(i=o.items)||void 0===i?void 0:i.properties},index:{type:"number",title:_r("索引")}}:{value:{type:d,title:_r("迭代值")},index:{type:"number",title:_r("索引")}};c(s,m)}),[JSON.stringify(p.range||{}),JSON.stringify(f||{})]),l().createElement(Ec,r({},e,{title:e.title||e.data.name||m("迭代"),cardProps:{headStyle:{background:dv.background,color:"#FFF"}}}),Xu().isEmpty(p.range)?m("暂无迭代项"):l().createElement(l().Fragment,null,l().createElement("span",null,m("迭代项"),": "),l().createElement("span",{style:{color:dv.background,overflowWrap:"break-word"}},null===(n=p.range)||void 0===n||null===(o=n.value)||void 0===o?void 0:o.name),l().createElement("br",null)))},paramSchema:pv,style:dv},mv=function(e){var t=e.cellKey,n=e.input,r=n.value,i=n.onChange,u=e.language,c=l().useState(!1),s=(0,o.Z)(c,2),d=s[0],p=s[1],f=l().useState(r||""),m=(0,o.Z)(f,2),v=m[0],y=m[1];return l().useEffect((function(){Xu().isNil(r)||""===r||y(r)}),[r,t]),l().createElement(l().Fragment,null,l().createElement(a.Button,{type:"default",size:"small",style:{height:32},onClick:function(e){return p(!0)}},l().createElement(Cc.Icon,{type:"code"}),_t1("编辑脚本")),l().createElement(a.Modal,{title:_t1("脚本代码"),visible:d,maskClosable:!1,width:"80%",onOk:function(e){i(v),p(!1)},onCancel:function(e){return p(!1)}},l().createElement(Cc.C,{is:"CodeEditor",language:u,value:v,width:"100%",height:"600",options:{roundedSelection:!1,readOnly:!1,minimap:{enabled:!1},cursorStyle:"line",automaticLayout:!1},defaultValue:"",onChange:y})))};function vv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yv(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?vv(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vv(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var gv={background:"#54ABCB"},hv={title:_r("执行脚本"),properties:{content:{title:_r("脚本信息"),type:"string",field:{component:function(e){return l().createElement(mv,r({},e,{language:"javascript"}))},defaultValue:'// 脚本中可以直接使用节点脚本变量中定义的参数,假设节点中定义了amount和count两个参数\n        console.log(amount)\n        console.log(count)\n        \n        // 执行自定义逻辑\n        let avg = amount / count\n        \n        // 输出参数是一个对象,key 为参数名称, value 为输出值, 类型必须与输出参数中设置的类型一致\n        return { "avg": avg } '}},inputObj:{title:_r("脚本变量"),type:"array",items:{type:"object",properties:{field:{type:"string",title:_r("变量名称")},value:{type:"string",title:_r("变量值"),fieldType:"input",field:{extendFlow:{show:!0}}}}},field:{ButtonBody:function(e){var t,n,r,o,i,l=e.input,a=e.index,u=e.inputName,c=(null==l||null===(t=l.value)||void 0===t?void 0:t[a])||{};return(null!==(n=c.field)&&void 0!==n&&n.bind?null===(r=c.field)||void 0===r||null===(o=r.value)||void 0===o||null===(i=o.map((function(e){return e.name||e})))||void 0===i?void 0:i.join(""):c.field)||u}}},outputObj:{type:"array",title:_r("输出对象参数列表"),items:{type:"object",properties:{field:{type:"string",title:_r("参数名称")},value:{type:"object",title:_r("参数类型"),field:{component:function(e){return l().createElement(Cc.C,r({is:"ParamTypeSchema"},e))}}}}},field:{ButtonBody:function(e){var t,n,r,o,i,l=e.input,a=e.index,u=e.inputName,c=(null==l||null===(t=l.value)||void 0===t?void 0:t[a])||{};return(null!==(n=c.field)&&void 0!==n&&n.bind?null===(r=c.field)||void 0===r||null===(o=r.value)||void 0===o||null===(i=o.map((function(e){return(null==e?void 0:e.name)||e})))||void 0===i?void 0:i.join(""):c.field)||u}}}},formEffect:function(e){}};const bv={title:_r("执行Node脚本"),category:["高级节点"],component:function(e){var n=e.id,o=e.data,i=void 0===o?{}:o,a=e.paramSchema,u=void 0===a?{}:a,c=(i.language,i.inputObj),s=i.outputObj,d=(0,t.use)("FlowContext").updateOutputSchema;return l().useEffect((function(){d(n,function(e){var t,n;return t=e.outputObj,n={},null==t||t.map((function(e){var t;e.field&&(n[e.field]=yv(yv({},(null===(t=e.value)||void 0===t?void 0:t.schema)||{}),{},{title:e.field}))})),n}(i))}),[JSON.stringify(s)]),l().createElement(Ec,r({},e,{title:"".concat(i.name?_t1(i.name)+"("+_t1(u.title)+")":_t1(i.type)),nodeType:"default",cardProps:{headStyle:{background:gv.background||"#4971E0",color:"#FFF"}}}),l().createElement(l().Fragment,null,l().createElement("span",null,_t1("脚本语言"),": "),l().createElement("span",{style:{color:gv.background}},"Node"),l().createElement("br",null)),_.isEmpty(c)?"":l().createElement(l().Fragment,null,l().createElement("span",null,_t1("脚本变量个数"),": "),l().createElement("span",{style:{color:gv.background}},null==c?void 0:c.length),l().createElement("br",null)),_.isEmpty(s)?"":l().createElement(l().Fragment,null,l().createElement("span",null,_t1("输出参数个数"),": "),l().createElement("span",{style:{color:gv.background}},null==s?void 0:s.length)))},paramSchema:hv,style:gv,permission:"handlerScript"};function wv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _v(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?wv(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wv(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ev={background:"#54ABCB"},Cv={type:"object",properties:{name:{type:"string",title:_r("名称")},algorithm:{type:"string",title:_r("算法选择"),field:{component:function(e){var n=e.input,o=(0,t.use)("FlowContext").context.algorithms,i=(null==o?void 0:o.map((function(e){return{value:e.id,label:e.name}})))||[];return l().createElement(a.Select,r({options:i},n))}}},inputParams:{type:"array",title:"输入参数",items:{type:"object",properties:{key:{type:"string",title:"Key",field:{component:function(e){var n=e.input,i=(0,t.use)("form").form,u=(0,t.use)("FlowContext").context.algorithms,c=l().useState([]),s=(0,o.Z)(c,2),d=s[0],p=s[1],f={string:"字符串",number:"数字",array:"数组",object:"对象",boolean:"布尔"};return l().useEffect((function(){i.useField("algorithm",(function(e){var t,n,r=e.value,o=null==u||null===(t=u.find((function(e){return e.id===r})))||void 0===t||null===(n=t.inputParams)||void 0===n?void 0:n.properties;o&&p(Object.keys(o).map((function(e){return{value:o[e].key,label:o[e].title+"（"+f[o[e].type]+"）"}})))}))}),[]),l().createElement(a.Select,r({options:d},n))}}},value:{type:"string",title:_r("值"),fieldType:"input",field:{extendFlow:{show:!0}}}}},field:{ButtonBody:function(e){var t,n=e.input,r=e.index,o=e.inputName;return(null==n||null===(t=n.value[r])||void 0===t?void 0:t.key)||o}}},outputParams:{type:"object",title:_r("输出参数"),field:{component:function(){var e=(0,t.use)("form").form,n=(0,t.use)("FlowContext").context.algorithms,r=l().useState({}),i=(0,o.Z)(r,2),a=i[0],u=i[1];return l().useEffect((function(){e.useField("algorithm",(function(e){var t,r=e.value,o=(null==n||null===(t=n.find((function(e){return e.id===r})))||void 0===t?void 0:t.outputParams)||{};u(o)}))}),[]),l().createElement(Cc.C,{is:"Dashboard.VariableTree",rootName:_t1("返回参数"),data:a,onClick:function(){return null}})}}}},required:["algorithm"]};const Ov={title:_r("算法"),category:["高级节点"],component:function(e){var n=e.id,i=e.data,a=void 0===i?{}:i,u=(e.paramSchema,a.algorithm),c=a.inputParams,s=(0,t.use)("FlowContext"),d=s.updateOutputSchema,p=s.setContext,f=l().useState([]),m=(0,o.Z)(f,2),v=m[0],y=m[1],g=null==v?void 0:v.find((function(e){return e.id===u}));return l().useEffect((function(){(0,t.api)({name:"algorithm/algorithm"}).query({fields:["inputParams","outputParams"]},{}).then((function(e){var t=e.items,n=void 0===t?[]:t;y(n),p((function(e){return _v(_v({},e),{},{algorithms:n})}))}))}),[]),l().useEffect((function(){var e;d(n,null==g||null===(e=g.outputParams)||void 0===e?void 0:e.properties)}),[JSON.stringify(null==g?void 0:g.outputParams)]),l().createElement(Ec,r({},e,{title:"".concat(a.name?_t1(a.name):_t1(a.type)),nodeType:"default",cardProps:{headStyle:{background:Ev.background||"#4971E0",color:"#FFF"}}}),_.isEmpty(g)?_t1("未选择算法"):l().createElement(l().Fragment,null,l().createElement("span",null,_t1("算法"),": "),l().createElement("span",{style:{color:Ev.background}},null==g?void 0:g.name),l().createElement("br",null)),_.isEmpty(c)?"":l().createElement(l().Fragment,null,l().createElement("span",null,_t1("输入参数个数"),": "),l().createElement("span",{style:{color:Ev.background}},null==c?void 0:c.length),l().createElement("br",null)),_.isEmpty(null==g?void 0:g.outputParams)?l().createElement("span",null,_t1("暂无返回参数")):l().createElement("span",null,_t1("已配置输出参数")))},paramSchema:Cv,style:Ev};function xv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kv(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?xv(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xv(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Sv={background:"#54ABCB"},Av={title:_r("执行脚本"),properties:{content:{title:_r("脚本信息"),type:"string",field:{component:function(e){return l().createElement(mv,r({},e,{language:"python"}))}}},inputObj:{title:_r("脚本变量"),type:"array",items:{type:"object",properties:{field:{type:"string",title:_r("变量名称")},value:{type:"string",title:_r("变量值"),fieldType:"input",field:{extendFlow:{show:!0}}}}},field:{ButtonBody:function(e){var t,n,r,o,i,l=e.input,a=e.index,u=e.inputName,c=(null==l||null===(t=l.value)||void 0===t?void 0:t[a])||{};return(null!==(n=c.field)&&void 0!==n&&n.bind?null===(r=c.field)||void 0===r||null===(o=r.value)||void 0===o||null===(i=o.map((function(e){return e.name||e})))||void 0===i?void 0:i.join(""):c.field)||u}}},outputObj:{type:"array",title:_r("输出对象参数列表"),items:{type:"object",properties:{field:{type:"string",title:_r("参数名称")},value:{type:"object",title:_r("参数类型"),field:{component:function(e){return l().createElement(Cc.C,r({is:"ParamTypeSchema"},e))}}}}},field:{ButtonBody:function(e){var t,n,r,o,i,l=e.input,a=e.index,u=e.inputName,c=(null==l||null===(t=l.value)||void 0===t?void 0:t[a])||{};return(null!==(n=c.field)&&void 0!==n&&n.bind?null===(r=c.field)||void 0===r||null===(o=r.value)||void 0===o||null===(i=o.map((function(e){return(null==e?void 0:e.name)||e})))||void 0===i?void 0:i.join(""):c.field)||u}}}},formEffect:function(e){var t=e.getState(),n=t.initialValues,r=t.values;e.useField("type",(function(t){(null==t?void 0:t.value)==(null==n?void 0:n.type)?e.change("content",r.content):"执行脚本"==t.value?e.change("content",'/** \n         * app.        {(\'函数方法\')}\n         * fields.     数据点ID\n         * arr为多个设备的数据点数据\n         * [{fields：数据点对象，modelID："设备表ID"，nodeId："设备ID"，time："数据点时间"，uid："设备uid"},...]\n         */\n\n        const handle = function (arr=[]) {\n          app.writePoints(\n            {\n              "fields": { "1": 78, "AIB": 44, "ewrerwe": 72, "tagid2": 3826, "tagid3": 4, "tagid4": 30 },\n              "modelId": "5c934d3b839a5547624eaebf",\n              "nodeId": "5c99f7f1510b61d56d094495"\n            }\n          )\n        }\n        Handle = handle'):(e.change("content",null),e.change("template",null))}))},required:["language"]};const jv={title:_r("执行Python脚本"),category:["高级节点"],component:function(e){var n=e.id,o=e.data,i=void 0===o?{}:o,a=e.paramSchema,u=void 0===a?{}:a,c=(i.language,i.inputObj),s=i.outputObj,d=(0,t.use)("FlowContext").updateOutputSchema;return l().useEffect((function(){d(n,function(e){var t,n;return t=e.outputObj,n={},null==t||t.map((function(e){var t;e.field&&(n[e.field]=kv(kv({},(null===(t=e.value)||void 0===t?void 0:t.schema)||{}),{},{title:e.field}))})),n}(i))}),[JSON.stringify(s)]),l().createElement(Ec,r({},e,{title:"".concat(i.name?_t1(i.name)+"("+_t1(u.title)+")":_t1(i.type)),nodeType:"default",cardProps:{headStyle:{background:Sv.background||"#4971E0",color:"#FFF"}}}),l().createElement(l().Fragment,null,l().createElement("span",null,_t1("脚本语言"),": "),l().createElement("span",{style:{color:Sv.background}},"Python"),l().createElement("br",null)),_.isEmpty(c)?"":l().createElement(l().Fragment,null,l().createElement("span",null,_t1("脚本变量个数"),": "),l().createElement("span",{style:{color:Sv.background}},null==c?void 0:c.length),l().createElement("br",null)),_.isEmpty(s)?"":l().createElement(l().Fragment,null,l().createElement("span",null,_t1("输出参数个数"),": "),l().createElement("span",{style:{color:Sv.background}},null==s?void 0:s.length)))},paramSchema:Av,style:Sv,permission:"handlerScript"};var Dv=function(e){var t=e.input,n=e.label,o=e.field,i=e.meta,u=e.group,c=function(e){return t.onChange(e.target.checked)};return u?l().createElement(u,{meta:i,input:t,field:o,tailLayout:!0},l().createElement(a.Checkbox,r({},o.attrs,{onChange:c,checked:!!t.value}),n)):l().createElement(a.Checkbox,r({},o.attrs,{onChange:c,checked:!!t.value}),n||(null==o?void 0:o.label))};Dv.useGroup=!1;const Pv=Dv;function Tv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fv(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Tv(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tv(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Lv=function e(t,n){var r=Fv(Fv({},t),{},{key:n+t.key,name:n+t.name});return t.fields&&t.fields.length>0&&(r.fields=t.fields.map((function(t){return e(t,n)}))),r},Bv=function(e){var t=e.fields,n=(e.meta,e.input),r=e.field,o=e.fieldsBuilder,i=(e.group,r.items),u=r.label,c=(r.schema,r.ButtonBody),s=r.ModalTitle,d=useI18n().t,p=Xu().isArray(n.value)?n.value:[],f=(n.onChange,n.value),m=(n.value,null);return t.length>0&&(m="fieldset"==i.type?t.map((function(e,r){p[r];var i=d(u)+" "+(r+1).toString(),a=o(e,r);return l().createElement("div",{key:r,style:{marginBottom:"5px"}},l().createElement(Cc.C,{is:"Dashboard.FormModalButton",title:s?l().createElement(s,{input:n,index:r,inputName:i}):i,ButtonBody:function(){return c?l().createElement(c,{input:n,index:r,inputName:i}):i},onRemove:function(e){t.remove(r),e.stopPropagation()},align:"left",offset:30,width:400,compStyle:!1},l().createElement("div",{className:"flow-editor-form",style:{padding:0}},l().Children.map(a,(function(e){return e})))))})):t.map((function(e,n){return l().createElement("div",{style:{position:"relative"}},l().createElement(Cc.Icon,{className:"array-delete",onClick:function(e){t.remove(n),e.stopPropagation()}}),o(e,n))}))),f&&Xu().isPlainObject(f)&&f.name,f&&Xu().isArray(f)&&f.map((function(e){return e&&e.origin&&e.origin.name})).join(","),l().createElement("div",null,m,l().createElement(a.Button,{size:"small",style:{width:"100%"},onClick:function(){t.push(i?{}:null)}},l().createElement(Cc.Icon,{type:"plus"})))};var Mv=["titleMap","onChange","defaultValue","dValue","multiple","value","checked","type"];const Nv=function(e){var t=e.titleMap,n=e.onChange,r=(e.defaultValue,e.dValue,e.multiple,e.value),o=e.checked,i=e.type,u=(Sc(e,Mv),a.Select.Option);"select"!==i&&(o=o?t[0].value:t[1].value);return l().createElement("div",null,t.length<4?l().createElement(a.Radio.Group,{className:"flow_radio",value:r,buttonStyle:"solid",onChange:function(e){return function(e){n(e.target.value)}(e)}},null==t?void 0:t.map((function(e,t){var n,r,o,i,u,c,s,d,p="string"!=typeof(null===(n=e.name)||void 0===n?void 0:n.icon)&&(null===(r=e.name)||void 0===r?void 0:r.icon),f=null!==(o=e.name)&&void 0!==o&&o.icon&&"string"==typeof(null===(i=e.name)||void 0===i?void 0:i.icon)?l().createElement(Cc.Icon,{type:null===(u=e.name)||void 0===u?void 0:u.icon}):null!==(c=null===(s=e.name)||void 0===s?void 0:s.title)&&void 0!==c?c:e.name;return l().createElement(a.Tooltip,{key:t,title:_t1(null===(d=e.name)||void 0===d?void 0:d.title)},l().createElement(a.Radio.Button,{value:e.value,style:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}},p?l().createElement(p,null):f))}))):l().createElement(a.Select,{value:r,onChange:n,style:{width:"100%",height:32}},t.map((function(e){return l().createElement(u,{value:e.value,key:e.value},_t1(e.name))}))))};function Iv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rv(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Iv(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Iv(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Zv=function(e){var t=e.children;return l().createElement(a.Form,{layout:"vertical"}," ",t," ")};var qv=a.Radio.Group;const zv=function(e){var t=e.input,n=e.field;return l().createElement(qv,r({},t,{value:t.value,onChange:function(e){t.onChange(e.target.value)}}),n.titleMap.map((function(e){return l().createElement(a.Radio,{value:e.value,checked:e.value==t.value},_t1(e.name))})))};function Uv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gv(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Uv(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Uv(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}xadminI18n;var $v=a.Select.Option;const Yv=function(e){var t=e.input,n=e.label,o=e.field;return l().createElement(a.Select,r({style:Gv({minWidth:o.width||150},o.style),allowClear:!0,placeholder:n},t),(0,Wu.Z)(o.titleMap).map((function(e){return l().createElement($v,{key:e.value,value:e.value},_t1(e.name))})))};var Hv=a.Radio.Button,Vv=a.Radio.Group;const Wv=function(e){var t=e.input,n=e.field;return l().createElement(Vv,r({buttonStyle:"solid",style:{marginRight:35}},e,t,{value:t.value,onChange:function(e){t.onChange(e.target.value)}}),n.titleMap.map((function(e){return l().createElement(Hv,{value:e.value},_t1(e.name))})))};var Kv={array:{component:function(e){var t=e.input,r=e.label,o=e.meta,i=e.field,a=e.option,u=e.group,c=i.itemsRender||Bv;"string"==typeof c&&(c=n().load_dict("array_render")[c]);var s=i.items;return i.label=_t1(r),l().createElement(Qp.FieldArray,{name:i.name,label:_t1(r),meta:o,input:t,component:c,field:i,group:u,fieldsBuilder:function(e,t){var n=s.fields?s.fields.map((function(t){return Lv(t,e+".")})):[Fv(Fv({},s),{},{key:e,name:e,label:s.label+" "+(t+1)})];return(0,Qp.objectBuilder)(n,s.render,a)}})}},select:{component:function(e){var t,n=Yv,r=e.field,o=e.schema;return(null==r||null===(t=r.titleMap)||void 0===t?void 0:t.length)<5&&(n=Wv,"radio"==(null==o?void 0:o.field_type)&&(n=zv),"radioBtn"==(null==o?void 0:o.field_type)&&(n=Wv)),"select"==(null==o?void 0:o.field_type)&&(n=Yv),l().createElement(n,e)},parse:function(e){return e}},number:{component:function(e){var t=e.input,n=e.input,o=n.onChange,i=n.value,u=e.field,c=e.field,s=c.schema,d=s.minimum,p=s.maximum,f=c.suffix,m=c.placeholder,v=c.inline,y=!(null==d||!d.toString())&&i<=d,g=!(null==p||!p.toString())&&i>=p,h=function(e,t){var n=e.toString().split(".")[1]&&e.toString().split(".")[1].length||0;return Xu().round(e+t,n)};return l().createElement(l().Fragment,null,v?l().createElement(a.Row,null,l().createElement(a.InputNumber,r({style:{width:"100%"},value:i,min:d,max:p,placeholder:_t1(m),formatter:function(e){return e&&f?"".concat(e+f):e},parser:function(e){return e.replace("".concat(f),"")},onChange:o},u.attrs))):l().createElement(a.Row,{gutter:2},l().createElement(a.Col,{span:16},l().createElement(a.InputNumber,r({style:{width:"100%"},value:i,min:d,max:p,onChange:o,placeholder:_t1(m),name:t.name||null,formatter:function(e){return e&&f?"".concat(e+f):e},parser:function(e){return e.replace("".concat(f),"")}},u.attrs))),l().createElement(a.Col,{span:8},l().createElement(a.Row,{className:"input-number"},l().createElement(a.Col,{span:12,style:{textAlign:"right"}},l().createElement(a.Button,{onClick:function(){return o(h(i||0,-1))},disabled:y},l().createElement(Cc.Icon,{type:"minus"}))),l().createElement(a.Col,{span:12,style:{textAlign:"right"}},l().createElement(a.Button,{onClick:function(){return o(h(i||0,1))},disabled:g},l().createElement(Cc.Icon,{type:"plus"})))))))},parse:function(e){return _.isPlainObject(e)&&!0===e.bind?e:""===e||null==e?null:parseFloat(e)},format:function(e){return _.isPlainObject(e)&&!0===e.bind?e:parseFloat(e)}}};const Xv={form_fields:{flow_checkbox:{component:Pv},flow_calculator:{component:Mc},flow_select:{component:function(e){var t=e.input,n=(e.label,e.field),o=(e.meta,e.group,function(e){var t,n=[];return null==e||null===(t=e.enum)||void 0===t||t.map((function(t,r){n.push({name:e.enum_title?e.enum_title[r]:t,value:t})})),e.enum?n:null}(n.schema)||[{name:{title:"是"},value:!0},{name:{title:"否"},value:!1}]);return l().createElement(Nv,r({titleMap:o,checked:!!t.value},t,n.attrs,{defaultValue:!1}))}},flow_modal:{component:function(e){var n=e.input,r=e.label,o=e.field,i=e.schema,a=(0,t.use)("form").form,u=o.ButtonBody;return l().createElement(Cc.C,{is:"Dashboard.FormModalButton",title:r,align:"left",offset:30,width:400,compStyle:!1,ButtonBody:u?function(){return l().createElement(u,{input:n})}:null},l().createElement("div",{className:"flow-editor-form",style:{padding:0}},l().createElement(Cc.C,{is:"I18nSchemaForm",formKey:"FieldsetModal",onChange:n.onChange,initialValues:n.value,schema:function(e,t){return Rv(Rv({},e),{},{formEffect:function(n){(null==e?void 0:e.formEffect)&&e.formEffect(t,n)}})}(i,a),group:qc,component:Zv,option:{fieldsDefined:Kv}})))}}},schema_converter:[function(e,t,n){var r,o;return"boolean"==t.type&&null!=t&&null!==(r=t.field)&&void 0!==r&&null!==(o=r.extendFlow)&&void 0!==o&&o.show&&(e.type="flow_checkbox"),"flow_calculator"==t.fieldType&&(e.type="flow_calculator"),"flow_select"==t.fieldType&&(e.type="flow_select"),"object"===t.type&&"flow_modal"===t.fieldType&&(e.type="flow_modal"),e}]};function Jv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qv(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Jv(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jv(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ey={background:"#54ABCB"},ty=function(e){var t=e.children,n=e.invalid,r=e.handleSubmit,o=e.submitting,i=e.domRef;return l().createElement(a.Form,{onSubmit:r},l().createElement(a.Card,{bordered:!1,style:{marginBottom:".5rem"}},t,l().createElement(a.Row,null,l().createElement(a.Col,{span:24},l().createElement(a.Button,{ref:i,disabled:n||o,type:"primary",onClick:r},_t1("执行测试"))," "))))},ny={type:"object",properties:{name:{type:"string",title:_r("名称")},server:{title:_r("扩展服务"),type:"string",field:{component:function(e){var n=e.input,r=n.value,i=n.onChange,u=l().useState(),c=(0,o.Z)(u,2),s=c[0],d=c[1];return l().useEffect((function(){(0,t.api)({name:"engine/extension/list"}).query({},{}).then((function(e){var t=e.items;d(t)}))}),[]),l().createElement(a.Select,{value:r,onChange:i,labelInValue:!0,allowClear:!0},null==s?void 0:s.map((function(e){return l().createElement(a.Select.Option,{value:e.id},e.name)})))},effect:function(e,t){var n=e.value;setTimeout((function(){var e,r=t.getState().initialValues;t.setFieldData("input",{display:!!n}),(null===(e=r.server)||void 0===e?void 0:e.value)!=(null==n?void 0:n.value)&&t.change("output",null)}))}}},input:{type:"object",title:_r("输入参数"),field:{component:function(n){var r,i=n.input,a=i.onChange,u=i.value,c=(0,t.use)("form",(function(e){var t,n,r;return{serverId:null===(t=e.values)||void 0===t||null===(n=t.server)||void 0===n?void 0:n.value,output:null===(r=e.values)||void 0===r?void 0:r.output}})),s=c.form,d=c.serverId,p=(c.output,l().useState({type:"object",properties:{}})),f=(0,o.Z)(p,2),m=f[0],v=f[1],y=l().useState(!1),g=(0,o.Z)(y,2),h=g[0],b=g[1],w=l().useState(!1),E=(0,o.Z)(w,2),C=E[0],O=E[1],x=l().useRef(null),k=function(e){var t=_.mapValues(null==e?void 0:e.properties,(function(e){if("number"==e.type)return Qv(Qv({},e),{},{fieldType:"inputNumber",field:Qv(Qv({},e.field||{}),{},{extendFlow:{show:!0,limit:["number"]}})});var t="string"==e.type?["number","string","boolean","time"]:null;return Qv(Qv({},e),{},{field:Qv(Qv({},e.field||{}),{},{extendFlow:{show:!0,limit:t}})})}));return Qv(Qv({},e),{},{properties:t})};l().useEffect((function(){var n,r=window._flow_form_httpCache_;d?null!=r&&null!==(n=r["extension_".concat(d)])&&void 0!==n&&n.input?v(k(r["extension_".concat(d)])):(b(!0),(0,t.api)({name:"engine/extension"}).fetch("/".concat(d,"/schema"),{}).then((function(t){var n=t.json;b(!1),v(k(n)),window._flow_form_httpCache_=Qv(Qv({},window._flow_form_httpCache_||{}),{},(0,e.Z)({},"extension_".concat(d),n))})).catch((function(){return b(!1)}))):v({type:"object",properties:{}})}),[d]);var S=function(e){var n=_.some(e,(function(e){return null==e?void 0:e.bind}));n?O(!0):(0,t.api)({name:"engine/extension"}).fetch("/".concat(d,"/debug"),{method:"POST",body:JSON.stringify(e||{})}).then((function(e){var t=e.json;s.change("output",t),O(!1)}))};return l().createElement("div",{style:{marginBottom:-24}},l().createElement(Cc.Loading,{spinning:h},l().useMemo((function(){return l().createElement(Cc.C,{is:"I18nSchemaForm",schema:m,initialValues:u||{},onChange:a,onSubmit:S,group:qc,domRef:x,validate:function(e){return _.some(m.required,(function(t){return!_.has(e,t)}))?"不能为空":null},component:ty})}),[JSON.stringify(m)])),l().createElement(Cc.C,{is:"Dashboard.FormModal",title:_t1("参数"),visible:C,domRef:x,onCancel:function(){O(!1)},align:"left",offset:30,width:400,compStyle:!1},l().createElement("div",{className:"flow-editor-form"},l().createElement(Cc.C,{is:"I18nSchemaForm",schema:(null===(r=window._flow_form_httpCache_)||void 0===r?void 0:r["extension_".concat(d)])||{},initialValues:_.mapValues(u,(function(e){return null!=e&&e.bind?null:e}))||{},option:{fieldsDefined:Kv},onSubmit:S,component:ty}))))}}},output:{type:"object",title:_r("返回结果"),field:{component:function(e){var t=e.input.value;return l().createElement(Cc.C,{is:"Dashboard.VariableTree",rootName:_t1("返回结果"),data:t||{},onClick:function(){return null}})}}}},required:["server"]};const ry={title:_r("扩展"),category:[_r("高级节点")],component:function(e){var n,o=(0,t.use)("FlowContext").updateOutputSchema,i=e.id,a=e.data;return l().useEffect((function(){var e=null!=a&&a.output?iv.json("",a.output):{};o(i,(null==e?void 0:e.properties)||{})}),[JSON.stringify((null==a?void 0:a.output)||{})]),l().createElement(Ec,r({},e,{title:e.title||e.data.name||_t1("数据接口"),cardProps:{headStyle:{background:ey.background,color:"#FFF"}}}),l().createElement("span",null,_t1("扩展服务"),": "),l().createElement("span",{style:{color:ey.background,overflowWrap:"break-word"}},(null==a||null===(n=a.server)||void 0===n?void 0:n.label)||""),l().createElement("br",null),_.isEmpty(null==a?void 0:a.input)?_t1("暂无输入参数"):_t1("已配置输入参数"))},paramSchema:ny,style:ey},oy={webhook:Hm,cmd:tv,delayed:ov,dataInterface:sv,flowIterator:fv,script:bv,pythonScript:jv,algorithm:Ov,flowExtension:ry};function iy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ly(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?iy(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iy(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ay=a.Select.Option,uy=a.Select.OptGroup,cy=function(e){var t=[];return e&&0==e.length?[]:(e.map((function(e){e&&e.warning&&e.warning.rules&&e.warning.rules.forEach((function(n){n.sign=e.title||e.name,t.push(n)}))})),t)};var sy={background:"#923BBB"},dy={type:"object",properties:{warning_type:{type:"string",title:_r("报警类型"),enum_title:[_r("设备表记录报警"),_r("其他数据报警")],enum:["device","general"]},model:{type:"object",title:_r("设备表"),fieldType:"table",field:{func:"device",required:!0,extendFlow:{show:!0}}},rule_name:{type:"object",items:{},title:_r("报警规则")},trigger_id:{title:_r("报警对象"),type:"object",fieldType:"tableData",field:{func:"device",required:!0,extendFlow:{show:!0,type:"node"}}},trigger_table:{title:_r("报警对象"),type:"object",field:{component:function(e){return l().createElement(a.Input,{disabled:!0,value:e.input.value})},extendFlow:{show:!0,type:"node"}}},trigger_value:{type:"string",title:_r("报警数值"),field:{component:function(e){return l().createElement(a.Input,{disabled:!0,value:e.input.value})},extendFlow:{show:!0,limit:["number"]}}},desc:{type:"object",title:_r("报警描述"),field:{component:Mc}}},formEffect:function(e){var t=e.getState(),n=t.initialValues,r=t.values;n.warning_type||e.change("warning_type","device"),function(e,t){!function(){var e=arguments.length>1?arguments[1]:void 0;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(t){t&&(e.setFieldData(t&&t.name,{display:t.display}),(t.value||"null"==JSON.stringify(t.value))&&e.change(t.name,t.value),e.setFieldData(t.name,{field:{required:t.required}}))}))}([{name:"range",display:!1},{name:"startTime",display:!1},{name:"endTime",display:!1}],e),e.change("type",_.get(t,"type")),e.useField("validTime",(function(t){e.setFieldData("range",{display:!1}),"timeLimit"===t.value&&e.setFieldData("range",{display:!0,required:!0}),"noLimit"===t.value&&(e.setFieldData("range",{display:!1}),e.change("range",null))})),e.useField("range",(function(t){"custom"===t.value?(e.setFieldData("startTime",{display:!0}),e.setFieldData("endTime",{display:!0,required:!0})):(e.setFieldData("startTime",{display:!1}),e.setFieldData("endTime",{display:!1}),e.change("endTime",null),e.change("startTime",null))}))}(e,n),e.useField("warning_type",(function(t){switch(t.value){case"device":e.setFieldData("model",{display:!0}),e.setFieldData("rule_name",{display:!0,required:!0}),e.setFieldData("trigger_table",{display:!1}),e.setFieldData("trigger_id",{display:!0});break;case"general":e.setFieldData("model",{display:!1}),e.setFieldData("rule_name",{display:!1,required:!1}),e.setFieldData("trigger_table",{display:!0}),e.setFieldData("trigger_id",{display:!1})}n.warning_type!=t.value&&(e.change("model",null),e.change("rule_name",null),e.change("trigger_table",null),e.change("trigger_id",null),e.change("trigger_value",null),e.change("desc",null))})),e.useField("model",(function(t){_.isEqual(n.model,t.value)||e.change("rule_name",null)})),e.useField("trigger_id",(function(t){_.isEqual(n.trigger_id,t.value)||e.change("rule_name",null)})),r&&(r.trigger_id&&r.model||(e.useField("trigger_id",(function(t){t.value&&_.isArray(t.value)&&0==t.value.length&&r&&r.trigger_id&&n.trigger_id!=t.value&&e.change("rule_name",[])})),e.useField("model",(function(t){t.value&&_.isArray(t.value)&&0==t.value.length&&r&&r.model&&n.model!=t.value&&e.change("rule_name",[])}))))},form:["*","warning_type","model","trigger_id","trigger_table",{key:"rule_name",component:function(e){var n=e.input,r=n.onChange,i=n.value,u=(e.field,e.field),c=(u.key,u.option.form,(0,t.use)("form",(function(e){return{model:e.values&&e.values.model,trigger_id:e.values&&e.values.trigger_id}}))),s=c.model,d=void 0===s?{}:s,p=c.trigger_id,f=l().useState({loading:!1,options:{}}),m=(0,o.Z)(f,2),v=m[0],y=(v.loading,v.options),g=m[1],h=l().useState(i||null),b=(0,o.Z)(h,2),w=(b[0],b[1],l().useState([])),_=(0,o.Z)(w,2),E=(_[0],_[1],function(){var e=Bs(Ns().mark((function e(n){var r,o,i,l;return Ns().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=y,i=n.bind?n.value.value.split(".")[1]:n.id,l={},e.next=3,(0,t.api)({name:"core/t/"}).fetch("".concat((null==n||null===(r=n.table)||void 0===r?void 0:r.id)||(null==d?void 0:d.id),"/d/").concat(i),{}).then((function(e){var t=e.json;l.id=null==t?void 0:t._table,o.node=cy([null==t?void 0:t._settings])}));case 3:return e.next=5,(0,t.api)({name:"core/t/schema/"}).fetch(null==l?void 0:l.id,{}).then((function(e){var t=e.json;Xu().isEmpty(t)||(o.model=cy([t]))}));case 5:g({options:o});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());l().useEffect((function(){d?(d.id,d.bind&&d.value.value.split(".")[1],(0,t.api)({name:"core/t/schema/"}).fetch(null==d?void 0:d.id,{}).then((function(e){var t=e.json;!Xu().isEmpty(t)&&g((function(e){return{options:{model:cy([t])}}}))}))):g((function(e){return{options:ly(ly({},e.options),{},{model:null})}})),p&&Xu().isObject(p)?p.id?E(p):E({id:p.value.value.split(".")[1]}):g((function(e){return{options:ly(ly({},e.options),{},{node:null})}}))}),[p]);var C=function(e){return(y[e]||[]).map((function(e){return ly({label:"".concat(e.warningname||e.description," "),value:e.id},e)})).filter((function(e){return e.id}))};return Object.keys(y).reduce((function(e,t,n){return e.concat(y[t])}),[]),l().createElement(a.Select,{placeholder:"请选择",value:i,style:{minWidth:200},onChange:r},Object.keys(y).map((function(e){return Xu().isArray(C(e))&&C(e).length>0?l().createElement(uy,{label:"model"==e?"设备表":"设备"},C(e).map((function(e){return l().createElement(ay,{key:e.warningname},e.label,"-( ",e.sign," )")}))):null})))}},"trigger_value","desc"],required:["rule_name","trigger_value"]};const py={alarmNode:{title:_r("生成报警"),icon:"",category:[_r("处理节点"),_r("其他节点")],component:function(e){var n,o,i,a,u,c,s,d=(0,t.use)("FlowContext"),p=(d.context,d.updateOutputValues,d.updateOutputSchema,e.id,e.data),f=(p.calculator,p.name);return l().createElement(Ec,r({},e,{title:e.title||e.data.name||(f?"".concat(f,"(").concat(_t1("生成报警"),")"):_t1("生成报警")),cardProps:{headStyle:{background:sy.background,color:"#FFF"}}}),l().createElement("span",null,_t1("报警类型"),": "),l().createElement("span",{style:{color:sy.background}},"general"==(null==e||null===(n=e.data)||void 0===n?void 0:n.warning_type)?_t1("其他数据报警"):_t1("设备表记录报警")),l().createElement("br",null),l().createElement("span",null,_t1("报警对象"),": "),l().createElement("span",{style:{color:sy.background}},(null==e||null===(o=e.data)||void 0===o||null===(i=o.trigger_id)||void 0===i?void 0:i.name)||(null==e||null===(a=e.data)||void 0===a||null===(u=a.trigger_id)||void 0===u||null===(c=u.value)||void 0===c||null===(s=c.name)||void 0===s?void 0:s.split(":"))),l().createElement("br",null))},paramSchema:dy,initParams:{warning_type:"device"},requiredInfo:function(e){var t=e.data,n=t.warning_type,r=t.trigger_value,o=t.rule_name;if("device"===n){if(!o&&!r)return _r("报警规则 报警数值");if(!o)return _r("报警规则")}return r?null:_r("报警数值")},style:sy}},fy={selectType:{type:"string",title:_r("收件人选择方式"),enum:["范围筛选","用户选择"],enum_title:[_r("范围筛选"),_r("固定收件人")],field:{effect:function(e,t){var n=e.value;t.getState().values,setTimeout((function(){t.setFieldData("users",{display:"用户选择"===n}),t.setFieldData("query",{display:"范围筛选"===n})}))}}},users:{type:"array",title:_r("收件人"),notInclude:!0,items:{type:"object",name:"User",relateTo:"User",properties:{id:{type:"string"},name:{type:"string"}}},field:{extendFlow:{show:!0,type:"user",mode:"multiple"}},description:_r("选择接收邮件/短信/站内行/微信/钉钉通知的用户，从平台中已创建的用户中进行选择")},query:{title:_r("筛选条件"),type:"object",properties:{},unbind:!0,field:{component:dm}}};function my(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vy(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?my(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):my(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var yy={background:"#41B08F"},gy={title:_r("发送邮件"),properties:vy(vy({content:{title:_r("邮件内容"),type:"string",fieldType:"flow_calculator",field:{limit:["string","number","time","boolean"]}}},fy),{},{title:{type:"string",title:_r("标题"),description:_r("邮件的标题"),fieldType:"flow_calculator",field:{limit:["string","number","time","boolean"]}}}),required:["title","content"],form:["*","selectType","query","users","title","content"],formEffect:function(e){e.setFieldData("content",{display:!0})}};const hy={title:_r("发送邮件"),category:["通知"],component:function(e){e.id;var t,n,o,i=e.data,a=void 0===i?{}:i,u=(e.paramSchema,a.users),c=a.query,s=a.selectType,d=useI18n().t;return l().createElement(Ec,r({},e,{title:a.name||a.type,nodeType:"default",cardProps:{headStyle:{background:yy.background||"#4971E0",color:"#FFF"}}}),"范围筛选"!=s||_.isEmpty(c)?"用户选择"!=s||_.isEmpty(u)?d("请设置收件人"):l().createElement(l().Fragment,null,l().createElement("span",null,d("发送至"),":"),l().createElement("span",{style:{color:"#41B08F"}},null!=u&&u.bind?(null===(t=u.value)||void 0===t?void 0:t.name)||(null===(n=u.value)||void 0===n||null===(o=n.map((function(e){return e.name})))||void 0===o?void 0:o.join(",")):u.map((function(e){return e.name})).join(","))):l().createElement(l().Fragment,null,l().createElement("span",null,d("发送至"),":"),l().createElement("span",{style:{color:"#41B08F"}},d("范围筛选"))))},paramSchema:gy,style:yy};var by=__webpack_require__(8643);function wy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _y(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?wy(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wy(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ey={background:"#41B08F"},Cy={title:_r("发送微信"),properties:_y(_y({content:{title:_r("微信内容变量"),type:"array",items:{type:"object",properties:{key:{type:"string",title:_r("变量名"),field:{component:by.OG}},var:{type:"string",title:_r("变量"),fieldType:"flow_calculator",field:{limit:["string","number","time","boolean"]}}}},field:{ButtonBody:function(e){var t,n,r=e.input,o=e.index,i=e.inputName;return(null==r||null===(t=r.value)||void 0===t||null===(n=t[o])||void 0===n?void 0:n.key)||i}}}},fy),{},{templateId:{title:_r("微信模版标识"),type:"string",field:{component:by.nx}},contentPreview:{title:_r("微信内容预览"),type:"string",field:{component:by.pR}}}),form:["*","selectType","query","users","templateId","content","contentPreview"],required:["templateId"],formEffect:function(e){e.useField("contentPreview",(function(t){var n=t.value;e.setFieldData("content",{display:!(!n||!/^.*{{+.*.DATA}}.*$/.test(n))})}))}};const Oy={title:_r("发送微信"),category:["通知"],component:function(e){e.id;var t,n,o,i=e.data,a=void 0===i?{}:i,u=(e.paramSchema,a.users),c=a.query,s=a.selectType,d=useI18n().t;return l().createElement(Ec,r({},e,{title:a.name||a.type,nodeType:"default",cardProps:{headStyle:{background:Ey.background||"#4971E0",color:"#FFF"}}}),"范围筛选"!=s||_.isEmpty(c)?"用户选择"!=s||_.isEmpty(u)?d("请设置收件人"):l().createElement(l().Fragment,null,l().createElement("span",null,d("发送至"),":"),l().createElement("span",{style:{color:"#41B08F"}},null!=u&&u.bind?(null===(t=u.value)||void 0===t?void 0:t.name)||(null===(n=u.value)||void 0===n||null===(o=n.map((function(e){return e.name})))||void 0===o?void 0:o.join(",")):u.map((function(e){return e.name})).join(","))):l().createElement(l().Fragment,null,l().createElement("span",null,d("发送至"),":"),l().createElement("span",{style:{color:"#41B08F"}},d("范围筛选"))))},paramSchema:Cy,permission:"handlerNotification",style:Ey};function xy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ky(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?xy(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xy(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Sy={background:"#41B08F"},Ay={title:_r("发送企业微信"),properties:ky(ky({content:{title:_r("企业微信内容"),type:"string",fieldType:"flow_calculator",field:{limit:["string","number","time","boolean"]}}},fy),{},{users:{type:"array",title:_r("收件人"),relateTo:"User",showField:"name",insideFilter:[[{field:"bindwechatee",value:!0,method:"eq"}]],items:{type:"object",relateTo:"User",properties:{id:{type:"string"},name:{type:"string"}}},field:{extendFlow:{show:!0,type:"user",mode:"multiple"}},description:_r("选择接收邮件/短信/站内行/微信/钉钉通知的用户，从平台中已创建的用户中进行选择")}}),required:["content"],form:["*","selectType","query","users","content"],formEffect:function(e){var t=e.getState().initialValues;e.useField("type",(function(t){e.change("content",null)})),e.change("content",t?t.content:null),e.setFieldData("content",{display:!0})}};const jy={title:_r("发送企业微信"),category:["通知"],component:function(e){e.id;var t,n,o,i=e.data,a=void 0===i?{}:i,u=(e.paramSchema,a.users),c=a.query,s=a.selectType,d=useI18n().t;return l().createElement(Ec,r({},e,{title:a.name||a.type,nodeType:"default",cardProps:{headStyle:{background:Sy.background||"#4971E0",color:"#FFF"}}}),"范围筛选"!=s||_.isEmpty(c)?"用户选择"!=s||_.isEmpty(u)?d("请设置收件人"):l().createElement(l().Fragment,null,l().createElement("span",null,d("发送至"),":"),l().createElement("span",{style:{color:"#41B08F"}},null!=u&&u.bind?(null===(t=u.value)||void 0===t?void 0:t.name)||(null===(n=u.value)||void 0===n||null===(o=n.map((function(e){return e.name})))||void 0===o?void 0:o.join(",")):u.map((function(e){return e.name})).join(","))):l().createElement(l().Fragment,null,l().createElement("span",null,d("发送至"),":"),l().createElement("span",{style:{color:"#41B08F"}},d("范围筛选"))))},paramSchema:Ay,permission:"handlerNotification",style:Sy};function Dy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Py(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Dy(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dy(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ty={background:"#41B08F"},Fy={title:_r("发送短信"),properties:Py(Py({},fy),{},{code:{title:_r("系统短信模板编号"),type:"string",field:{component:by.jt}},content:{title:_r("短信内容变量"),type:"array",items:{type:"object",properties:{key:{type:"string",title:_r("变量名"),field:{component:by.q9}},var:{type:"string",title:_r("变量"),fieldType:"flow_calculator",field:{limit:["string","number","time","boolean"]}}}},field:{ButtonBody:function(e){var t,n,r=e.input,o=e.index,i=e.inputName;return(null==r||null===(t=r.value)||void 0===t||null===(n=t[o])||void 0===n?void 0:n.key)||i}}},contentPreview:{title:_r("短信内容预览"),type:"string",field:{component:by.fI}}}),required:["code"],form:["*","selectType","query","users","code","content","contentPreview"],formEffect:function(e){e.useField("contentPreview",(function(t){var n=t.value;e.setFieldData("content",{display:!(!n||!/^.*\${.*.}.*$/.test(n))})}))}};const Ly={title:_r("发送短信"),category:["通知"],component:function(e){e.id;var t,n,o,i=e.data,a=void 0===i?{}:i,u=(e.paramSchema,a.users),c=a.query,s=a.selectType,d=useI18n().t;return l().createElement(Ec,r({},e,{title:a.name||a.type,nodeType:"default",cardProps:{headStyle:{background:Ty.background||"#4971E0",color:"#FFF"}}}),"范围筛选"!=s||_.isEmpty(c)?"用户选择"!=s||_.isEmpty(u)?d("请设置收件人"):l().createElement(l().Fragment,null,l().createElement("span",null,d("发送至"),":"),l().createElement("span",{style:{color:"#41B08F"}},null!=u&&u.bind?(null===(t=u.value)||void 0===t?void 0:t.name)||(null===(n=u.value)||void 0===n||null===(o=n.map((function(e){return e.name})))||void 0===o?void 0:o.join(",")):u.map((function(e){return e.name})).join(","))):l().createElement(l().Fragment,null,l().createElement("span",null,d("发送至"),":"),l().createElement("span",{style:{color:"#41B08F"}},d("范围筛选"))))},permission:"handlerNotification",paramSchema:Fy,style:Ty};function By(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var My={background:"#41B08F"},Ny={title:_r("发送站内信"),properties:function(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?By(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):By(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({msgType:{title:_r("站内信分类"),type:"string",enum:["通知"],enum_title:[_r("通知消息")]},content:{title:_r("消息内容"),type:"string",fieldType:"flow_calculator",field:{limit:["string","number","time","boolean"]}}},fy),form:["*","msgType","selectType","query","users","content"],formEffect:function(e){var t;e.setFieldData("content",{display:!0});var n=e.getState(),r=n.initialValues;n.values,(null==r||null===(t=r.type)||void 0===t?void 0:t.indexOf("发送"))>-1&&e.change("content",null)},required:["content","title"]};const Iy={title:_r("发送站内信"),category:["通知"],component:function(e){e.id;var t,n,o,i=e.data,a=void 0===i?{}:i,u=(e.paramSchema,a.users),c=a.query,s=a.selectType,d=useI18n().t;return l().createElement(Ec,r({},e,{title:a.name||a.type,nodeType:"default",cardProps:{headStyle:{background:My.background||"#4971E0",color:"#FFF"}}}),"范围筛选"!=s||_.isEmpty(c)?"用户选择"!=s||_.isEmpty(u)?d("请设置收件人"):l().createElement(l().Fragment,null,l().createElement("span",null,d("发送至"),":"),l().createElement("span",{style:{color:"#41B08F"}},null!=u&&u.bind?(null===(t=u.value)||void 0===t?void 0:t.name)||(null===(n=u.value)||void 0===n||null===(o=n.map((function(e){return e.name})))||void 0===o?void 0:o.join(",")):u.map((function(e){return e.name})).join(","))):l().createElement(l().Fragment,null,l().createElement("span",null,d("发送至"),":"),l().createElement("span",{style:{color:"#41B08F"}},d("范围筛选"))))},paramSchema:Ny,style:My,initParams:{msgType:"通知"}};function Ry(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zy(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Ry(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ry(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var qy={background:"#41B08F"},zy={title:_r("发送钉钉"),properties:Zy(Zy({content:{title:_r("钉钉内容"),type:"string",fieldType:"flow_calculator",field:{limit:["string","number","time","boolean"]}}},fy),{},{title:{type:"string",title:_r("标题"),fieldType:"flow_calculator",field:{limit:["string","number","time","boolean"]}}}),required:["title","content","type"],form:["*","selectType","query","users","title","content"],formEffect:function(e){var t=e.getState().initialValues;e.useField("type",(function(t){e.change("content",null)})),e.change("content",t?t.content:null),e.setFieldData("content",{display:!0})}};const Uy={title:_r("发送钉钉"),category:[_r("通知")],component:function(e){e.id;var t,n,o,i=e.data,a=void 0===i?{}:i,u=(e.paramSchema,a.users),c=a.query,s=a.selectType,d=useI18n().t;return l().createElement(Ec,r({},e,{title:a.name||a.type,nodeType:"default",cardProps:{headStyle:{background:qy.background||"#4971E0",color:"#FFF"}}}),"范围筛选"!=s||_.isEmpty(c)?"用户选择"!=s||_.isEmpty(u)?d("请设置收件人"):l().createElement(l().Fragment,null,l().createElement("span",null,d("发送至"),":"),l().createElement("span",{style:{color:"#41B08F"}},null!=u&&u.bind?(null===(t=u.value)||void 0===t?void 0:t.name)||(null===(n=u.value)||void 0===n||null===(o=n.map((function(e){return e.name})))||void 0===o?void 0:o.join(",")):u.map((function(e){return e.name})).join(","))):l().createElement(l().Fragment,null,l().createElement("span",null,d("发送至"),":"),l().createElement("span",{style:{color:"#41B08F"}},d("范围筛选"))))},permission:"handlerNotification",paramSchema:zy,style:qy},Gy={email:hy,wechat:Oy,wechatee:jy,sms:Ly,message:Iy,dingtalk:Uy};var $y=Cc.C.lazy("VariableTree"),Yy=function(e){var t=e.value,n=e.onChange,r=l().useState(!1),i=(0,o.Z)(r,2),u=i[0],c=i[1];return l().createElement(l().Fragment,null,l().createElement(a.Button,{onClick:function(){c(!0)}},_t1("点击配置")),l().createElement(a.Modal,{visible:u,width:800,title:_t1("配置值"),onCancel:function(){c(!1)},onOk:function(){c(!1)},okText:_t1("确认"),cancelText:_t1("取消")},l().createElement("div",{style:{border:"1px solid #d9d9d9",borderRadius:2,padding:"10px"}},l().createElement($y,{data:t,editable:!0,onChange:n}))))};const Hy=function(e){var t=e.input,n=e.type,o=t.value,i=function(e){t.onChange(e)};if("object"==n){var u=o&&_.isPlainObject(o)?o:{};return l().createElement(Yy,{onChange:i,value:u})}if("array"==n){var c=o&&_.isArray(o)?o:[];return l().createElement(Yy,{onChange:i,value:c})}if("number"==n){var s=o||_.isNumber(o)?o:null;return l().createElement(a.InputNumber,r({},t,{onChange:i,value:s}))}if("string"==n){var d=o&&(_.isString(o)||_.isNumber(o))?o:null;return l().createElement(a.Input,r({},t,{onChange:function(e){return i(e.target.value)},value:d}))}if("boolean"==n){var p=!!o&&Boolean(o);return l().createElement(a.Switch,r({},t,{onChange:i,checked:p}))}if("date"==n){var f=o?kc()(o):null;return l().createElement(a.DatePicker,r({},t,{onChange:function(e){return i(e?e.format("YYYY-MM-DD"):e)},format:"YYYY-MM-DD",value:f}))}return _.isNil(n)?l().createElement(a.Typography.Text,{type:"secondary"},_t1("请选择数据类型")):l().createElement(a.Typography.Text,{type:"danger"},_t1("无效的数据类型"))};function Vy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wy(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Vy(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vy(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ky=function(e){if(!e)return null;var t=e.type,n=e.count,r=e.unit,o=e.fromNow,i=e.time,l=e.range,a=e.historyTime,u=a?kc()(a):kc()(),c=a?kc()(a):kc()();return"forward"==t&&n&&r?o?["time >= '".concat(u.subtract(n,r).toISOString(),"'"),"time < '".concat(c.toISOString(),"'")]:["time >= '".concat(u.startOf(r).subtract(n,r).toISOString(),"'"),"time < '".concat(c.startOf(r).toISOString(),"'")]:"backward"==t&&n&&r?o?["time < '".concat(u.add(n,r).toISOString(),"'"),"time > '".concat(c.toISOString(),"'")]:["time < '".concat(u.endOf(r).add(n,r).toISOString(),"'"),"time > '".concat(c.endOf(r).toISOString(),"'")]:"now"==t&&r?["time > '".concat(u.startOf(r).toISOString(),"'"),"time <= '".concat(c.toISOString(),"'")]:"before"==t&&i?["time < '".concat(kc()(i).toISOString(),"'")]:"after"==t&&i?["time >= '".concat(kc()(i).toISOString(),"'")]:"between"==t&&l&&l.lte&&l.gte?["time >= '".concat(kc()(l.gte).toISOString(),"'"),"time <= '".concat(kc()(l.lte).toISOString(),"'")]:null},Xy=function(e){if(!e)return null;var t=e.type,n=e.count,r=e.unit,o=e.fromNow,i=e.time,l=e.range;return e.historyTime,"forward"==t&&n&&r?o?"now - ".concat(n).concat(r):"nowzero - ".concat(n).concat(r):"backward"==t&&n&&r?o?"now + ".concat(n).concat(r):"nowzero + ".concat(n).concat(r):"now"==t&&r?"now ".concat(r):"before"==t&&i?{"@#$lt":kc()(i).toISOString()}:"after"==t&&i?{"@#$gte":kc()(i).toISOString()}:"between"==t&&l&&l.lte&&l.gte?{"@#$gte":kc()(l.gte).toISOString(),"@#$lte":kc()(l.lte).toISOString()}:null};function Jy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qy(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Jy(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jy(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var eg=function(t){if(null!=t&&t.viewSchema){var n,r=null==t||null===(n=t.cond)||void 0===n?void 0:n.map((function(n){var r=[],o={};return null==n||n.filter((function(e){return e.field})).forEach((function(n){var o="".concat(n.field,"-").concat(function(e,t){var n,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];for(t=t||r.length,n=0;n<4;n++)o[n]=r[0|Math.random()*t];return o.join("")}(0,16));r[o]=function(t,n){var r,o,i,l,a,u=Xu().cloneDeep(t);u.value=null!=u&&null!==(r=u.value)&&void 0!==r&&r.bind?gs(u.value):u.value,Xu().isNil(null===(o=u.value)||void 0===o?void 0:o.gte)||(u.value["@#$gte"]=null===(l=u.value)||void 0===l?void 0:l.gte,delete u.value.gte),Xu().isNil(null===(i=u.value)||void 0===i?void 0:i.lte)||(u.value["@#$lte"]=null===(a=u.value)||void 0===a?void 0:a.lte,delete u.value.lte);var c,s,d,p,f,m,v=n.properties[u.field]||{};return"datePicker"!=v.fieldType&&!["date","datetime","date-time","time"].includes(v.format)&&"number"!=v.type||"object"===(0,wd.Z)(u.value)||"eq"!=u.method?"isNull"==u.method?null:"notNull"==u.method?{"@#$ne":null}:"notRange"==u.method?{"@#$not":u.value}:"contains"==u.method?{"@#$regex":u.value}:"notContains"==u.method?{"@#$not":{"@#$regex":u.value}}:"startsWith"==u.method?{"@#$regex":"^"+u.value}:"endsWith"==u.method?{"@#$regex":u.value+"$"}:"nin"==u.method?{"@#$nin":(null===(c=u.value)||void 0===c?void 0:c.in)||u.value}:"in"==u.method?{"@#$in":(null===(s=u.value)||void 0===s?void 0:s.in)||u.value}:"eq"==u.method&&u.value.like?{"@#$regex":null===(d=u.value)||void 0===d?void 0:d.like}:"eq"==u.method&&u.value.like?{"@#$regex":null===(p=u.value)||void 0===p?void 0:p.like}:"ne"==u.method&&u.value.like?{"@#$not":{"@#$regex":null===(f=u.value)||void 0===f?void 0:f.like}}:"ne"==u.method||"gt"==u.method||"lt"==u.method||"gte"==u.method||"lte"==u.method?(0,e.Z)({},"@#$".concat(u.method),(null==u||null===(m=u.value)||void 0===m?void 0:m.id)||u.value):u.value:"date"==v.format||"date"==v.formatType||"number"==v.type?{"@#$gte":u.value,"@#$lte":u.value}:{"@#$gte":u.value,"@#$lt":moment(new Date(u.value).getTime()+1e3).format("YYYY-MM-DD HH:mm:ss")}}(n,null==t?void 0:t.viewSchema)})),o=function(t,n){var r=Object.keys(t).map((function(r){var o=r.slice(0,-5),i=o;i.indexOf(".")>=0&&(i=i.replace(".",".properties."));var l,a,u,c,s,d=Xu().get(n.properties,i),p=d&&d.type;return d.key&&d.key.indexOf&&-1!==d.key.indexOf("relate")?null!==(l=t[r])&&void 0!==l&&l.id?(0,e.Z)({},o+"Id",null===(a=t[r])||void 0===a?void 0:a.id):(0,e.Z)({},o+"Id",t[r]):"array"==p?null!==(u=t[r])&&void 0!==u&&u.id?(0,e.Z)({},o+"Id",null===(c=t[r])||void 0===c?void 0:c.id):"department"===d.fieldType?(0,e.Z)({},o+"Id",t[r]):(0,e.Z)({},o,t[r]):"object"==p?(0,e.Z)({},o,(null===(s=t[r])||void 0===s?void 0:s.id)||t[r]):(0,e.Z)({},o,t[r])})).reduce((function(e,t){return Qy(Qy({},e),t)}),{});return r}(r,null==t?void 0:t.viewSchema),o.uid&&(o.id=o.uid,delete o.uid),o}));return(null==r?void 0:r.length)>1?{"@#$or":r}:null==r?void 0:r[0]}};function tg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ng=function(e,t,n,r,o,i,l,a,u,c){if(Ky(r)){var s,d,p,f,m,v,y=o&&o.count&&o.unit?"time(".concat(o.count).concat(o.unit,")"):"",g=null!=n&&n.bind?function(e){var t=e.split("}")[0].split(".");return t[t.length-1]}(gs(n)):null==n?void 0:n.id,h={fields:y||i?["".concat(l||"MEAN","(").concat(g,")")]:[g],tableId:null!=e&&e.bind?gs(e):(null==e?void 0:e.id)||(null==t||null===(s=t.table)||void 0===s?void 0:s.id),id:null!=t&&t.bind?gs(t):null==t?void 0:t.id,tagName:null!=n&&n.bind?null==n||null===(d=n.value)||void 0===d||null===(p=d.name)||void 0===p||null===(f=p.split("."))||void 0===f||null===(m=f[1])||void 0===m||null===(v=m.split("-"))||void 0===v?void 0:v[1]:null==n?void 0:n.name};return"forward"===(null==r?void 0:r.type)||"backward"===(null==r?void 0:r.type)||"now"===(null==r?void 0:r.type)?h.time=Xy(r):null!=r&&r.type&&(h.where=Ky(r)),y&&!i&&(h.group=[y].concat((0,Wu.Z)(h.group||[])),u&&(h.fill=String(u))),h.otherCondition=c(a),h}return null},rg=function(e){var t=e.split("}")[0].split(".");return t[t.length-1]},og=function(e){var t=e.split("}")[0].split(".");return t[t.length-2]};function ig(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lg(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ig(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ig(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ag(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ug(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ag(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ag(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var cg=function e(t){var n=_.cloneDeep(t);return null!=n&&n.bind?gs(n):_.isObject(n)?(_.keys(n).map((function(t){n[t]=e(n[t])})),n):_.isArray(n)?n.map((function(t){return e(t)})):n};function sg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dg(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?sg(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sg(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function pg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fg(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?pg(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pg(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function mg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vg(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?mg(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mg(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function yg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gg(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?yg(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yg(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function hg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bg(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?hg(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hg(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function wg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _g(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?wg(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wg(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Eg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cg(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Eg(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Eg(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Og(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xg(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Og(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Og(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var kg=function(e){var n,r,o,i,l,a,u,c,s=(0,t.use)("queryEditor.methods").getQueryFilter;delete e.userStyle,delete e.usersFilter;var d=null==e||null===(n=e.query)||void 0===n||null===(r=n.cond)||void 0===r?void 0:r.map((function(e){return null==e?void 0:e.map((function(e){var t;return null!=e&&null!==(t=e.value)&&void 0!==t&&t.bind?xg(xg({},e),{},{value:gs(e.value)}):e}))}));return xg(xg({},e),{},{title:gs&&null!=e&&null!==(o=e.title)&&void 0!==o&&o.bind?gs(null==e?void 0:e.title):null==e?void 0:e.title,users:gs&&null!=e&&null!==(i=e.users)&&void 0!==i&&i.bind?"array"==(null===(l=e.users.value)||void 0===l||null===(a=l.defineSchema)||void 0===a?void 0:a.type)?gs(e.users):null===(u=gs(e.users))||void 0===u?void 0:u.split(","):null==e?void 0:e.users,query:{filter:s(d,null==e||null===(c=e.query)||void 0===c?void 0:c.viewSchema,"@#")},content:gs?gs(null==e?void 0:e.content):null==e?void 0:e.content})};function Sg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ag(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Sg(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sg(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function jg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Dg=function(e){var t,n={},r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return jg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jg(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(a)throw i}}}}(function(e){return Xu().isArray(e)?e:[]}(e));try{for(r.s();!(t=r.n()).done;){var o,i,l=t.value,a=null==l||null===(o=l.table)||void 0===o?void 0:o.id;null!==(i=n[a])&&void 0!==i&&i.length?n[a].push(null==l?void 0:l.id):n[a]=[null==l?void 0:l.id]}}catch(e){r.e(e)}finally{r.f()}return n};function Pg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Tg=function(e){var t,n={},r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Pg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pg(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(a)throw i}}}}(function(e){return Xu().isArray(e)?e:[]}(e));try{for(r.s();!(t=r.n()).done;){var o,i,l=t.value,a=null==l||null===(o=l.table)||void 0===o?void 0:o.id;null!==(i=n[a])&&void 0!==i&&i.length?n[a].push(null==l?void 0:l.id):n[a]=[null==l?void 0:l.id]}}catch(e){r.e(e)}finally{r.f()}return n};function Fg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lg(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Fg(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fg(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Bg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mg(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Bg(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bg(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const Ng=Mg(Mg({fx:function(e){return{formula:gs(null==e?void 0:e.calculator),fix:e.fix}},addExTableRecord:function(t){var n,r,o=null!=t&&null!==(n=t.table)&&void 0!==n&&n.bind?t.table.value.name.split(".").length:0;return{table:null!=t&&null!==(r=t.table)&&void 0!==r&&r.bind?{id:gs(null==t?void 0:t.table),title:t.table.value.name.split(".")[o-1]}:null==t?void 0:t.table,data:"multiple"!=(null==t?void 0:t.addType)?null!=t&&t.data&&"{}"!=JSON.stringify(null==t?void 0:t.data)?Object.keys(t.data).map((function(n){var r=t.data[n];return(0,e.Z)({},n,gs(n.includes("relate-table")&&r.name?{id:r.id,name:r.name}:r))})).reduce((function(e,t){return Wy(Wy({},e),t)})):null:null!=t&&t.multipleData?{multiple:gs(t.multipleData)}:null,addType:null==t?void 0:t.addType}},updateNodeAttribute:function(e){var t=e.attributeList;return(void 0===t?[]:t).map((function(e){var t,n=null==e?void 0:e.node;return{id:n&&n.bind?gs(null==e?void 0:e.node):null==n?void 0:n.id,property:null==e||null===(t=e.attribute)||void 0===t?void 0:t.key,value:gs(e.value)}}))},deleteNodeAttribute:function(e){var t=e.attributeList;return(void 0===t?[]:t).map((function(e){var t,n;return{id:e.node&&e.node.bind?gs(null==e?void 0:e.node):null==e||null===(n=e.node)||void 0===n?void 0:n.id,keys:null==e||null===(t=e.attribute)||void 0===t?void 0:t.map((function(e){return e.key}))}}))},表事件:function(e){return{table:e.table,query:{filter:("范围定义"==e.selectType||e.eventType)&&eg(e.logic)||{}},eventType:e.eventType,field:e.data||[],selectType:e.selectType,selectRecord:"范围定义"==e.selectType?null:e.selectRecord||[],startTime:e.once||e.range&&e.range[0],endTime:e.range&&e.range[1]}},updateExTableRecord:function(t){var n,r,o,i,l,a,u,c,s,d,p,f=null!=t&&null!==(n=t.table)&&void 0!==n&&n.bind?t.table.value.name.split(".").length:0;return{table:null!=t&&null!==(r=t.table)&&void 0!==r&&r.bind?{id:gs(null==t?void 0:t.table),title:t.table.value.name.split(".")[f-1]}:null==t?void 0:t.table,selectType:"前序记录"==t.selectType?"记录选择":t.selectType,rangeType:null==t||null===(o=t.range)||void 0===o?void 0:o.rangeType,updateField:null==t||null===(i=t.updateField)||void 0===i?void 0:i.map((function(e){var t,n,r,o,i,l,a,u;null!=e&&null!==(t=e.compare)&&void 0!==t&&null!==(n=t.value)&&void 0!==n&&n.$in&&(e.compare.value={"@#$in":null==e||null===(u=e.compare)||void 0===u?void 0:u.value.$in});var c="datePicker"!=e.fieldType||!["增加","减少"].includes(e.change)||null!=e&&null!==(r=e.compare)&&void 0!==r&&null!==(o=r.value)&&void 0!==o&&o.bind?gs(null==e||null===(a=e.compare)||void 0===a?void 0:a.value):null==e||null===(i=e.compare)||void 0===i||null===(l=i.value)||void 0===l?void 0:l.seconds;return{id:e.id,change:e.change||"设定为",updateValue:{value:c}}})),query:{filter:(s=null==t||null===(l=t.range)||void 0===l?void 0:l.rangeType,("按字段值"==s?eg({cond:null==t||null===(d=t.range)||void 0===d?void 0:d.fields,viewSchema:null==t||null===(p=t.range)||void 0===p?void 0:p.viewSchema}):"按照创建人员"==s?function(e){var t,n;return"ne"==e.relation?{creatorId:{"@#$nin":e.personnel.users.map((function(e){return e.id}))}}:{creatorId:{"@#$in":null===(t=e.personnel)||void 0===t||null===(n=t.users)||void 0===n?void 0:n.map((function(e){return e.id}))}}}(t.range):"按照创建时间"==s?function(t){return"range"==t.relation?{createTime:{"@#$gte":t.time[0],"@#$lte":t.time[1]}}:"notRange"==t.relation?{createTime:{"@#$not":{"@#$gte":t.time[1],"@#$lte":t.time[0]}}}:"isNull"==t.relation?{createTime:null}:"notNull"==t.relation?{createTime:{"@#$not":null}}:"eq"==t.relation?{createTime:t.appointTime||t.time}:{createTime:(0,e.Z)({},"@#$".concat(t.relation),"指定时间"==t.time?t.appointTime:t.appointTime||t.time)}}(t.range):void 0)||{})},selectRecord:null!=t&&null!==(a=t.selectRecord)&&void 0!==a&&a.bind?"array"==(null===(u=t.selectRecord.value)||void 0===u||null===(c=u.defineSchema)||void 0===c?void 0:c.type)?gs(t.selectRecord):[gs(t.selectRecord)]:null==t?void 0:t.selectRecord}},deleteExTableRecord:function(t){var n,r,o,i,l,a;o="范围定义"==t.selectType?{query:{filter:eg({cond:null==t||null===(i=t.range)||void 0===i?void 0:i.fields,viewSchema:null==t||null===(l=t.range)||void 0===l?void 0:l.viewSchema})},updateField:Xu().flattenDeep(null==t||null===(a=t.range)||void 0===a?void 0:a.fields).map((function(e){return{id:e.field,updateValue:{value:null==e?void 0:e.value}}}))}:{selectRecord:null==t?void 0:t.fixedNote};var u=null!=t&&null!==(n=t.table)&&void 0!==n&&n.bind?t.table.value.name.split(".").length:0;return function(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?tg(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tg(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({table:null!=t&&null!==(r=t.table)&&void 0!==r&&r.bind?{id:gs(null==t?void 0:t.table),title:t.table.value.name.split(".")[u-1]}:null==t?void 0:t.table,selectType:t.selectType},o)},createSystemVariable:function(e){var t,n,r,o;return{type:gs(null==e||null===(t=e.variable)||void 0===t?void 0:t.type),uid:gs(null==e||null===(n=e.variable)||void 0===n?void 0:n.uid),name:gs(null==e||null===(r=e.variable)||void 0===r?void 0:r.variableName),value:gs(null==e||null===(o=e.variable)||void 0===o?void 0:o.value)}},updateSystemVariable:function(e){var t=e.variableList;return(void 0===t?[]:t).map((function(e){var t;return{id:null==e||null===(t=e.variable)||void 0===t?void 0:t.id,value:gs(zg(e.value))}}))},deleteSystemVariable:function(e){var t=e.variable;return(void 0===t?[]:t).map((function(e){return{id:e.id}}))},StatisticsNode:function(e){var n=e.selectType,r=e.statistical,o=void 0===r?{}:r,i=(0,t.use)("queryEditor.methods").getQueryFilter,l=null;if("报警相关统计"==n){var a,u=o.alarmQuery,c=null==u||null===(a=u.cond)||void 0===a?void 0:a.map((function(e){return null==e?void 0:e.map((function(e){var t;return null!=e&&null!==(t=e.value)&&void 0!==t&&t.bind?Qy(Qy({},e),{},{value:gs(e.value)}):e}))}));l={selectType:n,query:{filter:i(c,null==u?void 0:u.schema,"@#")}}}else if("表相关统计"==n){var s=o.table,d=o.group,p=o.time,f=o.tableQuery,m={};if("time"===d)m={createTime_default:Xy(p)};else if("field"===d){var v,y=null==f||null===(v=f.cond)||void 0===v?void 0:v.map((function(e){return null==e?void 0:e.map((function(e){var t;return null!=e&&null!==(t=e.value)&&void 0!==t&&t.bind?Qy(Qy({},e),{},{value:gs(e.value)}):e}))}));m=i(y,null==f?void 0:f.schema,"@#")}l={selectType:n,table:s,query:{filter:m}}}return l},historyData:function(e){var n=e.queryType,r=e.tagList,o=e.tagObj,i=(0,t.use)("queryEditor.methods").getOtherCondition,l=[];if("single"===n){var a=o||{},u=a.table,c=a.tableData,s=a.tag,d=a.timeRage,p=a.group,f=a.noTime,m=a.method,v=a.otherCondition,y=a.fill;l=[ng(u,c,s,d,p,f,m,v,y,i)]}else l=null==r?void 0:r.map((function(e){var t=e.table,n=e.tableData,r=e.tag,o=e.timeRage,l=e.group,a=e.noTime,u=e.method,c=e.otherCondition,s=e.fill;return ng(t,n,r,o,l,a,u,c,s,i)}));return console.log(l,"result"),{query:(l||[]).filter((function(e){return e}))}},realTimeData:function(e){var t=e.tagList,n=[];return(void 0===t?[]:t).forEach((function(e){var t,r,o=null!==(t=e.tags)&&void 0!==t&&t.bind?gs(e.tags).split(","):e.tags,i=null!==(r=e.tableData)&&void 0!==r&&r.bind?gs(e.tableData):e.tableData;i&&null!=o&&o.length?o.forEach((function(t,r){var o,l,a,u,c,s,d,p,f,m,v,y;n.push({id:null!==(o=e.tableData)&&void 0!==o&&o.bind?i:null==i?void 0:i.id,tagId:null!==(l=e.tags)&&void 0!==l&&l.bind?rg(t):null==t?void 0:t.id,tagName:null!==(a=e.tags)&&void 0!==a&&a.bind?null===(u=e.tags)||void 0===u||null===(c=u.value)||void 0===c||null===(s=c[r])||void 0===s||null===(d=s.name)||void 0===d||null===(p=d.split("."))||void 0===p||null===(f=p[1])||void 0===f||null===(m=f.split("-"))||void 0===m?void 0:m[1]:null==t?void 0:t.name,tableId:null==e||null===(v=e.tableData)||void 0===v||null===(y=v.table)||void 0===y?void 0:y.id})})):null!=o&&o.length&&(null==o||o.forEach((function(t,r){var o,i,l,a,u,c,s,d,p,f,m,v;n.push({id:null!=e&&null!==(o=e.tags)&&void 0!==o&&o.bind?og(t):null==t||null===(i=t.tableData)||void 0===i?void 0:i.id,tagId:null!=e&&null!==(l=e.tags)&&void 0!==l&&l.bind?rg(t):null==t?void 0:t.id,tagName:null!==(a=e.tags)&&void 0!==a&&a.bind?null===(u=e.tags)||void 0===u||null===(c=u.value)||void 0===c||null===(s=c[r])||void 0===s||null===(d=s.name)||void 0===d||null===(p=d.split("."))||void 0===p||null===(f=p[1])||void 0===f||null===(m=f.split("-"))||void 0===m?void 0:m[1]:null==t?void 0:t.name,tableId:null==e||null===(v=e.table)||void 0===v?void 0:v.id})})))})),{query:n}},alarmNode:function(e){var t,n,r,o,i;return e.trigger_table&&(n=gs(e.trigger_table)),e.trigger_id&&(n=null!==(o=e.trigger_id)&&void 0!==o&&o.bind?gs(e.trigger_id):null===(i=e.trigger_id)||void 0===i?void 0:i.id),delete(r=lg(lg({},e),{},{model_id:(null===(t=e.model)||void 0===t?void 0:t.id)||gs(e.model),trigger_id:n,trigger_value:gs(e.trigger_value),desc:gs(e.desc)})).model,r},cmd:function(e){var t,n,r,o,i,l,a,u=(null==e||null===(t=e.command)||void 0===t?void 0:t.form)&&(null==e||null===(n=e.command)||void 0===n||null===(r=n.form[0])||void 0===r?void 0:r.name),c=((null==e||null===(o=e.command)||void 0===o?void 0:o.ops)&&(null==e||null===(i=e.command)||void 0===i||null===(l=i.ops[0])||void 0===l||l.param),e.type),s=e.commandStyle,d=e.commandNodes,p=e.commandNodeFilter,f=e.commandBatchType,m=e.retry,v=(e.paramsScript,null);return"tableData"===c?v={commandType:e.type,table:e.table?{id:e.table.id,name:e.table.name}:null,tableData:null!=e&&null!==(a=e.tableData)&&void 0!==a&&a.bind?[{id:gs(e.tableData),name:gs(e.tableData).replace(".id",".name")}]:[e.node],params:cg(null==e?void 0:e.commandValue)||null,name:u,signatures:gs(null==e?void 0:e.signatures),authorizers:gs(null==e?void 0:e.authorizers)}:"table"===c&&(v={commandType:e.type,command:ug(ug({},null==e?void 0:e.command),{},{params:cg(null==e?void 0:e.commandValue)||null,retry:m||0}),tableId:e.table&&e.table.id,tableDataIds:"node"===s?(d||[]).map((function(e){return e.id})):null,query:"query"===s?JSON.stringify({filter:ug(ug({},eg(p)),{},{tableId:e.table&&e.table.id})}):null,type:f||"sync",signatures:gs(null==e?void 0:e.signatures),authorizers:gs(null==e?void 0:e.authorizers)}),v},searchExTableRecord:function(t){var n,r,o,i=function(t,n){return hs[t]||"isNull"==t?"startsWith"==t?(0,e.Z)({},hs[t],"^"+gs(n)):"endsWith"==t?(0,e.Z)({},hs[t],gs(n)+"$"):"notRange"==t?{"@#$not":{"@#$gte":n.gte,"@#$lte":n.lte}}:"range"==t?(r={},(0,e.Z)(r,"@#$gte",n.gte),(0,e.Z)(r,"@#$lte",n.lte),r):"isNull"==t?null:"notNull"==t?{"@#$ne":null}:"notContains"==t?(0,e.Z)({},hs[t],"^((?!"+gs(n)+").)*$"):(0,e.Z)({},hs[t],gs(n)):gs(n)||null;var r},l=null!=t&&null!==(n=t.table)&&void 0!==n&&n.bind?t.table.value.name.split(".").length:0;return{table:null!=t&&null!==(r=t.table)&&void 0!==r&&r.bind?{id:gs(null==t?void 0:t.table),title:t.table.value.name.split(".")[l-1]}:null==t?void 0:t.table,selectType:t.searchRange,selectOne:t.selectOne,query:{filter:function(n){var r;if("screen"==(null==t?void 0:t.searchRange))return function(t){var n={};return Xu().isArray(t)&&(null==t||t.map((function(r,o){r.map((function(r,l){o||1==t[0].length?n["@#$or"]?n["@#$or"][o-1]=dg(dg({},n["@#$or"][o-1]),{},(0,e.Z)({},r.field,i(r.method,r.value))):n["@#$or"]=[(0,e.Z)({},r.field,i(r.method,r.value))]:n=dg(dg({},n),{},{"@#$and":[].concat((0,Wu.Z)(n["@#$and"]||[]),[(0,e.Z)({},r.field,i(r.method,r.value))])})}))}))),n}(null==t||null===(r=t.triggerCondition)||void 0===r?void 0:r.cond)}(null==t||null===(o=t.triggerCondition)||void 0===o||o.cond)||{},sort:{createTime:-1},limit:"custom"==(null==t?void 0:t.searchRange)?t.custom:"newest"==(null==t?void 0:t.searchRange)?1:void 0}}},delayed:function(e){var t;return t=Xu().isString(e.date)?kc()(new Date(e.date)).format("YYYY-MM-DD HH:mm:ss"):gs(e.date),{delay_type:e.delay_type,minutes:gs(e.minutes),hours:gs(e.hours),days:gs(e.days),date:t}},script:function(e){var t,n={};return null==e||null===(t=e.inputObj)||void 0===t||t.map((function(e,t){Xu().isArray(e)?n[e[0].field]=gs(e[0].value):n[e.field]=gs(e.value)})),fg(fg({},e),{},{input:n})},pythonScript:function(e){var t,n={};return null==e||null===(t=e.inputObj)||void 0===t||t.map((function(e,t){Xu().isArray(e)?n[e[0].field]=gs(e[0].value):n[e.field]=gs(e.value)})),Lg(Lg({},e),{},{input:n})},flowUserApprove:function(e){var n,r,o,i,l,a,u,c,s,d,p,f,m,v,y,g,h,b,w,_=e.name,E=e.approveType,C=e.assignSetting,O=e.approveFields,x=void 0===O?{}:O,k=e.buttonText,S=e.securitySetting,A=(null==e?void 0:e.approveSetting)||{},j=A.referral,D=A.referralType,P=A.referralUser,T=A.reject,F=null===(n=Xu().map(x,(function(e){return(e.need||e.edit||e.view)&&e.key})))||void 0===n?void 0:n.filter(Boolean),L={};Xu().forEach(x,(function(e){var t=e.key;"boolean"==e.type?L[t]=e.edit||e.need?e:vg(vg({},e),{},{fieldType:"checkbox",disabled:!0}):"map"==e.fieldType?L[t]=e.edit||e.need?e:vg(vg({},e),{},{canEdit:!1}):L[t]=e.edit||e.need?e:vg(vg({},e),{},{disabled:!0})})),j&&(w=["referral"]),T&&(w=w?[].concat((0,Wu.Z)(w),["reject"]):["reject"]);var B=Xu().compact(null==S||null===(r=S.host)||void 0===r?void 0:r.map((function(e){return null==e?void 0:e.ip}))),M=(0,t.use)("queryEditor.methods").getQueryFilter,N=null==C?void 0:C.map((function(e){var t,n,r,o,i,l,a="filter"==(null==e?void 0:e.type)?null==e||null===(t=e.data)||void 0===t||null===(n=t.filter)||void 0===n?void 0:n.cond:null,u=null==a?void 0:a.map((function(e){return null==e?void 0:e.map((function(e){var t;return null!=e&&null!==(t=e.value)&&void 0!==t&&t.bind?vg(vg({},e),{},{value:gs(e.value)}):e}))})),c="user"==(null==e?void 0:e.type)?null==e||null===(r=e.data)||void 0===r?void 0:r.user:"templateUser"==(null==e?void 0:e.type)?gs(null==e||null===(o=e.data)||void 0===o?void 0:o.templateUser):"filter"==(null==e?void 0:e.type)?{filter:M(u,null==e||null===(i=e.data)||void 0===i||null===(l=i.filter)||void 0===l?void 0:l.viewSchema,"@#")}:null;return vg(vg({},e),{},{data:c})}));return{name:_,assignSetting:N,table:null!=e&&null!==(o=e.table)&&void 0!==o&&o.bind?null==e||null===(i=e.table)||void 0===i||null===(l=i.value)||void 0===l||null===(a=l.value)||void 0===a?void 0:a.split(".")[2]:null===(u=e.table)||void 0===u?void 0:u.id,tableName:null!=e&&null!==(c=e.table)&&void 0!==c&&c.bind?null==e||null===(s=e.table)||void 0===s||null===(d=s.value)||void 0===d||null===(p=d.name)||void 0===p?void 0:p.split(".")[2]:null===(f=e.table)||void 0===f?void 0:f.name,tableSource:null===(m=e.table)||void 0===m||null===(v=m.value)||void 0===v||null===(y=v.value)||void 0===y||null===(g=y.split("."))||void 0===g?void 0:g[0],approveType:E,approveSetting:w,referral:j?{referralType:D,referralUser:null!=P&&P.bind?null===(h=gs(P))||void 0===h?void 0:h.split(","):P}:null,buttonText:k,form:Xu().isEmpty(L)?null:{title:"模型属性flowUserApprove",key:"modelProperties",form:F,listFields:F,properties:L,required:null===(b=Xu().map(x,(function(e,t){return e.need&&e.key})))||void 0===b?void 0:b.filter(Boolean),type:"object",name:"modelProperties"},securitySetting:vg(vg({},S),{},{host:B})}},flowUserCC:function(n){var r,o,i,l,a,u,c,s,d,p,f,m,v,y=n.name,g=n.sendFields,h=void 0===g?{}:g,b=n.assignSetting,w=null===(r=Xu().map(h,(function(e){return e.view&&e.key})))||void 0===r?void 0:r.filter(Boolean),_=Xu().reduce(h,(function(t,n){return gg(gg({},t),{},(0,e.Z)({},n.key,n))}),{}),E=(0,t.use)("queryEditor.methods").getQueryFilter,C=null==b?void 0:b.map((function(e){var t,n,r,o,i,l,a="filter"==(null==e?void 0:e.type)?null==e||null===(t=e.data)||void 0===t||null===(n=t.filter)||void 0===n?void 0:n.cond:null,u=null==a?void 0:a.map((function(e){return null==e?void 0:e.map((function(e){var t;return null!=e&&null!==(t=e.value)&&void 0!==t&&t.bind?gg(gg({},e),{},{value:gs(e.value)}):e}))})),c="user"==(null==e?void 0:e.type)?null==e||null===(r=e.data)||void 0===r?void 0:r.user:"templateUser"==(null==e?void 0:e.type)?gs(null==e||null===(o=e.data)||void 0===o?void 0:o.templateUser):"filter"==(null==e?void 0:e.type)?{filter:E(u,null==e||null===(i=e.data)||void 0===i||null===(l=i.filter)||void 0===l?void 0:l.viewSchema,"@#")}:null;return gg(gg({},e),{},{data:c})}));return{name:y,assignSetting:C,table:null!=n&&null!==(o=n.table)&&void 0!==o&&o.bind?n.table.value.value.split(".")[2]:null===(i=n.table)||void 0===i?void 0:i.id,tableName:null!=n&&null!==(l=n.table)&&void 0!==l&&l.bind?null==n||null===(a=n.table)||void 0===a||null===(u=a.value)||void 0===u||null===(c=u.name)||void 0===c?void 0:c.split(".")[2]:null===(s=n.table)||void 0===s?void 0:s.name,tableSource:null===(d=n.table)||void 0===d||null===(p=d.value)||void 0===p||null===(f=p.value)||void 0===f||null===(m=f.split("."))||void 0===m?void 0:m[0],form:{title:"模型属性flowUserCC",key:"modelProperties",form:w,listFields:w,properties:_,required:null===(v=Xu().map(h,(function(e,t){return e.need&&e.key})))||void 0===v?void 0:v.filter(Boolean),type:"object",name:"modelProperties"}}},flowUserFillin:function(e){var n,r,o,i,l,a,u,c,s,d,p,f,m,v,y,g=e.name,h=e.fillInFields,b=void 0===h?{}:h,w=e.buttonText,_=e.assignSetting,E=e.isUpdate,C=e.type,O=e.selectRecord,x=null===(n=Xu().map(b,(function(e){return e.view&&e.key})))||void 0===n?void 0:n.filter(Boolean),k={};Xu().forEach(b,(function(e){var t=e.key;"boolean"==e.type?k[t]=e.edit||e.need?e:bg(bg({},e),{},{fieldType:"checkbox",disabled:!0}):"map"==e.fieldType?k[t]=e.edit||e.need?e:bg(bg({},e),{},{canEdit:!1}):k[t]=e.edit||e.need?e:bg(bg({},e),{},{disabled:!0})}));var S=(0,t.use)("queryEditor.methods").getQueryFilter,A=null==_?void 0:_.map((function(e){var t,n,r,o,i,l,a="filter"==(null==e?void 0:e.type)?null==e||null===(t=e.data)||void 0===t||null===(n=t.filter)||void 0===n?void 0:n.cond:null,u=null==a?void 0:a.map((function(e){return null==e?void 0:e.map((function(e){var t;return null!=e&&null!==(t=e.value)&&void 0!==t&&t.bind?bg(bg({},e),{},{value:gs(e.value)}):e}))})),c="user"==(null==e?void 0:e.type)?null==e||null===(r=e.data)||void 0===r?void 0:r.user:"templateUser"==(null==e?void 0:e.type)?gs(null==e||null===(o=e.data)||void 0===o?void 0:o.templateUser):"filter"==(null==e?void 0:e.type)?{filter:S(u,null==e||null===(i=e.data)||void 0===i||null===(l=i.filter)||void 0===l?void 0:l.viewSchema,"@#")}:null;return bg(bg({},e),{},{data:c})})),j="update"==C?{selectType:"记录选择",selectRecord:null!=O&&O.bind?"array"==(null===(r=O.value)||void 0===r||null===(o=r.defineSchema)||void 0===o?void 0:o.type)?gs(O):[gs(O)]:O}:{},D=E?bg({isUpdate:E,type:C},j):{};return bg(bg({name:g,assignSetting:A,table:null!=e&&null!==(i=e.table)&&void 0!==i&&i.bind?e.table.value.value.split(".")[2]:null===(l=e.table)||void 0===l?void 0:l.id,tableName:null!=e&&null!==(a=e.table)&&void 0!==a&&a.bind?null==e||null===(u=e.table)||void 0===u||null===(c=u.value)||void 0===c||null===(s=c.name)||void 0===s?void 0:s.split(".")[2]:null===(d=e.table)||void 0===d?void 0:d.name,tableSource:null===(p=e.table)||void 0===p||null===(f=p.value)||void 0===f||null===(m=f.value)||void 0===m||null===(v=m.split("."))||void 0===v?void 0:v[0],buttonText:w},D),{},{form:{title:"模型属性flowUserFillin",key:"modelProperties",form:x,listFields:x,properties:k,required:null===(y=Xu().map(b,(function(e,t){return e.need&&e.key})))||void 0===y?void 0:y.filter(Boolean),type:"object",name:"modelProperties"}})},prevData:function(e){var t;return{tags:null!==(t=e.tags)&&void 0!==t&&t.bind?gs(e.tags):e.tags,preType:e.preType}},webhook:function(t){var n,r=t.name,o=t.method,i=t.mustSuccess,l=t.headers,a=t.body,u=t.paramList;if("raw(application/json)"==(null==a?void 0:a.type)){var c=(null==a?void 0:a.raw)&&gs(a.raw);try{n=c&&JSON.parse(c)}catch(e){}}else{var s;n=null==a||null===(s=a.keyVal)||void 0===s?void 0:s.reduce((function(t,n){return null!=n&&n.key?_g(_g({},t),{},(0,e.Z)({},n.key,gs(n.value)||null)):null}),{})}var d=null==u?void 0:u.map((function(e){return Xu().omit(e,"example")}));return{name:r,method:o,url:t.url&&gs(t.url),mustSuccess:i,headers:null==l?void 0:l.reduce((function(t,n){return null!=n&&n.key?_g(_g({},t),{},(0,e.Z)({},n.key,gs(n.value)||null)):null}),{}),body:n,paramList:d}},dataInterface:function(t){var n=t.name,r=t.mustSuccess,o=t.opKey,i=t.body,l=t.paramList,a=null==l?void 0:l.map((function(e){return Xu().omit(e,"example")}));return{name:n,mustSuccess:r,body:(null==i?void 0:i.reduce((function(t,n){return null!=n&&n.key?Cg(Cg({},t),{},(0,e.Z)({},n.key,gs(n.value)||null)):null}),{}))||{},opKey:null==o?void 0:o.value,opKeyLabel:null==o?void 0:o.label,paramList:a}},flowIterator:function(e){var t=e.name,n=e.range;return{name:t,range:gs(n)}},email:kg,dingtalk:kg,message:kg,wechatee:kg,wechat:function(n){var r,o,i,l,a,u,c,s,d,p,f=(0,t.use)("queryEditor.methods").getQueryFilter,m=null==n||null===(r=n.content)||void 0===r?void 0:r.reduce((function(t,n){return _.isEmpty(n)?t:xg(xg({},t),{},(0,e.Z)({},n.key,{value:gs(n.var)}))}),{}),v=null==n||null===(o=n.query)||void 0===o||null===(i=o.cond)||void 0===i?void 0:i.map((function(e){return null==e?void 0:e.map((function(e){var t;return null!=e&&null!==(t=e.value)&&void 0!==t&&t.bind?xg(xg({},e),{},{value:gs(e.value)}):e}))}));return delete n.userStyle,delete n.usersFilter,xg(xg({},n),{},{contentPreview:null==n||null===(l=n.contentPreview)||void 0===l||null===(a=l.replace(new RegExp("{{","g"),""))||void 0===a?void 0:a.replace(new RegExp("}}","g"),""),users:gs&&null!=n&&null!==(u=n.users)&&void 0!==u&&u.bind?"array"==(null===(c=n.users.value)||void 0===c||null===(s=c.defineSchema)||void 0===s?void 0:s.type)?gs(n.users):null===(d=gs(n.users))||void 0===d?void 0:d.split(","):null==n?void 0:n.users,query:{filter:f(v,null==n||null===(p=n.query)||void 0===p?void 0:p.viewSchema,"@#")},content:m&&JSON.stringify(m)})},sms:function(n){var r,o,i,l,a,u,c,s,d=(0,t.use)("queryEditor.methods").getQueryFilter,p=null==n||null===(r=n.content)||void 0===r?void 0:r.reduce((function(t,n){return _.isEmpty(n)?t:xg(xg({},t),{},(0,e.Z)({},n.key,gs(n.var)))}),{}),f=_.omit(n,"userStyle","usersFilter","contentPreview","templateContent"),m=null==n||null===(o=n.query)||void 0===o||null===(i=o.cond)||void 0===i?void 0:i.map((function(e){return null==e?void 0:e.map((function(e){var t;return null!=e&&null!==(t=e.value)&&void 0!==t&&t.bind?xg(xg({},e),{},{value:gs(e.value)}):e}))}));return xg(xg({},f),{},{users:gs&&null!=n&&null!==(l=n.users)&&void 0!==l&&l.bind?"array"==(null===(a=n.users.value)||void 0===a||null===(u=a.defineSchema)||void 0===u?void 0:u.type)?gs(n.users):null===(c=gs(n.users))||void 0===c?void 0:c.split(","):null==n?void 0:n.users,query:{filter:d(m,null==n||null===(s=n.query)||void 0===s?void 0:s.viewSchema,"@#")},content:p&&JSON.stringify(p)})},指令事件:function(e){var n=_.cloneDeep(e),r=(0,t.use)("queryEditor.methods").getQueryFilter;if(n.query){var o,i,l,a=null==n||null===(o=n.query)||void 0===o||null===(i=o.cond)||void 0===i?void 0:i.map((function(e){return null==e?void 0:e.map((function(e){var t;return null!=e&&null!==(t=e.value)&&void 0!==t&&t.bind?Ag(Ag({},e),{},{value:gs(e.value)}):e}))}));n.query={filter:r(a,null==n||null===(l=n.query)||void 0===l?void 0:l.schema,"@#")}}return n},writePoints:function(e){var t,n,r,o,i;return{tableId:null!==(t=e.table)&&void 0!==t&&t.bind?gs(e.table):null===(n=e.table)||void 0===n?void 0:n.id,tableDataId:null!==(r=e.tableData)&&void 0!==r&&r.bind?gs(e.tableData):null===(o=e.tableData)||void 0===o?void 0:o.id,fields:null==e||null===(i=e.tags)||void 0===i?void 0:i.map((function(e){var t,n,r,o;return{key:null!=e&&null!==(t=e.tag)&&void 0!==t&&t.bind?gs(e.tag):null==e||null===(n=e.tag)||void 0===n?void 0:n.id,value:null!=e&&null!==(r=e.value)&&void 0!==r&&r.bind?gs(e.value):null==e||null===(o=e.value)||void 0===o?void 0:o.value}})),time:kc()(e.time).valueOf()}},计划事件:function(e){var t=e.executionType,n=(e.planSetting,e.selectType,t||{}),r=n.execution,o=void 0===r?{}:r,i=n.specifyConditions,l=void 0===i?{}:i,a=["secondCycle","minuteCycle","hourCycle","dayCycle","monthCycle","weekCycle","yearCycle"],u=[];return a.reduce((function(e,t,n){return l[t]?1==n?(u.push(l[e]||o[e]||"*"),u.push(l[t]||o[t]||"*"),t):(u.push(l[t]),t):l[e]&&1==n?(u.push(l[e]||"*"),u.push(l[t]||o[t]||"*"),t):1==n?o[e]||o[t]?(u.push(o[e]||"*"),u.push(o[t]||"*"),t):(u.push("*"),u.push("*"),t):o[a[n-1]]||"yearCycle"==a[n]?(u.push(o[t]||"*"),t):(u.push(o[t]||"*"),"")})),"senior"==e.planSetting?e.cronExpression=u.reduce((function(e,t,n){return 5==n&&"*"!=u[n-2]||5==n&&"*"==t?e+" ?":e+" "+t})):delete e.cronExpression,e}},{flowHttpClient:function(e){var t,n;return{url:gs(e.url),method:e.method,timeout:gs(e.timeout),headers:null==e||null===(t=e.headers)||void 0===t?void 0:t.map((function(e){return{name:gs(e.name),value:gs(e.value)}})),params:null==e||null===(n=e.params)||void 0===n?void 0:n.map((function(e){return{name:gs(e.name),value:gs(e.value)}})),template:gs(e.template)}},flowMqttClient:function(e){return{url:gs(e.url),qos:e.qos,timeout:gs(e.timeout),idle:gs(e.idle),username:gs(e.username),password:gs(e.password),topic:gs(e.topic),template:gs(e.template)}},gatewayOpcua:function(e){var t;return{endPointUrl:gs(e.endPointUrl),providerUserName:gs(e.providerUserName),providerPassword:gs(e.providerPassword),securityPolicy:e.securityPolicy,securityMode:e.securityMode,defaultNS:gs(e.defaultNS),idle:gs(e.idle),tags:(null===(t=e.tags)||void 0===t?void 0:t.map((function(e){var t,n;return{identifier:gs(e.identifier),dataType:e.dataType,value:null!=e&&null!==(t=e.value)&&void 0!==t&&t.bind?gs(e.value):null==e||null===(n=e.value)||void 0===n?void 0:n.value,namespaceIndex:gs(e.namespaceIndex)}})))||[]}},gatewayOpcda:function(e){var t;return{host:gs(e.host),domain:gs(e.domain),user:gs(e.user),password:gs(e.password),idle:gs(e.idle),progId:gs(e.progId),tags:(null===(t=e.tags)||void 0===t?void 0:t.map((function(e){var t,n;return{itemId:gs(e.itemId),dataType:e.dataType,value:null!=e&&null!==(t=e.value)&&void 0!==t&&t.bind?gs(e.value):null==e||null===(n=e.value)||void 0===n?void 0:n.value}})))||[]}},flowDBClient:function(t){var n,r;return r={driverName:t.driverName,username:t.username,password:t.password,host:t.host,port:t.port,dbName:t.dbName,tableName:t.tableName,editType:t.editType,sql:gs(t.sql),sendType:t.sendType},(0,e.Z)(r,"port",t.port),(0,e.Z)(r,"tags",(null===(n=t.tags)||void 0===n?void 0:n.map((function(e){return{srcField:gs(e.srcField),destField:e.destField,isPrimaryKey:e.isPrimaryKey}})))||[]),r}}),{},{addUpdateExTableRecord:function(e){var t=e.table,n=e.selectType,r=e.multipleData,o=e.mapping,i="multiple"==n?gs(r):Xu().mapValues(e.data,(function(e){return null!=e&&e.bind?gs(e):e}));return{table:null!=t&&t.bind?{id:gs(t),name:t.value.name.split(".")[2]}:t,selectType:n,data:i,mapping:"multiple"==n?o:null}},报警事件:function(e){var t=Xu().cloneDeep(e);return t.department=Dg(t.department),t},用户登录:function(e){var t=Xu().cloneDeep(e);return t.department=Tg(t.department),t},flowExtension:function(e){var t=e.server,n=e.input;return{id:null==t?void 0:t.value,serverName:null==t?void 0:t.label,input:Xu().mapValues(n,(function(e){return gs(e)}))}}});function Ig(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rg(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Ig(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ig(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const Zg=function(e,t){var r={};try{r=n().get("flowConvert")}catch(e){console.log(e)}var o=Rg(Rg({},r),Ng);return e&&o[e]?o[e](t):t};var qg=function(e,t){var n,r,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(t=t||o.length,e)for(n=0;n<e;n++)i[n]=o[0|Math.random()*t];else for(i[8]=i[13]=i[18]=i[23]="-",i[14]="4",n=0;n<36;n++)i[n]||(r=0|16*Math.random(),i[n]=o[19==n?3&r|8:r]);return"Flow_"+i.join("")},zg=function(e){try{return e||0===e?JSON.parse(e):void 0}catch(t){return e}},Ug=function(e){return Xu().isArray(null==e?void 0:e.category)&&e.category.length>0?"起始节点"==(null==e?void 0:e.category[0]):"起始节点"==(null==e?void 0:e.category)},Gg=function(t){if(!t||0==t.length)return{};var n,r,o={},i=[];t.forEach((function(e){var t=null;Ug(e)?(n=function(e){var t=e.type;if(null!=t&&t.indexOf(".")){var n=t.split(".");return"event"==n[0]?n[1]:t}return t}(e),t=r=Zg(n,null==e?void 0:e.data)):t=Zg(null==e?void 0:e.type,null==e?void 0:e.data),o[e.id]={id:null==e?void 0:e.id,type:null==e?void 0:e.type,source:null==e?void 0:e.source,target:null==e?void 0:e.target,_config:"gateway"==(null==e?void 0:e.type)||"gatewayEdge"==(null==e?void 0:e.type)?{}:t},"gatewayEdge"==(null==e?void 0:e.type)&&i.push(e)})),i.forEach((function(t){var n,r=(0,e.Z)({},t.source,{_config:{branch:[{logic:gs(null==t||null===(n=t.data)||void 0===n?void 0:n.condition),elementId:null==t?void 0:t.target}]}});Xu().mergeWith(o,r,(function(e,t){if(Xu().isArray(e))return e.concat(t)}))}));var l=Object.keys(o).map((function(e){return o[e]}));return{type:n,publishFlow:l,settings:r}};function $g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yg(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?$g(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$g(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Hg={background:"#61BECE"},Vg={type:"object",properties:{variable:{title:_r("变量定义"),type:"object",properties:{type:{type:"string",title:_r("类型"),fieldType:"flow_select",enum:["number","string","boolean","date","object","array"],enum_title:[_r("数字"),_r("字符串"),_r("布尔值"),_r("日期"),_r("对象"),_r("数组")],field:{effect:function(e,t){e.value;var n=!1;t.useField("variable.type",(function(e){e.value,n&&t.change("variable.value",null)})),n=!0}}},uid:{type:"array",title:_r("编号"),items:{type:"string"},fieldType:"flow_calculator",field:{limit:["string"]}},variableName:{type:"array",title:_r("名称"),fieldType:"flow_calculator",items:{type:"string"}},value:{type:"string",title:_r("值"),field:{component:function(e){var t=e.input,n=e.field.key.replace(".value",".type"),o=oc(n),i={};"date"===o&&(i.format="date"),"number"===o&&(i.fieldType="inputNumber"),"array"===o&&(i.items={});var a={type:"object",properties:{value:Yg(Yg({type:"date"===o?"string":o||"string",title:"值"},i),{},{field:{component:function(e){var t=e.input;return e.field,l().createElement(Hy,{type:o,input:t})},extendFlow:{show:!0}}})}},u=function(e){t.onChange(e.value)},c={value:zg(t.value)};return l().useMemo((function(){return l().createElement(Cc.C,{is:"I18nSchemaForm",formKey:"model.".concat(JSON.stringify(o)),schema:a,initialValues:c,group:function(e){return l().createElement(Cc.C,r({is:"Flow.BindDataGroup"},e,{label:null}))},component:function(e){return e.children},onSubmit:u,onChange:u})}),[o])}}}},required:["type","uid","variableName","value"]}}};const Wg={title:_r("新增变量"),category:[_r("处理节点"),_r("全局变量处理节点")],component:function(e){var t=e.data.variable,n=useI18n().t,o={number:n("数字"),string:n("字符串"),boolean:n("布尔值"),date:n("日期"),object:n("对象"),array:n("数组")};return l().createElement(Ec,r({},e,{title:e.title||e.data.name||n("新增变量"),titleIcon:"addTitleIcon",cardProps:{headStyle:{background:Hg.background,color:"#FFF"}}}),l().createElement("div",null,l().createElement("span",null,n("新增类型"),": "),l().createElement("span",{style:{color:Hg.background}},null!=t&&t.type?o[null==t?void 0:t.type]:null)))},paramSchema:Vg,style:Hg,titleIcon:"addTitleIcon"};function Kg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xg=a.Select.OptGroup,Jg=a.Select.Option,Qg={number:"数字",string:"字符串",boolean:"布尔",date:"日期",array:"数组",object:"对象"};const eh=function(e){var n,r=e.input,i=e.field,u=i.mode,c=(i.opt,i.option.form),s=r.value,d=r.onChange,p=((null==c||null===(n=c.getFieldState("variableList"))||void 0===n?void 0:n.value)||[]).filter((function(e){var t;return null==e||null===(t=e.variable)||void 0===t?void 0:t.id})).map((function(e){var t;return{id:null==e||null===(t=e.variable)||void 0===t?void 0:t.id}})),f=l().useState([]),m=(0,o.Z)(f,2),v=m[0],y=m[1],g=l().useState(!1),h=(0,o.Z)(g,2),b=h[0],w=h[1],E=_.isArray(s)?s:s?[s]:[],C=function(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Kg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kg(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(a)throw i}}}}(v);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.id===e)return r}}catch(e){n.e(e)}finally{n.f()}return null},O="multiple"===u?(s||[]).map((function(e){return e.id})):s.id;return l().useEffect((function(){w(!0);var e=JSON.stringify({project:{uid:1,name:1,type:1},sort:{createTime:-1}});(0,t.api)({name:"core/systemVariable"}).fetch("?query=".concat(e)).then((function(e){var t=e.json;y(t),w(!1)}))}),[]),l().createElement(a.Select,{defaultValue:O,onChange:function(e){d("multiple"===u?e.filter((function(e){return C(e)})).map((function(e){return C(e)})):C(e))},mode:u,loading:b,notFoundContent:b?l().createElement(Cc.Loading,null):l().createElement(Cc.C,{is:"NoData"})},null!=E&&E.length?l().createElement(Xg,{label:_t1("已选变量")},E.map((function(e){return l().createElement(Jg,{value:e.id},_t1(Qg[e.type]),"-",e.name)}))):null,_.differenceBy(v,[].concat((0,Wu.Z)(E),(0,Wu.Z)(p)),"id")?l().createElement(Xg,{label:_t1("可选变量")},_.differenceBy(v,[].concat((0,Wu.Z)(E),(0,Wu.Z)(p)),"id").map((function(e){return l().createElement(Jg,{value:e.id},_t1(Qg[e.type]),"-",e.name)}))):null)};function th(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nh(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?th(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):th(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var rh=_r("更新变量"),oh={background:"#61BECE"},ih={number:_r("数字"),string:_r("字符串"),boolean:_r("布尔"),date:_r("日期"),array:_r("数组"),object:_r("对象")},lh={type:"object",properties:{variableList:{type:"array",title:_r("变量列表"),field:{ButtonBody:function(e){var t,n,r,o,i,l,a=e.input,u=e.index,c=e.inputName;return null!=a&&null!==(t=a.value[u])&&void 0!==t&&null!==(n=t.variable)&&void 0!==n&&n.name?"".concat(ih[null==a||null===(r=a.value[u])||void 0===r||null===(o=r.variable)||void 0===o?void 0:o.type],"-").concat(null==a||null===(i=a.value[u])||void 0===i||null===(l=i.variable)||void 0===l?void 0:l.name):c}},items:{type:"object",properties:{variable:{type:"object",title:_r("变量"),field:{component:eh,formEffect:function(e,t){var n=t.field.name,r=!1;e.useField(n,(function(t){r&&e.change("".concat(n.split(".")[0],".value"),null)})),r=!0}}},value:{type:"string",title:_r("值"),field:{component:function(e){var n,i,a,u,c,s,d,p=e.input,f=(n=e.field.key.replace(".value",".variable"),i=l().useState(null),a=(0,o.Z)(i,2),u=a[0],c=a[1],s=(0,t.use)("form").form,d=l().useRef(null),s.useField(n,(function(e){var t=null==e?void 0:e.value;(!d.current||t&&d.current!=t)&&(d.current=t,t&&c(t))})),u),m={};"date"===(null==f?void 0:f.type)&&(m.format="date"),"number"===(null==f?void 0:f.type)&&(m.fieldType="inputNumber"),"array"===(null==f?void 0:f.type)&&(m.items={});var v={type:"object",properties:{value:nh(nh({type:"date"===(null==f?void 0:f.type)?"string":(null==f?void 0:f.type)||"string",title:"值"},m),{},{field:{component:function(e){var t=e.input;return e.field,l().createElement(Hy,{type:null==f?void 0:f.type,input:t})},extendFlow:{show:!0}}})}},y=function(e){p.onChange(e.value)},g={value:zg(p.value)};return l().useMemo((function(){return l().createElement(Cc.C,{is:"I18nSchemaForm",formKey:"model.".concat(JSON.stringify(null==f?void 0:f.id)),schema:v,initialValues:g,group:function(e){return l().createElement(Cc.C,r({is:"Flow.BindDataGroup"},e,{label:null}))},component:function(e){return e.children},onSubmit:y,onChange:y})}),[null==f?void 0:f.id])}}}},required:["variable"]}}}};const ah={title:rh,category:[_r("处理节点"),_r("全局变量处理节点")],component:function(e){var n=e.data.variableList,o=void 0===n?[]:n,i=((0,t.use)("FlowContext").updateOutputSchema,useI18n().t);return l().createElement(Ec,r({},e,{title:e.title||e.data.name||rh,titleIcon:"updateTitleIcon",cardProps:{headStyle:{background:oh.background,color:"#FFF"}}}),l().createElement("div",null,l().createElement("span",null,i("更新变量"),": "),l().createElement("span",{style:{color:oh.background}},o.filter((function(e){var t;return null==e||null===(t=e.variable)||void 0===t?void 0:t.name})).map((function(e){var t,n;return"".concat(i(ih[null==e||null===(t=e.variable)||void 0===t?void 0:t.type]),"-").concat(null==e||null===(n=e.variable)||void 0===n?void 0:n.name)})).join(","))))},paramSchema:lh,style:oh,titleIcon:"updateTitleIcon"};var uh=_r("删除变量"),ch={background:"#61BECE"},sh={type:"object",properties:{variable:{type:"array",title:_r("变量"),field:{component:eh,mode:"multiple"},items:{}}},required:["variable"]};const dh={title:uh,category:[_r("处理节点"),_r("全局变量处理节点")],component:function(e){var n=e.data.variable,o=((0,t.use)("FlowContext").updateOutputSchema,useI18n().t);return l().createElement(Ec,r({},e,{title:e.title||e.data.name||uh,titleIcon:"subTitleIcon",cardProps:{headStyle:{background:ch.background,color:"#FFF"}}}),null!=n&&n.length?l().createElement("div",null,l().createElement("span",null,o("删除")," "),l().createElement("span",null,n.length,o("个变量"))):null)},paramSchema:sh,style:ch,titleIcon:"subTitleIcon"};_r("新增或更新"),_r("变量列表"),_r("变量"),_r("编号"),_r("名称"),_r("类型"),_r("处理节点"),_r("全局变量处理节点");const ph={createSystemVariable:Wg,updateSystemVariable:ah,deleteSystemVariable:dh};function fh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mh(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?fh(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fh(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const vh=mh(mh(mh(mh(mh(mh(mh({},Jp),lm),Nm),oy),py),Gy),ph);var yh=__webpack_require__(399);function gh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hh(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?gh(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gh(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}cs()(yh.Z,{insert:"head",singleton:!1}),yh.Z.locals;const bh={title:_r("分支节点"),category:[_r("高级节点")],component:function(e){var t=e.id,n=e.onElementsRemove,r=e.editable,o=void 0===r||r,i={width:30,height:20,zIndex:1};return l().createElement("div",{className:"flow-gateway-rhombus"},o?l().createElement("div",{className:"flow-gateway-remove-button",onClick:function(){return n([{id:t}])}},l().createElement("div",{dangerouslySetInnerHTML:{__html:__webpack_require__(1944)}})):null,l().createElement($a,{type:"target",position:"top",style:hh(hh({},i),{},{top:-17}),isConnectable:o},l().createElement("div",{"data-nodeid":t,className:"target",style:{width:10,height:10,borderRadius:25}})),l().createElement("div",{className:"flow-gateway-container"},l().createElement("span",null,"+")),l().createElement($a,{type:"source",position:"bottom",style:hh(hh({},i),{},{bottom:-17}),isConnectable:o},l().createElement("div",{"data-nodeid":t,className:"source",style:{width:10,height:10,borderRadius:25}})))},paramSchema:{},dropOffset:{x:20,y:10},style:{background:"lightslategrey"}},wh={title:_r("结束"),component:function(e){return React.createElement("div",{style:{width:150,height:80,background:"rgb(170, 170, 170)",borderRadius:"5px",fontSize:20,color:"#fff",justifyContent:"center",alignItems:"center",display:"flex",position:"relative"},className:"flow-gateway-rhombus"},React.createElement($a,{type:"target",position:"top",style:{width:30,height:20,zIndex:1,top:-11}},React.createElement("div",{"data-nodeid":null==e?void 0:e.id,className:"target",style:{width:10,height:10,borderRadius:25}})),_t1("结束"))}},_h={httpClient:{type:"object",title:_r("配置"),baseUrl:"gatewayHttpclient",properties:{node:{type:"array",title:_r("选择被推送的资产模型"),items:{type:"object",properties:{id:{type:"string"},name:{type:"string"}}},field:{component:Cc.C.lazy("NodeModalSelect")}},url:{type:"string",title:"URL"},method:{type:"string",title:_r("方法"),enum:["POST","PUT"]},interval:{type:"number",title:_r("间隔时间（MS）")},timeout:{type:"number",title:_r("超时时间（S）")},headers:{type:"array",title:"HTTP头",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},value:{type:"string",title:"值"}}}},params:{type:"array",title:_r("参数"),items:{type:"object",properties:{name:{type:"string",title:_r("名称")},value:{type:"string",title:_r("值")}}}},template:{type:"string",title:_r("模板")},messageType:{type:"string",title:_r("数据发送方式"),enum:["realData","periodData"],enum_title:[_r("实时推送"),_r("周期推送")]}}},mqttClient:{type:"object",title:_r("配置"),baseUrl:"gateway/mqttclient",properties:{node:{type:"array",title:_r("选择被推送的资产模型"),items:{type:"object",properties:{id:{type:"string"},name:{type:"string"}}},field:{component:Cc.C.lazy("NodeModalSelect")}},url:{type:"string",title:"URL"},qos:{type:"number",title:_r("服务质量"),enum:[0,1,2],enum_title:["0(AT MOST ONCE)","1(AT LEAST ONCE)","2(EXACTLY ONCE)"]},interval:{type:"number",title:_r("间隔时间（MS）")},timeout:{type:"number",title:_r("超时时间（S）")},clientid:{type:"string",title:_r("客户端ID")},username:{type:"string",title:_r("用户名")},password:{type:"string",title:_r("密码")},topic:{type:"string",title:_r("订阅主题")},template:{type:"string",title:_r("模板")},messageType:{type:"string",title:_r("数据发送方式"),enum:["realData","periodData"],enum_title:[_r("实时推送"),_r("周期推送")]}}},opcua:{type:"object",title:_r("配置"),baseUrl:"gatewayOpcua",properties:{node:{type:"array",title:_r("选择被推送的资产模型"),items:{type:"object",properties:{id:{type:"string"},name:{type:"string"}}},field:{component:Cc.C.lazy("NodeModalSelect")}},endPointUrl:{type:"string",title:"URL"},providerUserName:{type:"string",title:_r("用户名")},providerPassword:{type:"string",title:_r("密码")},securityPolicy:{type:"string",title:_r("安全策略"),enum:["None","Basic256","Basic128Rsa15","Basic256Sha256"],enum_title:["None","Basic256","Basic128Rsa15","Basic256Sha256"]},securityMode:{type:"string",title:_r("安全模式"),enum:["None","SignAndEncrypt","Sign"],enum_title:["None","SignAndEncrypt","Sign"]},template:{type:"string",title:_r("模板")},namespaceIndex:{type:"number",title:_r("命名空间索引")}}},opcda:{type:"object",title:_r("配置"),baseUrl:"gatewayOpcda",properties:{node:{type:"array",title:_r("选择被推送的资产模型"),items:{type:"object",properties:{id:{type:"string"},name:{type:"string"}}},field:{component:Cc.C.lazy("NodeModalSelect")}},host:{type:"string",title:"IP地址"},domain:{type:"string",title:"域"},user:{type:"string",title:_r("用户名")},password:{type:"string",title:_r("密码")},clsId:{type:"string",title:_r("类标识符")},progId:{type:"string",title:_r("程序名称")},updateRate:{type:"string",title:_r("刷新间隔")},deadband:{type:"string",title:_r("死区")},template:{type:"string",title:_r("模板")}}},dbClient:{type:"object",title:_r("配置"),baseUrl:"gatewaydbclient",properties:{driverName:{type:"string",title:_r("数据库名称"),enum:["mysql","postgres","oci8","sqlserver"],enum_title:["MYSQL","POSTGRES","ORACLE","SQLSERVER"]},username:{type:"string",title:_r("用户名")},password:{type:"string",title:_r("密码")},host:{type:"string",title:_r("IP地址")},port:{type:"number",title:_r("端口")},dbName:{type:"string",title:_r("数据库名")},tableName:{type:"string",title:_r("表名")},interval:{type:"number",title:_r("采集周期"),description:_r("单位为秒")},messageType:{type:"string",title:_r("数据发送方式"),enum:["realData","periodData"],enum_title:[_r("实时推送"),_r("周期推送")]},sendType:{type:"string",title:_r("上报模式"),enum:["insert","update"],enum_title:[_r("插入"),_r("更新")]},tags:{type:"array",title:_r("字段配置"),items:{},field:{component:function(e){var n=e.input,r=e.option.form.getState().values,i=(void 0===r?{}:r).settings,u=void 0===i?{}:i,c=l().useState(!1),s=(0,o.Z)(c,2),d=s[0],p=s[1],f=l().useState(n.value||[]),m=(0,o.Z)(f,2),v=m[0],y=m[1],g=l().useState([]),h=(0,o.Z)(g,2),b=h[0],w=h[1],_=l().useState([]),E=(0,o.Z)(_,2),C=E[0],O=E[1],x=useI18n().t,k=function(){(0,t.api)({name:"gatewaydbclient/columns?driverName=".concat(u.driverName,"&host=").concat(u.host,"&port=").concat(u.port,"&username=").concat(u.username,"&password=").concat(u.password,"&dbName=").concat(u.dbName,"&tableName=").concat(u.tableName)}).fetch("",{}).then((function(e){var t=e.json;O(t),a.message.success(x("目标字段查询成功"))})).catch((function(e){e.json.message&&a.message.error(e.json.message)}))};return l().useEffect((function(){n.onChange(v)}),[v]),l().useEffect((function(){u.driverName&&u.host&&u.port&&u.username&&u.password&&u.dbName&&u.tableName&&k()}),[]),l().createElement(l().Fragment,null,l().createElement(a.Button,{style:{marginRight:10},onClick:function(){p(!0)}},x("添加字段")),l().createElement(a.Button,{onClick:k},x("获取目标字段")),l().createElement(a.Table,{style:{marginTop:10},dataSource:v,columns:[{title:x("数据点ID"),dataIndex:["srcField","id"],key:"id"},{title:x("数据点名称"),dataIndex:["srcField","name"],key:"name"},{title:x("资产名称"),dataIndex:["srcField","node","name"],key:"node.name"},{title:x("目标字段"),key:"destField",render:function(e){var t=e.destField;return l().createElement(a.AutoComplete,{value:t,filterOption:function(e,t){return-1!==t.value.indexOf(e)},onChange:function(t){e.destField=t,y((0,Wu.Z)(v))}},function(e,t){var n=e.filter((function(e){return e.destField})).map((function(e){return e.destField}));return Xu().difference(t,n)}(v,C).map((function(e){return l().createElement(a.Select.Option,{value:e},e)})))}},{title:x("操作"),key:"remove",render:function(e,t,n){return l().createElement(a.Button,{type:"primary",danger:!0,onClick:function(){var e=JSON.parse(JSON.stringify(v));e.splice(n,1),y(e)}},x("删除"))}}]}),l().createElement(a.Modal,{visible:d,title:x("添加字段"),destroyOnClose:!0,width:1e3,onOk:function(){y([].concat((0,Wu.Z)(v),(0,Wu.Z)(b))),p(!1)},onCancel:function(){p(!1)}},l().createElement(Cc.C,{is:"PointTable",type:"checkbox",onChange:function(e){w(e.map((function(e){var t=e.destField||"";return delete e.destField,{srcField:e,destField:t}})))}})))}}}},required:["driverName","username","password","host","port","dbName","tableName","messageType","sendType","tags"]}},Eh=function(e){var t,n=e.input,o=e.type,i=e.select,u=useI18n().t,c=null==n||null===(t=n.value)||void 0===t?void 0:t.value,s=function(e){n.onChange({value:e})};if("number"==o){var d=c||_.isNumber(c)?c:null;return l().createElement(a.InputNumber,r({},n,{onChange:s,value:d}))}if("string"==o){var p=c&&(_.isString(c)||_.isNumber(c))?c:null;return l().createElement(a.Input,r({},n,{onChange:function(e){return s(e.target.value)},value:p}))}if("boolean"==o){var f=!!c&&Boolean(c);return l().createElement(a.Switch,r({},n,{onChange:s,checked:f}))}if("date"==o){var m=c?kc()(c):null;return l().createElement(a.DatePicker,r({},n,{onChange:function(e){return s(e?e.format("YYYY-MM-DD"):e)},format:"YYYY-MM-DD",value:m}))}return"select"==o?l().createElement(a.Select,{value:String(c),onChange:function(e){return s(e)}},i.enum.map((function(e,t){return l().createElement(a.Select.Option,{value:i.enum[t]},i.enum_title[t])}))):_.isNil(o)?l().createElement(a.Typography.Text,{type:"secondary"},u("请选择数据类型")):l().createElement(a.Typography.Text,{type:"danger"},u("无效的数据类型"))};function Ch(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oh(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Ch(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ch(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var xh=a.Tabs.TabPane,kh=a.Input.TextArea,Sh=function(e){var t=e.error,n=t.message,r=t.status,o=t.headers,i=t.json,u=useI18n().t;return l().createElement(l().Fragment,null,l().createElement("h4",null,u("请求结果")),l().createElement("h3",null,u("状态码"),": ",r),l().createElement(a.Tabs,null,i&&l().createElement(xh,{tab:"JSON",key:"json"},l().createElement(Cc.C,{is:"CodeEditor",height:"400",width:"100%",theme:"vs-dark",language:"json",value:JSON.stringify(i,2,2),onChange:function(){}})),n&&l().createElement(xh,{tab:"Body",key:"body"},l().createElement(a.Input.TextArea,{rows:15,value:n,readOnly:!0})),o&&l().createElement(xh,{tab:"Header",key:"headers"},l().createElement(a.Table,{bordered:!0,size:"small",dataSource:Xu().keys(o).map((function(e){return{key:e,value:o[e]}})),columns:[{title:"Key",dataIndex:"key",key:"key"},{title:"Value",dataIndex:"value",key:"value"}]}))))},Ah=function(e){var t=e.response,n=t.status,r=t.headers,o=t.body,i=t.json,u=useI18n().t;return l().createElement(l().Fragment,null,l().createElement("h4",null,u("请求结果")),l().createElement("h3",null,u("状态码"),": ",n),l().createElement(a.Tabs,null,i&&l().createElement(xh,{tab:"JSON",key:"json"},l().createElement(Cc.C,{is:"CodeEditor",height:"400",width:"100%",theme:"vs-dark",language:"json",value:JSON.stringify(i,2,2),onChange:function(){}})),o&&l().createElement(xh,{tab:"Body",key:"body"},l().createElement(a.Input.TextArea,{rows:15,value:o,readOnly:!0})),r&&l().createElement(xh,{tab:"Header",key:"headers"},l().createElement(a.Table,{bordered:!0,size:"small",dataSource:Xu().keys(r).map((function(e){return{key:e,value:r[e]}})),columns:[{title:"Key",dataIndex:"key",key:"key"},{title:"Value",dataIndex:"value",key:"value"}]}))))},jh=function(e){return l().createElement(kh,r({rows:4,placeholder:"请输入SQL"},e))};var Dh;function Ph(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Th(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Ph(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ph(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Fh={background:"#E96DA1"},Lh=function(e){var t;return(null==e?void 0:e.value)&&e.value.map&&(null===(t=e.value)||void 0===t?void 0:t.map((function(e){return _.isPlainObject(e)?e.name:e})))},Bh={title:_r("mqtt网关"),category:[_r("处理节点"),_r("网关")],component:function(e){var t=e.data,n=t.url,o=t.topic,i=useI18n().t;return React.createElement(Cc.C,r({is:"FlowNode"},e,{title:e.title||e.data.name,cardProps:{headStyle:{background:Fh.background,color:"#FFF"}}}),React.createElement("div",null,React.createElement("span",null,"URL："),React.createElement("span",{style:{wordBreak:"break-all"}},Lh(n))),React.createElement("div",null,React.createElement("span",null,i("订阅主题"),"："),React.createElement("span",null,Lh(o))))},paramSchema:{type:"object",properties:{url:Th(Th({},_h.mqttClient.properties.url),{},{type:"array",fieldType:"flow_calculator",items:{type:"string"}}),qos:_h.mqttClient.properties.qos,timeout:Th(Th({},_h.mqttClient.properties.timeout),{},{field:{extendFlow:{show:!0}}}),idle:{type:"number",title:_r("空闲时间（S）"),field:{extendFlow:{show:!0}}},username:Th(Th({},_h.mqttClient.properties.username),{},{type:"array",fieldType:"flow_calculator",items:{type:"string"}}),password:Th(Th({},_h.mqttClient.properties.password),{},{type:"array",fieldType:"flow_calculator",items:{type:"string"}}),topic:Th(Th({},_h.mqttClient.properties.topic),{},{type:"array",fieldType:"flow_calculator",items:{type:"string"}}),template:Th(Th({},_h.mqttClient.properties.template),{},{type:"array",fieldType:"flow_calculator",items:{type:"string"}})}},style:Fh},Mh={title:_r("db网关"),category:[_r("处理节点"),_r("网关")],component:function(e){var n=e.id,o=e.data,i=o.driverName,l=o.host,a=useI18n().t,u=(0,t.use)("FlowContext").updateOutputSchema;return React.useEffect((function(){u(n,{columns:{type:"array",title:"结果列",items:{type:"object",properties:{columnName:{type:"string",title:"列名"},databaseTypeName:{type:"string",title:"列类型"}}}},rows:{type:"array",title:"结果行",items:{}},count:{type:"number",title:"结果行数"}})}),[]),React.createElement(Cc.C,r({is:"FlowNode"},e,{title:e.title||e.data.name,cardProps:{headStyle:{background:Fh.background,color:"#FFF"}}}),React.createElement("div",null,React.createElement("span",null,a("数据库名称"),"："),React.createElement("span",null,i)),React.createElement("div",null,React.createElement("span",null,a("IP地址"),"："),React.createElement("span",null,l)))},paramSchema:{type:"object",properties:{driverName:{type:"string",title:_r("数据库名称"),enum:["mysql","postgres","oci8","sqlserver"],enum_title:["MYSQL","POSTGRES","ORACLE","SQLSERVER"]},username:{type:"string",title:_r("用户名")},password:{type:"string",title:_r("密码")},host:{type:"string",title:_r("IP地址")},port:{type:"number",title:_r("端口")},dbName:{type:"string",title:_r("数据库名")},tableName:{type:"string",title:_r("表名")},editType:{type:"string",title:_r("编辑模式"),enum:["base","sql"],enum_title:[_r("基础编辑"),_r("sql编辑")],field:{effect:function(e,t){var n=e.value;t.getState().values,setTimeout((function(){t.setFieldData("sendType",{display:"base"===n||!n}),t.setFieldData("tags",{display:"base"===n||!n}),t.setFieldData("sql",{display:"sql"===n})}))}}},sql:{type:"string",title:"SQL",fieldType:"flow_calculator",field:{attrExt:["SQL"],style:{minHeight:"200px"}}},test:{type:"string",title:"调试",field:{component:function(e){var n=l().useState(!1),r=(0,o.Z)(n,2),i=r[0],u=r[1],c=l().useState(!1),s=(0,o.Z)(c,2),d=s[0],p=s[1],f=l().useState(null),m=(0,o.Z)(f,2),v=m[0],y=m[1],g=l().useState(null),h=(0,o.Z)(g,2),b=h[0],w=h[1],_=l().useState(null),E=(0,o.Z)(_,2),C=E[0],O=E[1],x=(0,t.use)("form").getFormState,k=l().useState({type:"object",properties:{sql:{type:"string",title:"SQL",field:{component:jh}}}}),S=(0,o.Z)(k,2),A=S[0],j=(S[1],useI18n().t),D=function(){var e=Bs(Ns().mark((function e(){var n,r;return Ns().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x(),O(null),w(null),e.prev=3,p(!0),e.next=7,(0,t.api)({name:"engine/flowDBClient/excTestSql"}).fetch("",{method:"POST",body:JSON.stringify(Oh(Oh({},n.values||{}),{},{sql:v}))});case 7:r=e.sent,p(!1),w(r),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),p(!1),O(e.t0);case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Bs(Ns().mark((function e(){return Ns().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return console.log(A,"variableSchema"),l().createElement(l().Fragment,null,l().createElement(a.Modal,{visible:i,width:"70%",okText:j("发送请求"),okButtonProps:{loading:d},onOk:D,cancelText:j("取消"),onCancel:function(){u(!1)},title:j("运行接口")},l().createElement(jh,{value:v,onChange:function(e){y(e.target.value)}}),d&&l().createElement(Cc.Loading,null),C&&l().createElement(Sh,{error:C}),b&&l().createElement(Ah,{response:b})),l().createElement(a.Button,{onClick:P},j("运行")))}}},sendType:{type:"string",title:_r("上报模式"),enum:["insert","update"],enum_title:[_r("插入"),_r("更新")]},tags:{type:"array",title:_r("字段配置"),items:{type:"object",properties:{srcField:{type:"string",title:_r("插入值"),field:{extendFlow:{show:!0}}},destField:{type:"string",title:_r("目标字段")},isPrimaryKey:{type:"boolean",title:_r("主键")}}}}}},permission:"handlerGateway",style:Fh},Nh={title:_r("opcua网关"),category:[_r("处理节点"),_r("网关")],component:function(e){var t=e.data,n=t.endPointUrl,o=t.securityPolicy,i=t.securityMode,l=t.defaultNS;return React.createElement(Cc.C,r({is:"FlowNode"},e,{title:e.title||e.data.name,cardProps:{headStyle:{background:Fh.background,color:"#FFF"}}}),React.createElement("div",null,React.createElement("span",null,"URL："),React.createElement("span",{style:{wordBreak:"break-all"}},Lh(n))),React.createElement("div",null,React.createElement("span",null,_t1("安全策略"),"：",o)),React.createElement("div",null,React.createElement("span",null,_t1("安全模式"),"：",i)),React.createElement("div",null,React.createElement("span",null,_t1("命名空间索引"),"：",l)))},paramSchema:{type:"object",properties:{endPointUrl:{title:_r("主机URL"),type:"string",fieldType:"flow_calculator",items:{type:"string"}},providerUserName:Th(Th({},_h.opcua.properties.providerUserName),{},{type:"array",fieldType:"flow_calculator",items:{type:"string"}}),providerPassword:Th(Th({},_h.opcua.properties.providerPassword),{},{type:"array",fieldType:"flow_calculator",items:{type:"string"}}),securityPolicy:_h.opcua.properties.securityPolicy,securityMode:_h.opcua.properties.securityMode,defaultNS:{type:"integer",title:_r("命名空间（默认）")},idle:{type:"integer",title:_r("空闲时间（S）")},tags:{type:"array",title:_r("数值列表"),items:{type:"object",properties:{identifier:{title:_r("数据点ID"),type:"array",fieldType:"flow_calculator",items:{type:"string"}},dataType:{type:"string",title:_r("选择类型"),enum:["number","string","boolean","date"],enum_title:[_r("数字"),_r("字符串"),_r("布尔值"),_r("日期")]},value:{title:_r("数值"),type:"object",field:{component:function(e){var t,n,r=e.input,o=e.field.option.form,i=r.name,l=parseInt(i.split("[")[1][0]),a=null===(n=(null===(t=o.getFieldState("tags"))||void 0===t?void 0:t.value)[l])||void 0===n?void 0:n.dataType;return React.createElement(Eh,{type:a,input:r})},extendFlow:{show:!0}}},namespaceIndex:{title:_r("命名空间"),type:"integer"}}}}}},permission:"handlerGateway",style:Fh},Ih={title:_r("opcda网关"),category:[_r("处理节点"),_r("网关")],component:function(e){var t=e.data,n=t.host,o=t.domain;return React.createElement(Cc.C,r({is:"FlowNode"},e,{title:e.title||e.data.name,cardProps:{headStyle:{background:Fh.background,color:"#FFF"}}}),React.createElement("div",null,React.createElement("span",null,_t1("IP地址"),"："),React.createElement("span",null,Lh(n))),React.createElement("div",null,React.createElement("span",null,_t1("域"),"："),React.createElement("span",null,Lh(o))))},paramSchema:{type:"object",properties:{host:Th(Th({},_h.opcda.properties.host),{},{type:"array",fieldType:"flow_calculator",items:{type:"string"}}),domain:Th(Th({},_h.opcda.properties.domain),{},{type:"array",fieldType:"flow_calculator",items:{type:"string"}}),user:Th(Th({},_h.opcda.properties.user),{},{type:"array",fieldType:"flow_calculator",items:{type:"string"}}),password:Th(Th({},_h.opcda.properties.password),{},{type:"array",fieldType:"flow_calculator",items:{type:"string"}}),idle:{type:"integer",title:_r("空闲时间（S）")},progId:(Dh={type:"string",title:_r("程序名称")},(0,e.Z)(Dh,"type","array"),(0,e.Z)(Dh,"fieldType","flow_calculator"),(0,e.Z)(Dh,"items",{type:"string"}),Dh),tags:{type:"array",title:_r("数值列表"),items:{type:"object",properties:{itemId:{title:"ItemID",type:"array",fieldType:"flow_calculator",items:{type:"string"}},dataType:{type:"string",title:_r("选择类型"),enum:["number","string","boolean","date"],enum_title:[_r("数字"),_r("字符串"),_r("布尔值"),_r("日期")]},value:{title:_r("写入值"),type:"object",field:{component:function(e){var t,n,r=e.input,o=e.field.option.form,i=r.name,l=parseInt(i.split("[")[1][0]),a=null===(n=(null===(t=o.getFieldState("tags"))||void 0===t?void 0:t.value)[l])||void 0===n?void 0:n.dataType;return React.createElement(Eh,{type:a,input:r})},extendFlow:{show:!0}}}}}}}},permission:"handlerGateway",style:Fh};const Rh={flowMqttClient:Bh,flowDBClient:Mh,gatewayOpcua:Nh,gatewayOpcda:Ih};function Zh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qh(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Zh(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zh(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const zh=qh(qh(qh(qh({},lp),vh),Rh),{},{gateway:bh,flowEnd:wh});function Uh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gh(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Uh(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Uh(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var $h=a.Select.Option,Yh=function(e){var t=e.input;return l().createElement(a.Input,r({style:{width:"100%"}},t))},Hh=function(){return null},Vh={string:[{name:"是",key:"eq",component:Yh}],select:[{name:"是",key:"range",component:function(e){var t=e.input,n=e.field.schema,r=void 0===n?{}:n;console.log(r);var o=r.enum_title||[],i=r.enum||[];return l().createElement(a.Select,{value:t.value,onChange:t.onChange,style:{width:"100%"}},null==i?void 0:i.map((function(e,t){return l().createElement($h,{value:e},o[t]||e)})))}}]},Wh=function(e){var n,r,a,u,c,s,d=e.value,p=e.schema,f=(e.field,e.onChange),m=e.unbind,v=Vh[null==p||null===(n=p.properties)||void 0===n||null===(r=n.value)||void 0===r?void 0:r.type],y=(0,i.useState)({schema:{title:"文本",type:"string",fieldType:"input"}}),g=(0,o.Z)(y,2),h=(g[0],g[1]),b=(p.filters&&(null===(a=Xu().map(p.filters,(function(e){return e})))||void 0===a||a.reduce((function(e,t){return e.concat(t)}))),{field:{extendFlow:{show:!0}},fieldType:"input",textType:"input",title:"文本",type:"string"}),w={field:{extendFlow:{show:!0}},fieldType:"input",textType:"input",title:"文本",type:"string"},_=function(e,t){var n=[];return function e(t,r){return t&&Object.keys(t).map((function(o){if("id"!=o&&!Xu().includes(undefined,o)){var i=t[o]||{};if((i.relateTo||i.relate)&&(i.properties={}),i.properties&&!Xu().isEmpty(i.properties))i.key=o,e(i.properties,i);else{var l=i.title?r&&r.title?r.title+"-"+i.title:i.title:o;n.push(Gh(Gh({},i),{},{title:l,key:r&&r.key?r.key+"."+o:o}))}}}))}(e),n}(p.properties),E=(_.filter((function(e){return"model"!=e.key&&"dashboard"!=e.key})),function(e){f(Gh(Gh({},d),{},{value:null!=e&&e.target?e.target.value:e}))}),C=null==d?void 0:d.method,O=function(e){var n;if(e.fieldType||e.relateTo||e.relate){var r=function(e,n){var r={};return t.app.load_list("filter_converter").reduce((function(t,n){return n(t,e,r)}),{})}(e);h(r);var o=r.type;return null===(n=t.app.get("form_fields")[o])||void 0===n?void 0:n.component}},x=l().useMemo((function(){if(!v)return Hh;var e=Xu().find(v,(function(e){return e.key==C}))||v&&v[0];null!=w&&w.selectFace&&(w.selectFace="select");var t=Gh(Gh({},b),w);return h({schema:t}),"isNull"==(null==e?void 0:e.key)||"notNull"==(null==e?void 0:e.key)?null==e?void 0:e.component:t.fieldType&&(t.enum||t.enum1)||t.relateTo?t.component||O(t):t.component||(null==e?void 0:e.component)||O(t)||Yh}),[v,C,d]);return l().createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",marginBottom:"0.5rem"}},l().createElement("div",{style:{flexGrow:1}},l().createElement(Zc,{field:Gh(Gh({},w),{},{extendFlow:{show:!0},unbind:m}),value:null==d?void 0:d.value,onChange:E},l().createElement(x,{input:{value:null==d?void 0:d.value,onChange:E},field:{schema:"select"==(null==p||null===(u=p.properties)||void 0===u||null===(c=u.value)||void 0===c?void 0:c.type)?null==p||null===(s=p.properties)||void 0===s?void 0:s.value:w}}))))},Kh=function(e){var t=e.value,n=e.schema,r=e.onChange,i=e.onDelete,u=e.unbind,c=(e.getNewSchema,l().useState(n)),s=(0,o.Z)(c,2),d=s[0],p=s[1];return l().useEffect((function(){p(n)})),l().createElement(l().Fragment,null,l().createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",marginBottom:"0.5rem"}},l().createElement(a.Input,{value:null==t?void 0:t.field,placeholder:"变量名称",onChange:function(e){return r({field:e.target.value})}}),l().createElement("div",{style:{margin:"auto"}},l().createElement(Cc.Icon,{svg:__webpack_require__(9060),className:"array-delete",onClick:i}))),l().createElement(Wh,{schema:d,field:null==t?void 0:t.field,value:t,onChange:r,unbind:u}))},Xh=function(e){var t=e.query,n=e.schema,r=e.onChange,o=(e.relation,e.unbind),i=e.getNewSchema,a=function(e){return function(n){r([].concat((0,Wu.Z)(t.slice(0,e)),[n],(0,Wu.Z)(t.slice(e+1))))}},u=function(e){return function(){r([].concat((0,Wu.Z)(t.slice(0,e)),(0,Wu.Z)(t.slice(e+1))))}};return Xu().isArray(t)&&(null==t?void 0:t.map((function(e,t){return l().createElement(l().Fragment,null,l().createElement(Kh,{onChange:a(t),onDelete:u(t),value:e,schema:n,fieldProp:{},unbind:o,getNewSchema:i}))})))};function Jh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qh(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Jh(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jh(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var eb=function(e){var t=e.input,n=t.onChange,o=t.value,i=e.schema,a=e.isInRange;return i&&(i.field=Qh(Qh({},i.field),{},{extendFlow:{show:!0}})),l().useMemo((function(){var e={type:"object",properties:{value:i||{}}};return l().createElement(Cc.C,{is:"I18nSchemaForm",formKey:null==i?void 0:i.config,schema:e,initialValues:o,component:function(e){return e.children},group:function(e){return l().createElement(qc,r({},e,{label:null}))},onChange:function(e){return n(e)},onSubmit:function(e){}})}),[null==i?void 0:i.config,a,JSON.stringify(i)])},tb=function(e){e.schema;var t=e.value,n=e.onChange;return e.getSchema,e.field,e.excludes,l().useMemo((function(){return l().createElement(eb,{input:{value:null==t?void 0:t.value,onChange:n},schema:{canOrder:!1,config:"文本",descriptionType:"tooltip",fieldType:"input",formWidth:"100%",listFields:!0,textContent:"text",textType:"input",title:"文本",type:"string"}})}),[t])};var nb={FlowNode:Ec,"Flow.QueryEditor":function(e){var t=e.schema,n=e.input,r=e.relation,u=e.unbind,c=e.getNewSchema,s=e.style,d=n.value,p=void 0===d?[]:d,f=n.onChange,m=(0,i.useState)(p||[[{}]]),v=(0,o.Z)(m,2),y=v[0],g=v[1],h=function(e){var t=e.filter((function(e){return!Xu().isEmpty(e)}));g(t),f&&f(t)},b=((0,i.useCallback)((function(){f(y)}),[y]),(0,i.useCallback)((function(e,t){var n=y[e]||[],r=[].concat((0,Wu.Z)(n),[{field:t}]);h((0,Wu.Z)(Xu().set(y,e,r)))}),[y])),w=(0,i.useCallback)((function(){h([].concat((0,Wu.Z)(y),[[{}]]))}),[y]),_=function(e){return function(t){Xu().isEmpty(t)?h([].concat((0,Wu.Z)(y.slice(0,e)),(0,Wu.Z)(y.slice(e+1)))):h((0,Wu.Z)(Xu().set(y,e,t)))}};return Xu().isEmpty(y)?l().createElement(a.Button,{onClick:function(){return b(0)}},"添加过滤条件"):y.map((function(e,n){return l().createElement("div",{style:s},l().createElement(Mf,{query:e,schema:t,onChange:_(n),relation:r,unbind:u,getNewSchema:c}),r&&"or"!=r?null:n==y.length-1?l().createElement(a.Button,{style:{marginLeft:"0.5rem"},onClick:w},"+ 或"):l().createElement(a.Divider,{plain:!0},"或"))}))},"Flow.QueryEditorNew":as,"Flow.BindDataGroup":qc,"Flow.HeadersCom":function(e){var t=e.input,n=t.onChange,r=t.value,i=l().useState(r),u=(0,o.Z)(i,2),c=u[0],s=u[1],d=l().useCallback((function(){s([].concat((0,Wu.Z)(c),[{}])),n([].concat((0,Wu.Z)(c),[{}]))}),[r]);return l().createElement(l().Fragment,null,c&&(null==c?void 0:c.map((function(e,t){return l().createElement(l().Fragment,null,l().createElement("div",{className:"slate-data-editor",style:{marginTop:10}},l().createElement(a.Input,{placeholder:"key",defaultValue:e.key,onChange:function(e){return function(e,t){var r=c.map((function(n,r){return r==t?{key:e.target.value,value:n.value}:n}));s(r),n(r)}(e,t)}}),l().createElement("div",{style:{margin:"auto"}},l().createElement(Cc.Icon,{svg:__webpack_require__(9060),className:"array-delete",onClick:function(){return e=t,n([].concat((0,Wu.Z)(c.slice(0,e)),(0,Wu.Z)(c.slice(e+1)))),void s([].concat((0,Wu.Z)(c.slice(0,e)),(0,Wu.Z)(c.slice(e+1))));var e}}))),l().createElement("div",{style:{marginTop:10}},l().createElement(tb,{value:e,onChange:function(e){s(c.map((function(n,r){return r==t?Qh(Qh({},n),{},{value:e}):n}))),n(c.map((function(n,r){return r==t?Qh(Qh({},n),{},{value:e}):n})))}})))}))),l().createElement(a.Button,{style:{marginTop:10},onClick:d},"+"))},"Flow.ScriptList":function(e){var t=e.schema,n=e.input,r=e.relation,u=e.unbind,c=e.getNewSchema,s=e.style,d=n.value,p=void 0===d?[]:d,f=n.onChange,m=(0,i.useState)(p||[[{}]]),v=(0,o.Z)(m,2),y=v[0],g=v[1],h=function(e){var t=e.filter((function(e){return!Xu().isEmpty(e)}));g(t),f&&f(t)},b=((0,i.useCallback)((function(){f(y)}),[y]),(0,i.useCallback)((function(e,t){var n=y[e]||[],r=[].concat((0,Wu.Z)(n),[{field:t}]);h((0,Wu.Z)(Xu().set(y,e,r)))}),[y])),w=(0,i.useCallback)((function(){h([].concat((0,Wu.Z)(y),[[{}]]))}),[y]),_=function(e){return function(t){Xu().isEmpty(t)?h([].concat((0,Wu.Z)(y.slice(0,e)),(0,Wu.Z)(y.slice(e+1)))):h((0,Wu.Z)(Xu().set(y,e,Xu().merge(y[e],t))))}};return Xu().isEmpty(y)?l().createElement(a.Button,{size:"small",style:{marginTop:5,width:"100%"},onClick:function(){return b(0)}},"+"):y.map((function(e,n){return l().createElement("div",{style:s},l().createElement(Xh,{query:e,schema:t,onChange:_(n),relation:r,unbind:u,getNewSchema:c}),n==y.length-1?l().createElement(a.Button,{size:"small",style:{marginTop:"0.5rem",width:"100%"},onClick:w},"+"):null)}))},"Flow.SlateEditor":Bc,ExecutionType:Pd};const rb=nb,ob={history:[{state:{},description:{type:"@@INIT",time:kc()()}}],handlePushHistory:[{state:{},description:{type:"@@INIT",time:kc()()}}],index:0,gotoState:function(e){e>=0&&(this.index=e)},push:function(e,t){var n=(0,Wu.Z)(this.history),r=(0,Wu.Z)(this.handlePushHistory);n.unshift({state:e,actionID:o,description:{params:t.params,type:t.type,time:kc()()}}),"@@x-flow/LOAD_DASHBOARD"!=t.type&&"@@x-flow/UPDATE_CELL"!=t.type&&r.unshift({state:e,description:{type:t.type,time:kc()()}}),n.length>=10&&n.pop();var o=t.actionID,i=n[0].actionID;o&&i&&o==i&&(n=n.slice(1)),this.history=n,this.handlePushHistory=r,this.index=0},undo:function(){this.index<this.history.length-1&&this.gotoState(this.index+1)},redo:function(){this.index>0&&this.gotoState(this.index-1)},save:function(e,t){var n=(0,Wu.Z)(this.handlePushHistory);n.unshift({save:!0,state:e,description:{type:t.type,time:kc()()}}),this.handlePushHistory=n,this.index=0},handleInit:function(e){this.handlePushHistory=[{state:e,description:{type:"@@INIT",time:kc()()}}]},init:function(e){this.history=[{state:e,description:{type:"@@INIT",time:kc()()}}]}};function ib(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lb(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ib(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ib(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const ab={FlowContext:function(){return React.useContext(mc)},"flow.method":function(){return{releaseFlow:function(e,n,r){var o=function(e,t){return e?JSON.stringify({params:null==e?void 0:e.params,css:null==e?void 0:e.css,script:null==e?void 0:e.script,cells:null==e?void 0:e.cells,theme:null==e?void 0:e.theme,data:{customVar:t},version:null==e?void 0:e.version}):{}}(dashboard,r);ob.save(dashboard.cells,{type:"@@x-flow/HISTORY_SAVE"});var i=n?{data:(null==e?void 0:e.data)||{},draft:o}:{data:o,draft:o};return(0,t.api)("flow").fetch("/".concat(null==e?void 0:e.id),{method:"PATCH",body:JSON.stringify(lb(lb({},e),i))})},versionFlow:function(e,n){var r=JSON.stringify(e);return ob.save(e.id,{type:"@@x-flow/HISTORY_SAVE"}),(0,t.api)({name:"flow/flowDraft"}).fetch("",{method:"POST",body:JSON.stringify(_.omit(lb(lb({},e),{},{draft:r}),"id"))})}}},"flow.history":function(){var e=(0,t.use)("store",(function(e){return{cells:e&&e.cells}})),n=e.dispatch;return{undo:function(){n({type:"UNDO"})},redo:function(){n({type:"REDO"})},gotoState:function(e){n({type:"GOTO",stateIndex:e})},cells:e.cells}}};var ub=(0,Cc.lazy)((function(){return Promise.all([__webpack_require__.e(67),__webpack_require__.e(350)]).then(__webpack_require__.bind(__webpack_require__,4350))}));const cb=function(e){return React.createElement(ub,e)};var sb=function(e){var t=e.id,n=e.onElementsRemove,r=e.selected,o=e.data,i=!1;(null==o?void 0:o.condition)&&(i=!0);var a={width:40,height:40,borderRadius:"5px",position:"relative",color:"#fff",background:i?"rgb(31, 203, 46)":"#aaa",border:"1px solid ".concat(r?"#778899":"transparent"),textAlign:"center",lineHeight:"39px"};return l().createElement("div",{style:a,className:"react-flow-card"},l().createElement("div",{style:{color:"lightslategrey",transform:"translateX(18px)"},className:"card-remove-button",onClick:function(){return n([{id:t}])}},l().createElement("img",{src:__webpack_require__(8989)})),"条件")},db={type:"object",properties:{condition:{title:"公式值要添加双引号",type:"string",fieldType:"flow_calculator"}}};const pb=function(e){var t=e.id,n=e.sourceX,r=e.sourceY,i=e.targetX,a=e.targetY,u=e.sourcePosition,c=e.targetPosition,s=e.data,d=e.arrowHeadType,p=e.markerEndId,f=e.selected,m=e.onElementsRemove,v=e.pathType,y=e.gatewayPanelRender,g={sourceX:n,sourceY:r,sourcePosition:u,targetX:i,targetY:a,targetPosition:c},h="smoothStep"==v?sa(g):ea(g),b=Xl(d,p),w=Ql({sourceX:n,sourceY:r,targetX:i,targetY:a}),_=(0,o.Z)(w,2),E=_[0],C=_[1],O=y||sb;return l().createElement(l().Fragment,null,l().createElement("path",{id:t,style:{strokeWidth:"3px"},className:"react-flow__edge-path",d:h,markerEnd:b}),l().createElement("foreignObject",{width:100,height:100,x:E-50,y:C-50,className:"edgebutton-foreignobject",requiredExtensions:"http://www.w3.org/1999/xhtml"},l().createElement("div",{className:"edgepanel-body"},l().createElement(bc,{id:t,top:27,right:3}),l().createElement(O,{id:t,selected:f,onElementsRemove:m,data:s}))))};function fb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mb(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?fb(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fb(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const vb=function(e){var r=e.element,o=e.updateElement,i=e.elements,u=(0,t.use)("model.transI18n",{}).transI18n;if(!r)return l().createElement(a.Empty,{style:{padding:30},description:_t1("请选择节点"),image:__webpack_require__(5002)});var c="flowEnd"==(null==r?void 0:r.type),s=(null==r?void 0:r.key)||(null==r?void 0:r.type),d=n().get("flowNodes"),p={};if(c)p={type:"object",properties:{}};else if("gatewayEdge"==s)p=db;else{var f,m,v=d[s]||d["表事件"],y=null==v?void 0:v.paramSchema,g=(null==y||null===(f=y.form)||void 0===f?void 0:f.filter((function(e){return"*"!=e})))||[];p=mb(mb({},y),{},{type:"object",properties:mb({name:{title:"名称",type:"string"}},_.omit(null==y?void 0:y.properties,"name")),form:[{key:"name",validate:function(e){return i.map((function(e){var t;return e.id!==r.id&&(null==e||null===(t=e.data)||void 0===t?void 0:t.name)})).includes(e)?"节点名称不可重复":null}}].concat((0,Wu.Z)(g),["*"]),required:(null==y||null===(m=y.required)||void 0===m?void 0:m.filter((function(e){return"name"!=(null==e?void 0:e.key)||"name"!=e})))||[]})}var h=(null==r?void 0:r.data)||{};return l().useMemo((function(){return l().createElement("div",{className:"flow-editor-form"},l().createElement(Cc.C,{is:"I18nSchemaForm",formKey:r.id,schema:u(p),initialValues:h,component:function(e){return e.children},group:qc,onChange:function(e){var t,n;o((t=e,n={},Object.keys(t).forEach((function(e){_.isNull(t[e])||(n[e]=t[e])})),n))},onSubmit:function(e){},option:{fieldsDefined:Kv}}))}),[r.id])},yb=function(e){var t,n,o,i=useI18n().t;return React.createElement(React.Fragment,null,e.element&&React.createElement("div",{style:{color:"#31395D",fontWeight:500,borderBottom:"1px solid #EFF0F1",padding:15}},React.createElement(Cc.Icon,{type:"setting",style:{color:"#6F87EE",marginRight:5}}),i("配置"),React.createElement("span",{style:{fontWeight:300,fontSize:12}},"---",null!==(t=e.element)&&void 0!==t&&t.title?i(null===(n=e.element)||void 0===n?void 0:n.title):"gatewayEdge"==(null===(o=e.element)||void 0===o?void 0:o.type)?i("分支条件"):"")),React.createElement(vb,r({},e,{elements:e.elements})))};function gb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hb(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?gb(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gb(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var bb=function(e){e.item;var t=e.name,n=e.onSave,r=l().useRef(),i=l().useState(!1),a=(0,o.Z)(i,2),u=a[0],c=(a[1],function(){n(!0)});r.current=c,l().useEffect((function(){if("保存"==t)return document.addEventListener("keydown",s),function(){return document.removeEventListener("keydown",s)}}),[]);var s=function(e){var t="Win32"==navigator.platform||"Windows"==navigator.platform?"Win":"Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform?"Mac":void 0,n="Mac"==t&&e.metaKey&&83==e.keyCode,o="Win"==t&&e.ctrlKey&&83==e.keyCode;(n||o)&&r.current()};return l().createElement("span",{onClick:function(){c()},disabled:u,className:"save-btn"},u&&l().createElement(vc.LoadingOutlined,{style:{color:"#fff"}}),t)},wb=function(){var e=Bs(Ns().mark((function e(t,n,r,o,i,l){var u,c;return Ns().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,__webpack_require__.e(120).then(__webpack_require__.t.bind(__webpack_require__,1120,23)).then((function(e){return e.default}));case 2:return u=e.sent,c=function(e){if(e){var u=hb(hb({},o),{},{flowDraft:i.toObject(),flow:null==t?void 0:t.id,canvas:e,username:r.username,status:l});n(u).then((function(e){200==e.status&&a.message.success(_t1("版本保存成功"))})).catch((function(e){return a.message.error(e.message)}))}},e.abrupt("return",u(document.querySelector(".editor-layout-container")).then((function(e){return c(e.toDataURL()),!0})));case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,o,i,l){return e.apply(this,arguments)}}(),_b=function(e){var n=e.item,r=e.reactFlowInstance;if(!n.id)return null;var u=a.Form.useForm(),c=(0,o.Z)(u,1)[0],s=l().useState(!1),d=(0,o.Z)(s,2),p=d[0],f=d[1],m=(0,t.use)("flow.method").versionFlow,v=(0,i.useState)(!1),y=(0,o.Z)(v,2),g=y[0],h=y[1],b=(0,t.use)("auth.user").user,w=function(){var e=Bs(Ns().mark((function e(t){return Ns().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f(!0),e.next=3,wb(n,m,b,t,r);case 3:e.t1=e.sent,(0,e.t0)(e.t1).then((function(e){e&&(f(!1),h(!1))})).catch((function(e){console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l().createElement(l().Fragment,null,l().createElement("span",{onClick:function(){c.resetFields(),h(!0)}},l().createElement(vc.CloudUploadOutlined,null)," ",_t1("保存版本")),l().createElement(a.Modal,{title:_t1("版本信息"),destroyOnClose:!0,visible:g,onOk:function(){c.submit()},okButtonProps:{loading:p},onCancel:function(){h(!1)}},l().createElement(a.Form,{initialValues:{name:moment(new Date).format("YYYY-MM-DD HH:mm:ss")},name:"basic",labelCol:{span:6},wrapperCol:{span:16},form:c,onFinish:w,onFinishFailed:function(e){},autoComplete:"off"},l().createElement(a.Form.Item,{label:_t1("版本名称"),name:"name",rules:[{required:!0,message:_t1("版本名称不能为空")}]},l().createElement(a.Input,null)),l().createElement(a.Form.Item,{label:_t1("备注"),name:"remark"},l().createElement(a.Input.TextArea,null)))))};function Eb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cb(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Eb(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Eb(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const Ob=function(e){var t=e.id,n=e.sourceX,r=e.sourceY,i=e.targetX,a=e.targetY,u=e.sourcePosition,c=e.targetPosition,s=(e.data,e.arrowHeadType),d=e.markerEndId,p=e.onElementsRemove,f=e.pathType,m=e.style,v={sourceX:n,sourceY:r,sourcePosition:u,targetX:i,targetY:a,targetPosition:c},y="smoothStep"==f?sa(v):ea(v),g=Xl(s,d),h=Ql({sourceX:n,sourceY:r,targetX:i,targetY:a}),b=(0,o.Z)(h,2),w=b[0],_=b[1];return l().createElement(l().Fragment,null,l().createElement("path",{id:t,style:Cb({strokeWidth:"3px"},m),className:"react-flow__edge-path",d:y,markerEnd:g}),l().createElement("foreignObject",{width:40,height:40,x:w-20,y:_-20,className:"edgebutton-foreignobject",requiredExtensions:"http://www.w3.org/1999/xhtml"},l().createElement("div",{className:"edgebutton-body"},l().createElement("button",{className:"edgebutton",onClick:function(e){return function(e,t){e.stopPropagation(),p([{id:t}])}(e,t)}},"×"))))};function xb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kb(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?xb(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xb(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Sb=a.Layout.Footer,Ab=a.Layout.Sider,jb=a.Layout.Content,Db={createTime:1,data:1,canvas:1,username:1,flow:1,remark:1,draft:1,status:1,flowDraft:1},Pb=function(e){var t,n=e.status,o=e.name,i=void 0===o?"":o,u=e.onCloseIcon,c=e.username,s=e.createTime,d=e.querydata,p=e.remark,f=(e.id,{fontSize:"16px",fontWeight:"800",display:"block",lineHeight:0,marginTop:n?12:18,marginBottom:n?-15:-7});return t=i&&(null==i?void 0:i.length)>10?(null==i?void 0:i.substring(0,10))+"...":i,l().createElement(a.Tooltip,{title:l().createElement(l().Fragment,null,l().createElement("span",null,_t1("名称"),"：",i),l().createElement("br",null),p&&l().createElement("span",null,_t1("备注"),"：",p))},l().createElement("span",{style:f},l().createElement("span",{style:{display:"inline-block",width:150}},t),"published"==n&&l().createElement(a.Tag,{color:"#87d068",style:{marginTop:-5,marginLeft:13,padding:"0 5px",lineHeight:"18px"}},_t1("已发布"))),l().createElement("span",{className:"draft-user"}," ",c||""),l().createElement("span",{className:"draft-user"}," ",kc()(s).format("MM-DD h:mm:ss")),l().createElement(a.Popconfirm,{title:_t1("删除该版本，将无法恢复到此状态，确认删除吗?"),onConfirm:u,okText:_t1("确定"),cancelText:_t1("取消")},l().createElement(vc.DeleteOutlined,{style:{float:"right",margin:"22px 10px"}})),l().createElement(Tb,r({},e,{querydata:d})))},Tb=function(e){var n=l().useState(null==e?void 0:e.name),r=(0,o.Z)(n,2),i=r[0],u=r[1];return l().createElement(a.Popconfirm,{icon:null,overlayClassName:"version-history-popover-edit",title:l().createElement(a.Input,{defaultValue:null==e?void 0:e.name,placeholder:_t1("请输入版本名称..."),onChange:function(e){return u(e.target.value)}}),onConfirm:function(){(0,t.api)({name:"flow/flowDraft"}).fetch("/".concat(e.id),{method:"PATCH",body:JSON.stringify({name:i})}).then((function(t){200==t.status&&(a.message.success(_t1("版本名称修改成功")),e.querydata())}))},okText:_t1("确定"),cancelText:_t1("取消"),okButtonProps:{disabled:!i},destroyTooltipOnHide:!0},l().createElement(vc.EditOutlined,{style:{float:"right",margin:"22px 7px"}}))};const Fb=function(n){var i=n.flow_id,u=n.setElements,c=n.setActive;if(!i)return null;var s=l().useState(!1),d=(0,o.Z)(s,2),p=d[0],f=d[1],m=l().useState(!1),v=(0,o.Z)(m,2),y=v[0],g=v[1],h=l().useState([]),b=(0,o.Z)(h,2),w=b[0],E=b[1],C=l().useState(null),O=(0,o.Z)(C,2),x=O[0],k=O[1],S=l().useState(0),A=(0,o.Z)(S,2),j=A[0],D=A[1],P=l().useState(!0),T=(0,o.Z)(P,2),F=T[0],L=T[1],B=(0,t.use)("FlowContext").updateSelectedElements,M=function(){L(!0),D(10);var e=JSON.stringify({sort:{createTime:-1},limit:10,project:Db,filter:{flow:i}});g(!0),(0,t.api)({name:"flow/flowDraft"}).fetch("?query=".concat(e)).then((function(e){var t=e.json;t&&(E(t),k(t[0]),g(!1),t.length<10&&L(!1))}))},N=function(){(0,t.api)({name:"flow/flowDraft"}).fetch("/".concat(x.id),{method:"DELETE"}).then((function(e){200==e.status&&(a.message.success(kc()(x.createTime).format("MM-DD h:mm:ss")+_t1("版本删除成功")),M())}))},I=t.app.get("flowNodes"),R=function(n){var i=n.data,u=l().useState([]),c=(0,o.Z)(u,2),s=c[0],d=c[1],p=l().useState(null),f=(0,o.Z)(p,2),m=(f[0],f[1]),v=(null==i?void 0:i.flowDraft)||null,y=function(){return"未定义component"},g=l().useMemo((function(){return Object.keys(I).map((function(e){var t=I[e]&&I[e].paramSchema,n=I[e]&&I[e].component||y;return{key:e,component:function(e){return l().createElement(n,r({},e,{paramSchema:t,layout:"vertical"}))}}})).reduce((function(t,n){return kb(kb({},t),{},(0,e.Z)({},n.key,n.component))}),{})}),[]),h={defaultEdge:function(e){return l().createElement(Ob,r({},e,{pathType:"smoothStep",onElementsRemove:function(){return a.message.error(_t1("查看版本状态不可操作"))}}))},gatewayEdge:function(e){return l().createElement(pb,r({},e,{pathType:"smoothStep",onElementsRemove:function(){return a.message.error(_t1("查看版本状态不可操作"))}}))}},b=l().createElement("div",{className:"dndflow"},l().createElement("div",{className:"reactflow-wrapper"},l().createElement(wu,{defaultZoom:(null==v?void 0:v.zoom)||1,defaultPosition:(null==v?void 0:v.position)||[0,0],elements:null==v?void 0:v.elements,snapToGrid:!0,nodesDraggable:!1,nodesConnectable:!1,onConnect:function(e){var n=getNodeParentPath(s),r=e.source==e.target,o=n.indexOf(e.source)>=0&&n.indexOf(e.target)>=0,i=s.find((function(t){return t.id==e.target})),l=t.app.get("flowNodes")[i.type].permission,u=function(){if(l){if(_.isFunction(l))return l(s,e);if(!s.find((function(e){return l.indexOf(e.key)>-1})))return"".concat(_t1(i.title)).concat(_t1("只能在起始节点为")).concat(null==l?void 0:l.join("、")).concat(_t1("的流程中连接"))}};u()?a.message.warning(u()):r||o||d((function(t){var n=t.filter((function(t){return t.id==e.source}))[0].type;return It(kb(kb({},e),{},{id:"".concat(e.target,"-").concat(e.source),animated:!0,type:"gateway"==n?"gatewayEdge":"defaultEdge"}),t)}))},onElementsRemove:function(){return a.message.error(_t1("查看版本状态不可操作"))},onElementsCopy:function(){return a.message.error(_t1("查看版本状态不可操作"))},onEdgeUpdate:function(e,t){return d((function(n){return Rt(e,t,n)}))},onLoad:function(e){m(e)},nodeTypes:g,edgeTypes:h,deleteKeyCode:null},l().createElement(zu,{style:{transform:"translateX(".concat(10,"px)")}}),l().createElement(Hu,{color:"#aaa",gap:16}))));return l().createElement(Vu,null,l().createElement(fc,null,b))};return l().createElement(l().Fragment,null,l().createElement("span",{onClick:function(){f(!0),M()}},l().createElement(vc.FileSearchOutlined,null)," ",_t1("查看历史版本")),l().createElement(a.Modal,{visible:p,width:"70%",title:_t1("历史版本"),destroyOnClose:!0,bodyStyle:{padding:5},okText:_t1("编辑此版本"),onOk:function(e){if(x){try{u(x.flowDraft.elements),B([]),c(null)}catch(e){console.log(e)}f(!1),a.message.success(_t1("应用版本流程成功"))}else a.message.error(_t1("请先选择版本"))},okButtonProps:{disabled:w&&0==w.length},onCancel:function(){return f(!1)}},w&&w.length>0||y?l().createElement(a.Layout,{className:"version-history"},l().createElement(Ab,{theme:"light",width:"260",style:{maxHeight:600,overflow:"auto"}},l().createElement(a.Menu,{mode:"inline",onSelect:function(e){var t=e.item,n=t&&t.props&&t.props.item;k(n)},selectedKeys:[x&&(null==x?void 0:x.id)]},y?l().createElement(Cc.Loading,null):w.map((function(e){return[l().createElement(a.Menu.Item,{key:e.id,item:e,style:{height:60,margin:0,lineHeight:"60px"}},l().createElement(Pb,r({},e,{onCloseIcon:N,querydata:M}))),l().createElement(a.Menu.Divider,null)]}))),F&&0==y&&l().createElement(Sb,{style:{padding:"7px 69px",backgroundColor:"transparent"}},l().createElement(a.Button,{onClick:function(){D((function(e){return e+10}));var e=JSON.stringify({sort:{createTime:-1},skip:j,limit:10,project:Db,filter:{flow:i}});(0,t.api)({name:"flow/flowDraft"}).fetch("?query=".concat(e)).then((function(e){var t=e.json;if(t){var n=[].concat((0,Wu.Z)(w),(0,Wu.Z)(t));E(n),k(n[0]),t.length<10&&L(!1)}}))},style:{textAlign:"center"}},_t1("查看更多")))),l().createElement(jb,{style:{maxHeight:600,padding:15,overflow:"hidden"}},!y&&l().createElement(R,{data:x}))):l().createElement(a.Empty,{style:{marginBottom:".5rem"},image:__webpack_require__(2122),imageStyle:{height:100},description:l().createElement("span",{style:{marginTop:"1rem",display:"inline-block"}},_t1("暂无数据"))})))};var Lb=__webpack_require__(4301),Bb=__webpack_require__.n(Lb);function Mb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nb(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Mb(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mb(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ib={marginTop:40},Rb=function(e){var n=e.setElements,r=e.id,o=React.createRef(),i=(0,t.api)({name:""}).getHost();return React.createElement(React.Fragment,null,React.createElement("span",{onClick:function(){o.current.click()}},React.createElement(Cc.Icon,{type:"upload"})," ",_t1("导入文件")),React.createElement("input",{type:"file",ref:o,style:{display:"none"},name:"file",onChange:function(){var e=o.current.files[0],l=new FormData;l.append("file",e);var u=Math.random();a.message.loading({content:_t1("文件导入中..."),key:u,duration:0,style:Ib}),Bb()("".concat(i,"flow/flow/offlineImport"),{method:"POST",headers:_.omit((0,t.api)({name:""}).getHeaders(),"Content-Type"),body:l}).then((function(e){if(e.status>=200&&e.status<300)return e.text();var t=new Error(e.statusText);throw t.response=e,t})).then((function(e){var t;a.message.success({content:_t1("导入成功"),key:u,duration:2,style:Ib});var o=(null===(t=(e?JSON.parse(e):{}).flow)||void 0===t?void 0:t.elements)||[];n(function(e,t){var n=_.cloneDeep(e);return null==e||e.forEach((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;if("defaultEdge"!=r.type&&"gatewayEdge"!=r.type){var i,l="起始节点"==(null==r||null===(i=r.category)||void 0===i?void 0:i[0])?t:qg(8,16),a=_.compact(e.map((function(e,t){return e.target==r.id?t:null}))),u=_.compact(e.map((function(e,t){return e.source==r.id?t:null})));null==a||a.forEach((function(e){var t;n[e]&&(n[e]=Nb(Nb({},n[e]),{},{target:l,id:null===(t=n[e].id)||void 0===t?void 0:t.replace(r.id,l)}))})),null==u||u.forEach((function(e){var t;n[e]&&(n[e]=Nb(Nb({},n[e]),{},{source:l,id:null===(t=n[e].id)||void 0===t?void 0:t.replace(r.id,l)}))})),n[o]=Nb(Nb({},r),{},{id:l})}})),n}(o,r))})).catch((function(e){return a.message.error({content:_t1("导入失败"),key:u,duration:2,style:Ib})}))}}))},Zb=function(e){var n=e.title,r=e.id,o=(0,t.api)({name:""}).getHost();return React.createElement("span",{onClick:function(){var e=Math.random();a.message.loading({content:_t1("文件导出中..."),key:e,duration:0,style:Ib}),Bb()("".concat(o,"flow/flow/export?id=").concat(r),{method:"GET",headers:_.omit((0,t.api)({name:""}).getHeaders(),"Content-Type")}).then((function(t){t.status>=200&&t.status<300?t.blob().then((function(t){a.message.success({content:_t1("导出成功"),key:e,duration:2,style:Ib});var r=window.URL.createObjectURL(t),o=window.document.createElement("a");o.href=r,o.download="".concat(n,".zip"),o.click(),window.URL.revokeObjectURL(r)})):a.message.error({content:_t1("导出失败"),key:e,duration:2,style:Ib})})).catch((function(t){return a.message.error({content:_t1("导出失败"),key:e,duration:2,style:Ib})}))}},React.createElement(Cc.Icon,{type:"download"})," ",_t1("导出文件"),React.createElement(a.Tooltip,{title:_t1("导出最新的流程草稿数据"),placement:"bottom"},React.createElement(Cc.Icon,{type:"questionCircle",style:{marginLeft:8}})))};const qb=function(e){var t=e.id,n=e.setElements,r=e.setActive;return React.createElement(a.Dropdown,{overlay:React.createElement(a.Menu,null,React.createElement(a.Menu.Item,null,React.createElement(Rb,e)),React.createElement(a.Menu.Item,null,React.createElement(Zb,e)),React.createElement(a.Menu.Item,null,React.createElement(Fb,{flow_id:t,setElements:n,setActive:r}))),trigger:["click"]},React.createElement("span",{style:{fontSize:25,marginLeft:5}},React.createElement(Cc.Icon,{type:"ellipsis",style:{color:"#4154b9"}})))};function zb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ub(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?zb(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zb(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const Gb=function(e){var t=e.schema,r=e.data,o=void 0===r?{}:r,i=e.signatures,u=void 0===i?[]:i,c=useI18n().t,s=function(e){var t=e.value;return null!=t?t:l().createElement(l().Fragment,null)},d=function(e){var t=e.children;return l().createElement(l().Fragment,null,t)},p=(0,Cc.C)("Form.FieldGroup"),f=function(e,t){return e&&function(e){return n().get("schema_converter").reduce((function(t,n){return n(t,e,{path:[],lookup:{}})}),{})}(e).fields.map((function(r){var o,i=function(e){return n().get("fieldRenders").reduce((function(t,n){return n(t,e,{})}),null)}(null!==(o=e.properties)&&void 0!==o&&o[r.key]?Ub(Ub({},e.properties[r.key]),r.schema):r.schema)||s;return l().createElement(p,{item:t,key:r.key,label:r.label,field:r,meta:{}},l().createElement(i,{value:t[r.key],wrap:d}))}))},m=[{title:c("用户名"),dataIndex:"username",key:"username"},{title:c("事由说明"),dataIndex:"causeDescription",key:"causeDescription"}];return l().createElement(l().Fragment,null,Xu().isEmpty(t)?l().createElement(a.Form,null,null!=o&&o.cronExpression?null==o?void 0:o.cronInterval:f(t,o)):l().createElement(Oc.Model,{schema:t},l().createElement(a.Form,null,f(t,o))),!Xu().isEmpty(u)&&l().createElement(a.Card,{title:c("电子签名"),style:{marginRight:10}},l().createElement(a.Table,{dataSource:u,columns:m,pagination:!1})))};function $b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yb(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?$b(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Hb=function(e){var t,n=e.schema,r=e.data,o=e.loading,i=e.visible,u=e.setVisible,c=e.children,s=e.type,d=Xu().cloneDeep(n);null!=d&&d.form&&!Xu().isEmpty(r)&&(d.form=null===(t=n.form)||void 0===t?void 0:t.filter((function(e){var t;return(null===(t=Xu().keys(r))||void 0===t?void 0:t.indexOf(e))>-1})));var p=l().useMemo((function(){return Xu().isPlainObject(r)?l().createElement(a.Card,{size:"small",bodyStyle:{maxHeight:300,overflowY:"auto"}},o?l().createElement(Cc.Loading,null):l().createElement(Gb,{schema:d,data:r})):l().createElement(Vb,{schema:n,data:r,type:s})}),[JSON.stringify(d),o]);return l().createElement(a.Popover,{visible:i,onVisibleChange:function(e){return u&&u(e)},placement:"right",trigger:"click",overlayStyle:{width:800},content:p},l().createElement("a",{onClick:function(){return u&&u(!0)}},c))},Vb=function(e){var n=e.schema,r=void 0===n?{}:n,o=e.data,i=e.type,u=void 0===i?"table":i,c=function(e){var t=e.value;return null!=t?t:l().createElement(l().Fragment,null)},s=null!=r&&r.form?Xu().uniq([].concat((0,Wu.Z)(Xu().difference(r.form,["*"])),(0,Wu.Z)(Xu().keys(null==r?void 0:r.properties)))):Xu().keys(null==r?void 0:r.properties),d=s&&Xu().map(s,(function(e){var n=r.properties[e],o=function(e){return t.app.get("fieldRenders").reduce((function(t,n){return n(t,e,{})}),null)}(n)||c;return{title:n.title,dataIndex:e,key:e,render:function(e,t){return l().createElement(o,{value:e,wrap:function(e){return e.children},inList:!0})}}}));return"table"==u&&(d=[].concat((0,Wu.Z)(d),[{title:"创建时间",dataIndex:"createTime",key:"createTime",render:function(e,t){return e?moment(e).format("YYYY-MM-DD HH:mm:ss"):null}},{title:"创建人员",dataIndex:"creator",key:"creator",render:function(e,t){return(null==e?void 0:e.name)||e||null}},{title:"更新时间",dataIndex:"modifyTime",key:"modifyTime",render:function(e,t){return e?moment(e).format("YYYY-MM-DD HH:mm:ss"):null}},{title:"更新人员",dataIndex:"modifyUser",key:"modifyUser",render:function(e,t){return(null==e?void 0:e.name)||e||null}}])),Xu().isEmpty(o)?l().createElement(a.Empty,{description:_t1("暂无数据"),image:__webpack_require__(5002)}):l().createElement(Oc.Model,{schema:r},l().createElement(a.Table,{bordered:!0,dataSource:o,columns:d,pagination:!1,size:"small",scroll:{x:700,y:400}}))},Wb=function(e){var t=e.data,n=e.children,r=e.rootName,i=void 0===r?_t1("返回结果"):r,u=l().useState(),c=(0,o.Z)(u,2),s=c[0],d=c[1],p=l().createElement(Cc.C,{is:"Dashboard.VariableTree",rootName:i,data:t||{},onClick:function(){return null}});return l().createElement(a.Popover,{visible:s,onVisibleChange:d,placement:"right",trigger:"click",overlayStyle:{width:800},content:p},l().createElement("a",{onClick:function(){return d(!0)}},n))};const Kb=function(n){var r=n.id,i=n.data,u=n.config,c=n.children,s=l().useState(),d=(0,o.Z)(s,2),p=d[0],f=d[1],m=l().useState(),v=(0,o.Z)(m,2),y=v[0],g=v[1],h=l().useState(),b=(0,o.Z)(h,2),w=b[0],_=b[1];l().useEffect((function(){if(r&&w){var n=window._flow_record_httpCache_;null!=n&&n[r]?f(n[r]):(g(!0),(0,t.api)({name:"core/t/schema"}).get(r).then((function(t){if(t.schema){if(null!=u&&u.updateField){var n,o,i;null!==(n=t.schema)&&void 0!==n&&n.form&&(t.schema.form=Xu().intersection(t.schema.form,u.updateField.map((function(e){return e.id}))));var l=null===(o=u.updateField)||void 0===o?void 0:o.filter((function(e){return["增加","减少"].includes(null==e?void 0:e.change)}));!Xu().isEmpty(l)&&null!==(i=t.schema)&&void 0!==i&&i.properties&&l.forEach((function(e){var n=t.schema.properties[null==e?void 0:e.id];n&&(t.schema.properties[e.id]=Yb(Yb({},n),{},{title:(n.title||"")+"(".concat(e.change,")")}))}))}}else a.message.warning(_t1("该表不存在"));f(t.schema),g(!1),window._flow_record_httpCache_=Yb(Yb({},window._flow_record_httpCache_),{},(0,e.Z)({},r,t.schema))})))}}),[r,w]);var E=Xu().isPlainObject(i)&&p?Xu().mapValues(i,(function(t,n){var r,o=(null==p||null===(r=p.properties)||void 0===r?void 0:r[n])||{};if(t&&("关联字段"==o.config||"object"==o.type)&&!Xu().isPlainObject(t)){var i,l,a,u=o.showField||(null===(i=o.relate)||void 0===i||null===(l=i.fields)||void 0===l||null===(a=l[0])||void 0===a?void 0:a.key)||"name";return Xu().isArray(t)?t.map((function(t){return null!=t&&t[u]||Xu().isObject(t)?t:(0,e.Z)({},u,t)})):(0,e.Z)({},u,t)}if("datePicker"==o.fieldType&&Xu().isNumber(t)){var c=moment.duration(t,"seconds").days(),s=moment.duration(t,"seconds").hours(),d=moment.duration(t,"seconds").minutes();return"".concat(d?_t1("{{m}}分",{m:d}):s?_t1("{{h}}时",{h:s}):c?_t1("{{d}}天",{d:c}):_t1("{{v}}秒",{v:t}))}return t})):i;return r?p?l().createElement(Hb,{schema:p,data:E,loading:y,visible:w,setVisible:_},c):l().createElement("a",{onClick:function(){return _(!0)}},c):c};var Xb=function(e){var n;return l().createElement(l().Fragment,null,function(e){var n,r=e.variables[e.elementId]||e.variables||{},o=e.setting||{};if("nodeData"==e.type||"modelData"==e.type){var i,a,u,c=null===(i=r["#$table"])||void 0===i?void 0:i.id,s=null===(a=r["#$tableData"])||void 0===a?void 0:a.id,d=Xu().omit(r[s]||r,["#$department","#$table","#$tableData","time"])||{},p=Xu().keys(d)||[],f="",m="",v=[];o.tags&&o.tags.forEach((function(e){var t,n,o;c&&(null===(t=e.table)||void 0===t?void 0:t.id)==c&&(f=e.table.name),s&&(null===(n=e.tableData)||void 0===n?void 0:n.id)==s&&(m=e.tableData.name);var i=p.find((function(t){return(null==e?void 0:e.id)==t}));p.indexOf(e.id)>-1&&(v=[].concat((0,Wu.Z)(v),["".concat(e.name||"","(").concat(e.id,"):").concat(null!==(o=r[i])&&void 0!==o?o:"")]))}));var y=Xu().isEmpty(v)?"":null===(u=Xu().uniq(v))||void 0===u?void 0:u.join("，");return"nodeData"==e.type?s&&"".concat(m,"(").concat(s,") - ").concat(y):s&&"".concat(f,"(").concat(s,") - ").concat(y)}if("boot"==e.type)return"".concat(r.serviceName).concat(_t1("启动"));if("login"==e.type)return _t1("{{user}}登录",{user:r.userName||(null===(n=r["#$user"])||void 0===n?void 0:n.name)});if("warning"==e.type){var g,h,b,w,_,E,C,O,x,k=r["#$tableData"]?r:(null===(g=Xu().values(r).filter((function(e){return(0,Ku.isPlainObject)(e)})))||void 0===g?void 0:g[0])||{},S=k["#$tableData"]||{},A=(null===(h=o.table)||void 0===h||null===(b=h.find((function(e){var t;return e.id==(null===(t=k["#$table"])||void 0===t?void 0:t.id)})))||void 0===b?void 0:b.title)||(null===(w=k["#$tableData"])||void 0===w?void 0:w._tableName)||"",j=(null===(_=o.dataPoint)||void 0===_||null===(E=_[0])||void 0===E||null===(C=E.tableData)||void 0===C?void 0:C.name)||"";return"commonTable"==o.majorType?"".concat(_t1("普通表报警"),": ").concat((null===(O=o.table)||void 0===O||null===(x=O.map((function(e){return null==e?void 0:e.title})))||void 0===x?void 0:x.join("、"))||""," ").concat(k.desc||""):"".concat(A?A+" - ":""," ").concat(j," (").concat(S.id||"",") ").concat(k.desc||"")}if("command"==e.type){var D,P,T,F,L=r.cmdName||(null===(D=Xu().values(r)[0])||void 0===D?void 0:D.cmdName)||"",B=o.cmdStatus||"",M="send"==B?_t1("已发送"):"success"==B?_t1("成功"):"fail"==B?_t1("失败"):"";return"".concat((null===(P=o.table)||void 0===P?void 0:P.title)||""," - ").concat((null===(T=r["#$tableData"])||void 0===T?void 0:T.name)||"","(").concat((null===(F=r["#$tableData"])||void 0===F?void 0:F.id)||"",") ").concat("send"==B?"":_t1("执行")).concat(L+M)}if("worksheetRecord"==e.type){var N,I,R,Z=(null===(N=o.table)||void 0===N?void 0:N.title)||(null===(I=o.table)||void 0===I?void 0:I.name)||"";return l().createElement("span",null,_t1(r.extFlowType||"")," - ",_t1("表名"),"(",Z,") ",_t1("记录"),"id: ",l().createElement(Kb,{id:null===(R=o.table)||void 0===R?void 0:R.id,data:r},r.id))}if("worksheet"==e.type){var q,z=(null===(q=r["#$table"])||void 0===q?void 0:q.title)||"";return l().createElement("span",null,_t1(r.type||"")," - ",_t1("表名"),"(",z,")")}if("schedule"==e.type)return"period"==o.selectType?"".concat(_t1("周期触发")," - ").concat(r.interval||""):_t1("仅执行一次");if("driverEvent"==e.type){var U,G,$,Y,H=(null===(U=o.table)||void 0===U?void 0:U.title)||"",V=(null===(G=o.tableData)||void 0===G?void 0:G.name)||"";return"".concat(H?H+" - ":"").concat(V?V+"("+(null===($=o.tableData)||void 0===$?void 0:$.id)+")":""," ").concat(_t1("事件"),": ").concat((null===(Y=o.event)||void 0===Y?void 0:Y.name)||"")}return function(e){var n,r=e.variables||{},o=r[e.elementId]||r||{},i=e.setting,a=null===(n=t.app.get("flowNodes"))||void 0===n?void 0:n[null==e?void 0:e.type],u=Xu().last(null==a?void 0:a.category);if("FAILED"==e.status||"CREATED"==e.status)return(null==a?void 0:a.title)||"";if("INTERRUPT"==e.status)return l().createElement("span",null,(null==a?void 0:a.title)||""," - ",_t1("终止"));if("表处理节点"==u){var c,s,d,p,f,m,v,y,g,h,b,w,_,E,C,O,x,k,S,A,j,D,P=null!==(c=i.table)&&void 0!==c&&c.id.startsWith("{{")&&null!==(s=i.table)&&void 0!==s&&s.id.endsWith("}}")?Xu().get(r,null===(d=i.table)||void 0===d||null===(p=d.id)||void 0===p||null===(f=p.match(/(?<=\{{)(.+?)(?=\}})/g))||void 0===f?void 0:f[0]):null===(m=i.table)||void 0===m?void 0:m.id;return"searchExTableRecord"==e.type?"【".concat((null===(g=i.table)||void 0===g?void 0:g.title)||(null===(h=i.table)||void 0===h?void 0:h.name)||"","】").concat(_t1("查询出{{count}}条记录",{count:(null===(b=o.data)||void 0===b?void 0:b.length)||0})):"deleteExTableRecord"==e.type?"【".concat((null===(w=i.table)||void 0===w?void 0:w.title)||(null===(_=i.table)||void 0===_?void 0:_.name)||"","】").concat(_t1("删除{{count}}条记录",{count:o.count||0})):"updateExTableRecord"==e.type?l().createElement("span",null,"【",(null===(E=i.table)||void 0===E?void 0:E.title)||(null===(C=i.table)||void 0===C?void 0:C.name)||"","】",_t1("更新记录")," ",l().createElement(Kb,{id:P,data:o,config:i},_t1("更新{{count}}条记录",{count:o.count||0}))):"addExTableRecord"==e.type?"multiple"==i.addType?l().createElement("span",null,"【",(null===(k=i.table)||void 0===k?void 0:k.title)||(null===(S=i.table)||void 0===S?void 0:S.name)||"","】",_t1("新增记录")," ",l().createElement(Kb,{id:P,data:o.data},_t1("批量新增"),(null===(A=o.data)||void 0===A?void 0:A.length)||0,_t1("条记录"))):l().createElement("span",null,"【",(null===(O=i.table)||void 0===O?void 0:O.title)||(null===(x=i.table)||void 0===x?void 0:x.name)||"","】",_t1("新增记录")," ",_t1("记录"),"id: ",l().createElement(Kb,{id:P,data:o},o.id)):"addUpdateExTableRecord"==e.type?l().createElement("span",null,"【",(null===(j=i.table)||void 0===j?void 0:j.title)||(null===(D=i.table)||void 0===D?void 0:D.name)||"","】",_t1("新增或更新记录")," ",l().createElement(Kb,{id:P,data:(null==o?void 0:o.data)||o,config:i},_t1("新增或更新{{count}}条记录",{count:o.count||0}))):l().createElement("span",null,"【",(null===(v=i.table)||void 0===v?void 0:v.title)||(null===(y=i.table)||void 0===y?void 0:y.name)||"","】",null==a?void 0:a.title," ")}if("全局变量处理节点"==u)return"createSystemVariable"==e.type?"".concat(_t1("新增{{type}}变量",{type:_t1(function(e){switch(e){case"number":return _r("数字类型");case"string":return _r("字符串类型");case"boolean":return _r("布尔类型");case"date":return _r("日期类型");case"object":return _r("对象类型");case"array":return _r("数组类型");default:return""}}(i.type))})):"updateSystemVariable"==e.type?_t1("更新变量"):"".concat(_t1("删除{{length}}个变量",{length:i.length}));if("deleteNodeAttribute"==e.type)return _t1("删除属性值");if("updateNodeAttribute"==e.type)return _t1("更新属性值");if("数据节点"==u){var T,F="";if("fx"==e.type)return"".concat(_t1("计算值"),": ").concat(null!==(T=o.value)&&void 0!==T?T:"");if("StatisticsNode"==e.type)return"".concat(_t1(i.selectType)," ").concat(_t1("统计数{{count}}个",{count:o.count}));if("historyData"==e.type){var L,B,M=(null===(L=i.query)||void 0===L?void 0:L.map((function(e){var t,n,r=null==e||null===(t=e.fields)||void 0===t||null===(n=t.map((function(e){var t;if(e){var n=e.indexOf("(")>-1?e.slice(0,e.indexOf("(")):null;return{tagId:(n?null===(t=e.replace(n,""))||void 0===t?void 0:t.slice(1,-1):e)||"",method:Xu().lowerCase(n)}}})))||void 0===n?void 0:n[0];return{tag:r,tagName:null==e?void 0:e.tagName,nodeId:e.id}})))||[];F=null==M||null===(B=M.map((function(e){var t,n,r,i,l,a,u=null===(t=e.tag)||void 0===t?void 0:t.method,c=u?(null===(n=o[e.nodeId])||void 0===n?void 0:n[u])||o[u]:(null===(r=o[e.nodeId])||void 0===r?void 0:r[null===(i=e.tag)||void 0===i?void 0:i.tagId])||(null==o?void 0:o[null===(l=e.tag)||void 0===l?void 0:l.tagId]);return"".concat(_t1("数据点"),": ").concat(e.tagName||"","(").concat(null===(a=e.tag)||void 0===a?void 0:a.tagId,") ").concat(_t1("数据点值"),": ").concat(c)})))||void 0===B?void 0:B.join("、")}else if("realTimeData"==e.type){var N,I;F=null===(N=i.query)||void 0===N||null===(I=N.map((function(e){var t,n;return"".concat(_t1("数据点"),": ").concat(e.tagName,"(").concat(e.tagId,") ").concat(_t1("数据点值"),": ").concat(null===(t=o[e.id])||void 0===t||null===(n=t[e.tagId])||void 0===n?void 0:n.value)})))||void 0===I?void 0:I.join("、")}else{var R;if("prevData"!=e.type)return"writePoints"==e.type?(F=Xu().compact(null===(R=o.fields)||void 0===R?void 0:R.map((function(e){var t;return null!=e&&e.key?"".concat(e.key,": ").concat(null!==(t=e.value)&&void 0!==t?t:""):""}))),"".concat(_t1(null==a?void 0:a.title),"   ").concat(F)):_t1(null==a?void 0:a.title);var Z,q=(null===(Z=i.tags)||void 0===Z?void 0:Z.map((function(e){var t,n=null===(t=i.preType)||void 0===t?void 0:t.map((function(t){var n,r,i,l=function(e){switch(e){case"first":return _r("前一项数据");case"second":return _r("前两项数据");case"third":return _r("前三项数据");default:return}}(t),a=(null==e||null===(n=e.tableData)||void 0===n?void 0:n.id)&&(null==e?void 0:e.id)&&(null===(r=o[e.tableData.id])||void 0===r||null===(i=r[e.id])||void 0===i?void 0:i[t]);return l?"".concat(_t1(l),": ").concat(a):""}));return"".concat(e.name,"(").concat(e.id,")  ").concat(n)})))||[];F=q.join("、")}return"".concat(_t1(null==a?void 0:a.title),": ").concat(F)}if("通知"==u){var z,U,G,$="email"==e.type?o.title:"sms"==e.type?"".concat(_t1("短信模板")).concat(null!==(z=o.code)&&void 0!==z?z:""):o.content,Y=(null===(U=o.users)||void 0===U||null===(G=U.map((function(e){return null==e?void 0:e.name})))||void 0===G?void 0:G.join("、"))||"";if("wechat"==e.type){var H,V=i.contentPreview,W=$?JSON.parse($):null;return W&&Xu().forEach(W,(function(e,t){var n;V=null===(n=V)||void 0===n?void 0:n.replace(new RegExp("".concat(t,".DATA"),"g"),e.value)})),_t1("发送 {{content}} 给 {{users}}",{content:null!==(H=V)&&void 0!==H?H:"",users:Y})}return _t1("发送 {{content}} 给 {{users}}",{content:null!=$?$:"",users:Y})}if("flowUserFillin"==e.type){var K,X=(null===(K=Xu().map(o.agreeUser,(function(e){var t;return(null==e||null===(t=e["#$user"])||void 0===t?void 0:t.name)||(null==e?void 0:e.name)})))||void 0===K?void 0:K.join(","))||"",J=i.tableName?_t1("{{users}}对{{table}}进行填写",{users:X,table:i.tableName}):_t1("{{users}}进行填写",{users:X});return"CREATED"==e.status?_t1("填写"):l().createElement("span",null,J," ",l().createElement(Hb,{schema:i.form,data:o},_t1("填写字段")))}if("flowUserCC"==e.type){var Q,ee,te=(null===(Q=o.ccUser)||void 0===Q||null===(ee=Q.map((function(e){var t;return null==e||null===(t=e["#$user"])||void 0===t?void 0:t.name})))||void 0===ee?void 0:ee.join("、"))||"",ne=i.tableName||"";return _t1("抄送{{tableName}}给{{users}}",{tableName:ne,users:te})}if("flowUserApprove"==e.type){var re,oe="disagree"==o.approvalStatus?Xu().map(o.disagreeUser,(function(e){return(null==e?void 0:e["#$user"])||e})):Xu().map(o.agreeUser,(function(e){return(null==e?void 0:e["#$user"])||e})),ie=oe?Xu().isArray(oe)?null===(re=oe.map((function(e){return e.name})))||void 0===re?void 0:re.join("、"):oe.name:"",le=i.tableName?_t1("{{users}}对{{table}}进行审批，",{users:ie,table:i.tableName}):_t1("{{users}}进行审批，",{users:ie});return"CREATED"==e.status?_t1("审批"):"".concat(ie?le:"").concat(_t1("审批{{approvalStatus}}",{approvalStatus:"disagree"==o.approvalStatus?_t1("未通过"):_t1("通过")}))}if("alarmNode"==e.type){var ae,ue="device"==i.warning_type?_t1("设备表记录报警"):"general"==i.warning_type?_t1("其他数据报警"):"";return"".concat(ue," ").concat(_t1("报警描述"),": ").concat(null!==(ae=o.desc)&&void 0!==ae?ae:"")}if("网关"==u){var ce,se=o.url||o.host?" ".concat(o.url||o.host):"";return a.title+"".concat("flowDBClient"==e.type?null!==(ce=" "+i.host)&&void 0!==ce?ce:"":se)}if("cmd"==e.type){var de,pe,fe,me,ve,ye,ge,he,be,we,_e="table"==i.commandType?_r("设备表指令"):"tableData"==i.commandType?_r("设备指令"):"",Ee=(null===(de=o.command)||void 0===de?void 0:de.params)||o.params,Ce=null===(pe=Xu().values(Ee))||void 0===pe?void 0:pe[0],Oe="",xe=(null===(fe=o.command)||void 0===fe||null===(me=fe.formSchema)||void 0===me?void 0:me.schema)||(null===(ve=o.command)||void 0===ve?void 0:ve.formSchema),ke=(null===(ye=o.command)||void 0===ye||null===(ge=ye.form)||void 0===ge?void 0:ge[0])||{};if(Xu().isNil(Ce)||Xu().isEmpty(Ce)&&Xu().isObject(Ce))Oe="";else if(xe){var Se,Ae,je,De,Pe,Te;"array"==(null==ke?void 0:ke.type)&&null!==(Se=xe.properties)&&void 0!==Se&&null!==(Ae=Se.arr)&&void 0!==Ae&&null!==(je=Ae.items)&&void 0!==je&&je.schema&&(xe=null===(De=xe.properties)||void 0===De||null===(Pe=De.arr)||void 0===Pe||null===(Te=Pe.items)||void 0===Te?void 0:Te.schema),Oe=l().createElement(Hb,{schema:xe,data:Ce,type:"cmd"},_t1("指令值"))}else if(ke.tableValue){var Fe;Oe=l().createElement(Kb,{id:null===(Fe=o.command.form)||void 0===Fe?void 0:Fe[0].tableValue,data:Ce,type:"cmd"},_t1("指令值"))}else if("select"==ke.type&&ke.select){var Le,Be,Me,Ne,Ie=null===(Le=ke.select)||void 0===Le||null===(Be=Le.enum)||void 0===Be?void 0:Be.indexOf(Ce);Oe="".concat(_t1("指令值为"),": ")+((null===(Me=ke.select)||void 0===Me||null===(Ne=Me.enum_title)||void 0===Ne?void 0:Ne[Ie])||"")}else if("array"==ke.type&&ke.select2){var Re,Ze=null===(Re=Ce.map((function(e){var t,n,r,o,i=null===(t=ke.select2)||void 0===t||null===(n=t.enum)||void 0===n?void 0:n.indexOf(e);return(null===(r=ke.select2)||void 0===r||null===(o=r.enum_title)||void 0===o?void 0:o[i])||""})))||void 0===Re?void 0:Re.join(",");Oe="".concat(_t1("指令值为"),": ")+Ze}else Oe="".concat(_t1("指令值为"),": ").concat(Ce);var qe="tableData"==i.commandType?o.tableData?"".concat(_t1("设备"),": ")+(null===(he=o.tableData.map((function(e){return"".concat(e.name,"(").concat(e.id,")")})))||void 0===he?void 0:he.join("、")):"":i.tableDataIds?"编号: ".concat(i.tableDataIds):"";return l().createElement("span",null,_t1(_e)," ",qe," ",_t1("执行{{name}}",{name:(null===(be=i.command)||void 0===be?void 0:be.name)||(null===(we=Xu().keys(Ee))||void 0===we?void 0:we[0])||""})," ",Oe)}if("delayed"==e.type){var ze=o.untilTime?kc()(o.untilTime).format("YYYY-MM-DD HH:mm:ss"):"";return ze?_t1("延时到{{time}}执行",{time:ze}):_t1("延时执行")}if("webhook"==e.type){var Ue,Ge=null===(Ue=i.url)||void 0===Ue?void 0:Ue.match(/\${.*?\}/g),$e=null==Ge?void 0:Ge.map((function(e){return Xu().get(r,null==e?void 0:e.slice(2,-1))})),Ye=i.url;return i.url&&!Xu().isEmpty(Ge)&&Ge.forEach((function(e,t){return Ye=i.url.replace(e,(null==$e?void 0:$e[t])||"")})),"url: ".concat(Ye||""," ").concat(_t1("请求方式"),": ").concat(i.method)}return"dataInterface"==e.type?"".concat(_t1("操作标识"),": ").concat(i.opKeyLabel||""):"flowExtension"==e.type?l().createElement("span",null,_t1("扩展服务"),": ",i.serverName||"","  ",l().createElement(Wb,{data:o},_t1("返回参数"))):_t1(null==a?void 0:a.title)}(e)}(e),null!==(n=e.variables)&&void 0!==n&&n.__mock__?l().createElement(a.Tag,{style:{marginLeft:5,color:"#696969"},className:"trigger-title"},_t1("模拟触发")):null)},Jb=function(e){if(!e)return null;var t="YYYY-MM-DD HH:mm:ss",n=e.type,r=e.count,o=e.unit,i=e.fromNow,l=e.time,a=e.range,u=e.historyTime,c=u?kc()(u):kc()(),s=u?kc()(u):kc()();return"forward"==n&&r&&o?i?{$gte:c.subtract(r,o).format(t),$lte:s.format(t)}:{$gte:c.startOf(o).subtract(r,o).format(t),$lte:s.startOf(o).format(t)}:"backward"==n&&r&&o?i?{$gte:c.add(r,o).format(t),$lte:s.format(t)}:{$gte:c.endOf(o).add(r,o).format(t),$lte:s.endOf(o).format(t)}:"now"==n&&o?{$gte:c.startOf(o).format(t),$lte:s.format(t)}:"before"==n&&l?{$lte:kc()(l).format(t)}:"after"==n&&l?{$gte:kc()(l).format(t)}:"between"==n&&a&&a.lte&&a.gte?{$gte:kc()(a.gte).format(t),$lte:kc()(a.lte).format(t)}:null},Qb=__webpack_require__(3703);function ew(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tw(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ew(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ew(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}cs()(Qb.Z,{insert:"head",singleton:!1}),Qb.Z.locals;var nw={category:[],key:"flowEnd",position:{x:660,y:670},paramSchema:{},title:_t1("结束"),type:"flowEnd"},rw=function(e){var t,n,r=e.selected,o=e.data,i=null==o?void 0:o.condition,u=!1;i&&(u=!0);var c={width:100,maxHeight:76,borderRadius:"5px",position:"relative",color:"#fff",background:u?"rgb(31, 203, 46)":"#aaa",border:"1px solid ".concat(r?"#778899":"transparent"),textAlign:"center",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",wordBreak:"break-all",padding:2},s=(null==i||null===(t=i.value)||void 0===t||null===(n=t.map((function(e){return Xu().isPlainObject(e)?null==e?void 0:e.name:e})))||void 0===n?void 0:n.join(""))||"";return l().createElement("div",{style:c,className:"react-flow-card"},l().createElement(a.Tooltip,{trigger:"click",title:s},s))};const ow=function(u){var c,s,d,p=u.item,f=u.records,m=null==f||null===(c=f[0])||void 0===c?void 0:c.flowId,v=(0,i.useRef)(null),y=(0,i.useState)([]),g=(0,o.Z)(y,2),h=g[0],b=g[1],w=(0,i.useState)(!1),_=(0,o.Z)(w,2),E=_[0],C=_[1],O=(null==p||null===(s=p.flow)||void 0===s?void 0:s.zoom)||1,x=null==p||null===(d=p.flow)||void 0===d?void 0:d.position,k=n().get("flowNodes"),S=function(e){var t=function(e){if(e){var t=[],n=!1;return e.map((function(e){if("flowEnd"==e.type&&(n=!0),"资产或模型事件"==e.type){var r,o=tw(tw({},e),{},{type:"model"==(null==e||null===(r=e.data)||void 0===r?void 0:r.eventRange)?"模型事件":"资产事件"});t.push(o)}else t.push(e)})),n||t.push(tw({id:qg(8,16)},nw)),t}}(e),n=t&&t.length>0?t:[tw({id:qg(8,16)},nw)];return null==n?void 0:n.map((function(e){return"defaultEdge"==e.type?tw(tw({},e),{},{style:{strokeWidth:3},type:"smoothstep",animated:!0}):e}))};l().useEffect((function(){var e,n,r,o=JSON.parse((null==f||null===(e=f[0])||void 0===e?void 0:e.config)||"[]");if(null!=f&&null!==(n=f[0])&&void 0!==n&&null!==(r=n.variables)&&void 0!==r&&r.__mock__&&null!=o&&o.some((function(e){return e.elementData}))){var i=null==o?void 0:o.map((function(e,t){return tw(tw({},Xu().omit(e,"elementData")),e.elementData)}));b(S(i))}else if(m){var l;C(!0),(0,t.api)({name:"flow/flowDraft"}).query({order:{createTime:"DESC"},limit:1,fields:["flowDraft"]},{where:{flow:m,createTime:{lte:null==f||null===(l=f[0])||void 0===l?void 0:l.startTimestamp}}}).then((function(e){var t,n,r,i=e.items,l=null==i||null===(t=i[0])||void 0===t||null===(n=t.flowDraft)||void 0===n||null===(r=n.elements)||void 0===r?void 0:r.filter((function(e){return null==o?void 0:o.find((function(t){return t.id==e.id}))}));b(S(l)),C(!1)})).catch((function(){return C(!1)}))}}),[m]);var A=function(e){var t,n=k[e.node],o=Ug(n),i={headStyle:tw(tw({},(null==n?void 0:n.style)||{}),{},{color:"#FFF"})};return l().createElement(_c,r({},e,{nodeType:o?"input":"default",title:(null===(t=e.data)||void 0===t?void 0:t.name)||(null==n?void 0:n.title),titleIcon:null==n?void 0:n.titleIcon,cardProps:i}),l().createElement(sw,{record:e.record,item:(null==f?void 0:f[0])||{}}))},j=function(e){var t=e.status;return"COMPLETED"==t?l().createElement(a.Tag,{icon:l().createElement(Cc.Icon,{type:"check-circle"}),color:"success"},_t1("已完成")):"CREATED"==t?l().createElement(a.Tag,{icon:l().createElement(Cc.Icon,{type:"play-circle"}),color:"processing"},_t1("进行中")):"FAILED"==t?l().createElement(a.Tag,{icon:l().createElement(Cc.Icon,{type:"exclamation-circle"}),color:"error"},_t1("失败")):"INTERRUPT"==t?l().createElement(a.Tag,{icon:l().createElement(Cc.Icon,{type:"minus-circle"}),color:"default"},_t1("已终止")):l().createElement(a.Tag,{icon:l().createElement(Cc.Icon,{type:"clock-circle"}),color:"default",style:{borderColor:"#d9d9d9"}},_t1("未处理"))},D=l().useMemo((function(){return Object.keys(k).map((function(e){var t=k[e]&&k[e].paramSchema;return{key:e,component:function(n){var o,i=null==f?void 0:f.find((function(e){return e.elementId==n.id})),a=i&&"CREATED"!=i.status&&"gateway"!=e?A:null==k||null===(o=k[e])||void 0===o?void 0:o.component,u=l().createElement(l().Fragment,null,l().createElement("span",null,_t1("状态"),": "),l().createElement(j,{status:null==i?void 0:i.status}));return l().createElement(a,r({},n,{node:e,editable:!1,paramSchema:t,layout:"horizontal",record:i,extraChildren:u}))}}})).reduce((function(t,n){return tw(tw({},t),{},(0,e.Z)({},n.key,n.component))}),{})}),[k]),P={gatewayEdge:function(e){return l().createElement(pb,r({},e,{pathType:"smoothStep",gatewayPanelRender:rw,onElementsRemove:function(){}}))}},T=function(){return l().createElement(Vu,null,l().createElement(fc,null,l().createElement("div",{className:"flow-editor",style:{height:"calc(100vh - 300px)"}},l().createElement("div",{className:"dndflow"},l().createElement("div",{className:"reactflow-wrapper",ref:v},E?l().createElement(Cc.Loading,null):l().createElement(wu,{defaultZoom:O,defaultPosition:x,fitView:!0,elements:h,snapToGrid:!0,isConnectable:function(){return!1},nodesDraggable:!1,nodesConnectable:!1,nodeTypes:D,edgeTypes:P,deleteKeyCode:null},l().createElement(zu,{style:{transform:"translateX(10px)"}}),l().createElement(Hu,{color:"#aaa",gap:16})))))))};return l().createElement(Cc.C,{is:"AntdI18n"},l().createElement(T,null))};function iw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lw(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?iw(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iw(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var aw=function(e){return{CREATED:{icon:"play-circle",background:"#F4F9FF",color:"#1890ff",text:_r("进行中")},COMPLETED:{icon:"check-circle",background:"#FBFFF9",color:"#52c41a",text:_r("已完成")},FAILED:{icon:"exclamation-circle",background:"#FFF8F6",color:"#f50",text:_r("失败")},INTERRUPT:{icon:"close-circle",background:"#fafafa",color:"#696969",text:_r("终止")}}[e]},uw=function(e){var t=e.status;return l().createElement(l().Fragment,null,l().createElement(Cc.Icon,{type:t.icon,style:{fontSize:18,color:t.color}}),l().createElement("span",{style:{marginLeft:15,fontSize:18,color:t.color}},_t1(t.text)))},cw=function(e){var t=e.status;return{CREATED:l().createElement(a.Tag,{icon:l().createElement(Cc.Icon,{type:"play-circle"}),color:"processing"},_t1("进行中")),COMPLETED:l().createElement(a.Tag,{icon:l().createElement(Cc.Icon,{type:"check-circle"}),color:"success"},_t1("已完成")),FAILED:l().createElement(a.Tag,{icon:l().createElement(Cc.Icon,{type:"exclamation-circle"}),color:"error"},_t1("失败")),INTERRUPT:l().createElement(a.Tag,{icon:l().createElement(Cc.Icon,{type:"close-circle"}),color:"default"},_t1("终止"))}[t]},sw=function(e){var t,n=e.record,r=e.item,o=r.config&&JSON.parse(r.config)||[],i=_.isEmpty(n.setting)?null==o||null===(t=o.find((function(e){return e.id==n.elementId})))||void 0===t?void 0:t._config:r.setting;return l().createElement("div",{style:{wordWrap:"break-word",wordBreak:"break-word"}},Xb(lw(lw({},n),{},{setting:i})))},dw=function(e){var t=e.errorMessage;return l().createElement(a.Tooltip,{title:t,overlayInnerStyle:{width:450,maxHeight:200,overflowY:"auto"},placement:"bottomLeft"},t)},pw=function(e){var n=e.items,r=e.showError,o=t.app.get("flowNodes"),i={title:_t1("中止/失败原因"),dataIndex:"errorMessage",key:"errorMessage",render:function(e,t){return"FAILED"==t.status?l().createElement(dw,{errorMessage:e}):null}},u=[{title:_t1("触发流程数据"),dataIndex:"flowData",key:"flowData",render:function(e,t){return l().createElement(sw,{record:t,item:(null==n?void 0:n[0])||{}})},width:r?"30%":"40%"},{title:_t1("节点类型"),dataIndex:"type",key:"type",render:function(e){return _t1(function(e,t){var n,r=null==t||null===(n=t[e])||void 0===n?void 0:n.title,o={command:_r("指令事件"),modelData:_r("设备表数据事件"),nodeData:_r("设备数据事件"),schedule:_r("计划事件"),driverEvent:_r("驱动事件"),warning:_r("报警事件"),login:_r("用户登录"),shutdown:_r("关闭系统"),boot:_r("启动系统"),worksheetRecord:_r("表事件")};return r||o[e]}(e,o))}},{title:_t1("状态"),dataIndex:"status",key:"status",render:function(e){return l().createElement(cw,{status:e})}},{title:_t1("进入时间"),dataIndex:"startTimestamp",key:"startTimestamp"},{title:_t1("离开时间"),dataIndex:"timestamp",key:"timestamp"}];return r&&u.splice(3,0,i),n&&!_.isEmpty(n)?l().createElement(a.Table,{dataSource:n,pagination:!1,columns:u,bordered:!0}):l().createElement(a.Empty,{description:_t1("暂无数据"),image:__webpack_require__(5002)})};const fw=function(e){var n,r=(0,t.use)("params"),i=r.flowId,u=r.recordId,c=r.timestamp,s=l().useState([]),d=(0,o.Z)(s,2),p=d[0],f=d[1],m=l().useState({}),v=(0,o.Z)(m,2),y=v[0],g=v[1],h=l().useState(),b=(0,o.Z)(h,2),w=b[0],E=b[1],C=(0,t.use)("query"),O=(null==C?void 0:C.status)||(null!=p&&p.some((function(e){return"FAILED"==(null==e?void 0:e.status)}))?"FAILED":null!=p&&p.some((function(e){return"CREATED"==(null==e?void 0:e.status)}))?"CREATED":"COMPLETED");l().useEffect((function(){E(!0),(0,t.api)({name:"flow/flow"}).get(i).then((function(e){g(e);var n={$gte:c};(0,t.api)({name:"engine/log/job"}).query({},{where:{flowid:i,flowJob:u,timestamp:n}}).then((function(e){var t=e.items;f(t),E(!1)})).catch((function(){return E(!1)}))})).catch((function(){return E(!1)}))}),[i,u,c]);var x=(null==p?void 0:p[0])||{};return l().createElement(Cc.C,{is:"AntdI18n"},l().createElement(Cc.Page,{title:"".concat(y.name||"").concat(_t1("节点日志")),onBack:function(){return history.back()}},w?l().createElement(Cc.Loading,null):l().createElement(l().Fragment,null,!_.isEmpty(p)&&l().createElement(a.Card,{style:{padding:20,background:null===(n=aw(O))||void 0===n?void 0:n.background}},l().createElement(a.Row,{align:"bottom",gutter:[16,16]},l().createElement(a.Col,{span:24},l().createElement(uw,{status:aw(O)})),l().createElement(a.Col,{span:24,style:{display:"flex",justifyContent:"space-between"}},l().createElement("span",null,_t1("数据"),"：",l().createElement("span",{style:{color:"#5C6380",fontWeight:600}},Xb(x))),l().createElement("span",null,kc()(x.timestamp).format("YYYY-MM-DD HH:mm:ss"))),x.errorMessage&&l().createElement(a.Col,{span:24,style:{display:"flex",justifyContent:"space-between"}},l().createElement("span",null,_t1("失败原因"),"：",x.errorMessage)))),l().createElement(a.Tabs,{defaultActiveKey:"record"},l().createElement(a.Tabs.TabPane,{key:"record",tab:"执行日志"},l().createElement(pw,{items:p})),l().createElement(a.Tabs.TabPane,{key:"view",tab:"流转详情"},l().createElement(ow,{item:y,records:p}))))))};var mw=a.Select.Option;const vw=function(e){var t=e.input,n=e.initData,r=e.label,o=e.loading,i=e.schema;return Xu().isEmpty(n)&&!o?_t1("无可用配置"):l().createElement(a.Select,{showSearch:!0,style:{minWidth:160,width:"100%"},placeholder:_t1("请选择{{label}}",{label:r}),onChange:function(e){var r="string"==i.type?null==e?void 0:e.value:null==n?void 0:n.find((function(t){return(null==t?void 0:t.id)==(null==e?void 0:e.value)}));t.onChange(r)},optionFilterProp:"label",labelInValue:!0,dropdownMatchSelectWidth:!1,getPopupContainer:function(e){return e},allowClear:!0,loading:o},n&&Xu().uniqBy(n,"id").map((function(e){return l().createElement(mw,{value:e.id,key:e.id},e.name)})))},yw=function(e){var n=e.input,r=e.where,i=void 0===r?{}:r,u=e.userData,c=e.label,s=l().useState([]),d=(0,o.Z)(s,2),p=d[0],f=d[1];return l().useEffect((function(){u?f(u):(0,t.api)({name:"core/user"}).query({},{where:i}).then((function(e){var t=e.items;f(t)}))}),[JSON.stringify(u)]),l().createElement(a.Select,{allowClear:!0,placeholder:_t1("请选择{{label}}",{label:c}),onChange:function(e){n.onChange(null==p?void 0:p.find((function(t){return t.id==e})))}},p.map((function(e){return l().createElement(a.Select.Option,{value:e.id},e.name)})))};function gw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hw(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?gw(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gw(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var bw=function(e){var t=e.children,n=e.invalid,r=e.setInvalid;return l().useEffect((function(){r(n)}),[n]),t},ww=function(e){var n=e.input,r=(n.value,n.onChange),o=e.schema,i=(0,t.use)("form",(function(e){var t;return{tableRecord:null===(t=e.values)||void 0===t?void 0:t.tableRecord}})),a=i.form,u=i.tableRecord,c=(0,t.use)("model.item",{id:null==u?void 0:u.id,schema:o}).data;return l().useMemo((function(){return l().createElement(Qp.SchemaForm,{schema:o,onChange:r,initialValues:c||{},setInvalid:function(e){return a.change("recordInvalid",e)},component:bw})}),[JSON.stringify(o),JSON.stringify(c)])};const _w=function(e){var n=l().useState({type:"object",properties:{}}),i=(0,o.Z)(n,2),a=i[0],u=i[1],c=(0,t.use)("form",(function(e){var t;return{tableRecord:null===(t=e.values)||void 0===t?void 0:t.tableRecord}})),s=(c.form,c.tableRecord),d=e.tableId,p=function(e,t){var n,r,o=e.schema,i=e.function,l=null===(n=_.filter(o.properties,(function(e){return e.schemaHide||"bytes"==e.type})))||void 0===n?void 0:n.map((function(e){return e.key}));o.properties=_.omit(o.properties,[].concat((0,Wu.Z)(l),["createTime","creator","modifyTime","modifyUser"])),o.form=_.difference(o.form,[].concat((0,Wu.Z)(l),["createTime","creator","modifyTime","modifyUser"])),o.required=_.difference(o.required,[].concat((0,Wu.Z)(l),["createTime","creator","modifyTime","modifyUser"]));var a=i.some((function(e){return"device"==e||"dataAuth"==e}));return null!=o&&null!==(r=o.properties)&&void 0!==r&&r.id&&(o.properties.id=hw(hw({},o.properties.id),{},t||!a?{field:hw(hw({},o.properties.id.field),{},{data:{display:!1}})}:{field:hw(hw({},o.properties.id.field),{},{data:{display:!0}})})),o};return l().useEffect((function(){var e,n,r;d&&(null!==(e=window._flow_form_httpCache_)&&void 0!==e&&null!==(n=e[d])&&void 0!==n&&n.schema?u(p(null===(r=window._flow_form_httpCache_)||void 0===r?void 0:r[d],s)):(0,t.api)({name:"core/t/schema"}).get(d).then((function(e){u(p(e,s))})))}),[d,s]),d?l().createElement(Oc.Model,{schema:hw(hw({},a),{},{resource:"core/t/".concat(d,"/d")})},l().createElement(ww,r({},e,{schema:a}))):null};function Ew(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cw(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Ew(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ew(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ow=function(e){var n=e.input,o=(0,t.use)("form",(function(e){var t;return{tags:null===(t=e.values)||void 0===t?void 0:t.tags}})),i=(o.form,o.tags);return"String"==(null==i?void 0:i.dataType)?l().createElement(a.Input,r({},n,{style:{minWidth:260}})):"Boolean"==(null==i?void 0:i.dataType)?l().createElement(a.Switch,n):l().createElement(a.InputNumber,r({},n,{style:{minWidth:260}}))},xw=function(e){var n,o=e.input,i=o.value,a=o.onChange,u=(e.field,e.initData),c=e.hiddenValue,s=(0,t.use)("form",(function(e){var t;return{tableData:null===(t=e.values)||void 0===t?void 0:t.tableData}})),d=(s.form,s.tableData),p=_.isEmpty(d)?e.tableData:d,f=_.isEmpty(p)?null:{id:{in:_.isArray(p)?p.map((function(e){return e.id})):[p.id]}},m=null!=p&&p.table?[p.table]:null===(n=e.tableData)||void 0===n?void 0:n.reduce((function(e,t){return[].concat((0,Wu.Z)(e),[t.table])}),[]);return l().createElement(l().Fragment,null,_.isEmpty(u)?l().createElement(Cc.C,r({is:"PointTable",queryFilter:f,type:"radio"},e,{tables:m})):l().createElement(vw,e),null!=i&&i.id&&!c?l().createElement("div",{style:{marginTop:10}},l().createElement(Ow,{input:{value:null==i?void 0:i.value,onChange:function(e){return a(Cw(Cw({},i),{},{value:e}))},placeholder:_t1("数据点值")}})):null)},kw=function(e){var n,r,o=e.field.schema,i=e.input,u=i.value,c=i.onChange,s=e.initData,d=(0,t.use)("form",(function(e){var t;return{rule:null===(t=e.values)||void 0===t?void 0:t.rule}})),p=(d.form,d.rule),f=(0,t.use)("settings").settings,m=(null==f||null===(n=f.warning)||void 0===n?void 0:n.warningkind)||[];return m=_.isEmpty(s)?m:m.filter((function(e){return s.includes(e.id)})),m=_.isEmpty(null==p?void 0:p.type)?m:m.filter((function(e){return null==p?void 0:p.type.includes(e.id)})),l().createElement(a.Select,{value:u||void 0,style:{width:"100%"},placeholder:_t1(o.title)+"...",onChange:function(e){c(e)},options:null!==(r=m)&&void 0!==r&&r.length?m.map((function(e){return{label:e.name,value:e.id}})):[]})},Sw=function(e){var n,i,u,c,s,d,p,f,m,v,y=e.input,g=e.initData,h=l().useState([]),b=(0,o.Z)(h,2),w=b[0],E=b[1];l().useEffect((function(){if(_.isEmpty(g)||_.isEmpty(_.omit(null==g?void 0:g[0],"id"))){var e=null!=g&&g[0]?{id:{in:g.map((function(e){return e.id}))}}:{};(0,t.api)({name:"warning/rule"}).query({fields:["range"]},{where:e}).then((function(e){var t=e.items;t&&t.length>0&&E(t)}))}else E(g)}),[JSON.stringify(g)]);var C="table"==(null===(n=y.value)||void 0===n||null===(i=n.range)||void 0===i?void 0:i.type)?null===(u=y.value.range.tags)||void 0===u?void 0:u.reduce((function(e,t){var n;return[].concat((0,Wu.Z)(e),[null===(n=t.table)||void 0===n?void 0:n.id])}),[]):null!==(c=y.value)&&void 0!==c&&null!==(s=c.table)&&void 0!==s&&s.id?y.value.table.id:null,O="tableData"==(null===(d=y.value)||void 0===d||null===(p=d.range)||void 0===p?void 0:p.type)?null===(f=y.value.range.tags)||void 0===f?void 0:f.reduce((function(e,t){return[].concat((0,Wu.Z)(e),[t.tableData])}),[]):null;return l().createElement(l().Fragment,null,l().createElement(a.Select,{placeholder:_t1("请选择"),value:null===(m=y.value)||void 0===m?void 0:m.id,style:{minWidth:200},onChange:function(e){y.onChange(w.find((function(t){return t.id==e})))}},w.map((function(e){return l().createElement(a.Select.Option,{key:e.id},e.name||e.warningname)}))),_.isEmpty(O)?_.isEmpty(C)?null:l().createElement("div",{style:{marginTop:10}},l().createElement(Cc.C,{is:"Common.SelectTableRecord",placeholder:_t1("请选择设备"),width:"100%",input:{value:null===(v=y.value)||void 0===v?void 0:v.tableData,onChange:function(e){return y.onChange(Cw(Cw({},y.value),{},{tableData:e}))}},table:C})):l().createElement("div",{style:{marginTop:10}},l().createElement(vw,r({},e,{label:_t1("请选择设备"),initData:O,input:Cw(Cw({},e.input),{},{onChange:function(e){return y.onChange(Cw(Cw({},y.value),{},{tableData:e}))}})}))))},Aw=function(e){var n,i,a,u=e.initData,c=oc("tags"),s=(null==c||null===(n=c.table)||void 0===n?void 0:n.id)||(null==c||null===(i=c.tableData)||void 0===i||null===(a=i.table)||void 0===a?void 0:a.id)||(null==c?void 0:c.table),d=l().useState({}),p=(0,o.Z)(d,2),f=p[0],m=p[1],v=l().useState(),y=(0,o.Z)(v,2),g=y[0],h=y[1];l().useEffect((function(){s?(h(!0),(0,t.api)({name:"core/t/schema/tag"}).get(s).then((function(e){var t,n;m(null===(t=e.tags)||void 0===t||null===(n=t.find((function(e){return e.id==c.id})))||void 0===n?void 0:n.rules),h(!1)}))):m({})}),[s]);var b=null==u?void 0:u.filter((function(e){return _.keys(f).includes(e.id)}));return l().createElement(vw,r({},e,{loading:g,initData:b}))};function jw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dw(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?jw(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jw(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Pw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Tw=function(e){var t,n={},r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Pw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pw(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(a)throw i}}}}(function(e){return _.isArray(e)?e:[]}(e));try{for(r.s();!(t=r.n()).done;){var o,i,l,a,u=t.value,c=null!=u&&null!==(o=u.table)&&void 0!==o&&o.id?(null==u||null===(i=u.table)||void 0===i?void 0:i.id)+"Id":null==u||null===(l=u.table)||void 0===l?void 0:l.id;null!==(a=n[c])&&void 0!==a&&a.length?n[c].push(null==u?void 0:u.id):n[c]=[null==u?void 0:u.id]}}catch(e){r.e(e)}finally{r.f()}return n},Fw=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.enum1.map((function(e,n){var r;return{id:e,name:null===(r=t.enum_title1)||void 0===r?void 0:r[n]}})).filter((function(t){return e.includes(t.id)}))},Lw=function(e){var n=e.flowId,r=e.jobKey,i=l().useState(),u=(0,o.Z)(i,2),c=u[0],s=u[1],d=l().useState(),p=(0,o.Z)(d,2),f=p[0],m=p[1],v=l().useState(),y=(0,o.Z)(v,2),g=y[0],h=y[1];return l().createElement(l().Fragment,null,l().createElement(a.Tooltip,{title:_t1("查看模拟执行日志")},l().createElement(a.Button,{style:{marginLeft:3},icon:l().createElement(Cc.Icon,{type:"fileText"}),onClick:function(){m(!0),r&&(h(!0),function(e){(0,t.api)({name:"engine/log/job"}).query({},{where:{flowid:n,flowJob:e}}).then((function(e){var t=e.items;s(t),h(!1)})).catch((function(){return h(!1)}))}(r))}})),l().createElement(a.Modal,{visible:f,title:_t1("模拟执行日志"),onCancel:function(){return m(!1)},destroyOnClose:!0,width:"80%",footer:null,style:{minWidth:850}},g?l().createElement(Cc.Loading,null):l().createElement(pw,{items:c,showError:!0})))},Bw=function(e){var t=e.children,n=e.invalid,r=e.handleSubmit,o=e.submitting,i=e.onCancel;return e.errors,l().createElement(a.Form,{onSubmit:r},l().createElement(a.Card,{style:{marginTop:0,borderTop:"none"}},t,l().createElement(a.Form.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:18,offset:5}}},l().createElement(a.Button,{type:"primary",loading:o,onClick:r,htmlType:"submit",disabled:n},_t1("执行"))," ",l().createElement(a.Button,{onClick:i},_t1("取消")))))};const Mw=function(n){var i,u,c,s=n.item,d=n.buttonProps,p=n.connectEndNode,f=n.hasStartNode,m=(n.releaseMessage,n.requiredInfo),v=n.updateRequired,y=(0,t.use)("FlowContext").context,g=l().useState(),h=(0,o.Z)(g,2),b=h[0],w=h[1],E=l().useState(),C=(0,o.Z)(E,2),O=C[0],x=C[1],k=null==s||null===(i=s.flow)||void 0===i||null===(u=i.elements)||void 0===u?void 0:u.find((function(e){return(null==e?void 0:e.id)==(null==s?void 0:s.id)})),S={type:"object",properties:{}};null!=y&&null!==(c=y.outputSchema)&&void 0!==c&&c[null==s?void 0:s.id]&&(S=function(n,o){if(_.isEmpty(null==n?void 0:n.properties))return n;var i=(0,t.use)("queryEditor.methods").getQueryFilter,a=n.properties||{},u=o||{},c=u.data,s=void 0===c?{}:c,d=u.paramSchema;if("用户登录"==(null==o?void 0:o.type)){if(a["#$user"]){var p={where:{}};if("deptRole"==s.sendTo){if(!_.isEmpty(s.department)){var f=Tw(s.department);p.where=Dw(Dw({},p.where),_.mapValues(f,(function(e){return _.isArray(e)?{in:e}:e})))}_.isEmpty(s.role)||(p.where=Dw(Dw({},p.where),{},{rolesId:{in:s.role.map((function(e){return e.id}))}}))}else"user"==s.sendTo&&(p={userData:s.users||[]});a["#$user"]=Dw(Dw({},a["#$user"]),{},{field:Dw(Dw({},p),{},{component:yw})})}}else if("指令事件"==(null==o?void 0:o.type)){if(a.cmdName){var m={initData:s.command};a.command=Dw(Dw({},a.cmdName),{},{title:_r("指令"),type:"object",properties:{},field:Dw(Dw({},m),{},{component:vw})}),delete a.cmdName}if(delete a["#$table"],a["#$tableData"]){var v=a["#$tableData"];if("设备选择"==s.selectType)a["#$tableData"]=Dw(Dw({},v),{},{field:Dw(Dw({},v.field||{}),{},{initData:s.selectRecord,component:vw})});else if("触发条件"!=s.selectType||_.isEmpty(s.query)){var y;a["#$tableData"]=Dw(Dw({},v),{},{field:Dw(Dw({},v.field||{}),{},{table:null===(y=s.table)||void 0===y?void 0:y.id})})}else{var g;a["#$tableData"]=Dw(Dw({},v),{},{field:Dw(Dw({},v.field||{}),{},{table:null===(g=s.table)||void 0===g?void 0:g.id,recordLabel:"name",filter:i(s.query.cond,s.query.schema)})})}}}else if("驱动事件"==(null==o?void 0:o.type)){var h,b;if(null!==(h=s.event)&&void 0!==h&&h.id&&!_.isEmpty(null===(b=s.event)||void 0===b?void 0:b.writeOut)){var w={table:"object",numSelect:"number",select:"string"}[s.event.writeOut.type]||s.event.writeOut.type;a={data:{title:s.event.name,type:w,items:{},field:{component:function(e){var n=e.input,o=(0,t.use)("device.ext").getFormSchema;return l().createElement(Cc.C,{is:"Device.CommandValue",input:n,commandV:{formSchema:o(s.event.writeOut),commandForms:[Dw(Dw({},s.event.writeOut),{},{name:"data"})]},customGroup:function(e){return l().createElement(Cc.C,r({is:"Flow.BindDataGroup"},e))}})}}}}}}else if("设备数据事件"==(null==o?void 0:o.type)){if(delete a.upFields,delete a["#$table"],!_.isEmpty(s.tags)){var E,C=_.uniqBy(_.flatten(s.tags.map((function(e){return e.tableData}))),"id");a["#$tableData"]=Dw(Dw({},a["#$tableData"]),{},{field:Dw(Dw({},(null===(E=a["#$tableData"])||void 0===E?void 0:E.field)||{}),{},{initData:C,component:vw})}),a.time={title:"上数时间",type:"string",format:"datetime"},_.forEach(a,(function(e,t){"nodeDataPoint"==e.nodeType&&t.indexOf(".")>-1&&(a[t.replace(".","---")]=e,delete a[t])})),n.form=["*","time"],n.required=["#$tableData"],n.formEffect=function(e){var t=e.getRegisteredFields();e.useField("#$tableData",(function(n){var r=n.value;null!=r&&r.id?t.forEach((function(t){t.startsWith(r.id+"---")?e.setFieldData(t,{display:!0}):["#$tableData","time"].includes(t)||e.setFieldData(t,{display:!1})})):t.forEach((function(t){["#$tableData","time"].includes(t)||e.setFieldData(t,{display:!1})}))}))}}}else if("设备表数据事件"==(null==o?void 0:o.type)){if(delete a.upFields,!_.isEmpty(s.tags)){var O,x=_.uniqBy(_.flatten(s.tags.map((function(e){return e.table}))),"id");a["#$table"]=Dw(Dw({},a["#$table"]),{},{field:Dw(Dw({},(null===(O=a["#$table"])||void 0===O?void 0:O.field)||{}),{},{initData:x,component:vw})}),a.time={title:"上数时间",type:"string",format:"datetime"},_.forEach(a,(function(e,t){if("nodeDataPoint"==e.nodeType){var n,r,o=null===(n=s.tags.find((function(e){return e.id==t})))||void 0===n||null===(r=n.table)||void 0===r?void 0:r.id;a[o+"---"+t]=e,delete a[t]}})),n.form=["#$table","*","time"],n.required=["#$table","#$tableData"],n.formEffect=function(e){var t=e.getRegisteredFields();e.useField("#$table",(function(n){var r=n.value;null!=r&&r.id?t.forEach((function(t){t.startsWith(r.id+"---")?e.setFieldData(t,{display:!0}):["#$table","#$tableData","time"].includes(t)||e.setFieldData(t,{display:!1})})):t.forEach((function(t){["#$table","#$tableData","time"].includes(t)||e.setFieldData(t,{display:!1})}))}))}}}else if("表事件"==(null==o?void 0:o.type)){var k;if(delete a.id,delete a.table,delete a["#$table"],delete a["#$user"],delete a["#$tableRecord"],"更新记录时"==s.eventType||"添加或更新记录时"==s.eventType){a={};var S="更新记录时"==s.eventType?"":_t1("更新记录触发时需选择记录，新增记录触发无需选择");if("记录选择"==s.selectType){var A,j=(null===(A=s.selectRecord)||void 0===A?void 0:A.map((function(e){var t;return Dw(Dw({},e),{},{name:null===(t=_.values(e._label))||void 0===t?void 0:t[0]})})))||[];a.tableRecord={type:"object",title:_r("触发记录"),description:S,field:{initData:j,component:vw}}}else{var D,P,T,F="范围定义"==s.selectType?i(null===(D=s.logic)||void 0===D?void 0:D.cond,null===(P=s.logic)||void 0===P?void 0:P.viewSchema):{};a.tableRecord={type:"object",title:_r("触发记录"),description:S,fieldType:"tableData",field:{table:null===(T=s.table)||void 0===T?void 0:T.id,filter:F}}}a.record={title:"记录",type:"object",properties:{},field:{attrs:{groupSize:{labelCol:{span:0},wrapperCol:{span:24}}},component:function(e){var t;return l().createElement(_w,r({},e,{tableId:null===(t=s.table)||void 0===t?void 0:t.id}))}}},n.required="更新记录时"==s.eventType?["tableRecord"]:[]}else if("删除记录时"==s.eventType)if(a={},"记录选择"==s.selectType){var L,B=(null===(L=s.selectRecord)||void 0===L?void 0:L.map((function(e){var t;return Dw(Dw({},e),{},{name:null===(t=_.values(e._label))||void 0===t?void 0:t[0]})})))||[];a.tableRecord={type:"object",title:_r("触发记录"),field:{initData:B,component:vw}}}else{var M,N,I,R="范围定义"==s.selectType?i(null===(M=s.logic)||void 0===M?void 0:M.cond,null===(N=s.logic)||void 0===N?void 0:N.viewSchema):{};a.tableRecord={type:"object",title:_r("触发记录"),fieldType:"tableData",field:{table:null===(I=s.table)||void 0===I?void 0:I.id,filter:R}}}else if((null===(k=s.eventType)||void 0===k?void 0:k.indexOf("记录"))>-1){var Z,q,z,U,G,$,Y,H=null!==(Z=s.table)&&void 0!==Z&&Z.id?_.cloneDeep((null===(q=window._flow_form_httpCache_)||void 0===q||null===(z=q[s.table.id])||void 0===z?void 0:z.schema)||{}):{};a=H.properties||a;var V,W=null===(U=_.filter(a,(function(e){return e.schemaHide||"bytes"==e.type})))||void 0===U?void 0:U.map((function(e){return e.key})),K=null!==(G=s.table)&&void 0!==G&&G.id?_.difference(null==H?void 0:H.required,W):null,X=((null===($=window._flow_form_httpCache_)||void 0===$||null===(Y=$[s.table.id])||void 0===Y?void 0:Y.function)||[]).some((function(e){return"device"==e||"dataAuth"==e}));X?(a=Dw(Dw({},_.omit(a,W)),{},{id:null===(V=H.properties)||void 0===V?void 0:V.id}),n.form=_.difference(H.form,W)):(a=_.omit(a,(0,Wu.Z)(W)),n.form=_.difference(H.form,(0,Wu.Z)(W))),n.required=_.intersection(K,_.keys(a))}}else if("报警事件"==(null==o?void 0:o.type)){var J,Q,ee,te,ne,re={},oe=d.properties||{},ie=null===(J=s.tableData)||void 0===J?void 0:J.map((function(e){return Dw(Dw({},e),{},{name:e.name||e.id})}));if(re.tableData=_.isEmpty(s.tableData)?{title:_r("报警设备"),type:"object",fieldType:"tableData",field:{table:null===(Q=s.table)||void 0===Q?void 0:Q.map((function(e){return null==e?void 0:e.id})),width:"100%"}}:{title:_r("报警设备"),type:"object",field:{initData:ie,component:vw}},_.isEmpty(s.warnType)||(re.type=Dw(Dw({},a.type),{},{field:{initData:s.warnType,component:kw}})),"table"==s.majorType){if(re.tags={title:_r("报警数据点"),type:"object",field:{initData:s.dataPoint,tableData:s.tableData,hiddenValue:"timeout"==s.warningType,component:xw}},re.tableData.field.func="device","tableData"==s.dateType)delete re.tableData;else if("table"==s.dateType)re.tableData={title:_r("报警设备"),type:"object",fieldType:"tableData",field:{depend:"tags.table"}},n.form=["tags","tableData","*"],ne=function(e){e.useField("tags.id",(function(t){e.setFieldData("tableData",{display:!!t.value}),e.change("tableData",null)}))};else if("complex"==s.warningType){var le,ae;delete re.tags,_.isEmpty(s.department)||(re.department={title:_r("部门"),type:"object",field:{initData:s.department,component:vw}},_.isEmpty(s.tableData)&&null!==(le=re.tableData)&&void 0!==le&&le.field&&(re.tableData.field.dependRelate="department"),n.form=["department","tableData","*"]),_.isEmpty(s.rule)||(delete re.tableData,delete re.type,re.rule={title:_r("报警规则"),type:"object",field:{initData:null===(ae=s.rule)||void 0===ae?void 0:ae.map((function(e){return Dw(Dw({},e),{},{name:"".concat(e.warningname,"-(").concat(e.sign,")")})})),component:Sw}},re.type=Dw(Dw({},a.type),{},{field:{initData:s.warnType,component:kw}}),ne=function(e){e.useField("rule",(function(t){e.setFieldData("type",{display:!!t.value})}))})}_.isEmpty(s.jzLevel)||(re.jzLevel={title:_r("报警值级别"),type:"string",field:{initData:Fw(s.jzLevel,oe.jzLevel),component:Aw}})}else if("commonTable"==s.majorType){var ue;delete re.tableData,re.rule={title:_r("报警规则"),type:"object",field:{initData:null===(ue=s.rule)||void 0===ue?void 0:ue.map((function(e){return Dw(Dw({},e),{},{name:"".concat(e.warningname,"-(").concat(e.sign,")")})})),component:Sw}}}else"global"==s.majorType&&(delete re.tableData,re.rule={title:_r("报警规则"),type:"object",field:{initData:s.rule,component:Sw}});_.isEmpty(s.level)||(re.level=Dw(Dw({},a.level),function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t&&(null===(n=_.compact(r.enum1.map((function(n,o){var i;return t.includes(n)?(0,e.Z)({},n,null===(i=r.enum_title1)||void 0===i?void 0:i[o]):null}))))||void 0===n?void 0:n.reduce((function(e,t){return Dw(Dw({},e),t)}),{}));return{enum1:_.keys(o),enum_title1:_.values(o)}}(s.level,oe.level))),re.actionType=_.isEmpty(s.action)?Dw(Dw({},a.action),{},{field:{component:function(){return _t1("无可用配置")}}}):Dw(Dw({},a.action),{},{enum1:s.action,enum_title1:s.action}),null!==(ee=s.action)&&void 0!==ee&&ee.includes("报警处理时")&&(re.handleUser={title:_r("处理人"),type:"object",relateTo:"User"}),null!==(te=s.action)&&void 0!==te&&te.includes("报警确认时")&&(re.confirmUser={title:_r("确认人"),type:"object",relateTo:"User"}),re.desc=a.desc,a=re,n.required=_.difference(_.keys(re),["handleUser","confirmUser"]),n.formEffect=function(e){ne&&ne(e),e.useField("actionType",(function(t){e.setFieldData("handleUser",{display:"报警处理时"==t.value,field:{required:"报警处理时"==t.value}}),e.setFieldData("confirmUser",{display:"报警确认时"==t.value,field:{required:"报警确认时"==t.value}})}))}}return _.forEach(a,(function(e,t){if(e)if("bytes"==e.type||"bytesArray"==e.fieldType)delete a[t],n.form=_.difference(n.form,[t]);else if("#$table"==t||"table"==e.nodeType)a[t]=Dw(Dw({},e),{},{fieldType:"table",field:Dw(Dw({},e.field||{}),{},{func:"device"}),properties:{}});else if("#$tableData"==t){var r=e.field||{};if(a["#$table"])r=Dw(Dw({},r),{},{depend:"#$table",style:{width:"100%"}});else if(s.table){var o;r=Dw(Dw({},r),{},{table:_.isArray(s.table)?null===(o=s.table)||void 0===o?void 0:o.map((function(e){return null==e?void 0:e.id})):s.table.id})}a[t]=Dw(Dw({},e),{},{fieldType:"tableData",field:r})}else"#$user"==t&&(a[t]=Dw(Dw({},e),{},{relateTo:"User"}))})),n.properties=a,n.required=n.required?n.required:Object.keys(a),n}(_.cloneDeep(y.outputSchema[s.id]),k));var A=function(e){(0,t.api)({name:"engine/mock"}).fetch("",{method:"POST",body:JSON.stringify(e)}).then((function(e){var t=e.json;x(t.job),w(!1),a.message.success(_t1("执行成功"))}))},j=function(){var e,t=null==s||null===(e=s.flow)||void 0===e?void 0:e.elements,n=Gg(t)||{},r=n.publishFlow,o=null==r?void 0:r.map((function(e){return Dw(Dw({},e),{},{elementData:_.pick(null==t?void 0:t.find((function(t){return(null==t?void 0:t.id)==(null==e?void 0:e.id)})),["data","position"])})}));return Dw(Dw(Dw({},s),n),{},{publishFlow:o})};return l().createElement(l().Fragment,null,_.isEmpty(m)&&f&&p?l().createElement(l().Fragment,null,l().createElement(a.Tooltip,{title:_t1("模拟触发流程，模拟执行的流程也将作为真实数据进行流程的流转及处理")},l().createElement(a.Button,r({},d,{onClick:function(){var e,t;if("计划事件"==k.type||"表事件"==k.type&&-1==(null===(e=k.data)||void 0===e||null===(t=e.eventType)||void 0===t?void 0:t.indexOf("记录"))){var n=j();A({tableParams:{userId:"admin"},flow:n})}else w(!0)}}),_t1("模拟执行"))),O&&l().createElement(Lw,{flowId:null==s?void 0:s.id,jobKey:O})):f&&p?l().createElement(a.Button,r({},d,{onClick:function(){v(),a.message.warning(_t1("有必填项未填写，无法模拟执行"))}}),_t1("模拟执行")):l().createElement(a.Tooltip,{title:l().createElement("div",{style:{color:"red"}},f?p?"":_t1("请链接结束节点"):_t1("请添加起始节点")),color:"#fff"},l().createElement(a.Button,r({},d,{disabled:!0}),_t1("模拟执行"))),l().createElement(a.Modal,{visible:b,title:_t1("模拟执行"),onCancel:function(){return w(!1)},destroyOnClose:!0,width:"50%",footer:null,style:{minWidth:700}},l().createElement(Cc.C,{is:"I18nSchemaForm",schema:S,onSubmit:function(e){var t=j(),n=function(e,t){var n,r,o,i,l,a,u,c=t.type,s=t.data;if("用户登录"==c)return{loginParams:{userId:null==e||null===(n=e["#$user"])||void 0===n?void 0:n.id}};if("指令事件"==c)return{commandParams:{command:_.pick(null==e?void 0:e.command,"name"),tableDataId:null==e||null===(r=e["#$tableData"])||void 0===r?void 0:r.id}};if("驱动事件"==c)return{driverEventParams:Dw(Dw({},e.data),{},{tableId:(null===(o=s.table)||void 0===o?void 0:o.id)||(null===(i=s.tableData)||void 0===i||null===(l=i.table)||void 0===l?void 0:l.id)})};if("设备数据事件"==c||"设备表数据事件"==c){var d,p,f,m=null!=e&&e.time?new Date(e.time).getTime():null==e?void 0:e.time,v="设备数据事件"==c?"#$tableData":"#$table",y={};return _.forEach(e,(function(t,n){n.startsWith(e[v].id+"---")&&(y[n.replace(e[v].id+"---","")]=null!=t?t:0)})),{deviceDataParams:{tableId:null==e||null===(d=e["#$tableData"])||void 0===d||null===(p=d.table)||void 0===p?void 0:p.id,tableDataId:null==e||null===(f=e["#$tableData"])||void 0===f?void 0:f.id,time:m,fields:y}}}if("表事件"==c)return"更新记录时"==s.eventType||"添加或更新记录时"==s.eventType?{tableDataParams:Dw({id:null==e||null===(a=e.tableRecord)||void 0===a?void 0:a.id},(null==e?void 0:e.record)||{})}:"删除记录时"==s.eventType?{tableDataParams:{id:null==e||null===(u=e.tableRecord)||void 0===u?void 0:u.id}}:{tableDataParams:e};if("报警事件"==c){var g,h,b,w,E,C={};if("unlimited"==s.majorType)C=Dw(Dw({},e),{},{tableDataId:null===(b=e.tableData)||void 0===b?void 0:b.id,tableId:null===(w=e.tableData)||void 0===w||null===(E=w.table)||void 0===E?void 0:E.id});else if("table"==s.majorType){var O,x,k,S,A,j,D,P,T,F,L,B,M,N,I,R,Z,q,z=(null===(O=e.tags)||void 0===O||null===(x=O.tableData)||void 0===x||null===(k=x.table)||void 0===k?void 0:k.id)||(null===(S=e.tags)||void 0===S||null===(A=S.table)||void 0===A?void 0:A.id)||(null===(j=e.tags)||void 0===j?void 0:j.table)||(null===(D=e.tableData)||void 0===D||null===(P=D.table)||void 0===P?void 0:P.id),U=(null===(T=e.tags)||void 0===T||null===(F=T.tableData)||void 0===F?void 0:F.id)||(null===(L=e.tableData)||void 0===L?void 0:L.id),G=null===(B=e.rule)||void 0===B?void 0:B.id;G&&(z=z||(null===(I=e.rule.table)||void 0===I?void 0:I.id)||(null===(R=e.rule.tableData)||void 0===R||null===(Z=R.table)||void 0===Z?void 0:Z.id),U=U||(null===(q=e.rule.tableData)||void 0===q?void 0:q.id)),null!==(M=e.tags)&&void 0!==M&&M.rules&&e.jzLevel&&(G="Table|".concat(z,"|").concat(U,"|").concat(e.tags.id,"|").concat(e.jzLevel));var $=null!==(N=e.department)&&void 0!==N&&N.id?[e.department.id]:null;C=Dw(Dw({},e),{},{tableDataId:U,tableId:z,fields:e.tags?[e.tags]:null,ruleid:G,department:$})}else if("commonTable"==s.majorType){var Y,H,V,W,K,X,J,Q,ee,te,ne,re=(null===(Y=e.tableData)||void 0===Y||null===(H=Y.table)||void 0===H?void 0:H.id)||(null===(V=e.rule)||void 0===V||null===(W=V.table)||void 0===W?void 0:W.id)||(null===(K=e.rule)||void 0===K||null===(X=K.tableData)||void 0===X||null===(J=X.table)||void 0===J?void 0:J.id),oe=(null===(Q=e.tableData)||void 0===Q?void 0:Q.id)||(null===(ee=e.rule)||void 0===ee||null===(te=ee.tableData)||void 0===te?void 0:te.id);C=Dw(Dw({},e),{},{tableDataId:oe,tableId:re,ruleid:null===(ne=e.rule)||void 0===ne?void 0:ne.id,actionType:e.actionType})}else if("global"==s.majorType){var ie,le,ae,ue,ce,se,de,pe,fe="长时间不上数报警"==(null===(ie=e.rule)||void 0===ie?void 0:ie.type)?(null===(le=e.rule)||void 0===le?void 0:le.id)+":timeout":(null===(ae=e.rule)||void 0===ae?void 0:ae.id)+":sameValue";C=Dw(Dw({},e),{},{ruleid:fe,actionType:e.actionType,tableDataId:null===(ue=e.rule)||void 0===ue||null===(ce=ue.tableData)||void 0===ce?void 0:ce.id,tableId:null===(se=e.rule)||void 0===se||null===(de=se.tableData)||void 0===de||null===(pe=de.table)||void 0===pe?void 0:pe.id})}return null!==(g=C.handleUser)&&void 0!==g&&g.id&&(C.handleUser=C.handleUser.id),null!==(h=C.confirmUser)&&void 0!==h&&h.id&&(C.confirmUser=C.confirmUser.id),{warningParams:C}}return{}}(e,k);A(Dw(Dw({},n),{},{flow:t}))},onCancel:function(){return w(!1)},initialValues:{},validate:function(e){return e.recordInvalid?{record:"表单未填写完整"}:{}},component:Bw})))};var Nw=__webpack_require__(3084);function Iw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rw(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Iw(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Iw(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}cs()(Nw.Z,{insert:"head",singleton:!1}),Nw.Z.locals;const Zw=function(e){var n,i,u,c=e.onSave,s=e.title,d=(e.saveItem,e.item),p=e.activeTab,f=(e.setActiveTab,e.autoSave),m=e.reactFlowInstance,v=e.elements,y=e.setElements,g=e.setActive,h=(e.onSaveDraft,l().useContext(mc)),b=h.context,w=h.setContext,_=l().useState(d.status),E=(0,o.Z)(_,2),C=E[0],O=E[1],x=l().useState(!!Xu().isUndefined(null==d||null===(n=d.settings)||void 0===n?void 0:n.isAuto)||(null==d||null===(i=d.settings)||void 0===i?void 0:i.isAuto)),k=(0,o.Z)(x,2),S=k[0],A=k[1],j=l().useState(!(null!=d&&d.notSaveLog)),D=(0,o.Z)(j,2),P=D[0],T=D[1],F=l().useState((function(){return d?JSON.stringify(d.flow):'{"elements":[],"position":[0,0],"zoom":1}'})),L=(0,o.Z)(F,2),B=L[0],M=L[1],N=function(){var e=Et((function(e){return{nodes:e.nodes,edges:e.edges}})),t=e.nodes,n=e.edges,r={},o=!1,i=!1,l=null;return t&&t.length>0&&t.forEach((function(e){"flowEnd"==e.key&&(l=e.id);var t=null==e?void 0:e.category,n=nc(e);n&&n.length>0&&(r[e.id]=n),t.indexOf("起始节点")>=0&&(o=!0)})),n&&n.length>0&&n.forEach((function(e){(null==e?void 0:e.target)==l&&(i=!0)})),{requiredInfo:r,hasStartNode:o,connectEndNode:i}}(),I=N.requiredInfo,R=N.hasStartNode,Z=N.connectEndNode,q=(0,t.use)("flow.method").versionFlow,z=(0,t.use)("auth.user").user,U={},G=l().createElement(a.Menu,null,l().createElement(a.Menu.Item,null,l().createElement(_b,{item:d,reactFlowInstance:m})));if("流程定义"==p){var $=null==b?void 0:b.errors,Y=$&&!Xu().isEmpty($);U.disabled=Y}var H=function(){!Xu().isEmpty(I)&&w((function(e){return Rw(Rw({},e),{},{showRequiredInfo:!0})}))},V=[l().createElement("div",null,_t1("是否继续发布"),"?")];R||V.unshift(l().createElement("div",null,_t1("未添加"),l().createElement("span",{style:{color:"#613bE8"}},_t1("起始节点")))),Xu().isEmpty(I)||V.unshift(l().createElement("div",null,_t1("有必填项未填写")));var W=(null==d||null===(u=d.flow)||void 0===u?void 0:u.elements.length)>0,K=function(){var e=moment(new Date).format("YYYY-MM-DD HH:mm:ss");c({isAuto:S,notSaveLog:!P}),O("published"),wb(d,q,z,{name:e},m,"published").then((function(e){})).catch((function(e){console.log(e)})),M(JSON.stringify(null==m?void 0:m.toObject()))},X=function(){B&&null!=m&&m.toObject()&&JSON.stringify(null==m?void 0:m.toObject())!=B&&(S&&(f(S),M(JSON.stringify(null==m?void 0:m.toObject()))),O("draft"))};l().useEffect((function(){var e=setTimeout((function(){X()}),1e3);return function(){return clearTimeout(e)}}),[null==m?void 0:m.toObject()]);var J=l().useCallback((function(){X()}),[m]);l().useEffect((function(){return M(JSON.stringify(d.flow)||'{"elements":[],"position":[0,0],"zoom":1}'),document.querySelector(".react-flow__renderer").addEventListener("mouseup",J),function(){var e;return null===(e=document.querySelector(".react-flow__renderer"))||void 0===e?void 0:e.removeEventListener("mouseup",J)}}),[]);var Q=function(e,t){var n,r=e.find((function(e){return e.id==t}));return function t(r){return null==r?void 0:r.forEach((function(r){var o,i;r.target&&"人工节点"==(null===(o=e.find((function(e){return e.id==r.target})))||void 0===o||null===(i=o.category)||void 0===i?void 0:i[0])?n=!0:r.target&&t(e.filter((function(e){return e.source==r.target})))}))}(e.filter((function(e){return e.source==(null==r?void 0:r.id)}))),n}(v,d.id),ee=Q?l().createElement(a.Tooltip,{title:_t1("流程中有审批、填写、抄送节点时，节点日志无法关闭")},l().createElement(a.Switch,{disabled:!0,checked:!0,style:{borderRadius:12,overflow:"hidden"},onChange:T,checkedChildren:_t1("记录节点日志"),unCheckedChildren:_t1("记录节点日志"),defaultChecked:!0})):l().createElement(a.Switch,{checked:P,style:{borderRadius:12,overflow:"hidden"},onChange:T,checkedChildren:_t1("记录节点日志"),unCheckedChildren:_t1("记录节点日志"),defaultChecked:!0});return useI18n().i18n.changeLanguage,l().createElement("div",{className:"flow-edit-header"},l().createElement("div",{style:{width:600,fontSize:16,fontWeight:600,display:"flex"}},l().createElement("span",{style:{margin:"0 16px 0 4px"}},l().createElement(vc.ArrowLeftOutlined,{onClick:function(){return history.back()}})),l().createElement("span",{style:{marginRight:20}},s),l().createElement(a.Tag,{color:"draft"==C?"orange":"green"},"draft"==C?_t1("草稿"):_t1("发布"))),l().createElement("div",{style:{width:750,display:"flex",justifyContent:"flex-end",alignItems:"center"}},Xu().isEmpty(I)&&R&&Z?l().createElement(l().Fragment,null,l().createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},ee,l().createElement(a.Switch,{className:"save-dropdown-button save-btn",checked:S,style:{borderRadius:12,overflow:"hidden"},onChange:A,checkedChildren:_t1("自动保存"),unCheckedChildren:_t1("自动保存"),defaultChecked:!0})),l().createElement(Mw,{item:Rw(Rw({},d),{},{notSaveLog:!P,flow:{elements:v}}),buttonProps:U,connectEndNode:Z,hasStartNode:R,requiredInfo:I,releaseMessage:V,updateRequired:H}),l().createElement("div",{className:"editor-button-left",key:1},l().createElement(a.Dropdown.Button,{overlay:G,type:"primary",className:"save-dropdown-button"},l().createElement(bb,{item:d,name:_t1("保存"),onSave:function(){c({isDraft:!0,isAuto:S,notSaveLog:!P}),O("draft")}}))),l().createElement(a.Tooltip,{overlayStyle:{width:120},title:_t1("流程发布后预计1分钟后生效")},l().createElement(a.Button,r({className:"save-dropdown-button save-btn"},U,{type:"primary",onClick:K,style:{marginLeft:5}}),W?_t1("更新发布"):_t1("发布")))):l().createElement(l().Fragment,null,l().createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},ee,l().createElement(a.Switch,{className:"save-dropdown-button save-btn",checked:S,style:{borderRadius:12,overflow:"hidden"},onChange:A,checkedChildren:_t1("自动保存"),unCheckedChildren:_t1("自动保存"),defaultChecked:!0})),l().createElement(Mw,{item:Rw(Rw({},d),{},{notSaveLog:!P,flow:{elements:v}}),buttonProps:U,connectEndNode:Z,hasStartNode:R,requiredInfo:I,releaseMessage:V,updateRequired:H}),l().createElement("div",{className:"editor-button-left",key:1},l().createElement(a.Dropdown.Button,{overlay:G,type:"primary",className:"save-dropdown-button"},l().createElement(bb,{item:d,name:_t1("保存"),onSave:function(){c({isDraft:!0,isAuto:S,notSaveLog:!P}),O("draft")}}))),Z?l().createElement(a.Popconfirm,{placement:"bottomRight",title:V,onConfirm:K,okText:_t1("是"),cancelText:_t1("否")},l().createElement(a.Tooltip,{overlayStyle:{width:120},title:_t1("流程发布后预计1分钟后生效")},l().createElement(a.Button,r({},U,{type:"primary",onClick:H}),W?_t1("更新发布"):_t1("发布")))):l().createElement(a.Tooltip,{title:l().createElement("div",{style:{color:"red"}},_t1("请链接结束节点")),color:"#fff"},l().createElement(a.Button,{disabled:!0},W?_t1("更新发布"):_t1("发布")))),l().createElement(qb,{id:d.id,title:d.name,setElements:y,setActive:g})))};function qw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zw(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?qw(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qw(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}const Uw=function(e){var t={display:"inline-block",marginRight:4,width:10,height:10,borderRadius:5};return l().createElement("div",{style:{position:"absolute",bottom:0,left:"50%",transform:"translateX(-175px)",zIndex:4,width:350,height:40,userSelect:"none"}},l().createElement("div",{style:{width:220,height:30,display:"flex",background:"rgba(170,168,168,0.5)",borderRadius:5,color:"#5C6380",justifyContent:"space-evenly",alignItems:"center"}},l().createElement("span",null,l().createElement("div",{style:zw(zw({},t),{},{background:"rgb(31 203 46)"})}),_t1("输入")),l().createElement("span",null,l().createElement("div",{style:zw(zw({},t),{},{background:"#6991FF"})}),_t1("输出")),l().createElement("span",null,l().createElement("div",{style:{display:"inline-block",marginRight:4,marginBottom:4,width:22,borderBottom:"2px dashed #ff4d4f"}}),_t1("无效连接"))))};var Gw=__webpack_require__(7021);function $w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yw(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?$w(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$w(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}cs()(Gw.Z,{insert:"head",singleton:!1}),Gw.Z.locals;var Hw=Cc.C.lazy("Dashboard.EditorLayout"),Vw=function(){return _t1("未定义component")},Ww={category:[],key:"flowEnd",position:{x:660,y:670},paramSchema:{},title:_t1("结束"),type:"flowEnd"},Kw=function(e){var n=e.children,r=(0,t.use)("FlowContext").context,o=useI18n().t,i=r.status,u=[];i&&!Xu().isEmpty(i)&&Object.keys(i).forEach((function(e){var t=i[e];t&&!Xu().isNil(null==t?void 0:t.mount)&&u.push(null==t?void 0:t.mount)}));var c=u.some((function(e){return 0==e}));return l().createElement(a.Spin,{spinning:c,tip:o("流程加载中...")},n)};const Xw=function(u){var c,s,d,p=u.saveItem,f=u.item,m=null==f||null===(c=f.flow)||void 0===c?void 0:c.elements,v=function(e){if(e){var t=[],n=!1;return e.map((function(e){if("flowEnd"==e.type&&(n=!0),"资产或模型事件"==e.type){var r,o=Yw(Yw({},e),{},{type:"model"==(null==e||null===(r=e.data)||void 0===r?void 0:r.eventRange)?"模型事件":"资产事件"});t.push(o)}else t.push(e)})),n||t.push(Yw({id:qg(8,16)},Ww)),t}}(m),y=v&&v.length>0?v:[Yw({id:qg(8,16)},Ww)],g=(0,i.useRef)(null),h=(0,i.useState)(null),b=(0,o.Z)(h,2),w=b[0],_=b[1],E=(0,i.useState)((function(){return y})),C=(0,o.Z)(E,2),O=C[0],x=C[1],k=useI18n().t,S=(0,i.useState)((function(){return{layout:"vertical",path:"smoothStep"}})),A=(0,o.Z)(S,2),j=A[0];A[1],l().useEffect((function(){x(y)}),[m]);var D=(null==f||null===(s=f.flow)||void 0===s?void 0:s.zoom)||1,P=(null==f||null===(d=f.flow)||void 0===d?void 0:d.position)||[0,0],T=(0,i.useState)(null),F=(0,o.Z)(T,2),L=F[0],B=F[1],M=(0,i.useState)({left:{},right:{}}),N=(0,o.Z)(M,2),I=N[0],R=N[1],Z=function(e){return x((function(t){return function(e,t){var n=e.map((function(e){return e.id}));return t.filter((function(e){var t=e;return!(n.includes(e.id)||n.includes(t.target)||n.includes(t.source))}))}(e,t)}))},q=function(e,t){x((function(n){var r=function(t){return Yw(Yw({},t),{},{id:qg(8,16),position:{x:e.xPos+30,y:e.yPos+30}})}(n.find((function(t){return t.id==e.id}))),o=n.some((function(e){return Ug(e)})),i=Ug(r);return o&&i?(a.message.warning(k("目前不支持多触发流程")),n):(t(r),n.concat(function(e,t){var n,r=e.filter((function(e){var n,r;return k((null===(n=t.data)||void 0===n?void 0:n.name)||t.title)+"-".concat(k("复制"))==(null===(r=e.data)||void 0===r?void 0:r.name)&&e.key==t.key}));if(r.length){var o,i=[];e.map((function(e){var n;if(null!==(n=e.data)&&void 0!==n&&n.name){var r,o=")"==e.data.name.slice(-1)&&e.data.name.lastIndexOf("(")>-1?e.data.name.lastIndexOf("("):e.data.name.length;e.data.name.slice(0,o)==k((null===(r=t.data)||void 0===r?void 0:r.name)||t.title)+"-".concat(k("复制"))&&e.key==t.key&&i.push(e.data)}})),n=Yw(Yw({},t.data),{},{name:k((null===(o=t.data)||void 0===o?void 0:o.name)||t.title)+"-".concat(k("复制"),"(").concat(i.length,")")})}else{var l;n=Yw(Yw({},t.data),{},{name:k((null===(l=t.data)||void 0===l?void 0:l.name)||t.title)+"-".concat(k("复制"))})}return Yw(Yw({},t),{},{data:n})}(n,r)))}))},z=O.filter((function(e){return e.id==L}))[0],U=n().get("flowNodes"),G=l().useMemo((function(){return Object.keys(U).map((function(e){var t=U[e]&&U[e].paramSchema,n=U[e]&&U[e].component||Vw;return{key:e,component:function(e){return l().createElement(n,r({},e,{paramSchema:t,layout:j.layout,onElementsRemove:Z,onElementsCopy:q}))}}})).reduce((function(t,n){return Yw(Yw({},t),{},(0,e.Z)({},n.key,n.component))}),{})}),[U]),$={defaultEdge:function(e){return l().createElement(Ob,r({},e,{pathType:j.path,onElementsRemove:Z}))},gatewayEdge:function(e){return l().createElement(pb,r({},e,{pathType:j.path,onElementsRemove:Z}))}},Y=function(e,t){var n=e.visible,r=e.width,o=Xu().isBoolean(n);return o||r?!o&&r?r:o&&n?r||320:o&&!n?0:void 0:320}(I.left),H=l().createElement("div",{className:"dndflow"},l().createElement("div",{className:"reactflow-wrapper",ref:g},l().createElement(wu,{defaultZoom:D,defaultPosition:P,elements:O,snapToGrid:!0,onConnect:function(e){var t=O.find((function(t){return t.id==e.target})),r=n().get("flowNodes")[t.type].arrowTypes,o=function(){if(r){if(Xu().isFunction(r))return r(O,e);if(!O.find((function(e){return r.indexOf(e.key)>-1})))return k("{{title}}只能在起始节点为{{arrowTypes}}的流程中连接",{title:t.title,arrowTypes:(null==r?void 0:r.join("、"))||""})}},i=function(e,t){var n="",r=ic.every((function(r){return n=r.description,r.rule(e,t)}));return r&&(n=""),{canConnect:r,description:n}}(e,O),l=i.canConnect,u=i.description;o()?a.message.warning(o()):l?x((function(t){var n=t.filter((function(t){return t.id==e.source}))[0].type;return It(Yw(Yw({},e),{},{id:"".concat(e.target,"-").concat(e.source),animated:!0,type:"gateway"==n?"gatewayEdge":"defaultEdge"}),t)})):a.message.warning(u)},onElementsRemove:Z,onEdgeUpdate:function(e,t){return x((function(n){return Rt(e,t,n)}))},onLoad:function(e){_(e)},onDrop:function(e){var t;e.preventDefault();var r=g.current.getBoundingClientRect(),o=e.dataTransfer.getData("application/reactflow"),i=null;try{i=JSON.parse(o)}catch(e){a.message.error(k("添加错误"))}if(i){var l=(null===(t=i)||void 0===t?void 0:t.dropOffset)||{x:100,y:50},u=w.project({x:e.clientX-r.left-l.x,y:e.clientY-r.top-l.y}),c=Yw(Yw({},i),{},{id:Ug(i)?f.id:qg(8,16),type:i.key,position:u,data:{}}),s=function(e,t){return!t||(Xu().isFunction(t)?t(e):Xu().isEmpty(e.filter((function(e){return t.indexOf(e.type)>-1}))))};x((function(e){var t=e.some((function(e){return Ug(e)})),r=Ug(c),o=n().get("flowNodes")[i.key].arrowTypes,l=Xu().isFunction(o)?o(e):s(e,o);return"起始节点"==i.category[0]&&function(e){var t=e.filter((function(e){var t;return null===(t=n().get("flowNodes")[e.type])||void 0===t?void 0:t.arrowTypes}));null==t||t.forEach((function(t){var r=n().get("flowNodes")[t.type].arrowTypes,o=s(e,r);e.forEach((function(e){e.source!=t.id&&e.target!=t.id||(e.style=o?{stroke:"red"}:null)}))}))}([].concat((0,Wu.Z)(e),[c])),t&&r?(a.message.warning(k("目前不支持多触发流程")),e):o&&l?(a.message.warning(Xu().isFunction(o)?k(l):k("{{title}}只能放置在{{addPermission}}流程中",{title:i.title,addPermission:(null==o?void 0:o.join("、"))||""})),e):e.concat(function(e,t){var n=e.filter((function(e){return e.key==t.key}));if(n.length){var r=[];n.map((function(e){e.data.name.split("(")[0]==t.title&&r.push(e.data)})),r.length?(t.data.name=k(t.title)+"("+(r[r.length-1].seq+1)+")",t.data.seq=r.length):(t.data.name=k(t.title),t.data.seq=0)}else t.data.name=k(t.title),t.data.seq=0;return t}(e,c))}))}},onDragOver:function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"},onSelectionChange:function(e){if(!e||(null==e?void 0:e.length)>1)B(null);else{var t=e[0];t&&B(null==t?void 0:t.id)}},nodeTypes:G,edgeTypes:$,deleteKeyCode:null},l().createElement(zu,{style:{transform:"translateX(".concat(Y+10,"px)")}}),l().createElement(Hu,{color:"#aaa",gap:16}))));return l().createElement(Vu,null,l().createElement(fc,null,l().createElement(Kw,null,l().createElement(Cc.C,{is:"AntdI18n"},l().createElement("div",{className:"flow-editor",style:{width:"100%",height:"100vh",position:"relative"}},l().createElement(Hw,{onResizeStop:function(e){R((function(t){return{left:Yw(Yw({},t.left),(null==e?void 0:e.left)||{}),right:Yw(Yw({},t.right),(null==e?void 0:e.right)||{})}}))},header:l().createElement(Zw,r({},u,{onSave:function(e){var t=e.isDraft,n=void 0!==t&&t,r=e.isAuto,o=e.notSaveLog;if(w){var i=w.toObject(),l=Gg(i.elements)||{},a=l.settings,u=l.type,c=l.publishFlow;null!=f&&f.project&&(f.draft=f.id,f.id=null==f?void 0:f.project),p(Yw(Yw({},f||{}),{},n?{settings:Yw(Yw({},a),{},{isAuto:r}),flow:i,status:"draft",notSaveLog:o}:{type:u,settings:Yw(Yw({},a),{},{isAuto:r}),flow:i,isAuto:r,publishFlow:c,status:"published",notSaveLog:o}))}},autoSave:function(e){if(w){var n=w.toObject(),r={flow:n,settings:Yw(Yw({},(Gg(n.elements)||{}).settings),{},{isAuto:e}),status:"draft"};(null==f?void 0:f.id)&&(0,t.api)({name:"flow/flow"}).fetch("/".concat(null==f?void 0:f.id),{headers:{"Request-Type":"service"},method:"PATCH",body:JSON.stringify(r)})}},onSaveDraft:function(){if(w){var e=w.toObject(),n=Gg(e.elements)||{},r=n.settings,o=n.publishFlow,i=n.type,l=Yw(Yw({},f||{}),{},{flow:e,settings:r,publishFlow:o,type:i});(0,t.api)({name:"flow/flowDraft"}).fetch(f.draft||f.project||window.draftId?"/".concat(f.draft||window.draftId||f.id):"",{method:f.draft||f.project||window.draftId?"PUT":"POST",body:JSON.stringify(Yw(Yw({},l),{},{id:window.draftId}))}).then((function(e){var t=e.json;f.draft||f.project||!t.InsertedID||(l.flow={elements:[],position:[0,0],zoom:1},l.draft=t.InsertedID,l.id=f.project?f.project:f.id,p(l),window.draftId=t.InsertedID),a.message.success(k("保存草稿成功！"))})).catch((function(e){return a.message.error(e.message)}))}},setActive:B,reactFlowInstance:w,elements:O,setElements:x})),leftSider:l().createElement(cb,null),left:{width:320,maxWidth:320},right:{width:400,maxWidth:500},rightSider:l().createElement(yb,{element:z,elements:O,updateElement:function(e){x((function(t){return t.map((function(t){return t.id==L&&(t.data=e),t}))}))}}),container:H}),l().createElement(Uw,null))))))};var Jw=function(e){return"hhihi"};const Qw=function(e){var t=e.activeTab,n=e.saveItem,i=e.onSaveDraft,a=l().useState({}),u=(0,o.Z)(a,2),c=u[0],s=u[1],d=null;return d="流程异常处理"===t?Jw:function(){return"类型暂未注册"},l().createElement(l().Fragment,null,l().createElement(Zw,r({},e,{onSave:function(){return n(c)},onSaveDraft:i})),l().createElement(d,{onChange:s}))};var e_=function(e){var t=l().useState("流程定义"),n=(0,o.Z)(t,2),i=n[0],a=n[1];return"流程定义"==i?l().createElement(Xw,r({activeTab:i,setActiveTab:a},e)):l().createElement(Qw,r({activeTab:i,setActiveTab:a},e))};const t_=function(e){var n=e.id,r=e.task,i=l().useState(),u=(0,o.Z)(i,2),c=u[0],s=u[1],d=l().useState(),p=(0,o.Z)(d,2),f=p[0],m=p[1],v=l().useState([]),y=(0,o.Z)(v,2),g=y[0],h=y[1],b=l().useState(!1),w=(0,o.Z)(b,2),_=w[0],E=w[1],C=l().useState(),O=(0,o.Z)(C,2),x=O[0],k=O[1],S=useI18n().t;return l().useEffect((function(){var e,n,o=sessionStorage.getItem("user")&&(null===(e=JSON.parse(sessionStorage.getItem("user")))||void 0===e?void 0:e.userId);if(null!=r&&null!==(n=r.referral)&&void 0!==n&&n.referralUser){var i=Xu().differenceBy(r.referral.referralUser,null==r?void 0:r.assignData,null==r?void 0:r.agreeUser,null==r?void 0:r.disagreeUser,[{id:o}],"id");h(i),k(Xu().isEmpty(i))}else m(!0),(0,t.api)({name:"core/user"}).query({fields:["roles","isSuper"]},{where:{id:{ne:o}}}).then((function(e){var n=e.items.filter((function(e){return e.isSuper}));(0,t.api)("Role").query({fields:["permission","users"]},{}).then((function(e){var t=e.items&&e.items.filter((function(e){return e.permission&&e.permission.indexOf("flowtask.edit")>-1&&e.permission.indexOf("flowtask.view")>-1||"超级管理员"==e.name}));t&&t.forEach((function(e){n=Xu().unionBy(n,e.users,"id")}));var o=Xu().differenceBy(n,null==r?void 0:r.assignData,null==r?void 0:r.agreeUser,null==r?void 0:r.disagreeUser,"id");h(o),k(Xu().isEmpty(o)),m(!1)})).catch((function(e){m(!1)}))})).catch((function(e){m(!1)}))}),[null==r?void 0:r.referral]),l().createElement(l().Fragment,null,r.approveSetting&&r.approveSetting.indexOf("referral")>-1&&l().createElement(a.Button,{type:"primary",disabled:x,onClick:function(){return E(!0)}},S("转审")),l().createElement(a.Modal,{visible:_,title:S("转审"),onCancel:function(){return E(!1)},okButtonProps:{disabled:Xu().isEmpty(c)},onOk:function(){c&&(0,t.api)({name:"flow/flowTask"}).fetch("/referral/".concat(n),{method:"PATCH",body:JSON.stringify({user:c})}).then((function(e){E(!1),history.back()})).catch((function(e){}))}},l().createElement(a.Select,{value:c,onChange:function(e){return s(e)},style:{width:"100%"},placeholder:S("用户"),loading:f},g&&g.map((function(e){return l().createElement(a.Select.Option,{key:e.id,value:e.id},e.name)})))))};var n_=function(e){return{command:_r("指令事件"),modelData:_r("设备表数据事件"),nodeData:_r("设备数据事件"),schedule:_r("计划事件"),driverEvent:_r("驱动事件"),warning:_r("报警事件"),login:_r("用户登录"),shutdown:_r("关闭系统"),boot:_r("启动系统"),worksheetRecord:_r("表事件")}[e]},r_=function(e,n){var r,o,i,l,a,u,c,s,d=t.app.get("flowNodes"),p=Xu().last(null===(r=d[e.type])||void 0===r?void 0:r.category)||"",f=n_(e.type)?_t1("{{type}}触发",{type:_t1(n_(e.type))}):_t1(null===(o=d[e.type])||void 0===o?void 0:o.title)||"",m=__webpack_require__(8074)("./".concat(n_(e.type)||(null===(i=d[e.type])||void 0===i?void 0:i.title)||"表事件",".svg")),v=n.variables&&n.variables[(null===(l=n.bpmnProcessId)||void 0===l?void 0:l.id)||n.bpmnProcessId]||{},y=e.setting||{},g=(null===(a=e.variables)||void 0===a?void 0:a[e.elementId])||e.variables||{},h=n_(e.type)?_t1("发起流程"):_t1(null===(u=d[e.type])||void 0===u?void 0:u.title)||"";if("worksheetRecord"==e.type){var b,w;c=(null===(b=v.flowTriggerUser)||void 0===b?void 0:b.name)||v.flowTriggerUser||("表记录增加"==v.extFlowType?v.creatorName||"":null===(w=v.modifyUser)||void 0===w?void 0:w.name)||"",s=_t1(v.extFlowType)}else{if("worksheet"==e.type){var _,E=(null===(_=v["#$table"])||void 0===_?void 0:_.title)||"";return React.createElement("span",null,e.type||""," - ",_t1("表名"),"(",E,")")}var C;if("login"==e.type)c=v.userName||(null===(C=v["#$user"])||void 0===C?void 0:C.name)||"",s=_t1("登录平台");else if("boot"==e.type)s=_t1("启动系统");else if("schedule"==e.type)s="period"==y.selectType?"".concat(_t1("周期触发")," - ").concat(v.interval||""):_t1("仅执行一次");else if("warning"==e.type)s="timeout"==y.warningType?_t1("数据点超时报警"):"dataPoint"==y.warningType?_t1("数据点报警"):_t1("复杂报警");else if("command"==e.type){var O;s="".concat(_t1("执行指令"),"  ").concat(_t1("指令"),"：").concat(v.cmdName||(null===(O=Xu().values(v)[0])||void 0===O?void 0:O.cmdName)||"")}else if("modelNode"==e.type){var x="model"==y.eventRange?"".concat(_t1("设备表"),"：").concat(v.modelName||""):"".concat(_t1("设备"),"：").concat(v.nodeName||"");s=React.createElement(React.Fragment,null,_t1(y.eventType),React.createElement("br",null),x)}else if("modelData"==e.type){var k,S,A,j=y.tags.filter((function(e){return Xu().keys(v).indexOf(e.id)>-1})),D=(null===(k=v["#$table"])||void 0===k?void 0:k.id)&&(null===(S=y.tags.find((function(e){var t;return(null===(t=e.table)||void 0===t?void 0:t.id)==v["#$table"].id})))||void 0===S||null===(A=S.table)||void 0===A?void 0:A.name);s=React.createElement(React.Fragment,null,_t1("数据上数"),React.createElement("br",null),_t1("设备表"),"：",D||"","  ",_t1("数据点"),"：",j&&j.map((function(e){return e.name})).join(","))}else if("nodeData"==e.type){var P,T,F,L=y.tags.filter((function(e){return Xu().keys(v).indexOf(e.id)>-1})),B=(null===(P=v["#$tableData"])||void 0===P?void 0:P.id)&&(null===(T=y.tags.find((function(e){var t;return(null===(t=e.node)||void 0===t?void 0:t.id)==v["#$tableData"].id})))||void 0===T||null===(F=T.table)||void 0===F?void 0:F.name);s=React.createElement(React.Fragment,null,_t1("数据上数"),React.createElement("br",null),_t1("设备"),"：",B||"","  ",_t1("数据点"),"：",L&&L.map((function(e){return e.name})).join(","))}else if("cmd"==e.type){var M,N,I=null===(M=g.tableDataIds)||void 0===M?void 0:M.map((function(e){return e}));s="".concat(_t1("指令"),"：").concat((null===(N=g.command)||void 0===N?void 0:N.name)||"","  ").concat(_t1("设备"),"：").concat((null==I?void 0:I.join(","))||"")}else if("表处理节点"==p){var R,Z;s="".concat(_t1("表"),"：").concat((null===(R=y.table)||void 0===R?void 0:R.title)||(null===(Z=y.table)||void 0===Z?void 0:Z.name)||"")}else if("通知"==p){var q=y.users&&y.users.map((function(e){return e.name}));s="".concat(_t1("收件人"),"：").concat((null==q?void 0:q.join(","))||"")}else if("人工节点"==p)if("INTERRUPT"==e.status)h="flowUserApprove"==e.type?_t1("终止审批"):"flowUserFillin"==e.type?_t1("终止填写"):_t1("终止");else{var z,U=sessionStorage.getItem("user")&&(null===(z=JSON.parse(sessionStorage.getItem("user")))||void 0===z?void 0:z.userId);if("flowUserApprove"==e.type){var G,$,Y,H,V,W,K,X=null,J="CREATED"==e.status?_t1("等你审批"):null,Q=(null===(G=g.agreeUser)||void 0===G?void 0:G.map((function(e){var t;return null==e||null===(t=e["#$user"])||void 0===t?void 0:t.name})))||(null===($=n.value)||void 0===$?void 0:$.agreeUser),ee=(null===(Y=g.disagreeUser)||void 0===Y?void 0:Y.map((function(e){var t;return null==e||null===(t=e["#$user"])||void 0===t?void 0:t.name})))||(null===(H=n.value)||void 0===H?void 0:H.disagreeUser);if("CREATED"==e.status)if("all"!=y.approveType||Xu().isEmpty(Q))if("and"!=y.approveType||Xu().isEmpty(ee))-1==(null===(W=n.value)||void 0===W||null===(K=W.assignees)||void 0===K?void 0:K.indexOf(U))&&(J=_t1("等待其他成员审批"));else{var te,ne=null==ee||null===(te=ee.map((function(e){return e.name})))||void 0===te?void 0:te.join(",");J=null!=ee&&ee.find((function(e){return e.id==U}))?_t1("等待其他成员审批"):_t1("等你审批"),X=React.createElement(React.Fragment,null,ne,React.createElement("br",null),_t1("于{{time}}拒绝审批",{time:moment(e.leaveTimestamp||e.timestamp).format("YYYY-MM-DD HH:mm:ss")}),React.createElement("br",null))}else{var re,oe=null==Q||null===(re=Q.map((function(e){return e.name})))||void 0===re?void 0:re.join(",");J=null!=Q&&Q.find((function(e){return e.id==U}))?_t1("等待其他成员审批"):_t1("等你审批"),X=React.createElement(React.Fragment,null,oe,React.createElement("br",null),_t1("于{{time}}通过审批",{time:moment(e.leaveTimestamp||e.timestamp).format("YYYY-MM-DD HH:mm:ss")}),React.createElement("br",null))}var ie=g.approvalStatus,le="or"==y.approveType?_t1("或签（一名审批人通过或否决即可）"):"and"==y.approveType?_t1("会签（一名审批人通过即通过，否决需要全员否决）"):_t1("会签（需要所有审批人通过）"),ae="agree"==ie?Q:"disagree"==ie?ee:null;c=null==ae||null===(V=ae.map((function(e){var t;return(null===(t=e["#$user"])||void 0===t?void 0:t.name)||e.name||e})))||void 0===V?void 0:V.join(","),h="agree"==ie?_t1("通过审批"):"disagree"==ie?_t1("拒绝审批"):_t1("审批"),s=React.createElement(React.Fragment,null,X,le,React.createElement("br",null),J)}else if("flowUserFillin"==e.type){var ue,ce,se,de,pe;c=(null===(ue=g.agreeUser)||void 0===ue?void 0:ue.map((function(e){var t;return null==e||null===(t=e["#$user"])||void 0===t?void 0:t.name})))||(null===(ce=e.fillinUser)||void 0===ce||null===(se=ce.map((function(e){return e.name||e})))||void 0===se?void 0:se.join(",")),h="提交",s="CREATED"==e.status?-1==(null===(de=n.value)||void 0===de||null===(pe=de.assignees)||void 0===pe?void 0:pe.indexOf(U))?_t1("等待填写"):_t1("等你填写"):""}else if("flowUserCC"==e.type){var fe,me=null===(fe=g.ccUser)||void 0===fe?void 0:fe.map((function(e){var t;return null==e||null===(t=e["#$user"])||void 0===t?void 0:t.name}));s="".concat(_t1("抄送用户"),"：").concat((null==me?void 0:me.join(","))||"")}}}return{title:f,icon:m,user:c,operation:h,content:s}};function o_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i_(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?o_(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var l_=a.Steps.Step,a_=a.Tabs.TabPane;const u_=function(e){var n,r=e.task,i=l().useState(),u=(0,o.Z)(i,2),c=u[0],s=u[1],d=l().useState([]),p=(0,o.Z)(d,2),f=p[0],m=p[1],v=l().useState({}),y=(0,o.Z)(v,2),g=y[0],h=y[1],b=useI18n().t,w=r.jobKey;return l().useEffect((function(){if(w){var e,n;s(!0);var o={$gte:null!==(e=r.variables)&&void 0!==e&&e["#startTimestamp"]?moment(null===(n=r.variables)||void 0===n?void 0:n["#startTimestamp"]).format("YYYY-MM-DD HH:mm:ss"):null};(0,t.api)({name:"engine/log/job"}).query({},{filter:{flowJob:w,flowid:r.bpmnProcessId.id,timestamp:o}}).then((function(e){var t=e.items;m(t),s(!1)})).catch((function(){s(!1)}))}}),[w]),l().useEffect((function(){var e;(null==r||null===(e=r.bpmnProcessId)||void 0===e?void 0:e.id)&&(0,t.api)({name:"flow/flow"}).get(r.bpmnProcessId.id).then((function(e){e.flow&&(e.flow.zoom=.5*(e.flow.zoom||1)),h(e)}))}),[null==r||null===(n=r.bpmnProcessId)||void 0===n?void 0:n.id]),c?l().createElement(Cc.Loading,null):l().createElement(a.Tabs,{defaultActiveKey:"flow"},l().createElement(a_,{tab:"执行日志",key:"flow"},l().createElement(a.Steps,{direction:"vertical",current:f.findIndex((function(e){return(null==e?void 0:e.elementId)==(null==r?void 0:r.elementId)}))},f&&f.map((function(e,t){var n,o,i,u,c,s=(null==f||null===(n=f[0])||void 0===n?void 0:n.config)&&JSON.parse(f[0].config)||[],d=0===t?(null==f||null===(o=f[0])||void 0===o?void 0:o.setting)||(null==s||null===(i=s.find((function(t){return t.id==e.elementId})))||void 0===i?void 0:i._config):null==s||null===(u=s.find((function(t){return t.id==e.elementId})))||void 0===u?void 0:u._config,p=r_(i_(i_({},e),{},{setting:d}),r)||{},m=["flowUserFillin","flowUserApprove","flowUserCC"].includes(e.type)?p.content:Xb(i_(i_({},e),{},{variables:i_(i_({},e.variables),{},{__mock__:!1}),setting:d}));return l().createElement(l_,{title:l().createElement(l().Fragment,null,p.title,null!==(c=e.variables)&&void 0!==c&&c.__mock__?l().createElement(a.Tag,{style:{marginLeft:5},className:"trigger-title"},b("模拟触发")):null),description:l().createElement(a.Card,null,l().createElement("div",{style:{display:"table"}},p.icon&&l().createElement("div",{style:{width:30,display:"table-cell",verticalAlign:"middle"},dangerouslySetInnerHTML:{__html:p.icon}}),l().createElement("div",{style:{display:"table-cell",verticalAlign:"middle",padding:"0 10px"}},l().createElement(a.Row,null,p.user),"CREATED"!==e.status&&l().createElement(a.Row,null,b("于{{time}}{{operation}}",{time:moment(e.leaveTimestamp||e.timestamp).format("YYYY-MM-DD HH:mm:ss"),operation:p.operation})),l().createElement(a.Row,null,m))))})})))),l().createElement(a_,{tab:"流转详情",key:"flow-detail"},l().createElement(ow,{item:g,records:f})))};function c_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s_(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?c_(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var d_=a.Select.Option,p_=function(e){var n=e.input,r=n.value,u=n.onChange,c=e.securitySetting,s=l().useState(),d=(0,o.Z)(s,2),p=d[0],f=d[1];(0,i.useEffect)((function(){m()}),[]);var m=function(){var e=Bs(Ns().mark((function e(){var n,r;return Ns().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={filter:{$or:[{permission:{$regex:"flowtask.view"}},{name:"超级管理员"}]}},r=encodeURIComponent(JSON.stringify(n)),(0,t.api)({name:"core/role"}).fetch("?query="+r,{}).then((function(e){var t=e.json.map((function(e){return e.id}));v(t)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(e){var n={filter:{$or:[{rolesId:{$in:e}},{isSuper:!0}]}},r=encodeURIComponent(JSON.stringify(n));(0,t.api)({name:"core/user"}).fetch("?query="+r,{}).then((function(e){var t,n,r,o=function(e,t){var n=new Map;return e.filter((function(e){return!n.has(e[t])&&n.set(e[t],1)}))}(e.json,"name"),i=[];null!=c&&c.eSignature?(null!=c&&null!==(n=c.usersList)&&void 0!==n&&n.length&&o.forEach((function(e){var t;(null==c||null===(t=c.usersList)||void 0===t?void 0:t.length)&&c.usersList.forEach((function(t){(null==e?void 0:e.id)==t&&i.push(e)}))})),null!=c&&c.usersList&&0!=(null==c||null===(r=c.usersList)||void 0===r?void 0:r.length)||(i=o)):i=o,(null===(t=i)||void 0===t?void 0:t.length)&&f(i)}))};return l().createElement(a.Select,{defaultValue:r||void 0,onChange:function(e){!function(e){u(e)}(e)}},p?p.map((function(e){return l().createElement(d_,{value:e.name,key:e.id},e.name)})):null)},f_={type:"object",properties:{username:{type:"string",title:_r("用户名")},password:{type:"string",title:_r("密码"),maxLength:30,minLength:6}},form:["*",{key:"password",attrs:{type:"password"},validate:function(e){return/^(?![^a-zA-Z]+$)(?!\D+$)/gi.test(e)?null:_r("密码必须为字母与数字组合")}}],required:["username","password"]},m_=function(e){var t=e.input,n=t.value,r=t.onChange;return l().createElement(a.Input.TextArea,{onChange:r,value:n})};const v_=function(e){var n=e.visible,i=e.setVisible,u=e.config,c=e.submitCallback,s=l().useState(f_),d=(0,o.Z)(s,2),p=d[0],f=d[1],m=useI18n().t;l().useEffect((function(){var e=u.eSignature,t=u.causeDescription;e&&!t?f(s_(s_({},f_),{},{form:[{key:"username",component:function(e){return l().createElement(p_,r({},e,{securitySetting:u}))}}].concat((0,Wu.Z)(f_.form))})):t&&f(s_(s_({},f_),{},{properties:s_(s_({},f_.properties),{},{causeDescription:{title:_r("事由说明"),type:"string"}}),form:[{key:"username",component:function(e){return l().createElement(p_,r({},e,{securitySetting:u}))}}].concat((0,Wu.Z)(f_.form),[{key:"causeDescription",component:function(e){return l().createElement(m_,e)}}]),required:["username","password","causeDescription"]}))}),[JSON.stringify(u)]);var v=function(e){var n,r={skip:0,limit:1e4,filter:null!=u&&null!==(n=u.usersList)&&void 0!==n&&n.length?{id:{$in:u.usersList}}:{},project:{name:1,department:1,username:1,password:1,isSuper:1,id:1,roles:1,"roles.permission":1},withCount:!0},o=encodeURIComponent(JSON.stringify(r));(0,t.api)({name:"core/user"}).fetch("?query="+o,{}).then((function(n){var r=n.json;if(r&&r.length>0){var o=r.filter((function(t){return(null==t?void 0:t.name)==(null==e?void 0:e.username)}));null!=o&&o.length?o.forEach((function(n){(0,t.api)({name:"core/user/check"}).fetch("",{method:"POST",body:JSON.stringify({username:null==e?void 0:e.username,password:null==e?void 0:e.password,causeDescription:null==e?void 0:e.causeDescription})}).then((function(t){if(t.json)if(n.isSuper)a.message.success(m("电子签名校验成功！")),c(e);else if(null!=n&&n.roles&&n.roles.length>0){var r=[];n.roles.forEach((function(e){e.permission&&e.permission.length&&e.permission.forEach((function(e){r.push(e)}))})),Array.from(new Set(r)).indexOf("signature")>-1?(a.message.success(m("电子签名校验成功！")),c(e)):(i(!1),a.message.warning(m("暂无权限")))}else null!=n&&n.roles&&0!=(null==n?void 0:n.roles.length)||(i(!1),a.message.warning(m("暂无权限")))})).catch((function(e){i(!1),a.message.error(m("用户名密码不正确！"))}))})):(i(!1),a.message.warning(m("暂无权限")))}else i(!1),a.message.warning(m("暂无权限"))})).catch((function(t){c(e),a.message.error(t.message)}))},y=function(e){var t=e.children,r=e.invalid,o=e.handleSubmit,i=e.submitting,u=e.onClose,c=useI18n().t;return l().createElement("form",{className:"form-horizontal"},l().createElement(a.Modal,{title:c("电子签名"),visible:n,width:"60%",okText:c("确定"),onCancel:u,cancelText:c("取消"),footer:[l().createElement(a.Button,{onClick:u},c("关闭")),l().createElement(a.Button,{disabled:r||i,type:"primary",onClick:function(e){e.stopPropagation(),o()}},c("确定"))]},t))},g=l().useMemo((function(){return p&&!Xu().isEmpty(p)?l().createElement(l().Fragment,null,l().createElement(Cc.C,{is:"I18nSchemaForm",formKey:"signature.r$"+(new Date).getTime().toString(),schema:p,onSubmit:v,onClose:function(e){e.stopPropagation(),i(!1)},component:y})):l().createElement(l().Fragment,null)}),[n,p]);return g};function y_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g_(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?y_(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var h_=a.Layout.Content,b_=function(e){var t=e.children,n=e.invalid,r=e.handleSubmit,o=e.setInvalid;return l().useEffect((function(){o(n)}),[n]),l().createElement(a.Form,{onSubmit:r,layout:"vertical"},l().createElement(a.Card,{style:{marginTop:0,border:"none"}},t))};const w_=function(i){var u,c,s,d,p,f,m,v,y,g,h,b,w,_=i.editable,E=void 0===_||_,C=(0,t.use)("params").id,O=l().useState({}),x=(0,o.Z)(O,2),k=x[0],S=x[1],A=l().useState({}),j=(0,o.Z)(A,2),D=j[0],P=j[1],T=l().useState(),F=(0,o.Z)(T,2),L=F[0],B=F[1],M=l().useState(),N=(0,o.Z)(M,2),I=N[0],R=N[1],Z=l().useState(E),q=(0,o.Z)(Z,2),z=q[0],U=q[1],G=l().useState(),$=(0,o.Z)(G,2),Y=$[0],H=$[1],V=sessionStorage.getItem("user")&&(null===(u=JSON.parse(sessionStorage.getItem("user")))||void 0===u?void 0:u.userId),W=n().get("fieldRules"),K=W.getMutualRules,X=W.getErrorNotice2,J=useI18n().t,Q=l().useState(!1),ee=(0,o.Z)(Q,2),te=ee[0],ne=ee[1];l().useEffect((function(){R(!0),(0,t.api)({name:"flow/flowTask"}).get(C).then((function(t){var n,r,o,i,l,a,u,c,s,d,p,f,m,v=E&&"START"==t.process&&(null===(n=t.value)||void 0===n||null===(r=n.assignees)||void 0===r?void 0:r.indexOf(V))>-1;("all"==(null===(o=t.value)||void 0===o?void 0:o.approveType)&&null!==(i=t.value)&&void 0!==i&&null!==(l=i.agreeUser)&&void 0!==l&&l.find((function(e){return e.id==V}))||"and"==(null===(a=t.value)||void 0===a?void 0:a.approveType)&&null!==(u=t.value)&&void 0!==u&&null!==(c=u.disagreeUser)&&void 0!==c&&c.find((function(e){return e.id==V})))&&(v=!1);var y=t.data||(null===(s=t.variables)||void 0===s?void 0:s[null===(d=t.value)||void 0===d?void 0:d.tableSource]),g=(null==t||null===(p=t.value)||void 0===p||null===(f=p.form)||void 0===f?void 0:f.properties)||{};if(y&&(y=Xu().omit(y,["createTime","creator","creatorName","modifyTime","modifyUser"]),Xu().forEach(g,(function(t,n){if(t.enum1&&t.enum_title1&&y[n]&&t.enum_title1.indexOf(y[n])>-1&&(y[n]=t.enum1[t.enum_title1.indexOf(y[n])]),t.relate||t.relateTo){var r,o,i,l=t.showField||(null===(r=t.relate)||void 0===r||null===(o=r.fields)||void 0===o||null===(i=o[0])||void 0===i?void 0:i.key)||"name";!t.disabled&&v||!t.relate?y[n]=y[n]&&"object"!=(0,wd.Z)(y[n])?(0,e.Z)({id:y[n+"Id"]},l,y[n]):y[n]:g[n].type=y[n]?Xu().isArray(y[n])?"array":(0,wd.Z)(y[n]):g[n].type,"array"==g[n].type&&y[n]&&Xu().isArray(y[n])&&(y[n]=y[n].map((function(t,r){var o;return y[n][r]&&"object"!=(0,wd.Z)(y[n][r])?(0,e.Z)({id:null===(o=y[n+"Id"])||void 0===o?void 0:o[r]},l,t):t})))}else if(y[n]&&"datePicker"==t.fieldType){var a="date"===t.format?"YYYY-MM-DD":"time"===t.format?"HH:mm:ss":"YYYY-MM-DD HH:mm:ss";y[n]=moment(y[n]).format(a)}}))),null!==(m=t.value)&&void 0!==m&&m.form){var h,b,w=null===(h=Xu().filter(null===(b=t.value)||void 0===b?void 0:b.form.properties,(function(e){return e.disabled})))||void 0===h?void 0:h.map((function(e){return e.key})),_=t.value.form.form;t.value.form.required=Xu().difference(t.value.form.required.filter((function(e){return _.indexOf(e)>-1})),w)}S(t),P(y),R(!1),U(v)})).catch((function(){R(!1)}))}),[C]);var re=function(e){ne(!0),(0,t.api)({name:"flow/flowTask"}).fetch("/".concat(C,"/").concat(e),{method:"PATCH"}).then((function(e){ne(!1),a.message.success(J("审批成功")),history.back()})).catch((function(e){ne(!1)}))},oe=function(e){var n,r,o=D||{},i=X&&(null===(n=X((null===(r=k.value)||void 0===r?void 0:r.table)||{}))||void 0===n?void 0:n.getValidateResult);(!i||i(o))&&(0,t.api)({name:"flow/flowTask"}).fetch("/".concat(C),{method:"PATCH",body:JSON.stringify({data:Xu().omit(o,"id")})}).then((function(t){re(e)})).catch((function(e){}))},ie=function(e){var n,r,o=D||{},i=X&&(null===(n=X((null===(r=k.value)||void 0===r?void 0:r.table)||{}))||void 0===n?void 0:n.getValidateResult);(!i||i(o))&&(0,t.api)({name:"flow/flowTask"}).fetch("/".concat(C,"/fillin"),{method:"PATCH",body:JSON.stringify({data:Xu().omit(o,"id")})}).then((function(n){e?(ne(!0),(0,t.api)({name:"flow/flowTask"}).fetch("/".concat(C,"/submit"),{method:"PATCH"}).then((function(e){ne(!1),a.message.success(J("提交成功")),history.back()})).catch((function(e){ne(!1)}))):a.message.success(J("保存成功"))})).catch((function(e){}))},le=null===(c=k.value)||void 0===c?void 0:c.form;null!=le&&le.properties&&(le.properties=Xu().omit(le.properties,Xu().difference(Xu().keys(le.properties),le.form)));var ae,ue,ce,se,de,pe,fe,me,ve,ye,ge=null===(s=k.value)||void 0===s||null===(d=s.table)||void 0===d?void 0:d.mutualRules,he=X((null===(p=k.value)||void 0===p?void 0:p.table)||{}).validate;return le&&!Xu().isEmpty(ge)&&(le.formEffect=K(g_(g_({},k.value.table),{},{schema:le}))),null!=le&&null!==(f=le.form)&&void 0!==f&&f.includes("id")&&(le.form=Xu().difference(le.form,["id"])),null!=le&&null!==(m=le.required)&&void 0!==m&&m.includes("id")&&(le.required=Xu().difference(le.required,["id"])),l().createElement(Cc.Page,{title:J((null===(v=k.value)||void 0===v?void 0:v.name)||"")+J("任务处理"),onBack:function(){return history.back()},actions:z&&!I&&(ye=null===(ae=k.value)||void 0===ae||null===(ue=ae.securitySetting)||void 0===ue?void 0:ue.eSignature,"fillin"==k.type?l().createElement(l().Fragment,null,l().createElement(a.Button,{type:"primary",disabled:L,onClick:function(){return ie()}},J("暂存")),l().createElement(a.Button,{type:"primary",disabled:L,loading:te,onClick:function(){return ie("submit")}},(null===(ce=k.value)||void 0===ce?void 0:ce.buttonText)||J("提交"))):l().createElement(l().Fragment,null,l().createElement(a.Button,{type:"primary",disabled:L,loading:te,onClick:function(){return ye?H(!0):oe("agree")},className:"flow-task-agree-btn"},(null===(se=k.value)||void 0===se||null===(de=se.buttonText)||void 0===de?void 0:de.confirm)||J("通过")),(null===(pe=k.value)||void 0===pe?void 0:pe.approveSetting)&&(null===(fe=k.value)||void 0===fe?void 0:fe.approveSetting.indexOf("reject"))>-1&&l().createElement(a.Button,{type:"primary",disabled:L,loading:te,onClick:function(){return oe("disagree")},danger:!0},(null===(me=k.value)||void 0===me||null===(ve=me.buttonText)||void 0===ve?void 0:ve.cancel)||J("拒绝")),l().createElement(t_,{id:C,task:k.value||{}})))},l().createElement(a.Layout,null,l().createElement(h_,null,l().createElement(a.Card,null,l().createElement(a.Row,{gutter:[30]},l().createElement(a.Col,{span:16,sm:12,xs:24,md:12,xxl:16,style:{borderRight:"1px solid #f0f0f0"}},"fillin"==k.type&&l().createElement("div",{style:{display:"flex",justifyContent:"left",padding:"10px 20px",background:"#E7ECFC",marginBottom:10}},l().createElement("div",{style:{background:"#6F87EE",padding:"5px 20px",color:"#fff"}},Xu().isString(null===(y=k.value)||void 0===y?void 0:y.table)?null===(g=k.value)||void 0===g?void 0:g.table:null===(h=k.value)||void 0===h||null===(b=h.table)||void 0===b?void 0:b.name)),l().useMemo((function(){var e,t,n;return I?l().createElement(Cc.Loading,null):Xu().isEmpty(le)&&z||Xu().isEmpty(le)&&Xu().isEmpty(null===(e=k.data)||void 0===e?void 0:e.signatures)&&!z?l().createElement(a.Empty,{description:J("暂无数据"),image:__webpack_require__(5002)}):z?l().createElement(Qp.SchemaForm,{formKey:"flowTask",schema:le,component:function(e){return l().createElement(b_,r({},e,{setInvalid:B}))},group:(0,Cc.C)("Form.SimpleGroup"),validate:he,initialValues:D,onChange:function(e){return P(e)}}):l().createElement(Gb,{schema:null===(t=k.value)||void 0===t?void 0:t.form,data:D,signatures:null===(n=k.data)||void 0===n?void 0:n.signatures})}),[k,z,I])),l().createElement(a.Col,{span:8,sm:12,xs:24,md:12,xxl:8},l().createElement(u_,{task:k})),l().createElement(v_,{config:(null===(w=k.value)||void 0===w?void 0:w.securitySetting)||{},visible:Y,setVisible:H,submitCallback:function(e){var n,r,o,i,l;H(!1);var a=D||{},u=X&&(null===(n=X((null===(r=k.value)||void 0===r?void 0:r.table)||{}))||void 0===n?void 0:n.getValidateResult);if(!u||u(a)){var c=null===(o=k.value)||void 0===o||null===(i=o.securitySetting)||void 0===i?void 0:i.authorizer,s=(null===(l=k.data)||void 0===l?void 0:l.signatures)||[],d=Xu().omit(e,"password");(0,t.api)({name:"flow/flowTask"}).fetch("/".concat(C),{method:"PATCH",body:JSON.stringify({data:g_(g_({},a),{},{authorizers:c,signatures:[].concat((0,Wu.Z)(s),[d])})})}).then((function(e){re("agree")})).catch((function(e){}))}}}))))))};function __(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E_(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?__(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):__(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var C_=a.Tabs.TabPane,O_=[{label:_r("全部"),value:"ALL"},{label:_r("待审批"),value:"approveSTART"},{label:_r("待填写"),value:"fillinSTART"},{label:_r("已完成"),value:"END"},{label:_r("已终止"),value:"INTERRUPT"}];var x_=__webpack_require__(5625);function k_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S_(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?k_(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}cs()(x_.Z,{insert:"head",singleton:!1}),x_.Z.locals;const A_=function(e){var n,r,i=(0,t.use)("model"),u=i.model,c=i.atoms,s=(0,t.use)("model.save").saveItem,d=(0,t.use)("model.select"),p=d.selected,f=d.onSelectAll,m=(0,t.use)("model.getItems").getItems,v=(0,ds.useRecoilState)(c.wheres),y=(0,o.Z)(v,2),g=y[0],h=y[1],b=(0,ds.useRecoilState)(c.skip),w=(0,o.Z)(b,2),_=(w[0],w[1]),E=null!==(n=g.filters)&&void 0!==n&&n.type?g.filters.type:!0===(null===(r=g.filters)||void 0===r?void 0:r.isDelete)?"bin":"all",C=l().useState(E),O=(0,o.Z)(C,2),x=O[0],k=O[1],S=Xu().filter(t.app.get("flowNodes"),(function(e){var t;return"起始节点"==(null==e||null===(t=e.category)||void 0===t?void 0:t[0])}))||[],A=S.filter((function(e){var t;return"系统操作节点"==(null===(t=e.category)||void 0===t?void 0:t[1])}))||[],j=S.filter((function(e){var t;return"业务数据节点"==(null===(t=e.category)||void 0===t?void 0:t[1])}))||[],D=S.filter((function(e){var t;return"起始高级节点"==(null===(t=e.category)||void 0===t?void 0:t[1])}))||[],P=Xu().uniq([].concat((0,Wu.Z)(A),(0,Wu.Z)(j),(0,Wu.Z)(D),(0,Wu.Z)(S)).map((function(e){return _r(e.title)}))),T=Y_.delete;l().useEffect((function(){u.itemActions="bin"==x?[function(e){var t=e.item;return l().createElement(a.Button,{onClick:function(){return function(e){s({id:e.id,isDelete:!1}).then((function(){return m()}))}(t)}},_t1("恢复"))},Y_.record,function(e){var t=e.item;return l().createElement(T,{item:t,isDelete:!0})}]:Xu().map(Y_,(function(e){return e}))}),[x]);var F=function(e){var t,n,r=e.type;try{n="全部流程"==r?"flow-all-icon":null,t=__webpack_require__(1128)("./".concat(r,".svg"))}catch(e){n="flow-all-icon",t=__webpack_require__(7182)}return l().createElement(Cc.Icon,{svg:t,className:n})},L=[{label:_t1("全部流程"),key:"all",icon:l().createElement(F,{type:"全部流程"})},{label:_t1("回收站"),key:"bin",icon:l().createElement(F,{type:"回收站"})}].concat((0,Wu.Z)(Xu().map(P,(function(e){return{label:_t1(e),key:e,icon:l().createElement(F,{type:e})}}))));return l().createElement("div",{className:"airiot-theme-editor flow-types",style:{height:"100%"}},l().createElement(a.Card,{title:_t1("流程"),style:{height:"100%"},bodyStyle:{padding:0}},l().createElement(a.Menu,{defaultSelectedKeys:[x],items:L,onClick:function(e){var t;if(e.key!=x){var n=e.key,r="all"==n?S_(S_({},Xu().omit(g.filters,"type")),{},{isDelete:{$ne:!0}}):"bin"==n?S_(S_({},Xu().omit(g.filters,["type","disable","invalid"])||{}),{},{isDelete:!0}):S_(S_({},g.filters||{}),{},{type:n,isDelete:{$ne:!0}});null!==(t=u.initialValues)&&void 0!==t&&t.wheres&&(u.initialValues.wheres=S_(S_({},u.initialValues.wheres),{},{filters:Xu().pick(r,["type","isDelete"])})),Xu().isEmpty(p)||f(!1),_(0),h((function(e){return S_(S_({},e),{},{filters:r})})),k(e.key)}}})))},j_=xadminAuth;function D_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P_(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?D_(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var T_=a.DatePicker.RangePicker,F_=[{value:"day",name:_t1("天")},{value:"week",name:_t1("周")},{value:"month",name:_t1("月")},{value:"year",name:_t1("年")}],L_=function(e){var n=e.input.value,i=e.input,u=l().useState([]),c=(0,o.Z)(u,2),s=c[0],d=c[1];return l().useEffect((function(){(0,t.api)({name:"flow/flow"}).query({order:{createTime:"DESC"}},{}).then((function(e){var t=e.items;d(t)}))}),[]),l().createElement(a.Select,r({},i,{value:Xu().isArray(n)?n:[],mode:"multiple",placeholder:_t1("请选择流程"),allowClear:!0,showSearch:!0,optionFilterProp:"children"}),null==s?void 0:s.map((function(e){return l().createElement(a.Select.Option,{key:e.id,value:e.id},e.name)})))},B_=function(e){var t=e.input,n=e.unit;return l().createElement(a.InputNumber,r({},t,{addonAfter:n,placeholder:_t1("输入数值")}))},M_={type:"object",title:_r("一键清除"),properties:{type:{type:"string",title:_r("操作类型"),enum:["between","retained"],enum_title:[_r("清除数据"),_r("保留数据")],description:_r("操作类型用来定义清除数据的不同操作方式，当执行清除数据时，选择时间范围的数据均被清除，选择保留数据时，定义保留数据的时长，其余数据被清除")},clearTime:{title:_r("时间定义"),type:"object",field:{component:function(e){var t="YYYY-MM-DD HH:mm:ss",n=e.input,o=n.onChange,i=n.value,a=e.input;return l().createElement(T_,r({},Xu().omit(a,"value"),{allowEmpty:[!0,!0],onChange:function(e,t){o(t[0]||t[1]?{gt:t[0],lt:t[1]}:null)},format:t,showTime:!0,defaultValue:Xu().isArray(i.time)?[moment(i.gt,t),moment(i.lt,t)]:null}))},validate:function(e,t){return"between"!=t.type||e?null:_r("时间定义不能为空")}},description:_r("可选时间范围或只定义一个时间，定义一个时间默认将定义时间之前的日志清除")},duration:{title:_r("时间定义"),type:"number",field:{unit:_r("天"),component:B_,validate:function(e,t){return"retained"==t.type&&Xu().isNil(e)?_r("时间定义不能为空"):null}}},query:{type:"object",title:_r("日志范围"),properties:{id:{title:_r("流程选择"),type:"array",items:{},field:{component:L_}},disable:{title:_r("流程状态"),type:"string",enum:["不限","已启用","已禁用"],enum_title:[_r("不限"),_r("已启用"),_r("已禁用")]}}}},required:["type"],formEffect:function(e){e.useField("type",(function(t){var n=t.value;e.setFieldData("clearTime",{display:"between"==n,field:{required:"between"==n}}),e.setFieldData("duration",{display:"retained"==n,field:{required:"retained"==n}})}))}},N_={type:"object",title:_r("周期清除"),properties:{name:{title:_r("周期名称"),type:"string"},cycle:{title:_r("周期定义"),type:"object",field:{component:function(e){var t=e.input.value,n=e.input,o=l().createElement(a.Select,{value:null==t?void 0:t.cycle_type,defaultValue:"day",onChange:function(e){return n.onChange(P_(P_({},t),{},{cycle_type:e}))},style:{minWidth:80}},F_.map((function(e){return l().createElement(a.Select.Option,{key:e.value,value:e.value},e.name)})));return l().createElement(a.InputNumber,r({},n,{value:null==t?void 0:t.cycle,onChange:function(e){return n.onChange(P_(P_({cycle_type:"day"},t),{},{cycle:e}))},precision:0,min:1,addonAfter:o,placeholder:"输入数值"}))},effect:function(e,t){var n=t.getState().initialValues;n&&!Xu().isEmpty(n)&&e.value!=n.cycle_type&&t.change("time_config",null)},validate:function(e){return Xu().isNil(null==e?void 0:e.cycle)?_r("周期不能为空"):null}}},time_config:{type:"object",title:_r("清除时间"),properties:{},field:{component:function(e){return l().createElement(Cc.C,r({is:"YmdwwpsPicker"},e))}},description:_r("可定义每个周期清除执行时间，不定义默认周期的00:00:00执行")},"clearCondition.duration":{title:_r("保留数据"),type:"number",field:{unit:_r("天"),component:B_,validate:function(e,t){return"retained"==t.type&&Xu().isNil(e)?_r("时间定义不能为空"):null}}},"clearCondition.query":{type:"object",title:_r("日志范围"),properties:{id:{title:_r("流程选择"),type:"array",items:{},field:{component:L_}},disable:{title:_r("流程状态"),type:"string",enum:["不限","已启用","已禁用"],enum_title:[_r("不限"),_r("已启用"),_r("已禁用")]}}}},required:["name","cycle"]};const I_=function(e){var n=(0,t.use)("model.getItems").getItems;return l().createElement(Cc.C,{is:"Common.ClearData",onceSchema:M_,cycleSchema:N_,url:"engine/logClean",queryKey:"id",oncePermission:"logClean.add",cyclePermissionKey:"logClean",saveItem:function(e,r){var o,i="一键清除"==r?"engine/logClean/once":e.id?"engine/logClean/".concat(e.id):"engine/logClean",l="between"==e.type&&e.clearTime?P_(P_({},Xu().omit(e,["clearTime"])),e.clearTime):"一键清除"==r?e:P_(P_({},Xu().omit(e,["cycle"])),e.cycle),u="一键清除"==r?l.query:null===(o=l.clearCondition)||void 0===o?void 0:o.query;if(u){var c={};u.id&&(c.id={$in:u.id}),u.disable&&"不限"!=u.disable&&(c.disable="已禁用"==u.disable),u.filter=c}return l.time_config||"一键清除"==r||(l.time_config={hms:"00:00:00"}),(0,t.api)({name:i}).fetch("",{method:e.id&&"一键清除"!=r?"PATCH":"POST",body:JSON.stringify(l)}).then((function(e){e.status>=200&&e.status<400?(a.message.success("一键清除"==r?_t1("清除成功！"):_t1("保存成功！")),n()):a.message.error(e.message)}))}})};function R_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z_(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?R_(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var q_=function(e){var t=e.onAdd,n=e.children;return l().createElement(a.Button,{type:"primary",onClick:t},n)};function z_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U_(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?z_(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):z_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var G_=function(e){var n=e.item,r=useI18n().t,o=(0,t.use)("model.getItems").getItems;return React.createElement(a.Popconfirm,{title:React.createElement("span",null,_t2("复制得到的流程状态为草稿，"),React.createElement("br",null),_t2("请根据需求进行调整")),onConfirm:function(){return function(e){var n=qg(4,16).slice(5);(0,t.api)({name:"flow/flow"}).fetch("/".concat(e.id),{method:"POST",body:JSON.stringify({name:e.name+r("副本")+n})}).then((function(e){a.message.success(r("复制成功")),o()})).catch((function(e){}))}(n)}},React.createElement(a.Tooltip,{title:_t2("复制")},React.createElement(a.Button,{icon:React.createElement(Cc.Icon,{type:"copy"})})))},$_=function(e){var n=e.item,r=e.isDelete,i=useI18n().t,l=(0,t.use)("model.getItems").getItems,u=(0,t.use)("model.permission").canDelete,c=(0,t.use)("model.delete",{id:n.id}).deleteItem,s=(0,t.use)("model.save").saveItem;if(!u)return null;var d=React.useState(!1),p=(0,o.Z)(d,2),f=p[0],m=p[1];return React.createElement(a.Popconfirm,{title:r?i("确定删除该流程吗?"):React.createElement(a.Checkbox,{onChange:function(e){m(e.target.checked)}},i("是否彻底删除？")),onConfirm:function(){f||r?c():function(e,t){s({id:t.id,isDelete:!0}).then((function(){return l()}))}(0,n)},onCancel:function(){},style:{cursor:"pointer"},okText:i("确定"),cancelText:i("取消")},React.createElement(a.Tooltip,{title:i("删除")},React.createElement(a.Button,{key:"action-delete",size:"small",type:"danger",className:"model-list-action"},React.createElement(Cc.Icon,{type:"delete"}))))},Y_={record:function(e){var n=e.item;return React.createElement(a.Button,{onClick:function(){return t.app.go("/app/model/Flow/".concat(n.id,"/record"))}},_t1("日志"))},copy:function(e){var t=e.item;return React.createElement(G_,{item:t})},edit:"edit",delete:function(e){var t=e.item,n=e.isDelete;return React.createElement($_,{item:t,isDelete:n})}},H_={command:_r("指令事件"),modelData:_r("设备表数据事件"),nodeData:_r("设备数据事件"),schedule:_r("计划事件"),driverEvent:_r("驱动事件"),warning:_r("报警事件"),login:_r("用户登录"),shutdown:_r("关闭系统"),boot:_r("启动系统"),worksheetRecord:_r("表事件")},V_={name:"flow",resource:"flow/flow",type:"object",icon:"Flow",title:_r("流程"),properties:{id:{type:"string",showInList:!1},name:{type:"string",title:_r("流程名称"),field:{validate:function(e){return e&&!_.trim(e)?_r("流程名称不能为空格"):null}}},createTime:{type:"string",format:"date-time",title:_r("创建时间")},modifyTime:{type:"string",format:"date-time",title:_r("最后修改时间")},flow:{type:"object",title:_r("流程图"),properties:{},showInList:!1},flowXml:{type:"object",title:_r("流程数据"),properties:{},showInList:!1},settings:{type:"object",title:_r("触发条件"),properties:{},showInList:!1},type:{type:"string",title:_r("流程类型")},startTime:{type:"string",title:_r("开始时间"),format:"datetime"},endTime:{type:"string",title:_r("结束时间"),format:"datetime"},invalid:{title:_r("生效"),type:"boolean",boolLabel:[{label:_r("失效"),color:"error",icon:"close-circle"},{label:_r("生效"),color:"success",icon:"check-circle"}]},disable:{title:_r("状态"),type:"boolean",boolLabel:[{label:_r("已禁用"),color:"error",icon:"close-circle"},{label:_r("已启用"),color:"success",icon:"check-circle"}],field:{label:_r("禁用")}},status:{title:_r("流程状态"),type:"string"}},orders:{createTime:"DESC"},partialSave:!0,forceGetItem:!0,permission:{view:!0,add:!0,edit:!0,delete:!0},form:["name","startTime",{key:"endTime",validate:function(e,t){var n=t.startTime;return new Date(n)>new Date(e)?_r("结束时间应大于开始时间"):null}},"disable"],formProps:{onSubmitSuccess:function(e,n){t.app.go("/app/model/Flow/list"),(null==e?void 0:e.id)&&t.app.go("/app/model/flow/".concat(e.id,"/edit"))}},required:["name"],editableFields:["name","disable","startTime","endTime"],listFields:["name","disable","invalid","startTime","endTime"],filters:{submenu:["name","createTime",{key:"disable",boolLabel:[_r("禁用"),_r("启用")]},{key:"invalid",boolLabel:[_r("失效"),_r("生效")]}]},initialValues:{wheres:{filters:{isDelete:{$ne:!0}}}},components:{EditPage:function(){var e=(0,t.use)("model").model,n=(0,t.use)("params"),r=(0,t.use)("model.item",{id:n&&n.id}),o=r.data,i=r.saveItem,a=r.loading,u="修改".concat(e.title+" "+(null==o?void 0:o.name));return a?l().createElement(Cc.Loading,null):l().createElement(e_,{title:u,item:o,saveItem:i})},DataEmpty:function(){return React.createElement(a.Empty,{description:_t1("暂无数据"),image:__webpack_require__(5002),style:{width:"8rem",margin:"0 auto"}})},ListPage:function(e){var r,i,u,c,s,d=(0,t.use)("model").model,p=(0,t.use)("model.transI18n",{model:d}).modelI18n,f=(0,t.use)("model.permission").canAdd,m=(0,t.use)("model.event").onAdd,v=(0,t.use)("model.state","wheres"),y=(0,o.Z)(v,2),g=y[0],h=(y[1],useI18n().t),b=null===(r=n().get("icons"))||void 0===r||null===(i=r.find((function(e){return"流程管理"==e.name})))||void 0===i?void 0:i.url,w=b?l().createElement(Cc.Icon,{svg:b}):null,_=null!==(u=g.filters)&&void 0!==u&&u.isDelete&&Xu().isBoolean(null===(c=g.filters)||void 0===c?void 0:c.isDelete)?["name","createTime"]:p.filters.submenu;return l().createElement(Oc.Model,{schema:Z_({},p),props:{filters:{submenu:_}}},l().createElement(Cc.C,{is:"AntdI18n"},l().createElement(Cc.Page,{className:"xadmin-model-list-".concat(p.key),title:l().createElement("span",null,w," ",h(p.title)),subTitle:l().createElement(Oc.ModelBlock,{name:"model.list.nav"}),sider:l().createElement(Oc.ModelBlock,{name:"model.list.sidemenu"}),actions:(s=p.components&&p.components.AddButton||(0,Cc.C)("Model.AddButton")||q_,l().createElement(l().Fragment,null,l().createElement(Oc.ModelBlock,{name:"model.list.navbtn"}),l().createElement(j_.HasPermission,{permission:"logClean.add"},l().createElement(I_,null)),f?l().createElement(s,{onAdd:m},l().createElement(Cc.Icon,{name:"plus"})," ",h("添加{{object}}",{object:h(p.title)})):null,l().createElement(j_.HasPermission,{FailureComponent:null,permission:"job.view"},l().createElement(a.Button,{type:"primary",onClick:function(){return n().go("/app/FlowJob/list")}},h("我发起的")))))},l().createElement(Oc.ModelBlock,{name:"model.list.submenu"}),l().createElement("div",{key:"model-list-subnav",style:{display:"flex",justifyContent:"space-between",marginBottom:".5rem"}},l().createElement(Cc.C,{is:"Model.Pagination"})," ",l().createElement(Cc.C,{is:"Model.ListSubMenu"})),l().createElement(Cc.C,{is:"Model.DataTable"}),l().createElement("div",{key:"model-list-downnav",style:{display:"flex",justifyContent:"space-between",marginTop:".5rem"}},l().createElement(Cc.C,{is:"Model.ActionBar"}),l().createElement(Cc.C,{is:"Model.Pagination"})))))}},fieldRender:{status:function(e){var t=e.item;return React.createElement(a.Tag,{color:"draft"==t.status?"orange":"green"},"draft"==t.status?_t2("草稿"):_t2("发布"))}},itemActions:[Y_.record,Y_.copy,Y_.edit,Y_.delete],blocks:{"model.list.sidemenu":function(){return React.createElement(A_,null)}},dataTableProps:function(e){return{scroll:{x:800},yScroll:!0,columns:e.map((function(e){return"__action__"==e.key?U_(U_({},e),{},{width:280}):e}))}}},W_={name:"flowtask",resource:"flow/flowTask/currentUser",type:"object",icon:"Log",title:_r("我的任务"),properties:{bpmnProcessId:{type:"object",title:_r("流程名称"),properties:{name:{type:"string",title:_r("流程名称")}}},flowType:{type:"string",title:_r("流程类型")},flowdata:{type:"string",title:_r("触发流程数据")},type:{type:"string",title:_r("任务类型"),enum:["approve","cc","fillin"],enum_title:[_r("审批"),_r("抄送"),_r("填写")]},value:{type:"object",title:_r("任务节点"),properties:{name:{type:"string",title:_r("任务节点")}}},process:{type:"string",title:_r("任务状态"),enum:["START","END"],enum_title:[_r("待处理"),_r("已完成")]},createTime:{type:"string",format:"date-time",title:_r("生成时间")},processTime:{type:"string",format:"date-time",title:_r("处理时间")}},orders:{createTime:"DESC"},partialSave:!0,forceGetItem:!0,permission:{view:!0,edit:!0},rolePermission:[{key:"flowtask.view",title:_r("查看")},{key:"flowtask.edit",title:_r("审批")},{key:"flowtask.fillin",title:_r("填写")}],listFields:["bpmnProcessId.name","flowType","flowdata","type","value.name","process","createTime","processTime"],projectFields:["bpmnProcessId","type","value","process","createTime","processTime","variables","oldFlow"],filters:{submenu:["bpmnProcessId.name","processTime"]},components:{DataEmpty:function(){return React.createElement(a.Empty,{description:_t1("暂无数据"),image:__webpack_require__(1678)})},ListPage:function(e){var n=(0,t.use)("model"),r=n.atoms,i=n.model,u=(0,t.use)("model.transI18n",{model:i}).modelI18n,c=useI18n().t,s=(0,ds.useRecoilState)(r.wheres||{}),d=(0,o.Z)(s,2),p=d[0],f=d[1],m=l().useState((function(){var e,t,n,r,o;return null!==(e=p.filters)&&void 0!==e&&e.process?null!==(t=p.filters)&&void 0!==t&&t.type?(null===(n=p.filters)||void 0===n?void 0:n.type)+(null===(r=p.filters)||void 0===r?void 0:r.process):null===(o=p.filters)||void 0===o?void 0:o.process:"ALL"})),v=(0,o.Z)(m,2),y=v[0],g=v[1];return l().createElement(Oc.Model,{schema:u},l().createElement(Cc.C,{is:"AntdI18n"},l().createElement(Cc.Page,{title:l().createElement(l().Fragment,null,l().createElement(Cc.Icon,{svg:"flowtask"==u.key?__webpack_require__(1471):__webpack_require__(4878),className:"taskIcon"})," ",c(u.title||"任务管理"))},l().createElement(Oc.ModelBlock,{name:"model.list.submenu"}),l().createElement(a.Tabs,{activeKey:y,onChange:function(e){var t=_.omit(p.filters,["process","type"]);"approveSTART"==e?t=E_(E_({},p.filters),{},{process:"START",type:"approve"}):"fillinSTART"==e?t=E_(E_({},p.filters),{},{process:"START",type:"fillin"}):"END"==e?t=E_(E_({},t),{},{process:"END"}):"INTERRUPT"==e&&(t=E_(E_({},t),{},{process:"INTERRUPT"})),f({filters:t}),g(e),g(e)}},O_.map((function(e){return l().createElement(C_,{tab:c(e.label),key:e.value})}))),l().createElement("div",{key:"model-list-subnav",style:{display:"flex",justifyContent:"space-between",marginBottom:".5rem"}},l().createElement(Cc.C,{is:"Model.Pagination"}),l().createElement(Cc.C,{is:"Model.ListSubMenu",batchActions:null})),l().createElement(Cc.C,{is:"Model.DataTable"}),l().createElement("div",{key:"model-list-downnav",style:{display:"flex",justifyContent:"end",marginTop:".5rem"}},l().createElement(Cc.C,{is:"Model.Pagination"})))))},EditPage:w_,DetailPage:function(e){return React.createElement(w_,r({},e,{editable:!1}))}},fieldRender:{flowType:function(e){var t,n=e.item,r=e.wrap;return React.createElement(r,null,_t1(null===(t=n.oldFlow)||void 0===t?void 0:t.type))},flowdata:function(e){var t,n,r=e.item,o=e.wrap,i="";_.forEach(H_,(function(e,t){var n;e==(null===(n=r.oldFlow)||void 0===n?void 0:n.type)&&(i=t)}));var l=Xb(U_(U_({},r),{},{type:i,setting:(null===(t=r.oldFlow)||void 0===t?void 0:t.settings)||{},elementId:null===(n=r.oldFlow)||void 0===n?void 0:n.id}));return React.createElement(o,null,l)},process:function(e){var t=e.item,n=e.wrap,r={START:"approve"==t.type?React.createElement(a.Tag,{color:"processing"},_t2("待审批")):React.createElement(a.Tag,{color:"processing"},_t2("待填写")),END:React.createElement(a.Tag,{color:"success"},_t2("已完成")),INTERRUPT:React.createElement(a.Tag,{color:"default"},_t2("已终止"))};return React.createElement(n,null,r[t.process])}},batchActions:[],itemActions:[function(e){var n,r,o,i,l,u,c,s,d,p=e.item,f=sessionStorage.getItem("user")&&(null===(n=JSON.parse(sessionStorage.getItem("user")))||void 0===n?void 0:n.userId);return"END"==p.process||"INTERRUPT"==p.process||"all"==(null===(r=p.value)||void 0===r?void 0:r.approveType)&&null!==(o=p.value)&&void 0!==o&&null!==(i=o.agreeUser)&&void 0!==i&&i.find((function(e){return e.id==f}))||"and"==(null===(l=p.value)||void 0===l?void 0:l.approveType)&&null!==(u=p.value)&&void 0!==u&&null!==(c=u.disagreeUser)&&void 0!==c&&c.find((function(e){return e.id==f}))||null===(s=p.value)||void 0===s||null===(d=s.assignees)||void 0===d||!d.includes(f)?React.createElement(a.Button,{onClick:function(){return t.app.go("/app/model/FlowTask/".concat(p.id,"/detail"))}},_t2("查看")):React.createElement(a.Button,{type:"primary",onClick:function(){return t.app.go("/app/model/FlowTask/".concat(p.id,"/edit"))}},_t2("处理"))}]};const K_={Flow:V_,FlowTask:W_,AllFlowTask:U_(U_({},W_),{},{name:"allflowtask",title:_r("任务管理"),resource:"flow/flowTask",permission:{view:!0},rolePermission:[{key:"allflowtask.view",title:_r("查看")}]}),FlowJob:{name:"job",resource:"engine/job",type:"objcet",title:_r("我发起的流程"),properties:{flowName:{type:"string",title:_r("流程名称")},flowdata:{type:"string",title:_r("触发流程数据")},type:{type:"string",title:_r("流程类型")},status:{type:"string",title:_r("状态"),enum:["CREATED","COMPLETED","FAILED"],enum_title:[_r("进行中"),_r("已完成"),_r("失败")]},timestamp:{type:"string",format:"date-time",title:_r("触发时间")}},orders:{timestamp:"DESC"},filters:{submenu:["timestamp","status"]},initialValues:function(){var e;return{wheres:{resetFilter:{user:sessionStorage.getItem("user")&&(null===(e=JSON.parse(sessionStorage.getItem("user")))||void 0===e?void 0:e.userId)}}}},partialSave:!0,forceGetItem:!0,permission:{view:!0},rolePermission:[{key:"job.view",title:_r("查看")}],listFields:["flowName","flowdata","type","status","timestamp"],projectFields:["flow","element","status","timestamp","variables","flowJob","config","user","id"],fieldRender:{flowName:function(e){var t,n=e.item,r=e.wrap;return React.createElement(r,null,null===(t=n.flow)||void 0===t?void 0:t.name)},flowdata:function(e){var t,n,r=e.item,o=e.wrap,i=Xb(U_(U_(U_({},r),_.omit(r.element,"id")),{},{setting:(null===(t=r.element)||void 0===t?void 0:t._config)||{},elementId:null===(n=r.element)||void 0===n?void 0:n.id}));return React.createElement(o,null,i)},type:function(e){var t,n=e.item,r=e.wrap;return React.createElement(r,null,null!==(t=n.element)&&void 0!==t&&t.type?H_[n.element.type]:"")},status:function(e){var t=e.item,n=e.wrap;return React.createElement(n,null,"COMPLETED"==t.status?React.createElement(a.Tag,{icon:React.createElement(Cc.Icon,{type:"check-circle"}),color:"success"},_t1("已完成")):"CREATED"==t.status?React.createElement(a.Tag,{icon:React.createElement(Cc.Icon,{type:"play-circle"}),color:"processing"},_t1("进行中")):React.createElement(a.Tag,{icon:React.createElement(Cc.Icon,{type:"exclamation-circle"}),color:"error"},_t1("失败")))}},components:{DataEmpty:function(){return React.createElement(a.Empty,{description:_t1("暂无数据"),image:__webpack_require__(5002),style:{padding:20}})}},batchActions:[],itemActions:[function(e){var n=e.item,r=moment(n.timestamp).format("YYYY-MM-DD HH:mm:ss");return React.createElement(a.Button,{size:"small",onClick:function(){var e;return t.app.go("/app/FlowJob/detail/".concat(null===(e=n.flow)||void 0===e?void 0:e.id,"/").concat(n.flowJob,"/").concat(r,"?status=").concat(n.status))}},_t1("查看"))}]},FlowLogClean:{name:"logClean",resource:"engine/logClean",type:"objcet",title:_r("流程日志清除"),properties:{name:{type:"string",title:_r("周期名称")}},orders:{createTime:"DESC"},permission:{view:!0,add:!0,edit:!0,delete:!0},rolePermission:[{key:"logClean.view",title:_r("查看")},{key:"logClean.add",title:_r("创建/一键清除")},{key:"logClean.edit",title:_r("编辑")},{key:"logClean.delete",title:_r("删除")}],batchActions:[]}};function X_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J_(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?X_(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Q_=a.DatePicker.RangePicker,eE="YYYY-MM-DD HH:mm:ss",tE=[{key:_r("前"),value:"forward"},{key:_r("当前"),value:"now"}],nE=[{key:_r("分钟"),value:"m"},{key:_r("小时"),value:"h"},{key:_r("天"),value:"d"},{key:_r("周"),value:"w"},{key:_r("月"),value:"M"},{key:_r("季度"),value:"Q"},{key:_r("年"),value:"Y"}],rE=function(e){var n,r=e.input,i=r.value,u=r.onChange,c=l().useState(),s=(0,o.Z)(c,2),d=s[0],p=s[1],f=l().useState(null==i?void 0:i.type),m=(0,o.Z)(f,2),v=m[0],y=m[1],g=(0,t.use)("model").atoms,h=(0,ds.useRecoilState)(g.wheres),b=(0,o.Z)(h,1)[0],w=null==b||null===(n=b.resetFilter)||void 0===n?void 0:n.timestamp,_=i&&!Xu().isEmpty(i)?[kc()(i.$gte),kc()(i.$lte)]:Xu().isEmpty(w)?null:[kc()(w.$gte),kc()(w.$lte)],E=useI18n().t;l().useEffect((function(){!d&&u({$gte:kc()(new Date).subtract(1,"day").format(eE),$lte:kc()(new Date).format(eE)})}),[d]);var C=function(e){var t=J_(J_({},i),e);u(t)};return l().createElement("div",{style:{display:"flex",alignItems:"center"}},d?l().createElement(a.Space,null,l().createElement(a.Select,{style:{marginRight:5,minWidth:80},value:null==i?void 0:i.type,onChange:function(e){y(e),C({type:e})},allowClear:!0},tE.map((function(e){return l().createElement(a.Select.Option,{value:e.value},E(e.key))}))),"now"!=v&&l().createElement(a.InputNumber,{value:null==i?void 0:i.count,onChange:function(e){return C({count:e})},placeholder:E("输入数值"),min:1,style:{marginRight:5,minWidth:80}}),l().createElement(a.Select,{allowClear:!0,value:null==i?void 0:i.unit,onChange:function(e){return C({unit:e})},style:{minWidth:80}},nE.map((function(e){return l().createElement(a.Select.Option,{value:e.value},E(e.key))}))),"now"!=v&&l().createElement(a.Checkbox,{style:{minWidth:120},checked:null==i?void 0:i.fromNow,onChange:function(e){return C({fromNow:e.target.checked})}},E("从当前开始"))):l().createElement(Q_,{showTime:!0,allowClear:!1,onChange:function(e,t){var n=Xu().isNil(e)?null:{$gte:t[0],$lte:t[1]};u(n)},format:"YYYY-MM-DD HH:mm:ss",value:_||[kc()(new Date).subtract(1,"day"),kc()(new Date)]}),l().createElement(a.Tooltip,{title:E(d?"切换绝对时间定义":"切换相对时间定义")},l().createElement(a.Button,{style:{marginLeft:10},onClick:function(){return p(!d)}},l().createElement(Cc.Icon,{type:"swap"}))))},oE=function(e){var n=e.children,r=e.invalid,o=e.handleSubmit,i=e.submitting,u=(0,t.use)("model.list.filter").resetFilter;return l().createElement(a.Form,{onSubmit:o},l().createElement(a.Card,{style:{marginBottom:".5rem"}},n,l().createElement(a.Row,null,l().createElement(a.Col,{span:24,style:{textAlign:"center"}},l().createElement(a.Button,{disabled:r||i,type:"primary",onClick:o},l().createElement(Cc.Icon,{type:"Search"}),_t2("搜索"))," ",l().createElement(a.Button,{disabled:i,onClick:u},_t2("重置"))))))},iE=function(e){var t=e.label,n=e.meta,o=e.input,i=e.field,u=e.children,c=i.attrs||{},s=n.touched&&n.error,d=J_(J_({extra:i.description||i.help},{labelCol:{sm:{span:8},md:{span:5}},wrapperCol:{sm:{span:16},md:{span:19}}}),{},{required:i.required,labelAlign:"right"});s&&(d.validateStatus="error",d.help=s);var p=u||l().createElement(a.Input,r({},o,c));return l().createElement(a.Col,{span:8,sm:24,xs:24,md:18,xl:16,xxl:8},l().createElement(a.Form.Item,r({colon:!1,label:_t2(t)},d),p))},lE={type:"object",properties:{timestamp:{type:"object",title:_r("触发时间"),properties:{},field:{component:rE}}},form:["timestamp"]};const aE=function(){var e=(0,t.use)("model").atoms,n=(0,ds.useRecoilState)(e.wheres),r=(0,o.Z)(n,2),i=(r[0],r[1]);return l().createElement(Qp.SchemaForm,{schema:lE,onSubmit:function(e){var t,n;null!=e&&null!==(t=e.timestamp)&&void 0!==t&&t.type?i((function(t){return J_(J_({},t),{},{filters:{timestamp:Jb(e.timestamp)}})})):null!=e&&null!==(n=e.timestamp)&&void 0!==n&&n.$gte?i((function(t){return J_(J_({},t),{},{filters:{timestamp:e.timestamp}})})):i((function(e){return J_(J_({},e),{},{filters:{}})}))},group:iE,component:oE})};var uE=function(e){var n=e.size,r=e.setPageSize,i=(0,t.use)("model.pagesize").sizes,u=l().useState(!1),c=(0,o.Z)(u,2),s=c[0],d=c[1],p=l().useState(""),f=(0,o.Z)(p,2),m=f[0],v=f[1],y=useI18n().t;return l().createElement(a.Dropdown,{key:"page-size-dropdown",onVisibleChange:d,visible:s,overlay:l().createElement(a.Menu,null,i.map((function(e){return l().createElement(a.Menu.Item,{key:"size-".concat(e),onClick:function(){return r(e)},eventKey:"size-".concat(e)},y("每页{{size}}条",{size:e}))})),l().createElement(a.Menu.Item,{key:"size-custom"},l().createElement(a.Input,{placeholder:y("自定义每页数量"),value:m,onChange:function(e){return v(e.target.value)},precision:0,onKeyPress:function(e){"Enter"==e.key&&(function(e){r(e),d(!1)}(parseInt(m)),v("")),e.persist()},style:{width:100}})))},l().createElement(a.Button,null,y("每页{{size}}条",{size:n})))},cE=function(){var e=(0,t.use)("model").atoms,n=(0,ds.useRecoilState)(e.limit),r=(0,o.Z)(n,2),i=r[0],u=r[1],c=l().useState(!1),s=(0,o.Z)(c,2),d=s[0],p=s[1],f=l().useState(),m=(0,o.Z)(f,2),v=m[0],y=m[1],g=useI18n().t;return l().createElement(a.Dropdown,{key:"page-size-dropdown",onVisibleChange:p,visible:d,overlay:l().createElement(a.Menu,null,l().createElement("span",{style:{padding:"0 15px",display:"block",width:220}},g("限定在定义时间范围内查询的最新日志条数，默认1000条")),l().createElement(a.Menu.Item,{key:"size-custom"},l().createElement(a.InputNumber,{min:1,max:5e3,placeholder:g("默认1000条"),value:i,onChange:function(e){return y(e)},precision:0,onKeyPress:function(e){if("Enter"==e.key){var t=parseInt(v);u(t),p(!1),y(null)}e.persist()},style:{width:"100%"}})))},l().createElement(a.Button,null,g("查询数量{{limit}}条",{limit:i||0})))},sE=function(e){var t=e.children;return l().createElement(l().Fragment,null,t)};const dE=function(e){var n=(0,t.use)("model"),r=n.atoms,i=n.model,u=(0,t.use)("model.transI18n",{model:i}).modelI18n,c=(0,t.use)("model.list"),s=c.loading,d=c.items,p=(0,t.use)("model.actions").renderActions,f=(0,ds.useRecoilValue)(r.count),m=l().useState(15),v=(0,o.Z)(m,2),y=v[0],g=v[1],h=useI18n().t,b=(null==u?void 0:u.listFields)&&Xu().compact(Xu().map(u.listFields,(function(e){var t=u.properties[e];if(t){var n=u.fieldRender[e]||function(e){return e.value||l().createElement(l().Fragment,null)};return{title:h(t.title),dataIndex:e,key:e,width:"errorMessage"==e?"40%":150,ellipsis:{showTitle:!0},render:function(e,t){return l().createElement(n,{value:e,item:t,wrap:sE})}}}}))),w={title:"",key:"actions",fixed:"right",width:180,render:function(e,t){return l().createElement("div",{style:{width:"100%",textAlign:"center"}},p({item:t}))}};return l().createElement(Cc.C,{is:"AntdI18n"},l().createElement(Cc.Page,{title:u.title,onBack:function(){return history.back()}},l().createElement(aE,null),l().createElement("div",{key:"model-list-subnav",style:{display:"flex",justifyContent:"space-between",marginBottom:".5rem"}},l().createElement("div",null),l().createElement(a.Space,null,l().createElement(a.Button,null,h("{{count}}条",{count:f})),l().createElement(uE,{size:y,setPageSize:g}),l().createElement(cE,null))),s?l().createElement(Cc.Loading,null):Xu().isEmpty(d)?l().createElement(a.Empty,{description:h("暂无数据"),image:__webpack_require__(5002)}):l().createElement(a.Table,{dataSource:d,columns:[].concat((0,Wu.Z)(b),[w]),bordered:!0,pagination:{showQuickJumper:!0,pageSize:y,total:Number(f)}})))};function pE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fE(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?pE(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pE(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var mE={name:"flowRecord",resource:"engine/log/flow",type:"object",icon:"log",title:_r("流程日志"),properties:{flowdata:{type:"string",title:_r("触发流程数据"),enum:["command","modelData","nodeData","schedule","modelNode","warning","login","shutdown","boot","worksheetRecord"],enum_title:[_r("指令事件"),_r("设备表数据事件"),_r("设备数据事件"),_r("计划事件"),_r("资产或模型事件"),_r("报警事件"),_r("用户登录"),_r("关闭系统"),_r("启动系统"),_r("表事件")]},status:{type:"string",title:_r("状态"),enum:["CREATED","COMPLETED","FAILED"],enum_title:[_r("进行中"),_r("已完成"),_r("失败")]},errorMessage:{type:"string",title:_r("终止/失败原因"),width:"35%"},startTimestamp:{type:"string",format:"date-time",title:_r("触发时间")}},orders:{startTimestamp:"DESC"},partialSave:!0,forceGetItem:!0,listFields:["flowdata","type","status","elementId","errorMessage","startTimestamp","timestamp","setting","variables","flowId","flowJob"],filters:{submenu:[{key:"timestamp",component:rE}]},fieldRender:{flowdata:function(e){var t=e.item,n=e.wrap,r=Xb(t);return l().createElement(n,null,r)},status:function(e){var t=e.item,n=e.wrap,r=useI18n().t,o={CREATED:l().createElement(a.Tag,{icon:l().createElement(Cc.Icon,{type:"play-circle"}),color:"processing"},r("进行中")),COMPLETED:l().createElement(a.Tag,{icon:l().createElement(Cc.Icon,{type:"check-circle"}),color:"success"},r("已完成")),FAILED:l().createElement(a.Tag,{icon:l().createElement(Cc.Icon,{type:"exclamation-circle"}),color:"error"},r("失败")),INTERRUPT:l().createElement(a.Tag,{icon:l().createElement(Cc.Icon,{type:"close-circle"}),color:"default"},r("终止"))};return l().createElement(n,null,o[t.status])},errorMessage:function(e){var t=e.item,n=e.wrap;return l().createElement(n,null,l().createElement(a.Tooltip,{title:t.errorMessage,overlayInnerStyle:{width:450,maxHeight:200,overflowY:"auto"},placement:"bottomLeft"},t.errorMessage))}},initialValues:function(){return{wheres:{filters:{timestamp:{$gte:moment(new Date).subtract(1,"day").format("YYYY-MM-DD HH:mm:ss"),$lte:moment(new Date).format("YYYY-MM-DD HH:mm:ss")}}}}},defaultPageSize:1e3,components:{DataEmpty:function(){return l().createElement(a.Empty,{description:_t1("暂无数据"),image:__webpack_require__(5002)})}},batchActions:[],itemActions:[function(e){var r,i,u=e.item,c=l().useState(!1),s=(0,o.Z)(c,2),d=s[0],p=s[1],f=l().useState(),m=(0,o.Z)(f,2),v=m[0],y=m[1],g=(0,t.use)("model.getItems",e).getItems,h=function(){var e=Bs(Ns().mark((function e(){return Ns().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,t.api)({name:"engine/job/".concat(u.flowJob,"/interrupt")}).fetch("",{method:"PUT",body:JSON.stringify({message:v})});case 4:p(!0),setTimeout((function(){a.message.success("终止流程成功！"),g(),p(!1)}),3e3);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=l().createElement("div",{style:{width:260}},l().createElement("span",null,_t1("终止流程请写明原因，终止后，本次流程将不再执行，请谨慎操作"),"!"),l().createElement(a.Input.TextArea,{onChange:function(e){return y(e.target.value)},placeholder:_t1("终止原因"),autoSize:{minRows:3,maxRows:5},style:{marginTop:8}}));return l().createElement(l().Fragment,null,l().createElement(a.Button,{size:"small",onClick:function(){return n().go("/app/model/Flow/".concat(u.flowId,"/record/").concat(u.flowJob,"/detail/").concat(u.startTimestamp,"?status=").concat(u.status))}},_t2("查看")),"CREATED"!=u.status||u.config&&!(u.config?JSON.parse(u.config):[]).find((function(e){return"flowUserApprove"===e.type||"flowUserFillin"===e.type||"delayed"===e.type}))||!(null==(i=null===n()||void 0===n()||null===(r=n().context)||void 0===r?void 0:r.user)?void 0:i.isSuper)?null:l().createElement(a.Popconfirm,{placement:"top",title:b,onConfirm:h,okText:"确认",cancelText:"取消"},l().createElement(a.Button,{danger:!0,type:"primary",size:"small",style:{marginLeft:10}},d?l().createElement("div",{style:{height:"100%",width:"100%"}},l().createElement(a.Spin,{size:"small"})," ",_t2("正在终止")):_t2("终止流程"))))}]};const vE=JSON.parse('{"变量[ {{errorTips}} ] 已不存在":"The variable [{{errorTips}}}] no longer exists","仅支持变量":"Only variables are supported","未定义component":"Component not defined","结束":"End","{{title}}只能在起始节点为{{permission}}的流程中连接":"{{title}} can only be connected in processes with a starting node of {{permission}}}","复制":"Copy","目前不支持多触发流程":"Currently, multiple trigger processes are not supported","添加错误":"Add Error","{{title}}只能放置在{{addPermission}}流程中":"{{title}} can only be placed in the {{addPermission}} process","保存草稿成功！":"Successfully saved the draft!","流程加载中...":"Loading process","必填项:":"Required:","{{info}}未填写":"{{info}} not filled in","已不存在变量":"Variable no longer exists","是否继续发布":"Do you want to continue publishing","未添加":"Not added","起始节点":"Starting node","有必填项未填写":"There are mandatory items that have not been filled in","草稿":"Draft","发布":"Release","自动保存":"Autosave","保存":"Preservation","更新发布":"Update Release","请链接结束节点":"Please link to the end node","启动系统":"Starting the system","用户登录":"User login","报警事件":"Alarm Event","指令事件":"Instruction Event","驱动事件":"Driver Event","表事件":"Table Events","计划事件":"Planned Events","设备数据事件":"Device Data Event","设备表数据事件":"Device Table Data Event","恢复":"Recovery","全部流程":"All processes","回收站":"Recycle bin","流程":"Technological process","起始":"Start","系统操作":"System operation ","业务数据":"Business data","高级":"Senior","处理":"Handle","表处理":"Table processing","全局变量处理":"Global variable processing","资产属性处理":"Asset Attribute Processing","数据":"Data","其他":"Other","人工":"Artificial","通知":"Notice","文件导入中...":"Importing files","导入成功":"Import successful","导入失败":"Import failed","导入文件":"Import File","文件导出中...":"Exporting files","导出成功":"Export successful","导出失败":"Export failed","导出文件":"Export file","导出最新的流程草稿数据":"Export the latest process draft data","请选择数据类型":"Please select a data type","无效的数据类型":"Invalid data type","配置":"To configure","分支条件":"Branching condition","请输入节点名称查询":"Please enter the node name to query","系统时间":"System time","轮询时间":"Poll time ","统计数据":"Statistical data","版本保存成功":"Version saved successfully","保存版本":"Save version","版本信息":"Version information","版本名称":"Version name","版本名称不能为空":"Version name cannot be empty","备注":"Remarks","版本删除成功":"Version deleted successfully","应用版本流程成功":"Successfully applied version process","请先选择版本":"Please select a version first","只能在起始节点为":"Can only start at node","的流程中连接":"Connect in the process of","查看版本状态不可操作":"Viewing version status is not operational","查看历史版本":"View Historical Version","历史版本":"Historical Version","编辑此版本":"Edit this version","查看更多":"View more","暂无数据":"There is currently no data available","名称":"Name","已发布":"Published","删除该版本，将无法恢复到此状态，确认删除吗?":"Deleting this version will not restore it to this state. Are you sure you want to delete it?","确定":"Determine","取消":"Cancel","版本名称修改成功":"Successfully modified version name","请输入版本名称...":"Please enter a version name","流程管理":"Process management","任务管理":"Task management","我的任务":"My Tasks","我发起的流程":"The process I initiated","副本":"Copy","复制成功":"Successfully copied","复制得到的流程状态为草稿，":"The copied process status is draft,","请根据需求进行调整":"Please adjust according to the needs","确定删除该流程吗?":"Are you sure to delete this process?","是否彻底删除？":"Are you sure you want to completely delete it?","删除":"Delete","日志":"Journal","流程名称":"Process Name","创建时间":"Creation time","最后修改时间":"Last modification time","流程图":"Flow chart","流程数据":"Process data","触发条件":"Trigger conditions","流程类型":"Process Type","开始时间":"Start time","结束时间":"End time","生效":"Take effect","失效":"Invalid","状态":"State","已禁用":"Disabled ","已启用":"Enabled","禁用":"Disabled","流程状态":"Process Status","结束时间应大于开始时间":"End time should be greater than start time","启用":"Enable","任务类型":"Task Type","审批":"Approval","抄送":"Cc","填写":"Fill in","任务节点":"Task Node","任务状态":"Task Status","待处理":"Pending processing","已完成":"Completed","生成时间":"Generation time","处理时间":"Processing time ","查看":"See","待审批":"Pending approval","待填写":"To be filled in","分支节点":"Branch node","高级节点":"Advanced nodes","订阅主题":"Subscription Theme","数据库名称":"Database Name","IP地址":"IP address","mqtt网关":"Mqtt gateway","处理节点":"Processing nodes","网关":"Gateway","db网关":"DB gateway","用户名":"User name","密码":"Password","端口":"Port","数据库名":"Database name","表名":"Table Name","上报模式":"Reporting mode","字段配置":"Field Configuration","插入值":"Insert values","目标字段":"Target Field","主键":"Primary key","opcua网关":"Opcua Gateway","主机URL":"Host URL","命名空间（默认）":"Namespaces (default)","空闲时间（S）":"Idle time (S)","数值列表":"Value List","数据点ID":"Data point ID","选择类型":"Select Type","数字":"Number","字符串":"Character string","布尔值":"Boolean value","日期":"Date","命名空间":"Namespace","opcda网关":"Opcda gateway","选择被推送的资产模型":"Select the asset model to be pushed","方法":"Method","间隔时间（MS）":"Interval time (MS)","超时时间（S）":"Time out (S)","参数":"Parameter","值":"Value","模板":"Template","数据发送方式":"Data transmission method","实时推送":"Real time push","周期推送":"Periodic push","服务质量":"Service quality","客户端ID":"Client ID ","安全策略":"Security policy ","安全模式":"Safe mode","命名空间索引":"Namespace index","类标识符":"Class identifier","程序名称":"Program Name","刷新间隔":"Refresh interval ","死区":"Dead zone","采集周期":"Collection cycle","单位为秒":"Unit in seconds","插入":"Insert","更新":"To update","目标字段查询成功":"Target field query successful","添加字段":"Add Field","获取目标字段":"Get Target Field","数据点名称":"Data point name","资产名称":"Asset Name","操作":"Operation","设备表指令":"Equipment List Instructions","设备指令":"Equipment instructions","指令类型":"Instruction Type","目标设备表":"Target Device Table","目标设备":"Target device","目标指令":"Target instruction","设备表":"Equipment List","设备":"Equipment","设备选择方式":"Device selection method","范围筛选":"Range filtering","固定设备":"Fixed equipment","筛选条件":"Filter criteria","顺序":"Order","并行":"Parallel","串行":"Serial ","全部":"Whole","指令":"Instructions","重试次数":"Retry count","电子签名":"Electronic signature ","授权人":"Authorized person","执行指令":"Execute instructions","参数名":"Parameter Name","类型":"Type","参考值":"Reference value","向URL发送请求测试获取参数列表；请求中的动态参数将取测试值":"Send a request to the URL to test and obtain a parameter list; The dynamic parameters in the request will take the test values","发送请求":"Send Request","发送请求失败":"Sending request failed","响应体":"Responder","响应头":"Response header","请求状态码":"Request Status Code","数据接口":"Data interface ","操作标识":"Operation identification","已配置返回参数":"Configured return parameters","暂无返回参数":"There are currently no return parameters","返回参数":"Return parameters","body中值绑定变量时使用模拟值发送请求":"Sending requests using simulated values when binding variables to body values","模拟值":"Analog value","在请求不成功时是否报错":"Is an error reported when the request is unsuccessful","延时类型":"Delay type ","指定日期":"Specify date","时间范围":"Time frame","延时时间":"Delay Time ","延时":"Delayed","迭代值":"Iteration value","索引":"Indexes","迭代":"Iteration","迭代项":"Iterative term","暂无迭代项":"There are currently no iteration items available","执行脚本":"Execute script","脚本信息":"Script Information","脚本变量":"Script variables","变量名称":"Variable Name","变量值":"Variable value","输出对象参数列表":"Output Object Parameter List","参数名称":"Parameter Name","参数类型":"Parameter Type","请求方式":"Request Method","已配置":"Configured","{{count}}个返回值":"{{count}} return values","{{count}}个返回值_plural":"{{count}} return values_ plural","返回参数列表":"Return parameter list","请选择用户":"Please select a user","获取表失败":"Failed to obtain table","或签（一名审批人通过或否决即可）":"Or sign (one approver can approve or reject)","会签（一名审批人通过即通过，否决需要全员否决）":"Countersign (approved by one approver, veto requires all members to veto)","会签（需要所有审批人通过）":"Countersign (requires approval from all approvers)","范围筛选用户":"Scope Filter Users","未配置用户":"User not configured","用户组":"User Group","表":"Surface","审批状态":"Approval status","审批通过人":"Approved by","通过人":"Through people","审批拒绝人":"Approval Rejected by","拒绝人":"Rejected by","审批人":"Approved by","审批形式":"Approval form","编辑":"Edit","必填":"Required","审批对象":"Approval object","用户":"User","前序节点变量用户":"Preface Node Variable User","审批设置":"Approval Settings","添加反馈":"Add feedback","允许转审":"Allow transfer for review","转审对象":"Referral object","可转给所有用户":"Can be transferred to all users","可转给指定用户":"Can be transferred to designated users","允许撤回":"Allow withdrawal","允许拒绝":"Allow rejection","安全设置":"Security setting","事由说明":"Explanation of reasons","用户列表":"User List","IP验证":"IP verification","IP地址格式错误":"IP address format error","按钮名称":"Button Name","通过按钮":"By button","拒绝按钮":"Reject button","审批字段":"Approval Fields","人工节点":"Manual nodes","审批对象,":"Approved by,","审批形式 ":"Approval form","审批字段 ":"Approval Fields","审批人 ":"Approved by","抄送用户":"CC User","抄送内容":"Cc Content","抄送字段":"Cc Field","抄送内容,":"CC content,","抄送字段,":"Cc field,","填写人":"Filled by","填写用户":"Fill in user","填写了":"Completed","个字段":"Fields","填写表":"Fill out the form","提交按钮文字":"Submit button text","数据更新到表":"Update data to table","更新方式":"Update method","新增记录":"Adding record","更新记录":"Update Records","记录选择":"Record Selection","填写字段":"Fill in fields","填写表,":"Fill out the form,","填写字段,":"Fill in the fields,","填写字段可编辑项,":"Fill in editable fields,","点击配置":"Click on Configuration","数据计算":"Data calculation","公式":"Formula","小数位数":"Decimal Places","数据节点":"Data nodes","历史数据":"Historical data ","目标数据点":"Target Data Point","数据点":"Data point","数据值筛选":"Data value filtering","周期定义":"Cycle definition","时间分组":"Time grouping","聚合方法":"Aggregation method","平均值":"Average value","中位值":"Median value","数量":"Quantity","最小值":"Minimum value","最大值":"Maximum value","求和":"Summation","首个值":"First value","最末值":"Last value","前一项数据":"Previous data","前两项数据":"The first two data items","前三项数据":"The first three data items","前一项":"Previous item","前两项":"The first two items","前三项":"The first three items","前向数据":"Forward data","前项数":"Number of antecedents","前项数据":"Previous data","时间戳":"Time stamp","数据值":"Data value","数据设备":"Data equipment","实时数据":"Real-time data ","设备数量":"Number of devices","报警条数":"Number of alarms","表条数":"Number of tables","统计节点":"Statistical nodes","统计类型":"Statistical type","分组":"Grouping","无":"Nothing","按时间":"By time","按字段":"By Field","限定条件":"Limiting conditions","数据类型":"Data type","报警相关统计":"Alarm related statistics","表相关统计":"Table related statistics","统计条件":"Statistical conditions","数据统计":"Data statistics","时间":"Time","列值":"Column value","写入数据点值":"Write data point values","目标数据点个数":"Number of target data points","数据点及值":"Data points and values","写入值":"Write value","写入时间":"Write time","未填写时间时，默认为当前时间":"When no time is filled in, it defaults to the current time","确认":"Confirm","已选择":"Selected","条":"Strip","点击选择":"Click to select","绑定的记录不属于当前表":"The bound record does not belong to the current table","尚未配置微信模板":"WeChat template has not been configured yet","获取短信模板失败":"Failed to obtain SMS template","尚未配置短信模板":"SMS template has not been configured yet","发送钉钉":"Sending nails","钉钉内容":"Nail content","标题":"Title","发送至":"Send to","请设置收件人":"Please set the recipient","发送邮件":"Sending an email","邮件内容":"Email Content","邮件的标题":"Title of the email","发送短信":"Send SMS","系统短信模板编号":"System SMS template number","短信内容变量":"SMS content variables","变量名":"Variable name","变量":"Variable","短信内容预览":"SMS content preview","收件人选择方式":"Recipient selection method","固定收件人":"Fixed recipient","收件人":"Addressee","选择接收邮件/短信/站内行/微信/钉钉通知的用户，从平台中已创建的用户中进行选择":"Select users to receive email/SMS/insider/WeChat/DingTalk notifications, and select from the users already created on the platform","发送站内信":"Sending station messages","消息内容":"Message content","发送微信":"Send WeChat","微信内容变量":"WeChat Content Variables","微信模版标识":"WeChat template identification","微信内容预览":"WeChat content preview","发送企业微信":"Send Enterprise WeChat","企业微信内容":"Enterprise WeChat Content","报警类型":"Alarm type","报警规则":"Alarm Rules","生成报警":"Generate alarms","配置值":"Configuration values","对象":"Object","数组":"Array","新增变量":"Add variables","新增类型":"New Type","变量定义":"Variable Definition","编号":"Number","全局变量处理节点":"Global variable processing node","删除变量":"Delete variables","个变量":"Variables","更新变量":"Update variables","布尔":"Boolean","变量列表":"Variable List","新增或更新":"New or updated","新增方式":"New method","表记录":"Table Record","记录ID":"Record ID","记录ID需要可包含汉字、字母、数字及特殊字符!@$-_":"Record ID needs to contain Chinese characters, letters, numbers, and special characters@$-_","此表未配置任何字段":"This table is not configured with any fields","请选择表":"Please select a table","新增或更新记录":"Add or update records","记录配置":"Record Configuration","单条记录":"Single record ","批量记录":"Batch recording","字段":"Field","数据仅支持绑定对象数组":"Data only supports binding object arrays","数据映射":"Data Mapping","表处理节点":"Table processing nodes","新增或更新表记录":"Add or update table records","节点类型":"Node Type","目标表":"Target Table","等于":"Be equal to","不等于":"Not equal to","早于":"Before","晚于":"After","在范围内":"Within the scope","不在范围内":"Not within range","记录编号":"Record number","创建人":"Creator","范围":"Range","删除记录":"Delete Record","数值类型":"Value type","文本类型":"Text Type","选择器类型":"Selector Type ","时间类型":"Time type","布尔值类型":"Boolean type","关联字段类型":"Associated Field Type","查询范围":"Query scope","自定义条数":"Number of custom items","表查询":"Table Query","设定为":"Set to","增加":"Increase","减少":"Reduce","执行设备":"Execution device","设备选择":"Device selection","指令状态":"Instruction Status","指令发送时":"When sending instructions","指令发送成功时":"When the command is successfully sent","指令发送失败时":"When command sending fails","指令名称":"Instruction Name","秒":"Second","从":"From","分":"Branch","小时":"Hour","日":"Day","周":"Week","从星期":"From week","月":"Month","年":"Year","请先选择周期":"Please select a cycle first","周期限制":"Cycle limit","指定时间条件":"Specify time conditions","星期":"Week","时":"Hour","每":"Each","每年":"Annually","每个月最后一天":"On the last day of each month","第":"Section","周的星期":"Week of the week","模型":"Model","资产":"Assets","事件":"Event","业务数据节点":"Business Data Node","模型、资产至少有一项不为空 ":"At least one of the models and assets is not empty","事件类型":"Event Type","记录":"Record","设备表下的":"Under the equipment list","触发设备":"Trigger device","触发设备表":"Trigger Device Table","数据项":"Data item","单位":"Company","正在获取节点配置相关数据":"Obtaining node configuration related data","设备表下的设备数据上数时触发":"Triggered when the device data under the device table is counted up","包含":"Contain","个数据点":"Data points","起始高级节点":"Starting Advanced Node","设备数据上数时触发":"Triggered when device data is counted up","正设备表下的设备数据上数时触发":"Triggered when the device data under the positive device table is counted up","请选择执行时间":"Please select the execution time","请选择执行月":"Please select the execution month","请选择执行日":"Please select the execution date","分钟":"Minute","天":"Day","只执行一次":"Only execute once","周期执行":"Periodic execution","执行配置":"Execute Configuration","周期配置":"Cycle Configuration","高级配置":"Advanced configuration","定义事件的执行周期":"Define the execution cycle of an event","执行时间":"Execution time","每个周期内触发事件的时间点":"The time point at which the event is triggered within each cycle","执行条件":"Conditions for execution","计划事件的生效时间":"The effective time of the planned event","周期":"Cycle","操作时间":"Operation time","固定时间":"Fixed time","每秒":"Per second","每分钟":"Per minute","每小时":"Every hour","每天":"Every day","每周":"Weekly","每月":"Monthly","一":"One","二":"Two","三":"Three","四":"Four","五":"Five","六":"Six","执行条件：":"Execution conditions:","执行":"Implement","用户范围":"User scope","用户所属部门":"User\'s department","用户角色":"User Role","报警范围":"Alarm range","不限":"Unlimited","设备表报警":"Equipment List Alarm","普通表报警":"Ordinary meter alarm","全局报警":"Global alarm","数据点采集超时报警":"Data point collection timeout alarm","数据点报警":"Data point alarm","复杂报警":"Complex alarm","设备表数据点":"Equipment table data points","设备数据点":"Device data points","报警维度":"Alarm dimension","按报警类型":"By alarm type","按级别":"On the basis of rank","按部门":"By department","按设备表":"By Equipment List","按设备":"By device","定义报警信息的筛选范围":"Define the filtering range of alarm information","普通表":"Ordinary Table","部门":"Department","级别":"Level","低":"Low","中":"In","高":"High","规则类型":"Rule Type","报警值级别":"Alarm value level","低低":"Low Low","高高":"High","报警动作":"Alarm action","报警发生":"Alarm occurrence","报警确认":"Alarm confirmation","报警处理":"Alarm processing","报警恢复":"Alarm recovery","报警发生时":"When an alarm occurs","报警处理时":"During alarm processing","抑制设备表报警时":"When suppressing device table alarms","抑制设备报警时":"When suppressing device alarms","报警确认时":"When confirming an alarm","禁用报警时":"When disabling alarms","定义报警信息的执行什么动作时触发事件":"Define the action that triggers an event when an alarm message is executed","执行频率":"Execution frequency","配置频率后，事件按照设定的执行频率触发执行，否则实时触发，单位秒。":"After configuring the frequency, the event is triggered and executed according to the set execution frequency. Otherwise, it is triggered in real time, measured in seconds.","报警描述":"Alarm Description","报警等级":"Alarm level","报警时间":"Alarm time","报警数值":"Alarm value","报警设备表":"Alarm Equipment List","报警设备":"Alarm equipment","报警部门":"Alarm department","包含了":"Including","个报警动作":"Alarm actions","更新字段":"Update fields","触发用户":"Trigger User","添加{{object}}":"Add {{object}}","我发起的":"I initiated it","前":"Front","当前":"Current","季度":"Quarter","输入数值":"Enter numerical value","从当前开始":"Starting from the current","切换绝对时间定义":"Switching absolute time definition","切换相对时间定义":"Switch relative time definition","搜索":"Search","重置":"Reset","触发时间":"Trigger time","该表不存在":"The table does not exist","{{m}}分":"{{m}}} points","{{h}}时":"{{h}} hour","{{d}}天":"{{d}} days","{{v}}秒":"{{v}}} seconds","流程日志":"Process log","触发流程数据":"Trigger process data","资产或模型事件":"Asset or Model Events","关闭系统":"Shut down the system","进行中":"Have in hand","失败":"Fail","中止/失败原因":"Reason for suspension/failure","每页{{size}}条":"{{size}} items per page","自定义每页数量":"Customize quantity per page","限定在定义时间范围内查询的最新日志条数，默认1000条":"The latest number of log entries to query within a defined time range, with a default of 1000 entries","默认1000条":"Default 1000","查询数量{{limit}}条":"Number of queries {{limit}}","{{count}}条":"{{count}}","{{count}}条_plural":"{{count}}_ plural","通过":"Adopt","等待":"Wait for","进入时间":"Entry time","离开时间":"Departure time","节点日志":"Node Log","失败原因":"Reason for failure","启动":"Start-up","{{user}}登录":"{{user}} login","已发送":"Has been sent","成功":"Success","周期触发":"Periodic trigger","仅执行一次":"Only execute once","查询出{{count}}条记录":"Found {{count}} records","查询出{{count}}条记录_plural":"Found {{count}} records_ plural","删除{{count}}条记录":"Delete {{count}} records","删除{{count}}条记录_plural":"Delete {{count}} records_ plural","更新{{count}}条记录":"Update {{count}} records","更新{{count}}条记录_plural":"Update {{count}} records_ plural","批量新增":"Batch addition","条记录":"Records","新增或更新{{count}}条记录":"Add or update {{count}} records","新增或更新{{count}}条记录_plural":"Add or update {{count}} records_ plural","数字类型":"Number type","字符串类型":"String type","布尔类型":"Boolean type","日期类型":"Date Type","对象类型":"Object type","数组类型":"Array Type","新增{{type}}变量":"Add {{type}} variable","删除{{length}}个变量":"Delete {{length}} variables","删除属性值":"Delete attribute values","更新属性值":"Update attribute values","计算值":"Calculated value","统计数{{count}}个":"Number of statistics {{count}}","统计数{{count}}个_plural":"Number of statistics {{count}}_ plural","数据点值":"Data point value","短信模板":"SMS template","发送 {{content}} 给 {{users}}":"Send {{content}} to {{users}}}","{{users}}对{{table}}进行填写":"{{users}} fills in {{table}}","{{users}}进行填写":"{{users}} to fill in","抄送{{tableName}}给{{users}}":"CC {{tableName}} to {{users}}}","{{users}}对{{table}}进行审批，":"{{users}} approves {{table}},","{{users}}进行审批，":"{{users}} for approval,","审批{{approvalStatus}}":"Approval {{approvalStatus}}","未通过":"Failed","设备表记录报警":"Equipment table record alarm","其他数据报警":"Other data alarms","指令值":"Instruction value","指令值为":"Command value is","执行{{name}}":"Execute {{name}}","延时到{{time}}执行":"Delay until {{time}} execution","延时执行":"Delayed execution","于{{time}}{{operation}}":"At {{time}} {{operation}}","转审":"Referral for review","密码必须为字母与数字组合":"Password must be a combination of letters and numbers","电子签名校验成功！":"Electronic signature verification successful!","暂无权限":"No permission temporarily","用户名密码不正确！":"The username and password are incorrect!","关闭":"Close","审批成功":"Approval successful","提交成功":"Successfully submitted","保存成功":"Successfully saved","暂存":"Temporary storage","提交":"Submit","拒绝":"Refuse","任务处理":"Task processing","{{type}}触发":"{{type}} trigger","发起流程":"Initiate process","登录平台":"Login Platform","数据点超时报警":"Data point timeout alarm","数据上数":"Data Count","等你审批":"Waiting for your approval","等待其他成员审批":"Waiting for approval from other members","于{{time}}通过审批":"Approved on {{time}}","于{{time}}拒绝审批":"Rejected approval on {{time}}","通过审批":"Approved","拒绝审批":"Reject Approval","等待填写":"Waiting for filling out","等你填写":"Waiting for you to fill out","其他表报警":"Other meter alarms","其他表":"Other Tables","个指令":"Instructions","新增记录时":"When adding a record","更新记录时":"When updating records","添加或更新记录时":"When adding or updating records","删除记录时":"When deleting records","删除数据表":"Delete Data Table","修改数据表":"Modify Data Table","范围定义":"Scope definition","启动系统时触发":"Triggered when starting the system","指定用户":"Specify user","指定部门角色":"Assign department roles","用户登录时触发":"Triggered when a user logs in","包含部门":"Including departments","包含用户":"Include users","包含角色":"Include roles","输入":"Input","输出":"Output","无效连接":"Invalid connection","请选择节点":"Please select a node","报警对象":"Alarm object","请选择":"Please select","其他节点":"Other nodes","报警规则 报警数值":"Alarm Rule Alarm Value","请选择指令":"Please select instructions","触发":"Trigger","单条新增":"Single addition","表记录Id":"Table Record Id","添加表记录":"Add Table Record","选择日期":"Select date","固定记录":"Fixed records","删除表记录":"Delete Table Record","今天":"Today","昨天":"Yesterday","明天":"Tomorrow","这周":"This week","上周":"Last week","下周":"Next week","这个月":"This month","上个月":"Last month","下个月":"Next month","今年":"This year","明年":"Next year","去年":"Last year","最新一条数据":"Latest data","自定义数量":"Custom quantity","条件筛选":"Conditional filtering","条数只能为大于0的正整数":"The number of entries can only be a positive integer greater than 0","取最新一条数据":"Get the latest piece of data","更新表记录":"Update Table Records","选了":"Selected","延时时长":"Delay duration","延时天数不能超过100天":"Delay days cannot exceed 100 days","请输入数字":"Please enter a number","已选变量":"Selected variable","可选变量":"Optional Variables ","域":"Field","数值":"Numerical value","编辑脚本":"Edit Script","脚本代码":"Script code","脚本语言(仅支持node)":"Script language (only supports nodes)","编写的脚本语言":"Script language written","脚本语言":"Scripting language ","请设置脚本语言":"Please set the script language","脚本变量个数":"Number of script variables","输出参数个数":"Number of output parameters","后":"After","介于之间":"Between","在请求不成功时报错":"Report an error when the request is unsuccessful","{{title}}只能在起始节点为{{arrowTypes}}的流程中连接":"{{title}} can only be connected in processes with a starting node of {{arrowTypes}}}","无可用配置":"No available configurations","请选择{{label}}":"Please select {{label}}","请选择设备":"Please select a device","触发记录":"Trigger Record","报警数据点":"Alarm data points","处理人":"Processed by","确认人":"Confirmed by","查看立即执行日志":"View Immediate Execution Log","立即执行日志":"Immediately execute logs","执行成功":"Execution successful","模拟触发流程，立即执行的流程也将作为真实数据进行流程的流转及处理":"Simulate the triggering process, and the immediately executed process will also be used as real data for process flow and processing","立即执行":"Execute immediately","有必填项未填写，无法立即执行":"There are mandatory items that have not been filled out and cannot be executed immediately","请添加起始节点":"Please add a starting node","选择记录":"Select Record","站内信分类":"Classification of internal messages","通知消息":"Notification message","未处理":"Unprocessed","模拟触发":"Analog trigger","更新记录触发时需选择记录，新增记录触发无需选择":"When updating a record, a record needs to be selected, and when adding a new record, there is no need to select it","算法选择":"Algorithm selection","输出参数":"Output parameters","算法":"Algorithm","未选择算法":"No Selection algorithm selected","输入参数个数":"Number of input parameters","已配置输出参数":"Configured output parameters","查看模拟执行日志":"View simulation execution logs","模拟执行日志":"Simulation Execution Log","模拟触发流程，模拟执行的流程也将作为真实数据进行流程的流转及处理":"Simulate the triggering process, and the simulated execution process will also be used as real data for process flow and processing","模拟执行":"Simulate execution","有必填项未填写，无法模拟执行":"There are mandatory items that have not been filled in, unable to simulate execution","编辑模式":"Editing mode","基础编辑":"Basic Editing","sql编辑":"SQL editing","执行Python脚本":"Executing Python scripts","执行Node脚本":"Execute Node Script","请选择流程":"Please select a process","一键清除":"One click clear","操作类型":"Operation type","清除数据":"Clear data","保留数据":"Preserve data","操作类型用来定义清除数据的不同操作方式，当执行清除数据时，选择时间范围的数据均被清除，选择保留数据时，定义保留数据的时长，其余数据被清除":"The operation type is used to define different operation methods for clearing data. When clearing data, all data within the selected time range is cleared. When retaining data, the duration of retaining data is defined, and the remaining data is cleared","时间定义":"Time Definition","时间定义不能为空":"Time definition cannot be empty","可选时间范围或只定义一个时间，定义一个时间默认将定义时间之前的日志清除":"Optional time range or define only one time, defining one time will default to clearing logs before the defined time","日志范围":"Log Range","流程选择":"Process selection","周期清除":"Cycle Clear","周期名称":"Cycle Name","周期不能为空":"Period cannot be empty","清除时间":"Clear time","可定义每个周期清除执行时间，不定义默认周期的00:00:00执行":"Can define the cleaning execution time for each cycle, without defining the default cycle\'s 00:00:00 execution time","清除成功！":"Successfully cleared!","保存成功！":"Successfully saved!","流程中有审批、填写、抄送节点时，节点日志无法关闭":"When there are approval, filling, and cc nodes in the process, the node log cannot be closed","记录节点日志":"Record node logs","流程发布后预计1分钟后生效":"Expected to take effect in 1 minute after the process is released","是":"Yes","否":"No","已终止":"Terminated","流程日志清除":"Process log clearing","创建/一键清除":"Create/One click clear","请求结果":"Request Results","状态码":"Status code","运行接口":"Run Interface","运行":"Working","终止":"Termination","正在终止":"Terminating","终止流程":"Termination process"}'),yE={zh_Hans:{translation:JSON.parse('{"变量[ {{errorTips}} ] 已不存在":"变量[ {{errorTips}} ] 已不存在","仅支持变量":"仅支持变量","未定义component":"未定义component","结束":"结束","{{title}}只能在起始节点为{{permission}}的流程中连接":"{{title}}只能在起始节点为{{permission}}的流程中连接","复制":"复制","目前不支持多触发流程":"目前不支持多触发流程","添加错误":"添加错误","{{title}}只能放置在{{addPermission}}流程中":"{{title}}只能放置在{{addPermission}}流程中","保存草稿成功！":"保存草稿成功！","流程加载中...":"流程加载中...","必填项:":"必填项:","{{info}}未填写":"{{info}}未填写","已不存在变量":"已不存在变量","是否继续发布":"是否继续发布","未添加":"未添加","起始节点":"起始节点","有必填项未填写":"有必填项未填写","草稿":"草稿","发布":"发布","自动保存":"自动保存","保存":"保存","更新发布":"更新发布","请链接结束节点":"请链接结束节点","启动系统":"启动系统","用户登录":"用户登录","报警事件":"报警事件","指令事件":"指令事件","驱动事件":"驱动事件","表事件":"表事件","计划事件":"计划事件","设备数据事件":"设备数据事件","设备表数据事件":"设备表数据事件","恢复":"恢复","全部流程":"全部流程","回收站":"回收站","流程":"流程","起始":"起始","系统操作":"系统操作","业务数据":"业务数据","高级":"高级","处理":"处理","表处理":"表处理","全局变量处理":"全局变量处理","资产属性处理":"资产属性处理","数据":"数据","其他":"其他","人工":"人工","通知":"通知","文件导入中...":"文件导入中...","导入成功":"导入成功","导入失败":"导入失败","导入文件":"导入文件","文件导出中...":"文件导出中...","导出成功":"导出成功","导出失败":"导出失败","导出文件":"导出文件","导出最新的流程草稿数据":"导出最新的流程草稿数据","请选择数据类型":"请选择数据类型","无效的数据类型":"无效的数据类型","配置":"配置","分支条件":"分支条件","请输入节点名称查询":"请输入节点名称查询","系统时间":"系统时间","轮询时间":"轮询时间","统计数据":"统计数据","版本保存成功":"版本保存成功","保存版本":"保存版本","版本信息":"版本信息","版本名称":"版本名称","版本名称不能为空":"版本名称不能为空","备注":"备注","版本删除成功":"版本删除成功","应用版本流程成功":"应用版本流程成功","请先选择版本":"请先选择版本","只能在起始节点为":"只能在起始节点为","的流程中连接":"的流程中连接","查看版本状态不可操作":"查看版本状态不可操作","查看历史版本":"查看历史版本","历史版本":"历史版本","编辑此版本":"编辑此版本","查看更多":"查看更多","暂无数据":"暂无数据","名称":"名称","已发布":"已发布","删除该版本，将无法恢复到此状态，确认删除吗?":"删除该版本，将无法恢复到此状态，确认删除吗?","确定":"确定","取消":"取消","版本名称修改成功":"版本名称修改成功","请输入版本名称...":"请输入版本名称...","流程管理":"流程管理","任务管理":"任务管理","我的任务":"我的任务","我发起的流程":"我发起的流程","副本":"副本","复制成功":"复制成功","复制得到的流程状态为草稿，":"复制得到的流程状态为草稿，","请根据需求进行调整":"请根据需求进行调整","确定删除该流程吗?":"确定删除该流程吗?","是否彻底删除？":"是否彻底删除？","删除":"删除","日志":"日志","流程名称":"流程名称","创建时间":"创建时间","最后修改时间":"最后修改时间","流程图":"流程图","流程数据":"流程数据","触发条件":"触发条件","流程类型":"流程类型","开始时间":"开始时间","结束时间":"结束时间","生效":"生效","失效":"失效","状态":"状态","已禁用":"已禁用","已启用":"已启用","禁用":"禁用","流程状态":"流程状态","结束时间应大于开始时间":"结束时间应大于开始时间","启用":"启用","任务类型":"任务类型","审批":"审批","抄送":"抄送","填写":"填写","任务节点":"任务节点","任务状态":"任务状态","待处理":"待处理","已完成":"已完成","生成时间":"生成时间","处理时间":"处理时间","查看":"查看","待审批":"待审批","待填写":"待填写","分支节点":"分支节点","高级节点":"高级节点","订阅主题":"订阅主题","数据库名称":"数据库名称","IP地址":"IP地址","mqtt网关":"mqtt网关","处理节点":"处理节点","网关":"网关","db网关":"db网关","用户名":"用户名","密码":"密码","端口":"端口","数据库名":"数据库名","表名":"表名","上报模式":"上报模式","字段配置":"字段配置","插入值":"插入值","目标字段":"目标字段","主键":"主键","opcua网关":"opcua网关","主机URL":"主机URL","命名空间（默认）":"命名空间（默认）","空闲时间（S）":"空闲时间（S）","数值列表":"数值列表","数据点ID":"数据点ID","选择类型":"选择类型","数字":"数字","字符串":"字符串","布尔值":"布尔值","日期":"日期","命名空间":"命名空间","opcda网关":"opcda网关","选择被推送的资产模型":"选择被推送的资产模型","方法":"方法","间隔时间（MS）":"间隔时间（MS）","超时时间（S）":"超时时间（S）","参数":"参数","值":"值","模板":"模板","数据发送方式":"数据发送方式","实时推送":"实时推送","周期推送":"周期推送","服务质量":"服务质量","客户端ID":"客户端ID","安全策略":"安全策略","安全模式":"安全模式","命名空间索引":"命名空间索引","类标识符":"类标识符","程序名称":"程序名称","刷新间隔":"刷新间隔","死区":"死区","采集周期":"采集周期","单位为秒":"单位为秒","插入":"插入","更新":"更新","目标字段查询成功":"目标字段查询成功","添加字段":"添加字段","获取目标字段":"获取目标字段","数据点名称":"数据点名称","资产名称":"资产名称","操作":"操作","设备表指令":"设备表指令","设备指令":"设备指令","指令类型":"指令类型","目标设备表":"目标设备表","目标设备":"目标设备","目标指令":"目标指令","设备表":"设备表","设备":"设备","设备选择方式":"设备选择方式","范围筛选":"范围筛选","固定设备":"固定设备","筛选条件":"筛选条件","顺序":"顺序","并行":"并行","串行":"串行","全部":"全部","指令":"指令","重试次数":"重试次数","电子签名":"电子签名","授权人":"授权人","执行指令":"执行指令","参数名":"参数名","类型":"类型","参考值":"参考值","向URL发送请求测试获取参数列表；请求中的动态参数将取测试值":"向URL发送请求测试获取参数列表；请求中的动态参数将取测试值","发送请求":"发送请求","发送请求失败":"发送请求失败","响应体":"响应体","响应头":"响应头","请求状态码":"请求状态码","数据接口":"数据接口","操作标识":"操作标识","已配置返回参数":"已配置返回参数","暂无返回参数":"暂无返回参数","返回参数":"返回参数","body中值绑定变量时使用模拟值发送请求":"body中值绑定变量时使用模拟值发送请求","模拟值":"模拟值","在请求不成功时是否报错":"在请求不成功时是否报错","延时类型":"延时类型","指定日期":"指定日期","时间范围":"时间范围","延时时间":"延时时间","延时":"延时","迭代值":"迭代值","索引":"索引","迭代":"迭代","迭代项":"迭代项","暂无迭代项":"暂无迭代项","执行脚本":"执行脚本","脚本信息":"脚本信息","脚本变量":"脚本变量","变量名称":"变量名称","变量值":"变量值","输出对象参数列表":"输出对象参数列表","参数名称":"参数名称","参数类型":"参数类型","请求方式":"请求方式","已配置":"已配置","返回参数列表":"返回参数列表","{{count}}个返回值":"{{count}}个返回值","请选择用户":"请选择用户","获取表失败":"获取表失败","或签（一名审批人通过或否决即可）":"或签（一名审批人通过或否决即可）","会签（一名审批人通过即通过，否决需要全员否决）":"会签（一名审批人通过即通过，否决需要全员否决）","会签（需要所有审批人通过）":"会签（需要所有审批人通过）","范围筛选用户":"范围筛选用户","未配置用户":"未配置用户","用户组":"用户组","表":"表","审批状态":"审批状态","审批通过人":"审批通过人","通过人":"通过人","审批拒绝人":"审批拒绝人","拒绝人":"拒绝人","审批人":"审批人","审批形式":"审批形式","编辑":"编辑","必填":"必填","审批对象":"审批对象","用户":"用户","前序节点变量用户":"前序节点变量用户","审批设置":"审批设置","添加反馈":"添加反馈","允许转审":"允许转审","转审对象":"转审对象","可转给所有用户":"可转给所有用户","可转给指定用户":"可转给指定用户","允许撤回":"允许撤回","允许拒绝":"允许拒绝","安全设置":"安全设置","事由说明":"事由说明","用户列表":"用户列表","IP验证":"IP验证","IP地址格式错误":"IP地址格式错误","按钮名称":"按钮名称","通过按钮":"通过按钮","拒绝按钮":"拒绝按钮","审批字段":"审批字段","人工节点":"人工节点","审批对象,":"审批对象,","审批形式 ":"审批形式 ","审批字段 ":"审批字段 ","审批人 ":"审批人 ","抄送用户":"抄送用户","抄送内容":"抄送内容","抄送字段":"抄送字段","抄送内容,":"抄送内容,","抄送字段,":"抄送字段,","填写人":"填写人","填写用户":"填写用户","填写了":"填写了","个字段":"个字段","填写表":"填写表","提交按钮文字":"提交按钮文字","数据更新到表":"数据更新到表","更新方式":"更新方式","新增记录":"新增记录","更新记录":"更新记录","记录选择":"记录选择","填写字段":"填写字段","填写表,":"填写表,","填写字段,":"填写字段,","填写字段可编辑项,":"填写字段可编辑项,","点击配置":"点击配置","数据计算":"数据计算","公式":"公式","小数位数":"小数位数","数据节点":"数据节点","历史数据":"历史数据","目标数据点":"目标数据点","数据点":"数据点","数据值筛选":"数据值筛选","周期定义":"周期定义","时间分组":"时间分组","聚合方法":"聚合方法","平均值":"平均值","中位值":"中位值","数量":"数量","最小值":"最小值","最大值":"最大值","求和":"求和","首个值":"首个值","最末值":"最末值","前一项数据":"前一项数据","前两项数据":"前两项数据","前三项数据":"前三项数据","前一项":"前一项","前两项":"前两项","前三项":"前三项","前向数据":"前向数据","前项数":"前项数","前项数据":"前项数据","时间戳":"时间戳","数据值":"数据值","数据设备":"数据设备","实时数据":"实时数据","设备数量":"设备数量","报警条数":"报警条数","表条数":"表条数","统计节点":"统计节点","统计类型":"统计类型","分组":"分组","无":"无","按时间":"按时间","按字段":"按字段","限定条件":"限定条件","数据类型":"数据类型","报警相关统计":"报警相关统计","表相关统计":"表相关统计","统计条件":"统计条件","数据统计":"数据统计","时间":"时间","列值":"列值","写入数据点值":"写入数据点值","目标数据点个数":"目标数据点个数","数据点及值":"数据点及值","写入值":"写入值","写入时间":"写入时间","未填写时间时，默认为当前时间":"未填写时间时，默认为当前时间","确认":"确认","已选择":"已选择","条":"条","点击选择":"点击选择","绑定的记录不属于当前表":"绑定的记录不属于当前表","尚未配置微信模板":"尚未配置微信模板","获取短信模板失败":"获取短信模板失败","尚未配置短信模板":"尚未配置短信模板","发送钉钉":"发送钉钉","钉钉内容":"钉钉内容","标题":"标题","发送至":"发送至","请设置收件人":"请设置收件人","发送邮件":"发送邮件","邮件内容":"邮件内容","邮件的标题":"邮件的标题","发送短信":"发送短信","系统短信模板编号":"系统短信模板编号","短信内容变量":"短信内容变量","变量名":"变量名","变量":"变量","短信内容预览":"短信内容预览","收件人选择方式":"收件人选择方式","固定收件人":"固定收件人","收件人":"收件人","选择接收邮件/短信/站内行/微信/钉钉通知的用户，从平台中已创建的用户中进行选择":"选择接收邮件/短信/站内行/微信/钉钉通知的用户，从平台中已创建的用户中进行选择","发送站内信":"发送站内信","消息内容":"消息内容","发送微信":"发送微信","微信内容变量":"微信内容变量","微信模版标识":"微信模版标识","微信内容预览":"微信内容预览","发送企业微信":"发送企业微信","企业微信内容":"企业微信内容","报警类型":"报警类型","报警规则":"报警规则","生成报警":"生成报警","配置值":"配置值","对象":"对象","数组":"数组","新增变量":"新增变量","新增类型":"新增类型","变量定义":"变量定义","编号":"编号","全局变量处理节点":"全局变量处理节点","删除变量":"删除变量","个变量":"个变量","更新变量":"更新变量","布尔":"布尔","变量列表":"变量列表","新增或更新":"新增或更新","新增方式":"新增方式","表记录":"表记录","记录ID":"记录ID","记录ID需要可包含汉字、字母、数字及特殊字符!@$-_":"记录ID需要可包含汉字、字母、数字及特殊字符!@$-_","此表未配置任何字段":"此表未配置任何字段","请选择表":"请选择表","新增或更新记录":"新增或更新记录","记录配置":"记录配置","单条记录":"单条记录","批量记录":"批量记录","字段":"字段","数据仅支持绑定对象数组":"数据仅支持绑定对象数组","数据映射":"数据映射","表处理节点":"表处理节点","新增或更新表记录":"新增或更新表记录","节点类型":"节点类型","目标表":"目标表","等于":"等于","不等于":"不等于","早于":"早于","晚于":"晚于","在范围内":"在范围内","不在范围内":"不在范围内","记录编号":"记录编号","创建人":"创建人","范围":"范围","删除记录":"删除记录","数值类型":"数值类型","文本类型":"文本类型","选择器类型":"选择器类型","时间类型":"时间类型","布尔值类型":"布尔值类型","关联字段类型":"关联字段类型","查询范围":"查询范围","自定义条数":"自定义条数","表查询":"表查询","设定为":"设定为","增加":"增加","减少":"减少","执行设备":"执行设备","设备选择":"设备选择","指令状态":"指令状态","指令发送时":"指令发送时","指令发送成功时":"指令发送成功时","指令发送失败时":"指令发送失败时","指令名称":"指令名称","秒":"秒","从":"从","分":"分","小时":"小时","日":"日","周":"周","从星期":"从星期","月":"月","年":"年","请先选择周期":"请先选择周期","周期限制":"周期限制","指定时间条件":"指定时间条件","星期":"星期","时":"时","每":"每","每年":"每年","每个月最后一天":"每个月最后一天","第":"第","周的星期":"周的星期","模型":"模型","资产":"资产","事件":"事件","业务数据节点":"业务数据节点","模型、资产至少有一项不为空 ":"模型、资产至少有一项不为空 ","事件类型":"事件类型","记录":"记录","设备表下的":"设备表下的","触发设备":"触发设备","触发设备表":"触发设备表","数据项":"数据项","单位":"单位","正在获取节点配置相关数据":"正在获取节点配置相关数据","设备表下的设备数据上数时触发":"设备表下的设备数据上数时触发","包含":"包含","个数据点":"个数据点","起始高级节点":"起始高级节点","设备数据上数时触发":"设备数据上数时触发","正设备表下的设备数据上数时触发":"正设备表下的设备数据上数时触发","请选择执行时间":"请选择执行时间","请选择执行月":"请选择执行月","请选择执行日":"请选择执行日","分钟":"分钟","天":"天","只执行一次":"只执行一次","周期执行":"周期执行","执行配置":"执行配置","周期配置":"周期配置","高级配置":"高级配置","定义事件的执行周期":"定义事件的执行周期","执行时间":"执行时间","每个周期内触发事件的时间点":"每个周期内触发事件的时间点","执行条件":"执行条件","计划事件的生效时间":"计划事件的生效时间","周期":"周期","操作时间":"操作时间","固定时间":"固定时间","每秒":"每秒","每分钟":"每分钟","每小时":"每小时","每天":"每天","每周":"每周","每月":"每月","一":"一","二":"二","三":"三","四":"四","五":"五","六":"六","执行条件：":"执行条件：","执行":"执行","用户范围":"用户范围","用户所属部门":"用户所属部门","用户角色":"用户角色","报警范围":"报警范围","不限":"不限","设备表报警":"设备表报警","普通表报警":"普通表报警","全局报警":"全局报警","数据点采集超时报警":"数据点采集超时报警","数据点报警":"数据点报警","复杂报警":"复杂报警","设备表数据点":"设备表数据点","设备数据点":"设备数据点","报警维度":"报警维度","按报警类型":"按报警类型","按级别":"按级别","按部门":"按部门","按设备表":"按设备表","按设备":"按设备","定义报警信息的筛选范围":"定义报警信息的筛选范围","普通表":"普通表","部门":"部门","级别":"级别","低":"低","中":"中","高":"高","规则类型":"规则类型","报警值级别":"报警值级别","低低":"低低","高高":"高高","报警动作":"报警动作","报警发生":"报警发生","报警确认":"报警确认","报警处理":"报警处理","报警恢复":"报警恢复","报警发生时":"报警发生时","报警处理时":"报警处理时","抑制设备表报警时":"抑制设备表报警时","抑制设备报警时":"抑制设备报警时","报警确认时":"报警确认时","禁用报警时":"禁用报警时","定义报警信息的执行什么动作时触发事件":"定义报警信息的执行什么动作时触发事件","执行频率":"执行频率","配置频率后，事件按照设定的执行频率触发执行，否则实时触发，单位秒。":"配置频率后，事件按照设定的执行频率触发执行，否则实时触发，单位秒。","报警描述":"报警描述","报警等级":"报警等级","报警时间":"报警时间","报警数值":"报警数值","报警设备表":"报警设备表","报警设备":"报警设备","报警部门":"报警部门","包含了":"包含了","个报警动作":"个报警动作","更新字段":"更新字段","触发用户":"触发用户","添加{{object}}":"添加{{object}}","我发起的":"我发起的","前":"前","当前":"当前","季度":"季度","输入数值":"输入数值","从当前开始":"从当前开始","切换绝对时间定义":"切换绝对时间定义","切换相对时间定义":"切换相对时间定义","搜索":"搜索","重置":"重置","触发时间":"触发时间","该表不存在":"该表不存在","{{m}}分":"{{m}}分","{{h}}时":"{{h}}时","{{d}}天":"{{d}}天","{{v}}秒":"{{v}}秒","流程日志":"流程日志","触发流程数据":"触发流程数据","资产或模型事件":"资产或模型事件","关闭系统":"关闭系统","进行中":"进行中","失败":"失败","中止/失败原因":"中止/失败原因","每页{{size}}条":"每页{{size}}条","自定义每页数量":"自定义每页数量","限定在定义时间范围内查询的最新日志条数，默认1000条":"限定在定义时间范围内查询的最新日志条数，默认1000条","默认1000条":"默认1000条","查询数量{{limit}}条":"查询数量{{limit}}条","{{count}}条":"{{count}}条","通过":"通过","等待":"等待","进入时间":"进入时间","离开时间":"离开时间","节点日志":"节点日志","失败原因":"失败原因","启动":"启动","{{user}}登录":"{{user}}登录","已发送":"已发送","成功":"成功","周期触发":"周期触发","仅执行一次":"仅执行一次","批量新增":"批量新增","条记录":"条记录","数字类型":"数字类型","字符串类型":"字符串类型","布尔类型":"布尔类型","日期类型":"日期类型","对象类型":"对象类型","数组类型":"数组类型","新增{{type}}变量":"新增{{type}}变量","删除{{length}}个变量":"删除{{length}}个变量","删除属性值":"删除属性值","更新属性值":"更新属性值","计算值":"计算值","数据点值":"数据点值","短信模板":"短信模板","发送 {{content}} 给 {{users}}":"发送 {{content}} 给 {{users}}","{{users}}对{{table}}进行填写":"{{users}}对{{table}}进行填写","{{users}}进行填写":"{{users}}进行填写","抄送{{tableName}}给{{users}}":"抄送{{tableName}}给{{users}}","{{users}}对{{table}}进行审批，":"{{users}}对{{table}}进行审批，","{{users}}进行审批，":"{{users}}进行审批，","审批{{approvalStatus}}":"审批{{approvalStatus}}","未通过":"未通过","设备表记录报警":"设备表记录报警","其他数据报警":"其他数据报警","指令值":"指令值","指令值为":"指令值为","执行{{name}}":"执行{{name}}","延时到{{time}}执行":"延时到{{time}}执行","延时执行":"延时执行","查询出{{count}}条记录":"查询出{{count}}条记录","删除{{count}}条记录":"删除{{count}}条记录","更新{{count}}条记录":"更新{{count}}条记录","新增或更新{{count}}条记录":"新增或更新{{count}}条记录","统计数{{count}}个":"统计数{{count}}个","于{{time}}{{operation}}":"于{{time}}{{operation}}","转审":"转审","密码必须为字母与数字组合":"密码必须为字母与数字组合","电子签名校验成功！":"电子签名校验成功！","暂无权限":"暂无权限","用户名密码不正确！":"用户名密码不正确！","关闭":"关闭","审批成功":"审批成功","提交成功":"提交成功","保存成功":"保存成功","暂存":"暂存","提交":"提交","拒绝":"拒绝","任务处理":"任务处理","{{type}}触发":"{{type}}触发","发起流程":"发起流程","登录平台":"登录平台","数据点超时报警":"数据点超时报警","数据上数":"数据上数","等你审批":"等你审批","等待其他成员审批":"等待其他成员审批","于{{time}}通过审批":"于{{time}}通过审批","于{{time}}拒绝审批":"于{{time}}拒绝审批","通过审批":"通过审批","拒绝审批":"拒绝审批","等待填写":"等待填写","等你填写":"等你填写","其他表报警":"其他表报警","其他表":"其他表","个指令":"个指令","新增记录时":"新增记录时","更新记录时":"更新记录时","添加或更新记录时":"添加或更新记录时","删除记录时":"删除记录时","删除数据表":"删除数据表","修改数据表":"修改数据表","范围定义":"范围定义","启动系统时触发":"启动系统时触发","指定用户":"指定用户","指定部门角色":"指定部门角色","用户登录时触发":"用户登录时触发","包含部门":"包含部门","包含用户":"包含用户","包含角色":"包含角色","输入":"输入","输出":"输出","无效连接":"无效连接","请选择节点":"请选择节点","报警对象":"报警对象","请选择":"请选择","其他节点":"其他节点","报警规则 报警数值":"报警规则 报警数值","请选择指令":"请选择指令","触发":"触发","单条新增":"单条新增","表记录Id":"表记录Id","添加表记录":"添加表记录","选择日期":"选择日期","固定记录":"固定记录","删除表记录":"删除表记录","今天":"今天","昨天":"昨天","明天":"明天","这周":"这周","上周":"上周","下周":"下周","这个月":"这个月","上个月":"上个月","下个月":"下个月","今年":"今年","明年":"明年","去年":"去年","最新一条数据":"最新一条数据","自定义数量":"自定义数量","条件筛选":"条件筛选","条数只能为大于0的正整数":"条数只能为大于0的正整数","取最新一条数据":"取最新一条数据","更新表记录":"更新表记录","选了":"选了","延时时长":"延时时长","延时天数不能超过100天":"延时天数不能超过100天","请输入数字":"请输入数字","已选变量":"已选变量","可选变量":"可选变量","域":"域","数值":"数值","编辑脚本":"编辑脚本","脚本代码":"脚本代码","脚本语言(仅支持node)":"脚本语言(仅支持node)","编写的脚本语言":"编写的脚本语言","脚本语言":"脚本语言","请设置脚本语言":"请设置脚本语言","脚本变量个数":"脚本变量个数","输出参数个数":"输出参数个数","后":"后","介于之间":"介于之间","在请求不成功时报错":"在请求不成功时报错","{{title}}只能在起始节点为{{arrowTypes}}的流程中连接":"{{title}}只能在起始节点为{{arrowTypes}}的流程中连接","无可用配置":"无可用配置","请选择{{label}}":"请选择{{label}}","请选择设备":"请选择设备","触发记录":"触发记录","报警数据点":"报警数据点","处理人":"处理人","确认人":"确认人","查看立即执行日志":"查看立即执行日志","立即执行日志":"立即执行日志","执行成功":"执行成功","模拟触发流程，立即执行的流程也将作为真实数据进行流程的流转及处理":"模拟触发流程，立即执行的流程也将作为真实数据进行流程的流转及处理","立即执行":"立即执行","有必填项未填写，无法立即执行":"有必填项未填写，无法立即执行","请添加起始节点":"请添加起始节点","选择记录":"选择记录","站内信分类":"站内信分类","通知消息":"通知消息","未处理":"未处理","模拟触发":"模拟触发","更新记录触发时需选择记录，新增记录触发无需选择":"更新记录触发时需选择记录，新增记录触发无需选择","算法选择":"算法选择","输出参数":"输出参数","算法":"算法","未选择算法":"未选择算法","输入参数个数":"输入参数个数","已配置输出参数":"已配置输出参数","查看模拟执行日志":"查看模拟执行日志","模拟执行日志":"模拟执行日志","模拟触发流程，模拟执行的流程也将作为真实数据进行流程的流转及处理":"模拟触发流程，模拟执行的流程也将作为真实数据进行流程的流转及处理","模拟执行":"模拟执行","有必填项未填写，无法模拟执行":"有必填项未填写，无法模拟执行","编辑模式":"编辑模式","基础编辑":"基础编辑","sql编辑":"sql编辑","执行Python脚本":"执行Python脚本","执行Node脚本":"执行Node脚本","请选择流程":"请选择流程","一键清除":"一键清除","操作类型":"操作类型","清除数据":"清除数据","保留数据":"保留数据","操作类型用来定义清除数据的不同操作方式，当执行清除数据时，选择时间范围的数据均被清除，选择保留数据时，定义保留数据的时长，其余数据被清除":"操作类型用来定义清除数据的不同操作方式，当执行清除数据时，选择时间范围的数据均被清除，选择保留数据时，定义保留数据的时长，其余数据被清除","时间定义":"时间定义","时间定义不能为空":"时间定义不能为空","可选时间范围或只定义一个时间，定义一个时间默认将定义时间之前的日志清除":"可选时间范围或只定义一个时间，定义一个时间默认将定义时间之前的日志清除","日志范围":"日志范围","流程选择":"流程选择","周期清除":"周期清除","周期名称":"周期名称","周期不能为空":"周期不能为空","清除时间":"清除时间","可定义每个周期清除执行时间，不定义默认周期的00:00:00执行":"可定义每个周期清除执行时间，不定义默认周期的00:00:00执行","清除成功！":"清除成功！","保存成功！":"保存成功！","流程中有审批、填写、抄送节点时，节点日志无法关闭":"流程中有审批、填写、抄送节点时，节点日志无法关闭","记录节点日志":"记录节点日志","流程发布后预计1分钟后生效":"流程发布后预计1分钟后生效","是":"是","否":"否","已终止":"已终止","流程日志清除":"流程日志清除","创建/一键清除":"创建/一键清除","请求结果":"请求结果","状态码":"状态码","运行接口":"运行接口","运行":"运行","终止":"终止","正在终止":"正在终止","终止流程":"终止流程"}')},en:{translation:vE}};function gE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hE(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?gE(Object(r),!0).forEach((function(n){(0,e.Z)(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gE(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}n().use(hE(hE({name:"iot.flow",items:{flowNodes:{type:"map"},flowConvert:{type:"map"},flowUtil:{type:"map"}},flowUtil:{calculatorToString:gs,makeFilter:eg},flowConvert:Ng,flowNodes:zh,icons:[{name:"Flow",url:__webpack_require__(1231)},{name:"allFlowTask",url:__webpack_require__(8114)},{name:"FlowTask",url:__webpack_require__(7770)}],menuItems:[{title:_r("流程管理"),key:"business.flow",url:"/app/model/Flow/list",icon:"Flow",permission:"flow.view"},{title:_r("任务管理"),key:"business.allTask",url:"/app/model/allFlowTask/list",icon:"allFlowTask",permission:"allflowtask.view"},{title:_r("我的任务"),key:"business.task",url:"/app/model/FlowTask/list",icon:"FlowTask",permission:"flowtask.view"}],frontMenuItems:[{title:_r("流程管理"),key:"business.flow",url:"/app/model/Flow/list",icon:"Flow",permission:"flow.view"},{title:_r("任务管理"),key:"business.allTask",url:"/app/model/allFlowTask/list",icon:"allFlowTask",permission:"allflowtask.view"},{title:_r("我的任务"),key:"business.task",url:"/app/model/FlowTask/list",icon:"FlowTask",permission:"flowtask.view"},{title:_r("我发起的流程"),key:"business.job",url:"/app/model/FlowJob/list",icon:"FlowTask",permission:"job.view"}],components:rb,hooks:ab,models:K_,locales:yE},Xv),{},{routers:{"/app/":[{path:"model/Flow/:id/record",component:function(e){var n=(0,t.use)("params").id,r=l().useState(mE),i=(0,o.Z)(r,2),a=i[0],u=i[1],c=useI18n().t;l().useEffect((function(){window._flow_record_httpCache_&&(window._flow_record_httpCache_=null),(0,t.api)({name:"flow/flow"}).get(n).then((function(e){u(fE(fE({},a),{},{title:e.name+c("流程日志")}))}))}),[n]);var s={$gte:moment(new Date).subtract(1,"day").format("YYYY-MM-DD HH:mm:ss"),$lte:moment(new Date).format("YYYY-MM-DD HH:mm:ss")};return l().createElement(Oc.Model,{modelKey:"flow-record-".concat(n),key:"flow-record-".concat(n),schema:a,initialValues:{wheres:{resetFilter:{flowid:n,timestamp:s}}}},l().createElement(dE,null))}},{path:"model/Flow/:flowId/record/:recordId/detail/:timestamp",component:fw},{path:"FlowJob/list",component:function(e){var n=(0,t.use)("model.transI18n",{model:K_}).modelI18n;return l().createElement(Oc.Model,{schema:n.FlowJob},l().createElement(Cc.C,{is:"AntdI18n"},l().createElement(Cc.Page,{className:"xadmin-model-list-".concat(n.FlowJob.key),title:l().createElement("span",null,_t1(n.FlowJob.title)),subTitle:l().createElement(Oc.ModelBlock,{name:"model.list.nav"}),onBack:function(){return history&&history.length>1&&history.back()||app.go("/app/model/Flow/list")}},l().createElement(Oc.ModelBlock,{name:"model.list.submenu"}),l().createElement("div",{key:"model-list-subnav",style:{display:"flex",justifyContent:"space-between",marginBottom:".5rem"}},l().createElement(Cc.C,{is:"Model.Pagination"})," ",l().createElement(Cc.C,{is:"Model.ListSubMenu"})),l().createElement(Cc.C,{is:"Model.DataTable"}),l().createElement("div",{key:"model-list-downnav",style:{display:"flex",justifyContent:"space-between",marginTop:".5rem"}},l().createElement(Cc.C,{is:"Model.ActionBar"}),l().createElement(Cc.C,{is:"Model.Pagination"})))))}},{path:"FlowJob/detail/:flowId/:recordId/:timestamp",component:fw}]}}))})()})();
//# sourceMappingURL=index.js.map