import React from "react";
import { InputNumber, Select } from "antd";



const format = (val) => {
  if (!val) {
    return {}
  } else if (val%3600 === 0) {
    return { num: val/3600, type: 'h' }
  } else if (val%60 === 0) {
    return { num: val/60, type: 'm' }
  } else {
    return { num: val, type: 's' }
  }
}

const DelayFull = ({ input }) => {
  const { t:_t1, i18n } = useI18n()
  const r = format(input.value)
  const [num, setNum] = React.useState(r.num)
  const [type, setType] = React.useState(r.type)

  const options = [
    { value: 's', label: _t1('秒') },
    { value: 'm', label: _t1('分钟') },
    { value: 'h', label: _t1('小时') }
  ]

  React.useEffect(() => {
    let obj = { s: 1, m: 60, h: 3600 }
    input.onChange(num * obj[type])
  }, [num, type])

  return <>
    <InputNumber min={1} max={99999} value={num} onChange={setNum} />
    <Select style={{ width: 100, marginLeft: 10 }} options={options} value={type} onChange={setType} />
  </>
}

export default DelayFull
