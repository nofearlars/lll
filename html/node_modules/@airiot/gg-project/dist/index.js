/*! For license information please see index.js.LICENSE.txt */
(()=>{var e={693:e=>{e.exports='<svg viewBox="0 0 32 34" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>数据点</title><defs><linearGradient x1="86.7775662%" y1="91.7555951%" x2="14.0452829%" y2="8.31185571%" id="linearGradient-14"><stop stop-color="#C3CAEA" offset="0%"></stop><stop stop-color="#FDFDFD" offset="100%"></stop></linearGradient><path d="M23,7 C24.1045695,7 25,7.8954305 25,9 L25,23 C25,24.1045695 24.1045695,25 23,25 L9,25 C7.8954305,25 7,24.1045695 7,23 L7,9 C7,7.8954305 7.8954305,7 9,7 L23,7 Z M13.2647179,10.4694143 C12.3741855,11.1880893 12.2423564,12.4760244 12.9695005,13.3536093 L11.2724756,15.5636348 C10.4478539,15.3109257 9.55839212,15.6856693 9.17844346,16.445882 C8.79849481,17.2060946 9.04180864,18.1241831 9.75126966,18.6073093 C10.4607307,19.0904354 11.4239398,18.9939603 12.0189229,18.380181 C12.613906,17.7664017 12.6625365,16.819072 12.1334121,16.1499122 L13.8115384,13.964572 C14.1943409,14.115812 14.6140222,14.1537195 15.0185994,14.073599 L17.1817899,18.3030243 C16.4627081,18.8365606 16.1717988,19.7603949 16.4590962,20.5980667 C16.7463935,21.4357385 17.5476994,22 18.4497464,22 C19.3304546,22 20.1175152,21.4613972 20.4208501,20.6514008 C20.724185,19.8414044 20.4793331,18.9320374 19.8076463,18.3739947 L20.7399776,16.4859074 C21.6860424,16.6496393 22.610489,16.1049117 22.9062283,15.2094502 C23.2019675,14.3139886 22.7784364,13.3420065 21.9137701,12.9318098 C21.0491038,12.5216131 20.0080855,12.7988145 19.4743574,13.5813744 C18.9406294,14.3639343 19.077633,15.4122127 19.7953972,16.0377995 L18.8630659,17.9255439 C18.6279063,17.8795599 18.3864658,17.8731829 18.1491186,17.9066871 L15.9582801,13.6258339 C16.8381086,12.8946157 16.9509084,11.6049474 16.2108833,10.7377576 C15.4708583,9.87056781 14.1552504,9.75073933 13.2647179,10.4694143 Z M18.4497464,19.0079285 C18.9768357,19.0079285 19.404126,19.4265235 19.404126,19.9428865 C19.404126,20.4592496 18.9768357,20.8778446 18.4497464,20.8778446 C17.9226571,20.8778446 17.4953668,20.4592496 17.4953668,19.9428865 C17.4953668,19.4265235 17.9226571,19.0079285 18.4497464,19.0079285 Z M10.7503141,16.4207654 C11.1896073,16.4208272 11.5456912,16.769715 11.5456912,17.2000686 C11.5456912,17.6304221 11.1896073,17.9793099 10.7503141,17.9793717 C10.4660852,17.9794117 10.2034295,17.8308861 10.0613032,17.5897525 C9.91917699,17.3486188 9.91917699,17.0515184 10.0613032,16.8103847 C10.2034295,16.5692511 10.4660852,16.4207255 10.7503141,16.4207654 Z M21.0745529,13.7715462 C21.5577664,13.7715462 21.9494884,14.1552966 21.9494884,14.6286768 C21.9494884,15.1020569 21.5577664,15.4858074 21.0745529,15.4858074 C20.5913393,15.4858074 20.1996174,15.1020569 20.1996174,14.6286768 C20.1996174,14.1552966 20.5913393,13.7715462 21.0745529,13.7715462 Z M14.6000303,11.1223269 C15.1271196,11.1223269 15.5544099,11.5409218 15.5544099,12.0572849 C15.5544099,12.573648 15.1271196,12.992243 14.6000303,12.992243 C14.072941,12.992243 13.6456507,12.573648 13.6456507,12.0572849 C13.6456507,11.5409218 14.072941,11.1223269 14.6000303,11.1223269 Z" id="path-14"></path><filter x="-58.3%" y="-41.7%" width="216.7%" height="216.7%" filterUnits="objectBoundingBox" id="filter-3"><feOffset dx="0" dy="3" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset><feGaussianBlur stdDeviation="3" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur><feColorMatrix values="0 0 0 0 0.21684124 0 0 0 0 0.325918763 0 0 0 0 0.804181749 0 0 0 1 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix></filter></defs><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="设备台账表" transform="translate(-46.000000, -838.000000)"><g id="数据点" transform="translate(46.000000, 838.000000)"><rect id="关闭系统‘" fill="#637DEF" x="0" y="0" width="32" height="32" rx="7"></rect><g id="形状结合" fill-rule="nonzero"><use fill="black" fill-opacity="1" filter="url(#filter-3)" xlink:href="#path-14"></use><use fill="url(#linearGradient-14)" xlink:href="#path-14"></use></g></g></g></g></svg>'},61:(e,t,n)=>{var r=n(698).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},l="function"==typeof Symbol?Symbol:{},s=l.iterator||"@@iterator",u=l.asyncIterator||"@@asyncIterator",c=l.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,o=Object.create(i.prototype),l=new P(r||[]);return a(o,"_invoke",{value:_(e,n,l)}),o}function m(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var f={};function y(){}function v(){}function h(){}var g={};d(g,s,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(T([])));w&&w!==n&&o.call(w,s)&&(g=w);var O=h.prototype=y.prototype=Object.create(g);function E(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,a,l,s){var u=m(e[i],e,a);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==r(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,l,s)}),(function(e){n("throw",e,l,s)})):t.resolve(d).then((function(e){c.value=e,l(c)}),(function(e){return n("throw",e,l,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}})}function _(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var l=C(a,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=m(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function C(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=m(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function T(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:D}}function D(){return{value:void 0,done:!0}}return v.prototype=h,a(O,"constructor",{value:h,configurable:!0}),a(h,"constructor",{value:v,configurable:!0}),v.displayName=d(h,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,d(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},E(S.prototype),d(S.prototype,u,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new S(p(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(O),d(O,c,"Generator"),d(O,s,(function(){return this})),d(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=o.call(i,"catchLoc"),s=o.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},698:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},687:(e,t,n)=>{var r=n(61)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===e(n)?n:String(n)}function r(e,n,r){return(n=t(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}const i=xadmin,o=React;var a=n.n(o);const l=xadminUi;function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],s=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const d=antd;var p={key:{title:_r("标识"),type:"string",description:_r("标识为字段存在数据库中的唯一标识信息，不可以为ID且首位不能是数字。")},title:{title:_r("标题"),type:"string",maxLength:256,description:_r("字段在平台中的名称信息")},description:{title:_r("字段说明"),type:"string"},descriptionType:{title:_r("说明形式"),type:"string",enum1:["below","tooltip"],enum_title1:[_r("控件下方"),_r("图标悬停显示")],selectFace:"flatten",selectType:"single"},need:{title:_r("必填"),type:"boolean"},disabled:{type:"boolean",title:_r("只读")}},m={unique:{title:_r("不允许重复"),type:"boolean"},createShow:{title:_r("创建时显示"),type:"boolean"},editShow:{title:_r("修改时显示"),type:"boolean"},listFields:{title:_r("列表中显示"),type:"boolean"},editableFields:{title:_r("列表中可编辑"),type:"boolean"},batchChangeFields:{title:_r("列表页可批量编辑"),type:"boolean"},filterFields:{title:_r("过滤查询中显示"),type:"boolean"},filterByRes:{title:_r("过滤项筛选去重"),type:"boolean",description:_r("开启后当前字段作为过滤条件时，下拉列表的内容去重显示记录列表中已有的字段值"),field:{data:{display:!1}}},canOrder:{title:_r("开启排序"),type:"boolean"},fieldScript:{title:_r("字段脚本"),type:"string"},widthInForm:{type:"string",title:_r("宽度"),enum1:["6","8","12","16","18","24"],enum_title1:["1/4","1/3","1/2","2/3","3/4","1"],field:{component:function(e){e.field;var t=e.option.form,n=e.input,r=n.value,i=n.onChange,o=e.schema,l=o.enum1,s=o.enum_title1,u=t.getState().values,c=l.map((function(e){return!(!u.rowKey||"24"!=e)||!!(u.rowKey&&3==u.rowKeyCount&&["6","16","18","24"].indexOf(e)>-1)||!(!u.rowKey||4!=u.rowKeyCount)}));return a().createElement(d.Radio.Group,{value:r,onChange:i},l.map((function(e,t){return a().createElement(d.Radio,{value:e,disabled:c[t]},s[t])})))}}}},f={key:"key",validate:function(e){var t=e&&e.substr(e.length-2),n=e&&e.slice(0,1);return"id"==t?_r("标识最后两位不可为字母id"):/[0-9]/.test(n)?_r("首位不可为数字"):null},component:function(e){var t=e.input,n=c(a().useState(t.value),2),r=n[0],i=n[1];return a().createElement(d.Input,{value:r,onChange:function(e){return i(e.target.value)},onBlur:function(){return t.onChange(r)}})}};function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}const v=_;var h=n.n(v);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}_r("数据点"),_r("数据点"),b(b({},p),m);const w=icons;function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}xadminForm;var S=function(e){var t,n=e.data,r=e.input,i=c(a().useState({loading:!1,data:[]}),2),o=i[0],l=i[1];return a().useEffect((function(){if(null!=n&&n.schema){l(E(E({},o),{},{loading:!0}));var e=Object.entries(n.schema.properties).map((function(e){var t;return{value:e[0],title:null===(t=e[1])||void 0===t?void 0:t.title}}));null!=e&&e.length&&l({loading:!1,data:e})}}),[JSON.stringify(n)]),a().createElement(d.Select,{style:{width:"200px"},mode:"multiple",value:(null==r?void 0:r.value)||void 0,onChange:function(e){r.onChange(e)}},null!=o&&null!==(t=o.data)&&void 0!==t&&t.length?o.data.map((function(e){return a().createElement(d.Select.Option,{value:null==e?void 0:e.value},null==e?void 0:e.title)})):null)},C=function(e){var t=useI18n(),n=t.t,r=(t.i18n,e.input),i=r.value,o=r.onChange,s=e.schema,u=c(a().useState((null==i?void 0:i.tableFilters)||[]),2),d=u[0],p=u[1],m=s;return m?a().createElement(a().Fragment,null,a().createElement(l.C,{is:"QueryEditor",schema:m,input:{value:d,onChange:function(e){o({tableFilters:e}),p(e)}},timeRangeQuery:!0})):n("无可配置项")};const j=function(e,t){var n=useI18n(),o=n.t,s=(n.i18n,(0,i.use)("model.save",e).saveItem),u=c(a().useState(e),2),d=u[0],p=u[1],m={type:"object",name:_r("数据分析-工作表"),title:_r("数据分析-工作表"),key:"analysis-table",properties:{analysis:{type:"boolean",title:_r("数据分析展示"),description:_r("勾选后，当前工作表可以作为数据分析保存条件定义表，可以在数据分析中选择表记录进行分析")},fieldSelect:{title:_r("导出字段"),type:"array",items:{},description:_r("当在【数据分析】处导出PDF需要展示数据分析表中字段时，请在导出字段中进行指定，否则无法导出")},tableFilters:{title:_r("条件定义"),type:"object",unbind:!0,properties:{},field:{component:function(e){return a().createElement(C,y({},e,{schema:null==d?void 0:d.schema}))}}}},form:["*",{key:"fieldSelect",component:function(e){return a().createElement(S,y({},e,{data:d}))}},"tableFilters"]};return a().createElement(l.C,{is:"I18nSchemaForm",formKey:"analysisFields",schema:m,onSubmit:function(t){s({id:e.id,analysisFields:t})},onSubmitSuccess:function(){var t,n,a,l;if(console.log(e,99999),null!=e&&e.id&&(null==e||null===(t=e.analysisFields)||void 0===t||!t.analysis)){var s=(l="tableData_data_Point-".concat((a=function(){for(var e="",t=0;t<4;t++)e+="1234567890qwertyuioplkjhgfdsazxcvbnmQWERTYUIOPLKJHGFDSAZXCVBNM"[Math.round(62*Math.random()+0)];return e})()),{title:_r("模型属性"),name:"modelProperties",type:"object",key:"modelProperties",form:["classes-time","tags","count","unit"],listFields:["classes-time","tags","count","unit"],properties:{tags:{btnText:{add:_r("添加新行"),delete:_r("删除")},canOrder:!1,config:_r("表格"),createShow:!0,defaultVal:[{func:"mean",key:1663134995118}],descriptionType:"tooltip",displayForm:"grid",editShow:!0,fieldType:"editableTable",invalid:!1,items:{properties:{},type:"object"},key:"tags",listFields:!0,need:!1,tableFields:{title:_r("表格属性"),type:"object",key:"tableProperties",name:"tableProperties",properties:(n={},r(n,l,{title:_r("数据点"),type:"object",key:l,config:_r("数据点"),createShow:!0,descriptionType:"tooltip",editShow:!0,fieldType:"tableData_data_Point",listFields:!0,canOrder:!1,properties:{}}),r(n,"func",{title:_r("聚合方法"),type:"string",canOrder:!1,config:_r("选择器"),createShow:!0,defaultVal:"mean",descriptionType:"tooltip",editShow:!0,enum1:["mean","median","count","min","max","sum","first","last"],enum_title1:[_r("平均值"),_r("中位值"),_r("数量"),_r("最小值"),_r("最大值"),_r("求和"),_r("首个值"),_r("最末值")],fieldType:"select",key:"func",listFields:!0,select:{label:[_r("平均值"),_r("中位值"),_r("数量"),_r("最小值"),_r("最大值"),_r("求和"),_r("首个值"),_r("最末值")],value:["mean","median","count","min","max","sum","first","last"]},selectFace:"select",selectType:"single"}),n),form:["func",l],listFields:["func",l],required:["func",l]},title:_r("表格"),type:"array"},"classes-time":{title:_r("日期范围"),type:"string",canOrder:!1,config:_r("日期范围"),createShow:!0,dateFormat:"datetime",descriptionType:"tooltip",editShow:!0,fieldType:"dateRange",invalid:!1,key:"classes-time",listFields:!0,need:!1},unit:{title:_r("分组单位"),type:"string",canOrder:!1,config:_r("选择器"),createShow:!0,descriptionType:"tooltip",editShow:!0,enum1:["s","m","h","d","w","mo","q","y"],enum_title1:[_r("秒"),_r("分钟"),_r("小时"),_r("天"),_r("周"),_r("月"),_r("季度"),_r("年")],fieldType:"select",invalid:!1,key:"unit",listFields:!0,need:!1,numRange:null,selectFace:"select",selectType:"single",widthInForm:"12",rowKey:a()},count:{canOrder:!1,config:_r("数字"),createShow:!0,dbType:"Int32",decimal:null,descriptionType:"tooltip",editShow:!0,fieldType:"inputNumber",invalid:!1,key:"count",listFields:!0,need:!1,title:_r("分组值"),type:"number",widthInForm:"12",rowKey:a()}},required:["classes-time","tags"]});(0,i.api)({name:"core/t/schema/".concat(null==e?void 0:e.id)}).fetch("",{method:"PATCH",body:JSON.stringify({id:null==e?void 0:e.id,schema:s,draft:s})}).then((function(t){t.json,console.log(o("创建默认字端成功")),p(E(E({},e),{},{schema:s}))}))}},initialValues:(null==e?void 0:e.analysisFields)||{}})},x={name:"airiot.plugin.analysisFields",plugins:{name:_r("数据分析"),key:"analysisFields",pluginGroup:_r("表类型相关"),description:{content:_r("【数据分析】表功能应用后，可实现将表记录作为数据分析条件，在数据分析中选择表记录进行分析，应用后表的配置TAB会相应的增加一个"),config:[{name:_r("导出字段"),info:_r("当在【数据分析】处导出PDF需要展示数据分析表中字段时，请在导出字段中进行指定，否则无法导出")},{name:_r("条件定义"),info:_r("设置筛选条件，满足条件的记录可作为数据分析条件，在数据分析模块可以被选择")}]},useSetting:function(e){var t=e.data,n=e.saveSetting;return t.schema,{element:a().createElement(j,y({},t,n))}}}};function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}xadminModel;function D(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,t(i.key),i)}}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}xadminI18n;const R=moment;var I=n.n(R);d.DatePicker.MonthPicker;var A=d.DatePicker.RangePicker,L=(d.DatePicker.WeekPicker,function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(u,t);var n,i,o,l,s=(o=u,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var t,n=M(o);if(l){var r=M(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return F(t)}(this,t)});function u(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return r(F(e=s.call.apply(s,[this].concat(n))),"onRangeChange",(function(t){e.props.input.onChange(e.getValue(t))})),e}return n=u,(i=[{key:"getValue",value:function(e){var t=this.props.field.datetimeFormat||"YYYY-MM-DD HH:mm:ss";return h().compact(e).length<2?{lte:I()(h().compact(e)[0]).format(t)}:{gte:I()(e[0]).format(t),lte:I()(e[1]).format(t)}}},{key:"render",value:function(){var e=this.props,t=e.input.value,n=(e.field,"YYYY-MM-DD HH:mm:ss");return a().createElement(A,{value:null!=t&&t.gte&&null!=t&&t.lte?[I()(t.gte,n),I()(t.lte,n)]:[],allowEmpty:[!0,!0],showTime:!0,onChange:this.onRangeChange})}}])&&D(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),u}(a().Component));function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N={type:"object",properties:{baseTime:{type:"object",title:_r("标准线日期"),format:"date-time",properties:{},field:{component:L}},"deviation-type":{title:_r("数据偏差类型"),type:"string",enum:["data","percentage","rate"],enum_title:[_r("数据"),_r("百分比"),_r("变化率")]},"deviation-negative":{title:_r("负偏差值"),type:"number",minimum:0},"deviation-positive":{title:_r("正偏差值"),type:"number",minimum:0}},form:["*"]},G={type:"object",properties:{name:{title:_r("分组名称"),type:"string"}},required:["name"]},V=function(e){var t,n,r,o,l,s=useI18n(),u=s.t,c=(s.i18n,e.children),p=e.invalid,m=e.handleSubmit,f=(e.showCode,e.submitting),y=e.ggModal,v=(i.app.context._t,u((null==y||null===(t=y.settings)||void 0===t||null===(n=t.data)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.baseTime)||(null==y||null===(o=y.settings)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.baseTime)?"修改":"生成报警"));return a().createElement(d.Form,{onSubmit:m,layout:"vertical"},a().createElement(d.Card,{style:{marginTop:0,border:"none"},bodyStyle:{padding:"0 7.5px 7.5px"},headStyle:{padding:"0 7.5px"}},c,a().createElement(d.Row,{style:{justifyContent:"center",marginTop:"2rem"}},a().createElement(d.Button,{type:"primary",disabled:p,loading:f,className:"loginBtn",onClick:m,htmlType:"submit"},v))))};const H=function(e){var t,n,r,o,s,u=useI18n(),p=u.t,m=(u.i18n,e.input,e.initValue),f=e.params,y=e.filter,v=e.tableRecord,h=e.getBasetime,g=e.ggModal,b=e.setGgModal,w=c(a().useState({visible:!1,data:{}}),2),O=w[0],E=w[1];return(null==g||null===(t=g.settings)||void 0===t||null===(n=t.data)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.baseTime)||null==g||null===(o=g.settings)||void 0===o||null===(s=o.data)||void 0===s||s.baseTime,a().createElement(a().Fragment,null,a().createElement(l.C,{is:"I18nSchemaForm",formKey:"analysis-fields"+(null==g?void 0:g.visible),schema:N,group:(0,l.C)("Form.SimpleGroup"),onSubmit:function(t){var n,r;if("edit"==(null==g?void 0:g.editType)&&null!=g&&null!==(n=g.settings)&&void 0!==n&&null!==(r=n.data)&&void 0!==r&&r.id){var o,a,l,s,u,c=Y(Y({},null==g||null===(o=g.settings)||void 0===o?void 0:o.data),{},{settings:{data:Y(Y({},null==g||null===(a=g.settings)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.data),t)}});(0,i.api)({name:"core/dataRecord/".concat(null==g||null===(s=g.settings)||void 0===s||null===(u=s.data)||void 0===u?void 0:u.id)}).fetch("",{method:"PATCH",body:JSON.stringify(c)}).then((function(n){var r,o,a,l;n.json,d.message.success(p("修改成功！")),h&&_.isFunction(h)&&h(c),a=null==e?void 0:e.defaultFilter,l=encodeURIComponent(JSON.stringify(Y(Y({},a),{},{filter:{type:"gg-warning"}}))),(0,i.api)({name:"core/dataRecord"}).fetch("?query="+l,{}).then((function(t){var n=t.json;(null==e?void 0:e.setItems)&&e.setItems(n)})).catch((function(e){return d.message.error(e.message)})),E(Y(Y({},O),{},{visible:!1,data:Y(Y(Y({},null==g||null===(r=g.settings)||void 0===r?void 0:r.data),t),{},{data:Y({},t)})})),b(Y(Y({},g),{},{visible:!1,data:Y(Y(Y({},null==g||null===(o=g.settings)||void 0===o?void 0:o.data),t),{},{data:Y({},t)})}))})).catch((function(e){var n,r;d.message.error(e.message),E(Y(Y({},O),{},{visible:!1,data:Y(Y(Y({},null==g||null===(n=g.settings)||void 0===n?void 0:n.data),t),{},{data:Y({},t)})})),b(Y(Y({},g),{},{visible:!1,data:Y(Y(Y({},null==g||null===(r=g.settings)||void 0===r?void 0:r.data),t),{},{data:Y({},t)})}))}))}else E(Y(Y({},O),{},{visible:!0,data:t}))},component:V,initialValues:m||{},ggModal:g}),a().createElement(d.Modal,{title:p("添加分组"),visible:O.visible,footer:null,onCancel:function(){E({visible:!1,data:{}})}},a().createElement(l.C,{is:"I18nSchemaForm",formKey:"add-group",schema:G,onSubmit:function(e){var t=Y(Y({},e),{},{params:f,filter:y,tableRecord:v,type:"gg-warning",settings:{data:(null==O?void 0:O.data)||{}}});e&&(0,i.api)({name:"core/dataRecord"}).fetch("",{method:"POST",body:JSON.stringify(t)}).then((function(e){e.json,h(t),E(Y(Y({},O),{},{visible:!1}))})).catch((function(e){E(Y(Y({},O),{},{visible:!1})),d.message.error(e.message)}))}})))};function q(e,t,n,r,i,o,a){try{var l=e[o](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,i)}function J(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){q(o,r,i,a,l,"next",e)}function l(e){q(o,r,i,a,l,"throw",e)}a(void 0)}))}}var K=n(687),U=n.n(K);const W=Recoil;function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=function(e,t,n,r,i){var o=e.slice(1),a=e.slice(0,1),l=[];return o.forEach((function(e){var o;null!=e&&null!==(o=e.source)&&void 0!==o&&o.length&&e.source.forEach((function(o,s){var u,c;if(null!=a&&null!==(u=a[0])&&void 0!==u&&null!==(c=u.source)&&void 0!==c&&c[s]){if("data"==r){var d=(o[1]-a[0].source[s][1]).toFixed(3);d&&(d>n?l.push({tuneType:"下调",fields:"".concat(i,":").concat(o[1]),deviationValue:Math.abs(d),time:moment(o[0]).format("YYYY-MM-DD HH:mm:ss")}):d<-t&&l.push({tuneType:"上调",fields:"".concat(i,":").concat(o[1]),deviationValue:Math.abs(d),time:moment(o[0]).format("YYYY-MM-DD HH:mm:ss")}))}if("percentage"==r){var p=((o[1]-a[0].source[s][1])/a[0].source[s][1]).toFixed(3);p&&(p>n/100?l.push({tuneType:"下调",fields:"".concat(i,":").concat(o[1]),deviationValue:(100*Math.abs(p)).toFixed(1),time:moment(o[0]).format("YYYY-MM-DD HH:mm:ss")}):p<-t/100&&l.push({tuneType:"上调",fields:"".concat(i,":").concat(o[1]),deviationValue:(100*Math.abs(p)).toFixed(1),time:moment(o[0]).format("YYYY-MM-DD HH:mm:ss")}))}if("rate"==r&&s>=1){var m=((e.source[s][1]-e.source[s-1][1])/e.source[s-1][1]-(a[0].source[s][1]-a[0].source[s-1][1])/a[0].source[s-1][1]).toFixed(3);m&&(m>n/100?l.push({tuneType:"下调",fields:"".concat(i,":").concat(o[1]),deviationValue:(100*Math.abs(m)).toFixed(1),time:moment(o[0]).format("YYYY-MM-DD HH:mm:ss")}):m<-t/100&&l.push({tuneType:"上调",fields:"".concat(i,":").concat(o[1]),deviationValue:(100*Math.abs(m)).toFixed(1),time:moment(o[0]).format("YYYY-MM-DD HH:mm:ss")}))}}}))})),l};const X=function(e){var t,n,r,o,l,s,u,p,m,f=useI18n(),y=f.t,v=(f.i18n,e.ggModal),h=(0,i.use)("data.charts").dataset,g=null==v||null===(t=v.data)||void 0===t||null===(n=t.settings)||void 0===n||null===(r=n.data)||void 0===r?void 0:r["deviation-type"],b=null==v||null===(o=v.data)||void 0===o||null===(l=o.settings)||void 0===l||null===(s=l.data)||void 0===s?void 0:s["deviation-negative"],w=null==v||null===(u=v.data)||void 0===u||null===(p=u.settings)||void 0===p||null===(m=p.data)||void 0===m?void 0:m["deviation-positive"],O=c(a().useState([]),2),E=O[0],S=O[1],_=[{title:y("报警时间"),dataIndex:"time",key:"time"},{title:y("设备表"),dataIndex:"table",key:"table"},{title:y("设备"),dataIndex:"tableData",key:"tableData"},{title:y("报警数值"),dataIndex:"fields",key:"fields"},{title:y("调节方式"),dataIndex:"tuneType",key:"tuneType"},{title:y("偏差值"),dataIndex:"deviationValue",key:"deviationValue"}];return a().useEffect((function(){J(U().mark((function e(){var t,n,r,i,o,a,l,s,u,c,d,p,m,f,y,O,E,_,C,j,x,P,T,D,F,k,M,R,I,A,L,B;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=h&&h.length&&(null==h?void 0:h.length)>=2&&(null==v||null===(t=v.settings)||void 0===t||null===(n=t.data)||void 0===n||null===(r=n.tableRecord)||void 0===r||r.tableList,null==v||null===(i=v.settings)||void 0===i||null===(o=i.data)||void 0===o||null===(a=o.tableRecord)||void 0===a||a.selectId,R=null==v||null===(l=v.data)||void 0===l||null===(s=l.params)||void 0===s||null===(u=s.tags)||void 0===u||null===(c=u[0])||void 0===c||null===(d=c.data)||void 0===d||null===(p=d.origin)||void 0===p||null===(m=p.tableData)||void 0===m||null===(f=m.table)||void 0===f?void 0:f.id,I=null==v||null===(y=v.data)||void 0===y||null===(O=y.params)||void 0===O||null===(E=O.tags)||void 0===E||null===(_=E[0])||void 0===_||null===(C=_.data)||void 0===C||null===(j=C.origin)||void 0===j||null===(x=j.tableData)||void 0===x?void 0:x.name,A=null==v||null===(P=v.data)||void 0===P||null===(T=P.params)||void 0===T||null===(D=T.tags)||void 0===D||null===(F=D[0])||void 0===F||null===(k=F.data)||void 0===k||null===(M=k.origin)||void 0===M?void 0:M.name,L=z(h,b,w,g,A),(null==(B=null!=L&&L.length?L.map((function(e){return Z(Z({},e),{},{table:R,tableData:I})})):[])?void 0:B.length)&&S(B));case 1:case"end":return e.stop()}}),e)})))()}),[JSON.stringify(v),JSON.stringify(h),g,b,w]),a().createElement(a().Fragment,null,a().createElement(d.Table,{columns:_,dataSource:E}))};function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te=d.Input.Search,ne=d.Select.Option,re=function(e){var t,n,r,p=useI18n(),m=p.t,f=(p.i18n,e.getParams),v=e.filter,g=e.params,b=e.type,O=e.defaultFilterFlag,E=c((0,o.useState)(!1),2),S=E[0],_=E[1],C=c((0,o.useState)([]),2),j=C[0],x=C[1],P=c((0,o.useState)(!1),2),T=P[0],D=P[1],F=c((0,o.useState)(),2),k=F[0],M=F[1],R=c((0,o.useState)({self:[],other:[]}),2),I=R[0],A=R[1],L=c((0,o.useState)({visible:!1,data:{},editType:null}),2),B=L[0],Y=L[1],N=c((0,o.useState)(b||"analysis"),2),G=N[0],V=N[1],q=(0,i.use)("data.times").timeQuerys,J=(0,i.use)("auth.user").user,K={},U=function(){return null};if(g)K=g;else try{(0,i.use)("model").getModelState,(0,i.use)("model").model.name,function(e){throw new TypeError('"type" is read-only')}();var Q=(0,i.use)("model"),Z=Q.atoms;Q.model,K=(0,W.useRecoilValue)(Z.wheres),U=(0,W.useSetRecoilState)(Z.wheres)}catch(e){console.error(e)}var z={skip:0,limit:1e4,project:{name:1,permission:1,params:1,showMode:1,chartMode:1,creator:1,default:1,filter:1,data:1,type:1,tableRecord:1,settings:1},filter:{type:G},withCount:!0},$=function(){_(!0),re(z)},ne=function(e,t){var n={skip:0,limit:1e4,project:{name:1,permission:1,params:1,showMode:1,chartMode:1,creator:1,default:1,tableRecord:1,filter:1,type:1},filter:{name:{$regex:e}},withCount:!0};b&&(n.filter.type=b),t&&(n.filter.type=t),re(n)},re=function(e){var t=encodeURIComponent(JSON.stringify(e));(0,i.api)({name:"core/dataRecord"}).fetch("?query="+t,{}).then((function(e){var t=e.json;A(ee(ee({},I),{},{self:null!=t&&t.length?t.filter((function(e){var t;return"self"==(null==e||null===(t=e.permission)||void 0===t?void 0:t.permissionType)})).reverse():[],other:null!=t&&t.length?t.filter((function(e){var t;return"self"!=(null==e||null===(t=e.permission)||void 0===t?void 0:t.permissionType)})).reverse():[]})),x(t)})).catch((function(e){return d.message.error(e.message)}))},oe={user:J,setVisible:_,deleteRecord:function(e){(0,i.api)({name:"core/dataRecord/".concat(e)}).fetch("",{method:"DELETE"}).then((function(e){200==e.status&&(d.message.success(m("删除成功！")),$())})).catch((function(e){return d.message.error(e.message)}))},editRecord:function(e){"gg-warning"==(null==e?void 0:e.type)?Y(ee(ee({},B),{},{editType:"edit",visible:!0,data:e})):(D(!0),M(e))},getParams:f,wheres:K,setWheres:U,pushpinClick:function(e,t){function n(e,t){(0,i.api)({name:"core/dataRecord"}).fetch("/".concat(e),{method:"PATCH",body:JSON.stringify(t)}).then((function(e){200==e.status&&re(z)}))}var r,o=j.filter((function(e){return e.default&&e.default.length>0&&-1!=e.default.indexOf(J.id)}))[0];o&&o.id&&h().isArray(null==o?void 0:o.default)&&n(o.id,{default:null==o?void 0:o.default.filter((function(e){return e!=J.id}))}),n(t.id,{default:e?[].concat((r=t.default||[],function(e){if(Array.isArray(e))return s(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||u(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[J.id]):null==t?void 0:t.default.filter((function(e){return e!=J.id}))})},defaultFilterFlag:O,ggModal:B,setGgModal:Y,setActiveKey:V};return a().createElement(a().Fragment,null,a().createElement(d.Tooltip,{title:m("查询记录")},a().createElement(d.Button,{style:{marginRight:".3rem"},icon:a().createElement(w.PaperClipOutlined,null),type:"primary",onClick:function(){return $()}})),a().createElement(d.Drawer,{destroyOnClose:!0,key:"right",width:450,title:m("记录管理"),closable:!0,placement:"right",visible:S,onClose:function(){_(!1),V("analysis")}},a().createElement(d.Tabs,{onChange:function(e){x([]),V(e),re(ee(ee({},z),{},{filter:{type:e}}))}},a().createElement(d.Tabs.TabPane,{key:"analysis",tab:m("分析记录")},a().createElement(te,{enterButton:!0,placeholder:m("搜索名称记录"),notFoundContent:a().createElement(l.C,{is:"NoData"}),onSearch:function(e){return ne(e)},style:{marginBottom:"1rem",width:"100%",height:"32px"}}),a().createElement(d.Collapse,{defaultActiveKey:["self","other"]},a().createElement(d.Collapse.Panel,{header:m("个人"),key:"self"},a().createElement(d.List,{locale:{emptyText:a().createElement(l.C,{is:"NoData"})},bordered:!0,dataSource:I.self,renderItem:function(e){return a().createElement(ie,y({setModel:function(e){Y(e)},setGgModal:Y,item:e},oe,{type:b}))}})),a().createElement(d.Collapse.Panel,{header:m("其他"),key:"other"},a().createElement(d.List,{locale:{emptyText:a().createElement(l.C,{is:"NoData"})},bordered:!0,dataSource:I.other,renderItem:function(e){return a().createElement(ie,y({setModel:function(e){Y(e)},setGgModal:Y,item:e},oe,{type:b}))}})))),a().createElement(d.Tabs.TabPane,{key:"gg-warning",tab:m("报警记录")},a().createElement(te,{enterButton:!0,placeholder:m("搜索名称记录"),notFoundContent:a().createElement(l.C,{is:"NoData"}),onSearch:function(e){return ne(e,"gg-warning")},style:{marginBottom:"1rem",width:"100%",height:"32px"}}),a().createElement(d.List,{locale:{emptyText:a().createElement(l.C,{is:"NoData"})},bordered:!0,dataSource:j,renderItem:function(e){return a().createElement(ie,y({setModel:function(e){Y(e)},setGgModal:Y,item:e},oe,{type:(null==e?void 0:e.type)||b}))}}))),a().createElement(se,{filter:v,mask:!1,params:g,visible:T,initValue:k,uploadValue:function(){return $()},changeViseble:function(){return D(!1)}}),a().createElement(d.Modal,{destroyOnClose:!0,width:"edit"==(null==B?void 0:B.editType)?"35%":"80%",title:"lookwarn"==(null==B?void 0:B.editType)?m("报警"):m("修改记录"),onCancel:function(){Y({visible:!1,data:null,editType:null})},visible:B.visible,footer:null},"edit"==(null==B?void 0:B.editType)?a().createElement(H,{defaultFilter:z,setItems:x,ggModal:B,setGgModal:Y,initValue:null==B||null===(t=B.settings)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.data,params:g,filter:v}):null,"lookwarn"==(null==B?void 0:B.editType)?a().createElement(l.C,y({is:"AnalysisBox",editMode:!1,showLoading:!0,loadData:!0},null===(r=function(e){var t,n,r,i,o,a=(null==e||null===(t=e.data)||void 0===t||null===(n=t.settings)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.baseTime)||(null==e||null===(i=e.data)||void 0===i?void 0:i.baseTime)||{},l=moment(new Date),s="h",u=null==e||null===(o=e.data)||void 0===o?void 0:o.params,c=null==u?void 0:u.timeRange,d=(null==u||u.group,null==u?void 0:u.tags);if(null!=d&&d.length){var p=d.map((function(e){return function(e,t,n){var r,i,o,a=t;return null!=e&&e.customRangeTime&&null!=e&&null!==(r=e.customRangeTime)&&void 0!==r&&r.enable&&(a=(null==e||null===(i=e.customRangeTime)||void 0===i?void 0:i.timeRange)||t,null==e||null===(o=e.customRangeTime)||void 0===o||o.group),q(a)}(e,c)}));d.forEach((function(e,t){p[t],null!=p&&p[t]&&l.isBetween(p[t].start,p[t].end)&&(s="r")}))}var m=h().cloneDeep(d)||[],f=(null==d?void 0:d.length)&&d[0];return h().isEmpty(a)||(m.findIndex((function(e){var t;return null==e||null===(t=e.customRangeTime)||void 0===t?void 0:t.isBase})),m.unshift(ee(ee({},f),{},{customRangeTime:{enable:!0,timeRange:{range:{gte:moment(null==a?void 0:a.gte).format("YYYY-MM-DD HH:mm:ss"),lte:moment(null==a?void 0:a.lte).format("YYYY-MM-DD HH:mm:ss")},type:"between"},isBase:!0}}))),{params:ee(ee({},h().cloneDeep(u)),{},{tags:m}),filter:{chartMode:"multipleX",mode:"one",type:s}}}(B))||void 0===r?void 0:r.params),a().createElement(X,{setGgModal:Y,ggModal:B})):null)))},ie=function(e){var t=useI18n(),n=t.t,r=(t.i18n,(0,i.use)("data.times").timeQuerys),o=e.item,s=e.user,u=e.deleteRecord,c=e.editRecord,p=e.getParams,m=e.setVisible,f=e.pushpinClick,y=e.defaultFilterFlag,v=e.type,g=e.ggModal,b=(e.setGgModal,e.setActiveKey),O=e.setParams,E=e.setWheres,S=(null==o?void 0:o.creator)||{},_=(0,i.api)({name:"media"}).headers["x-request-project"],C=window.location.origin+(_?"/_p_"+_:""),j=function(e,t,n){var i,o,a,l=t;return null!=e&&e.customRangeTime&&null!=e&&null!==(i=e.customRangeTime)&&void 0!==i&&i.enable&&(l=(null==e||null===(o=e.customRangeTime)||void 0===o?void 0:o.timeRange)||t,null==e||null===(a=e.customRangeTime)||void 0===a||a.group),r(l)},x=function(){var t=J(U().mark((function t(n){var r,i,o,a,l,s,u,c,d,p,m,f;return U().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=(null==n||null===(r=n.data)||void 0===r?void 0:r.baseTime)||{},o=moment(new Date),a="h",l=null==n?void 0:n.params,s=null==l?void 0:l.timeRange,null==l?void 0:l.group,null!=(u=null==l?void 0:l.tags)&&u.length&&(c=u.map((function(e){return j(e,s)})),u.forEach((function(e,t){var n,r;c[t],null!=c&&c[t]&&o.isBetween(null===(n=c[t])||void 0===n?void 0:n.start,null===(r=c[t])||void 0===r?void 0:r.end)&&(a="r")}))),d=h().cloneDeep(u)||[],p=(null==u?void 0:u.length)&&u[0],h().isEmpty(i)||d.unshift(ee(ee({},p),{},{customRangeTime:{enable:!0,timeRange:{range:{gte:moment(null==i?void 0:i.gte).format("YYYY-MM-DD HH:mm:ss"),lte:moment(null==i?void 0:i.lte).format("YYYY-MM-DD HH:mm:ss")},type:"between"},isBase:!0}})),m=h().cloneDeep(l),f={params:ee(ee({},m),{},{tags:d}),filter:{chartMode:"multipleX",mode:"one",type:a}},e.setGgModal((function(e){return ee(ee({},g),{},{editType:"lookwarn",visible:!0,data:ee(ee({},n),{},{data:null==n?void 0:n.data,params:f.params})})})),e.setModel(ee(ee({},g),{},{editType:"lookwarn",visible:!0,data:ee(ee({},n),{},{data:null==n?void 0:n.data,params:f.params})}));case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return a().createElement(d.List.Item,null,a().createElement(d.Row,{style:{width:"100%"}},a().createElement(d.Col,{span:12,style:{lineHeight:"32px"}},null==o?void 0:o.name),a().createElement(d.Col,{span:12,style:{textAlign:"right"}},a().createElement(d.Space,null,a().createElement(d.Button.Group,null,"gg-warning"==v?a().createElement(d.Tooltip,{title:n("查看报警")},a().createElement(d.Button,{icon:a().createElement(w.BellOutlined,null),onClick:function(){var e,t;null!=o&&null!==(e=o.settings)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.baseTime&&x(o)}})):null,y&&a().createElement(d.Tooltip,{title:n("默认为查询条件")},h().isArray(o.default)&&-1!=o.default.indexOf(s.id)?a().createElement(d.Button,{icon:a().createElement(w.PushpinFilled,null),onClick:function(){return f(!1,o)}}):a().createElement(d.Button,{icon:a().createElement(w.PushpinOutlined,null),onClick:function(){return f(!0,o)}})),a().createElement(d.Tooltip,{title:n("查看查询结果")},a().createElement(d.Button,{icon:a().createElement(l.Icon,{type:"eye"}),onClick:function(){return function(e){if(p&&h().isFunction(p))p(e),m(!1),b("analysis");else{if(null==e||!e.params)throw new Error(n("未定义 getParams 函数或未找到 model"));O?O(ee({},e.params)):E(e.params),m(!1),b("analysis")}}(o)}})),((null==S?void 0:S.id)==(null==s?void 0:s.id)||(null==s?void 0:s.isSuper))&&a().createElement(a().Fragment,null,a().createElement(d.Button,{onClick:function(){return c(o)},icon:a().createElement(l.Icon,{type:"edit"})}),a().createElement(d.Popconfirm,{okText:n("确定"),cancelText:n("取消"),placement:"leftBottom",arrowPointAtCenter:!0,title:n("是否确认删除已保存的记录?"),onConfirm:function(){return u(o.id)}},a().createElement(d.Button,{icon:a().createElement(l.Icon,{type:"delete"})}))),"analysis"==v?a().createElement(d.Popover,{placement:"leftTop",content:a().createElement(te,{id:"search",value:"".concat(C,"#/app/record/").concat(o.id),enterButton:n("复制"),onSearch:function(e){document.getElementById("search").select(),document.execCommand("Copy")?d.message.success(n("复制成功")):d.message.error(n("复制失败"))}})},a().createElement(d.Button,{icon:a().createElement(w.LinkOutlined,null)})):null,"analysis"==v?a().createElement(l.C,{is:"ShareDashbaordComponent",type:"analysis",params:{id:o.id}}):null)))))},oe=function(e){var t=useI18n(),n=t.t,r=(t.i18n,e.getUser),l=e.userList,s=c((0,o.useState)([]),2),u=s[0],p=s[1];(0,o.useEffect)((function(){m()}),[]);var m=function(){var e=encodeURIComponent(JSON.stringify({skip:0,limit:1e4,project:{name:1,department:1},withCount:!0}));(0,i.api)({name:"core/user"}).fetch("?query="+e,{}).then((function(e){var t=e.json;p(t)})).catch((function(e){return d.message.error(e.message)}))};return a().createElement(d.Select,{allowClear:!0,labelInValue:!0,mode:"multiple",placeholder:n("请选择用户"),onChange:function(e){e&&h().isArray(e)&&e.length&&r(e.map((function(e){return{id:e.value,name:e.label}})))},style:{width:"200px"},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},defaultValue:h().isArray(l)&&l.length&&l.map((function(e){return{value:e.id,label:e.name}}))||[]},u.map((function(e){return a().createElement(ne,{value:e.id,key:e.id},e.name)})))},ae={type:"object",properties:{name:{title:_r("记录名称"),type:"string"},permission:{title:_r("记录权限"),type:"object"}},form:["*",{key:"permission",component:function(e){var t=useI18n(),n=t.t,r=(t.i18n,e.input),s=r.onChange,u=r.value,p=(0,i.use)("auth.user").user,m=c((0,o.useState)(u),2),f=m[0],y=m[1],v={display:"block"};return(0,o.useEffect)((function(){s(f)}),[JSON.stringify(f)]),a().createElement(d.Radio.Group,{onChange:function(e){var t,n,r,o=e.target.value;o&&(p&&null!=p&&p.isSuper?y(ee(ee({},f),{},{permissionType:o})):"dept"==o?(t=p.id,n=useI18n(),n.t,n.i18n,r=encodeURIComponent(JSON.stringify({skip:0,limit:1e4,project:{name:1,department:1},withCount:!0})),(0,i.api)({name:"core/user/".concat(t)}).fetch("?query="+r,{})).then((function(e){var t=e.json;y({permissionType:o,department:t&&t.department})})).catch((function(e){return d.message.error(e.message)})):y({permissionType:o}))},value:f&&f.permissionType||""},p&&null!=p&&p.isSuper?a().createElement(a().Fragment,null,a().createElement(d.Radio,{style:v,value:"self"},n("仅自己可见")),a().createElement(d.Radio,{style:v,value:"public"},n("公开")),a().createElement(d.Space,{style:{width:"100%"}},a().createElement(d.Radio,{style:v,value:"dept"},n("按部门")),f&&"dept"==f.permissionType&&a().createElement(l.C,{is:"DepartmentMultipleSelectField",input:{value:u.department,onChange:function(e){return y(ee(ee({},f),{},{department:e}))}}})),a().createElement(d.Space,{style:{width:"100%"}},a().createElement(d.Radio,{style:v,value:"user"},n("指定用户")),f&&"user"==f.permissionType&&a().createElement(oe,{userList:u.user,getUser:function(e){return y(ee(ee({},f),{},{user:e}))}}))):a().createElement(a().Fragment,null,a().createElement(d.Radio,{style:v,value:"self"},n("仅自己可见")),a().createElement(d.Radio,{style:v,value:"public"},n("公开")),a().createElement(d.Radio,{style:v,value:"dept"},n("本部门"))))}}],required:["name","permission"]},le=function(e){var t=e.children,n=e.invalid,r=e.handleSubmit,o=(e.onDelete,e.schema,e.submitting,e.hideModal),l=i.app.context._t,s=useI18n(),u=s.t;return s.i18n,a().createElement(d.Form,{className:"form-horizontal voucherBox",onSubmit:r},t,a().createElement("div",{style:{textAlign:"right",marginTop:"2.2rem"}},a().createElement(d.Space,null,a().createElement(d.Button,{type:"primary",onClick:r,disabled:n},l("确认")),a().createElement(d.Button,{onClick:function(){o()}},u("取消")))))},se=function(e){var t=e.visible,n=e.changeViseble,r=e.initValue,o=e.uploadValue,s=e.params,u=e.mask,c=e.filter,p=void 0===c?{}:c,m=e.type,f=r&&r.id,y=useI18n(),v=y.t,h=(y.i18n,function(e,t){(0,i.api)({name:"core/dataRecord/".concat(t)}).fetch("",{method:"PATCH",body:JSON.stringify(e)}).then((function(e){d.message.success(v("修改成功！")),n(),o()})).catch((function(e){d.message.error(e.message)}))});return a().createElement(d.Modal,{title:v("添加记录"),visible:t,onCancel:function(){return n()},footer:null,mask:u},a().createElement(l.C,{is:"I18nSchemaForm",formKey:"anslysisCondition"+Math.random().toFixed(2),schema:ae,component:le,initialValues:r||{},onSubmit:function(e){return function(e,t){var r;if(e&&e.permission&&e.permission.permissionType){var o=e.permission.permissionType;switch(o){case"self":case"public":r=ee(ee({},e),{},{permission:{permissionType:o}});break;case"dept":r=ee(ee({},e),{},{permission:{permissionType:o,department:e.permission.department}});break;case"user":r=ee(ee({},e),{},{permission:{permissionType:o,user:e.permission.user}})}}if(t)h(r,t);else{var a=ee(ee({},r),{},{params:s});m&&(a.type=m),"{}"!=JSON.stringify(p)&&(a.filter=p),(0,i.api)({name:"core/dataRecord"}).fetch("",{method:"POST",body:JSON.stringify(a)}).then((function(e){d.message.success(v("保存成功！")),n()})).catch((function(e){d.message.error(e.message)}))}}(e,f)},hideModal:function(){return n()}}))};const ue={BaseTime:H,GgFiltersHistory:function(e){var t,n=useI18n(),r=n.t,l=(n.i18n,e&&e.type),s=e.params,u=c((0,o.useState)(!1),2),p=u[0],m=u[1],f=c((0,o.useState)({}),2),v=f[0],g=f[1];if(!s)try{t=(0,i.use)("model").getModelState,l=(0,i.use)("model").model.name}catch(e){console.error(e)}return a().createElement(W.RecoilRoot,null,a().createElement(d.Space,{size:5},a().createElement(d.Tooltip,{title:r("可将查询条件保存记录，方便下次查询。")},a().createElement(d.Button,{type:"primary",onClick:function(){var e;s?g(s):h().isFunction(t)&&g(null===(e=t())||void 0===e?void 0:e.wheres),m(!0)}},r("保存查询记录"))),a().createElement(re,y({},e,{params:v,type:l})),a().createElement(se,y({},e,{mask:!0,type:l,params:v,visible:p,changeViseble:function(){m(!1)}}))))},AnalysisBtn:function(e){var t=e.item,n=e.schema,r=e.getTableTime,i=c(a().useState({visible:!1,time:[],selectTime:[],tableItem:{}}),2),o=i[0],l=i[1];return a().createElement(a().Fragment,null,a().createElement(d.Button,{size:"small",onClick:function(){var e,r=_.isArray(Object.values(n.properties))&&null!==(e=Object.values(n.properties))&&void 0!==e&&e.length?Object.values(n.properties).filter((function(e){return e.key&&e.key.includes("-time")})).map((function(e){return{title:null==e?void 0:e.title,id:null==e?void 0:e.key}})):[];l(T(T({},o),{},{visible:!o.visible,time:r,tableItem:t}))}},"选择"),a().createElement(d.Modal,{title:"班次选择",visible:o.visible,destroyOnClose:!0,onCancel:function(){l(T(T({},o),{},{visible:!o.visible})),r({})},onOk:function(){l(T(T({},o),{},{visible:!o.visible})),r(o)}},a().createElement(d.Select,{style:{width:"100%"},mode:"multiple",allowClear:!0,placeholder:"请选择",onChange:function(e){return l(T(T({},o),{},{selectTime:e}))}},o.time.map((function(e){return a().createElement(d.Select.Option,{value:null==e?void 0:e.id},null==e?void 0:e.title)})))))}},ce=JSON.parse('{"编辑脚本":"Edit Script","默认值脚本":"Default Script","标识":"Identification","标识为字段存在数据库中的唯一标识信息，不可以为ID且首位不能是数字。":"The identifier is the unique identification information that the field exists in the database, and cannot be an ID and the first digit cannot be a number.","标题":"Title","字段在平台中的名称信息":"Name information of fields in the platform","字段说明":"Field Description","说明形式":"Explanation form","控件下方":"Below the control","图标悬停显示":"Icon hover display","必填":"Required","只读":"Read-only","不允许重复":"Do not allow duplicates","创建时显示":"Show on creation","修改时显示":"Show on modification","列表中显示":"Show in list","列表中可编辑":"Editable in the list","列表页可批量编辑":"List page can be edited in bulk","过滤查询中显示":"Display in Filter Query","过滤项筛选去重":"Filter items and remove duplicates","开启后当前字段作为过滤条件时，下拉列表的内容去重显示记录列表中已有的字段值":"When the current field is used as a filtering condition after activation, the content of the drop-down list will be redisplayed from the existing field values in the record list","开启排序":"Enable sorting","字段脚本":"Field Script","宽度":"Width","标识最后两位不可为字母id":"The last two digits of the identifier cannot be letter ids","首位不可为数字":"The first digit cannot be a number","数据点":"Data point","高级控件":"Advanced Controls","无可配置项":"No configurable items","数据分析-工作表":"Data Analysis - Worksheet","数据分析展示":"Data analysis display","勾选后，当前工作表可以作为数据分析保存条件定义表，可以在数据分析中选择表记录进行分析":"After checking, the current worksheet can be used as a data analysis save condition definition table, and table records can be selected for analysis in data analysis","导出字段":"Export Fields","当在【数据分析】处导出PDF需要展示数据分析表中字段时，请在导出字段中进行指定，否则无法导出":"When exporting PDF at [Data Analysis] and displaying the fields in the data analysis table, please specify them in the export fields, otherwise they cannot be exported","条件定义":"Condition Definition","模型属性":"Model Properties","添加新行":"Add new row","删除":"Delete","表格":"Form","表格属性":"Table Properties","聚合方法":"Aggregation method","选择器":"Selector","平均值":"Average value","中位值":"Median value","数量":"Quantity","最小值":"Minimum value","最大值":"Maximum value","求和":"Summation","首个值":"First value","最末值":"Last value","日期范围":"Date Range","分组单位":"Group unit","秒":"Second","分钟":"Minute","小时":"Hour","天":"Day","周":"Week","月":"Month","季度":"Quarter","年":"Year","数字":"Number","分组值":"Group Values","创建默认字端成功":"Successfully created default terminal","标准线日期":"Standard Line Date","数据偏差类型":"Data Deviation Type","数据":"Data","百分比":"Percentage","变化率":"Rate of change","负偏差值":"Negative deviation value","正偏差值":"Positive deviation value","分组名称":"Group Name","修改":"Modify","生成报警":"Generate alarms","修改成功！":"Modified successfully!","添加分组":"Add Group","添加":"Add","附件":"Attachment","附件组":"Accessory group","关联字段":"Associated Fields","保存并添加下一条":"Save and add next item","删除成功！":"Successfully deleted!","查询记录":"Query Records","记录管理":"Records Management","分析记录":"Analysis Record","搜索名称记录":"Search for name records","个人":"Personal","其他":"Other","报警记录":"Alarm Record","报警":"Alarm","修改记录":"Modify Record","未定义 getParams 函数或未找到 model":"GetParams function not defined or model not found","复制成功":"Successfully copied","复制失败":"Copy failed","查看报警":"Viewing alarms","默认为查询条件":"Default to query criteria","查看查询结果":"View query results","确定":"Confirm","取消":"Cancel","是否确认删除已保存的记录?":"Are you sure to delete the saved records?","复制":"Copy","请选择用户":"Please select a user","仅自己可见":"Visible to oneself only","公开":"Open","按部门":"By department","指定用户":"Specify user","本部门":"This department","记录名称":"Record Name","记录权限":"Record permissions","保存成功！":"Successfully saved!","添加记录":"Add Record","可将查询条件保存记录，方便下次查询。":"You can save records of the query conditions for the convenience of the next query.","保存查询记录":"Save query records","报警时间":"Alarm time","设备表":"Equipment List","设备":"Equipment","报警数值":"Alarm value","调节方式":"Adjustment method","偏差值":"Deviation value","数据分析":"Data analysis","表类型相关":"Table type related","【数据分析】表功能应用后，可实现将表记录作为数据分析条件，在数据分析中选择表记录进行分析，应用后表的配置TAB会相应的增加一个":"After the application of the data analysis table function, it can be achieved to use table records as data analysis conditions. In data analysis, table records can be selected for analysis. After the application, a corresponding TAB will be added to the table configuration","设置筛选条件，满足条件的记录可作为数据分析条件，在数据分析模块可以被选择":"Set filtering conditions, and records that meet the conditions can be used as data analysis conditions, which can be selected in the data analysis module"}'),de={zh_Hans:{translation:JSON.parse('{"编辑脚本":"编辑脚本","默认值脚本":"默认值脚本","标识":"标识","标识为字段存在数据库中的唯一标识信息，不可以为ID且首位不能是数字。":"标识为字段存在数据库中的唯一标识信息，不可以为ID且首位不能是数字。","标题":"标题","字段在平台中的名称信息":"字段在平台中的名称信息","字段说明":"字段说明","说明形式":"说明形式","控件下方":"控件下方","图标悬停显示":"图标悬停显示","必填":"必填","只读":"只读","不允许重复":"不允许重复","创建时显示":"创建时显示","修改时显示":"修改时显示","列表中显示":"列表中显示","列表中可编辑":"列表中可编辑","列表页可批量编辑":"列表页可批量编辑","过滤查询中显示":"过滤查询中显示","过滤项筛选去重":"过滤项筛选去重","开启后当前字段作为过滤条件时，下拉列表的内容去重显示记录列表中已有的字段值":"开启后当前字段作为过滤条件时，下拉列表的内容去重显示记录列表中已有的字段值","开启排序":"开启排序","字段脚本":"字段脚本","宽度":"宽度","标识最后两位不可为字母id":"标识最后两位不可为字母id","首位不可为数字":"首位不可为数字","数据点":"数据点","高级控件":"高级控件","无可配置项":"无可配置项","数据分析-工作表":"数据分析-工作表","数据分析展示":"数据分析展示","勾选后，当前工作表可以作为数据分析保存条件定义表，可以在数据分析中选择表记录进行分析":"勾选后，当前工作表可以作为数据分析保存条件定义表，可以在数据分析中选择表记录进行分析","导出字段":"导出字段","当在【数据分析】处导出PDF需要展示数据分析表中字段时，请在导出字段中进行指定，否则无法导出":"当在【数据分析】处导出PDF需要展示数据分析表中字段时，请在导出字段中进行指定，否则无法导出","条件定义":"条件定义","模型属性":"模型属性","添加新行":"添加新行","删除":"删除","表格":"表格","表格属性":"表格属性","聚合方法":"聚合方法","选择器":"选择器","平均值":"平均值","中位值":"中位值","数量":"数量","最小值":"最小值","最大值":"最大值","求和":"求和","首个值":"首个值","最末值":"最末值","日期范围":"日期范围","分组单位":"分组单位","秒":"秒","分钟":"分钟","小时":"小时","天":"天","周":"周","月":"月","季度":"季度","年":"年","数字":"数字","分组值":"分组值","创建默认字端成功":"创建默认字端成功","标准线日期":"标准线日期","数据偏差类型":"数据偏差类型","数据":"数据","百分比":"百分比","变化率":"变化率","负偏差值":"负偏差值","正偏差值":"正偏差值","分组名称":"分组名称","修改":"修改","生成报警":"生成报警","修改成功！":"修改成功！","添加分组":"添加分组","添加":"添加","附件":"附件","附件组":"附件组","关联字段":"关联字段","保存并添加下一条":"保存并添加下一条","删除成功！":"删除成功！","查询记录":"查询记录","记录管理":"记录管理","分析记录":"分析记录","搜索名称记录":"搜索名称记录","个人":"个人","其他":"其他","报警记录":"报警记录","报警":"报警","修改记录":"修改记录","未定义 getParams 函数或未找到 model":"未定义 getParams 函数或未找到 model","复制成功":"复制成功","复制失败":"复制失败","查看报警":"查看报警","默认为查询条件":"默认为查询条件","查看查询结果":"查看查询结果","确定":"确定","取消":"取消","是否确认删除已保存的记录?":"是否确认删除已保存的记录?","复制":"复制","请选择用户":"请选择用户","仅自己可见":"仅自己可见","公开":"公开","按部门":"按部门","指定用户":"指定用户","本部门":"本部门","记录名称":"记录名称","记录权限":"记录权限","保存成功！":"保存成功！","添加记录":"添加记录","可将查询条件保存记录，方便下次查询。":"可将查询条件保存记录，方便下次查询。","保存查询记录":"保存查询记录","报警时间":"报警时间","设备表":"设备表","设备":"设备","报警数值":"报警数值","调节方式":"调节方式","偏差值":"偏差值","数据分析":"数据分析","表类型相关":"表类型相关","【数据分析】表功能应用后，可实现将表记录作为数据分析条件，在数据分析中选择表记录进行分析，应用后表的配置TAB会相应的增加一个":"【数据分析】表功能应用后，可实现将表记录作为数据分析条件，在数据分析中选择表记录进行分析，应用后表的配置TAB会相应的增加一个","设置筛选条件，满足条件的记录可作为数据分析条件，在数据分析模块可以被选择":"设置筛选条件，满足条件的记录可作为数据分析条件，在数据分析模块可以被选择"}')},en:{translation:ce}};function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}i.app.use({name:"table.pointData.extend",locales:de,components:ue,customWidgets:[{title:_r("数据点"),type:"object",name:"tableData_data_Point",config:_r("数据点"),category:_r("高级控件"),icon:a().createElement(l.Icon,{className:"editor-source-icon",svg:n(693)}),paramSchema:{type:"object",name:_r("数据点"),title:_r("数据点"),key:"tableData_data_Point",properties:me(me({},p),m),form:[f,{key:"fieldScript",component:function(e){var t=e.input,n=useI18n(),r=n.t,i=(n.i18n,c((0,o.useState)(!1),2)),s=i[0],u=i[1],p=c((0,o.useState)(t.value||"\n// 表单提交事件\n// values: 表单提交值，取值通过组件ID（标识），例如：values['text-8AE6']\n// record: （表格专用）表格内控件所在行，单条数据，例如：record['text-8AE6']\n// api: 接口调用方法\n// app: xadmin实例\ngetScriptVal = ({ values, record, api, app }) => {\n  return '该字段脚本计算值'\n}\n"),2),m=p[0],f=p[1];return a().createElement(a().Fragment,null,a().createElement(d.Button,{onClick:function(){return u(!0)}},r("编辑脚本")),a().createElement(d.Modal,{maskClosable:!1,title:r("默认值脚本"),visible:s,onOk:function(){var e;e=m,t.onChange(e),u(!1)},onCancel:function(){return u(!1)},width:"1200px"},a().createElement(l.C,{is:"CodeEditor",language:"javascript",width:"100%",height:"600",options:{roundedSelection:!1,readOnly:!1,minimap:{enabled:!1},cursorStyle:"line",automaticLayout:!1},value:m,onChange:f})))}},"*"],formEffect:function(e){!function(e){e.useField("disabled",(function(t){e.setFieldData("editableFields",{display:!t.value}),e.setFieldData("batchChangeFields",{display:!t.value}),t.value&&e.change("editableFields",!1),t.value&&e.change("batchChangeFields",!1)})),e.useField("unique",(function(t){e.setFieldData("batchChangeFields",{display:!t.value}),t.value&&e.change("batchChangeFields",!1)}))}(e)}}}],form_fields:{tableData_data_Point:{component:function(e){var t,n=e.input,r=n.value,i=n.onChange,o=c(a().useState(!1),2),s=o[0],u=o[1],p=useI18n(),m=p.t,f=(p.i18n,"");return h().isEmpty(r)||(h().isPlainObject(r)&&(f="".concat(null==r||null===(t=r.tableData)||void 0===t?void 0:t.name,"-").concat(null==r?void 0:r.name)),h().isArray(r)&&(f=r.map((function(e){var t;return"".concat(null==e||null===(t=e.tableData)||void 0===t?void 0:t.name,"-").concat(null==e?void 0:e.name)})).join(","))),a().createElement(a().Fragment,null,a().createElement("div",{style:{display:"flex"}},a().createElement("div",{className:"ant-input"},f?a().createElement(d.Tag,{closable:!0,onClose:function(e){i(""),e.preventDefault()}},f):null),a().createElement(d.Button,{style:{marginLeft:"1rem",width:"20%"},onClick:function(){u(!0)}},m("添加"))),a().createElement(d.Modal,{visible:s,width:"80%",onOk:function(){return u(!1)},onCancel:function(){return u(!1)}},a().createElement(l.C,y({is:"PointTable"},e,{fullLable:!0,noComputed:!0,type:"radio"}))))}}},fieldRenders:function(e,t){return"tableData_data_Point"==t.fieldType?function(e){var t,n=e.value,r=e.wrap,i=(e.inList,"".concat((null==n||null===(t=n.tableData)||void 0===t?void 0:t.name)||"","-").concat((null==n?void 0:n.name)||""));return a().createElement(r,null,i)}:e},schema_converter:[function(e,t,n){return"tableData_data_Point"==t.fieldType&&(e.type="tableData_data_Point"),e}],config:{projectName:"gg-project"}}).use(x)})()})();
//# sourceMappingURL=index.js.map