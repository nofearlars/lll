import React, { useRef } from 'react'
import { Row, Col, InputNumber } from 'antd'
import { app } from 'xadmin'

const EchartArray = props => {
  const { input: { onChange, value }, schema } = props
  const { showUnit } = schema

  const ValueAddUnit = app.get('form_fields')['number_unit']?.component

  const handleLeft = v => {
    onChange([v, value?.[1]])
  }

  const handleRight = v => {
    onChange([value?.[0], v])
  }

  return (
    <Row gutter={[0, 10]}>
      <Col span={showUnit ? 24 : 12}>
        {showUnit ?
          <ValueAddUnit
            input={{ value: value[0], onChange: handleLeft }}
            field={{ unitOptions: ['px', '%'], placeholder: schema && schema.hold ? _t1('内半径') : '' }}
          /> :
          <InputNumber placeholder={schema && schema.hold ? _t1('内半径') : ''} onChange={handleLeft} value={value[0]} />}
      </Col>
      <Col span={showUnit ? 24 : 12}>
        {showUnit ? <ValueAddUnit
          input={{ value: value[1], onChange: handleRight }}
          field={{ unitOptions: ['px', '%'], placeholder: schema && schema.hold ? _t1('外半径') : '' }}
        /> :
          <InputNumber placeholder={schema && schema.hold ? _t1('外半径') : ''} onChange={handleRight} value={value[1]} />}
      </Col>
    </Row>
  )
}

export { EchartArray }