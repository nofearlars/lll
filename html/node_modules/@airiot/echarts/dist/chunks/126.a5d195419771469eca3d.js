"use strict";(this.webpackChunk_airiot_echarts=this.webpackChunk_airiot_echarts||[]).push([[126],{6126:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(7462),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2167),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(885),echarts__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9428),echarts__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(echarts__WEBPACK_IMPORTED_MODULE_1__),_charts_liquidFill_src_liquidFill__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5476),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(7363),react__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__),element_resize_event__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(7709),element_resize_event__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(element_resize_event__WEBPACK_IMPORTED_MODULE_4__),lodash__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2611),lodash__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_5__),echarts_stat__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(8448),echarts_stat__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(echarts_stat__WEBPACK_IMPORTED_MODULE_6__);function ownKeys(_,e){var t=Object.keys(_);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(_);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(_,e).enumerable}))),t.push.apply(t,r)}return t}function _objectSpread(_){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach((function(e){(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(_,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(e){Object.defineProperty(_,e,Object.getOwnPropertyDescriptor(t,e))}))}return _}echarts__WEBPACK_IMPORTED_MODULE_1__.registerTransform(echarts_stat__WEBPACK_IMPORTED_MODULE_6___default().transform.regression);var dataValid=function(_){var e;return!!lodash__WEBPACK_IMPORTED_MODULE_5___default().isEmpty(_)||!!_.source||!(null===(e=_[0])||void 0===e||!e.source)},BaseChart=function BaseChart(props){var size=props.size,theme=props.theme,option=props.option,chartCode=props.chartCode,echartDom=react__WEBPACK_IMPORTED_MODULE_3___default().useRef(),resizeDOM=react__WEBPACK_IMPORTED_MODULE_3___default().useRef(),_React$useState=react__WEBPACK_IMPORTED_MODULE_3___default().useState(null),_React$useState2=(0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_7__.Z)(_React$useState,2),error=_React$useState2[0],setError=_React$useState2[1],getEchartsInstance=function(){return echarts__WEBPACK_IMPORTED_MODULE_1__.getInstanceByDom(echartDom.current)||echarts__WEBPACK_IMPORTED_MODULE_1__.init(echartDom.current,theme)},err;return react__WEBPACK_IMPORTED_MODULE_3___default().useEffect((function(){var _=getEchartsInstance();_&&_.dispose();var e=getEchartsInstance();try{dataValid(null==option?void 0:option.dataset)?option&&e.setOption(option):setError(null==option?void 0:option.dataset)}catch(_){console.error(error)}}),[JSON.stringify(theme)]),react__WEBPACK_IMPORTED_MODULE_3___default().useEffect((function(){return function(){(null==echartDom?void 0:echartDom.current)&&echarts__WEBPACK_IMPORTED_MODULE_1__.dispose(null==echartDom?void 0:echartDom.current)}}),[]),react__WEBPACK_IMPORTED_MODULE_3___default().useLayoutEffect((function(){element_resize_event__WEBPACK_IMPORTED_MODULE_4___default()(resizeDOM.current,(function(){var _=getEchartsInstance();try{_&&_.resize()}catch(_){console.log(_)}}))}),[]),react__WEBPACK_IMPORTED_MODULE_3___default().useLayoutEffect((function(){if(option)try{var _props$option,_codeOption,myChart=getEchartsInstance(),dataset=null===(_props$option=props.option)||void 0===_props$option?void 0:_props$option.dataset,codeOption={};lodash__WEBPACK_IMPORTED_MODULE_5___default().isEmpty(chartCode)||(codeOption=eval(chartCode));var op=_objectSpread(_objectSpread({},lodash__WEBPACK_IMPORTED_MODULE_5___default().merge(option,codeOption)),{},{dataset:(null===(_codeOption=codeOption)||void 0===_codeOption?void 0:_codeOption.dataset)||(null==option?void 0:option.dataset)});dataValid(op.dataset)?(myChart.setOption(op),myChart.resize(),setError(null)):setError(op.dataset)}catch(_){console.error(_)}}),[JSON.stringify(option)+chartCode]),error&&(console.error("图表dataset格式有误：",error),err=react__WEBPACK_IMPORTED_MODULE_3___default().createElement("span",{style:{color:"red"}},"图表dataset格式有误")),react__WEBPACK_IMPORTED_MODULE_3___default().createElement(react__WEBPACK_IMPORTED_MODULE_3___default().Fragment,null,err,react__WEBPACK_IMPORTED_MODULE_3___default().createElement("div",{ref:resizeDOM,style:{width:"100%",height:"100%"}},react__WEBPACK_IMPORTED_MODULE_3___default().createElement("div",{ref:echartDom,style:size||{width:"100%",height:"100%"}})))},Chart=function(_){var e=lodash__WEBPACK_IMPORTED_MODULE_5___default().omit(_,["theme"]);return react__WEBPACK_IMPORTED_MODULE_3___default().createElement(BaseChart,(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_8__.Z)({},e,{theme:{}}))};const __WEBPACK_DEFAULT_EXPORT__=Chart}}]);
//# sourceMappingURL=126.a5d195419771469eca3d.js.map