var fs = require('fs');

const data = {}

const readDirPath = __dirname + '/.i18n'

const writeDirPath = __dirname + '/locales'
const wirteFilePath = writeDirPath + '/index.json'

const lngs = fs.readdirSync(readDirPath)

lngs.forEach(lng => {
  const fileData = fs.readFileSync(readDirPath + `/${lng}/resource.json`)
  data[lng] = { translation: JSON.parse(fileData) }
})

if (fs.existsSync(writeDirPath)) {
  if (fs.existsSync(wirteFilePath)) {
    fs.rmSync(wirteFilePath)
  }
  fs.rmdirSync(writeDirPath)
}

fs.mkdir(writeDirPath, () => {
  fs.writeFile(wirteFilePath, JSON.stringify(data,null,2), () => { })
})

console.log('\x1B[32m', 'ðŸ˜Š locales create success')