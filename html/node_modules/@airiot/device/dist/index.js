/*! For license information please see index.js.LICENSE.txt */
(()=>{var __webpack_modules__={4664:(e,t,r)=>{"use strict";r(7363),r(3078),r(5907),r(6640),r(1821)},5109:(e,t,r)=>{"use strict";r.d(t,{A:()=>O,j:()=>T});var n=r(5861),i=r(4942),a=r(7462),o=r(885),l=r(4687),s=r.n(l),u=r(5907),c=r(3078),p=r(1821),d=r(7363),m=r.n(d),f=r(2056),y=r(2611),v=r.n(y);const g=function(e){var t,r,n=e.update,i=(0,c.use)("form").formState.values,l=m().useState(!1),s=(0,o.Z)(l,2),d=s[0],f=s[1],y=m().useState(null),v=(0,o.Z)(y,2),g=v[0],h=v[1],E={type:"object",properties:{name:{type:"string",title:_r("名称"),field:{attrs:{disabled:n}}},description:{title:_r("描述"),type:"string",maxLength:30},auth:{title:_r("权限"),type:"string",enum:["privately","share"],enum_title:["仅自己可见","公开"]}},form:["*"],required:["name","auth"]},O=!Boolean(null==i?void 0:i.driverType),w={name:null==i||null===(t=i.template)||void 0===t||null===(r=t.name)||void 0===r?void 0:r.split(".")[0],auth:null==g?void 0:g.auth,description:null==g?void 0:g.description};return m().createElement(m().Fragment,null,m().createElement(p.Modal,{title:n?_t1("更新模版"):_t1("创建模版"),visible:d,width:"35%",footer:null,onCancel:function(e){return f(!1)}},m().createElement(u.C,{is:"I18nSchemaForm",formKey:"CreateDriverTemplate",schema:E,initialValues:w,onClose:function(){f(!1)},onSubmit:function(e){if(null!=i&&i.driverType&&null!=e&&e.name){var t=(0,c.api)({name:"media"}).getHost(),r=new FormData,a={auth:null==e?void 0:e.auth,templateName:null==e?void 0:e.name,device:null==i?void 0:i.device,driverType:null==i?void 0:i.driverType,description:null==e?void 0:e.description},o=new File([JSON.stringify(a)],"".concat(null==e?void 0:e.name,".").concat(null==i?void 0:i.driverType,".json"),{type:"application/json"}),l="share"==(null==e?void 0:e.auth)?_t1("共享驱动模板"):_t1("我的文件/驱动模板"),s=n?"&action=cover":"";r.append("file",o),fetch("".concat(t,"core/mediaLibrary/upload?catalog=").concat(l).concat(s),{method:"POST",headers:_.omit((0,c.api)({name:"media"}).getHeaders(),"Content-Type"),body:r}).then((function(e){return 200==(null==e?void 0:e.status)&&(f(!1),p.message.success(_t1("创建驱动模版成功"))),e.json()})).then((function(e){(null==e?void 0:e.detail)&&p.message.error(null==e?void 0:e.detail)})).catch((function(e){console.log(e,"-===")}))}},component:function(e){return m().createElement(b,(0,a.Z)({},e,{update:n,setVisible:f}))}})),m().createElement(p.Button,{type:"primary",disabled:O,onClick:function(){var e;f(!0),(0,c.api)({name:""}).fetch(null==i||null===(e=i.template)||void 0===e?void 0:e.filePath,{}).then((function(e){var t=e.json;return h(t)}))},style:{position:"fixed",top:"10px",right:n?"105px":"10px",zIndex:99}},n?_t1("更新模版"):_t1("创建模版")))};var b=function(e){var t=e.children,r=e.invalid,n=e.handleSubmit,i=e.submitting,a=e.setVisible,o=e.update,l=c.app.context._t,s={wrapperCol:{xs:{span:24,offset:0},sm:{span:18,offset:5}}};return m().createElement(p.Card,null,m().createElement("form",{onSubmit:n},t,m().createElement(p.Form.Item,s,m().createElement(p.Space,null,m().createElement(p.Button,{type:"primary",htmlType:"submit",loading:i,disabled:r},o?_t1("更新"):_t1("保存")),m().createElement(p.Button,{onClick:function(){return a(!1)}},l("Cancel"))))))};function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O=function(e){var t=e.input,r=e.option.form,n=m().useState([]),i=(0,o.Z)(n,2),l=i[0],s=i[1];return m().useEffect((function(){var e=encodeURIComponent(JSON.stringify({project:{name:1,driverType:1,runMode:1,disable:1,createTime:1,groupId:1,distributed:1},filter:{runMode:"cluster"},withCount:!0}));(0,c.api)({name:"driver/"}).fetch("driverInstance?query="+e,{}).then((function(e){var t=e.json;s(t)}))}),[]),m().createElement(p.Select,(0,a.Z)({allowClear:!0,style:{width:220}},t,{onChange:function(e,n){var i,a,o;t.onChange(e),r.change("driverType",null==n||null===(i=n.item)||void 0===i?void 0:i.driverType),r.change("driverType_install",null==n||null===(a=n.item)||void 0===a?void 0:a.driverType),r.change("distributed",null==n||null===(o=n.item)||void 0===o?void 0:o.distributed)}}),l.map((function(e){return m().createElement(Option,{value:null==e?void 0:e.groupId,item:e},null==e?void 0:e.name)})))},w=function(e){var t=(0,c.use)("query"),r="device"==(null==t?void 0:t.tab),n=(0,c.use)("form").formState.values,i=e.children,a=e.invalid,o=e.handleSubmit,l=e.submitting,s=c.app.context._t,u={wrapperCol:{xs:{span:24,offset:0},sm:{span:18,offset:5}}};return m().createElement(p.Card,null,m().createElement("form",{onSubmit:o},i,m().createElement(p.Form.Item,u,m().createElement(p.Space,null,m().createElement(p.Button,{type:"primary",htmlType:"submit",loading:l,disabled:a},s("Save")),m().createElement(p.Button,{onClick:function(){return history.back()}},s("Cancel")),r?null:m().createElement(g,null),!r&&null!=n&&n.template?m().createElement(g,{update:!0}):null))))},C=0;function A(e){var t=e.id,r=encodeURIComponent(JSON.stringify({project:{name:1,driverType:1,runMode:1,disable:1,createTime:1,groupId:1},filter:{runMode:{$in:["cluster","one"]}},withCount:!0}));return(0,c.api)({name:"driver/"}).fetch("driverInstance?query="+r,{}).then((function(e){var r=e.json,n=void 0===r?[]:r;return!(!(null==n?void 0:n.some((function(e){return e.id==t})))&&C<=3)||(C++,A({id:t}))})).catch((function(e){console.error(e),reject(e)}))}var T=function(e){var t,r,i,l=(0,c.use)("query"),d="device"==(null==l?void 0:l.tab),_=m().useState(null==e?void 0:e.item),y=(0,o.Z)(_,2),g=y[0],b=y[1],h=m().useState(null),O=(0,o.Z)(h,2),C=O[0],T=O[1],D=(0,c.use)("model.save",E(E({},e),{},{successMessage:"驱动保存成功"})),I=D.model,S=D.saveItem,P=D.modelTab;m().useEffect((function(){null!=g&&g.driverType&&(p.message.loading({content:"正在获取驱动",key:"recursiveApiCall"}),A(g).then((function(e){e&&(j(null==g?void 0:g.driverType),p.message.success({content:"获取驱动成功",key:"recursiveApiCall"}))})).catch((function(e){p.message.error({content:"获取驱动失败请重试",key:"recursiveApiCall"})})))}),[null==g?void 0:g.driverType]);var j=function(){var e=(0,n.Z)(s().mark((function e(t){var r,n,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.J1)(t,{driverInstance:!0}).then((function(e){return e||{}}));case 2:n=e.sent,i=E(E({},I),{},{properties:E(E({},I.properties),{},{device:E(E(E({},I.properties.device),n),{},{properties:E({},v().omit(n.properties,["driver","emulator"])),form:null==n?void 0:n.form.filter((function(e){return"settings"==(null==e?void 0:e.key)||"tags"==(null==e?void 0:e.key)||"commands"==(null==e?void 0:e.key)}))}),driverType:E(E({},null===(r=I.properties)||void 0===r?void 0:r.driverType),{},{modelTab:P||!1})})}),T(i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=d?{}:{onSubmitSuccess:function(){return c.app.go("/app/model/driverInstance/list")}},M=E(E({},e.item),{},{device:E(E({},null==e||null===(t=e.item)||void 0===t?void 0:t.device),{},{commands:(0,f.jo)(null==e||null===(r=e.item)||void 0===r||null===(i=r.device)||void 0===i?void 0:i.commands)})});return m().createElement(u.C,(0,a.Z)({},e,{is:"Model.DataForm",schema:C,item:M,onChange:b,onSubmit:function(e){var t,r=(0,f.Hd)(null==e||null===(t=e.device)||void 0===t?void 0:t.commands);return S(E(E({},e),{},{device:E(E({},(null==e?void 0:e.device)||{}),{},{commands:r})}))},option:{group:k},component:w},x))},k=function(e){var t=e.label,r=e.meta,n=e.input,i=e.field,o=(e.tailLayout,e.children),l=(0,c.use)("query"),s=(0,c.use)("form").form,u="device"==(null==l?void 0:l.tab),d=i.attrs||{},f=(r.touched&&(r.error||r.submitError),i.option&&i.option.groupSize||d.groupSize||{labelCol:{xs:{span:22},sm:{span:u?4:2}},wrapperCol:{xs:{span:20},sm:{span:20},push:"checkbox"==(null==i?void 0:i.type)?2:0}});i.key.indexOf("device.settings.")>=0&&(f={labelCol:{span:6},wrapperCol:{span:18,push:"checkbox"==(null==i?void 0:i.type)?6:0}});var _=E(E({},f),{},{required:i.required,tooltip:i.description});s.useEffect((function(e){var t=e.errors,r=v().get(t,null==i?void 0:i.name);null!=t&&t.device&&r&&(_.validateStatus="error",v().isString(r)&&(_.help=r))}),["errors"]);var y=o||m().createElement(Input,(0,a.Z)({},n,d));return m().createElement(p.Form.Item,(0,a.Z)({label:t},_),y)}},1324:(e,t,r)=>{"use strict";r(1821),r(7363),r(2611),r(3078)},5308:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(7462),i=r(5861),a=r(885),o=r(4687),l=r.n(o),s=r(7363),u=r.n(s),c=r(2611),p=r.n(c),d=r(3078),m=(r(8574),r(1821)),f=r(6472),_=r(5109),y=r(6640),v=r(2846),g=r(3444);const b=function(e){var t=e.isNode,r=e.driver,n=e.table,i=u().useState({}),o=(0,a.Z)(i,2),l=o[0],s=o[1];u().useEffect((function(){t&&r&&null!=n&&n.id&&(0,d.api)({name:"driver-".concat(r)}).fetch("/server/".concat(null==n?void 0:n.id,"/").concat(t),{}).then((function(e){var t=e.json;return s(t)}))}),[]);var c=null==l?void 0:l.connected,p=null!=l&&l.connected?!0===(null==l?void 0:l.master)?"主":"备":"";return u().createElement(m.Tooltip,{title:c?u().createElement("span",null,"IP:",null==l?void 0:l.host):u().createElement("span",null,(null==l?void 0:l.message)||"服务器")},u().createElement(m.Radio.Group,{style:{marginLeft:10},disabled:!c,value:p,buttonStyle:"solid"},u().createElement(m.Radio.Button,{value:"主"},"主"),u().createElement(m.Radio.Button,{value:"备"},"备")))};var h=r(4420),E=m.Select.Option,O=m.Select.OptGroup;const w=function(e){var t,r,o,s=useI18n().t,c=e.input,w=e.table,C=e.reloadbtn,A=void 0===C||C,T=e.data,k=(0,d.use)("form"),D=k.formState,I=D.values,S=D.initialValues,P=k.form,j=(null==S?void 0:S.driverGroupId)||(null==w||null===(t=w.device)||void 0===t?void 0:t.driverGroupId),x=u().useRef(!1),M=u().useState([]),B=(0,a.Z)(M,2),L=B[0],R=B[1],N=u().useState(j),F=(0,a.Z)(N,2),Z=F[0],U=F[1],W=u().useState(!1),q=(0,a.Z)(W,2),V=q[0],z=q[1],G=(0,d.use)("redux",(function(e){var t;return{driverSaveId:null==e||null===(t=e.device)||void 0===t?void 0:t.driverSaveId}})),K=G.driverSaveId,H=G.dispatch,Y=!!I.emulator&&I.emulator,J=K&&{id:K},$=Boolean(null==w||null===(r=w.device)||void 0===r?void 0:r.driverGroupId),Q=null===(o=(0,h._)(Z))||void 0===o?void 0:o.groupId;u().useEffect((function(){c.value&&j&&(p().includes(c.value,"_")&&c.value.length>18?U(c.value):U(j))}),[c.value,j]),u().useEffect((function(){X()}),[]);var X=function(){var e=encodeURIComponent(JSON.stringify({project:{name:1,driverType:1,runMode:1,disable:1,createTime:1,groupId:1},filter:{runMode:{$in:["cluster","one"]}},withCount:!0}));(0,d.api)({name:"driver/"}).fetch("driverInstance?query="+e,{}).then((function(e){var t=e.json;R(t)}))},ee=function(){z(!1),H({type:"@@device/CHANGE_DRIVER_ID",payload:{driverSaveId:null}})},te=function(e){x.current=e.target.checked},re=function(){var e=(0,i.Z)(l().mark((function e(t,r){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return U(t),P.change("driverGroupId",null),c.onChange(t),e.abrupt("return");case 5:null!=T&&null!==(n=T.device)&&void 0!==n&&n.driver&&j?m.Modal.confirm({title:"切换驱动会导致相关配置调整，请谨慎操作！确需调整驱动时，可选定保留的配置数据，默认保留新驱动相关配置数据！",icon:u().createElement(y.ExclamationCircleOutlined,null),okText:"确定切换",content:u().createElement(u().Fragment,null," ",u().createElement(m.Checkbox,{onChange:te},"保留原驱动数据")," "),onOk:function(){var e;if(!x.current)return ne(null==r||null===(e=r.item)||void 0===e?void 0:e.id).then((function(e){e&&(Object.keys(e).forEach((function(t){P.change(t,e[t]||null)})),U(t),P.change("driverGroupId",t),c.onChange(t))}));U(t),P.change("driverGroupId",t),c.onChange(t)},onCancel:function(){}}):ne(null==r||null===(i=r.item)||void 0===i?void 0:i.id).then((function(e){e?(Object.keys(e).forEach((function(t){P.change(t,e[t]||null)})),U(t),setTimeout((function(){P.change("driverGroupId",t),c.onChange(t)}),500)):(U(t),P.change("driverGroupId",t),c.onChange(t))}));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),ne=function(e){return e?(0,d.api)({name:"driver"}).fetch("/driverInstance/".concat(e),{}).then((function(e){var t=e.json;return null==t?void 0:t.device})):new Promise((function(e,t){return e({})}))},ie=function(){var e=null;return A&&Z&&(e="test_test"==Z?Y?u().createElement(g.bk,{style:{width:"auto",marginTop:5}}):null:u().createElement(g.ZP,{block:!1,driver:{id:Q,title:s("驱动")}})),u().createElement(u().Fragment,null," ",u().createElement("br",null)," ",e," ")},ae=(null==T?void 0:T._table)&&(null==T?void 0:T.id),oe=ae&&(null==Z?void 0:Z.substring(0,null==Z?void 0:Z.lastIndexOf("_")));return u().createElement(u().Fragment,null,u().createElement(m.Select,(0,n.Z)({},c,{allowClear:!0,showSearch:!0,value:Z,disabled:$,style:{width:220},onChange:re,dropdownMatchSelectWidth:!1,optionFilterProp:"title",placeholder:s("请选择驱动"),onDropdownVisibleChange:function(e){return e&&X()}}),u().createElement(E,{value:"test_test"},s("测试驱动")),u().createElement(O,{label:s("单实例")},L.filter((function(e){return"one"==(null==e?void 0:e.runMode)})).map((function(e){return u().createElement(E,{item:e,title:null==e?void 0:e.name,disabled:null==e?void 0:e.disable,value:(null==e?void 0:e.driverType)+"_"+(null==e?void 0:e.groupId)},null==e?void 0:e.name,(null==e?void 0:e.disable)&&s(" (已禁用)"))}))),u().createElement(O,{label:s("集群")},L.filter((function(e){return"cluster"==(null==e?void 0:e.runMode)})).map((function(e){return u().createElement(E,{item:e,title:null==e?void 0:e.name,disabled:null==e?void 0:e.disable,value:(null==e?void 0:e.driverType)+"_"+(null==e?void 0:e.groupId)},null==e?void 0:e.name,(null==e?void 0:e.disable)&&s(" (已禁用)"))})))),!$&&u().createElement(v.HasPermission,{FailureComponent:null,permission:"driverInstance.add"},u().createElement(m.Button,{type:"primary",style:{marginLeft:10},onClick:function(){z(!0),H({type:"@@device/CHANGE_DRIVER_ID",payload:{driverSaveId:null}})}},u().createElement(y.PlusOutlined,null)," ",s("添加驱动"))),ae&&-1!=(null==Z?void 0:Z.indexOf("opc"))&&u().createElement(b,{driver:oe,isNode:ae,table:w}),u().createElement(m.Modal,{width:"60%",footer:null,destroyOnClose:!0,title:s("驱动管理"),onOk:ee,onCancel:ee,visible:V},u().createElement(f.Model,{name:"DriverInstance"},u().createElement(_.j,(0,n.Z)({},J,{modelTab:!0,onSubmitSuccess:ee,component:function(e){var t=e.children,r=e.invalid,n=e.handleSubmit;return u().createElement(m.Form,{onSubmit:n},t,u().createElement("div",{style:{textAlign:"right",marginTop:"2.2rem"}},u().createElement(m.Space,null,u().createElement(m.Button,{type:"primary",onClick:n,disabled:r},s("确认")),u().createElement(m.Button,{onClick:ee},s("取消")))))}})))),u().createElement(ie,null))}},2087:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(4942),i=r(3204);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const o=function(e){var t=e.field,r=e.option;return(0,i.objectBuilder)(t.fields,t.render,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r))}},8007:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(2982),i=r(885),a=r(4942),o=r(7363),l=r.n(o),s=r(2611),u=r.n(s),c=r(3078),p=r(5907),d=r(1821),m=r(6640);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=function(e){var t,r,n=useI18n().t,i=e.index,a=e.label,o=e.value,s=e.deleteOption,u=e.changeOption,c=e.changeLang,f=e.table,_=e.values,y=e.type,v={width:"100px"},g=function(e){u(i,e.target.value)},b=function(e){u(i,null,e.target.value)},h=function(e,t){c(i,e,t)},E={};return null===(t=Object.keys(_))||void 0===t||null===(r=t.filter((function(e){return e.indexOf("enum_title_")>-1})))||void 0===r||r.forEach((function(e){var t;E[e.substring(11)]=null===(t=_[e])||void 0===t?void 0:t[i]})),l().useMemo((function(){return l().createElement(d.Input.Group,{key:i+a+o,compact:!0,style:{margin:"4px 0"}},"numSelect"===y?l().createElement(d.InputNumber,{placeholder:n("值"),style:v,defaultValue:o,onChange:function(e){return u(i,e)},key:o}):l().createElement(d.Input,{placeholder:n("值"),style:v,defaultValue:o,onChange:g,key:o}),l().createElement(p.C,{is:"Custom.LanguageType",field:{placeholder:n("名称"),style:{width:140},tableInfo:f,defaultValue:a,onChange:b,languageValue:E,languageChange:h}}),l().createElement(m.MinusCircleOutlined,{style:{fontSize:"18px",margin:"7px"},onClick:function(){return s(i)}}))}),[y])},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(null==e?void 0:e.reduce((function(e,r){var n;return u().isString(e)?(n={},(0,a.Z)(n,"enum_title_"+e,new Array(t).fill("")),(0,a.Z)(n,"enum_title_"+r,new Array(t).fill("")),n):_(_({},e),{},(0,a.Z)({},r,new Array(t).fill("")))})))||{}};const g=function(e){var t,r,a,o=e.input,s=o.value,m=o.onChange,f=o.onBlur,g=(o.name,e.typeField),b=void 0===g?"type":g,h=null===(t=e.table)||void 0===t||null===(r=t.languageType)||void 0===r?void 0:r.languages,E=(0,c.use)("form",(function(e){var t;return{type:null===(t=e.values)||void 0===t?void 0:t[b]}})),O=E.type,w=l().useState(s||_({enum:[],enum_title:[]},v(h,null===(a=s.enum)||void 0===a?void 0:a.length))),C=(0,i.Z)(w,2),A=C[0],T=C[1];l().useEffect((function(){var e,t=null==A||null===(e=A.enum)||void 0===e?void 0:e[0];t&&"string"==typeof t&&"numSelect"===O&&(m(null),T(_({enum:[],enum_title:[]},v(h,0)))),t&&"number"==typeof t&&"select"===O&&(m(null),T(_({enum:[],enum_title:[]},v(h,0))))}),[O]);var k=function(e,t,r){e&&e.length>0?m(_({enum:e,enum_title:t},r)):m(null),f()},D=function(e){T((function(t){var r=(0,n.Z)(t.enum),i=(0,n.Z)(t.enum_title),a=u().omit(t,["enum","enum_title"]);return Object.keys(a).forEach((function(t){a[t].splice(e,1)})),r.splice(e,1),i.splice(e,1),k(r,i,a),_({enum:r,enum_title:i},a)}))},I=function(e,t,r){T((function(i){var a=(0,n.Z)(i.enum),o=(0,n.Z)(i.enum_title);return u().isNil(t)||(a[e]=t),u().isNil(r)||(o[e]=r),k(a,o,u().omit(i,["enum","enum_title"])),_(_({},i),{},{enum:a,enum_title:o})}))},S=function(e,t,r){T((function(n){var i=u().omit(n,["enum","enum_title"]);return i["enum_title_"+r][e]=t,k(n.enum,n.enum_title,i),_(_({},n),i)}))};return l().createElement(l().Fragment,null,l().createElement(d.Button,{onClick:function(){var e=[].concat((0,n.Z)(A.enum),[""]),t=[].concat((0,n.Z)(A.enum_title),[""]),r=u().omit(A,["enum","enum_title"]);Object.keys(r).forEach((function(e){r[e]=[].concat((0,n.Z)(r[e]),[""])})),T(_({enum:e,enum_title:t},r)),k(e,t,r)},type:"primary",style:{width:40,marginTop:2},size:"small"},l().createElement(p.Icon,{type:"plus"})),A.enum&&A.enum.length>0?A.enum.map((function(t,r){return l().createElement(y,{key:t,index:r,type:O,values:A,value:t,table:e.table,label:A.enum_title[r],changeOption:I,deleteOption:D,changeLang:S})})):null)}},9340:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g,q:()=>v});var n=r(4942),i=r(885),a=r(1821),o=r(7363),l=r.n(o),s=r(2611),u=r.n(s),c=r(3078),p=r(5907),d=r(6640);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _=a.Select.Option,y=function(e){var t=e.data,r=e.setValue,o=e.val,s=e.placeholder,p=e.changeName;if(null==t||!t.uid)return null;var d=useI18n().t,m=(0,c.use)("redux").dispatch,y=l().useState([]),v=(0,i.Z)(y,2),g=v[0],b=v[1],h=l().useState(!1),E=(0,i.Z)(h,2),O=E[0],w=E[1],C=l().useState(null),A=(0,i.Z)(C,2),T=(A[0],A[1]);return l().useEffect((function(){w(!0),(0,c.api)({name:"core/t/".concat(null==t?void 0:t.uid,"/d")}).query({fields:["name"]},{}).then((function(e){var t=e.items;b(t),w(!1)}))}),[]),l().createElement(a.Select,{size:"small",showSearch:!0,allowClear:!0,filterOption:!1,loading:O,placeholder:d(s),onChange:function(e){var i={uid:null==t?void 0:t.uid,name:(null==t?void 0:t.name)||(null==t?void 0:t.title)},a=g.filter((function(t){return t.id==e}))[0];r(f(f({name:null==a?void 0:a.id},a),{},{table:i})),m({type:"@@device/CHANGE_DEVICE_NODE",payload:(0,n.Z)({},p,f(f({},a),{},{table:i}))})},value:null==o?void 0:o.name,onSearch:u().debounce(T,500),style:{width:170,margin:" 0 10px"}},g.map((function(e){return l().createElement(_,{value:e.id},e.name)})))},v=function(e){var t=e.val,r=e.visible,n=e.record,i=e.changeVisible,o=l().useMemo((function(){return l().createElement(p.C,{is:"DebugPanel",device:t,resize:!1,record:n})}),[JSON.stringify(t)]);return l().createElement(a.Drawer,{title:"设备调试 ".concat(t&&t.name),placement:"right",width:320,mask:!1,destroyOnClose:!0,visible:r,bodyStyle:{padding:0},onClose:function(){return i(!1)}},o)};const g=function(e){var t=useI18n().t,r=l().useState(null),o=(0,i.Z)(r,2),s=o[0],u=o[1],m=l().useState(!1),_=(0,i.Z)(m,2),g=_[0],b=_[1],h=(0,c.use)("form",(function(e){return e})),E=h.form.data,O=(0,c.use)("redux",(function(e){return{state:e.device}})),w=O.dispatch,C=O.state,A=E&&{uid:null==E?void 0:E._table},T=(null==E?void 0:E.record)&&{id:(null==E?void 0:E.id)||"",name:(null==E?void 0:E.name)||""},k=s||T,D=(null==e?void 0:e.changeName)||"";l().useEffect((function(){return function(){w({type:"@@device/CHANGE_DEVICE_NODE",payload:(0,n.Z)({},D,null)})}}),[]),l().useEffect((function(){if(k){var e=(0,n.Z)({},D,f(f({},k),{},{table:A}));w({type:"@@device/CHANGE_DEVICE_NODE",payload:e})}}),[JSON.stringify(k)]);var I=e.debug&&c.app.apps.some((function(e){return e.name&&"iot.debug"==e.name})),S=(l().useMemo((function(){return l().createElement(p.C,{is:"DebugPanel",device:k,resize:!1})}),[JSON.stringify(k)]),l().useMemo((function(){return l().createElement(y,{data:E,val:C&&C[D]||k,changeName:D,setValue:u,placeholder:t(e.placeholder),setVisible:b})}),[JSON.stringify(E),JSON.stringify(k)]));return l().createElement(l().Fragment,null,S,I&&l().createElement(a.Tooltip,{title:t("设备调试")},l().createElement(a.Button,{disabled:!(k&&(null!=k&&k.uid||null!=k&&k.id)),onClick:function(){return b(!0)}},l().createElement(d.BugOutlined,null))),(s||E)&&l().createElement(v,{val:s||E,record:Boolean(!(null!=E&&E.uid)),visible:g,changeVisible:function(){b(!1)}}))}},6433:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(4942),i=r(885),a=r(7363),o=r.n(a),l=r(3078),s=(r(2611),r(1821));function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=[{key:_r("15条/页"),value:15},{key:_r("30条/页"),value:30},{key:_r("50条/页"),value:50},{key:_r("100条/页"),value:100}];const d=function(e){var t=(0,l.use)("auth.user").user,r=useI18n().t,n=(null==t?void 0:t.userId)||(null==t?void 0:t.id),u=(0,l.use)("redux",(function(e){var t;return{device_page:null==e||null===(t=e.device)||void 0===t?void 0:t.device_page}})),d=u.device_page,m=u.dispatch,f=o().useState({}),_=(0,i.Z)(f,2),y=_[0],v=_[1];(0,a.useEffect)((function(){n&&(0,l.api)({name:"core/user/".concat(n)}).fetch("",{}).then((function(e){var t,r=e.json,n=(null==r||null===(t=r.settings)||void 0===t?void 0:t.device_page)||40;v(null==r?void 0:r.settings),n!=d&&m({type:"@@device/CHANGE_DEVICE_Page",payload:{device_page:n}})}))}),[n]);var g=function(e){return h(e||1)},b=function(e){var t=e.target.value;return h(t||1),e.stopPropagation(),!1},h=function(e){m({type:"@@device/CHANGE_DEVICE_Page",payload:{device_page:e}}),(0,l.api)({name:"core/user/".concat(n)}).fetch("",{method:"PATCH",body:JSON.stringify({settings:c(c({},y),{},{device_page:e})})})};return o().createElement("div",{className:"pageSelect",id:"pageSelect"},o().createElement(s.Select,{autoFocus:!0,size:"small",value:d,onChange:g,style:{minWidth:120},dropdownRender:function(e){return o().createElement("div",null,e,o().createElement(s.Divider,{style:{margin:"4px 0"}}),o().createElement(s.InputNumber,{min:1,value:d,placeholder:r("自定义"),style:{minWidth:120,flex:"auto"},onPressEnter:b,onChange:g}))},getPopupContainer:function(){return document.getElementById("pageSelect")}},p.map((function(e){return o().createElement(s.Select.Option,{value:e.value},r(e.key))}))))}},3444:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>c,bk:()=>u});var n=r(885),i=r(7363),a=r.n(i),o=r(1821),l=r(3078),s=(r(5907),r(6640)),u=function(e){e.driver;var t=e.size,r=void 0===t?"middle":t,i=e.style,u=useI18n().t,c=a().useState(!1),p=(0,n.Z)(c,2),d=p[0],m=p[1];return a().createElement(o.Button,{size:r,style:i||{width:"100%"},onClick:function(){m(!0),(0,l.api)({resource:"emulator"}).fetch("/reload",{method:"GET"}).then((function(){o.message.success(u("系统仿真程序重载成功")),m(!1)})).catch((function(e){o.message.error(e.json&&e.json._other||e.message),m(!1)}))},loading:d},a().createElement(s.ReloadOutlined,null)," ",u("重启系统仿真程序"))};const c=function(e){var t=e.driver,r=e.block,i=void 0===r||r,u=useI18n().t;if(null==t||!t.id)return null;var c=a().useState(!1),p=(0,n.Z)(c,2),d=p[0],m=p[1];return a().createElement(o.Button,{size:"middle",block:i,onClick:function(){m(!0),(0,l.api)({resource:"driver/driver"}).fetch("/".concat(t.id,"/change/config"),{method:"POST"}).then((function(){o.message.success(u("驱动重载成功")),m(!1)})).catch((function(e){m(!1)}))},loading:d,style:{marginTop:".5rem"}},a().createElement(s.ReloadOutlined,null),u("重启"),t.title?t.title:t.name)}},5692:(e,t,r)=>{"use strict";r.d(t,{Z:()=>A});var n=r(5861),i=r(4942),a=r(5987),o=r(2982),l=r(885),s=r(4687),u=r.n(s),c=r(7363),p=r.n(c),d=r(3078),m=r(5907),f=r(1821),_=r(6640),y=["index"],v=["title","editable","children","dataIndex","record","handleSave"];function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=p().createContext(null),E=function(e){e.index;var t=(0,a.Z)(e,y),r=f.Form.useForm(),n=(0,l.Z)(r,1)[0];return p().createElement(f.Form,{form:n,component:!1},p().createElement(h.Provider,{value:n},p().createElement("tr",t)))},O=function(e){var t=e.title,r=e.editable,o=e.children,s=e.dataIndex,d=e.record,m=e.handleSave,_=(0,a.Z)(e,v),y=(0,c.useState)(!1),g=(0,l.Z)(y,2),E=g[0],O=g[1],w=(0,c.useRef)(null),C=(0,c.useContext)(h);(0,c.useEffect)((function(){E&&w.current.focus()}),[E]);var A=function(){O(!E),C.setFieldsValue((0,i.Z)({},s,d[s]))},T=function(){var e=(0,n.Z)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.validateFields();case 3:t=e.sent,A(),m(b(b({},d),t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),k=o;return r&&(k=E?p().createElement(f.Form.Item,{style:{margin:0},name:s,rules:[{required:!0,message:"".concat(t," is required.")}]},p().createElement(f.Input,{ref:w,onPressEnter:T,onBlur:T})):p().createElement("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:A},o)),p().createElement("td",_,k)},w=function(e){var t=e.loading,r=e.dataSource,n=e.setDataSource,i=e.setSelectData,a=e.driver,s=useI18n().t,u=(0,c.useState)([]),d=(0,l.Z)(u,2),y=d[0],v=d[1],g=(0,c.useState)(""),h=(0,l.Z)(g,2),w=h[0],C=h[1],A=(0,c.useState)(""),T=(0,l.Z)(A,2),k=T[0],D=T[1],I=(0,c.useRef)(null),S=function(e,t){return{filterDropdown:function(r){var n=r.setSelectedKeys,i=r.selectedKeys,a=r.confirm,o=r.clearFilters;return p().createElement("div",{style:{padding:8}},p().createElement(f.Input,{ref:I,placeholder:"".concat(s("搜索")," ").concat(t),value:i[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return R(i,a,e)},style:{width:188,marginBottom:8,display:"block"}}),p().createElement(f.Space,null,p().createElement(f.Button,{type:"primary",onClick:function(){return R(i,a,e)},icon:p().createElement(_.SearchOutlined,null),size:"small",style:{width:90}},s("查询")),p().createElement(f.Button,{onClick:function(){return N(o)},size:"small",style:{width:90}},s("重置"))))},filterIcon:function(e){return p().createElement(_.SearchOutlined,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,r){return r[e]?r[e].toString().toLowerCase().includes(t.toLowerCase()):""},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return I.current.select()}),100)},render:function(t){var r;return t&&-1!=t.indexOf(w)&&(r=t.replace(w,'<span style="background-color: #ffc069; padding: 0">'.concat(w,"</span>"))),k===e?p().createElement("span",{dangerouslySetInnerHTML:{__html:r}}):t}}},P=[b(b({title:_r("名称"),dataIndex:"name",width:"30%",editable:!0},S("name","名称")),{},{sorter:function(e,t){return e.name.length-t.name.length}}),b({title:_r("标识"),dataIndex:"id",editable:!0},S("id")),{title:_r("命名空间"),dataIndex:"namespaceIndex",editable:!0},{title:_r("数据点"),dataIndex:"identifier",editable:!0}],j=[b(b({title:_r("名称"),dataIndex:"itemId",width:"30%",editable:!0},S("name","名称")),{},{sorter:function(e,t){return e.itemId.length-t.itemId.length}}),b({title:_r("标识"),dataIndex:"itemId",editable:!0},S("id")),{title:_r("数据点"),dataIndex:"itemId",editable:!0}],x=function(e){var t=(0,o.Z)(r),i=t.findIndex((function(t){return e.key===t.key})),a=t[i];t.splice(i,1,b(b({},a),e)),n(t)},M={body:{row:E,cell:O}},B=("opcua"==a?P:j).map((function(e){return e.editable?b(b({},e),{},{onCell:function(t){return{record:t,editable:e.editable,dataIndex:e.dataIndex,title:e.title,handleSave:x}}}):e})),L={type:"checkbox",onChange:function(e,t){i(t),v(t)},getCheckboxProps:function(e){return{disabled:"Disabled User"===e.name,name:e.name}}},R=function(e,t,r){t(),C(e[0]),D(r)},N=function(e){e(),C("")};return p().createElement(f.Table,{bordered:!0,size:"small",loading:t,columns:B,pagination:!1,scroll:{y:640},components:M,dataSource:r,rowSelection:L,locale:{emptyText:p().createElement(m.C,{is:"NoData",description:s("暂无数据或需定义起始数据执行扫点")})},footer:function(e){return p().createElement("span",{style:{fontSize:14}},p().createElement("span",null,s("共有")," ",e&&e.length," ",s("条数据")),y&&y.length>0&&p().createElement("span",null,s("，已选择"),y.length,"条"))},rowClassName:function(){return"editable-row"}})},C=function(e){var t=e.settings,r=e.setDataSource,n=e.setLoading,i=e.driver,a=f.Form.useForm(),o=(0,l.Z)(a,1)[0];return t.endPointUrl,t.securityMode,t.securityPolicy,t.host,t.domain,t.progid,t.user,t.password,p().createElement(f.Form,{layout:"inline",form:o,onFinish:function(e){var a={};n(!0),("opcua"==i||"opcda"==i)&&(a=b({settings:t},e));var o={method:"POST",body:JSON.stringify(a)};(0,d.api)({name:"driver-".concat(i)}).fetch("/variables",o).then((function(e){var t=e.json;r(null==t?void 0:t.data.map((function(e){return b(b({},e),{},{id:e.name,key:D(),scan:!0})}))),n(!1)})).catch((function(e){n(!1),f.message.error((null==e?void 0:e.message)&&JSON.stringify(null==e?void 0:e.message)||JSON.stringify(e))}))}},"opcua"==i?p().createElement(T,null):p().createElement(k,null),p().createElement(f.Form.Item,{style:{width:"140px",margin:"0 auto"}},p().createElement(f.Button,{type:"primary",htmlType:"submit",style:{marginRight:".5rem"}},"扫点"),p().createElement(f.Button,{htmlType:"button",onClick:function(){return o.resetFields()}},"清除")))};const A=function(){var e,t=useI18n().t,r=p().useState(!1),n=(0,l.Z)(r,2),i=n[0],a=n[1],s=p().useState(!1),u=(0,l.Z)(s,2),m=u[0],y=u[1],v=p().useState([]),g=(0,l.Z)(v,2),b=g[0],h=g[1],E=(0,c.useState)([]),O=(0,l.Z)(E,2),A=O[0],T=O[1],k=(0,d.use)("form",(function(e){var t;return{tags:e.values&&e.values.tags,settings:e.values&&e.values.settings,driver:e.values&&(null===(t=e.values)||void 0===t?void 0:t.driver)}})),D=k.form,I=k.tags,S=k.settings,P=k.driver;return"opcua"==P?e=S&&(null==S?void 0:S.endPointUrl)&&(null==S?void 0:S.securityMode)&&(null==S?void 0:S.securityPolicy):"opcda"==P&&(e=S&&(null==S?void 0:S.host)&&(null==S?void 0:S.domain)&&(null==S?void 0:S.progid)&&(null==S?void 0:S.user)&&(null==S?void 0:S.password)),p().createElement(p().Fragment,null,p().createElement(f.Tooltip,{title:t(e?"驱动扫点":"请检查驱动配置")},p().createElement(f.Button,{icon:p().createElement(_.AimOutlined,null),disabled:!e,onClick:function(){return a(!0)}})),p().createElement(f.Modal,{width:"65%",title:t("驱动扫点"),destroyOnClose:!0,onOk:function(){if(b&&b.length>0){var e=b.map((function(e){return{id:null==e?void 0:e.name,name:null==e?void 0:e.name,identifier:null==e?void 0:e.identifier,namespaceIndex:(null==e?void 0:e.namespaceIndex)+""}})),t=b.map((function(e){return{id:null==e?void 0:e.itemId,name:null==e?void 0:e.itemId,itemid:null==e?void 0:e.itemId}})),r="opcua"==P?e:t;D.change("tags",[].concat((0,o.Z)(I),(0,o.Z)(r))),f.message.success("数据点添加成功")}a(!1),h([])},okText:t("添加数据点"),visible:i,okButtonProps:{disabled:!(b&&b.length>0)},bodyStyle:{padding:15},onCancel:function(){a(!1),h([]),T([])}},p().createElement("div",{style:{width:850,margin:"0 auto"}},p().createElement(f.Space,{align:"end"},p().createElement(C,{driver:P,settings:S,setDataSource:T,setLoading:y}))),p().createElement("br",null),p().createElement(w,{driver:P,loading:m,setSelectData:h,setDataSource:T,dataSource:A,settings:S})))};var T=function(){var e=useI18n().t;return p().createElement(p().Fragment,null,p().createElement(f.Row,{style:{marginBottom:10}},p().createElement(f.Form.Item,{name:"namespaceIndex",label:e("命名空间"),rules:[{required:!0}],style:{marginBottom:5},tooltip:e("命名空间")},p().createElement(f.Input,null)),p().createElement(f.Form.Item,{name:"identifier",label:"数据点Id",rules:[{required:!0}],tooltip:e("实际值为数据点前缀与此栏拼接而成")},p().createElement(f.Input,null)),p().createElement(f.Form.Item,{name:"limit",label:e("查询条数"),tooltip:"查询条数默认为1000"},p().createElement(f.Input,null)),p().createElement(f.Form.Item,{name:"offset",label:e("跳过数量"),style:{marginLeft:10}},p().createElement(f.Input,null))),p().createElement(f.Row,{style:{marginBottom:10}},p().createElement(f.Form.Item,{name:"include",label:e("包含字符"),tooltip:"返回的点位的浏览名必须包含至少一个字符,缺省则不过滤,用英文逗号分割"},p().createElement(f.Input,null)),p().createElement(f.Form.Item,{name:"exclude",label:e("不包含字符"),tooltip:"返回的点位的浏览名不能包含任意一个字符,缺省则不过滤,用英文逗号分割"},p().createElement(f.Input,null)),p().createElement(f.Form.Item,{name:"regex",label:e("正则匹配"),tooltip:"",placeholder:e("填写后不过滤其余过滤条件")},p().createElement(f.Input,null))))},k=function(){var e=useI18n().t;return p().createElement(p().Fragment,null,p().createElement(f.Row,{style:{marginBottom:10}},p().createElement(f.Form.Item,{name:"prefix",label:"itemId前缀",tooltip:"itemId前缀",style:{marginBottom:5}},p().createElement(f.Input,null)),p().createElement(f.Form.Item,{name:"exclude",label:"itemId不包含",tooltip:"itemId不包含"},p().createElement(f.Input,null)),p().createElement(f.Form.Item,{name:"limit",label:e("查询条数"),placeholder:"查询条数默认为1000"},p().createElement(f.Input,null)),p().createElement(f.Form.Item,{name:"offset",label:e("跳过数量"),style:{marginLeft:25}},p().createElement(f.Input,null))),p().createElement(f.Row,{style:{marginBottom:10}},p().createElement(f.Form.Item,{name:"include",label:e("包含字符"),tooltip:"返回的点位的浏览名必须包含至少一个字符,缺省则不过滤,用英文逗号分割"},p().createElement(f.Input,null)),p().createElement(f.Form.Item,{name:"exclude",label:e("不包含字符"),tooltip:"返回的点位的浏览名不能包含任意一个字符,缺省则不过滤,用英文逗号分割"},p().createElement(f.Input,null)),p().createElement(f.Form.Item,{name:"regex",label:e("正则匹配"),tooltip:"",placeholder:e("填写后不过滤其余过滤条件")},p().createElement(f.Input,null))))};function D(){for(var e=[],t="0123456789abcdef",r=0;r<36;r++)e[r]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}},8947:(e,t,r)=>{"use strict";r.d(t,{cr:()=>s,L5:()=>u,A6:()=>l});var n=r(7462),i=r(7363),a=r.n(i),o=r(1821),l={type:"object",title:"数值定义",properties:{minValue:{title:"最小值",type:"number"},maxValue:{title:"最大值",type:"number"},minRaw:{title:"原始最小值",type:"number"},maxRaw:{title:"原始最大值",type:"number"},enum:{title:"显示映射",type:"array",items:{type:"object",title:"映射",properties:{value:{title:"值",type:"string"},label:{title:"显示值",type:"string",fieldType:"languageInput"}}}}}},s={type:"array",title:"表单项",items:{type:"object",properties:{name:{type:"string",title:"参数名"},type:{type:"string",title:"数据类型",enum:["string","number","boolean"],enum_title:["字符串","数字","布尔型"]},enum_title:{type:"array",title:"选择项文字",items:{type:"string"}},enum:{type:"array",title:"选择项值",items:{type:"string"}},required:{type:"boolean",title:"是否必填"},default:{type:"string",title:"默认值"},mod:{type:"number",title:"缩放比例"},tagValue:{type:"object",title:"数值定义",properties:{minValue:{title:"最小值",type:"number"},maxValue:{title:"最大值",type:"number"},minRaw:{title:"原始最小值",type:"number"},maxRaw:{title:"原始最大值",type:"number"}}}},form:[{key:"name",validate:function(e){return(/^[0-9]*$/.test(e)||/[\u4E00-\u9FA5]/i.test(e))&&"参数名不能是数字或中文"}},"*",{key:"required",component:function(e){var t=e.input,r=(e.label,e.field),i=e.meta,l=e.group;return a().createElement(l,{label:null,meta:i,input:t,field:r},a().createElement(o.Checkbox,(0,n.Z)({checked:!!t.value},t,r.attrs)))}}]}},u={type:"object",title:"通讯监控参数",properties:{timeout:{title:"通讯超时时间(s)",description:"判断设备超时的时间标准，超时时间为定义参数周期的3倍",type:"number"}},form:[{key:"timeout",validate:function(e,t){var r=t&&t.settings&&t.settings.interval;return r&&e&&e<=r?"需大于采集周期":null}}]}},2684:(e,t,r)=>{"use strict";r.d(t,{J:()=>f});var n=r(4942),i=r(5861),a=r(4687),o=r.n(a),l=r(3078);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p=["tableData.name","tableData.network_online","tableData.network_address","tableData.network_stats_AvgRtt","tableInfo","network"],d=function(e){return null!=e&&e.length?{$in:e.map((function(e){return e.id}))}:null},m=function(e){var t,r={},n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw a}}}}(e);try{for(n.s();!(t=n.n()).done;){var i,a,o=t.value,l="".concat(null==o||null===(i=o.table)||void 0===i?void 0:i.id,"Id");null!==(a=r[l])&&void 0!==a&&a.length?r[l].push(o):r[l]=[o]}}catch(e){n.e(e)}finally{n.f()}return _.keys(r).forEach((function(e){r[e]=d(r[e])})),r},f=function(){var e=(0,i.Z)(o().mark((function e(t){var r,n,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={network:{$regex:'"enable":true'}},(null==t||null===(r=t.table)||void 0===r?void 0:r.length)&&(a.tableInfoId=d(t.table)),(null==t||null===(n=t.tableData)||void 0===n?void 0:n.length)&&(a.tableDataId=d(t.tableData)),null!=t&&null!==(i=t.department)&&void 0!==i&&i.length&&(a=u(u({},a),m(t.department))),e.next=6,(0,l.api)({name:"core/t/record"}).query({fields:p},{filter:a,withCount:!0});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},6119:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var n=r(4942),i=r(5861),a=r(885),o=r(4687),l=r.n(o),s=r(7363),u=r.n(s),c=r(3078),p=r(1821),d=r(2611),m=r.n(d),f=r(8488),_=r.n(f),y=r(2684);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const b=function(e){var t=useI18n().t,n=e.filterConfig,o=e.height,s=u().useState([]),d=(0,a.Z)(s,2),f=d[0],v=d[1],b=u().useState([]),h=(0,a.Z)(b,2),E=(h[0],h[1],u().useState(!1)),O=(0,a.Z)(E,2),w=O[0],C=O[1],A=function(){var e=(0,i.Z)(l().mark((function e(){var t,r,i,a,o,s,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,(0,y.J)(n);case 3:return t=e.sent,r=t.items,i=m().unionBy(r,"tableInfo.id").map((function(e){var t;return null==e||null===(t=e.tableInfo)||void 0===t?void 0:t.id})),a=i.map((function(e){return[{fields:['COUNT("networkCheckOnline") as total'],tableId:e,group:["id"],fill:"null"},{fields:['COUNT("networkCheckOnline") as dayTrue'],tableId:e,where:["time >= '".concat(_()().startOf("day").toISOString(),"'"),"networkCheckOnline = 1"],group:["id"],fill:"null"},{fields:['COUNT("networkCheckOnline") as dayFalse'],tableId:e,where:["time >= '".concat(_()().startOf("day").toISOString(),"'"),"networkCheckOnline = 0"],group:["id"],fill:"null"},{fields:['COUNT("networkCheckOnline") as weekTrue'],tableId:e,where:["time >= '".concat(_()().startOf("week").toISOString(),"'"),"networkCheckOnline = 1"],group:["id"],fill:"null"},{fields:['COUNT("networkCheckOnline") as weekFalse'],tableId:e,where:["time >= '".concat(_()().startOf("week").toISOString(),"'"),"networkCheckOnline = 0"],group:["id"],fill:"null"},{fields:['COUNT("networkCheckOnline") as monthTrue'],tableId:e,where:["time >= '".concat(_()().startOf("month").toISOString(),"'"),"networkCheckOnline = 1"],group:["id"],fill:"null"},{fields:['COUNT("networkCheckOnline") as monthFalse'],tableId:e,where:["time >= '".concat(_()().startOf("month").toISOString(),"'"),"networkCheckOnline = 0"],group:["id"],fill:"null"},{fields:['COUNT("networkCheckOnline") as yearTrue'],tableId:e,where:["time >= '".concat(_()().startOf("year").toISOString(),"'"),"networkCheckOnline = 1"],group:["id"],fill:"null"},{fields:['COUNT("networkCheckOnline") as yearFalse'],tableId:e,where:["time >= '".concat(_()().startOf("year").toISOString(),"'"),"networkCheckOnline = 0"],group:["id"],fill:"null"},{fields:['LAST("networkCheckOnline") as lastTrue'],tableId:e,where:["networkCheckOnline = 1"],group:["id"],fill:"null"},{fields:['LAST("networkCheckOnline") as lastFalse'],tableId:e,where:["networkCheckOnline = 0"],group:["id"],fill:"null"}]})),o=a.map((function(e){return(0,c.api)({name:"core/data/query"}).fetch("",{method:"POST",body:JSON.stringify(e)})})),s={},e.next=11,Promise.allSettled(o);case 11:e.sent.forEach((function(e){var t,r;((null==e||null===(t=e.value)||void 0===t||null===(r=t.json)||void 0===r?void 0:r.results)||[]).forEach((function(e){(e.series||[]).forEach((function(e){var t,r,n;s[null==e||null===(t=e.tags)||void 0===t?void 0:t.id]||(s[null==e||null===(n=e.tags)||void 0===n?void 0:n.id]={}),s[null==e||null===(r=e.tags)||void 0===r?void 0:r.id][e.columns[1]]="lastTrue"===e.columns[1]||"lastFalse"===e.columns[1]?e.values[0][0]:e.values[0][1]}))}))})),u=r.map((function(e){var t;return g(g({},e),s[null==e||null===(t=e.tableData)||void 0===t?void 0:t.id])})),v(u),C(!1);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();u().useEffect((function(){A()}),[n]);var T=[{title:t("设备名称"),dataIndex:["tableData","name"],key:"name",sorter:function(e,t){var r,n;return(null==e||null===(r=e.tableData)||void 0===r?void 0:r.name)>(null==t||null===(n=t.tableData)||void 0===n?void 0:n.name)?1:-1}},{title:t("设备编号"),dataIndex:["tableData","id"],key:"id",sorter:function(e,t){var r,n;return(null==e||null===(r=e.tableData)||void 0===r?void 0:r.id)>(null==t||null===(n=t.tableData)||void 0===n?void 0:n.id)?1:-1}},{title:t("设备IP"),dataIndex:["tableData","network_address"],key:"network.address",sorter:function(e,t){var r,n;return(null==e||null===(r=e.tableData)||void 0===r?void 0:r.network_address)>(null==t||null===(n=t.tableData)||void 0===n?void 0:n.network_address)?1:-1}},{title:t("当前通信状态"),dataIndex:["tableData","network_online"],key:"network.online",sorter:function(e,t){return e.tableData.network_online?1:-1},render:function(e){return e?u().createElement(p.Tag,{color:"green"},t("在线")):u().createElement(p.Tag,{color:"red"},t("离线"))}},{title:t("Ping总数"),dataIndex:"total",key:"total",sorter:function(e,t){return e.total>t.total?1:-1}},{title:t("失败率"),key:"falsePer",children:[{title:t("日"),key:"day",render:function(e,t){var r=m().round((t.dayFalse||0)/((t.dayFalse||0)+(t.dayTrue||0))*100,2);return m().isNaN(r)?"":"".concat(r,"%")},sorter:function(e,t){return m().round((e.dayFalse||0)/((e.dayFalse||0)+(e.dayTrue||0))*100,2)>m().round((t.dayFalse||0)/((t.dayFalse||0)+(t.dayTrue||0))*100,2)?1:-1},className:"network-sub-header"},{title:t("周"),key:"week",render:function(e,t){var r=m().round((t.weekFalse||0)/((t.weekFalse||0)+(t.weekTrue||0))*100,2);return m().isNaN(r)?"":"".concat(r,"%")},sorter:function(e,t){return m().round((e.weekFalse||0)/((e.weekFalse||0)+(e.weekTrue||0))*100,2)>m().round((t.weekFalse||0)/((t.weekFalse||0)+(t.weekTrue||0))*100,2)?1:-1},className:"network-sub-header"},{title:t("月"),key:"month",render:function(e,t){var r=m().round((t.monthFalse||0)/((t.monthFalse||0)+(t.monthTrue||0))*100,2);return m().isNaN(r)?"":"".concat(r,"%")},sorter:function(e,t){return m().round((e.monthFalse||0)/((e.monthFalse||0)+(t.monthTrue||0))*100,2)>m().round((t.monthFalse||0)/((t.monthFalse||0)+(t.monthTrue||0))*100,2)?1:-1},className:"network-sub-header"},{title:t("年"),key:"year",render:function(e,t){var r=m().round((t.yearFalse||0)/((t.yearFalse||0)+(t.yearTrue||0))*100,2);return m().isNaN(r)?"":"".concat(r,"%")},sorter:function(e,t){return m().round((e.yearFalse||0)/((e.yearFalse||0)+(e.yearTrue||0))*100,2)>m().round((t.yearFalse||0)/((t.yearFalse||0)+(t.yearTrue||0))*100,2)?1:-1},className:"network-sub-header"}]},{title:t("最近（最后）通信失败时间"),dataIndex:"lastFalse",key:"lastFalse",render:function(e){return e?_()(e).format("YYYY-MM-DD HH:mm:ss"):null},sorter:function(e,t){return e.lastFalse>t.lastFalse?1:-1}},{title:t("最近（最后）通信成功时间"),dataIndex:"lastTrue",key:"lastTrue",render:function(e){return e?_()(e).format("YYYY-MM-DD HH:mm:ss"):null},sorter:function(e,t){return e.lastTrue>t.lastTrue?1:-1}}];return u().createElement("div",{className:"network-table",style:{width:"100%",height:o||"calc(100vh - 380px)",overflow:"auto"}},w?u().createElement("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}},u().createElement(p.Spin,null)):u().createElement(p.Table,{columns:T,dataSource:f,pagination:{showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e){return"".concat(t("共")).concat(e).concat(t("条"))}},locale:{emptyText:u().createElement(p.Empty,{description:t("暂无数据"),image:r(8107),imageStyle:{height:100}})}}))}},6269:(e,t,r)=>{"use strict";r.d(t,{ZG:()=>F,t0:()=>U,j0:()=>Z});var n=r(4942),i=r(885),a=r(7462),o=r(7363),l=r.n(o),s=r(2611),u=r.n(s),c=r(3078),p=r(5907),d=r(3204),m=r(1821),f=r(2982),_=r(8007);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=function e(t,r,n,i,a){var o={},s=t.type;if(s){var c="object"===s&&t.treeKey,d="array"===s&&t.treeKey;o={title:l().createElement("div",{onClick:function(){c&&n(t)}},l().createElement("span",null,"[".concat({object:"对象",array:"数组",string:"字符串",number:"数字",boolean:"布尔",select:"字符串选择",numSelect:"数字选择"}[s],"]").concat(t.title)),l().createElement("span",{style:{marginLeft:10}},(c||d&&u().isEmpty(t.items))&&l().createElement(p.Icon,{style:{marginLeft:7},type:"plus",onClick:function(){r(!0),a(t)}}),t.treeKey&&"root"!==t.treeKey&&l().createElement(m.Popconfirm,{title:_t1("确定删除?"),onConfirm:function(){return i(t)},style:{cursor:"pointer"},okText:_t1("确定"),cancelText:_t1("取消")},l().createElement(p.Icon,{style:{marginLeft:5},type:"minus"})))),key:t.treeKey,disabled:!c},c?o.children=A(t).map((function(o){return e(t.properties[o],r,n,i,a)})):d&&(u().isEmpty(t.items)?o.children=[]:o.children=[e(t.items,r,n,i,a)])}return o},b={type:"object",required:["itemKey","title","itemType"],properties:{itemKey:{type:"string",title:_r("元素标识")},title:{type:"string",title:_r("元素标题")},itemType:{type:"string",title:_r("数组元素类型"),enum:["string","number","select","numSelect","object","array"],enum_title:["字符串","数字","字符串选择","数字选择","对象","数组"],field:{effect:function(e,t){var r=e.value;setTimeout((function(){"select"===r||"numSelect"===r?t.setFieldData("select",{display:!0}):(t.setFieldData("select",{display:!1}),t.change("select",null))}))}}},select:{type:"object",title:_r("定义选择项"),properties:{enum:{title:"值",type:"array",items:{}},enum_title:{title:_r("名称"),type:"array",items:{}}},field:{component:function(e){return l().createElement(_.Z,(0,a.Z)({},e,{typeField:"itemType"}))},validate:function(e){return null!=e&&e.enum&&e.enum.length>new Set(e.enum).size?"选项值不能重复":null}}}}},h={type:"object",required:["itemKey","title","itemType"],properties:{itemKey:{type:"string",title:_r("元素标识")},title:{type:"string",title:_r("元素标题")},itemType:{type:"string",title:_r("元素类型"),enum:["object","array"],enum_title:["对象","数组"]}}},E=function e(t,r,n){var i=u().cloneDeep(t);if(i.treeKey===n.treeKey){var a={title:r.title,key:r.itemKey,treeKey:i.treeKey+"-"+r.itemKey};"object"===i.type?"object"===r.itemType?i.properties[r.itemKey]=v({type:"object",properties:{}},a):"array"===r.itemType&&(i.properties[r.itemKey]=v({type:"array",items:{}},a)):"object"===r.itemType?i.items=v({type:"object",properties:{}},a):"array"===r.itemType?i.items=v({type:"array",items:{}},a):"select"===r.itemType?i.items=v(v(v({type:"string"},r),a),r.select):"numSelect"===r.itemType?i.items=v(v(v({type:"number"},r),a),r.select):i.items=v(v({type:r.itemType},r),a)}else if("object"===i.type)for(var o in i.properties)i.properties[o]=e(i.properties[o],r,n);else u().isEmpty(i.items)||(i.items=e(i.items,r,n));return i},O=function e(t,r){var n=u().cloneDeep(t);if(n.treeKey===r.treeKey)n=void 0;else if("object"===n.type)for(var i in n.properties){var a=e(n.properties[i],r);a?n.properties[i]=a:delete n.properties[i]}else"array"===n.type&&(n.items=e(n.items,r)||{});return n},w=function e(t,r){if(!u().isEmpty(r)){if(t.treeKey===r.treeKey)return v(v({},t),{},{form:A(t).filter((function(e){return!t.properties[e].treeKey}))});if("object"===t.type)for(var n in t.properties){var i=e(t.properties[n],r);if(i)return i}else if("array"===t.type){var a=e(t.items,r);if(a)return a}}},C=function e(t,r,n){var i=u().cloneDeep(t);if(i.treeKey===n.treeKey)"object"===i.type&&(i=r);else if("object"===i.type)for(var a in i.properties)i.properties[a]=e(i.properties[a],r,n);else u().isEmpty(i.items)||(i.items=e(i.items,r,n));return i},A=function(e){var t,r=[];return e.form?(t=r=e.form.filter((function(e){return"*"!==e}))).push.apply(t,(0,f.Z)(Object.keys(e.properties||{}).filter((function(e){return-1===r.indexOf(e)})))):r=Object.keys(e.properties||{}),r};const T=function(e){var t=e.schema,r=e.setSchema,n=e.item,a=e.setItem,o=l().useState(!1),s=(0,i.Z)(o,2),c=s[0],p=s[1],f=l().useState({}),_=(0,i.Z)(f,2),y=_[0],v=_[1],w=[g(t,p,a,(function(e){var n=u().omitBy(O(t,e),(function(e){return!e}));r(n)}),v)];return l().createElement(l().Fragment,null,l().createElement(m.Tree,{defaultExpandAll:!0,selectedKeys:[null==n?void 0:n.treeKey],treeData:w}),l().createElement(m.Modal,{title:_t1("创建元素"),visible:c,footer:null,width:"50%",onCancel:function(){return p(!1)}},l().createElement(d.SchemaForm,{formKey:JSON.stringify(y),schema:"object"===(null==y?void 0:y.type)?h:b,onSubmit:function(e){var n=E(t,e,y);r(n),p(!1)},onCancel:function(){}})))};function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var I=m.Tabs.TabPane,S={key:"root",treeKey:"root",type:"object",title:_r("根对象"),properties:{}},P=function e(t){var r=u().cloneDeep(t);if(r.form&&(r.form=[].concat((0,f.Z)(r.form),["*"])),"object"===r.type)for(var n in r.properties)r.properties[n]=e(r.properties[n]);else"array"===r.type&&(r.items=e(r.items));return r};const j=function(e){var t,r,a,o,s,u,c,d=e.input,f=e.table,_=useI18n().t,y=l().useState(!1),v=(0,i.Z)(y,2),g=v[0],b=v[1],h=l().useState({key:"root",title:_r("根对象"),treeKey:"root",type:"object"}),E=(0,i.Z)(h,2),O=E[0],A=E[1],k=(null!==(u=c=null==(s=d.value)?void 0:s.schema)&&void 0!==u&&u.form&&(c=D(D({},c),{},{key:"root",title:_r("根对象"),treeKey:"root",type:"object"})),c||S);return l().createElement(l().Fragment,null,l().createElement(m.Button,{onClick:function(){return b(!0)}},_("配置对象")),l().createElement(m.Modal,{title:_("配置对象"),width:"100%",footer:null,onCancel:function(){return b(!1)},visible:g},l().createElement(m.Row,null,l().createElement(m.Col,{span:5},l().createElement(T,{schema:k,setSchema:function(e){return d.onChange(D(D({},d.value||{}),{},{schema:P(e)}))},item:O,setItem:A})),l().createElement(m.Col,{span:19},l().createElement(m.Tabs,{defaultActiveKey:"1"},l().createElement(I,{tab:_("字段定义"),key:"1"},l().createElement(p.C,{is:"SchemaEditor",id:null==f?void 0:f.id,editorType:"device",input:{schema:w(k,O),onChange:function(e){var t=C(k,e,O);d.onChange(D(D({},d.value||{}),{},{schema:P(t)}))}}})),l().createElement(I,{tab:_("字段规则"),key:"2"},l().createElement(p.C,{is:"FieldRules",item:{schema:w(k,O),mutualRules:null===(t=d.value)||void 0===t||null===(r=t.mutualRules)||void 0===r?void 0:r[null==O?void 0:O.key],errorNotice:null===(a=d.value)||void 0===a||null===(o=a.errorNotice)||void 0===o?void 0:o[null==O?void 0:O.key]},saveItem:function(e){var t,r,i;e.mutualRules&&d.onChange(D(D({},d.value||{}),{},{mutualRules:D(D({},(null===(t=d.value)||void 0===t?void 0:t.mutualRules)||{}),{},(0,n.Z)({},null==O?void 0:O.key,e.mutualRules))})),e.errorNotice&&d.onChange(D(D({},null!==(r=d.value)&&void 0!==r?r:{}),{},{errorNotice:D(D({},(null===(i=d.value)||void 0===i?void 0:i.errorNotice)||{}),{},(0,n.Z)({},null==O?void 0:O.key,e.errorNotice))})),m.message.success(_("保存成功"))}})))))))},x=function(e){var t,r,n,i,o=e.input,s=parseInt(null===(t=o.name)||void 0===t||null===(r=t.split("["))||void 0===r||null===(n=r[1])||void 0===n||null===(i=n.split("]"))||void 0===i?void 0:i[0]),u="默认"===(0,c.use)("form",(function(e){var t,r,n;return{ioway:null===(t=e.values)||void 0===t||null===(r=t.commands)||void 0===r||null===(n=r[s])||void 0===n?void 0:n.ioway}})).ioway?[{value:"string",label:_t1("字符串")},{value:"number",label:_t1("数字")},{value:"boolean",label:_t1("布尔型")},{value:"array",label:_t1("数组")},{value:"object",label:_t1("对象")},{value:"table",label:_t1("工作表")}]:[{value:"string",label:_t1("字符串")},{value:"number",label:_t1("数字")},{value:"boolean",label:_t1("布尔型")},{value:"select",label:_t1("字符串选择")},{value:"numSelect",label:_t1("数字选择")},{value:"array",label:_t1("数组")},{value:"object",label:_t1("对象")},{value:"table",label:_t1("工作表")}];return l().createElement(m.Select,(0,a.Z)({},o,{options:u}))},M=function(e){var t=e.input,r=useI18n().t,n=l().useState([]),o=(0,i.Z)(n,2),s=o[0],u=o[1];return l().useEffect((function(){(0,c.api)({name:"core/t/schema"}).query({fields:["name","title"],order:{createTime:"DESC"}},{}).then((function(e){var t=e.items;u(t.map((function(e){return{value:e.id,label:e.title}})))})).catch((function(e){return console.error(e)}))}),[]),l().createElement(m.Select,(0,a.Z)({},t,{options:s,optionFilterProp:"label",style:{width:"100%"},placeholder:r("请选择工作表"),allowClear:!0,showSearch:!0}))},B=function(e){var t,r=e.input,n=e.id,a=l().useState([]),o=(0,i.Z)(a,2),s=o[0],u=o[1];return l().useEffect((function(){if(null!=n&&n.device)u(n.device.tags||[]);else if(null!=n&&n._settings){var e;u((null===(e=n._settings.device)||void 0===e?void 0:e.tags)||[])}}),[]),l().createElement(m.Select,{showSearch:!0,allowClear:!0,value:null===(t=r.value)||void 0===t?void 0:t.id,onChange:function(e){return r.onChange(s.find((function(t){return t.id===e})))},options:s.map((function(e){return{value:e.id,label:e.name+"("+e.id+")"}})),filterOption:function(e,t){return t.label.indexOf(e)>=0}})};var L=r(4552);function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var F=function(e){var t=e.schema,r=e.input,n=e.field;return u().isEmpty(null==t?void 0:t.properties)?l().createElement(m.Input,{disabled:!0}):l().useMemo((function(){return l().createElement(d.SchemaForm,{formKey:"device-ops"+(null==n?void 0:n.key),schema:t,initialValues:r.value,onChange:r.onChange,component:function(e){return e.children}})}),[null==n?void 0:n.key])},Z=function(e,t){var r={properties:{ioway:{type:"string",title:_t1(e)+_t1("方式"),enum:["默认"+e,"表单"+e],enum_title:[_t1("默认")+_t1(e),_t1("表单")+_t1(e)]},type:{type:"string",title:_t1(e)+_t1("数据类型")},tag:{type:"object",title:_r("取值数据"),properties:{}},arrayValue:{type:"string",title:_r("数组元素类型"),enum:["string","number","select","numSelect","object","table"],enum_title:[_t1("字符串"),_t1("数字"),_t1("字符串选择"),_t1("数字选择"),_t1("对象"),_t1("工作表")],field:{required:!0}},ifRepeat:{type:"boolean",title:_r("可重复")},select:{type:"object",title:_r("定义选择项"),properties:{enum:{title:_r("值"),type:"array",items:{}},enum_title:{title:_r("名称"),type:"array",items:{}}},field:{required:!0,component:function(e){return l().createElement(_.Z,(0,a.Z)({},e,{table:t}))},validate:function(e){return null!=e&&e.enum&&e.enum.length>new Set(e.enum).size?"选项值不能重复":null}}},defaultValue:{type:"object",title:_r("默认")+e+"值",properties:{},field:{required:!0}},mod:{type:"number",title:_r("缩放比例")},tagValue:{type:"object",title:_r("数值定义"),properties:{minValue:{title:_r("最小值"),type:"number"},maxValue:{title:_r("最大值"),type:"number"},minRaw:{title:_r("原始最小值"),type:"number"},maxRaw:{title:_r("原始最大值"),type:"number"}}},objectValue:{type:"object",title:_r("对象字段"),properties:{},field:{required:!0}},tableValue:{type:"string",title:_r("工作表"),field:{required:!0}},select2:{type:"object",title:_r("数组-定义选择项"),properties:{enum:{title:_r("值"),type:"array",items:{}},enum_title:{title:_r("名称"),type:"array",items:{}}},field:{required:!0,component:function(e){return l().createElement(_.Z,(0,a.Z)({},e,{typeField:"arrayValue"}))},validate:function(e){return null!=e&&e.enum&&e.enum.length>new Set(e.enum).size?"选项值不能重复":null}}},objectValue2:{type:"object",title:"数组-对象字段",properties:{},field:{required:!0}},tableValue2:{type:"string",title:"数组-工作表",field:{required:!0}}},form:["ioway",{key:"type",component:x},{key:"tag",component:function(e){return l().createElement(B,(0,a.Z)({},e,{id:t}))}},"*",{key:"objectValue",component:function(e){return l().createElement(j,(0,a.Z)({},e,{table:t}))}},{key:"tableValue",component:M},{key:"objectValue2",component:function(e){return l().createElement(j,(0,a.Z)({},e,{table:t}))}},{key:"tableValue2",component:M},{key:"defaultValue",component:function(e){var t=(0,c.use)("form",(function(e){return{item:e.values}})).item,r=function(e){return(null==e?void 0:e.type)+(null==e?void 0:e.arrayValue)+JSON.stringify(null==e?void 0:e.select)},n=l().useState(r(t)),o=(0,i.Z)(n,2),s=o[0],u=o[1];return l().useEffect((function(){s!==r(t)&&(u(r(t)),e.input.onChange(null))}),[r(t)]),l().createElement(p.C,(0,a.Z)({is:"Device.CommandValue"},e,{commandV:{formSchema:(0,L.K)(t),commandForms:[N(N({},t),{},{name:"default"})]}}))}}],required:"写入"===e?["ioway","type"]:void 0,formEffect:function(t){t.useField("ioway",(function(r){r.value==="默认"+e?t.setFieldData("defaultValue",{display:!0}):(t.setFieldData("defaultValue",{display:!1}),t.change("defaultValue",null))})),t.useField("type",(function(e){var r=e.value;"select"===r||"numSelect"===r?t.setFieldData("select",{display:!0}):(t.setFieldData("select",{display:!1}),t.change("select",null)),"number"===r||"boolean"===r?(t.setFieldData("mod",{display:!0}),t.setFieldData("tagValue",{display:!0})):(t.setFieldData("mod",{display:!1}),t.setFieldData("tagValue",{display:!1}),t.change("mod",null),t.change("tagValue",null)),["string","number","boolean","select"].indexOf(r)>-1?t.setFieldData("tag",{display:!0}):(t.setFieldData("tag",{display:!1}),t.change("tag",null)),"object"===r?t.setFieldData("objectValue",{display:!0}):(t.setFieldData("objectValue",{display:!1}),t.change("objectValue",null)),"array"===r?t.setFieldData("arrayValue",{display:!0}):(t.setFieldData("arrayValue",{display:!1}),t.change("arrayValue",null)),"table"===r?t.setFieldData("tableValue",{display:!0}):(t.setFieldData("tableValue",{display:!1}),t.change("tableValue",null))})),t.useField("arrayValue",(function(e){var r=e.value;"select"===r||"numSelect"===r?(t.setFieldData("select2",{display:!0}),t.setFieldData("ifRepeat",{display:!0})):(t.setFieldData("select2",{display:!1}),t.setFieldData("ifRepeat",{display:!1}),t.change("select2",null),t.change("ifRepeat",null)),"object"===r?t.setFieldData("objectValue2",{display:!0}):(t.setFieldData("objectValue2",{display:!1}),t.change("objectValue2",null)),"table"===r?t.setFieldData("tableValue2",{display:!0}):(t.setFieldData("tableValue2",{display:!1}),t.change("tableValue2",null))}))}};return"输出"===e&&(r.form=r.form.filter((function(e){return"ioway"!==e&&"tag"!==e.key})),delete r.properties.ioway,delete r.properties.tag),r},U=function(e,t){var r,n,i,a;if(!e)return{};var o=(null==e||null===(r=e.items)||void 0===r?void 0:r.properties)||{},l=u().omit((null==o||null===(n=o.ops)||void 0===n||null===(i=n.items)||void 0===i?void 0:i.properties)||{},["param"]);return{commands:N(N({},e),{},{items:{type:"object",properties:N(N({},u().omit(null==e||null===(a=e.items)||void 0===a?void 0:a.properties,["form"])),{},{name:{type:"string",title:_r("指令名称"),fieldType:"languageInput"},showName:{type:"string",title:_r("显示名称"),fieldType:"languageInput"},retry:{type:"number",title:_r("重试次数"),description:_r("第一次执行指令失败后，可以继续执行指令的次数，定义次数范围内若指令执行成功，若有剩余次数，不会继续重试执行"),field:{validate:function(e){return e&&(/^(0+)|[^\d]+/g.test(e)?"只能为大于0的正整数":null)}}},ops:{type:"object",title:_r("驱动指令配置"),properties:N({},l)},writeIn:N({type:"object",title:_r("数据写入")},Z(_r("写入"),t)),writeOut:N({type:"object",title:_r("数据输出")},Z(_r("输出"),t)),paramsScript:{type:"string",title:_r("指令脚本"),fieldType:"deviceScriptEdit",defaultScript:"\n//".concat(_t1("处理前")," params: map[a:1 b:2]\n//").concat(_t1("处理后")," params: map[a:map[c:1] b:map[c:4]]\n//").concat(_t1("脚本内容")," \"paramsScript\":\nfunction handler(p) {\n    return {'c':p*p};\n}\n            ")}}),form:[{key:"name",validate:function(e){return/^[\u2E80-\u9FFF\w\-\_\#\$\(\)\:]{1,}$/gi.test(e)&&!/^[0-9]+$/.test(e)?null:_r("指令名称必须为汉字、字母、数字、特殊字符#$-_():且不为纯数字")}},"retry","showName",{key:"ops",component:F,group:(0,p.C)("Form.CollapseGroup")},{key:"writeIn",component:F,group:(0,p.C)("Form.CollapseGroup")},{key:"writeOut",component:F,group:(0,p.C)("Form.CollapseGroup")},"paramsScript"],required:["name"]}})}}},5923:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(4942),i=(r(2611),r(7363),r(5907)),a=r(6269);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s=function(){var e=arguments.length>1?arguments[1]:void 0;return e?{events:l(l({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{},{type:"array",title:_r("事件"),items:{type:"object",properties:{id:{type:"string",title:_r("事件标识")},name:{type:"string",title:_r("事件名称")},writeOut:l({type:"object",title:_r("事件数据输出")},(0,a.j0)("输出",e))},required:["id","name"],form:["*",{key:"writeOut",component:a.ZG,group:(0,i.C)("Form.CollapseGroup")}]}})}:{}}},8072:(e,t,r)=>{"use strict";r.d(t,{b:()=>ae,o:()=>ne});var n=r(2982),i=r(885),a=r(7462),o=r(4942),l=r(7363),s=r.n(l),u=r(2611),c=r.n(u),p=r(3078),d=r(8947),m=r(5907),f=r(3204),_=r(1821);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=function(e,t,r,n){var i,a,o=e&&e.substring(e.indexOf("[")+1,e.lastIndexOf("]"));return!(null==t||null===(i=t[o])||void 0===i||null===(a=i[r])||void 0===a||!a.isGlobal||null!=n&&n.isChange)},b=function(e,t,r){var n,i=e&&e.substring(e.indexOf("[")+1,e.lastIndexOf("]"));if(null!=t&&t.isGlobalObj)try{n=(0,p.use)("form",(function(e){var t,n,a,o;return{isGlobalObj:null==e||null===(t=e.values)||void 0===t||null===(n=t.tags)||void 0===n||null===(a=n[i])||void 0===a||null===(o=a[r])||void 0===o?void 0:o.isGlobalObj}})).isGlobalObj}catch(e){console.log(e)}return n},h=function(e){e.label;var t,r,n=e.meta,i=e.input,o=e.field,l=e.children,u=e.type,c=e.field,d=c.name,m=(c.schema,o.attrs||{}),f=n.touched&&n.error,y=v(v({extra:o.description||o.help},{labelCol:{sm:{span:5}},wrapperCol:{sm:{span:19}}}),{},{required:o.required,labelAlign:"right"});f&&(y.validateStatus="error",y.help=f);var g=l||s().createElement(_.Input,(0,a.Z)({},i,m)),b=(0,p.use)("form",(function(e){var t,r,n;return{values:null==e?void 0:e.values,tags:(null==e||null===(t=e.values)||void 0===t?void 0:t.tags)||(null==e||null===(r=e.values)||void 0===r||null===(n=r.device)||void 0===n?void 0:n.tags)}})).tags,h=d&&d.substring(d.indexOf("[")+1,d.lastIndexOf("]"));return s().createElement(s().Fragment,null,null!=b&&null!==(t=b[h])&&void 0!==t&&null!==(r=t[u])&&void 0!==r&&r.isGlobal||(null==i?void 0:i.name)!="tags[".concat(h,"].").concat(u,".isGlobalObj")?s().createElement(_.Form.Item,(0,a.Z)({colon:!1,label:s().createElement("span",null)},y),g):null)},E=function(e){var t,r,n=e.field,i=n.name,a=(n.schema,e.input),o=(a.value,a.onChange),l=e.type,u=(0,p.use)("form",(function(e){var t;return{values:null==e?void 0:e.values,tags:null==e||null===(t=e.values)||void 0===t?void 0:t.tags}})),c=(u.values,u.tags),d=i&&i.substring(i.indexOf("[")+1,i.lastIndexOf("]"));return s().createElement(s().Fragment,null,null!==(t=c[d])&&void 0!==t&&null!==(r=t[l])&&void 0!==r&&r.isGlobal?s().createElement(s().Fragment,null," ",s().createElement("span",{style:{marginRight:"1rem"}},"已应用全局规则，可进行修改单独配置"),s().createElement(_.Popconfirm,{title:s().createElement(s().Fragment,null,s().createElement("p",null,"提示"),s().createElement("p",{style:{width:"240px"}},"修改保存后，当前数据点将会在全局规则处被删除，若想重新应用全局规则，需要全局规则处手动将数据添加回来，确认修改吗？")),onConfirm:function(){var e,t,r;null!==(e=c[d])&&void 0!==e&&e[l]&&o({isGlobal:null===(t=c[d])||void 0===t||null===(r=t[l])||void 0===r?void 0:r.isGlobal,isChange:!0})},onCancel:function(){var e,t;o({isGlobal:null===(e=c[d])||void 0===e||null===(t=e[l])||void 0===t?void 0:t.isGlobal,isChange:!1})},okText:"确定",cancelText:"取消"},s().createElement(_.Button,null,"修改"))):null)},O=function(e){var t=e.field,r=t.name,n=t.schema,i=void 0===n?{}:n,a=e.input,o=a.value,l=a.onChange,u=(a.checked,e.type),c=(0,p.use)("form",(function(e){var t,r,n;return{values:e.values,tags:(null==e||null===(t=e.values)||void 0===t?void 0:t.tags)||(null==e||null===(r=e.values)||void 0===r||null===(n=r.device)||void 0===n?void 0:n.tags)}})).tags,d=b(r,i,u),m=g(r,c,u,d);return s().createElement(s().Fragment,null,s().createElement(_.Checkbox,{onChange:function(e){return l(e.target.checked)},checked:o,disabled:m},null==e?void 0:e.label))},w=function(e){var t=e.field,r=t.name,n=t.schema,i=void 0===n?{}:n,a=e.input,o=a.value,l=a.onChange,u=(a.checked,e.type),c=e.titleMap,d=(0,p.use)("form",(function(e){var t,r,n;return{values:e.values,tags:(null==e||null===(t=e.values)||void 0===t?void 0:t.tags)||(null==e||null===(r=e.values)||void 0===r||null===(n=r.device)||void 0===n?void 0:n.tags)}})).tags,m=b(r,i,u),f=g(r,d,u,m);return s().createElement(s().Fragment,null,s().createElement(_.Radio.Group,{disabled:f,onChange:function(e){return l(e.target.value)},value:o},c.map((function(e){return s().createElement(_.Radio,{value:null==e?void 0:e.value},_t1(null==e?void 0:e.name))}))))},C=function(e){var t=e.field,r=t.name,n=t.schema,i=void 0===n?{}:n,a=e.input,o=a.value,l=a.onChange,u=(a.checked,e.type),c=(e.titleMap,(0,p.use)("form",(function(e){var t,r,n;return{values:e.values,tags:(null==e||null===(t=e.values)||void 0===t?void 0:t.tags)||(null==e||null===(r=e.values)||void 0===r||null===(n=r.device)||void 0===n?void 0:n.tags)}})).tags),d=b(r,i,u),m=g(r,c,u,d);return s().createElement(_.Input,{disabled:m,onChange:function(e){return l(e.target.value)},value:o})},A=function(e){var t=useI18n().t,r=e.field,n=r.name,i=r.schema,a=void 0===i?{}:i,o=e.input,l=o.value,u=o.onChange,c=e.type,d=(e.titleMap,(0,p.use)("form",(function(e){var t,r,n;return{values:e.values,tags:(null==e||null===(t=e.values)||void 0===t?void 0:t.tags)||(null==e||null===(r=e.values)||void 0===r||null===(n=r.device)||void 0===n?void 0:n.tags)}})).tags),m=b(n,a,c),f=g(n,d,c,m);return s().createElement(_.Space,null,s().createElement(_.Input,{disabled:f,type:"number",min:1,style:{width:160},placeholder:t("数值"),onChange:function(e){return u(v(v({},l),{},{count:Number(e.target.value)}))},value:(null==l?void 0:l.count)||null,addonAfter:s().createElement(_.Select,{disabled:f,style:{width:75},onChange:function(e){return u(v(v({},l),{},{unit:e}))},value:null==l?void 0:l.unit},[{key:"分",value:"m"},{key:"秒",value:"s"}].map((function(e){return s().createElement(_.Select.Option,{value:e.value},e.key)})))}))},T=function(e){var t,r=e.input,n=r.onChange,a=r.value,o=(e.field,e.field),l=o.name,u=o.schema,d=void 0===u?{}:u,m=e.type,f=(e.titleMap,(0,p.use)("settings").settings),y=(0,p.use)("form",(function(e){var t,r,n;return{values:e.values,tags:(null==e||null===(t=e.values)||void 0===t?void 0:t.tags)||(null==e||null===(r=e.values)||void 0===r||null===(n=r.device)||void 0===n?void 0:n.tags)}})).tags,v=(null==f||null===(t=f.warning)||void 0===t?void 0:t.warningkind)||[],h=s().useState({loading:!1,options:v}),E=(0,i.Z)(h,2),O=E[0],w=O.loading,C=O.options,A=(E[1],b(l,d,m)),T=g(l,y,m,A),k=(C||[]).map((function(e){return{label:e.name,value:e.id,item:e}}));return s().createElement(_.Select,{disabled:T,value:(c().isString(a)&&a?[a]:a)||void 0,isLoading:w,placeholder:_t1("请选择"),mode:"multiple",style:{minWidth:200},onChange:function(e){c().find(C,(function(t){return t.id==e})),n(e)}},k.map((function(e){return s().createElement(Option,{value:e.value,key:e.value},e.label)})))},k=r(8488),D=r.n(k),I=r(6640);const S=function(e){var t=e.input,r=(e.label,e.field,(0,l.useState)(t.value)),n=(0,i.Z)(r,2),a=n[0],o=n[1];return s().createElement(_.Input,{style:{width:205},value:a,onChange:function(e){return o(e.target.value)},onBlur:function(){return t.onChange(a)},suffix:s().createElement(_.Tooltip,{title:"预期："+D()().format(a||"YYYY-MM-DD HH:mm:ss")},s().createElement(I.EyeOutlined,null))})};function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x=function(e){var t=e.index,r=e.value,n=e.deleteOption,i=e.changeOption,a=e.currTag,l=function(e,r){i(t,(0,o.Z)({},e,r))},u=function(e){i(t,{mode:e})},c=function(e){i(t,{condition:e})},p=function(e){var r=null==e?void 0:e.target.checked;i(t,{defaultCondition:r})},d={number:{min:"最小值",max:"最大值"},delta:(0,o.Z)({min:"最小偏差"},"min","最大偏差")};return s().useMemo((function(){var e,i,o,m,f;return s().createElement(_.Row,{gutter:[16,16],style:{marginTop:10}},"boundary"==(null==a||null===(e=a.range)||void 0===e?void 0:e.active)&&"invalid"!=(null==a||null===(i=a.range)||void 0===i?void 0:i.method)?s().createElement(_.Col,{flex:"80px"},s().createElement(_.Checkbox,{style:{marginTop:"0.3rem"},checked:null==r?void 0:r.defaultCondition,onChange:p},s().createElement(_.Tooltip,{title:"设定为默认条件时，该条件作为边界值的计算依据"},"默认"))):null,s().createElement(_.Col,{span:4},s().createElement(_.Select,{style:{width:"100%"},value:null==r?void 0:r.mode,onChange:u,options:[{value:"number",label:"数值"},{value:"rate",label:"变化率"},{value:"delta",label:"差值"}]})),s().createElement(_.Col,{span:4},s().createElement(_.Select,{style:{width:"100%"},value:null==r?void 0:r.condition,onChange:c,options:[{value:"range",label:"范围内"},{value:"greater",label:"大于"},{value:"less",label:"小于"}]})),"range"==(null==r?void 0:r.condition)?s().createElement(s().Fragment,null,s().createElement(_.Col,{span:4},s().createElement(_.InputNumber,{value:null==r?void 0:r.minValue,style:{width:"100%"},addonAfter:"rate"==(null==r?void 0:r.mode)?"%":null,placeholder:(null===(o=d[null==r?void 0:r.mode])||void 0===o?void 0:o.min)||"最小值",onChange:function(e){return l("minValue",e)}})),s().createElement("span",{style:{display:"inline-block",marginTop:"0.3rem"}},"~"),s().createElement(_.Col,{span:4},s().createElement(_.InputNumber,{value:null==r?void 0:r.maxValue,style:{width:"100%"},addonAfter:"rate"==(null==r?void 0:r.mode)?"%":null,placeholder:(null===(m=d[null==r?void 0:r.mode])||void 0===m?void 0:m.max)||"最大值",onChange:function(e){return l("maxValue",e)}}))):s().createElement(_.Col,{span:4},s().createElement(_.InputNumber,{placeholder:"输入值",value:null==r?void 0:r.value,style:{width:"100%"},addonAfter:"rate"==(null==r?void 0:r.mode)?"%":null,onChange:function(e){return l("value",e)}})),"invalid"==(null==a||null===(f=a.range)||void 0===f?void 0:f.method)?s().createElement(_.Col,{span:4},s().createElement(_.Input,{placeholder:"无效类型描述",value:null==r?void 0:r.invalidType,style:{width:"100%"},onChange:function(e){var t=e.target;return l("invalidType",null==t?void 0:t.value)}})):null,s().createElement(_.Col,{span:1},s().createElement(I.MinusCircleOutlined,{style:{fontSize:"18px",margin:"7px"},onClick:function(){return n(t)}})))}),[r,a])},M={mode:"number",condition:"range",defaultCondition:!0};const B=function(e){var t,r,a,o,l,u,d,f,y=e.input,v=y.value,g=y.onChange,b=e.field,h=(0,p.use)("form",(function(e){var t=e.values;return{tags:null==t?void 0:t.tags}})),E=h.form,O=h.tags,w=function(e,t,r){var n,i,a=null==r||null===(n=r.key)||void 0===n?void 0:n.replace("conditions","active"),o=null==r||null===(i=r.key)||void 0===i?void 0:i.replace("conditions","fixedValue");return e&&"[object Object]"===Object.prototype.toString.call(e)?((null==e?void 0:e.active)&&t.change(a,null==e?void 0:e.active),(null==e?void 0:e.fixedValue)&&t.change(o,null==e?void 0:e.fixedValue),[{condition:"range",defaultCondition:!0,maxValue:null==e?void 0:e.maxValue,minValue:null==e?void 0:e.minValue,mode:"number"}]):e}(v,E,b),C=s().useState(w),A=(0,i.Z)(C,2),T=A[0],k=A[1],D=c().get({tags:O},null==b||null===(t=b.key)||void 0===t?void 0:t.replace(".range.conditions","")),I=null==b||null===(r=b.key)||void 0===r?void 0:r.replace("conditions","minValue"),S=null==b||null===(a=b.key)||void 0===a?void 0:a.replace("conditions","maxValue"),P=c().get({tags:O},I),B=c().get({tags:O},S),L=null==D||null===(o=D.range)||void 0===o?void 0:o.active;s().useEffect((function(){(P||B)&&k([{mode:"number",condition:"range",minValue:P,maxValue:B,defaultCondition:!0,value:0}])}),[]);var R=function(e){k((function(t){var r=(0,n.Z)(t);return 1==r.length&&r[e]&&(r[e].defaultCondition=!0),r.length>0&&r[e]&&"boundary"==L&&t.some((function(e){return 1==(null==e?void 0:e.defaultCondition)}))&&(r[0].defaultCondition=!0),r.splice(e,1),g(r),r}))},N=function(e){g(e),(P||B)&&(E.change(I,null),E.change(S,null))},F=function(e,t){!1!==(null==t?void 0:t.defaultCondition)&&(null!=t&&t.defaultCondition?k((function(t){var r=(0,n.Z)(t).map((function(e){return j(j({},e),{},{defaultCondition:!1})}));return r[e].defaultCondition=!0,N(r),r})):k((function(r){var i=(0,n.Z)(r);return i[e]=j(j({},i[e]),t),N(i),i})))},Z=T&&(null==T||null===(l=T.filter((function(e){return"range"==(null==e?void 0:e.condition)})))||void 0===l?void 0:l.every((function(e){return!c().isNil(e.minValue)&&!c().isNil(e.maxValue)}))),U=T&&(null==T||null===(u=T.filter((function(e){return"range"==(null==e?void 0:e.condition)})))||void 0===u?void 0:u.every((function(e){return(null==e?void 0:e.minValue)<(null==e?void 0:e.maxValue)}))),W="boundary"==L&&T&&(null==T?void 0:T.some((function(e){return 1==(null==e?void 0:e.defaultCondition)}))),q="invalid"==(null==D||null===(d=D.range)||void 0===d?void 0:d.method)&&T&&(null==T?void 0:T.every((function(e){return null==e?void 0:e.invalidType})));return s().createElement(s().Fragment,null,s().createElement(_.Button,{type:"primary",style:{marginTop:2},onClick:function(){k((function(e){var t=[].concat((0,n.Z)((e||[]).map((function(e){return e&&j(j({},e),{},{defaultCondition:!1})}))),[M]);return g(t),t}))}},s().createElement(m.Icon,{type:"plus"}),"添加数据范围"),T&&T.length>0?T.map((function(e,t){return s().createElement(x,{key:t,index:t,value:e,currTag:D,changeOption:F,deleteOption:R})})):null,v&&!Z&&s().createElement("p",{style:{color:"red",marginTop:"0.3rem"}},"请完整填写范围值"),v&&Z&&!U&&s().createElement("p",{style:{color:"red",marginTop:"0.3rem"}},"请完整检查大小范围值，最小范围不能大于等于最大范围"),v&&Z&&!q&&"invalid"==(null==D||null===(f=D.range)||void 0===f?void 0:f.method)&&s().createElement("p",{style:{color:"red",marginTop:"0.3rem"}},"请填写无效类型描述"),T&&"boundary"==L&&!W&&s().createElement("p",{style:{color:"red",marginTop:"0.3rem"}},"当动作为边界值时，必须选一条默认执行的数据"))};function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var N=function(e){var t=e.children,r=e.invalid,n=e.handleSubmit,i=(e.showCode,e.submitting),a=p.app.context._t;return s().createElement(_.Form,{onSubmit:n},s().createElement(_.Card,{style:{marginTop:0,borderTop:"none",color:"#333"}},t,s().createElement(_.Row,{style:{display:"flex",justifyContent:"right",alignItems:"center"}},s().createElement(_.Button,{type:"primary",disabled:r,loading:i,onClick:n,htmlType:"submit"},a("确定")))))};const F=function(e){var t=useI18n().t,r=e.input,n=r.value,a=r.onChange,o=e.tableId,l=e.id,u=(e.fields,e.field,e.option,s().useState(!1)),c=(0,i.Z)(u,2),p=c[0],d=c[1],m={title:_r("配置"),type:"object",properties:R({},ne(l,o))};return s().createElement(s().Fragment,null,s().createElement(_.Button,{onClick:function(){return d(!0)}},t("配置")),s().createElement(_.Modal,{width:"80%",visible:p,onOk:function(){return d(!1)},onCancel:function(){d(!1)},footer:null},s().createElement(f.SchemaForm,{formKey:"warn_setting",schema:m,component:N,onSubmit:function(e){return function(e){a(e),d(!1)}(e)},initialValues:n})))};function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var W=function(e){var t=e.label,r=e.meta,n=e.input,i=e.field,o=e.children,l=(e.type,e.field),u=(l.name,l.schema,i.attrs||{}),c=r.touched&&r.error,p=i.description||i.help,d=i.descriptionType,m=U(U({extra:p},{labelCol:{sm:{span:5}},wrapperCol:{sm:{span:19}}}),{},{required:i.required,labelAlign:"right"});c&&(m.validateStatus="error",m.help=c);var f=o||s().createElement(_.Input,(0,a.Z)({},n,u)),y=t&&s().createElement(s().Fragment,null,s().createElement("span",{style:{marginRight:p&&"2px"}},t),!d&&p&&s().createElement(_.Tooltip,{placement:"bottom",title:p},s().createElement(I.QuestionCircleOutlined,{className:"label-des",style:{color:"rgba(0,0,0,.45)",marginRight:p&&"2px"}}))),v=["lowSetting","llowSetting","highSetting","hhighSetting"].filter((function(e){return i.key.includes(e)}))||[];return s().createElement(s().Fragment,null,(null==v?void 0:v.length)>0?s().createElement(_.Form.Item,(0,a.Z)({colon:!1},m),f):s().createElement(_.Form.Item,(0,a.Z)({colon:!1,label:y},m),f))},q=function(e,t){var r=e.slice(8);return s().createElement(s().Fragment,null,s().createElement(_.Row,null,s().createElement(_.Col,{span:10,style:{paddingLeft:170}},(0,f.fieldBuilder)(e[0],t)),s().createElement(_.Col,{span:14},(0,f.fieldBuilder)(e[5],t))),s().createElement(_.Row,null,s().createElement(_.Col,{span:10,style:{paddingLeft:170}},(0,f.fieldBuilder)(e[1],t)),s().createElement(_.Col,{span:14},(0,f.fieldBuilder)(e[4],t))),s().createElement(_.Row,null,s().createElement(_.Col,{span:10,style:{paddingLeft:170}},(0,f.fieldBuilder)(e[2],t)),s().createElement(_.Col,{span:14},(0,f.fieldBuilder)(e[7],t))),s().createElement(_.Row,null,s().createElement(_.Col,{span:10,style:{paddingLeft:170}},(0,f.fieldBuilder)(e[3],t)),s().createElement(_.Col,{span:14},(0,f.fieldBuilder)(e[6],t))),r.map((function(e){return(0,f.fieldBuilder)(e,t)})))},V=r(4414),z=function(e){var t,r,n,o,l=e.input,u=(e.label,e.field),c=(0,p.use)("settings").settings,d=null==c||null===(t=c.warning)||void 0===t?void 0:t.warningkind,m=d&&null!=d&&d.length?null===(r=d.filter((function(e){return"数值超限"==e.name})))||void 0===r?void 0:r[0]:{},f=(0,p.use)("form",(function(e){var t,r,n;return{values:e.values,tags:(null==e||null===(t=e.values)||void 0===t?void 0:t.tags)||(null==e||null===(r=e.values)||void 0===r||null===(n=r.device)||void 0===n?void 0:n.tags)}})),y=f.tags,v=f.formState,g=(f.form,u.name),b=(u.option,!!m&&m[g.substr(g.lastIndexOf(".")+1)]),h=s().useState(),E=(0,i.Z)(h,2),O=E[0],w=E[1];return s().useEffect((function(){if(g&&y&&null!=y&&y.length){var e,t,r,n=g&&g.substring(g.indexOf("[")+1,g.lastIndexOf("]")),i=null===(e=y[n])||void 0===e||null===(t=e.rules)||void 0===t||null===(r=t.globalSetting)||void 0===r?void 0:r.alert;null==i?(l.onChange(b),w(b)):(w(i),l.onChange(i))}else{var a,o;null==(null==v||null===(a=v.values)||void 0===a?void 0:a.alert)?l.onChange(b):l.onChange(null==v||null===(o=v.values)||void 0===o?void 0:o.alert)}}),[JSON.stringify(y)]),s().createElement(_.Checkbox,(0,a.Z)({onChange:function(e){w(e.target.checked),l.onChange(e.target.checked)}},u.attrs,{checked:null!=y&&y.length?O:null==(null==v||null===(n=v.values)||void 0===n?void 0:n.alert)?b:(null==v||null===(o=v.values)||void 0===o?void 0:o.alert)||l.checked}))},G=function(e){var t,r,n,o,l=e.input,u=(e.label,e.field),c=(0,p.use)("settings").settings,d=null==c||null===(t=c.warning)||void 0===t?void 0:t.warningkind,m=d&&d.length?null===(r=d.filter((function(e){return"数值超限"==e.name})))||void 0===r?void 0:r[0]:{},f=(0,p.use)("form",(function(e){var t,r,n;return{values:e.values,tags:(null==e||null===(t=e.values)||void 0===t?void 0:t.tags)||(null==e||null===(r=e.values)||void 0===r||null===(n=r.device)||void 0===n?void 0:n.tags)}})),y=f.tags,v=f.formState,g=(f.form,u.name),b=(u.option,!!m&&m[g.substr(g.lastIndexOf(".")+1)]),h=s().useState(),E=(0,i.Z)(h,2),O=E[0],w=E[1];return s().useEffect((function(){if(g&&y&&null!=y&&y.length){var e,t,r,n=g&&g.substring(g.indexOf("[")+1,g.lastIndexOf("]")),i=null===(e=y[n])||void 0===e||null===(t=e.rules)||void 0===t||null===(r=t.globalSetting)||void 0===r?void 0:r.handle;null==i?(l.onChange(b),w(b)):(w(i),l.onChange(i))}else{var a,o;null==(null==v||null===(a=v.values)||void 0===a?void 0:a.handle)?l.onChange(b):l.onChange(null==v||null===(o=v.values)||void 0===o?void 0:o.handle)}}),[JSON.stringify(y)]),s().createElement(_.Checkbox,(0,a.Z)({onChange:function(e){w(e.target.checked),l.onChange(e.target.checked)}},u.attrs,{checked:null!=y&&y.length?O:null==(null==v||null===(n=v.values)||void 0===n?void 0:n.handle)?b:(null==v||null===(o=v.values)||void 0===o?void 0:o.handle)||l.checked}))};function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const H=function(e){var t=e.input,r=e.label,n=e.field,a=e.defaultValue,l=s().useState(!1),u=(0,i.Z)(l,2),c=u[0],p=u[1],d=s().useState(t.value),f=(0,i.Z)(d,2),y=f[0],v=f[1];s().useEffect((function(){v(t.value)}),[t.value]);var g=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({roundedSelection:!1,readOnly:!1,minimap:{enabled:!1},cursorStyle:"line",automaticLayout:!1},n.editor||{});return s().createElement(s().Fragment,null,s().createElement(_.Button,{type:"default",size:"small",onClick:function(e){return p(!0)}},s().createElement(m.Icon,{type:"code"}),_t1("编辑脚本")),s().createElement(_.Modal,{title:_t1(r),visible:c,maskClosable:!1,width:"80%",onOk:function(e){t.onChange(y),p(!1)},onCancel:function(e){return p(!1)},okText:_t1("确定"),cancelText:_t1("取消")},s().createElement(m.C,{is:"CodeEditor",language:"javascript",value:y&&""!=y?y:null,width:"100%",height:"600",options:g,defaultValue:a,onChange:v})))};function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $=function(e,t){return e.map((function(e){return(0,f.fieldBuilder)(e,t)}))},Q=function(e,t,r){var n=p.app.get("form_fields"),i=e.filter((function(e){return void 0===e.type||void 0!==n[e.type]})).map((function(e){return J(J(J({},n[e.type||"text"]),e),{},{option:r})}));return(t||$)(i,r)},X=function(e){var t=e.field,r=e.option;return Q(t.fields,q,J({},r))},ee=function(e){var t=new RegExp(/\s+/g);return/^[0-9]*$/.test(e)?"allNumber":!!(/[`~!@#%^&*()+<>?"{},.\/;'[\]]/.test(e)||/[·！#￥（——）：；“”‘、，|《。》？、【】[\]]/.test(e)||t.test(e))},te=function(e){var t=e.field,r=e.option;return(0,f.objectBuilder)(t.fields,t.render,J({},r))},re=function(e){var t=useI18n().t,r=e.fields,n=e.option,i=(0,p.use)("form",(function(e){return{values:e.values,emulator:e.values.emulator}})),a=(i.values,i.emulator),o=r.reduce((function(e,t){var r=t.name.lastIndexOf(".");return e[t.name.substring(r+1)]=t,e}),{});return s().createElement(_.Tabs,{tabPosition:"top",tabBarExtraContent:[]},s().createElement(_.Tabs.TabPane,{tab:t("基本属性"),key:"base"},Object.keys(o).map((function(e){var r=e.indexOf("."),i=e.substring(r+1);return["tagValue","rules","emulator","sameValueWarn","timeoutWarn","timeFormat","range"].indexOf(i)>=0?null:("id"==e&&(o.id.description=t("标识唯一，包含汉字、字母、数字、特殊字符$-_:"),o.id.validate=function(e,r){var n,i=(null==r?void 0:r.tags)||(null==r||null===(n=r.device)||void 0===n?void 0:n.tags);return(null==i?void 0:i.filter((function(t){return t.id==e})).length)>1?t("当前表下数据点标识已存在"):!0===ee(e)?t("标识格式有误，请按照限制格式填写内容！"):"allNumber"===ee(e)?t("标识不能为纯数字"):void 0}),"name"==e&&(o.name.validate=function(e,r){var n,i=(null==r?void 0:r.tags)||(null==r||null===(n=r.device)||void 0===n?void 0:n.tags);return(null==i?void 0:i.filter((function(t){return(null==t?void 0:t.name)==e})).length)>1?t("当前表下数据点名称已存在"):null}),(0,f.fieldBuilder)(o[e],n))}))),o.tagValue?s().createElement(_.Tabs.TabPane,{tab:t("数值转换"),key:"value"},(0,f.fieldBuilder)(o.tagValue,n)):null,s().createElement(_.Tabs.TabPane,{tab:t("报警规则"),key:"warning"},o.rules&&(0,f.fieldBuilder)(o.rules,n)),s().createElement(_.Tabs.TabPane,{tab:t("数据处理"),key:"数据处理"},Object.keys(o).map((function(e){return["range"].indexOf(e)>=0?(0,f.fieldBuilder)(o[e],n):null}))),a?s().createElement(_.Tabs.TabPane,{tab:t("数值仿真"),key:"emulator"},o.emulator&&(0,f.fieldBuilder)(o.emulator,n)):null,s().createElement(_.Tabs.TabPane,{tab:t("其它报警"),key:"other"},Object.keys(o).map((function(e){return["sameValueWarn","timeoutWarn"].indexOf(e)>=0?(0,f.fieldBuilder)(o[e],n):null}))),s().createElement(_.Tabs.TabPane,{tab:t("时间戳"),key:"timeFormat"},Object.keys(o).map((function(e){return["timeFormat"].indexOf(e)>=0?(0,f.fieldBuilder)(o[e],n):null}))))},ne=function(e,t,r){var n={interval:{title:_r("报警间隔(s)"),type:"number",minimum:1,description:_r("在定义的时间范围内，对同一资产同一条报警规则产生的报警进行合并，只展示一条报警消息")},delay:{title:_r("延时提醒时长(s)"),minimum:1,description:_r("若设置延时提醒时长，产生报警，经过设定时长后进行第一次报警提醒"),field:{extendFlow:{show:!0,limit:["number"],mode:"single"},component:function(e){return s().createElement(m.C,(0,a.Z)({is:"PropListPane"},e))}}},delayTriggerLimit:{title:_r("报警计次"),type:"number",minimum:1,driver:"senior"},deadZone:{title:_r("报警死区"),type:"number",minimum:1,description:_r("定义报警恢复数值与报警数值之间的波动范围")},audio:{title:_r("报警声音"),description:_r("仅支持MP3、WAV格式"),type:"string",fieldType:"media_modal",field:{uploadType:"audio"}},timesOfPlay:{title:_r("播放次数"),type:"number",minimum:1,description:_r("报警声音播放次数，不填为仅一次")},alert:{title:_r("报警提醒"),type:"boolean",field:{component:function(e){return s().createElement(z,e)}},description:_r("开启后报警声音提醒及报警数据量的更新")},handle:{title:_r("报警处理"),type:"boolean",field:{component:function(e){return s().createElement(G,e)},effect:function(e,t){var r=e.name,n=e.value,i=r.replace("handle","timeoutSetting");setTimeout((function(){n?t.setFieldData(i,{display:!0}):(t.setFieldData(i,{display:!1}),t.change(i,null))}))}},description:_r("开启后可对报警信息进行报警确认及报警处理的操作")},timeoutSetting:{title:_r("超时处理"),type:"object",properties:{},field:{component:function(e){return s().createElement(m.C,(0,a.Z)({is:"UserOverTime"},e,{initValue:!1,customOption:[{key:_t1("天"),value:"d"},{key:_t1("小时"),value:"h"},{key:_t1("分"),value:"m"}]}))}},description:_r("产生的报警信息超过设定时间后，默认为已处理状态")},triggerLimit:{title:_r("报警次数"),type:"number",minimum:1,description:_r("配置报警次数后，触发报警条件产生的报警提示信息达到设定次数，将不会新的产生报警消息，当报警恢复后，重新计算次数；")},executionSetting:{title:_r("报警有效期"),type:"object",properties:{},field:{component:function(e){var t,r=e.input,n=useI18n().t,o=s().useState((null==r||null===(t=r.value)||void 0===t?void 0:t.executionType)||{}),l=(0,i.Z)(o,2),u=l[0],c=l[1];return s().createElement(_.Card,null,s().createElement("div",{style:{padding:"1rem 0"}},s().createElement(_.Checkbox,{onChange:function(e){r.onChange(J(J({},r.value),{},{disable:!e.target.checked}))},checked:!(null!=r&&r.value.disable)},n("启用"))),s().createElement("div",{style:null!=r&&r.value.disable?{display:"none"}:{}},s().createElement(m.C,(0,a.Z)({is:"ExecutionType"},e,{input:{onChange:function(e){var t,n;t=e,n=(0,V.B)({executionType:t}),c(null==n?void 0:n.executionType),r.onChange(J(J({},null==r?void 0:r.value),n))},value:u}})),s().createElement("div",{style:{marginTop:"1rem"}},(0,V.I)({executionType:u}))))}},description:_r("配置有效期后，只会在有效期间产生报警信息")}};return null!=e&&e._table||(n.blockSetting={title:_r("范围限定"),type:"object",properties:{disable:{type:"boolean",title:_r("启用"),field:{effect:function(e,t,r){var n=e.value,i=null==r?void 0:r.key.replace("disable","type"),a=null==r?void 0:r.key.replace("disable","blockList");setTimeout((function(){n?(t.setFieldData("".concat(i),{display:!1}),t.setFieldData("".concat(a),{display:!1})):(t.setFieldData("".concat(i),{display:!0}),t.setFieldData("".concat(a),{display:!0}))}))},component:function(e){var t=e.input,r=t.onChange,n=t.value;return t.checked,s().createElement(s().Fragment,null,s().createElement(_.Checkbox,{onChange:function(e){return r(!e.target.checked)},checked:!n}))}}},type:{title:_r("类型"),type:"string",enum:["black","white"],enum_title:["黑名单","白名单"],enum_type:"tab"},blockList:{title:_r("设备"),type:"array",items:{properties:{id:{type:"string"},name:{type:"string"}}},field:{table:t,multiple:!0,component:function(e){return s().createElement(m.C,(0,a.Z)({is:"Common.SelectTableRecord"},e,{table:t,multiple:!0}))}}}}}),n.disable={title:_r("禁用"),type:"boolean",description:_r("禁用后当前报警规则不生效")},n},ie=function(e){return s().createElement(H,(0,a.Z)({},e,{defaultValue:"\n  (number) => {\n    // console.log(number)\n    return number \n  }"}))},ae=function(e,t){var r=null!=t&&t._table?null==t?void 0:t._table:null==t?void 0:t.id,i=null!=t&&t._table?null==t?void 0:t.id:null;return null!=e&&e.items?{tags:J(J({},e),{},{items:J(J({},e.items),{},{properties:J(J({},e.items.properties),{},{valFormat:{type:"string",title:_r("数据值展示形式"),enum:["round","carryUp","slice","hexadecimal","scientific","script"],enum_title:[_r("四舍五入"),_r("向上进位"),_r("按位展示"),_r("十六进制"),_r("科学计数法"),_r("自定义脚本")],field:{effect:function(e,t){var r=e.value,n=e.name;setTimeout((function(){var e=n.replace(".valFormat",".formatScript");"script"==r?t.setFieldData(e,{display:!0}):t.setFieldData(e,{display:!1})}))}}},formatScript:{title:_r("数据值展示脚本"),type:"string",field:{component:ie}},polish:{title:_r("小数补零"),type:"boolean"},rules:{type:"object",title:_r("数值报警"),properties:{low:{title:_r("低"),type:"number",description:_r("低于该值产生中级报警")},llow:{title:_r("低低"),type:"number",description:_r("低于该值产生高级报警")},high:{title:_r("高"),type:"number",description:_r("高于该值产生中级报警")},hhigh:{title:_r("高高"),type:"number",description:_r("高于该值产生高级报警")},llowSetting:{title:_r("配置"),type:"object",properties:J({},ne(t,r,i)),field:{component:function(e){return s().createElement(F,(0,a.Z)({},e,{id:t,tableId:r}))},group:function(e){return s().createElement(W,e)}}},lowSetting:{title:_r("配置"),type:"object",properties:J({},ne(t,r,i)),field:{component:function(e){return s().createElement(F,(0,a.Z)({},e,{id:t,tableId:r}))},group:function(e){return s().createElement(W,e)}}},hhighSetting:{title:_r("配置"),type:"object",properties:J({},ne(t,r,i)),field:{component:function(e){return s().createElement(F,(0,a.Z)({id:t},e,{tableId:r}))},group:function(e){return s().createElement(W,e)}}},highSetting:{title:_r("配置"),type:"object",properties:J({},ne(t,r,i)),field:{component:function(e){return s().createElement(F,(0,a.Z)({},e,{id:t,tableId:r}))},group:function(e){return s().createElement(W,e)}}},globalSetting:{title:_r("通用配置"),type:"object",properties:J({},ne(t,r,i))}}},disabled:{type:"boolean",title:_r("不启用")},unit:{type:"string",title:_r("单位")},policy:{type:"string",title:_r("保存策略"),enum:["save","change","drop","period"],enum_title:[_r("每次存储"),_r("变化存储"),_r("不存储"),_r("周期存储")],description:_r("数据点保存到数据库的保存策略"),field:{effect:function(e,t){var r=e.value,n=e.name;setTimeout((function(){"period"==r?t.setFieldData(n.replace(".policy",".interval"),{display:!0}):(t.setFieldData(n.replace(".policy",".interval"),{display:!1}),t.change(n.replace(".policy",".interval"),void 0))}))}}},interval:{title:_r("周期存储"),minimum:0,field:{component:function(e){var t=e.input,r=e.field;return s().createElement(_.InputNumber,(0,a.Z)({precision:0,input:t},t,r.attrs,{max:999999,addonAfter:"秒",style:{width:"200px"}}))}}},range:{type:"object",title:_r("范围"),field:{group:m.C.lazy("Form.SimpleGroup")},properties:{method:{type:"string",title:_r("范围类型"),enum:["valid","invalid"],enum_title:[_r("有效范围"),_r("无效范围")],field:{group:m.C.lazy("Form.SimpleGroup"),effect:function(e,t,r){var n=e.value,i=null==r?void 0:r.key.replace("method","active");setTimeout((function(){"invalid"===n?t.setFieldData(i,{field:{titleMap:[{name:_r("固定值"),value:"fixed"},{name:_r("丢弃"),value:"discard"},{name:_r("最新有效值"),value:"latest"}]}}):t.setFieldData(i,{field:{titleMap:[{name:_r("固定值"),value:"fixed"},{name:_r("边界值"),value:"boundary"},{name:_r("丢弃"),value:"discard"},{name:_r("最新有效值"),value:"latest"}]}})}))}}},conditions:{type:"array",title:_r("数据范围"),items:{properties:{}},field:{component:B,validate:function(e,t,r){if(e){var n,i,a,o=c().get(t,null==r||null===(n=r.name)||void 0===n?void 0:n.replace(".range.conditions","")),l=e&&e.filter((function(e){return"range"==(null==e?void 0:e.condition)})).every((function(e){return!c().isNil(e.minValue)&&!c().isNil(e.maxValue)})),s=e&&e.filter((function(e){return"range"==(null==e?void 0:e.condition)})).every((function(e){return(null==e?void 0:e.minValue)<(null==e?void 0:e.maxValue)})),u="invalid"==(null==o||null===(i=o.range)||void 0===i?void 0:i.method)&&e&&(null==e?void 0:e.every((function(e){return null==e?void 0:e.invalidType})));return l?l&&!s?_r("请完整检查大小范围值，最小范围不能大于等于最大范围"):"invalid"==(null==o||null===(a=o.range)||void 0===a?void 0:a.method)&&l&&!u?_r("请填写无效类型描述"):null:_r("请完整填写范围值")}}}},active:{title:"动作",type:"string",enum:["fixed","boundary","discard","latest"],enum_title:[_r("固定值"),_r("边界值"),_r("丢弃"),_r("最新有效值")],field:{formEffect:function(e,t){var r=t.field.name,n=(t.values,r.replace("active","fixedValue"));setTimeout((function(){e.setFieldData(n,{display:!0}),e.useField(r,(function(t){"fixed"==t.value?e.setFieldData(n,{display:!0}):(e.setFieldData(n,{display:!1}),e.change(n,void 0))}))}),50)}}},fixedValue:{type:"number",title:_r("固定值")},invalidAction:{type:"string",title:_r("保存无效数据值"),field:{component:function(e){var t=e.input,r=t.onChange,n=t.value,i=(t.checked,"save"==n);return s().createElement(_.Checkbox,{onChange:function(e){r(e.target.checked?"save":"")},checked:i})}}}},required:["method","conditions","active"]},errview:{type:"string",title:_r("超时显示"),enum:[_r("不显示当前值"),_r("显示当前值")]},sameValueWarn:{type:"object",title:_r("同数据报警"),description:_r("设定时长内上数相同时所产生的报警，开启时所有项必填"),properties:{show:{title:_r("开启"),type:"boolean",field:{effect:function(e,t,r){var n=e.value,i=r.key.substr(0,r.key.lastIndexOf(".")),a=["level","warnType","description","warnIntervalObj"];setTimeout((function(){n?a.forEach((function(e){t.setFieldData("".concat(i,".").concat(e),{display:!0,required:!0})})):a.forEach((function(e){t.setFieldData("".concat(i,".").concat(e),{display:!1,required:!1})}))}))}}},isGlobalObj:{title:_r("全局规则同步"),type:"object"},level:{title:_r("报警级别"),type:"string",enum:[_r("低"),_r("中"),_r("高")],enum_title:[_r("低"),_r("中"),_r("高")]},warnType:{title:_r("报警类型")},description:{title:_r("报警描述"),type:"string"},warnIntervalObj:{title:_r("时长"),type:"object",properties:{count:{title:_r("数值"),type:"number"},unit:{title:_r("单位"),type:"string"}}}},form:[{key:"isGlobalObj",component:function(e){return s().createElement(E,(0,a.Z)({},e,{type:"sameValueWarn"}))},group:function(e){return s().createElement(h,(0,a.Z)({},e,{type:"sameValueWarn"}))}},{key:"show",component:function(e){return s().createElement(O,(0,a.Z)({},e,{type:"sameValueWarn",field:J(J({},e.field),{},{schema:J(J({},e.field.schema),{},{isGlobalObj:"isGlobalObj"})})}))},group:h},{key:"level",component:function(e){return s().createElement(w,(0,a.Z)({},e,{type:"sameValueWarn",field:J(J({},e.field),{},{schema:J(J({},e.field.schema),{},{isGlobalObj:"isGlobalObj"})})}))}},{key:"warnType",component:function(e){return s().createElement(T,(0,a.Z)({},e,{type:"sameValueWarn",field:J(J({},e.field),{},{schema:J(J({},e.field.schema),{},{isGlobalObj:"isGlobalObj"})})}))}},{key:"description",component:function(e){return s().createElement(C,(0,a.Z)({},e,{type:"sameValueWarn",field:J(J({},e.field),{},{schema:J(J({},e.field.schema),{},{isGlobalObj:"isGlobalObj"})})}))}},{key:"warnIntervalObj",component:function(e){return s().createElement(A,(0,a.Z)({},e,{type:"sameValueWarn",field:J(J({},e.field),{},{schema:J(J({},e.field.schema),{},{isGlobalObj:"isGlobalObj"})})}))}}]},timeoutWarn:{type:"object",title:_r("不上数报警"),description:_r("设定时长内不上数所产生的报警，开启时所有项必填"),properties:{show:{title:_r("开启"),type:"boolean",field:{effect:function(e,t,r){var n=e.value,i=r.key.substr(0,r.key.lastIndexOf(".")),a=["level","warnType","description","warnIntervalObj"];setTimeout((function(){n?a.forEach((function(e){t.setFieldData("".concat(i,".").concat(e),{display:!0,required:!0})})):a.forEach((function(e){t.setFieldData("".concat(i,".").concat(e),{display:!1,required:!1})}))}))}}},isGlobalObj:{title:_r("全局规则同步"),type:"object"},level:{title:_r("报警级别"),type:"string",enum:[_r("低"),_r("中"),_r("高")],enum_title:[_r("低"),_r("中"),_r("高")]},warnType:{title:_r("报警类型")},description:{title:_r("报警描述"),type:"string"},warnIntervalObj:{title:_r("时长"),type:"object",properties:{count:{title:_r("数值"),type:"number"},unit:{title:_r("单位"),type:"string"}}}},form:[{key:"isGlobalObj",component:function(e){return s().createElement(E,(0,a.Z)({},e,{type:"timeoutWarn"}))},group:function(e){return s().createElement(h,(0,a.Z)({},e,{type:"timeoutWarn"}))}},{key:"show",component:function(e){return s().createElement(O,(0,a.Z)({},e,{type:"timeoutWarn",field:J(J({},e.field),{},{schema:J(J({},e.field.schema),{},{isGlobalObj:"isGlobalObj"})})}))},group:h},{key:"level",component:function(e){return s().createElement(w,(0,a.Z)({},e,{type:"timeoutWarn",field:J(J({},e.field),{},{schema:J(J({},e.field.schema),{},{isGlobalObj:"isGlobalObj"})})}))}},{key:"warnType",component:function(e){return s().createElement(T,(0,a.Z)({},e,{type:"timeoutWarn",field:J(J({},e.field),{},{schema:J(J({},e.field.schema),{},{isGlobalObj:"isGlobalObj"})})}))}},{key:"description",component:function(e){return s().createElement(C,(0,a.Z)({},e,{type:"timeoutWarn",field:J(J({},e.field),{},{schema:J(J({},e.field.schema),{},{isGlobalObj:"isGlobalObj"})})}))}},{key:"warnIntervalObj",component:function(e){return s().createElement(A,(0,a.Z)({},e,{type:"timeoutWarn",field:J(J({},e.field),{},{schema:J(J({},e.field.schema),{},{isGlobalObj:"isGlobalObj"})})}))}}]},fixed:{type:"number",minimum:0,title:_r("小数位数"),field:{component:function(e){var t=e.input,r=e.field;return s().createElement(_.InputNumber,(0,a.Z)({precision:0,input:t},t,r.attrs,{max:999999,style:{width:"200px"},defaultValue:3}))}}},mod:{type:"number",title:_r("缩放比例")},emulator:{type:"object",title:_r("仿真配置"),properties:{min:{title:_r("最小值"),type:"number",description:_r("最小值为0时，与不填是一样效果")},max:{title:_r("最大值"),type:"number",description:_r("最大值为0时，与不填是一样效果")},type:{type:"string",title:_r("仿真方式"),enum:["random","linear"],enum_title:[_r("随机"),_r("线性")],field:{effect:function(e,t){var r=e.value,n=e.name;setTimeout((function(){"linear"==r?t.setFieldData(n.replace(".type",".step"),{display:!0}):(t.setFieldData(n.replace(".type",".step"),{display:!1}),t.change(n.replace(".type",".step"),void 0))}))}}},step:{title:_r("步进"),type:"number",description:_r("线性变化时，每次递增的值。")}}},timeFormat:{type:"object",title:_r("时间戳"),properties:{hasFormat:{title:_r("应用"),type:"boolean"},format:{title:_r("时间格式"),type:"string",field:{descriptionType:"bottom",component:S},description:_r("默认: YYYY-MM-DD HH:mm:ss")}}},tagValue:d.A6,showInTableSetting:{type:"object",title:_r("显示到列表"),properties:{showInTable:{type:"boolean",title:_r("是否显示"),description:_r("勾选后，数据点会变为表属性"),field:{effect:function(e,t){var r=e.name.substring(0,e.name.lastIndexOf(".")),n=e.name.substring(0,e.name.lastIndexOf("."))+".fieldSchema",i=e.name.substring(0,e.name.lastIndexOf("."))+".freshInterval";setTimeout((function(){e.value||t.change(n,null),t.setFieldData("".concat(r,".freshInterval"),{display:!!e.value}),t.setFieldData("".concat(r,".fieldSchema"),{display:!!e.value}),setTimeout((function(){e.value&&(t.getState().dirty&&t.change(i,60),t.change(n,{type:"number",title:"数字",config:"数字",createShow:!1,editShow:!1,listFields:!0,descriptionType:"tooltip",canOrder:!1,fieldType:"inputNumber",dbType:"Double",fixedField:!0}))}))}))}}},freshInterval:{type:"number",title:_r("更新频率 (s)"),minimum:1,description:_r("未配置更新频率，实时更新数据库列值，配置后，按照频率更新数据库列值，频率不可以小于采集周期")},fieldSchema:{type:"object",title:_t1("控件类型"),properties:{},field:{component:(0,m.C)("Custom.WidgetsSelect")}}}},remark:{title:_r("备注"),type:"string",fieldType:"languageInput",field:{textarea:!0,btnStyle:{height:53}}}}),form:["*"].concat((0,n.Z)(e.items.properties.tagValue?[{key:"tagValue",component:te,group:(0,m.C)("Form.InlineGroup")}]:[]),[{key:"rules",component:X,tableId:r,tableDataId:i,group:(0,m.C)("Form.InlineGroup")},{key:"emulator",component:te,group:(0,m.C)("Form.InlineGroup")},"disabled","remark"]),formRender:function(e,t){return s().createElement(re,{fields:e,option:t})}})})}:{}}},4552:(e,t,r)=>{"use strict";r.d(t,{K:()=>o});var n=r(4942);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var o=function(e){var t,r,n;if("object"===(null==e?void 0:e.type)&&e.objectValue)t=a(a({},e.objectValue),{},{schema:a(a({},null!==(r=null===(n=e.objectValue)||void 0===n?void 0:n.schema)&&void 0!==r?r:{}),{},{name:e.name,title:e.name})});else if("array"===(null==e?void 0:e.type))if(t={type:"object",properties:{arr:{type:"array"}}},"string"===e.arrayValue)t.properties.arr.title="字符串",t.properties.arr.items={type:"string"};else if("number"===e.arrayValue)t.properties.arr.title="数字",t.properties.arr.items={type:"number"};else if("select"!==e.arrayValue&&"numSelect"!==e.arrayValue||!e.ifRepeat)if("object"===e.arrayValue){var i;t.properties.arr.title="对象",t.properties.arr.items=null!==(i=e.objectValue2)&&void 0!==i?i:{}}else t=null;else t.properties.arr.title="选择",t.properties.arr.items=a({type:"string"},e.select2);return t}},2056:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Hd:()=>convter_commands_ftv,J1:()=>getSchema,QG:()=>DeviceForm,jo:()=>convter_commands_vtf});var _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(5987),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(2982),_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(7462),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(885),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4942),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7363),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2611),lodash__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__),xadmin__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3078),xadmin__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(xadmin__WEBPACK_IMPORTED_MODULE_3__),_drivers_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8947),xadmin_ui__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5907),xadmin_ui__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(xadmin_ui__WEBPACK_IMPORTED_MODULE_5__),_components_ScanningSpot__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(5692),_components_AIDeviceTags__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(4664),_components_DriverRunSelect__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(5308),_components_DriverSettings__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(2087),_components_NodeDataComponent__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(9340),_components_DefaultFormLayout__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(1324),xadmin_form__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(3204),xadmin_form__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(xadmin_form__WEBPACK_IMPORTED_MODULE_12__),antd__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(1821),antd__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_13__),_extEvents__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(5923),_getFormSchema__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(4552),_extCommands__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(6269),_extTags__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(8072),_components_PageSelect__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(6433),_util__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(4420),_excluded=["id","data","baseModel","onSubmitSuccess","saveItem","deleteItem","component","nodeProp","table","record"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var schemaFormfilter=function(e){var t=e&&e.form,r=e&&e.properties,n=Object.keys(r);return t.filter((function(e){return lodash__WEBPACK_IMPORTED_MODULE_2___default().isPlainObject(e)?n.indexOf(e.key)>=0:n.indexOf(e)>=0}))},convter_commands_ftv=function(e){return e?e.map((function(e){var t;return _objectSpread(_objectSpread({},lodash__WEBPACK_IMPORTED_MODULE_2___default().omit(e,"writeIn")),{},{formSchema:(0,_getFormSchema__WEBPACK_IMPORTED_MODULE_19__.K)(_objectSpread(_objectSpread({},e.writeIn),{},{name:e.name})),ops:[_objectSpread(_objectSpread({},e.ops),{},{param:e.name})],form:[_objectSpread(_objectSpread({},e.writeIn),{},{name:e.name})],name:e.name,tag:null===(t=e.writeIn)||void 0===t?void 0:t.tag,defaultValue:e.writeIn.defaultValue?(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)({},e.name,e.writeIn.defaultValue.default):void 0,writeOut:e.writeOut})})):[]},convter_commands_vtf=function(e){return e?e.map((function(e){var t=e&&e.form&&e.form[0]||{},r=lodash__WEBPACK_IMPORTED_MODULE_2___default().isArray(null==e?void 0:e.ops)?(null==e?void 0:e.ops[0])||{}:null==e?void 0:e.ops;return lodash__WEBPACK_IMPORTED_MODULE_2___default().isEmpty(t)&&null!=r&&r.defaultValue?{name:null==e?void 0:e.name,ioway:"默认写入",ops:r}:_objectSpread(_objectSpread({},e),{},{name:e.name,ops:_objectSpread(_objectSpread({},r),{},{param:t&&t.name}),writeIn:e.form?_objectSpread(_objectSpread({},lodash__WEBPACK_IMPORTED_MODULE_2___default().omit(t,["name"])),{},{defaultValue:e.defaultValue?{default:e.defaultValue[t.name]}:void 0}):e.writeIn,writeOut:e.writeOut})})):[]},FormItemsCard=function(e){var t,r,n,i,a,o=[],l=(0,xadmin__WEBPACK_IMPORTED_MODULE_3__.use)("redux",(function(e){var t;return{device_node:e.device&&e.device.device_node,device_page:null==e||null===(t=e.device)||void 0===t?void 0:t.device_page}})),s=l.device_node,u=l.device_page,c=lodash__WEBPACK_IMPORTED_MODULE_2___default().isObject(s)&&((null==s?void 0:s.uid)||(null==s?void 0:s.id)),p=react__WEBPACK_IMPORTED_MODULE_1___default().useState({current:1,pageSize:u,total:null==e||null===(t=e.input)||void 0===t?void 0:t.value}),d=(0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_20__.Z)(p,2),m=d[0],f=d[1],_=react__WEBPACK_IMPORTED_MODULE_1___default().useState([]),y=(0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_20__.Z)(_,2),v=y[0],g=y[1],b=null!=e&&null!==(r=e.input)&&void 0!==r&&null!==(n=r.value)&&void 0!==n&&n.length?null==e||null===(i=e.input)||void 0===i?void 0:i.value.map((function(e,t){return _objectSpread(_objectSpread({},e),{},{resetIndex:t})})):[],h=null!=b&&b.length?null!=e&&e.search?b.filter((function(t){var r,n;return(null==t||null===(r=t.name)||void 0===r?void 0:r.includes(e.search))||(null==t||null===(n=t.id)||void 0===n?void 0:n.includes(e.search))})):b:[],E=(null==s?void 0:s._table)||(null==s||null===(a=s.table)||void 0===a?void 0:a.uid);return react__WEBPACK_IMPORTED_MODULE_1___default().useEffect((function(){f(_objectSpread(_objectSpread({},m),{},{current:1,pageSize:u}))}),[u]),react__WEBPACK_IMPORTED_MODULE_1___default().useEffect((function(){var t=null!=b&&b.length?null!=e&&e.search?b.filter((function(t){var r,n;return(null==t||null===(r=t.name)||void 0===r?void 0:r.includes(e.search))||(null==t||null===(n=t.id)||void 0===n?void 0:n.includes(e.search))})):b:[];f(_objectSpread(_objectSpread({},m),{},{current:1,total:t}))}),[null==e?void 0:e.search]),react__WEBPACK_IMPORTED_MODULE_1___default().useEffect((function(){if(null!=b&&b.length){var t=(+m.current-1)*+m.pageSize,r=t+ +m.pageSize,n=null!=e&&e.search?b.filter((function(t){var r,n;return(null==t||null===(r=t.name)||void 0===r?void 0:r.includes(e.search))||(null==t||null===(n=t.id)||void 0===n?void 0:n.includes(e.search))})).slice(t,r):b.slice(t,r);g(n)}}),[null==e?void 0:e.search,m.current,m.pageSize,JSON.stringify(b)]),b&&lodash__WEBPACK_IMPORTED_MODULE_2___default().isArray(b)&&E&&(o=b.map((function(e){return{tableId:E,id:c,tagId:null==e?void 0:e.id}}))),react__WEBPACK_IMPORTED_MODULE_1___default().createElement(react__WEBPACK_IMPORTED_MODULE_1___default().Fragment,null,c?react__WEBPACK_IMPORTED_MODULE_1___default().createElement(xadmin_ui__WEBPACK_IMPORTED_MODULE_5__.C,{is:"Table.SubscribeStore"},react__WEBPACK_IMPORTED_MODULE_1___default().createElement(xadmin_ui__WEBPACK_IMPORTED_MODULE_5__.C,{is:"Table.SubscribeTableData",tags:o}),react__WEBPACK_IMPORTED_MODULE_1___default().createElement(xadmin_ui__WEBPACK_IMPORTED_MODULE_5__.C,(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_21__.Z)({is:"Form.Items.Card"},e,{page:m,original:b,input:_objectSpread(_objectSpread({},null==e?void 0:e.input),{},{value:v})}))):react__WEBPACK_IMPORTED_MODULE_1___default().createElement(xadmin_ui__WEBPACK_IMPORTED_MODULE_5__.C,(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_21__.Z)({is:"Form.Items.Card"},e,{page:m,original:b,input:_objectSpread(_objectSpread({},null==e?void 0:e.input),{},{value:v})})),react__WEBPACK_IMPORTED_MODULE_1___default().createElement("div",{className:"data-point-page",style:{display:"flex",justifyContent:"end"}},react__WEBPACK_IMPORTED_MODULE_1___default().createElement(antd__WEBPACK_IMPORTED_MODULE_13__.Pagination,{size:"small",current:null==m?void 0:m.current,onChange:function(e,t){return f(_objectSpread(_objectSpread({},m),{},{current:e}))},pageSize:null==m?void 0:m.pageSize,total:null==h?void 0:h.length}),react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_PageSelect__WEBPACK_IMPORTED_MODULE_17__.Z,null)))},FormItemsTable=function(e){var t,r,n=[],i=(0,xadmin__WEBPACK_IMPORTED_MODULE_3__.use)("redux",(function(e){return{device_node:e.device&&e.device.device_node}})).device_node,a=lodash__WEBPACK_IMPORTED_MODULE_2___default().isObject(i)&&((null==i?void 0:i.uid)||(null==i?void 0:i.id)),o=null==e||null===(t=e.input)||void 0===t?void 0:t.value,l=(null==i?void 0:i._table)||(null==i||null===(r=i.table)||void 0===r?void 0:r.uid);return o&&lodash__WEBPACK_IMPORTED_MODULE_2___default().isArray(o),l&&(n=o.map((function(e){return{tableId:l,id:a,tagId:null==e?void 0:e.id}}))),a?react__WEBPACK_IMPORTED_MODULE_1___default().createElement(xadmin_ui__WEBPACK_IMPORTED_MODULE_5__.C,{is:"Table.SubscribeStore"},react__WEBPACK_IMPORTED_MODULE_1___default().createElement(xadmin_ui__WEBPACK_IMPORTED_MODULE_5__.C,{is:"Table.SubscribeTableData",tags:n}),react__WEBPACK_IMPORTED_MODULE_1___default().createElement(xadmin_ui__WEBPACK_IMPORTED_MODULE_5__.C,(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_21__.Z)({is:"Form.Items.Table"},e,{node:i,tags:!0}))):react__WEBPACK_IMPORTED_MODULE_1___default().createElement(xadmin_ui__WEBPACK_IMPORTED_MODULE_5__.C,(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_21__.Z)({is:"Form.Items.Table"},e))},tagsField=function(e){var t;return{key:"tags",itemsRenders:(t={},(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(t,_r("卡片"),(function(e){return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(FormItemsCard,e)})),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)(t,_r("表格"),(function(e){return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(FormItemsTable,e)})),t),pushComponent:[react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_ScanningSpot__WEBPACK_IMPORTED_MODULE_6__.Z,null),react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_NodeDataComponent__WEBPACK_IMPORTED_MODULE_10__.Z,{placeholder:_r("查看设备实时数据点"),debug:!0,changeName:"device_node"})],cardRender:function(e){var t,r=e.title,n=e.item,i=e.actions,a=(e.type,e.index,e.error),o=(0,xadmin__WEBPACK_IMPORTED_MODULE_3__.use)("redux",(function(e){return{device_node:e.device&&e.device.device_node}})).device_node,l=a?react__WEBPACK_IMPORTED_MODULE_1___default().createElement(antd__WEBPACK_IMPORTED_MODULE_13__.Tooltip,{title:a},react__WEBPACK_IMPORTED_MODULE_1___default().createElement(antd__WEBPACK_IMPORTED_MODULE_13__.Typography.Text,{type:"danger"},r)):r,s=(null==o?void 0:o._table)||(null==o||null===(t=o.table)||void 0===t?void 0:t.uid),u={tableId:s,tagId:null==n?void 0:n.id,tableDataId:null==o?void 0:o.id,tableDataName:null==o?void 0:o.name};return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(antd__WEBPACK_IMPORTED_MODULE_13__.Card,{title:l,actions:i},react__WEBPACK_IMPORTED_MODULE_1___default().createElement("div",{style:{overflow:"hidden",wordBreak:"keep-all",whiteSpace:"nowrap",textOverflow:"ellipsis"}},n.id||_t1("未填写.."),null!=n&&n.disabled?react__WEBPACK_IMPORTED_MODULE_1___default().createElement(antd__WEBPACK_IMPORTED_MODULE_13__.Tag,{color:"default",style:{float:"right"}},_r("未启用")):o&&s&&react__WEBPACK_IMPORTED_MODULE_1___default().createElement(antd__WEBPACK_IMPORTED_MODULE_13__.Tag,{color:"red",style:{float:"right"}},react__WEBPACK_IMPORTED_MODULE_1___default().createElement(xadmin_ui__WEBPACK_IMPORTED_MODULE_5__.C,(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_21__.Z)({is:"Table.DataTag"},u)),n.unit||null)))},group:xadmin_ui__WEBPACK_IMPORTED_MODULE_5__.C.lazy("Form.CollapseGroup"),searchEnable:!0}},commandsField={key:"commands",itemsRender:xadmin_ui__WEBPACK_IMPORTED_MODULE_5__.C.lazy("Form.Items.Card"),cardRender:function(e){var t=e.title,r=e.item,n=e.actions,i=e.error,a=i?react__WEBPACK_IMPORTED_MODULE_1___default().createElement(antd__WEBPACK_IMPORTED_MODULE_13__.Tooltip,{title:i},react__WEBPACK_IMPORTED_MODULE_1___default().createElement(antd__WEBPACK_IMPORTED_MODULE_13__.Typography.Text,{type:"danger"},r.name||t)):r.name||t;return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(antd__WEBPACK_IMPORTED_MODULE_13__.Card,{title:a,actions:n},react__WEBPACK_IMPORTED_MODULE_1___default().createElement("div",{style:{overflow:"hidden",wordBreak:"keep-all",whiteSpace:"nowrap",textOverflow:"ellipsis"}},r.showName||r.name))},group:xadmin_ui__WEBPACK_IMPORTED_MODULE_5__.C.lazy("Form.CollapseGroup"),searchEnable:!0},eventField={key:"events",itemsRender:xadmin_ui__WEBPACK_IMPORTED_MODULE_5__.C.lazy("Form.Items.Card"),cardRender:function(e){var t=e.title,r=e.item,n=e.actions,i=e.error,a=i?react__WEBPACK_IMPORTED_MODULE_1___default().createElement(antd__WEBPACK_IMPORTED_MODULE_13__.Tooltip,{title:i},react__WEBPACK_IMPORTED_MODULE_1___default().createElement(antd__WEBPACK_IMPORTED_MODULE_13__.Typography.Text,{type:"danger"},r.name||t)):r.name||t;return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(antd__WEBPACK_IMPORTED_MODULE_13__.Card,{title:a,actions:n},react__WEBPACK_IMPORTED_MODULE_1___default().createElement("div",{style:{overflow:"hidden",wordBreak:"keep-all",whiteSpace:"nowrap",textOverflow:"ellipsis"}},r.showName||r.name))},group:xadmin_ui__WEBPACK_IMPORTED_MODULE_5__.C.lazy("Form.CollapseGroup"),searchEnable:!0},getSchemaPro=function(e,t,r){var n,i,a,o,l,s=(0,_extTags__WEBPACK_IMPORTED_MODULE_16__.b)(null==e?void 0:e.tags,r),u=(0,_extEvents__WEBPACK_IMPORTED_MODULE_14__.A)(e.events,r),c=(0,_extCommands__WEBPACK_IMPORTED_MODULE_15__.t0)(e.commands,r),p=(0,xadmin_ui__WEBPACK_IMPORTED_MODULE_5__.C)("Form.CollapseGroup");return null!=e&&e.settings&&(e.settings.title=_r("驱动配置"),null!==(n=e.settings)&&void 0!==n&&null!==(i=n.properties)&&void 0!==i&&i.interval&&(e.settings.properties.interval.minimum=0),null!==(a=e.settings)&&void 0!==a&&null!==(o=a.properties)&&void 0!==o&&null!==(l=o.network)&&void 0!==l&&l.properties&&(e.settings.properties.network.properties.timeout.minimum=0)),_objectSpread(_objectSpread({},t),{},{properties:_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({},t.properties),e),s),c),u),form:[].concat((0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_22__.Z)(t.form),["emulator",{key:"settings",component:_components_DriverSettings__WEBPACK_IMPORTED_MODULE_9__.Z,group:p},tagsField(r),commandsField,eventField,"*"])})},covter_driver_scheam=function(e,t,r){try{if(e&&e.model){var n,i,a,o,l=null==e||null===(n=e.model)||void 0===n?void 0:n.properties;return null!=r&&r._settings&&(l=null==e||null===(i=e.device)||void 0===i?void 0:i.properties),null!=r&&r.driverInstance&&(l=(null==e||null===(a=e.driver)||void 0===a?void 0:a.properties)||(null==e||null===(o=e.model)||void 0===o?void 0:o.properties)||{}),(t=getSchemaPro(l,t,r)).form=schemaFormfilter(t),t}return t}catch(e){return console.log(e),t}},getSchema=function getSchema(driver){var data=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},table=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},style={width:"30%",marginRight:10,marginBottom:5};return new Promise((function(resolve,reject){var schema={name:"device",title:_r("设备配置"),type:"object",properties:{driver:{type:"string",title:_r("设备驱动")},emulator:{type:"boolean",title:_r("开启仿真")}},form:[{key:"driver",component:function(e){return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_DriverRunSelect__WEBPACK_IMPORTED_MODULE_8__.Z,(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_21__.Z)({},e,{data,table,style}))},cutWarn:!0},"*"]};if(driver){if("test"==driver||lodash__WEBPACK_IMPORTED_MODULE_2___default().isEqual(data,{})){var newSchema=covter_driver_scheam(xadmin__WEBPACK_IMPORTED_MODULE_3__.app.get("drivers")[driver],schema,data);return void resolve(newSchema)}(0,xadmin__WEBPACK_IMPORTED_MODULE_3__.api)({name:"driver/"}).fetch("driver/".concat(driver,"/schema"),{}).then((function(_ref5){var body=_ref5.body;if(body){var ds=eval(body),_newSchema=covter_driver_scheam(ds,schema,data);resolve(_newSchema)}else{var _ds=xadmin__WEBPACK_IMPORTED_MODULE_3__.app.get("drivers")[driver],_newSchema2=covter_driver_scheam(_ds,schema,data);resolve(_newSchema2)}})).catch((function(e){var t=xadmin__WEBPACK_IMPORTED_MODULE_3__.app.get("drivers")[driver],r=covter_driver_scheam(t,schema,data);resolve(r)}))}else resolve(schema),console.log("未指定driver")})).catch((function(e){console.log(e),resolve(schema)}))},DeviceForm=function(e){var t=e.id,r=e.data,n=void 0===r?{}:r,i=e.baseModel,a=(e.onSubmitSuccess,e.saveItem),o=e.deleteItem,l=(e.component,e.nodeProp),s=e.table,u=e.record,c=((0,_babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_23__.Z)(e,_excluded),{name:"device",title:_t1("设备配置"),type:"object",properties:{driver:{type:"string",title:_r("设备驱动")},emulator:{type:"boolean",title:_r("开启仿真")}},form:[{key:"driver",component:function(e){return react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_components_DriverRunSelect__WEBPACK_IMPORTED_MODULE_8__.Z,(0,_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_21__.Z)({},e,{data:n,table:s}))},cutWarn:!0},"emulator","*"]}),p=react__WEBPACK_IMPORTED_MODULE_1___default().useState((function(){var e,t=(u?null==n||null===(e=n._settings)||void 0===e?void 0:e.device:null==n?void 0:n.device)||{};return{schema:c,values:t,loading:!1}})),d=(0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_20__.Z)(p,2),m=d[0],f=m.schema,_=m.values,y=m.loading,v=d[1],g=(0,xadmin__WEBPACK_IMPORTED_MODULE_3__.use)("model.transI18n",{model:f}).modelI18n;react__WEBPACK_IMPORTED_MODULE_1___default().useEffect((function(){var e,t,r=(null==n||null===(e=n.device)||void 0===e?void 0:e.driver)||(null==s||null===(t=s.device)||void 0===t?void 0:t.driver);if(l){var i,a,o,u=l;(lodash__WEBPACK_IMPORTED_MODULE_2___default().includes(r,"opcua")||lodash__WEBPACK_IMPORTED_MODULE_2___default().includes(r,"opcda"))&&(u=_objectSpread(_objectSpread({},u),{},{properties:_objectSpread(_objectSpread({},null===(i=u)||void 0===i?void 0:i.properties),{},{settings:lodash__WEBPACK_IMPORTED_MODULE_2___default().omit(null===(a=u)||void 0===a||null===(o=a.properties)||void 0===o?void 0:o.settings,"required")})})),v((function(e){return _objectSpread(_objectSpread({},e),{},{schema:u,loading:!1})}))}else getSchema(r,n,s).then((function(e){v((function(t){return _objectSpread(_objectSpread({},t),{},{schema:e,loading:!1})}))})).catch((function(e){return console.log(e)}))}),[]);var b=convter_commands_vtf(null==_?void 0:_.commands),h=_objectSpread(_objectSpread({},_),{},{tags:[].concat((0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_22__.Z)((null==_?void 0:_.tags)||[]),(0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_22__.Z)((null==_?void 0:_.notEnabledTags)||[])),commands:b,languageType:null==n?void 0:n.languageType});return y?react__WEBPACK_IMPORTED_MODULE_1___default().createElement(xadmin_ui__WEBPACK_IMPORTED_MODULE_5__.Loading,null):g?react__WEBPACK_IMPORTED_MODULE_1___default().createElement(xadmin_ui__WEBPACK_IMPORTED_MODULE_5__.C,{is:"AntdI18n"},react__WEBPACK_IMPORTED_MODULE_1___default().createElement(xadmin_ui__WEBPACK_IMPORTED_MODULE_5__.C,{is:"I18nSchemaForm",id:n.id,schema:g,formKey:"model.".concat((null==i?void 0:i.name)||"device",".device.").concat(t,".r").concat((new Date).getTime().toString()),onChange:function(e){if(e.driver){var t=(0,_util__WEBPACK_IMPORTED_MODULE_18__._)(null==e?void 0:e.driver),r=(0,_util__WEBPACK_IMPORTED_MODULE_18__._)(null==_?void 0:_.driver);(null==t?void 0:t.groupId)!=(null==r?void 0:r.groupId)&&getSchema(null==t?void 0:t.driver,n).then((function(t){v((function(r){return _objectSpread(_objectSpread({},r),{},{values:e,schema:t,loading:!1})}))})).catch((function(e){return console.log(e)}))}else!u&&v((function(e){return _objectSpread(_objectSpread({},e),{},{values:{},schema:c})}))},onDelete:o,onSubmit:function(e){var t,r,i=null==e?void 0:e.driver,o="";null!=e&&e.driverGroupId&&lodash__WEBPACK_IMPORTED_MODULE_2___default().includes(null==e?void 0:e.driverGroupId,"_")&&(i=null===(t=(0,_util__WEBPACK_IMPORTED_MODULE_18__._)(null==e?void 0:e.driverGroupId))||void 0===t?void 0:t.driver,o=null===(r=(0,_util__WEBPACK_IMPORTED_MODULE_18__._)(null==e?void 0:e.driverGroupId))||void 0===r?void 0:r.groupId);var l,s=(l=convter_tags_otherWarning(e,n.id))?{enable:l.filter((function(e){return!Boolean(null==e?void 0:e.disabled)})),notEnabledTags:l.filter((function(e){return Boolean(null==e?void 0:e.disabled)}))}:[],u=s.enable,c=s.notEnabledTags,p=convter_commands_ftv(null==e?void 0:e.commands),d=_objectSpread(_objectSpread({},e),{},{driver:i,groupId:o,commands:p,tags:u,notEnabledTags:c});return a({id:n.id,device:d})},component:(0,xadmin_ui__WEBPACK_IMPORTED_MODULE_5__.C)("Form.PluginFormLayout"),initialValues:h,data:_objectSpread(_objectSpread({},n),{},{device:h})})):null},changeRule=function(e,t,r){var n,i,a,o,l={timeoutWarn:_r("长时间不上数报警"),sameValueWarn:_r("同数据报警")},s={type:null==l?void 0:l[r],tagId:null==e?void 0:e.id};null!=e&&null!==(n=e[r])&&void 0!==n&&null!==(i=n.range)&&void 0!==i&&i.type&&(s=_objectSpread(_objectSpread({},s),{},(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__.Z)({},null==e||null===(a=e[r])||void 0===a||null===(o=a.range)||void 0===o?void 0:o.type,t))),s&&(0,xadmin__WEBPACK_IMPORTED_MODULE_3__.api)({name:"warning/rule/pull"}).fetch("",{method:"PATCH",body:JSON.stringify(s)}).then((function(e){console.log("修改全局报警规则成功")}))},checkRequired=function(e,t){var r=!0;return null!=e&&e.show?t.forEach((function(t){var n,i;"warnIntervalObj"==t?(null!=e&&null!==(n=e[t])&&void 0!==n&&n.count||(r=!1),null!=e&&null!==(i=e[t])&&void 0!==i&&i.unit||(r=!1)):null!=e&&e[t]||(r=!1)})):r=!1,r},getwarnInterval=function(e,t){var r=e;return"m"==t&&(r=60*e),r},convter_tags_otherWarning=function(e,t){var r;return null!=e&&null!==(r=e.tags)&&void 0!==r&&r.length?e.tags.map((function(e){var r,n,i,a,o,l,s,u,c,p,d,m,f,_,y,v,g,b,h,E,O,w,C,A,T=null===(r=e)||void 0===r?void 0:r.timeoutWarn,k=null===(n=e)||void 0===n?void 0:n.sameValueWarn,D=["warnIntervalObj","warnType","level","description"],I=checkRequired(T,D),S=checkRequired(k,D);return null!==(i=e)&&void 0!==i&&null!==(a=i.timeoutWarn)&&void 0!==a&&null!==(o=a.isGlobalObj)&&void 0!==o&&o.isChange&&e.timeoutWarn.isGlobal&&(changeRule(e,t,"timeoutWarn"),delete e.timeoutWarn.isGlobal,delete e.timeoutWarn.isGlobalObj),null!==(l=e)&&void 0!==l&&null!==(s=l.sameValueWarn)&&void 0!==s&&null!==(u=s.isGlobalObj)&&void 0!==u&&u.isChange&&e.sameValueWarn.isGlobal&&(changeRule(e,t,"sameValueWarn"),delete e.sameValueWarn.isGlobal,delete e.sameValueWarn.isGlobalObj),I?e=_objectSpread(_objectSpread({},e),{},{timeoutWarn:_objectSpread(_objectSpread({},e.timeoutWarn),{},{warnInterval:getwarnInterval(null===(c=e)||void 0===c||null===(p=c.timeoutWarn)||void 0===p||null===(d=p.warnIntervalObj)||void 0===d?void 0:d.count,null===(m=e)||void 0===m||null===(f=m.timeoutWarn)||void 0===f||null===(_=f.warnIntervalObj)||void 0===_?void 0:_.unit)})}):null===(y=e)||void 0===y||null===(v=y.timeoutWarn)||void 0===v||delete v.warnInterval,S?e=_objectSpread(_objectSpread({},e),{},{sameValueWarn:_objectSpread(_objectSpread({},e.sameValueWarn),{},{warnInterval:getwarnInterval(null===(g=e)||void 0===g||null===(b=g.sameValueWarn)||void 0===b||null===(h=b.warnIntervalObj)||void 0===h?void 0:h.count,null===(E=e)||void 0===E||null===(O=E.sameValueWarn)||void 0===O||null===(w=O.warnIntervalObj)||void 0===w?void 0:w.unit)})}):null===(C=e)||void 0===C||null===(A=C.sameValueWarn)||void 0===A||delete A.warnInterval,e})):[]}},4414:(e,t,r)=>{"use strict";r.d(t,{B:()=>a,I:()=>i});var n=["年","月","星期","日","时","分","秒"],i=function(e){var t=e.executionType,r=t.execution,i=void 0===r?{}:r,a=t.specifyConditions,o=void 0===a?{}:a,l=["secondCycle","minuteCycle","hourCycle","dayCycle","weekCycle","monthCycle","yearCycle"],s=[];l.reduce((function(e,t,r){return o[t]?1==r?(s.push(o[e]||i[e]||"*"),s.push(o[t]||i[t]||"*"),t):(s.push(o[t]),t):o[e]&&1==r?(s.push(o[e]||"*"),s.push(o[t]||i[t]||"*"),t):1==r?i[e]||i[t]?(s.push(i[e]||"*"),s.push(i[t]||"*"),t):(s.push("*"),s.push("*"),t):i[l[r-1]]||"yearCycle"==l[r]?(s.push(i[t]||"*"),t):(s.push(i[t]||"*"),"")}));var u=[];return s.map((function(e){return u.unshift(e)})),u.map((function(e,t){var r=_t1(n[t]);return e.indexOf(",")>-1?e.split(",").join("".concat(r,"、"))+r:e.indexOf("-")>-1?_t1("从")+e+r:e+r==_t1("*星期")?"":"*"==e?_t1("每")+r:r==_t1("星期")?r+e:e+r})).join(" ")},a=function(e){var t=e.executionType,r=t.execution,n=void 0===r?{}:r,i=t.specifyConditions,a=void 0===i?{}:i,o=(e.planSetting,["secondCycle","minuteCycle","hourCycle","dayCycle","monthCycle","weekCycle","yearCycle"]),l=[];return a&&o.reduce((function(e,t,r){return a&&a[t]?1==r?(l.push(a[e]||n[e]||"*"),l.push(a[t]||n[t]||"*"),t):(l.push(a[t]),t):a&&a[e]&&1==r?(l.push(a[e]||"*"),l.push(a[t]||n[t]||"*"),t):1==r?n[e]||n[t]?(l.push(n[e]||"*"),l.push(n[t]||"*"),t):(l.push("*"),l.push("*"),t):n[o[r-1]]||"yearCycle"==o[r]?(l.push(n[t]||"*"),t):(l.push(n[t]||"*"),"")})),_.isEmpty(l)||(e.cronExpression=l.reduce((function(e,t,r){return 5==r&&"*"!=l[r-2]||5==r&&"*"==t?e+" ?":e+" "+t}))),_.isEmpty(n)&&_.isEmpty(a)&&(e.cronExpression="* * * * * ? *"),e}},4420:(e,t,r)=>{"use strict";r.d(t,{_:()=>n}),r(7363),r(5907),r(2611);var n=function(e){var t;return e&&(t=1==e.split("_").length?{driver:e,groupId:""}:{driver:e.substr(0,e.lastIndexOf("_")),groupId:e.substr(e.lastIndexOf("_")+1,e.length)}),t}},1424:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(4015),i=r.n(n),a=r(3645),o=r.n(a)()(i());o.push([e.id,".docker-Collapse .ant-collapse-content .ant-collapse-content-box {\n  padding-top: 2px !important;\n  padding-bottom: 0px !important;\n}\n\n.docker-Collapse .ant-collapse-header {\n  padding: 10px 16px !important;\n  padding-left: 40px !important;\n}\n\n.editable-cell {\n  position: relative;\n}\n\n.editable-cell-value-wrap {\n  padding: 5px 12px;\n  cursor: pointer;\n}\n\n.editable-row:hover .editable-cell-value-wrap {\n  padding: 4px 11px;\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n}\n\n[data-theme='dark'] .editable-row:hover .editable-cell-value-wrap {\n  border: 1px solid #434343;\n}\n\n\n\n.newVersion .ant-tooltip-content .ant-tooltip-inner {\n  color: black\n}\n\n/* 驱动市场 */\n\n.driver-add .ant-card {\n  margin: 10px;\n  border-radius: 10px;\n  /* box-shadow: 2px 2px 1px #ccc; */\n  background-color: #F6F7FA;\n  min-height: 150px;\n}\n\n.driver-add .ant-card .repo-name {\n  display: block;\n  font-size: 1.125rem;\n  font-family: Arial-BoldMT, Arial;\n  font-weight: 500;\n  color: #121029;\n}\n\n.driver-add .ant-card .description {\n  display: block;\n  color: #6c757d;\n  margin: .5rem 0;\n  font-size: 1rem;\n  line-height: 1.2;\n}\n\n.driver-add .ant-card .tag-name {\n  display: block;\n  margin-top: 0.3rem;\n  font-size: 0.875rem;\n  color: rgb(104, 106, 126);\n}\n\n.newVersion .ant-tooltip-content .ant-tooltip-inner {\n  color: black\n}","",{version:3,sources:["webpack://./src/index.css"],names:[],mappings:"AAAA;EACE,2BAA2B;EAC3B,8BAA8B;AAChC;;AAEA;EACE,6BAA6B;EAC7B,6BAA6B;AAC/B;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,iBAAiB;EACjB,eAAe;AACjB;;AAEA;EACE,iBAAiB;EACjB,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;EACE,yBAAyB;AAC3B;;;;AAIA;EACE;AACF;;AAEA,SAAS;;AAET;EACE,YAAY;EACZ,mBAAmB;EACnB,kCAAkC;EAClC,yBAAyB;EACzB,iBAAiB;AACnB;;AAEA;EACE,cAAc;EACd,mBAAmB;EACnB,gCAAgC;EAChC,gBAAgB;EAChB,cAAc;AAChB;;AAEA;EACE,cAAc;EACd,cAAc;EACd,eAAe;EACf,eAAe;EACf,gBAAgB;AAClB;;AAEA;EACE,cAAc;EACd,kBAAkB;EAClB,mBAAmB;EACnB,yBAAyB;AAC3B;;AAEA;EACE;AACF",sourcesContent:[".docker-Collapse .ant-collapse-content .ant-collapse-content-box {\n  padding-top: 2px !important;\n  padding-bottom: 0px !important;\n}\n\n.docker-Collapse .ant-collapse-header {\n  padding: 10px 16px !important;\n  padding-left: 40px !important;\n}\n\n.editable-cell {\n  position: relative;\n}\n\n.editable-cell-value-wrap {\n  padding: 5px 12px;\n  cursor: pointer;\n}\n\n.editable-row:hover .editable-cell-value-wrap {\n  padding: 4px 11px;\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n}\n\n[data-theme='dark'] .editable-row:hover .editable-cell-value-wrap {\n  border: 1px solid #434343;\n}\n\n\n\n.newVersion .ant-tooltip-content .ant-tooltip-inner {\n  color: black\n}\n\n/* 驱动市场 */\n\n.driver-add .ant-card {\n  margin: 10px;\n  border-radius: 10px;\n  /* box-shadow: 2px 2px 1px #ccc; */\n  background-color: #F6F7FA;\n  min-height: 150px;\n}\n\n.driver-add .ant-card .repo-name {\n  display: block;\n  font-size: 1.125rem;\n  font-family: Arial-BoldMT, Arial;\n  font-weight: 500;\n  color: #121029;\n}\n\n.driver-add .ant-card .description {\n  display: block;\n  color: #6c757d;\n  margin: .5rem 0;\n  font-size: 1rem;\n  line-height: 1.2;\n}\n\n.driver-add .ant-card .tag-name {\n  display: block;\n  margin-top: 0.3rem;\n  font-size: 0.875rem;\n  color: rgb(104, 106, 126);\n}\n\n.newVersion .ant-tooltip-content .ant-tooltip-inner {\n  color: black\n}"],sourceRoot:""}]);const l=o},8058:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(4015),i=r.n(n),a=r(3645),o=r.n(a)()(i());o.push([e.id,".warning_bar {\n  bottom: 0px;\n  left: 0px;\n  right: 0px;\n  overflow: visible;\n  padding: 5px;\n  background-color: rgb(240, 242, 245);\n  box-shadow: 0 -1px 3px rgba(0, 0, 0, 0.2);\n}\n\n.warning_bar>.arr-btn {\n  position: absolute;\n  top: -15px;\n  left: 50%;\n  height: 17px;\n  margin-left: -15px;\n  width: 30px;\n  text-align: center;\n  cursor: pointer;\n  background-color: rgb(240, 242, 245);\n  border-radius: 3px;\n  box-shadow: 0 -2px 1px rgba(0, 0, 0, 0.1);\n}\n\n.warning_bar>div {\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n}\n\n.warning_bar .warning-bar-list-container {\n  height: 100%;\n  flex-grow: 1;\n  overflow: hidden;\n  position: relative;\n}\n\n.warning_bar .arr-icon {\n  height: 100%;\n  padding: 0px 5px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n}\n\n.warning_bar .arr-icon:hover {\n  color: #006699;\n}\n\n.warning_bar .arr-icon.disable {\n  cursor: not-allowed;\n  color: #CCC;\n}\n\n.warning_bar .warning-bar-list {\n  position: absolute;\n  transition: left 300ms ease-out;\n  display: flex;\n  flex-direction: row;\n  height: 100%;\n}\n\n.warning_bar .warning-bar-list .ant-card {\n  margin: 0 8px 0 0;\n  height: 100%;\n}\n\n.warning_bar .warning-bar-list .ant-card .ant-card-body {\n  padding: 0px;\n  height: 100%;\n  width: 120px;\n  overflow: hidden;\n}\n\n.warning_bar .warning-bar-list .ant-card .ant-card-body .content {\n  padding: 7px;\n  text-align: center;\n  width: 120px;\n  height: 100%;\n  cursor: pointer;\n}\n\n.warning_bar .ant-card .time {\n  font-size: 13px;\n  font-weight: bold;\n}\n\n.warning_bar .ant-card .name,\n.warning_bar .ant-card .uid {\n  font-size: 12px;\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.warning_bar .ant-card .name {\n  font-size: 13px;\n}\n\n.warning_bar .ant-card .desc {\n  font-size: 12px;\n  line-height: 14px;\n  margin-top: 10px;\n  display: inline-block;\n}\n\n.warning_bar .ant-card-body .info {\n  background-color: #26459b;\n  color: #FFF;\n}\n\n.warning_bar .ant-card-body .warning {\n  background-color: #f77f03;\n  color: #FFF;\n\n}\n\n.warning_bar .ant-card-body .danger {\n  background-color: #b32121;\n  color: #FFF;\n}\n\n.warning_bar .ant-card-body .fixed {\n  background-color: #FFF !important;\n  color: rgb(52, 83, 54);\n}\n\n.warning_bar button {\n  margin: 5px 0;\n}\n\n.warning-enter .ant-card-body {\n  opacity: 0.01;\n  width: 0px !important;\n}\n\n.warning-enter.warning-enter-active .ant-card-body {\n  opacity: 1;\n  width: 120px !important;\n  transition: all 500ms linear;\n}\n\n.warning-exit {\n  opacity: 1;\n}\n\n.warning-exit.warning-exit-active {\n  opacity: 0.01;\n  transition: all 800ms ease-in;\n}\n\n.warning-info>div {\n  line-height: 30px;\n}\n\n.warning-bar .warning-bar-an {\n  transition: all 500ms linear;\n}\n\n.ArchiveModel .ant-layout {\n  background-color: transparent !important;\n}\n\n.ArchiveModel .ant-modal-body {\n  padding: 0px\n}\n\n.network-table .ant-table-thead > tr > th {\n  padding: 10px !important;\n}\n.network-sub-header {\n  color: #CCC !important;\n  height: 20px !important;\n}","",{version:3,sources:["webpack://./src/network/NetworkGraph/style.css"],names:[],mappings:"AAAA;EACE,WAAW;EACX,SAAS;EACT,UAAU;EACV,iBAAiB;EACjB,YAAY;EACZ,oCAAoC;EACpC,yCAAyC;AAC3C;;AAEA;EACE,kBAAkB;EAClB,UAAU;EACV,SAAS;EACT,YAAY;EACZ,kBAAkB;EAClB,WAAW;EACX,kBAAkB;EAClB,eAAe;EACf,oCAAoC;EACpC,kBAAkB;EAClB,yCAAyC;AAC3C;;AAEA;EACE,YAAY;EACZ,aAAa;EACb,uBAAuB;EACvB,sBAAsB;AACxB;;AAEA;EACE,YAAY;EACZ,YAAY;EACZ,gBAAgB;EAChB,kBAAkB;AACpB;;AAEA;EACE,YAAY;EACZ,gBAAgB;EAChB,eAAe;EACf,aAAa;EACb,mBAAmB;AACrB;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,mBAAmB;EACnB,WAAW;AACb;;AAEA;EACE,kBAAkB;EAClB,+BAA+B;EAC/B,aAAa;EACb,mBAAmB;EACnB,YAAY;AACd;;AAEA;EACE,iBAAiB;EACjB,YAAY;AACd;;AAEA;EACE,YAAY;EACZ,YAAY;EACZ,YAAY;EACZ,gBAAgB;AAClB;;AAEA;EACE,YAAY;EACZ,kBAAkB;EAClB,YAAY;EACZ,YAAY;EACZ,eAAe;AACjB;;AAEA;EACE,eAAe;EACf,iBAAiB;AACnB;;AAEA;;EAEE,eAAe;EACf,WAAW;EACX,mBAAmB;EACnB,gBAAgB;EAChB,uBAAuB;AACzB;AACA;EACE,eAAe;AACjB;;AAEA;EACE,eAAe;EACf,iBAAiB;EACjB,gBAAgB;EAChB,qBAAqB;AACvB;;AAEA;EACE,yBAAyB;EACzB,WAAW;AACb;;AAEA;EACE,yBAAyB;EACzB,WAAW;;AAEb;;AAEA;EACE,yBAAyB;EACzB,WAAW;AACb;;AAEA;EACE,iCAAiC;EACjC,sBAAsB;AACxB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,aAAa;EACb,qBAAqB;AACvB;;AAEA;EACE,UAAU;EACV,uBAAuB;EACvB,4BAA4B;AAC9B;;AAEA;EACE,UAAU;AACZ;;AAEA;EACE,aAAa;EACb,6BAA6B;AAC/B;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,4BAA4B;AAC9B;;AAEA;EACE,wCAAwC;AAC1C;;AAEA;EACE;AACF;;AAEA;EACE,wBAAwB;AAC1B;AACA;EACE,sBAAsB;EACtB,uBAAuB;AACzB",sourcesContent:[".warning_bar {\n  bottom: 0px;\n  left: 0px;\n  right: 0px;\n  overflow: visible;\n  padding: 5px;\n  background-color: rgb(240, 242, 245);\n  box-shadow: 0 -1px 3px rgba(0, 0, 0, 0.2);\n}\n\n.warning_bar>.arr-btn {\n  position: absolute;\n  top: -15px;\n  left: 50%;\n  height: 17px;\n  margin-left: -15px;\n  width: 30px;\n  text-align: center;\n  cursor: pointer;\n  background-color: rgb(240, 242, 245);\n  border-radius: 3px;\n  box-shadow: 0 -2px 1px rgba(0, 0, 0, 0.1);\n}\n\n.warning_bar>div {\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n}\n\n.warning_bar .warning-bar-list-container {\n  height: 100%;\n  flex-grow: 1;\n  overflow: hidden;\n  position: relative;\n}\n\n.warning_bar .arr-icon {\n  height: 100%;\n  padding: 0px 5px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n}\n\n.warning_bar .arr-icon:hover {\n  color: #006699;\n}\n\n.warning_bar .arr-icon.disable {\n  cursor: not-allowed;\n  color: #CCC;\n}\n\n.warning_bar .warning-bar-list {\n  position: absolute;\n  transition: left 300ms ease-out;\n  display: flex;\n  flex-direction: row;\n  height: 100%;\n}\n\n.warning_bar .warning-bar-list .ant-card {\n  margin: 0 8px 0 0;\n  height: 100%;\n}\n\n.warning_bar .warning-bar-list .ant-card .ant-card-body {\n  padding: 0px;\n  height: 100%;\n  width: 120px;\n  overflow: hidden;\n}\n\n.warning_bar .warning-bar-list .ant-card .ant-card-body .content {\n  padding: 7px;\n  text-align: center;\n  width: 120px;\n  height: 100%;\n  cursor: pointer;\n}\n\n.warning_bar .ant-card .time {\n  font-size: 13px;\n  font-weight: bold;\n}\n\n.warning_bar .ant-card .name,\n.warning_bar .ant-card .uid {\n  font-size: 12px;\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.warning_bar .ant-card .name {\n  font-size: 13px;\n}\n\n.warning_bar .ant-card .desc {\n  font-size: 12px;\n  line-height: 14px;\n  margin-top: 10px;\n  display: inline-block;\n}\n\n.warning_bar .ant-card-body .info {\n  background-color: #26459b;\n  color: #FFF;\n}\n\n.warning_bar .ant-card-body .warning {\n  background-color: #f77f03;\n  color: #FFF;\n\n}\n\n.warning_bar .ant-card-body .danger {\n  background-color: #b32121;\n  color: #FFF;\n}\n\n.warning_bar .ant-card-body .fixed {\n  background-color: #FFF !important;\n  color: rgb(52, 83, 54);\n}\n\n.warning_bar button {\n  margin: 5px 0;\n}\n\n.warning-enter .ant-card-body {\n  opacity: 0.01;\n  width: 0px !important;\n}\n\n.warning-enter.warning-enter-active .ant-card-body {\n  opacity: 1;\n  width: 120px !important;\n  transition: all 500ms linear;\n}\n\n.warning-exit {\n  opacity: 1;\n}\n\n.warning-exit.warning-exit-active {\n  opacity: 0.01;\n  transition: all 800ms ease-in;\n}\n\n.warning-info>div {\n  line-height: 30px;\n}\n\n.warning-bar .warning-bar-an {\n  transition: all 500ms linear;\n}\n\n.ArchiveModel .ant-layout {\n  background-color: transparent !important;\n}\n\n.ArchiveModel .ant-modal-body {\n  padding: 0px\n}\n\n.network-table .ant-table-thead > tr > th {\n  padding: 10px !important;\n}\n.network-sub-header {\n  color: #CCC !important;\n  height: 20px !important;\n}"],sourceRoot:""}]);const l=o},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=e(t);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,n){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(n)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(i[o]=!0)}for(var l=0;l<e.length;l++){var s=[].concat(e[l]);n&&i[s[0]]||(r&&(s[2]?s[2]="".concat(r," and ").concat(s[2]):s[2]=r),t.push(s))}},t}},4015:e=>{"use strict";function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e.exports=function(e){var r,n,i=(n=4,function(e){if(Array.isArray(e))return e}(r=e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,i,a=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw i}}return a}}(r,n)||function(e,r){if(e){if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[1],o=i[3];if(!o)return a;if("function"==typeof btoa){var l=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(l),u="/*# ".concat(s," */"),c=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(e," */")}));return[a].concat(c).concat([u]).join("\n")}return[a].join("\n")}},9610:(e,t,r)=>{e.exports=r.p+"383553bc383414b52a4b28ecd4f18669.png"},5077:(e,t,r)=>{e.exports=r.p+"e4dfca39331a7686efc4cafab98da367.png"},8107:(e,t,r)=>{e.exports=r.p+"4301bed68dc39f92541d8edc8196e11a.png"},8417:(e,t,r)=>{e.exports=r.p+"14baeec1e25f49399db1b557a70287e5.png"},3379:(e,t,r)=>{"use strict";var n,i=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}(),a=[];function o(e){for(var t=-1,r=0;r<a.length;r++)if(a[r].identifier===e){t=r;break}return t}function l(e,t){for(var r={},n=[],i=0;i<e.length;i++){var l=e[i],s=t.base?l[0]+t.base:l[0],u=r[s]||0,c="".concat(s," ").concat(u);r[s]=u+1;var p=o(c),d={css:l[1],media:l[2],sourceMap:l[3]};-1!==p?(a[p].references++,a[p].updater(d)):a.push({identifier:c,updater:_(d,t),references:1}),n.push(c)}return n}function s(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var a=r.nc;a&&(n.nonce=a)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var o=i(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var u,c=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function p(e,t,r,n){var i=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=c(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function d(e,t,r){var n=r.css,i=r.media,a=r.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var m=null,f=0;function _(e,t){var r,n,i;if(t.singleton){var a=f++;r=m||(m=s(t)),n=p.bind(null,r,a,!1),i=p.bind(null,r,a,!0)}else r=s(t),n=d.bind(null,r,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var r=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<r.length;n++){var i=o(r[n]);a[i].references--}for(var s=l(e,t),u=0;u<r.length;u++){var c=o(r[u]);0===a[c].references&&(a[c].updater(),a.splice(c,1))}r=s}}}},1783:e=>{e.exports='<svg viewBox="0 0 17 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-31.000000, -381.000000)" fill="#9299B9" fill-rule="nonzero"><g id="操作日志" transform="translate(31.000000, 381.000000)"><path d="M14.5822487,-4.57882575e-16 L5.80296717,-4.57882575e-16 C2.6114003,-4.57882575e-16 0,2.52554295 0,5.61217783 L0,15.6614877 C0,16.9475436 1.08797501,18 2.41801144,18 L11.2243622,18 C14.4010931,18 17,15.4862881 17,12.4142532 L17,2.33851231 C17.0002602,1.05220468 15.9120249,-4.57882575e-16 14.5822487,-4.57882575e-16 Z M9.18714206,12.9720727 L4.14757936,12.9720727 C3.797241,12.9720727 3.5135346,12.6979457 3.5135346,12.358874 C3.5135346,12.020054 3.79698072,11.7456752 4.14757936,11.7456752 L9.18714206,11.7456752 C9.53748043,11.7456752 9.82118683,12.0198023 9.82118683,12.358874 C9.82092655,12.6979457 9.53748043,12.9720727 9.18714206,12.9720727 Z M12.5468505,9.54737298 L4.14757936,9.54737298 C3.797241,9.54737298 3.5135346,9.27324598 3.5135346,8.93417428 C3.5135346,8.5953543 3.79698072,8.32097557 4.14757936,8.32097557 L12.5468505,8.32097557 C12.8971889,8.32097557 13.1808953,8.59510258 13.1808953,8.93417428 C13.1808953,9.27299425 12.8974492,9.54737298 12.5468505,9.54737298 Z M12.5468505,6.12317675 L4.14757936,6.12317675 C3.797241,6.12317675 3.5135346,5.84904974 3.5135346,5.50997804 C3.5135346,5.17090634 3.79698072,4.89677934 4.14757936,4.89677934 L12.5468505,4.89677934 C12.8971889,4.89677934 13.1808953,5.17090634 13.1808953,5.50997804 C13.1808953,5.84904974 12.8974492,6.12317675 12.5468505,6.12317675 Z" id="形状"></path></g></g></g></svg>'},4739:e=>{e.exports='<svg viewBox="0 0 40 41" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-517.000000, -1316.000000)" stroke-width="2.5"><g id="编组-5" transform="translate(517.000000, 1316.000000)"><polyline id="路径-166" stroke="#4359C7" points="6 30 6 19 34 19 34 30"></polyline><path d="M20,11 L20,29" id="路径-169" stroke="#4359C7"></path><rect id="矩形" stroke="#575757" x="15.25" y="1.25" width="9.5" height="9.5" rx="1"></rect><rect id="矩形" stroke="#575757" x="15.25" y="30.25" width="9.5" height="9.5" rx="1"></rect><rect id="矩形" stroke="#575757" x="1.25" y="30.25" width="9.5" height="9.5" rx="1"></rect><rect id="矩形" stroke="#575757" x="29.25" y="30.25" width="9.5" height="9.5" rx="1"></rect></g></g></g></svg>'},9766:e=>{e.exports='<svg viewBox="0 0 18 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-31.000000, -543.000000)" fill="#9299B9" fill-rule="nonzero"><g id="网络通信" transform="translate(31.000000, 543.000000)"><path d="M0,4.0985 L1.636875,5.89866667 C5.702625,1.4245 12.297375,1.4245 16.363125,5.89866667 L18,4.0985 C13.033125,-1.36616667 4.97475,-1.36616667 0,4.0985 Z M6.54525,11.2991667 L9,14 L11.45475,11.2991667 C10.10475,9.80583333 7.903125,9.80583333 6.54525,11.2991667 L6.54525,11.2991667 Z M3.27375,7.7 L4.910625,9.50016667 C7.1685,7.01516667 10.83375,7.01516667 13.091625,9.50016667 L14.727375,7.7 C11.5695,4.22566667 6.4395,4.22566667 3.272625,7.7 L3.27375,7.7 Z" id="形状"></path></g></g></g></svg>'},8391:e=>{e.exports='<svg viewBox="0 0 15 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-269.000000, -542.000000)" fill="#9299B9" fill-rule="nonzero"><g id="驱动事件" transform="translate(269.000000, 542.000000)"><path d="M13.7083872,1.63928571 C13.7083872,0.733928571 12.9831784,0 12.0868133,0 L2.91142219,0 C2.01505705,0 1.28984825,0.733928571 1.28984825,1.63928571 L0,14.3589286 C0,15.2642857 0.725208799,16 1.62157393,16 L13.3784261,16 C14.2747912,16 15,15.2642857 15,14.3589286 L13.7083872,1.63928571 Z M13.7824962,13.9482143 C13.7824962,14.4017857 13.4190095,14.7678571 12.9725915,14.7678571 L2.02564404,14.7678571 C1.57746148,14.7678571 1.21397483,14.4 1.21397483,13.9482143 L1.21397483,12.0660714 C1.21397483,11.6125 1.57746148,11.2446429 2.02564404,11.2446429 L12.970827,11.2446429 C13.4190095,11.2446429 13.7807317,11.6125 13.7807317,12.0660714 L13.7824962,13.9482143 L13.7824962,13.9482143 Z M11.5874603,12.1357143 C11.1128103,12.1357143 10.7263851,12.525 10.7263851,13.0053571 C10.7263851,13.4875 11.1110458,13.8767857 11.5874603,13.8767857 C12.0621103,13.8767857 12.4485355,13.4875 12.4485355,13.0053571 C12.446771,12.5267857 12.0621103,12.1357143 11.5874603,12.1357143 Z" id="形状"></path></g></g></g></svg>'},2133:e=>{e.exports='<svg viewBox="0 0 13 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>个人备份 4</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="弹窗" transform="translate(-752.000000, -671.000000)" fill="#4BA0BF" fill-rule="nonzero"><g id="个人备份-4" transform="translate(758.500000, 678.000000) scale(-1, 1) translate(-758.500000, -678.000000) translate(752.000000, 671.000000)"><path d="M2.5,4.04488592 C2.5,6.23501101 4.3,8.02693155 6.5,8.02693155 C8.7,8.02693155 10.5,6.23501101 10.5,4.04488592 C10.5,2.65116994 9.7,1.35700511 8.5,0.560595986 C7.3,-0.235813141 5.7,-0.136262 4.5,0.560595986 C3.3,1.25745397 2.5,2.65116994 2.5,4.04488592 Z M9.9,8.02693155 C8.9,8.82334068 7.8,9.32109638 6.5,9.32109638 C5.2,9.32109638 4,8.82334068 3.1,8.02693155 C1.2,9.22154524 0,11.5112215 0,14 L13,14 C13,11.5112215 11.8,9.22154524 9.9,8.02693155 Z" id="形状"></path></g></g></g></svg>'},6996:e=>{e.exports='<svg viewBox="0 0 14 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>官方备份 4</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="弹窗" transform="translate(-438.000000, -480.000000)" fill="#4BA0BF" fill-rule="nonzero"><g id="官方备份-4" transform="translate(438.000000, 480.000000)"><path d="M13.5625,11.1156832 L12.6875,11.1156832 L12.6875,5.30445841 C12.6875,4.79913452 12.3375,4.33592095 11.9,4.20958997 L8.44375,3.15683186 C8.3125,3.11472154 8.18125,3.15683186 8.05,3.19894219 C7.9625,3.28316284 7.875,3.40949381 7.875,3.53582478 L7.875,11.1156832 L7.4375,11.1156832 L7.4375,1.00920531 C7.4375,0.672322719 7.30625,0.419660772 7.04375,0.209109149 C6.7375,-0.00144247283 6.34375,-0.0435527973 5.95,0.0406678516 L2.23125,1.05131564 C1.70625,1.17764661 1.3125,1.68297051 1.3125,2.23040472 L1.3125,11.1577935 L0.4375,11.1577935 C0.175,11.1577935 0,11.3262348 0,11.5788968 C0,11.8315587 0.175,12 0.4375,12 L13.5625,12 C13.825,12 14,11.8315587 14,11.5788968 C14,11.3262348 13.825,11.1156832 13.5625,11.1156832 Z M9.84375,7.32575398 L10.71875,7.32575398 C10.98125,7.32575398 11.15625,7.49419528 11.15625,7.74685723 C11.15625,7.99951918 10.98125,8.16796047 10.71875,8.16796047 L9.84375,8.16796047 C9.58125,8.16796047 9.40625,7.99951918 9.40625,7.74685723 C9.40625,7.49419528 9.58125,7.32575398 9.84375,7.32575398 Z M3.5,3.95692803 L5.25,3.95692803 C5.5125,3.95692803 5.6875,4.12536932 5.6875,4.37803127 C5.6875,4.63069322 5.5125,4.79913452 5.25,4.79913452 L3.5,4.79913452 C3.2375,4.79913452 3.0625,4.63069322 3.0625,4.37803127 C3.0625,4.12536932 3.2375,3.95692803 3.5,3.95692803 Z M3.5,7.32575398 L5.25,7.32575398 C5.5125,7.32575398 5.6875,7.49419528 5.6875,7.74685723 C5.6875,7.99951918 5.5125,8.16796047 5.25,8.16796047 L3.5,8.16796047 C3.2375,8.16796047 3.0625,7.99951918 3.0625,7.74685723 C3.0625,7.49419528 3.2375,7.32575398 3.5,7.32575398 Z" id="形状"></path></g></g></g></svg>'},1511:e=>{e.exports='<svg viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-110.000000, -541.000000)" fill="#9299B9" fill-rule="nonzero"><g id="指令状态" transform="translate(110.000000, 541.000000)"><path d="M7.2041433,6.71850258 L7.2041433,11.1465016 L11.6349428,8.93250207 L7.2041433,6.71850258 Z M9.00345275,2.05247891e-06 C4.64956859,-0.00291955534 0.918406451,3.11354237 0.144231853,7.39968914 C-0.629942744,11.6858359 1.77506985,15.9114795 5.8546612,17.4330001 L5.8546612,5.62500281 C5.8524166,5.39025925 5.97305746,5.17143697 6.17272147,5.04809485 C6.37238547,4.92475274 6.62199082,4.91485604 6.83078658,5.02200296 L13.4432488,8.3295022 C13.671031,8.44413284 13.8147648,8.67742418 13.8147648,8.93250206 C13.8147648,9.18757994 13.671031,9.42087129 13.4432488,9.53550192 L7.2041433,12.6585012 L7.2041433,17.8200001 C7.7964606,17.9395537 8.39919958,18.0000021 9.00345275,18.0000021 C13.9721086,18.0000021 18,13.9705637 18,9.00000205 C18,4.02944044 13.9721086,2.05247891e-06 9.00345275,2.05247891e-06 Z M7.2041433,11.1465016 L11.6349428,8.93250207 L7.2041433,6.71850258 L7.2041433,11.1465016 Z" id="形状"></path></g></g></g></svg>'},1918:e=>{e.exports='<svg viewBox="0 0 15 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>1</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-929.000000, -261.000000)"><g id="1" transform="translate(929.000000, 261.000000)"><g id="liebiaoxunhuan备份" fill="#D87360" fill-rule="nonzero"><path d="M15,8.9968506 C15,6.59980864 13.7838461,4.37050929 11.7461538,3.01123497 L11.7461538,3.01067583 C11.7230769,2.99501985 11.7023077,2.97600903 11.6786539,2.96035303 L11.6740385,2.9676219 C11.5743592,2.89697678 11.4536673,2.85968702 11.3301923,2.86132938 C11.0095945,2.87409922 10.7602019,3.13607279 10.7728846,3.44680662 C10.7823086,3.6261297 10.8810685,3.78982704 11.0376923,3.88573313 L11.0353846,3.88908799 C12.7929181,5.03079618 13.847174,6.94681211 13.8461538,8.99740974 C13.8461538,12.3382835 11.0821154,15.0596278 7.65461539,15.1401443 L8.38384617,14.4333887 C8.51512893,14.333651 8.59497937,14.1833645 8.60250001,14.0218602 C8.6087456,13.8725902 8.55352737,13.7270335 8.44900189,13.6172351 C8.34447641,13.5074367 8.19921306,13.4423983 8.0451923,13.4364385 C7.87588295,13.4318426 7.71318563,13.5002401 7.60096154,13.6231919 L7.59403846,13.6164822 L5.4248077,15.7199746 L7.59980769,17.7681119 L7.60557692,17.7625205 C7.70637889,17.9032071 7.86870097,17.9907444 8.0451923,17.9995967 C8.36579783,18.0112466 8.63557081,17.7690535 8.64807693,17.4583472 C8.65289231,17.2664105 8.55545994,17.0855791 8.39019232,16.9797216 L8.40403847,16.9657431 L7.65346155,16.2584284 C11.7178846,16.1784711 15,12.9555763 15,8.99740974 M7.21903847,2.86026661 L6.50942308,3.52900051 L6.52326924,3.54297906 C6.35757748,3.64846512 6.26001241,3.82954279 6.26538463,4.02160466 C6.27807693,4.33248763 6.54750002,4.57515528 6.86826923,4.56229501 C7.04465768,4.55357281 7.20696018,4.46625259 7.30788463,4.32577793 L7.31307694,4.33136935 L9.4875,2.28323202 L7.31942309,0.18085791 L7.31250001,0.18644933 C7.20008528,0.0634879453 7.03712388,-0.00472688186 6.86769231,0.000255041984 C6.5475,0.011997023 6.29826924,0.274234652 6.31038462,0.585117613 C6.31859674,0.747269504 6.39926404,0.897916101 6.53134616,0.997764444 L7.29519231,1.73862767 C3.25442308,1.8454238 0,5.05601744 0,8.99740974 C0,11.4156991 1.23634616,13.6690416 3.30576924,15.024961 L3.95192309,14.0979035 C2.20190676,12.9546641 1.1530867,11.0428152 1.15384616,8.99740974 C1.15384616,5.69847165 3.85038461,3.00452527 7.21903847,2.86026661" id="形状"></path></g><line x1="5.62999155" y1="11.1766709" x2="9.70438684" y2="7.06458335" id="路径-91备份" stroke="#D87360" stroke-width="1.2" stroke-linecap="round"></line><line x1="5.62999155" y1="11.1766709" x2="9.70438684" y2="7.06458335" id="路径-91备份" stroke="#D87360" stroke-width="1.2" stroke-linecap="round" transform="translate(7.667189, 9.120627) scale(-1, 1) translate(-7.667189, -9.120627) "></line></g></g></g></svg>'},4181:e=>{e.exports='<svg viewBox="0 0 15 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>未运行</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-906.000000, -261.000000)"><g id="未运行" transform="translate(906.000000, 261.000000)"><g id="liebiaoxunhuan备份" fill="#F1B656" fill-rule="nonzero"><path d="M15,8.9968506 C15,6.59980864 13.7838461,4.37050929 11.7461538,3.01123497 L11.7461538,3.01067583 C11.7230769,2.99501985 11.7023077,2.97600903 11.6786539,2.96035303 L11.6740385,2.9676219 C11.5743592,2.89697678 11.4536673,2.85968702 11.3301923,2.86132938 C11.0095945,2.87409922 10.7602019,3.13607279 10.7728846,3.44680662 C10.7823086,3.6261297 10.8810685,3.78982704 11.0376923,3.88573313 L11.0353846,3.88908799 C12.7929181,5.03079618 13.847174,6.94681211 13.8461538,8.99740974 C13.8461538,12.3382835 11.0821154,15.0596278 7.65461539,15.1401443 L8.38384617,14.4333887 C8.51512893,14.333651 8.59497937,14.1833645 8.60250001,14.0218602 C8.6087456,13.8725902 8.55352737,13.7270335 8.44900189,13.6172351 C8.34447641,13.5074367 8.19921306,13.4423983 8.0451923,13.4364385 C7.87588295,13.4318426 7.71318563,13.5002401 7.60096154,13.6231919 L7.59403846,13.6164822 L5.4248077,15.7199746 L7.59980769,17.7681119 L7.60557692,17.7625205 C7.70637889,17.9032071 7.86870097,17.9907444 8.0451923,17.9995967 C8.36579783,18.0112466 8.63557081,17.7690535 8.64807693,17.4583472 C8.65289231,17.2664105 8.55545994,17.0855791 8.39019232,16.9797216 L8.40403847,16.9657431 L7.65346155,16.2584284 C11.7178846,16.1784711 15,12.9555763 15,8.99740974 M7.21903847,2.86026661 L6.50942308,3.52900051 L6.52326924,3.54297906 C6.35757748,3.64846512 6.26001241,3.82954279 6.26538463,4.02160466 C6.27807693,4.33248763 6.54750002,4.57515528 6.86826923,4.56229501 C7.04465768,4.55357281 7.20696018,4.46625259 7.30788463,4.32577793 L7.31307694,4.33136935 L9.4875,2.28323202 L7.31942309,0.18085791 L7.31250001,0.18644933 C7.20008528,0.0634879453 7.03712388,-0.00472688186 6.86769231,0.000255041984 C6.5475,0.011997023 6.29826924,0.274234652 6.31038462,0.585117613 C6.31859674,0.747269504 6.39926404,0.897916101 6.53134616,0.997764444 L7.29519231,1.73862767 C3.25442308,1.8454238 0,5.05601744 0,8.99740974 C0,11.4156991 1.23634616,13.6690416 3.30576924,15.024961 L3.95192309,14.0979035 C2.20190676,12.9546641 1.1530867,11.0428152 1.15384616,8.99740974 C1.15384616,5.69847165 3.85038461,3.00452527 7.21903847,2.86026661" id="形状"></path></g><line x1="5.62999155" y1="11.1766709" x2="9.70438684" y2="7.06458335" id="路径-91备份" stroke="#F1B656" stroke-width="1.2" stroke-linecap="round"></line><line x1="5.62999155" y1="11.1766709" x2="9.70438684" y2="7.06458335" id="路径-91备份" stroke="#F1B656" stroke-width="1.2" stroke-linecap="round" transform="translate(7.667189, 9.120627) scale(-1, 1) translate(-7.667189, -9.120627) "></line></g></g></g></svg>'},2777:e=>{e.exports='<svg viewBox="0 0 15 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>运行</title><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-877.000000, -261.000000)"><g id="运行" transform="translate(877.000000, 261.000000)"><g id="liebiaoxunhuan" fill="#5271EF" fill-rule="nonzero"><path d="M15,8.9968506 C15,6.59980864 13.7838461,4.37050929 11.7461538,3.01123497 L11.7461538,3.01067583 C11.7230769,2.99501985 11.7023077,2.97600903 11.6786539,2.96035303 L11.6740385,2.9676219 C11.5743592,2.89697678 11.4536673,2.85968702 11.3301923,2.86132938 C11.0095945,2.87409922 10.7602019,3.13607279 10.7728846,3.44680662 C10.7823086,3.6261297 10.8810685,3.78982704 11.0376923,3.88573313 L11.0353846,3.88908799 C12.7929181,5.03079618 13.847174,6.94681211 13.8461538,8.99740974 C13.8461538,12.3382835 11.0821154,15.0596278 7.65461539,15.1401443 L8.38384617,14.4333887 C8.51512893,14.333651 8.59497937,14.1833645 8.60250001,14.0218602 C8.6087456,13.8725902 8.55352737,13.7270335 8.44900189,13.6172351 C8.34447641,13.5074367 8.19921306,13.4423983 8.0451923,13.4364385 C7.87588295,13.4318426 7.71318563,13.5002401 7.60096154,13.6231919 L7.59403846,13.6164822 L5.4248077,15.7199746 L7.59980769,17.7681119 L7.60557692,17.7625205 C7.70637889,17.9032071 7.86870097,17.9907444 8.0451923,17.9995967 C8.36579783,18.0112466 8.63557081,17.7690535 8.64807693,17.4583472 C8.65289231,17.2664105 8.55545994,17.0855791 8.39019232,16.9797216 L8.40403847,16.9657431 L7.65346155,16.2584284 C11.7178846,16.1784711 15,12.9555763 15,8.99740974 M7.21903847,2.86026661 L6.50942308,3.52900051 L6.52326924,3.54297906 C6.35757748,3.64846512 6.26001241,3.82954279 6.26538463,4.02160466 C6.27807693,4.33248763 6.54750002,4.57515528 6.86826923,4.56229501 C7.04465768,4.55357281 7.20696018,4.46625259 7.30788463,4.32577793 L7.31307694,4.33136935 L9.4875,2.28323202 L7.31942309,0.18085791 L7.31250001,0.18644933 C7.20008528,0.0634879453 7.03712388,-0.00472688186 6.86769231,0.000255041984 C6.5475,0.011997023 6.29826924,0.274234652 6.31038462,0.585117613 C6.31859674,0.747269504 6.39926404,0.897916101 6.53134616,0.997764444 L7.29519231,1.73862767 C3.25442308,1.8454238 0,5.05601744 0,8.99740974 C0,11.4156991 1.23634616,13.6690416 3.30576924,15.024961 L3.95192309,14.0979035 C2.20190676,12.9546641 1.1530867,11.0428152 1.15384616,8.99740974 C1.15384616,5.69847165 3.85038461,3.00452527 7.21903847,2.86026661" id="形状"></path></g><polyline id="路径-91" stroke="#5271EF" stroke-width="1.2" stroke-linecap="round" points="4.521432 8.99478671 6.91523551 11.0551699 10.7043868 7.06458335"></polyline></g></g></g></svg>'},9214:e=>{e.exports='<svg viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>重启</title><defs><filter x="-1.5%" y="-1.5%" width="103.0%" height="103.0%" filterUnits="objectBoundingBox" id="filter-1"><feOffset dx="0" dy="0" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0" type="matrix" in="shadowOffsetOuter1" result="shadowMatrixOuter1"></feColorMatrix><feMerge><feMergeNode in="shadowMatrixOuter1"></feMergeNode><feMergeNode in="SourceGraphic"></feMergeNode></feMerge></filter></defs><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-852.000000, -261.000000)" stroke="#5271EF"><g id="重启" transform="translate(853.000000, 262.000000)"><circle id="椭圆形" stroke-width="1.2" cx="8" cy="8" r="8"></circle><g id="fuwuzhongqi" filter="url(#filter-1)" transform="translate(3.000000, 3.000000)" fill="#5271EF" fill-rule="nonzero" stroke-width="0.3"><path d="M6.6704176,3.415 C6.75293823,3.4975 6.85671418,3.54125 6.947987,3.54125 C7.01550388,3.54125 7.07676919,3.51875 7.12303076,3.4725 L8.63590898,1.96125 C8.74593648,1.85125 8.71967992,1.65125 8.57714429,1.5075 L8.3995999,1.33 C8.25706427,1.1875 8.05701425,1.16125 7.94573643,1.27125 L6.43410853,2.78125 C6.32408102,2.89125 6.34783696,3.09125 6.49287322,3.235 L6.6704176,3.415 L6.6704176,3.415 Z M9.7211803,4.4475 L7.58189547,4.4475 C7.4256064,4.4475 7.30057514,4.6075 7.30057514,4.81 L7.30057514,5.06125 C7.30057514,5.26375 7.42310578,5.42375 7.58189547,5.42375 L9.71867967,5.42375 C9.87496874,5.42375 10,5.26375 10,5.06125 L10,4.81 C10,4.60625 9.87746937,4.4475 9.7211803,4.4475 L9.7211803,4.4475 Z M7.2168042,6.435 C7.17179295,6.39 7.10927732,6.36625 7.04051013,6.36625 C6.94548637,6.36625 6.84421105,6.4125 6.76294074,6.49375 L6.58539635,6.67125 C6.44286072,6.81375 6.41660415,7.01375 6.52913228,7.125 L8.04076019,8.63625 C8.08702176,8.6825 8.14953738,8.705 8.21580395,8.705 C8.30832708,8.705 8.41085271,8.6625 8.49337334,8.57875 L8.67091773,8.40125 C8.81345336,8.25875 8.83970993,8.05875 8.72968242,7.9475 L7.2168042,6.435 Z M5.19129782,7.30375 L4.939985,7.30375 C4.73743436,7.30375 4.57739435,7.42625 4.57739435,7.5825 L4.57739435,9.71875 C4.57739435,9.875 4.73493373,10 4.939985,10 L5.19129782,10 C5.39384846,10 5.55388847,9.8775 5.55388847,9.71875 L5.55388847,7.5825 C5.55263816,7.42625 5.39384846,7.30375 5.19129782,7.30375 L5.19129782,7.30375 Z M3.32708177,6.585 C3.18454614,6.4425 2.98449612,6.4175 2.8732183,6.52625 L1.36034009,8.0375 C1.25031258,8.1475 1.27656914,8.3475 1.41910478,8.49125 L1.59664916,8.66875 C1.65791448,8.73 1.73168292,8.77125 1.80670168,8.78875 C1.8292073,8.79375 1.85296324,8.79625 1.87421855,8.79625 C1.94298575,8.79625 2.00425106,8.77125 2.05051263,8.7275 L3.56214054,7.2175 C3.60715179,7.1725 3.63215804,7.11 3.63215804,7.0425 C3.63215804,6.9475 3.58589647,6.84625 3.50462616,6.765 L3.32708177,6.585 L3.32708177,6.585 Z M2.69692423,5.1925 L2.69692423,4.94125 C2.69692423,4.73875 2.5743936,4.57875 2.4156039,4.57875 L0.278819705,4.57875 C0.122530633,4.57875 0,4.73875 0,4.94125 L0,5.1925 C0,5.395 0.122530633,5.555 0.278819705,5.555 L2.4156039,5.555 C2.57314329,5.5525 2.69692423,5.395 2.69692423,5.1925 Z M2.78069517,3.565 C2.82570643,3.61 2.88197049,3.6325 2.95698925,3.635 C3.052013,3.635 3.15328832,3.58875 3.23455864,3.5075 L3.41210303,3.33 C3.55463866,3.1875 3.58089522,2.9875 3.46836709,2.87625 L1.95923981,1.365 C1.8492123,1.255 1.64916229,1.27875 1.50537634,1.42375 L1.32783196,1.60125 C1.18529632,1.74375 1.15903976,1.94375 1.27156789,2.055 L2.78069517,3.565 Z M5.060015,2.69625 L5.060015,2.6975 C5.26256564,2.6975 5.42260565,2.575 5.42260565,2.41875 L5.42260565,0.28125 C5.42260565,0.125 5.26506627,0 5.060015,0 L4.80870218,0 C4.60615154,0 4.44611153,0.1225 4.44611153,0.28125 L4.44611153,2.4175 C4.44611153,2.57375 4.60365091,2.69625 4.80870218,2.69625 L5.060015,2.69625 Z" id="形状"></path></g></g></g></g></svg>'},7379:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,i=(n=r(2611))&&n.__esModule?n:{default:n},a=(e,t)=>{var r=[];return e.forEach(((e,n)=>{r.push({name:null!=t&&(i.default.isArray(t)?t[n]:t[e])||e,value:e})})),r},o=[(e,t,r)=>{var n=e.schema||t;return e.key=r.key||n.name,e.name=e.key,e.label=n.title||e.name,n.description&&(e.description=n.description),n.maxLength&&(e.maxlength=n.maxLength),n.minLength&&(e.minlength=n.minLength),n.minimum&&(e.minimum=n.minimum+(n.exclusiveMinimum?1:0)),n.maximum&&(e.maximum=n.maximum-(n.exclusiveMaximum?1:0)),n.validationMessage&&(e.validationMessage=n.validationMessage),n.enumNames&&(e.titleMap=((e,t)=>{if(!i.default.isArray(e)){var r=[];if(t)t.forEach((t=>{r.push({name:e[t],value:t})}));else for(var n in e)e.hasOwnProperty(n)&&r.push({name:n,value:e[n]});return r}return e})(n.enumNames,n.enum)),e.schema=n,e},(e,t,r)=>{if(void 0!==e.type)return e;var n=(e=>{if(Array.isArray(e)&&2==e.length){if("null"===e[0])return e[1];if("null"===e[1])return e[0]}return e})(t.type);if("string"===n)switch(t.enum?(e.type="filter_enum",e.titleMap||(e.titleMap=a(t.enum,t.enum_title||{}))):e.type="filter_text",t.format){case"date":e.type="filter_date";break;case"time":e.type="filter_time";break;case"datetime":case"date-time":e.type="filter_datetime"}else"number"===n||"integer"===n?t.enum?(e.type="filter_enum",e.titleMap||(e.titleMap=a(t.enum,t.enum_title||{}))):e.type="filter_number":"boolean"===n&&(e.type="filter_bool");return e}];t.default=o},6117:(e,t,r)=>{"use strict";t.qn=void 0;var n=d(r(7363)),i=d(r(2611)),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(r(3078)),o=r(3204),l=r(5907),s=r(9866),u=d(r(7379)),c=r(2975);function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function d(e){return e&&e.__esModule?e:{default:e}}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(){return _=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_.apply(this,arguments)}var y=e=>{var{component:t}=e,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["component"]),{resetFilter:i}=(0,a.use)("model.list.filter");return n.default.createElement(t,_({},r,{resetFilter:i}))},v=e=>{var{name:t,component:r,group:l,fieldProps:u}=e,{model:p,atoms:d}=(0,a.use)("model"),[v,g]=(0,c.useRecoilState)(d.where("filters")),{filters:b,options:h,formKey:E}=n.default.useMemo((()=>{var e,r,n="filter.".concat(p.key||p.name),a=p.filters&&p.filters[t];if(i.default.isArray(a))r={},e=a;else{if(!i.default.isPlainObject(a)||!i.default.isArray(a.fields))return{filters:[],formKey:n,options:{}};e=a.fields,r=i.default.omit(a,"fields")}return{filters:e.map((e=>{var t="string"==typeof e?e:e.key,r=(0,s.getFieldProp)(p,t);return r?{key:t,schema:r,field:"string"==typeof e?{}:e}:null})).filter(Boolean),formKey:n,options:r}}),[p,t]),O=n.default.useMemo((()=>b.map((e=>{var t=((e,t)=>{var r=t||{};return a.default.load_list("filter_converter").reduce(((t,n)=>n(t,e,r)),{})})(e.schema,{key:e.key});return i.default.merge(t,e.field,u)}))),[b,u]),w=n.default.useCallback((e=>{var t=Object.keys(e).reduce(((t,r)=>(i.default.isNil(e[r])?t=i.default.omit(t,r):t[r]=e[r],t)),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},v));g(t)}),[p,v,g]),C=h&&1==h.submitOnChange?w:void 0;return O&&b.length?n.default.createElement(o.Form,{onSubmit:w,onChange:C,fields:O,component:e=>n.default.createElement(y,_({},e,{component:r})),group:l,initialValues:v||{},options:h}):null};t.qn=v;var g=(e,t,r)=>i=>{var{model:a}=i;return a&&a.filters&&a.filters[e]?n.default.createElement(v,{name:e,component:(0,l.C)(t),group:r&&(0,l.C)(r)}):null};g("navform","Filter.NavForm","Form.InlineGroup"),g("nav","Filter.Modal"),g("submenu","Filter.Submenu","Form.ColGroup"),g("sidemenu","Filter.Form","Form.SimpleGroup"),u.default},9866:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFieldProp=void 0,t.getFieldProp=(e,t)=>t.split(".").reduce(((e,t)=>e&&e.properties&&e.properties[t]),e)},7363:e=>{"use strict";e.exports=React},2975:e=>{"use strict";e.exports=Recoil},2611:e=>{"use strict";e.exports=_},1821:e=>{"use strict";e.exports=antd},9428:e=>{"use strict";e.exports=echarts},6640:e=>{"use strict";e.exports=icons},8488:e=>{"use strict";e.exports=moment},3078:e=>{"use strict";e.exports=xadmin},2846:e=>{"use strict";e.exports=xadminAuth},3204:e=>{"use strict";e.exports=xadminForm},8574:e=>{"use strict";e.exports=xadminI18n},6472:e=>{"use strict";e.exports=xadminModel},5907:e=>{"use strict";e.exports=xadminUi},7061:(e,t,r)=>{var n=r(8698).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},r=Object.prototype,a=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},l="function"==typeof Symbol?Symbol:{},s=l.iterator||"@@iterator",u=l.asyncIterator||"@@asyncIterator",c=l.toStringTag||"@@toStringTag";function p(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(e){p=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),l=new D(n||[]);return o(a,"_invoke",{value:C(e,r,l)}),a}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var f={};function _(){}function y(){}function v(){}var g={};p(g,s,(function(){return this}));var b=Object.getPrototypeOf,h=b&&b(b(I([])));h&&h!==r&&a.call(h,s)&&(g=h);var E=v.prototype=_.prototype=Object.create(g);function O(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(i,o,l,s){var u=m(e[i],e,o);if("throw"!==u.type){var c=u.arg,p=c.value;return p&&"object"==n(p)&&a.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,l,s)}),(function(e){r("throw",e,l,s)})):t.resolve(p).then((function(e){c.value=e,l(c)}),(function(e){return r("throw",e,l,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}})}function C(e,t,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return{value:void 0,done:!0}}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var l=A(o,r);if(l){if(l===f)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=m(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function A(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,A(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var i=m(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function I(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:S}}function S(){return{value:void 0,done:!0}}return y.prototype=v,o(E,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=p(v,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,p(e,c,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},O(w.prototype),p(w.prototype,u,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var o=new w(d(e,r,n,i),a);return t.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},O(E),p(E,c,"Generator"),p(E,s,(function(){return this})),p(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return o.type="throw",o.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=a.call(i,"catchLoc"),s=a.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;k(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:I(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},8698:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4687:(e,t,r)=>{var n=r(7061)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},907:(e,t,r)=>{"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,{Z:()=>n})},5861:(e,t,r)=>{"use strict";function n(e,t,r,n,i,a,o){try{var l=e[a](o),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(i,a){var o=e.apply(t,r);function l(e){n(o,i,a,l,s,"next",e)}function s(e){n(o,i,a,l,s,"throw",e)}l(void 0)}))}}r.d(t,{Z:()=>i})},4942:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(9142);function i(e,t,r){return(t=(0,n.Z)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},7462:(e,t,r)=>{"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}r.d(t,{Z:()=>n})},5987:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(3366);function i(e,t){if(null==e)return{};var r,i,a=(0,n.Z)(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}},3366:(e,t,r)=>{"use strict";function n(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}r.d(t,{Z:()=>n})},885:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(181);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,l=[],s=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}(e,t)||(0,n.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2982:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(907),i=r(181);function a(e){return function(e){if(Array.isArray(e))return(0,n.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9142:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(1002);function i(e){var t=function(e,t){if("object"!==(0,n.Z)(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==(0,n.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===(0,n.Z)(t)?t:String(t)}},1002:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,{Z:()=>n})},181:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(907);function i(e,t){if(e){if("string"==typeof e)return(0,n.Z)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?(0,n.Z)(e,t):void 0}}}},__webpack_module_cache__={},inProgress,dataWebpackPrefix;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,r)=>(__webpack_require__.f[r](e,t),t)),[])),__webpack_require__.u=e=>"chunks/"+e+".e533387a38862ffd9dc6.js",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),inProgress={},dataWebpackPrefix="@airiot/device:",__webpack_require__.l=(e,t,r,n)=>{if(inProgress[e])inProgress[e].push(t);else{var i,a;if(void 0!==r)for(var o=document.getElementsByTagName("script"),l=0;l<o.length;l++){var s=o[l];if(s.getAttribute("src")==e||s.getAttribute("data-webpack")==dataWebpackPrefix+r){i=s;break}}i||(a=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,__webpack_require__.nc&&i.setAttribute("nonce",__webpack_require__.nc),i.setAttribute("data-webpack",dataWebpackPrefix+r),i.src=e),inProgress[e]=[t];var u=(t,r)=>{i.onerror=i.onload=null,clearTimeout(c);var n=inProgress[e];if(delete inProgress[e],i.parentNode&&i.parentNode.removeChild(i),n&&n.forEach((e=>e(r))),t)return t(r)},c=setTimeout(u.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=u.bind(null,i.onerror),i.onload=u.bind(null,i.onload),a&&document.head.appendChild(i)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var t=__webpack_require__.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&!e;)e=r[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e})(),(()=>{var e={826:0};__webpack_require__.f.j=(t,r)=>{var n=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var i=new Promise(((r,i)=>n=e[t]=[r,i]));r.push(n[2]=i);var a=__webpack_require__.p+__webpack_require__.u(t),o=new Error;__webpack_require__.l(a,(r=>{if(__webpack_require__.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",o.name="ChunkLoadError",o.type=i,o.request=a,n[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var n,i,[a,o,l]=r,s=0;if(a.some((t=>0!==e[t]))){for(n in o)__webpack_require__.o(o,n)&&(__webpack_require__.m[n]=o[n]);l&&l(__webpack_require__)}for(t&&t(r);s<a.length;s++)i=a[s],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=this.webpackChunk_airiot_device=this.webpackChunk_airiot_device||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),__webpack_require__.nc=void 0;var __webpack_exports__={};(()=>{"use strict";var e=__webpack_require__(3078),t=__webpack_require__(4942),r=__webpack_require__(7363),n=__webpack_require__.n(r),i=__webpack_require__(2611),a=__webpack_require__.n(i),o=__webpack_require__(8947);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?l(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=["Int8","UInt8","Int8-16BE","Int8-16LE","UInt8-16BE","UInt8-16LE","Int16BE","Int16LE","UInt16BE","UInt16LE","Int32BE","Int32LE","Int32BE-","Int32LE-","UInt32BE","UInt32LE","UInt32BE-","UInt32LE-","FloatBE","FloatLE","FloatBE-","FloatLE-","DoubleBE","DoubleLE","DoubleBE-","DoubleLE-","Boolean","String","String-","HEX","BCD"],c={enum:u,enum_title:["有符号字节","无符号字节","有符号字节-16位的前8位","有符号字节-16位的后8位","无符号字节-16位的前8位","无符号字节-16位的后8位","有符号整数-高位在前","有符号整数-低位在前","无符号整数-高位在前","无符号整数-低位在前","有符号长整数-高位在前","有符号长整数-低位在前","有符号长整数-高位在前-字节交换","有符号长整数-低位在前-字节交换","无符号长整数-高位在前","无符号长整数-低位在前","无符号长整数-高位在前-字节交换","无符号长整数-低位在前-字节交换","浮点数-高位在前","浮点数-低位在前","浮点数-高位在前-字节交换","浮点数-低位在前-字节交换","双精度浮点数-高位在前","双精度浮点数-低位在前","双精度浮点数-高位在前-字节交换","双精度浮点数-低位在前-字节交换","布尔型","字符串-ASCII编码","字符串-字节交换","16位数字","BCD码"].map((function(e,t){return"【".concat(u[t],"】").concat(e)}))},p={type:"object",title:_r("驱动配置"),properties:{ip:{type:"string",format:"ipv4",title:_r("设备"),fieldType:"ip"},port:{type:"number",title:_r("端口")},timeout:{type:"number",title:"连接超时时间 (s)",description:"默认为10s"},idle:{type:"number",title:"连接空闲时间 (s)",description:"默认为30s"},sleep:{type:"number",title:"连接使用间隔 (ms)",description:"默认为1ms"},unit:{type:"number",title:_r("站号")},interval:{type:"number",title:"采集周期 (s)",description:"默认为5s"},autoAddr:{type:"boolean",title:_r("自动化地址"),description:_r("自动化地址在发起modbus请求时地址位会减一")},network:o.L5}},d={type:"object",properties:{ip:{type:"string",format:"ipv4",title:_r("设备"),fieldType:"ip"},port:{type:"number",title:_r("端口")},timeout:{type:"number",title:_r("连接超时时间 (s)"),description:_r("默认为10s")},idle:{type:"number",title:_r("连接空闲时间 (s)"),description:_r("默认为30s")},sleep:{type:"number",title:_r("连接使用间隔 (ms)"),description:_r("默认为1ms")},unit:{type:"number",title:_r("站号")},overwrite:{type:"boolean",title:_r("不继承模型的数据点"),description:_r("默认情况下资产数据点为其自身的和模型的数据点的合集")}},required:["ip","port"]},m={title:_r("数据点"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称"),fieldType:"languageInput"},id:{type:"string",title:_r("标识")},area:{type:"number",title:_r("读取区域"),enum:[1,2,3,4],enum_title:["线圈状态","输入状态","保持寄存器","输入寄存器"]},offset:{type:"number",title:_r("偏移地址")},dataType:s({type:"string",title:_r("数据类型")},c),length:{type:"number",title:_r("寄存器个数")},index:{type:"number",title:_r("下标"),description:_r("适用于寄存器区控制多开关情况")},unit:{type:"string",title:_r("单位")},fixed:{type:"number",title:_r("小数位数")},mod:{type:"number",title:_r("缩放比例")},rw:{type:"boolean",title:_r("读写")},tagValue:o.A6},required:["name","id","area","offset","dataType"],form:["name","id","area","offset",{key:"dataType",width:300},"*"]}},f={title:_r("指令"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},form:o.cr,ops:{type:"array",title:_r("指令"),items:{type:"object",properties:{area:{type:"string",title:_r("写入区域"),enum:["coil","register"],enum_title:["线圈状态","保持寄存器"]},offset:{type:"number",title:_r("偏移地址")},index:{type:"number",title:_r("下标"),description:_r("适用于寄存器区控制多开关情况")},dataType:s({type:"string",title:_r("数据类型")},c),param:{type:"string",title:_r("绑定表单项"),description:_r("填写表单项的名称")},value:{type:"string",title:_r("默认写入值")},single:{type:"boolean",title:_r("单字节")}}}}}}};const y={title:_r("Modbus/TCP协议"),key:"modbus",model:{properties:{settings:p,tags:m,commands:f}},device:{properties:{settings:d,tags:m,commands:f}}};function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?v(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=["FloatBE","FloatLE","FloatBE-","FloatLE-","Int8","UInt8","Int16BE","Int16LE","UInt16BE","UInt16LE","Int32BE","Int32LE","UInt32BE","UInt32LE","DoubleBE","DoubleLE","Boolean","String","HEX","BCD"],h={enum:b,enum_title:["浮点数-低位在前","浮点数-高位在前","浮点数-低位在前-字节交换","浮点数-高位在前-字节交换","有符号字节","无符号字节","有符号整数-低位在前","有符号整数-高位在前","无符号整数-低位在前","无符号整数-高位在前","有符号长整数-低位在前","有符号长整数-高位在前","无符号长整数-低位在前","无符号长整数-高位在前","双精度浮点数-低位在前","双精度浮点数-高位在前","布尔型","字符串-ASCII编码","16位数字","BCD码"].map((function(e,t){return"【".concat(b[t],"】").concat(e)}))},E={type:"object",title:_r("驱动配置"),properties:{ip:{type:"string",format:"ipv4",title:_r("设备"),fieldType:"ip"},port:{type:"number",title:_r("端口")},unit:{type:"number",title:_r("站号")},interval:{type:"number",title:"采集周期 (s)",description:_r("数据点的采集周期，不定义默认5秒")},autoAddr:{type:"boolean",title:_r("自动化地址"),description:_r("自动化地址在发起modbus请求时地址位会减一")},network:o.L5}},O={type:"object",properties:{ip:{type:"string",format:"ipv4",title:_r("设备"),fieldType:"ip"},port:{type:"number",title:_r("端口")},unit:{type:"number",title:_r("站号")},overwrite:{type:"boolean",title:_r("覆盖默认点表"),description:_r("选择该项后，设备模型中的点表将被设备点表覆盖")}},required:["ip","port"]},w={title:_r("数据点"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称"),fieldType:"languageInput"},id:{type:"string",title:_r("标识")},area:{type:"number",title:_r("读取区域"),enum:[1,2,3,4],enum_title:["线圈状态","输入状态","保持寄存器","输入寄存器"]},offset:{type:"number",title:_r("偏移地址")},dataType:g({type:"string",title:_r("数据类型")},h),length:{type:"number",title:_r("寄存器个数")},index:{type:"number",title:_r("下标"),description:_r("适用于寄存器区控制多开关情况")},unit:{type:"string",title:_r("单位")},fixed:{type:"number",title:_r("小数位数")},mod:{type:"number",title:_r("缩放比例")},tagValue:o.A6},required:["name","id","area","offset","dataType"],form:["name","id","area","offset",{key:"dataType",width:300},"*"]}},C={title:_r("指令"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},form:o.cr,ops:{type:"array",title:_r("指令"),items:{type:"object",properties:{area:{type:"string",title:_r("写入区域"),enum:["coil","register"],enum_title:["线圈状态","保持寄存器"]},offset:{type:"number",title:_r("偏移地址")},index:{type:"number",title:_r("下标"),description:_r("适用于寄存器区控制多开关情况")},dataType:g({type:"string",title:_r("数据类型")},h),param:{type:"string",title:_r("绑定表单项"),description:_r("填写表单项的名称")},value:{type:"string",title:_r("默认写入值")}}}}}}};const A={title:_r("Modbus_A11协议"),key:"modbus_a11",model:{properties:{settings:E,tags:w,commands:C}},device:{properties:{settings:O,tags:w,commands:C}}};var T={type:"object",title:_r("驱动配置"),properties:{host:{type:"string",format:"ipv4",title:"IP",fieldType:"ip"},domain:{type:"string",title:_r("计算机名")},progid:{type:"string",title:"progId"},clsid:{type:"string",title:"clsid"},user:{type:"string",title:_r("用户名")},password:{type:"string",title:_r("密码"),fieldType:"password"},itemPrefixName:{type:"string",title:_r("Item前缀")},interval:{type:"number",title:"采集周期 (s)",description:_r("数据点的采集周期，不定义默认5秒")},network:o.L5},required:["host","domain","progid","user","password"]},k={type:"object",title:_r("驱动配置"),properties:{host:{type:"string",format:"ipv4",title:"IP",fieldType:"ip"},domain:{type:"string",title:_r("计算机名")},progid:{type:"string",title:"progId"},clsid:{type:"string",title:"clsid"},user:{type:"string",title:_r("用户名")},password:{type:"string",title:_r("密码"),fieldType:"password"},itemPrefixName:{type:"string",title:_r("Item前缀")},overWrite:{type:"boolean",title:_r("不继承模型的数据点"),description:_r("默认情况下资产数据点为其自身的和模型的数据点的合集")},interval:{type:"number",title:"采集周期 (s)",description:_r("数据点的采集周期，不定义默认5秒")},network:o.L5},required:["host","domain","progid","user","password"]},D={title:_r("数据点"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称"),fieldType:"languageInput"},id:{type:"string",title:_r("标识")},itemid:{type:"string",title:"itemid"},unit:{type:"string",title:_r("单位")},fixed:{type:"number",title:_r("小数位数")},mod:{type:"number",title:_r("缩放比例")},tagValue:o.A6},required:["name","id","itemid"]}},I={title:_r("指令"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},form:o.cr,ops:{type:"array",title:_r("指令"),items:{type:"object",properties:{itemid:{type:"string",title:"itemid"},param:{type:"string",title:_r("绑定表单项"),fieldType:"bindFormItem",description:_r("填写表单项的名称")},value:{type:"string",title:_r("默认写入值")}}}}}}};const S={title:"OPC-DA 2.0 Client",key:"opcda",model:{properties:{settings:T,tags:D,commands:I}},device:{properties:{settings:k,tags:D,commands:I}}};var P={type:"object",title:_r("驱动配置"),properties:{endPointUrl:{type:"string",title:"OPC主机URL"},securityMode:{type:"string",enum:["None","Sign","Sign&Encrypt"],title:_r("安全模式")},securityPolicy:{type:"string",enum:["None","Basic128Rsa15","Basic256","Basic256Sha256"],title:_r("安全策略")},providerUserName:{type:"string",title:_r("用户名")},providerPassword:{type:"string",title:_r("密码"),fieldType:"password",description:_r("如果没有用户名密码便进行匿名访问")},interval:{type:"number",title:"采集周期 (s)",description:_r("数据点的采集周期，不定义默认5秒")},network:o.L5},required:["endPointUrl","securityMode","securityPolicy"]},j={title:_r("数据点"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称"),fieldType:"languageInput"},id:{type:"string",title:_r("标识")},namespaceIndex:{type:"string",title:_r("命名空间")},identifier:{type:"string",title:_r("数据点")},dataType:{type:"string",title:_r("数据类型"),enum:["UNSIGNED_BYTE","UNSIGNED_SHORT","UNSIGNED_INTEGER","UNSIGNED_LONG","SIGNED_BYTE","SIGNED_SHORT","SIGNED_INTEGER","SIGNED_LONG","FLOAT","DOUBLE","BOOL"]},unit:{type:"string",title:_r("单位")},fixed:{type:"number",title:_r("小数位数")},mod:{type:"number",title:_r("缩放比例")},tagValue:o.A6},required:["name","id","namespaceIndex","identifier"]}},x={title:_r("指令"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},form:o.cr,ops:{type:"array",title:_r("指令"),items:{type:"object",properties:{namespaceIndex:{type:"string",title:_r("命名空间")},identifier:{type:"string",title:_r("数据点")},dataType:{type:"string",title:_r("数据类型"),enum:["UNSIGNED_BYTE","UNSIGNED_SHORT","UNSIGNED_INTEGER","UNSIGNED_LONG","SIGNED_BYTE","SIGNED_SHORT","SIGNED_INTEGER","SIGNED_LONG","FLOAT","DOUBLE","BOOL"]},param:{type:"string",title:_r("绑定表单项"),description:_r("填写表单项的名称")},value:{type:"string",title:_r("默认写入值")}},required:["namespaceIndex","identifier","dataType"]}}}}};const M={title:"OPC-UA Client",key:"opcua",model:{properties:{settings:P,tags:j,commands:x}},device:{properties:{settings:P,tags:j,commands:x}}};var B=__webpack_require__(5907),L=__webpack_require__(1821);function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var N={enum:["Float","Boolean","Word"],enum_title:[_r("浮点数"),_r("布尔型"),_r("双精度")]},F={type:"object",title:_r("驱动配置"),properties:{server:{type:"string",title:_r("MQTT服务器"),description:"非加密地址格式为 tcp://ip:port或mqtt://ip:port 加密地址格式为 mqtts://ip:port"},username:{type:"string",title:_r("用户名")},password:{type:"string",title:_r("密码"),fieldType:"password"},topic:{type:"string",title:_r("订阅消息主题"),description:"符合mqtt规范，使用#和+"},usenodetopic:{type:"boolean",title:_r("只使用资产配置中的topic")},clientId:{type:"string",title:_r("客户端")},qos:{type:"number",title:_r("消息服务质量")},ssl:{type:"string",title:"SSL/TLS",enum:["true","false"],description:"ssl为true时, 地址格式应为mqtts://ip:port",field:{effect:function(e,t,r){var n=e.value,i=r.key.substr(0,r.key.lastIndexOf(".")),a=["certtype","sslsecure"];setTimeout((function(){"true"===n?a.forEach((function(e){t.setFieldData("".concat(i,".").concat(e),{display:!0,required:!0})})):a.forEach((function(e){t.setFieldData("".concat(i,".").concat(e),{display:!1,required:!1}),t.change("".concat(i,".").concat(e),null)}))}))}}},certtype:{type:"string",title:_r("证书类型"),enum:["CA signed server","Self signed"],field:{effect:function(e,t,r){var n=e.value,i=r.key.substr(0,r.key.lastIndexOf(".")),a=["cafile","clientcertfile","clientkeyfile"];setTimeout((function(){"Self signed"===n?a.forEach((function(e){var r="".concat(i,".").concat(e);t.setFieldData(r,{display:!0,required:!0})})):a.forEach((function(e){var r="".concat(i,".").concat(e);t.setFieldData(r,{display:!1,required:!1}),t.change(r,null)}))}))}}},sslsecure:{type:"boolean",title:_r("是否验证服务端证书链和地址名称")},cafile:{type:"string",title:_r("CA文件")},clientcertfile:{type:"string",title:_r("客户端证书")},clientkeyfile:{type:"string",title:_r("客户端key文件")},javascript:{type:"string",title:_r("自定义脚本"),fieldType:"deviceScriptEdit"},network:o.L5},required:["server","topic"],form:["server","*","topic","javascript","network"]},Z={title:_r("数据点"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称"),fieldType:"languageInput"},id:{type:"string",title:_r("标识")},dataType:function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?R(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"string",title:_r("数据类型")},N),unit:{type:"string",title:_r("单位")},fixed:{type:"number",title:_r("小数位数")},mod:{type:"number",title:_r("缩放比例")},tagValue:o.A6},required:["name","id"]}},U={title:_r("指令"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},ops:{type:"array",title:_r("写入点"),items:{type:"object",properties:{tag:{type:"string",title:_r("写入")},topic:{type:"string",title:_r("发送消息主题")},param:{type:"string",title:_r("绑定表单项"),description:_r("填写表单项的名称")},value:{type:"string",title:_r("默认写入值")}}}}}}},W={type:"object",properties:{deviceName:{type:"string",title:_r("设备标识")},topic:{type:"string",title:_r("订阅消息主题")}},form:["*"]};const q={title:_r("MQTT Client协议"),key:"driver-mqtt-client",model:{properties:{settings:F,tags:Z,commands:U}},device:{properties:{settings:W,tags:Z,commands:U}}},V={title:"艾森Lora/A11 GRM",key:"aisenz_a11",group:"wireless",model:{properties:{settings:{type:"object",title:_r("驱动配置"),properties:{gateway:{type:"string",title:_r("Lora网关")},handlerType:{type:"string",title:_r("类型"),enum:["压力表","温度表","电参","功图"]},period:{type:"number",title:_r("采集周期"),description:_r("分钟")},batteryLeft:{type:"number",title:_r("电池寿命"),description:_r("天")},network:o.L5}},tags:{title:_r("数据点"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称"),fieldType:"languageInput"},id:{type:"string",title:_r("标识")},dataName:{type:"string",title:_r("数据名称"),description:_r("对应A11协议填写，不填写则与标识相同")},dataType:{type:"string",title:_r("数据类型"),enum:["Number","Float","Char"]},unit:{type:"string",title:_r("单位")},fixed:{type:"number",title:_r("小数位数")},mod:{type:"number",title:_r("缩放比例")},tagValue:o.A6},required:["name","id","dataType"]}},commands:{title:_r("指令"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},cmd:{type:"string",title:_r("指令"),enum:["1010","100","0300","4001","4002","1002","1000"],enum_title:["主动唤醒","调整时间","起停井指令","读仪表配置","写仪表配置","读电参保护参数","写电参保护参数"]},form:o.cr}}}}},device:{properties:{settings:{type:"object",properties:{gateway:{type:"string",title:_r("Lora网关")}}}}}};function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?z(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=["FloatBE","FloatLE","FloatBE-","FloatLE-","Int8","UInt8","Int16BE","Int16LE","UInt16BE","UInt16LE","Int32BE","Int32LE","UInt32BE","UInt32LE","DoubleBE","DoubleLE","Boolean","String","HEX","BCD"],H={enum:K,enum_title:["浮点数-低位在前","浮点数-高位在前","浮点数-低位在前-字节交换","浮点数-高位在前-字节交换","有符号字节","无符号字节","有符号整数-低位在前","有符号整数-高位在前","无符号整数-低位在前","无符号整数-高位在前","有符号长整数-低位在前","有符号长整数-高位在前","无符号长整数-低位在前","无符号长整数-高位在前","双精度浮点数-低位在前","双精度浮点数-高位在前","布尔型","字符串-ASCII编码","16位数字","BCD码"].map((function(e,t){return"【".concat(K[t],"】").concat(e)}))};const Y={title:"艾森Lora/Modbus",key:"aisenz_modbus",group:"wireless",model:{properties:{settings:{type:"object",title:_r("驱动配置"),properties:{gateway:{type:"string",title:_r("Lora网关")},unit:{type:"number",title:_r("站号")},broadcast:{type:"object",title:_r("广播配置"),properties:{active:{type:"boolean",title:_r("启动广播方式")},api:{type:"string",title:_r("广播")},address:{type:"string",title:_r("广播地址")},gateways:{type:"array",title:_r("广播网关"),items:{type:"string"}}}},interval:{type:"number",title:"采集周期 (s)",description:_r("数据点的采集周期，不定义默认5秒")},network:o.L5}},tags:{title:_r("数据点"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称"),fieldType:"languageInput"},id:{type:"string",title:_r("标识")},area:{type:"number",title:_r("读取区域"),enum:[1,2,3,4],enum_title:["线圈状态","输入状态","保持寄存器","输入寄存器"]},offset:{type:"number",title:_r("偏移地址")},dataType:G({type:"string",title:_r("数据类型")},H),length:{type:"number",title:_r("寄存器个数")},unit:{type:"string",title:_r("单位")},fixed:{type:"number",title:_r("小数位数")},mod:{type:"number",title:_r("缩放比例")},tagValue:o.A6},required:["name","id","area","offset","dataType"],form:["name","id","area","offset",{key:"dataType",width:300},"*"]}},commands:{title:_r("指令"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},form:o.cr,ops:{type:"array",title:_r("指令"),items:{type:"object",properties:{area:{type:"string",title:_r("写入区域"),enum:["coil","register"],enum_title:["线圈状态","保持寄存器"]},offset:{type:"number",title:_r("偏移地址")},dataType:G({type:"string",title:_r("数据类型")},H),param:{type:"string",title:_r("绑定表单项"),description:_r("填写表单项的名称")},value:{type:"string",title:_r("默认写入值"),fieldType:"languageInput"}}}}}}}}},device:{properties:{settings:{type:"object",properties:{gateway:{type:"string",title:_r("Lora网关")},deveui:{type:"string",title:_r("Lora设备编号")},unit:{type:"number",title:_r("站号")},group:{type:"string",title:_r("分组"),description:"填写分组后，同一组的设备会进行轮询采集，不同组的设备采集互不影响。"}}}}}},J={title:"艾森Lora/TDM",key:"aisenz_tdm",group:"wireless",model:{properties:{settings:{type:"object",title:_r("驱动配置"),properties:{gateway:{type:"string",title:_r("Lora网关")},handlerType:{type:"string",title:_r("类型"),enum:["压力表","温度表","电参","功图"]},network:o.L5}},tags:{title:_r("数据点"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称"),fieldType:"languageInput"},id:{type:"string",title:_r("标识")},dataName:{type:"string",title:_r("数据名称"),description:_r("对应A11协议填写，不填写则与标识相同")},dataType:{type:"string",title:_r("数据类型"),enum:["Number","Float","Char"]},unit:{type:"string",title:_r("单位")},fixed:{type:"number",title:_r("小数位数")},mod:{type:"number",title:_r("缩放比例")},tagValue:o.A6},required:["name","id","dataType"]}},commands:{title:_r("指令"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},cmd:{type:"string",title:_r("指令"),enum:["1010","100","0300","4001","4002","1002","1000"],enum_title:["主动唤醒","调整时间","起停井指令","读仪表配置","写仪表配置","读电参保护参数","DO远程控制"]},form:o.cr}}}}},device:{properties:{settings:{type:"object",properties:{gateway:{type:"string",title:_r("Lora网关")}}}}}},$={title:"艾森Lora/TDM+GPS",key:"gps_tdm",group:"wireless",model:{properties:{settings:{type:"object",title:_r("驱动配置"),properties:{gateway:{type:"string",title:_r("Lora网关")},handlerType:{type:"string",title:_r("类型"),enum:["压力表","温度表","电参","功图"]},network:o.L5}},tags:{title:_r("数据点"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称"),fieldType:"languageInput"},id:{type:"string",title:_r("标识")},dataName:{type:"string",title:_r("数据名称"),description:_r("对应A11协议填写，不填写则与标识相同")},dataType:{type:"string",title:_r("数据类型"),enum:["Number","Float","Char"]},unit:{type:"string",title:_r("单位")},fixed:{type:"number",title:_r("小数位数")},mod:{type:"number",title:_r("缩放比例")},tagValue:o.A6},required:["name","id","dataType"]}},commands:{title:_r("指令"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},cmd:{type:"string",title:_r("指令"),enum:["1010","100","0300","4001","4002","1002","1000"],enum_title:["主动唤醒","调整时间","起停井指令","读仪表配置","写仪表配置","读电参保护参数","写电参保护参数"]},form:o.cr}}}}},device:{properties:{settings:{type:"object",properties:{gateway:{type:"string",title:_r("Lora网关")}}}}}};var Q={type:"object",title:_r("驱动配置"),properties:{ip:{type:"string",format:"ipv4",title:_r("设备"),fieldType:"ip"},slot:{type:"number",title:_r("槽位")},interval:{type:"number",title:"采集周期 (s)",description:_r("数据点的采集周期，不定义默认5秒")},network:o.L5},required:["ip","slot"]},X={title:_r("数据点"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称"),fieldType:"languageInput"},id:{type:"string",title:_r("标识")},tagname:{type:"string",title:_r("tag点名称")},program:{type:"string",title:_r("程序名称")},unit:{type:"string",title:_r("单位")},fixed:{type:"number",title:_r("小数位数")},mod:{type:"number",title:_r("缩放比例")},tagValue:o.A6},required:["name","id","tagname"]}},ee={title:_r("指令"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},form:o.cr,ops:{type:"array",title:_r("指令"),items:{type:"object",properties:{tagname:{type:"string",title:_r("标签名称")},program:{type:"string",title:_r("程序名称")},datatype:{type:"string",title:_r("数据类型"),enum:["BOOL","SINT","INT","DINT","LINT","USINT","UINT","UDINT","REAL","LREAL","STIME","DATE","TIME_AND_DAY","DATE_AND_STRING","STRING","WORD","DWORD","BIT_STRING","LWORD","STRING2","FTIME","LTIME","ITIME","STRINGN","SHORT_STRING","TIME","EPATH","ENGUNIT","STRINGI","STRUCT"]},param:{type:"string",title:_r("绑定表单项")},value:{type:"string",title:_r("默认写入值"),fieldType:"languageInput"},ispbutton:{type:"boolean",title:_r("是否点动")}},required:["tagname","datatype"]}}}}};const te={title:"AB PLC",key:"abplc",group:"ab",model:{properties:{settings:Q,tags:X,commands:ee}},device:{properties:{settings:Q,tags:X,commands:ee}}};function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?re(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ie=["BOOL","BYTE","WORD","DWORD","LWORD","SINT","USINT","INT","UINT","DINT","UDINT","LINT","ULINT","REAL","STRING","WSTRING","TIME"],ae={enum:ie,enum_title:["布尔型","字节型","WORD","DWORD","LWORD","SINT","USINT","INT","UINT","DINT","UDINT","LINT","ULINT","浮点数","STRING","WSTRING","时间戳"].map((function(e,t){return"【".concat(ie[t],"】").concat(e)}))};_r("驱动配置"),_r("设备"),_r("端口"),_r("链接超时时间"),_r("空闲超时时间"),o.L5,_r("设备"),_r("端口"),_r("链接超时时间"),_r("空闲超时时间"),o.L5,_r("数据点"),_r("标识"),_r("名称"),_r("区域"),_r("DB号"),ne({type:"string",title:_r("数据类型")},ae),_r("位下标"),_r("起始地址"),_r("字总数"),_r("单位"),_r("小数位数"),_r("缩放比例"),o.A6,_r("指令"),_r("名称"),o.cr,_r("指令"),_r("区域"),_r("字长度"),_r("DB号"),ne({type:"string",title:_r("数据类型")},ae),_r("起始地址"),_r("字节长度"),_r("默认值");var oe={type:"object",title:_r("驱动配置"),properties:{host:{type:"string",title:_r("目标机器的ip或者主机名")},amsNetIdTarget:{type:"string",title:_r("目标机器的")},amsNetIdSource:{type:"string",title:_r("原机器的")},port:{type:"number",title:_r("tcp目标端口")},amsPortSource:{type:"number",title:_r("ams源端口")},amsPortTarget:{type:"number",title:_r("ams目标端口")},timeout:{type:"number",title:_r("超时时间")},interval:{type:"number",title:"采集周期 (s)",description:_r("数据点的采集周期，不定义默认5秒")},network:o.L5},required:["host","amsNetIdTarget","amsNetIdSource"]},le={title:_r("数据点"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称"),fieldType:"languageInput"},id:{type:"string",title:_r("标识")},symname:{type:"string",title:_r("标签名称")},bytelength:{type:"string",title:_r("数据类型"),enum:["BOOL","BYTE","WORD","DWORD","SINT","USINT","INT","UINT","DINT","UDINT","LINT","ULINT","REAL","TIME","TIME_OF_DAY","TOD","DATE","DATE_AND_TIME","DT","STRING"]},unit:{type:"string",title:_r("单位")},fixed:{type:"number",title:_r("小数位数")},mod:{type:"number",title:_r("缩放比例")},tagValue:o.A6},required:["name","id","symname","bytelength"]}},se={title:_r("指令"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},form:o.cr,ops:{type:"array",title:_r("指令"),items:{type:"object",properties:{symname:{type:"string",title:_r("标签名称")},bytelength:{type:"string",title:_r("数据类型"),enum:["BOOL","BYTE","WORD","DWORD","SINT","USINT","INT","UINT","DINT","UDINT","LINT","ULINT","REAL","TIME","TIME_OF_DAY","TOD","DATE","DATE_AND_TIME","DT","STRING"]},param:{type:"string",title:"key"},value:{type:"number",title:_r("默认值")}},required:["symname","bytelength","value"]}}}}};const ue={title:"倍福 PLC",key:"beckhoff",group:"bf",model:{properties:{settings:oe,tags:le,commands:se}},device:{properties:{settings:oe,tags:le,commands:se}}};var ce={type:"object",title:_r("驱动配置"),properties:{port:{type:"number",title:_r("接收端口")},uri:{type:"string",title:_r("接收路径")},token:{type:"string",title:"OneNET Token"},handlerType:{type:"string",title:_r("类型"),enum:["压力表","温度表","电参","功图","HMS200倾角传感器"]},period:{type:"number",title:"采集周期 (s)",description:_r("秒")},network:o.L5},required:["port","uri","token","handlerType"]},pe={title:_r("数据点"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称"),fieldType:"languageInput"},id:{type:"string",title:_r("标识")},dataName:{type:"string",title:_r("数据名称"),description:_r("对应A11协议填写，不填写则与标识相同")},dataType:{type:"string",title:_r("数据类型"),enum:["Number","Float","Char"]},unit:{type:"string",title:_r("单位")},fixed:{type:"number",title:_r("小数位数")},mod:{type:"number",title:_r("缩放比例")},tagValue:o.A6},required:["name","id","dataType"]}},de={title:_r("指令"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},cmd:{type:"string",title:_r("指令"),enum:["1010","100","0300","4001","4002","1002","1000"],enum_title:["主动唤醒","调整时间","起停井指令","读仪表配置","写仪表配置","读电参保护参数","写电参保护参数"]},form:o.cr}}};const me={title:_r("中国移动"),key:"onenet",group:"wireless",model:{properties:{settings:ce,tags:pe,commands:de}},device:{properties:{}}};var fe={type:"object",title:_r("驱动配置"),properties:{url:{type:"string",title:"wsdl服务地址的URL"},namespaceURI:{type:"string",title:_r("命名空间")},localPart:{type:"string",title:_r("本地部分")},interval:{type:"number",title:"采集周期 (s)",description:_r("数据点的采集周期，不定义默认5秒")},network:o.L5},required:["url","namespaceURI","localPart","interval"]},_e={title:_r("数据点"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称"),fieldType:"languageInput"},id:{type:"string",title:_r("标识")},lTagId:{type:"number",title:_r("lTagId属性值")},shParId:{type:"number",title:_r("shParId属性值")},unit:{type:"string",title:_r("单位")},fixed:{type:"number",title:_r("小数位数")},mod:{type:"number",title:_r("缩放比例")},tagValue:o.A6},required:["name","id","lTagId","shParId"]}},ye={title:_r("指令"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},form:o.cr,ops:{type:"array",title:_r("指令"),items:{type:"object",properties:{lTagId:{type:"number",title:_r("lTagId属性值")},shParId:{type:"number",title:_r("shParId属性值")},emvaltype:{type:"string",title:_r("类型")},value:{type:"string",title:_r("默认写入值")}}}}}}};const ve={title:_r("力控"),key:"scada",model:{properties:{settings:fe,tags:_e,commands:ye}},device:{properties:{settings:fe,tags:_e,commands:ye}}};var ge={type:"object",title:_r("驱动配置"),properties:{port:{type:"number",title:_r("服务端口")},network:o.L5},required:["port"]},be={type:"object",title:_r("驱动配置"),properties:{domain:{type:"number",title:_r("域地址")},dataId:{type:"number",title:_r("数据地址")},overwrite:{type:"boolean",title:_r("覆盖默认点表"),description:_r("选择该项后，设备模型中的点表将被设备点表覆盖")}},required:["domain","dataId"]},he={title:_r("数据点"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称"),fieldType:"languageInput"},id:{type:"string",title:_r("标识")},index:{type:"number",title:_r("索引")},unit:{type:"string",title:_r("单位")},fixed:{type:"number",title:_r("小数位数")},mod:{type:"number",title:_r("缩放比例")},tagValue:o.A6},required:["name","id","index"]}};const Ee={title:_r("CAE廊体测温"),key:"cae",group:"industry",model:{properties:{settings:ge,tags:he}},device:{properties:{settings:be,tags:he}}};var Oe={type:"object",title:_r("驱动配置"),properties:{port:{type:"string",title:_r("端口")},interval:{type:"number",title:"采集周期 (s)",description:_r("数据点的采集周期，不定义默认5秒")},network:o.L5},required:["port","interval"]},we={type:"object",title:_r("驱动配置"),properties:{id:{type:"string",title:_r("标识")},endpoint:{type:"string",title:"endpoint"}},required:["id","endpoint"]},Ce={title:_r("数据点"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称"),fieldType:"languageInput"},uri:{type:"string",title:_r("数据点")},tagValue:o.A6},required:["name","uri"]}},Ae={title:_r("指令"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},form:o.cr,ops:{type:"array",title:_r("指令"),items:{type:"object",properties:{type:{type:"string",title:_r("命令类型")},epName:{type:"string",title:"endpoint"},uri:{type:"string",title:"uri"},value:{type:"number",title:_r("默认值")}},required:["type","epName","uri","value"]}}}}};const Te={title:"LwM2M",key:"lwm2m",group:"industry",model:{properties:{settings:Oe,tags:Ce,commands:Ae}},device:{properties:{settings:we,tags:Ce,commands:Ae}}};var ke={title:_r("驱动配置"),type:"object",properties:{role:{type:"string",title:_r("设备角色"),enum:["master","outstation"],enum_title:["主站(master)","从站(outstation)"]},ip:{type:"string",title:_r("从站服务运行")},port:{type:"number",title:"从站服务运行端口(default:20000)"},masterAddress:{type:"number",title:"主站地址(eg:0-65519)"},outstationAddress:{type:"number",title:"从站地址(eg:0-65519)"},interval:{type:"number",title:"采集周期 (s)",description:_r("数据点的采集周期，不定义默认5秒")}},required:["role","ip","port","masterAddress","outstationAddress"]},De={title:_r("数据点"),type:"array",items:{type:"object",properties:{id:{type:"string",title:_r("名称"),fieldType:"languageInput"},group:{type:"number",title:_r("数据所属类别")},variation:{type:"number",title:_r("数据类别种类")},index:{type:"number",title:_r("数据索引")}}},required:["id","group","variation","index"]},Ie={title:_r("指令"),type:"array",items:{type:"object",properties:{dataType:{type:"string",title:_r("写入数据类型"),enum:["CROB","Analog"],enum_title:["CROB","模拟量"]},controlMode:{type:"string",title:_r("写入模式"),enum:["direct","select"],enum_title:["直接写入","先选择后写入"]},analogOutput:{type:"string",title:_r("模拟量写入值")},crobControlCode:{type:"string",title:_r("CROB写入值"),enum:["LATCH_ON","LATCH_OFF"],enum_title:["置为1(LATCH_ON)","置为0(LATCH_OFF)"]},index:{type:"number",title:_r("数据索引")},param:{type:"string",title:_r("指令参数")}},required:["dataType","controlMode","index"]}},Se={title:_r("指令"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},form:o.cr,ops:Ie}}};const Pe={title:_r("DNP3协议"),key:"dnp3",group:"industry",model:{properties:{settings:ke,tags:De,commands:Se}},device:{properties:{settings:ke,tags:De,commands:Se}}};var je={title:_r("模型配置"),type:"object",properties:{port:{type:"string",title:_r("端口")},interface:{type:"string",format:"ipv4",title:_r("本机")},broadcastAddress:{type:"string",format:"ipv4",title:_r("广播网段")},adpuTimeout:{type:"number",title:_r("连接超时时间")},interval:{type:"number",title:_r("采集周期 (s)"),description:_r("默认采集周期为5s;")},network:o.L5},required:["port","interface","interval"]},xe={ANALOG_INPUT:0,ANALOG_OUTPUT:1,ANALOG_VALUE:2,BINARY_INPUT:3,BINARY_OUTPUT:4,BINARY_VALUE:5,CALENDAR:6,COMMAND:7,DEVICE:8,EVENT_ENROLLMENT:9,FILE:10,GROUP:11,LOOP:12,MULTI_STATE_INPUT:13,MULTI_STATE_OUTPUT:14,NOTIFICATION_CLASS:15,PROGRAM:16,SCHEDULE:17,AVERAGING:18,MULTI_STATE_VALUE:19,TRENDLOG:20,LIFE_SAFETY_POINT:21,LIFE_SAFETY_ZONE:22,ACCUMULATOR:23,PULSE_CONVERTER:24,EVENT_LOG:25,GLOBAL_GROUP:26,TREND_LOG_MULTIPLE:27,LOAD_CONTROL:28,STRUCTURED_VIEW:29,ACCESS_DOOR:30,TIMER:31,ACCESS_CREDENTIAL:32,ACCESS_POINT:33,ACCESS_RIGHTS:34,ACCESS_USER:35,ACCESS_ZONE:36,CREDENTIAL_DATA_INPUT:37,NETWORK_SECURITY:38,BITSTRING_VALUE:39,CHARACTERSTRING_VALUE:40,DATE_PATTERN_VALUE:41,DATE_VALUE:42,DATETIME_PATTERN_VALUE:43,DATETIME_VALUE:44,INTEGER_VALUE:45,LARGE_ANALOG_VALUE:46,OCTETSTRING_VALUE:47,POSITIVE_INTEGER_VALUE:48,TIME_PATTERN_VALUE:49,TIME_VALUE:50,NOTIFICATION_FORWARDER:51,ALERT_ENROLLMENT:52,CHANNEL:53,LIGHTING_OUTPUT:54,BINARY_LIGHTING_OUTPUT:55,PROPRIETARY_MIN:128,PROPRIETARY_MAX:1023},Me={title:_r("数据点"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称"),fieldType:"languageInput"},id:{type:"string",title:_r("标识")},typeNum:{type:"number",title:_r("对象类型"),enum:Object.values(xe),enum_title:Object.keys(xe)},instance:{type:"number",title:_r("对象编号")}},required:["name","typeNum","instance"]}},Be={title:_r("设备配置"),type:"object",properties:{address:{type:"string",format:_r("ipv4"),title:_r("设备IP地址")},deviceId:{type:"number",title:_r("设备编号")}},required:["address","deviceId"]},Le={title:_r("指令"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},form:o.cr,op:{title:_r("指令"),type:"object",properties:{address:{type:"string",title:_r("对象地址")},typeNum:{type:"number",title:_r("对象类型"),enum:Object.values(xe),enum_title:Object.keys(xe)},instance:{type:"number",title:_r("对象实例号")},propertyId:{type:"number",title:_r("数据类型")},param:{type:"string",title:"key"},value:{type:"string",title:_r("默认值")}},required:["address","typeNum","instance","propertyId","value"]}}}};const Re={title:"Bacnet/IP",key:"bacnet",group:"industry",model:{properties:{settings:je,tags:Me,commands:Le}},device:{properties:{settings:Be,tags:Me,commands:Le}}};var Ne={type:"object",title:_r("驱动配置"),properties:{interval:{type:"number",title:_r("采集周期 (s)"),description:_r("数据点的采集周期，不定义默认60秒")},network:o.L5}},Fe={title:_r("数据点"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称"),fieldType:"languageInput"},id:{type:"string",title:_r("标识")},unit:{type:"string",title:_r("单位")},fixed:{type:"number",title:_r("小数位数")},mod:{type:"number",title:_r("缩放比例")},tagValue:o.A6},required:["name","id"]}},Ze={title:_r("指令"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},form:o.cr}}};const Ue={title:_r("测试驱动"),key:"test",model:{properties:{settings:Ne,tags:Fe,commands:Ze}},device:{properties:{settings:Ne,tags:Fe,commands:Ze}}};function We(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var qe=["FloatBE","FloatLE","FloatBE-","FloatLE-","Int8","UInt8","Int16BE","Int16LE","UInt16BE","UInt16LE","Int32BE","Int32LE","UInt32BE","UInt32LE","DoubleBE","DoubleLE","Boolean","String","HEX","BCD"],Ve={enum:qe,enum_title:[_r("浮点数-低位在前"),_r("浮点数-高位在前"),_r("浮点数-低位在前-字节交换"),_r("浮点数-高位在前-字节交换"),_r("有符号字节"),_r("无符号字节"),_r("有符号整数-低位在前"),_r("有符号整数-高位在前"),_r("无符号整数-低位在前"),_r("无符号整数-高位在前"),_r("有符号长整数-低位在前"),_r("有符号长整数-高位在前"),_r("无符号长整数-低位在前"),_r("无符号长整数-高位在前"),_r("双精度浮点数-低位在前"),_r("双精度浮点数-高位在前"),_r("布尔型"),_r("字符串-ASCII编码"),_r("16位数字"),_r("BCD码")].map((function(e,t){return"【".concat(qe[t],"】").concat(_t1(e))}))},ze=(_r("驱动配置"),_r("lora网关地址"),function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?We(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}}({type:"string",title:_r("数据类型")},Ve),_r("设备"),o.L5,_r("lora网关地址"),_r("设备"),{title:_r("数据点"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称"),fieldType:"languageInput"},id:{type:"string",title:_r("标识")},unit:{type:"string",title:_r("单位")}},required:["name","id"]}});const Ge={title:_r("Flowmeter/流量计"),key:"flowmeter",model:{properties:{tags:ze}}};var Ke={type:"object",title:_r("驱动配置"),properties:{ip:{type:"string",format:"ipv4",title:_r("设备")},port:{type:"number",title:_r("端口")},senderAdd:{type:"number",title:_r("发送方地址")},receiverAdd:{type:"number",title:_r("接收方地址")},userName:{type:"string",title:_r("用户名")},pwdCode:{type:"string",title:_r("登陆口令")},interval:{type:"number",title:"采集周期 (s)",description:_r("数据点的采集周期，不定义默认5秒")}},required:["ip","port","senderAdd","receiverAdd","userName","pwdCode","interval"]},He=(_r("对象编号"),{title:_r("数据点"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称"),fieldType:"languageInput"},id:{type:"string",title:_r("标识")},index:{type:"number",title:_r("下标")},unit:{type:"string",title:_r("单位")},tagValue:o.A6},required:["name","id"]}});const Ye={title:_r("廊体监测"),key:"botda",group:"industry",model:{properties:{settings:Ke,tags:He}},device:{properties:{settings:Ke,tags:He}}};var Je,$e;function Qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xe(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Qe(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var et=["Int8","UInt8","Int8-16BE","Int8-16LE","UInt8-16BE","UInt8-16LE","Int16BE","Int16LE","UInt16BE","UInt16LE","Int32BE","Int32LE","Int32BE-","Int32LE-","UInt32BE","UInt32LE","UInt32BE-","UInt32LE-","FloatBE","FloatLE","FloatBE-","FloatLE-","DoubleBE","DoubleLE","DoubleBE-","DoubleLE-","Boolean","String","String-","HEX","BCD"],tt={enum:et,enum_title:[_r("有符号字节"),_r("无符号字节"),_r("有符号字节-16位的前8位"),_r("有符号字节-16位的后8位"),_r("无符号字节-16位的前8位"),_r("无符号字节-16位的后8位"),_r("有符号整数-高位在前"),_r("有符号整数-低位在前"),_r("无符号整数-高位在前"),_r("无符号整数-低位在前"),_r("有符号长整数-高位在前"),_r("有符号长整数-低位在前"),_r("有符号长整数-高位在前-字节交换"),_r("有符号长整数-低位在前-字节交换"),_r("无符号长整数-高位在前"),_r("无符号长整数-低位在前"),_r("无符号长整数-高位在前-字节交换"),_r("无符号长整数-低位在前-字节交换"),_r("浮点数-高位在前"),_r("浮点数-低位在前"),_r("浮点数-高位在前-字节交换"),_r("浮点数-低位在前-字节交换"),_r("双精度浮点数-高位在前"),_r("双精度浮点数-低位在前"),_r("双精度浮点数-高位在前-字节交换"),_r("双精度浮点数-低位在前-字节交换"),_r("布尔型"),_r("字符串-ASCII编码"),_r("字符串-字节交换"),_r("16位数字"),_r("BCD码")].map((function(e,t){return"【".concat(et[t],"】").concat(_t1(e))}))},rt={type:"object",title:_r("驱动配置"),properties:(Je={devPath:{type:"string",title:_r("串口")},options:{type:"object",title:_r("串口配置"),properties:{baudRate:{type:"number",title:_r("波特率"),enum:[115200,57600,38400,19200,9600,4800,2400,1800,1200,600,300,200,150,134,110,75,50]},dataBits:{type:"number",title:_r("数据位"),enum:[8,7,6,5]},stopBits:{type:"number",title:_r("停止位"),enum:[1,2]},parity:{type:"string",title:_r("奇偶校验"),enum:["none","even","mark","odd","space"]},rtscts:{type:"boolean",title:_r("硬件流控")}}},timeout:{type:"number",title:"连接超时时间 (s)",description:"默认为10s"},idle:{type:"number",title:"连接空闲时间 (s)",description:"默认为30s"},sleep:{type:"number",title:"连接使用间隔 (ms)",description:"默认为1ms"},interval:{type:"number",title:"采集周期 (s)",description:_r("数据点的采集周期，不定义默认5秒")},address:{type:"number",title:_r("站号")}},(0,t.Z)(Je,"address",{type:"number",title:_r("站号")}),(0,t.Z)(Je,"autoAddr",{type:"boolean",title:_r("自动化地址"),description:_r("自动化地址在发起modbus请求时地址位会减一")}),(0,t.Z)(Je,"network",o.L5),Je),required:["devPath"]},nt={type:"object",properties:{devPath:{type:"string",title:_r("串口")},options:{type:"object",title:_r("串口配置"),properties:{baudRate:{type:"number",title:_r("波特率"),enum:[115200,57600,38400,19200,9600,4800,2400,1800,1200,600,300,200,150,134,110,75,50]},dataBits:{type:"number",title:_r("数据位"),enum:[8,7,6,5]},stopBits:{type:"number",title:_r("停止位"),enum:[1,2]},parity:{type:"string",title:_r("奇偶校验"),enum:["none","even","mark","odd","space"]},rtscts:{type:"boolean",title:_r("硬件流控")}}},timeout:{type:"number",title:"连接超时时间 (s)",description:"默认为10s"},idle:{type:"number",title:"连接空闲时间 (s)",description:"默认为30s"},sleep:{type:"number",title:"连接使用间隔 (ms)",description:"默认为1ms"},address:{type:"number",title:_r("站号")},overwrite:{type:"boolean",title:_r("不继承模型的数据点"),description:_r("默认情况下资产数据点为其自身的和模型的数据点的合集")}},required:["address","devPath"]},it={title:_r("数据点"),type:"array",items:{type:"object",properties:($e={name:{type:"string",title:_r("名称"),fieldType:"languageInput"},id:{type:"string",title:_r("标识")},area:{type:"number",title:_r("读取区域"),enum:[1,2,3,4],enum_title:["线圈状态","输入状态","保持寄存器","输入寄存器"]},offset:{type:"number",title:_r("偏移地址")},dataType:Xe({type:"string",title:_r("数据类型")},tt),length:{type:"number",title:_r("寄存器个数")},rw:{type:"boolean",title:_r("可写")},unit:{type:"string",title:_r("单位")},fixed:{type:"number",title:_r("小数位数")},mod:{type:"number",title:_r("缩放比例")}},(0,t.Z)($e,"rw",{type:"boolean",title:_r("读写")}),(0,t.Z)($e,"tagValue",o.A6),$e),required:["name","id","area","offset","dataType"],form:["name","id","area","offset",{key:"dataType",width:300},"*"]}},at={title:_r("指令"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},form:o.cr,ops:{type:"array",title:_r("指令"),items:{type:"object",properties:{area:{type:"string",title:_r("写入区域"),enum:["coil","register"],enum_title:["线圈状态","保持寄存器"]},offset:{type:"number",title:_r("偏移地址")},dataType:Xe({type:"string",title:_r("数据类型")},tt),param:{type:"string",title:_r("绑定表单项"),description:_r("填写表单项的名称")},value:{type:"string",title:_r("默认写入值")},single:{type:"boolean",title:_r("单字节")}}}}}}};const ot={title:_r("Modbus/RTU协议"),key:"modbus_rtu",model:{properties:{settings:rt,tags:it,commands:at}},device:{properties:{settings:nt,tags:it,commands:at}}};var lt={type:"object",title:_r("驱动配置"),properties:{ip:{type:"string",title:_r("设备")},port:{type:"number",title:_r("端口")},gatewaySn:{type:"string",title:_r("网关序列号")},username:{type:"string",title:_r("用户名")},password:{type:"string",title:_r("密码")},network:o.L5},required:["gatewaySn"]},st={type:"object",properties:{uid:{type:"string",title:"设备编号(网关devId)"},ip:{type:"string",title:_r("设备")},port:{type:"number",title:_r("端口")},gatewaySn:{type:"string",title:_r("网关序列号")},username:{type:"string",title:_r("用户名")},password:{type:"string",title:_r("密码")}},required:["uid","gatewaySn"]},ut={title:_r("数据点"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},id:{type:"string",title:_r("标识")},varid:{type:"number",title:_r("网关配置")},unit:{type:"string",title:_r("单位")},fixed:{type:"number",title:_r("小数位数")},mod:{type:"number",title:_r("缩放比例")},tagValue:o.A6},required:["name","id"]}},ct={title:_r("指令"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},form:o.cr,ops:{type:"array",title:_r("指令"),items:{type:"object",properties:{id:{type:"number",title:"标识(网关配置VarId)"},param:{type:"string",title:_r("绑定表单项"),description:_r("填写表单项的名称")},value:{type:"string",title:_r("默认写入值"),fieldType:"languageInput"}}}}}}};const pt={title:_r("-物通博联"),key:"gatewt",group:"wireless",model:{properties:{settings:lt,tags:ut,commands:ct}},device:{properties:{settings:st,tags:ut,commands:ct}}};var dt={type:"object",title:_r("驱动配置"),properties:{ip:{type:"string",title:_r("设备")},port:{type:"number",title:_r("端口")},topic:{type:"string",title:_r("主题")},gatewaySn:{type:"string",title:_r("网关")},username:{type:"string",title:_r("用户名")},password:{type:"string",title:_r("密码")},network:o.L5},required:["ip","port","topic","gatewaySn"]},mt={type:"object",properties:{ip:{type:"string",title:_r("设备")},port:{type:"number",title:_r("端口")},topic:{type:"string",title:_r("主题")},gatewaySn:{type:"string",title:_r("网关序列号")},username:{type:"string",title:_r("用户名")},password:{type:"string",title:_r("密码")}},required:["ip","port","topic","gatewaySn"]},ft={title:_r("数据点"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},id:{type:"string",title:_r("标识")},varid:{type:"string",title:_r("参数")},unit:{type:"string",title:_r("单位")},fixed:{type:"number",title:_r("小数位数")},mod:{type:"number",title:_r("缩放比例")},tagValue:o.A6},required:["name","id","varid"]}},_t={title:_r("指令"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},form:o.cr,ops:{type:"array",title:_r("指令"),items:{type:"object",properties:{varid:{type:"string",title:_r("参数")},param:{type:"string",title:_r("绑定表单项"),description:_r("填写表单项的名称")},value:{type:"string",title:_r("默认写入值"),fieldType:"languageInput"}}}}}}};const yt={title:_r("-讯饶"),key:"gatexr",group:"wireless",model:{properties:{settings:dt,tags:ft,commands:_t}},device:{properties:{settings:mt,tags:ft,commands:_t}}};var vt=a().cloneDeep(y),gt=a().omit(a().get(vt,"model.properties.settings.properties"),"autoAddr");a().set(vt,"model.properties.settings.properties",gt);const bt=vt;var ht=a().cloneDeep(bt);ht.title="PAC 3i",ht.key="ge",ht.group="ge";const Et={ge:ht};var Ot=a().cloneDeep(bt);Ot.title="Quantum",Ot.key="Quantum",Ot.group="schneider";var wt=a().cloneDeep(bt);wt.title="Premium",wt.key="Premium",wt.group="schneider";var Ct=a().cloneDeep(bt);Ct.title="M580",Ct.key="M580",Ct.group="schneider";var At=a().cloneDeep(bt);At.title="M380",At.key="M380",At.group="schneider";var Tt=a().cloneDeep(bt);Tt.title="M218",Tt.key="M218",Tt.group="schneider";var kt=a().cloneDeep(bt);kt.title="M238",kt.key="M238",kt.group="schneider";var Dt=a().cloneDeep(bt);Dt.title="M258",Dt.key="M258",Dt.group="schneider";const It={Quantum:Ot,Premium:wt,M580:Ct,M380:At,M218:Tt,M238:kt};var St=a().cloneDeep(bt);St.title="AC500",St.key="AC500",St.group="abb";const Pt={AC500:St};var jt=a().cloneDeep(bt);jt.title="LE扩展以太网模块",jt.key="LE_kz",jt.group="hls";var xt=a().cloneDeep(bt);xt.title="LK",xt.key="LK",xt.group="hls";var Mt=a().cloneDeep(bt);Mt.title="LE",Mt.key="LE",Mt.group="hls";const Bt={LE:Mt,LE_kz:jt,LK:xt};var Lt=a().cloneDeep(bt);Lt.title="DVP-SE",Lt.key="DVPSE",Lt.group="td";var Rt=a().cloneDeep(bt);Rt.title="DVP-EC3",Rt.key="DVP_EC3",Rt.group="td";var Nt=a().cloneDeep(bt);Nt.title="DVP-ES2/EX2/ES2-C",Nt.key="DVP_ES2_EX2_ES2_C",Nt.group="td";var Ft=a().cloneDeep(bt);Ft.title="DVP-EX2",Ft.key="DVP_EX2",Ft.group="td";var Zt=a().cloneDeep(bt);Zt.title="DVP-ES2-C",Zt.key="DVP_ES2_C",Zt.group="td";const Ut={DVPSE:Lt,DVP_EC3:Rt,DVP_ES2_EX2_ES2_C:Nt,DVP_EX2:Ft,DVP_ES2_C:Zt};var Wt=a().cloneDeep(bt);Wt.title="NA200H",Wt.key="NA200H",Wt.group="ndat";var qt=a().cloneDeep(bt);qt.title="NA300",qt.key="NA300",qt.group="ndat";var Vt=a().cloneDeep(bt);Vt.title="NA400",Vt.key="NA400",Vt.group="ndat";var zt=a().cloneDeep(bt);zt.title="NA2000",zt.key="NA2000",zt.group="ndat";var Gt=a().cloneDeep(bt);Gt.title="NA200",Gt.key="NA200",Gt.group="ndat";var Kt=a().cloneDeep(bt);Kt.title="NA200扩展以太网模块",Kt.key="NA200_kz",Kt.group="ndat";const Ht={NA200H:Wt,NA300:qt,NA400:Vt,NA2000:zt,NA200:Gt,NA200_kz:Kt};var Yt=a().cloneDeep(bt);Yt.title="A系列",Yt.key="A_xl",Yt.group="hwplc";var Jt=a().cloneDeep(bt);Jt.title="H系列",Jt.key="H_xl",Jt.group="hwplc";var $t=a().cloneDeep(bt);$t.title="T系列",$t.key="T_xl",$t.group="hwplc";var Qt=a().cloneDeep(bt);Qt.title="C系列",Qt.key="C_xl",Qt.group="hwplc";var Xt=a().cloneDeep(bt);Xt.title="其它",Xt.key="hwplc_else",Xt.group="hwplc";const er={A_xl:Yt,H_xl:Jt,T_xl:$t,C_xl:Qt,hwplc_else:Xt};var tr=a().cloneDeep(bt);tr.title="1769 Rockwell",tr.key="ab_1769",tr.group="ab";var rr=a().cloneDeep(bt);rr.title="1756 Rockwell",rr.key="ab_1756",rr.group="ab";const nr={ab_1769:tr,ab_1756:rr};function ir(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ar(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ir(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var or=["BOOL","BYTE","WORD","DWORD","LWORD","SINT","USINT","INT","UINT","DINT","UDINT","LINT","ULINT","REAL","STRING","WSTRING","TIME","TIMEOFDAY"],lr={enum:or,enum_title:["BOOL","BYTE","WORD","DWORD","LWORD","SINT","USINT","INT","UINT","DINT","UDINT","LINT","ULINT","REAL","STRING","WSTRING","TIME","TIMEOFDAY"].map((function(e,t){return"【".concat(or[t],"】").concat(e)}))},sr={type:"object",title:_r("驱动配置"),properties:{ip:{type:"string",title:_r("设备")},port:{type:"number",title:_r("端口")},localTsap:{type:"string",title:"localTsap(本地传输服务访问点)"},remoteTsap:{type:"string",title:"remoteTsap(远端传输服务访问点)"},timeout:{type:"number",title:_r("链接超时时间")},idleTimeout:{type:"number",title:_r("空闲超时时间")},interval:{type:"number",title:"采集周期 (s)"},network:o.L5},required:["ip","localTsap","remoteTsap"]},ur={type:"object",title:_r("驱动配置"),properties:{ip:{type:"string",title:_r("设备")},rack:{type:"number",title:_r("机架号")},slot:{type:"number",title:_r("槽位")},timeout:{type:"number",title:_r("链接超时时间")},idleTimeout:{type:"number",title:_r("空闲超时时间")},interval:{type:"number",title:"采集周期 (s)"},network:o.L5},required:["ip","rack","slot"]},cr={type:"object",properties:{ip:{type:"string",title:_r("设备")},port:{type:"number",title:_r("端口")},localTsap:{type:"string",title:"localTsap(本地传输服务访问点)"},remoteTsap:{type:"string",title:"remoteTsap(远端传输服务访问点)"},timeout:{type:"number",title:_r("链接超时时间")},idleTimeout:{type:"number",title:_r("空闲超时时间")},interval:{type:"number",title:"采集周期 (s)"}},required:["ip","localTsap","remoteTsap"]},pr={type:"object",properties:{ip:{type:"string",title:_r("设备")},rack:{type:"number",title:_r("机架号")},slot:{type:"number",title:_r("槽位")},timeout:{type:"number",title:_r("链接超时时间")},idleTimeout:{type:"number",title:_r("空闲超时时间")},interval:{type:"number",title:"采集周期 (s)"}},required:["ip","rack","slot"]},dr={title:_r("数据点"),type:"array",items:{type:"object",properties:{id:{type:"string",title:_r("标识")},name:{type:"string",title:_r("名称"),fieldType:"languageInput"},area:{type:"number",title:_r("区域"),enum:[4,5,6,7,30,129,130,131,132,31],enum_title:["S顺序控制存储区","SM特殊存储区","AI模拟量输入","AQ模拟量输出","C计数器","I数字量输入","Q数字量输出","M位存储区","V变量存储区","T定时器"]},dataType:ar({type:"string",title:_r("数据类型")},lr),bitIndex:{type:"number",title:_r("位下标"),enum:[0,1,2,3,4,5,6,7],enum_title:["0","1","2","3","4","5","6","7"]},start:{type:"number",title:_r("起始地址")},unit:{type:"string",title:_r("单位")},fixed:{type:"number",title:_r("小数位数")},mod:{type:"number",title:_r("缩放比例")},tagValue:o.A6},required:["name","id","area","dataType","start"]}},mr={title:_r("数据点"),type:"array",items:{type:"object",properties:{id:{type:"string",title:_r("标识")},name:{type:"string",title:_r("名称")},area:{type:"number",title:_r("区域"),enum:[6,7,131,31,30,132],enum_title:["I过程映射输入","Q过程映射输出","M标志位存储区","T定时器","C计数器","DB数据块"]},dBNumber:{type:"number",title:_r("DB号")},unit:{type:"string",title:_r("单位")},dataType:ar({type:"string",title:_r("数据类型")},lr),bitIndex:{type:"number",title:_r("位下标"),enum:[0,1,2,3,4,5,6,7],enum_title:["0","1","2","3","4","5","6","7"]},start:{type:"number",title:_r("起始地址")},amount:{type:"number",title:_r("字节长度")},tagValue:o.A6},required:["id","name","area","dataType","start"]}},fr={title:_r("指令"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},form:o.cr,ops:{type:"array",title:_r("指令"),items:{type:"object",properties:{area:{type:"number",title:_r("区域"),enum:[4,5,6,7,30,129,130,131,132,31],enum_title:["S顺序控制存储区","SM特殊存储区","AI模拟量输入","AQ模拟量输出","C计数器","I数字量输入","Q数字量输出","M位存储区","V变量存储区","T定时器"]},dataType:ar({type:"string",title:_r("数据类型")},lr),bitIndex:{type:"number",title:_r("位下标"),enum:[0,1,2,3,4,5,6,7],enum_title:["0","1","2","3","4","5","6","7"]},start:{type:"number",title:_r("起始地址")},param:{type:"string",title:_r("绑定表单项"),description:_r("填写表单项的名称")},value:{type:"number",title:_r("默认写入值")}},required:["area","dataType","start"]}}}}},yr={title:_r("指令"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},form:o.cr,ops:{type:"array",title:_r("指令"),items:{type:"object",properties:{area:{type:"number",title:_r("区域"),enum:[6,7,131,31,30,132],enum_title:["I过程映射输入","Q过程映射输出","M标志位存储区","T定时器","C计数器","DB数据块"]},dBNumber:{type:"number",title:_r("DB号")},bitIndex:{type:"number",title:_r("位下标"),enum:[0,1,2,3,4,5,6,7],enum_title:["0","1","2","3","4","5","6","7"]},dataType:ar({type:"string",title:_r("数据类型")},lr),start:{type:"number",title:_r("起始地址")},amount:{type:"number",title:_r("字节长度")},param:{type:"string",title:_r("绑定表单项"),description:_r("填写表单项的名称")},value:{type:"number",title:_r("默认写入值")},ispbutton:{type:"boolean",title:_r("是否点动")}},required:["area","dataType","start"]}}}}};const vr={"siemens-s7-200s":{title:"200/200smart",key:"siemens-s7-200s",group:"siemens",model:{properties:{settings:sr,tags:dr,commands:fr}},device:{properties:{settings:cr,tags:dr,commands:fr}}},"siemens-s7":{title:"300/400/1200/1500",key:"siemens-s7",group:"siemens",model:{properties:{settings:ur,tags:mr,commands:yr}},device:{properties:{settings:pr,tags:mr,commands:yr}}}};var gr=a().cloneDeep(bt);gr.title="G3系统",gr.key="G3_system",gr.group="zk";var br=a().cloneDeep(bt);br.title="G5系统",br.key="G5_system",br.group="zk";const hr={G3_system:gr,G5_system:br};var Er=a().cloneDeep(bt);Er.title="OPC DA",Er.key="opc_da",Er.group="opc";var Or=a().cloneDeep(bt);Or.title="OPC UA",Or.key="opc_ua",Or.group="opc";const wr={opc_da:Er,opc_ua:Or};function Cr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ar(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Cr(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Tr=Ar(Ar(Ar(Ar(Ar(Ar(Ar(Ar(Ar(Ar(Ar({},vr),nr),Et),It),Pt),Bt),hr),Ut),Ht),er),wr);var kr=__webpack_require__(7462),Dr={title:_r("数据点"),type:"array",items:{type:"object",properties:{id:{type:"string",title:_r("标识")},name:{type:"string",title:_r("名称"),fieldType:"languageInput"},columnName:{type:"string",title:_r("列名")},unit:{type:"string",title:_r("单位")},sourceValue:{type:"string",title:_r("-原值")},targetValue:{type:"string",title:_r("-目标值")}},required:["id","name","columnName"]}},Ir={title:_r("设备配置"),type:"object",properties:{driverName:{type:"string",title:_r("关系库名称"),enum:["mysql","postgres","sqlite3","oci8","sqlserver","access"],enum_title:["MYSQL","POSTGRES","SQLITE3","ORACLE","SQLSERVER","ACCESS"]},username:{type:"string",title:_r("用户名")},password:{type:"string",title:_r("密码")},ip:{type:"string",title:_r("IP地址")},port:{type:"number",title:_r("端口")},dbName:{type:"string",title:_r("数据库名")},filepath:{type:"string",title:_r("文件路径")},serverName:{type:"string",title:_r("服务名")},sql:{type:"string",title:_r("SQL语句"),field:{component:function(e){var t=e.input;return n().createElement(B.C,(0,kr.Z)({is:"CodeEditor",height:"180",width:"100%",theme:"vs-dark",language:"sql"},t))}}},driver:{type:"string",title:_r("驱动名称"),description:"eg:Microsoft Access Driver (*.mdb, *.accdb)"},dbq:{type:"string",title:_r("数据文件路径")},logicalUid:{type:"string",title:"设备编号映射列名(默认deviceId)"},interval:{type:"number",title:_r("采集周期")},network:o.L5},required:["driverName"]};const Sr={title:"数据库(DB)",key:"db-driver",model:{properties:{settings:Ir,tags:Dr}},device:{properties:{settings:Ir,tags:Dr}}};var Pr={title:_r("模型配置"),type:"object",properties:{port:{type:"string",title:_r("端口")},interval:{type:"number",title:"采集周期 (s)",description:_r("数据点的采集周期，不定义默认5秒")},network:o.L5},required:["port","interval"]},jr={title:_r("数据点"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称"),fieldType:"languageInput"},id:{type:"string",title:"id"}},required:["name","id"]}},xr={title:_r("设备配置"),type:"object",properties:{address:{type:"string",title:_r("仪表源地址")}},required:["address"]},Mr={title:_r("指令"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},form:o.cr,ops:{type:"array",title:_r("指令"),items:{type:"object",properties:{op:{type:"string",title:_r("操作"),enum:["readConfig","writeConfig"]},param:{type:"string",title:_r("绑定表单项"),description:_r("填写表单项的名称")}}}}}}};const Br={title:"消防GB/T 26875.3",key:"gbt268753",group:"industry",model:{properties:{settings:Pr,tags:jr,commands:Mr}},device:{properties:{settings:xr,tags:jr,commands:Mr}}};var Lr={type:"object",title:_r("驱动配置"),properties:{interval:{type:"number",title:"采集周期 (s)",description:_r("数据点的采集周期，不定义默认5秒")},network:o.L5}},Rr={title:_r("数据点"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称"),fieldType:"languageInput"},id:{type:"string",title:_r("标识")},unit:{type:"string",title:_r("单位")},fixed:{type:"number",title:_r("小数位数")},mod:{type:"number",title:_r("缩放比例")},tagValue:o.A6},required:["name","id"]}},Nr={title:_r("指令"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},form:o.cr}}};const Fr={title:"交通部 JT-808",key:"jt808",model:{properties:{settings:Lr,tags:Rr,commands:Nr}},device:{properties:{settings:Lr,tags:Rr,commands:Nr}}};function Zr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ur(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Zr(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wr=["Int8","UInt8","Int8-16BE","Int8-16LE","UInt8-16BE","UInt8-16LE","Int16BE","Int16LE","UInt16BE","UInt16LE","Int32BE","Int32LE","Int32BE-","Int32LE-","UInt32BE","UInt32LE","UInt32BE-","UInt32LE-","FloatBE","FloatLE","FloatBE-","FloatLE-","DoubleBE","DoubleLE","DoubleBE-","DoubleLE-","Boolean","String","HEX","BCD"],qr={enum:Wr,enum_title:[_r("有符号字节"),_r("无符号字节"),_r("有符号字节-16位的前8位"),_r("有符号字节-16位的后8位"),_r("无符号字节-16位的前8位"),_r("无符号字节-16位的后8位"),_r("有符号整数-高位在前"),_r("有符号整数-低位在前"),_r("无符号整数-高位在前"),_r("无符号整数-低位在前"),_r("有符号长整数-高位在前"),_r("有符号长整数-低位在前"),_r("有符号长整数-高位在前-字节交换"),_r("有符号长整数-低位在前-字节交换"),_r("无符号长整数-高位在前"),_r("无符号长整数-低位在前"),_r("无符号长整数-高位在前-字节交换"),_r("无符号长整数-低位在前-字节交换"),_r("浮点数-高位在前"),_r("浮点数-低位在前"),_r("浮点数-高位在前-字节交换"),_r("浮点数-低位在前-字节交换"),_r("双精度浮点数-高位在前"),_r("双精度浮点数-低位在前"),_r("双精度浮点数-高位在前-字节交换"),_r("双精度浮点数-低位在前-字节交换"),_r("布尔型"),_r("字符串-ASCII编码"),_r("16位数字"),_r("BCD码")].map((function(e,t){return"【".concat(Wr[t],"】").concat(e)}))},Vr={type:"object",title:_r("心跳配置"),properties:{interval:{type:"number",title:_r("心跳周期"),description:_r("毫秒")},tag:{title:_r("数据点"),type:"object",properties:{offset:{type:"number",title:_r("偏移地址")},area:{type:"number",title:_r("读取区域"),enum:[1,2,3,4],enum_title:[_r("线圈状态"),_r("输入状态"),_r("保持寄存器"),_r("输入寄存器")]},dataType:Ur({type:"string",title:_r("数据类型")},qr),length:{type:"number",title:_r("寄存器个数")}}}}},zr={title:_r("驱动配置"),type:"object",properties:{phone:{type:"string",title:_r("手机号")},unit:{type:"number",title:_r("站号")},onlineSetting:{type:"object",title:_r("在线判断方式"),properties:{type:{type:"string",title:_r("类型"),enum:["heartbeat","timeout","ping"],enum_title:["心跳检测","通讯超时","网络检查"]},heartBreak:Vr},field:{effect:function(e,t,r){var n=e.value;"heartbeat"==(null==n?void 0:n.type)?t.setFieldData("".concat(null==r?void 0:r.key,".heartBreak"),{display:!0}):t.setFieldData("".concat(null==r?void 0:r.key,".heartBreak"),{display:!1})}}},retrySetting:{type:"object",title:_r("重试配置"),properties:{interval:{type:"number",title:"重试间隔 (毫秒)",description:_r("毫秒")},times:{type:"number",title:_r("重试次数")}}},mergeInterval:{type:"number",title:_r("地址合并间隔"),description:_r("同一个资产下同一个分区的数据点起始地址按照该间隔合并读取")},interval:{type:"number",title:_r("采集周期 (秒)"),description:_r("秒"),min:1,field:{validate:function(e,t){var r,n,i,a,o=null==t||null===(r=t.settings)||void 0===r||null===(n=r.retrySetting)||void 0===n?void 0:n.times,l=null==t||null===(i=t.settings)||void 0===i||null===(a=i.retrySetting)||void 0===a?void 0:a.interval;if(e&&o&&l)return o*l/1e3>=e?"采集周期不能小于等于，重试间隔*重试次数的总时长":null}}},autoAddr:{type:"boolean",title:_r("自动化地址"),description:_r("自动化地址在发起modbus请求时地址位会减一")},network:o.L5}},Gr={type:"object",properties:{phone:{type:"string",title:_r("手机号")},unit:{type:"number",title:_r("站号")},overwrite:{type:"boolean",title:_r("覆盖默认点表"),description:_r("选择该项后，设备模型中的点表将被设备点表覆盖")},address:{title:_r("点表"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},id:{type:"string",title:_r("标识")},offset:{type:"number",title:_r("偏移地址")},area:{type:"number",title:_r("读取区域"),enum:[1,2,3,4],enum_title:["线圈状态","输入状态","保持寄存器","输入寄存器"]},dataType:Ur({type:"string",title:_r("数据类型")},qr),length:{type:"number",title:_r("寄存器个数")},mod:{type:"number",title:_r("缩放比例")},tagValue:o.A6}}},mergeInterval:{type:"number",title:_r("地址合并间隔"),description:_r("同一个资产下同一个分区的数据点起始地址按照该间隔合并读取")},onlineSetting:{type:"object",title:_r("在线判断方式"),properties:{type:{type:"string",title:_r("类型"),enum:["heartbeat","timeout","ping"],enum_title:["心跳检测","通讯超时","网络检查"]},heartBreak:Vr},field:{effect:function(e,t,r){var n=e.value;"heartbeat"==(null==n?void 0:n.type)?t.setFieldData("".concat(null==r?void 0:r.key,".heartBreak"),{display:!0}):t.setFieldData("".concat(null==r?void 0:r.key,".heartBreak"),{display:!1})}}}}},Kr={title:_r("数据点"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称"),fieldType:"languageInput"},id:{type:"string",title:_r("标识")},area:{type:"number",title:_r("读取区域"),enum:[1,2,3,4],enum_title:["线圈状态","输入状态","保持寄存器","输入寄存器"]},offset:{type:"number",title:_r("偏移地址")},index:{type:"number",title:_r("下标"),description:_r("适用于寄存器区控制多开关情况")},dataType:Ur({type:"string",title:_r("数据类型")},qr),length:{type:"number",title:_r("寄存器个数")},unit:{type:"string",title:_r("单位")},fixed:{type:"number",title:_r("小数位数")},mod:{type:"number",title:_r("缩放比例")},tagValue:o.A6},required:["name","id","area","offset","dataType"]}},Hr={title:_r("指令"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},form:o.cr,ops:{type:"array",title:_r("指令"),items:{type:"object",properties:{area:{type:"string",title:_r("写入区域"),enum:["coil","register"],enum_title:["线圈状态","保持寄存器"]},offset:{type:"number",title:_r("偏移地址")},index:{type:"number",title:_r("下标"),description:_r("适用于寄存器区控制多开关情况")},dataType:Ur({type:"string",title:_r("数据类型")},qr),param:{type:"string",title:_r("绑定表单项"),description:_r("填写表单项的名称")},value:{type:"string",title:_r("默认写入值"),fieldType:"languageInput"},single:{type:"boolean",title:_r("单字节")}}}}}}};const Yr={title:_r("g340t协议"),key:"g340t",model:{properties:{settings:zr,tags:Kr,commands:Hr}},device:{properties:{settings:Gr,tags:Kr,commands:Hr}}};var Jr={type:"object",title:_r("驱动配置"),properties:{ip:{type:"string",format:"ipv4",title:_r("设备"),fieldType:"ip"},slot:{type:"number",title:_r("槽位")},interval:{type:"number",title:"采集周期 (s)",description:_r("数据点的采集周期，不定义默认5秒")},network:o.L5},required:["ip","slot"]},$r={title:_r("数据点"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称"),fieldType:"languageInput"},id:{type:"string",title:_r("标识")},tagname:{type:"string",title:_r("tag点名称")},program:{type:"string",title:_r("程序名称")},unit:{type:"string",title:_r("单位")},fixed:{type:"number",title:_r("小数位数")},mod:{type:"number",title:_r("缩放比例")},tagValue:o.A6},required:["name","id","tagname"]}},Qr={title:_r("指令"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},form:o.cr,ops:{type:"array",title:_r("指令"),items:{type:"object",properties:{tagname:{type:"string",title:_r("标签名称")},program:{type:"string",title:_r("程序名称")},datatype:{type:"string",title:_r("数据类型"),enum:["BOOL","SINT","INT","DINT","LINT","USINT","UINT","UDINT","REAL","LREAL","STIME","DATE","TIME_AND_DAY","DATE_AND_STRING","STRING","WORD","DWORD","BIT_STRING","LWORD","STRING2","FTIME","LTIME","ITIME","STRINGN","SHORT_STRING","TIME","EPATH","ENGUNIT","STRINGI","STRUCT"]},param:{type:"string",title:"key"},value:{type:"string",title:_r("默认写入值"),fieldType:"languageInput"}},required:["tagname","datatype","value"]}}}}};const Xr={title:"AB PLC MIC",key:"abplc_mic",group:"ab",model:{properties:{settings:Jr,tags:$r,commands:Qr}},device:{properties:{settings:Jr,tags:$r,commands:Qr}}};var en={videoIP:{type:"string",title:"1078视频服务器IP"},videoPort:{type:"number",title:"1078视频服务器端口"},network:o.L5},tn={title:_r("数据点"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称"),fieldType:"languageInput"},id:{type:"string",title:_r("标识")},unit:{type:"string",title:_r("单位")},fixed:{type:"number",title:_r("小数位数")},mod:{type:"number",title:_r("缩放比例")},tagValue:o.A6},required:["name","id"]}},rn={title:_r("指令"),type:"array",items:{type:"object",properties:{name:{type:"string",title:_r("名称")},form:o.cr}}};function nn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const an=function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?nn(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({modbus:y,modbus_a11:A,opcda:S,opcua:M,"driver-mqtt-client":q,aisenz_a11:V,aisenz_tdm:J,aisenz_modbus:Y,abplc:te,lwm2m:Te,beckhoff:ue,onenet:me,scada:ve,cae:Ee,bacnet:Re,test:Ue,flowmeter:Ge,botda:Ye,gatewt:pt,gatexr:yt,gps_tdm:$,modbus_rtu:ot,abplc_mic:Xr,"db-driver":Sr,gbt268753:Br,jt808:Fr,iec104:{title:"IEC 104",key:"IEC 104",group:"industry",model:{properties:{settings:en,tags:tn,commands:rn}},device:{properties:{settings:en,tags:tn,commands:rn}}},dnp3:Pe,g340t:Yr},Tr);_r("通用驱动"),_r("无线驱动"),_r("行业驱动"),_r("厂商驱动"),_r("倍福"),_r("和利时"),_r("中控"),_r("台达"),_r("永宏"),_r("南大傲拓");var on=__webpack_require__(2982);var ln=__webpack_require__(885),sn=__webpack_require__(6640),un=__webpack_require__(6472),cn=__webpack_require__(3204);function pn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dn(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?pn(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mn=function(t){var r,i,a=t.commandForm,o=t.value,l=t.onChange,s=t.selectType,u=t.noCard,c=useI18n().t,p=n().useState(),d=(0,ln.Z)(p,2),m=d[0],f=d[1],_=n().useState(c("工作表数据")),y=(0,ln.Z)(_,2),v=y[0],g=y[1],b=n().useState(!1),h=(0,ln.Z)(b,2),E=h[0],O=h[1],w=null!==(r=null!==(i=a.tableValue)&&void 0!==i?i:a.tableValue2)&&void 0!==r?r:null;return n().useEffect((function(){w&&(O(!0),(0,e.api)({name:"core/t/schema"}).get(w).then((function(e){var t;O(!1),f(dn(dn({},null!==(t=null==e?void 0:e.schema)&&void 0!==t?t:{}),{},{name:"core/t/".concat(w,"/d")})),g(null==e?void 0:e.name)})))}),[w]),E?n().createElement(sn.LoadingOutlined,{style:{marginLeft:20}}):m?n().createElement(fn,{input:{value:o,onChange:l},noCard:u,label:v,schema:m,selectType:s,relateSchema:{}}):n().createElement("span",null,c("未选择工作表"))},fn=function(e){var t=useI18n().t,r=e.input,i=r.value,o=r.onChange,l=e.label,s=e.schema,u=e.selectType,c=e.noCard,p=n().useState(!1),d=(0,ln.Z)(p,2),m=d[0],f=d[1],_=Math.floor(1e10*Math.random());if(a().isEmpty(s))return null;var y=dn(dn({},s),{},{filters:{submenu:s.properties?Object.keys(s.properties).filter((function(e){return s.properties[e].filterFields})):[]},itemActions:"multiple"===u?null:[function(e){var t=e.item;return n().createElement(L.Button,{onClick:function(){return function(e){f(!1);var t=dn({},e);delete t.deletePermission,delete t.editPermission,o(t)}(t)}},_r("选择"))}],batchActions:"multiple"===u?void 0:null,dataTableProps:function(e){return{scroll:{x:"100%"},columns:e.map((function(e){return dn(dn({},e),{},{width:"__action__"===e.key?100:e.width||150})}))}},components:{DataEmpty:function(e){return n().createElement(L.Card,null,n().createElement(L.Empty,{description:"暂无数据",imageStyle:{height:100}}))}}});return n().createElement(n().Fragment,null,n().createElement(L.Button,{style:{display:"block"},onClick:function(){return f(!0)}},t("数据选择")),!i||c?null:a().isArray(i)?i.map((function(e){return n().createElement(yn,{item:e,schema:s})})):a().isObject(i)?n().createElement(yn,{item:i,schema:s}):null,n().createElement(un.Model,{modelKey:_,key:_,schema:y},n().createElement(L.Modal,{title:l,width:"70%",visible:m,onCancel:function(){return f(!1)},footer:"multiple"===u?[n().createElement(L.Button,{onClick:function(){return f(!1)}},t("取消")),n().createElement(_n,{selectMany:function(e){f(!1);var t=[];e&&e.length>0&&e.forEach((function(e){var r=dn({},e);delete r.deletePermission,delete r.editPermission,t.push(r)})),o(t)},value:i})]:null},n().createElement(un.ModelBlock,{name:"model.list.submenu"}),n().createElement(B.C,{is:"Model.DataTable"}),n().createElement("div",{style:{marginTop:".5rem"}},n().createElement(B.C,{is:"Model.Pagination"})))))},_n=function(t){var r=t.selectMany,i=t.value,a=useI18n().t,o=(0,e.use)("model.select");return n().useEffect((function(){i&&i.length>0&&i.forEach((function(e){o.onSelect(e,!0)}))}),[]),n().createElement(L.Button,{type:"primary",onClick:function(){r(o.selected)}},a("确认"))},yn=function(t){var r,i,o=t.item,l=t.schema,s=[],u=null===(r=e.app.apps.find((function(e){return"iot.custom"===e.name})))||void 0===r?void 0:r.fieldRenders;return null===(i=l.listFields)||void 0===i||i.forEach((function(t){var r,i=l.properties[t];r="attachment"===i.fieldType||"attachments"===i.fieldType?n().createElement(B.C,{is:"ShowAttachment",type:i.styleType,value:null==o?void 0:o[t],maxLength:3}):u(e.app)(null,i)?u(e.app)(null,i)({value:null==o?void 0:o[t],wrap:"span"}):a().isObject(null==o?void 0:o[t])?null==o?void 0:o[t].name:null==o?void 0:o[t],s.push({title:null==i?void 0:i.title,value:r})})),n().createElement(L.Card,{style:{width:300,height:200,overflowY:"scroll",display:"inline-block",margin:"10px 10px 0px 0px"}},s.map((function(e,t){return n().createElement(L.Row,{key:t,style:{minHeight:35}},n().createElement(L.Col,{span:8},e.title,"："),n().createElement(L.Col,{span:16},e.value))})))},vn=function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=t.schema,o=t.mutualRules;if(null!=o&&o[a.key]&&r({schema:a,mutualRules:o[a.key]},i)(n),"object"===a.type)for(var l in a.properties)e({schema:a.properties[l],mutualRules:o},r,n,i+l+".");else"array"===a.type&&e({schema:a.items,mutualRules:o},r,n,i.substring(0,i.length-1)+"[i].")},gn=function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=t.schema,o=t.errorNotice,l={};if(null!=o&&o[a.key]){var s=r({schema:a,errorNotice:o[a.key]},i).validate(n);s&&(l=dn(dn({},l),s))}if("object"===a.type)for(var u in a.properties){var c=e({schema:a.properties[u],errorNotice:o},r,n,i+u+".");c&&(l=dn(dn({},l),c))}else if("array"===a.type){var p=e({schema:a.items,errorNotice:o},r,n,i.substring(0,i.length-1)+"[i].");p&&(l=dn(dn({},l),p))}return l},bn=function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=t.schema,o=t.errorNotice,l=!0;if(null!=o&&o[a.key]){var s=r({schema:a,errorNotice:o[a.key]},i).getValidateResult(n);l=l&&s}if("object"===a.type)for(var u in a.properties){var c=e({schema:a.properties[u],errorNotice:o},r,n,i+u+".");l=l&&c}else if("array"===a.type){var p=e({schema:a.items,errorNotice:o},r,n,i.substring(0,i.length-1)+"[i].");l=l&&p}return l},hn=function(t){var r,i,o=t.formSchema,l=t.commandForm,s=t.value,u=t.onChange,c=t.vis,p=t.type,d=t.onCancel,m=t.group,f=useI18n().t,_=n().useState(!1),y=(0,ln.Z)(_,2),v=y[0],g=y[1],b=o.schema,h=o.mutualRules,E=o.errorNotice,O=e.app.get("fieldRules"),w=O.getMutualRules,C=O.getErrorNotice2;h&&(b.formEffect=function(e){vn(o,w,e)}),E&&(r=function(e){return gn(o,C,e)},i=function(e){return bn(o,C,e)});var A=m?{group:m}:null,T=function(e){m&&i&&!i(e)||(u(e),g(!1))};return n().createElement(n().Fragment,null,"front"===p?null:n().createElement(L.Button,{onClick:function(){return g(!0)}},f("点击配置")),n().createElement(L.Modal,{title:f("配置写入值"),width:"70%",visible:"front"===p?c:v,footer:null,onCancel:function(e){"front"===p?(e.stopPropagation(),d()):g(!1)}},n().createElement(cn.SchemaForm,(0,kr.Z)({formKey:"command-"+l.name,schema:b,validate:r,initialValues:a().cloneDeep(s),onSubmit:T,component:function(e){return n().createElement(On,(0,kr.Z)({},e,{group:m,handleSubmit:T}))}},A))))},En=function(t){var r,i,o,l=t.formSchema,s=t.commandForm,u=t.value,c=t.onChange,p=t.vis,d=t.type,m=t.onCancel,f=t.group,_=useI18n().t,y=n().useState(!1),v=(0,ln.Z)(y,2),g=v[0],b=v[1],h=e.app.get("fieldRules"),E=h.getMutualRules,O=h.getErrorNotice2,w=a().cloneDeep(l),C=a().cloneDeep(null==w||null===(r=w.properties)||void 0===r||null===(i=r.arr)||void 0===i?void 0:i.items),A=function(){};null!=C&&C.schema&&(w.properties.arr.items=w.properties.arr.items.schema,null!=C&&C.mutualRules&&(w.formEffect=E(C,"arr[i].")),null!=C&&C.errorNotice&&(A=O(C,"arr[i].").validate,o=O(C,"arr[i].").getValidateResult));var T=f?{group:f}:null,k=function(e){f&&o&&!o(e)||(c(null==e?void 0:e.arr),b(!1))};return n().createElement(n().Fragment,null,"front"===d?null:n().createElement(L.Button,{onClick:function(){return b(!0)}},_("点击配置")),n().createElement(L.Modal,{title:_("配置写入值"),width:"70%",visible:"front"===d?p:g,footer:null,onCancel:function(e){"front"===d?(e.stopPropagation(),m()):b(!1)}},n().createElement(cn.SchemaForm,(0,kr.Z)({formKey:"command-"+s.name,schema:w,validate:A,initialValues:{arr:u},onSubmit:k,component:function(e){return n().createElement(On,(0,kr.Z)({},e,{group:f,handleSubmit:k}))}},T))))},On=function(t){var r=t.children,i=t.invalid,a=t.group,o=t.handleSubmit,l=(0,e.use)("form").form,s=useI18n().t;return n().createElement(n().Fragment,null,r,n().createElement(L.Row,null,n().createElement(L.Col,{offset:5},n().createElement(L.Button,{type:"primary",invalid:!a&&i,onClick:function(){return o(l.getState().values)}},s("保存")))))};var wn=L.Select.Option;var Cn=__webpack_require__(2056),An=__webpack_require__(3379),Tn=__webpack_require__.n(An),kn=__webpack_require__(1424);function Dn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function In(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Dn(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Tn()(kn.Z,{insert:"head",singleton:!1}),kn.Z.locals;var Sn=L.Tabs.TabPane,Pn=L.Input.Search,jn=L.Typography.Text,xn=function(e){var t=e.item,r=e.installSuccess,i=e.onSuccess,a=e.saveParams,o=e.handleOk,l=e.driver_install,s=e.runMode,u={position:"absolute",top:"5px",right:"10px",marginTop:10},c=n().createElement(L.Popconfirm,{title:_t1("选择该驱动类型后，驱动的运行模式及驱动类型无法修改，请谨慎操作！是否确认选择？"),onConfirm:function(){return a(t)},okText:_t1("确认"),cancelText:_t1("取消"),overlayStyle:{width:280}},n().createElement(L.Button,{type:"primary",style:u},_t1("选择驱动"))),p=function(){return"node"==s&&l&&l!=(null==t?void 0:t.name)?n().createElement(L.Tooltip,{title:"当前选择的集群节点，只可选择当前集群的驱动"},n().createElement(L.Button,{disabled:!0,type:"primary",style:u},_t1("选择驱动"))):c};return n().createElement(L.Col,{span:6},n().createElement(L.Card,{hoverable:!0},n().createElement("span",{className:"description"},t.version),n().createElement("span",{className:"repo-name"},t.name),n().createElement("span",{className:"description"},n().createElement(jn,{style:{width:320},ellipsis:{tooltip:t.description}},t.description)),n().createElement(Bn,(0,kr.Z)({},t,{onSuccess:i,installSuccess:r,handleOk:o,type:"front"}),n().createElement(p,null))))},Mn=function(e){var t,r=e.drivers,i=e.onSuccess,o=e.installSuccess,l=e.installService,s=e.setVisible,u=e.searchValue,c=e.saveParams,p=e.handleOk,d=e.driver_install,m=e.runMode,f=e.setDriverId,_=e.template,y=r.reduce((function(e,t){var r=null==t?void 0:t.driverType;return a().isArray(r)&&r.length>1?(e[r[0]]=In({},e[r[0]]||{}),e[r[0]][r[1]]=[].concat((0,on.Z)(e[r[0]][r[1]]||[]),[t])):e[r||"通用驱动"]=[].concat((0,on.Z)(e[r]||[]),[t]),e}),{}),v=function(e){var t=e.dataKeys;return t.length>0?n().createElement(L.Row,{className:"driver-add"},t.map((function(e){return n().createElement(xn,{item:e,onSuccess:i,handleOk:p,saveParams:c,driver_install:d,runMode:m,installService:l,installSuccess:o})}))):n().createElement(B.C,{is:"NoData",style:{margin:" 0 auto"}})},g={通用驱动:y["通用驱动"],厂商驱动:y["厂商驱动"]};return n().createElement(L.Tabs,null,_?null:null===(t=Object.keys(g))||void 0===t?void 0:t.map((function(e){return a().isArray(g[e])?n().createElement(Sn,{tab:_t1(e),key:e},n().createElement(v,{dataKeys:g[e]}),n().createElement(Ln,{drivers:r,searchValue:u,setVisible:s,setDriverId:f,installService:l})):g[e]?n().createElement(Sn,{tab:_t1(e),key:e},n().createElement(L.Tabs,{tabPosition:"left"},null===(t=Object.keys(g[e]))||void 0===t?void 0:t.map((function(t){return n().createElement(Sn,{tab:_t1(t),key:t},n().createElement(v,{dataKeys:g[e][t]}))})))):void 0;var t})),n().createElement(Sn,{tab:_t1("自建驱动"),key:"自建驱动"},n().createElement(Ln,{drivers:r,searchValue:u,setVisible:s,setDriverId:f,installService:l})))},Bn=function(t){var r,i=t.id,a=t.index,o=t.name,l=t.installSuccess,s=t.children,u=t.type,c=t.handleOk,p=t.onSuccess,d=n().useRef(),m=n().useState({}),f=(0,ln.Z)(m,2),_=f[0],y=f[1];n().useEffect((function(){return i?d.current=setInterval((function(){(0,e.api)({name:"driver"}).fetch("/installInfo/".concat(i),{method:"GET"}).then((function(e){var t=e.status,r=e.json;200===t&&(r.run?100===r.run.progress?(l(a),L.message.success(_t1("创建并启动服务成功！")),y({type:_t1("正在启动"),progress:r.run.progress}),p(o),c()):r.run.err?(clearInterval(d.current),d.current=null,l(a),L.message.error(r.run.err)):y({type:_t1("正在启动"),progress:r.run.progress}):r.install?100===r.install.progress&&"front"===u?y({type:_t1("正在安装"),progress:r.install.progress}):r.install.err?(clearInterval(d.current),d.current=null,l(a),L.message.error(r.install.err)):y({type:_t1("正在安装"),progress:r.install.progress}):r.download?r.download.err?(clearInterval(d.current),d.current=null,l(a),L.message.error(r.download.err)):(L.message.success({key:"downloadDriver",content:_t1("正在拉取驱动")}),y({type:_t1("正在下载"),progress:r.download.progress})):y({}))})).catch((function(e){clearInterval(d.current),d.current=null}))}),1e3):d.current&&(clearInterval(d.current),d.current=null),function(){clearInterval(d.current)}}),[i]);var v=isNaN(parseInt(_.progress))?0:parseInt(_.progress);return i?n().createElement(n().Fragment,null,n().createElement(L.Tag,{color:"blue"},null!==(r=_.type)&&void 0!==r?r:_t1("正在下载")),n().createElement(sn.SyncOutlined,{style:{width:14,height:14,marginTop:19},spin:!0}),n().createElement(L.Progress,{percent:v,status:"active"})):s},Ln=function(t){var r=t.drivers,i=t.installService,o=t.setDriverId,l=t.setVisible,s=t.searchValue,u=t.share,c=n().useRef(),p=n().useState([]),d=(0,ln.Z)(p,2),m=d[0],f=d[1],_=n().useState(!1),y=(0,ln.Z)(_,2),v=y[0],g=y[1],b=n().useState(!1),h=(0,ln.Z)(b,2),E=h[0],O=h[1],w=n().useState(!1),C=(0,ln.Z)(w,2),A=C[0],T=C[1],k=n().useState(null),D=(0,ln.Z)(k,2),I=D[0],S=D[1],P=n().useState(null),j=(0,ln.Z)(P,2),x=j[0],M=j[1],R=n().useState(!1),N=(0,ln.Z)(R,2),F=N[0],Z=N[1],U=n().useState([]),W=(0,ln.Z)(U,2),q=W[0],V=W[1],z=(0,e.use)("auth.user").user,G=(0,e.use)("form"),K=G.formState.values,H=G.form;n().useEffect((function(){g(!0),u?(0,e.api)({name:"core"}).fetch("/mediaLibrary?catalog=共享驱动模板",{}).then((function(e){var t=e.json;f(t.map((function(e){return In(In({},e),{},{share:!0})}))),g(!1)})):(0,e.api)({name:"core"}).fetch("/mediaLibrary?catalog=我的文件/驱动模板",{}).then((function(t){var r=t.json;f(r),(0,e.api)({name:"core"}).fetch("/mediaLibrary?catalog=共享驱动模板",{}).then((function(e){var t=e.json;f((function(e){var r=[].concat((0,on.Z)(e),(0,on.Z)(null==t?void 0:t.map((function(e){return In(In({},e),{},{share:!0})}))));return c.current=r,r})),g(!1)})),g(!1)}))}),[]),n().useEffect((function(){if((null==m?void 0:m.length)>0){var t=m.map((function(t){return(0,e.api)({name:""}).fetch(null==t?void 0:t.filePath,{})}));Promise.all(t).then((function(e){var t=e.reduce((function(e,t){var r=null==t?void 0:t.json,n=null==r?void 0:r.templateName;return n&&(e[n+"&"+(null==r?void 0:r.auth)]=null==r?void 0:r.description),e}),{});V(t)})).catch((function(e){console.log("出错了",e)}))}}),[m]),n().useEffect((function(){var e,t=s?null===(e=c.current)||void 0===e?void 0:e.filter((function(e){return a().includes(null==e?void 0:e.name,s)})):c.current;f(t)}),[s,r]);var Y=/(\..*){2,}/,J="?x-request-project="+(0,e.api)({name:"media"}).headers["x-request-project"]+"&token="+(null==z?void 0:z.token);return v?n().createElement(B.Loading,null):n().createElement(L.Row,{className:"driver-add"},null==m?void 0:m.filter((function(e){return Y.test(e.name)})).map((function(t){var s,u=null==t||null===(s=t.name)||void 0===s?void 0:s.split("."),c="userFile"==(null==t?void 0:t.fileSource)?"privately":"share",p=u[0]+"&"+c;return n().createElement(L.Col,{span:6},n().createElement(L.Card,{hoverable:!0,onClick:function(r){r.stopPropagation(),function(t){var r,n=null==t||null===(r=t.name)||void 0===r?void 0:r.split(".");O(t),Z(!0),(0,Cn.J1)(n[1],{driverInstance:!0}).then((function(e){var t;S(In(In({},e),{},{properties:In({},a().omit(null==e?void 0:e.properties,["driver","emulator"])),form:null==e||null===(t=e.form)||void 0===t?void 0:t.filter((function(e){return"settings"==(null==e?void 0:e.key)||"tags"==(null==e?void 0:e.key)||"commands"==(null==e?void 0:e.key)}))}))})),(0,e.api)({name:""}).fetch(null==t?void 0:t.filePath,{}).then((function(e){var t=e.json;M(null==t?void 0:t.device),Z(!1)})),T(!0)}(t)}},n().createElement("a",{href:(0,e.config)("mediaUrl")+(null==t?void 0:t.filePath)+J,download:!0,onClick:function(e){e.stopPropagation()}},n().createElement(L.Tooltip,{title:_t1("下载驱动模版")},n().createElement(L.Button,{icon:n().createElement(sn.VerticalAlignBottomOutlined,null),style:{position:"absolute",top:"10px",right:"10px",color:"#349BC0",background:"#E5EFF3"}}))),n().createElement(L.Button,{type:"primary",style:{position:"absolute",top:"10px",left:"10px",color:"#fff",background:"#61B2CF"},onClick:function(n){n.stopPropagation(),function(t){(0,e.api)({name:""}).fetch(null==t?void 0:t.filePath,{}).then((function(n){var s,u,c,p,d,m,f=n.json;null!=K&&K.id?(H.change("template",t),H.change("isDriverTemplate",!0),H.change("driverType",null==f?void 0:f.driverType),H.change("device",null==f?void 0:f.device),l(!1)):(s={name:null==K?void 0:K.name,runMode:null==K?void 0:K.runMode,driverType:null==f?void 0:f.driverType,distributed:(null==K?void 0:K.distributed)||"all"},u=s.driverType,c=s.name,p=s.runMode,d=s.distributed,m=a().find(r,{name:u}),(0,e.api)({name:"driver/driverInstance"}).fetch("",{method:"POST",body:JSON.stringify({driverType:u,name:c,runMode:p,distributed:d})}).then((function(e){var t=e.json;return 200==e.status&&(L.message.loading({key:"downloadDriver",content:_t1("参数保存成功,正在拉取驱动")}),i(m,null==t?void 0:t.InsertedID),o(null==t?void 0:t.InsertedID),H.change("groupId",null==t?void 0:t.InsertedID),H.change("id",null==t?void 0:t.InsertedID)),!0})).catch((function(e){var t;L.message.error((null==e||null===(t=e.json)||void 0===t?void 0:t.message)||_t1("拉取驱动错误"))}))).then((function(e){e&&(H.change("template",t),H.change("isDriverTemplate",!0),H.change("driverType",null==f?void 0:f.driverType),H.change("device",null==f?void 0:f.device))}))}))}(t)}},_t1("选择模版")),n().createElement("span",{className:"repo-name",style:{marginTop:35}},u[0]," ( ",u[1]," )"),n().createElement("span",null,q[p]||""),n().createElement(L.Button,{style:{position:"absolute",left:10,bottom:10,color:"#349BC0",background:"#E5EFF3"}},null!=t&&t.share?n().createElement(B.Icon,{svg:__webpack_require__(6996)}):n().createElement(B.Icon,{svg:__webpack_require__(2133)}),null!=t&&t.share?_t1("共享"):_t1("个人"))))})),n().createElement(L.Modal,{title:(null==E?void 0:E.name)+_t1("预览"),open:A,width:"70%",onOk:function(){return T(!1)},onCancel:function(){return T(!1)}},!F&&x?n().createElement(cn.SchemaForm,{schema:I,initialValues:x,formKey:"DriverTemplatePreviewItem"}):n().createElement(B.Loading,null)))};const Rn=function(t){var r=t.values,i=t.visible,o=t.setVisible,l=t.onChange,s=t.template,u=useI18n().t,c=(0,e.use)("form").form,p=(0,e.use)("redux").dispatch,d=n().useState([]),m=(0,ln.Z)(d,2),f=m[0],_=m[1],y=n().useState([]),v=(0,ln.Z)(y,2),g=v[0],b=v[1],h=n().useState(!1),E=(0,ln.Z)(h,2),O=E[0],w=E[1],C=n().useState(null),A=(0,ln.Z)(C,2),T=A[0],k=A[1],D=n().useState(null),I=(0,ln.Z)(D,2),S=I[0],P=I[1],j=(0,e.use)("form",(function(e){var t,r;return{runMode:null==e||null===(t=e.values)||void 0===t?void 0:t.runMode,driver_install:null==e||null===(r=e.values)||void 0===r?void 0:r.driverType_install}})),x=j.driver_install,M=j.runMode;n().useEffect((function(){i&&(w(!0),(0,e.api)({name:"driver/"}).fetch("driver",{}).then((function(e){return e.json})).then((function(t){(0,e.api)({name:"driver/"}).fetch("driver/list",{}).then((function(e){var r=e.json,n=[],i=[],o=r.map((function(e){return null==e?void 0:e.id}));t.forEach((function(e,t){e.index=t,e.driverType=a().includes(e.driverType,"/")?e.driverType.split("/"):e.driverType||"通用驱动",o.indexOf(e.name)>=0?(e.install=!0,n.push(e)):i.push(e)})),b([].concat(n,i)),_([].concat(n,i)),w(!1)})).catch((function(e){w(!1)}))})).catch((function(e){console.log(e),w(!1)})))}),[i]);var R=function(t,r){var n=null==t?void 0:t.url;(0,e.api)({name:"driver"}).fetch("/driver/install",{method:"POST",body:JSON.stringify({url:n,id:null==t?void 0:t.name,instanceId:r})}).then((function(e){var r=e.status,n=e.json;if(200===r&&n.id){var i=(0,on.Z)(g);b(i.map((function(e){return e.index==(null==t?void 0:t.index)&&(e.id=n.id),e})))}else L.message.error(u("安装失败"))}))},N=function(){o(!1),p({type:"@@device/CHANGE_DRIVER_ID",payload:{driverSaveId:T}})},F=g.filter((function(e){return!0===(null==e?void 0:e.install)}))||[],Z={drivers:g,driInsts:F,installSuccess:function(e){var t=(0,on.Z)(g);b(t.filter((function(t){return t.index!==e})).map((function(e){return In(In({},e),{},{install:"true"})})))},installService:R,template:s,searchValue:S,saveParams:function(t){r&&null!=r&&r.name&&null!=r&&r.runMode?(0,e.api)({name:"driver/driverInstance"}).fetch("",{method:"POST",body:JSON.stringify(In(In({},r),{},{driverType:null==t?void 0:t.name}))}).then((function(e){var r=e.json;200==e.status&&(L.message.loading({key:"downloadDriver",content:u("参数保存成功,正在拉取驱动")}),R(t,null==r?void 0:r.InsertedID),k(null==r?void 0:r.InsertedID),c.change("groupId",null==r?void 0:r.InsertedID),c.change("id",null==r?void 0:r.InsertedID))})).catch((function(e){console.log(e)})):L.message.error(u("请填写完整参数"))},handleOk:N,driver_install:x,runMode:M,setDriverId:k,setVisible:o};return n().createElement(L.Modal,{title:u("驱动市场"),width:"80%",onOk:N,footer:null,destroyOnClose:!0,visible:i,onCancel:function(){o(!1)},bodyStyle:{padding:10}},O?n().createElement(B.Loading,null):n().createElement(L.Card,{title:n().createElement(Pn,{placeholder:u("查找驱动"),allowClear:!0,onSearch:function(e){if(P(e),e){var t=g.filter((function(t){return a().includes(t.name,e)||a().includes(t.description,e)}));b(t)}else b(f)},style:{width:230}})},n().createElement(Mn,(0,kr.Z)({},Z,{onSuccess:l}))))},Nn=function(t){var r,i=useI18n().t,a=t.input,o=t.data,l=(t.reloadbtn,t.option,n().useState([{id:"test",name:"测试驱动"}])),s=(0,ln.Z)(l,2),u=(s[0],s[1]),c=n().useState(!1),p=(0,ln.Z)(c,2),d=p[0],m=p[1],f=n().useState(!1),_=(0,ln.Z)(f,2),y=_[0],v=_[1],g=(0,e.use)("form"),b=g.formState.values,h=(g.form,(null==o||null===(r=o.model)||void 0===r?void 0:r.device)&&(null==o?void 0:o.uid));n().useEffect((function(){a.value&&E()}),[]);var E=function(){m(!0),(0,e.api)({name:"driver/"}).fetch("driver/list",{}).then((function(e){var t=e.json;u((function(e){var r={};return[].concat((0,on.Z)(e),(0,on.Z)(t)).forEach((function(e){r[e.id]=e})),Object.values(r)})),m(!1)})).catch((function(e){m(!1),L.message.error(JSON.stringify(e))}))},O=[];if(h){var w=o&&o.model&&o.model.device;O=w&&w.driver}else O=a.value;var C=function(e){a.onChange(e)};return n().createElement(n().Fragment,null,n().createElement(L.Select,(0,kr.Z)({allowClear:!0,showSearch:!0,open:!1,loading:d,placeholder:i("请选择驱动"),optionFilterProp:"children",style:{marginBottom:8},disabled:Boolean(null==b?void 0:b.id),onDropdownVisibleChange:function(e){v(e),e&&(v(!0),E())}},t,a,{value:O||void 0,onChange:C})),n().createElement(Rn,{values:b,onChange:C,visible:y,setVisible:v}))};var Fn=__webpack_require__(4552),Zn=__webpack_require__(8007);const Un=ReactDOM;var Wn,qn=__webpack_require__.n(Un),Vn=(Wn=function(e,t){return Wn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},Wn(e,t)},function(e,t){function r(){this.constructor=e}Wn(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),zn=function(){return zn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},zn.apply(this,arguments)},Gn={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},Kn={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},Hn={width:"20px",height:"20px",position:"absolute"},Yn={top:zn(zn({},Gn),{top:"-5px"}),right:zn(zn({},Kn),{left:void 0,right:"-5px"}),bottom:zn(zn({},Gn),{top:void 0,bottom:"-5px"}),left:zn(zn({},Kn),{left:"-5px"}),topRight:zn(zn({},Hn),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:zn(zn({},Hn),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:zn(zn({},Hn),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:zn(zn({},Hn),{left:"-10px",top:"-10px",cursor:"nw-resize"})},Jn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onMouseDown=function(e){t.props.onResizeStart(e,t.props.direction)},t.onTouchStart=function(e){t.props.onResizeStart(e,t.props.direction)},t}return Vn(t,e),t.prototype.render=function(){return r.createElement("div",{className:this.props.className||"",style:zn(zn({position:"absolute",userSelect:"none"},Yn[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},t}(r.PureComponent),$n=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qn=function(){return Qn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Qn.apply(this,arguments)},Xn={width:"auto",height:"auto"},ei=function(e,t,r){return Math.max(Math.min(e,r),t)},ti=function(e,t){return Math.round(e/t)*t},ri=function(e,t){return new RegExp(e,"i").test(t)},ni=function(e){return Boolean(e.touches&&e.touches.length)},ii=function(e,t,r){void 0===r&&(r=0);var n=t.reduce((function(r,n,i){return Math.abs(n-e)<Math.abs(t[r]-e)?i:r}),0),i=Math.abs(t[n]-e);return 0===r||i<r?t[n]:e},ai=function(e){return"auto"===(e=e.toString())||e.endsWith("px")||e.endsWith("%")||e.endsWith("vh")||e.endsWith("vw")||e.endsWith("vmax")||e.endsWith("vmin")?e:e+"px"},oi=function(e,t,r,n){if(e&&"string"==typeof e){if(e.endsWith("px"))return Number(e.replace("px",""));if(e.endsWith("%"))return t*(Number(e.replace("%",""))/100);if(e.endsWith("vw"))return r*(Number(e.replace("vw",""))/100);if(e.endsWith("vh"))return n*(Number(e.replace("vh",""))/100)}return e},li=["as","style","className","grid","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],si="__resizable_base__",ui=function(e){function t(t){var r=e.call(this,t)||this;return r.ratio=1,r.resizable=null,r.parentLeft=0,r.parentTop=0,r.resizableLeft=0,r.resizableRight=0,r.resizableTop=0,r.resizableBottom=0,r.targetLeft=0,r.targetTop=0,r.appendBase=function(){if(!r.resizable||!r.window)return null;var e=r.parentNode;if(!e)return null;var t=r.window.document.createElement("div");return t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.transform="scale(0, 0)",t.style.left="0",t.style.flex="0 0 100%",t.classList?t.classList.add(si):t.className+=si,e.appendChild(t),t},r.removeBase=function(e){var t=r.parentNode;t&&t.removeChild(e)},r.ref=function(e){e&&(r.resizable=e)},r.state={isResizing:!1,width:void 0===(r.propsSize&&r.propsSize.width)?"auto":r.propsSize&&r.propsSize.width,height:void 0===(r.propsSize&&r.propsSize.height)?"auto":r.propsSize&&r.propsSize.height,direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},r.onResizeStart=r.onResizeStart.bind(r),r.onMouseMove=r.onMouseMove.bind(r),r.onMouseUp=r.onMouseUp.bind(r),r}return $n(t,e),Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return this.resizable&&this.resizable.ownerDocument?this.resizable.ownerDocument.defaultView:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||Xn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){var e=0,t=0;if(this.resizable&&this.window){var r=this.resizable.offsetWidth,n=this.resizable.offsetHeight,i=this.resizable.style.position;"relative"!==i&&(this.resizable.style.position="relative"),e="auto"!==this.resizable.style.width?this.resizable.offsetWidth:r,t="auto"!==this.resizable.style.height?this.resizable.offsetHeight:n,this.resizable.style.position=i}return{width:e,height:t}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sizeStyle",{get:function(){var e=this,t=this.props.size,r=function(t){if(void 0===e.state[t]||"auto"===e.state[t])return"auto";if(e.propsSize&&e.propsSize[t]&&e.propsSize[t].toString().endsWith("%")){if(e.state[t].toString().endsWith("%"))return e.state[t].toString();var r=e.getParentSize();return Number(e.state[t].toString().replace("px",""))/r[t]*100+"%"}return ai(e.state[t])};return{width:t&&void 0!==t.width&&!this.state.isResizing?ai(t.width):r("width"),height:t&&void 0!==t.height&&!this.state.isResizing?ai(t.height):r("height")}},enumerable:!1,configurable:!0}),t.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var e=this.appendBase();if(!e)return{width:0,height:0};var t=!1,r=this.parentNode.style.flexWrap;"wrap"!==r&&(t=!0,this.parentNode.style.flexWrap="wrap"),e.style.position="relative",e.style.minWidth="100%",e.style.minHeight="100%";var n={width:e.offsetWidth,height:e.offsetHeight};return t&&(this.parentNode.style.flexWrap=r),this.removeBase(e),n},t.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},t.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},t.prototype.componentDidMount=function(){if(this.resizable&&this.window){var e=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:"auto"!==e.flexBasis?e.flexBasis:void 0})}},t.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},t.prototype.createSizeForCssProperty=function(e,t){var r=this.propsSize&&this.propsSize[t];return"auto"!==this.state[t]||this.state.original[t]!==e||void 0!==r&&"auto"!==r?e:"auto"},t.prototype.calculateNewMaxFromBoundary=function(e,t){var r,n,i=this.props.boundsByDirection,a=this.state.direction,o=i&&ri("left",a),l=i&&ri("top",a);if("parent"===this.props.bounds){var s=this.parentNode;s&&(r=o?this.resizableRight-this.parentLeft:s.offsetWidth+(this.parentLeft-this.resizableLeft),n=l?this.resizableBottom-this.parentTop:s.offsetHeight+(this.parentTop-this.resizableTop))}else"window"===this.props.bounds?this.window&&(r=o?this.resizableRight:this.window.innerWidth-this.resizableLeft,n=l?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(r=o?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),n=l?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return r&&Number.isFinite(r)&&(e=e&&e<r?e:r),n&&Number.isFinite(n)&&(t=t&&t<n?t:n),{maxWidth:e,maxHeight:t}},t.prototype.calculateNewSizeFromDirection=function(e,t){var r=this.props.scale||1,n=this.props.resizeRatio||1,i=this.state,a=i.direction,o=i.original,l=this.props,s=l.lockAspectRatio,u=l.lockAspectRatioExtraHeight,c=l.lockAspectRatioExtraWidth,p=o.width,d=o.height,m=u||0,f=c||0;return ri("right",a)&&(p=o.width+(e-o.x)*n/r,s&&(d=(p-f)/this.ratio+m)),ri("left",a)&&(p=o.width-(e-o.x)*n/r,s&&(d=(p-f)/this.ratio+m)),ri("bottom",a)&&(d=o.height+(t-o.y)*n/r,s&&(p=(d-m)*this.ratio+f)),ri("top",a)&&(d=o.height-(t-o.y)*n/r,s&&(p=(d-m)*this.ratio+f)),{newWidth:p,newHeight:d}},t.prototype.calculateNewSizeFromAspectRatio=function(e,t,r,n){var i=this.props,a=i.lockAspectRatio,o=i.lockAspectRatioExtraHeight,l=i.lockAspectRatioExtraWidth,s=void 0===n.width?10:n.width,u=void 0===r.width||r.width<0?e:r.width,c=void 0===n.height?10:n.height,p=void 0===r.height||r.height<0?t:r.height,d=o||0,m=l||0;if(a){var f=(c-d)*this.ratio+m,_=(p-d)*this.ratio+m,y=(s-m)/this.ratio+d,v=(u-m)/this.ratio+d,g=Math.max(s,f),b=Math.min(u,_),h=Math.max(c,y),E=Math.min(p,v);e=ei(e,g,b),t=ei(t,h,E)}else e=ei(e,s,u),t=ei(t,c,p);return{newWidth:e,newHeight:t}},t.prototype.setBoundingClientRect=function(){if("parent"===this.props.bounds){var e=this.parentNode;if(e){var t=e.getBoundingClientRect();this.parentLeft=t.left,this.parentTop=t.top}}if(this.props.bounds&&"string"!=typeof this.props.bounds){var r=this.props.bounds.getBoundingClientRect();this.targetLeft=r.left,this.targetTop=r.top}if(this.resizable){var n=this.resizable.getBoundingClientRect(),i=n.left,a=n.top,o=n.right,l=n.bottom;this.resizableLeft=i,this.resizableRight=o,this.resizableTop=a,this.resizableBottom=l}},t.prototype.onResizeStart=function(e,t){if(this.resizable&&this.window){var r,n=0,i=0;if(e.nativeEvent&&function(e){return Boolean((e.clientX||0===e.clientX)&&(e.clientY||0===e.clientY))}(e.nativeEvent)?(n=e.nativeEvent.clientX,i=e.nativeEvent.clientY):e.nativeEvent&&ni(e.nativeEvent)&&(n=e.nativeEvent.touches[0].clientX,i=e.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable&&!1===this.props.onResizeStart(e,t,this.resizable))return;this.props.size&&(void 0!==this.props.size.height&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),void 0!==this.props.size.width&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio="number"==typeof this.props.lockAspectRatio?this.props.lockAspectRatio:this.size.width/this.size.height;var a=this.window.getComputedStyle(this.resizable);if("auto"!==a.flexBasis){var o=this.parentNode;if(o){var l=this.window.getComputedStyle(o).flexDirection;this.flexDir=l.startsWith("row")?"row":"column",r=a.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var s={original:{x:n,y:i,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:Qn(Qn({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(e.target).cursor||"auto"}),direction:t,flexBasis:r};this.setState(s)}},t.prototype.onMouseMove=function(e){var t=this;if(this.state.isResizing&&this.resizable&&this.window){if(this.window.TouchEvent&&ni(e))try{e.preventDefault(),e.stopPropagation()}catch(e){}var r=this.props,n=r.maxWidth,i=r.maxHeight,a=r.minWidth,o=r.minHeight,l=ni(e)?e.touches[0].clientX:e.clientX,s=ni(e)?e.touches[0].clientY:e.clientY,u=this.state,c=u.direction,p=u.original,d=u.width,m=u.height,f=this.getParentSize(),_=function(e,t,r,n,i,a,o){return n=oi(n,e.width,t,r),i=oi(i,e.height,t,r),a=oi(a,e.width,t,r),o=oi(o,e.height,t,r),{maxWidth:void 0===n?void 0:Number(n),maxHeight:void 0===i?void 0:Number(i),minWidth:void 0===a?void 0:Number(a),minHeight:void 0===o?void 0:Number(o)}}(f,this.window.innerWidth,this.window.innerHeight,n,i,a,o);n=_.maxWidth,i=_.maxHeight,a=_.minWidth,o=_.minHeight;var y=this.calculateNewSizeFromDirection(l,s),v=y.newHeight,g=y.newWidth,b=this.calculateNewMaxFromBoundary(n,i);this.props.snap&&this.props.snap.x&&(g=ii(g,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(v=ii(v,this.props.snap.y,this.props.snapGap));var h=this.calculateNewSizeFromAspectRatio(g,v,{width:b.maxWidth,height:b.maxHeight},{width:a,height:o});if(g=h.newWidth,v=h.newHeight,this.props.grid){var E=ti(g,this.props.grid[0]),O=ti(v,this.props.grid[1]),w=this.props.snapGap||0;g=0===w||Math.abs(E-g)<=w?E:g,v=0===w||Math.abs(O-v)<=w?O:v}var C={width:g-p.width,height:v-p.height};d&&"string"==typeof d&&(d.endsWith("%")?g=g/f.width*100+"%":d.endsWith("vw")?g=g/this.window.innerWidth*100+"vw":d.endsWith("vh")&&(g=g/this.window.innerHeight*100+"vh")),m&&"string"==typeof m&&(m.endsWith("%")?v=v/f.height*100+"%":m.endsWith("vw")?v=v/this.window.innerWidth*100+"vw":m.endsWith("vh")&&(v=v/this.window.innerHeight*100+"vh"));var A={width:this.createSizeForCssProperty(g,"width"),height:this.createSizeForCssProperty(v,"height")};"row"===this.flexDir?A.flexBasis=A.width:"column"===this.flexDir&&(A.flexBasis=A.height),(0,Un.flushSync)((function(){t.setState(A)})),this.props.onResize&&this.props.onResize(e,c,this.resizable,C)}},t.prototype.onMouseUp=function(e){var t=this.state,r=t.isResizing,n=t.direction,i=t.original;if(r&&this.resizable){var a={width:this.size.width-i.width,height:this.size.height-i.height};this.props.onResizeStop&&this.props.onResizeStop(e,n,this.resizable,a),this.props.size&&this.setState(this.props.size),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:Qn(Qn({},this.state.backgroundStyle),{cursor:"auto"})})}},t.prototype.updateSize=function(e){this.setState({width:e.width,height:e.height})},t.prototype.renderResizer=function(){var e=this,t=this.props,n=t.enable,i=t.handleStyles,a=t.handleClasses,o=t.handleWrapperStyle,l=t.handleWrapperClass,s=t.handleComponent;if(!n)return null;var u=Object.keys(n).map((function(t){return!1!==n[t]?r.createElement(Jn,{key:t,direction:t,onResizeStart:e.onResizeStart,replaceStyles:i&&i[t],className:a&&a[t]},s&&s[t]?s[t]:null):null}));return r.createElement("div",{className:l,style:o},u)},t.prototype.render=function(){var e=this,t=Object.keys(this.props).reduce((function(t,r){return-1!==li.indexOf(r)||(t[r]=e.props[r]),t}),{}),n=Qn(Qn(Qn({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(n.flexBasis=this.state.flexBasis);var i=this.props.as||"div";return r.createElement(i,Qn({ref:this.ref,style:n,className:this.props.className},t),this.state.isResizing&&r.createElement("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer())},t.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},t}(r.PureComponent);var ci=__webpack_require__(9340);var pi=__webpack_require__(3444),di=__webpack_require__(5109),mi=__webpack_require__(2846),fi=__webpack_require__(4414);const _i=function(t){var r=t.item,i=useI18n().t,a=(0,e.use)("model.getItems").getItems,o=n().useRef(),l=n().useState({}),s=(0,ln.Z)(l,2),u=s[0],c=s[1],p=n().useState(!1),d=(0,ln.Z)(p,2),m=d[0],f=d[1];if(null==r||!r.update)return null;var _=isNaN(parseInt(u.progress))?0:parseInt(u.progress);return n().createElement(L.Popover,{content:n().createElement(L.Progress,{percent:_}),title:"更新进度",trigger:"click"},n().createElement(L.Tooltip,{title:"更新驱动"},n().createElement(L.Button,{type:"primary",loading:m,icon:n().createElement(sn.ToTopOutlined,null),onClick:function(){(0,e.api)({name:"driver"}).fetch("/driver/install",{method:"POST",body:JSON.stringify({url:null==r?void 0:r.url,id:null==r?void 0:r.driverType,instanceId:null==r?void 0:r.id})}).then((function(t){var r,n=t.status,l=t.json;200===n?(r=null==l?void 0:l.id,f(!0),r?o.current=setInterval((function(){(0,e.api)({name:"driver"}).fetch("/installInfo/".concat(r),{method:"GET"}).then((function(e){var t=e.status,r=e.json;200===t&&(r.run?100===r.run.progress?(L.message.success(i("驱动更新成功！")),c({type:i("正在启动"),progress:r.run.progress}),clearInterval(o.current),o.current=null,f(!1),a()):r.run.err?(clearInterval(o.current),o.current=null,L.message.error(r.run.err)):c({type:i("正在启动"),progress:r.run.progress}):r.install?100===r.install.progress?c({type:i("正在安装"),progress:r.install.progress}):r.install.err?(clearInterval(o.current),o.current=null,L.message.error(r.install.err)):c({type:i("正在安装"),progress:r.install.progress}):r.download?r.download.err?(clearInterval(o.current),o.current=null,L.message.error(r.download.err)):(L.message.success({key:"downloadDriver",content:i("正在拉取驱动")}),c({type:i("正在下载"),progress:r.download.progress})):c({}))})).catch((function(e){clearInterval(o.current),o.current=null}))}),1e3):o.current&&(clearInterval(o.current),o.current=null)):L.message.error(i("安装失败"))}))}})))};var yi;function vi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gi(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?vi(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bi=L.Radio.Group,hi=function(t){var r=t.input,i=t.field,a=(0,e.use)("form",(function(e){return{values:e&&e.values}})).values,o=useI18n().t;return n().createElement(bi,(0,kr.Z)({},r,{disabled:Boolean(null==a?void 0:a.id),value:r.value,onChange:function(e){r.onChange(e.target.value)}}),i.titleMap.map((function(e){return n().createElement(L.Radio,{value:e.value,checked:e.value==r.value},o(e.name))})))};const Ei={DriverInstance:(yi={name:"driverInstance",resource:"driver/driverInstance",type:"object",icon:n().createElement(B.Icon,{svg:__webpack_require__(8391)}),title:_r("驱动管理"),partialSave:!0,rolePermission:[{key:"driverInstance.view",title:"查看"},{key:"driverInstance.add",title:"添加"},{key:"driverInstance.edit",title:"修改"},{key:"driverInstance.delete",title:"删除"}],properties:{id:{type:"string",showInList:!1},name:{type:"string",title:_r("驱动名称"),field:{effect:function(e,t){var r=e.value,n=t.getState().values;setTimeout((function(){null!=n&&n.driverType||t.setFieldData("template",{display:!1}),t.setFieldData("template",{display:Boolean(null==n?void 0:n.isDriverTemplate)}),null!=n&&n.runMode&&t.setFieldData("driverType",{display:Boolean(r)&&"node"!=(null==n?void 0:n.runMode)})}))}},description:_r("自定义驱动名称，驱动名称不可重复")},driverType:{type:"string",title:_r("驱动类型"),field:{effect:function(e,t){var r=e.value,n=t.getState().values;setTimeout((function(){t.setFieldData("device",{display:Boolean(r)}),t.setFieldData("template",{display:Boolean(null==n?void 0:n.isDriverTemplate)})}))}}},groupId:{type:"string",title:_r("集群"),field:{effect:function(e,t){var r=e.value;setTimeout((function(){t.setFieldData("device",{display:Boolean(r)})}))}}},runMode:{type:"string",title:_r("运行模式"),enum:["one","cluster","node"],enum_title:[_r("单驱动"),_r("集群"),_r("集群节点")],field:{effect:function(e,t){var r=e.value,n=t.getState().values;setTimeout((function(){t.setFieldData("groupId",{display:"node"==r}),"one"==r&&t.change("distributed","all"),t.setFieldData("distributed",{display:"cluster"===r}),t.setFieldData("driverType",{display:Boolean(null==n?void 0:n.name)&&"node"!=r}),t.setFieldData("device",{display:Boolean((null==n?void 0:n.groupId)&&"node"==r)||Boolean(null==n?void 0:n.driverType)})}))}},description:_r("单驱动说明：单个驱动支撑平台中选择该驱动的所有的设备运行 集群：集群下可安装多个集群节点，集群节点下可安装驱动，集群是多个驱动支撑平台中所有选择该驱动的设备运行 集群节点：集群添加完毕后，可在集群下可添加多个集群节点，每个集群节点下都可添加驱动")},state:{type:"string",title:_r("运行状态"),enum:["none","restarting","running","stop"],enum_title:[_r("未创建"),_r("重启中"),_r("运行"),_r("停止")]},createTime:{type:"string",format:"date-time",title:_r("创建时间")},user:{type:"object",title:_r("创建人"),properties:{},showInList:!1},disable:{title:_r("是否禁用"),type:"boolean",boolLabel:[{label:"已禁用",color:"error",icon:"close-circle"},{label:"已启用",color:"success",icon:"check-circle"}],field:{label:_r("禁用")}},distributed:{type:"string",title:_r("分配方式"),enum:["all","average","customized"],enum_title:[_r("全部"),_r("平均"),_r("自定义")],description:_r("全部：集群中的每个驱动都会支撑全部资产运行 平均：集群中驱动平均分配资产支撑运行 ")},template:{type:"object",title:_r("模版"),properties:{},showInList:!1},device:{type:"object",title:_r("配置"),properties:{}},autoReload:{type:"object",title:_r("重启配置"),description:_r("驱动配置改变才会进行驱动重启"),properties:{},field:{component:function(e){var t,r=e.input,i=n().useState(null==r?void 0:r.value.enable),a=(0,ln.Z)(i,2),o=a[0],l=a[1],s=n().useState((null==r||null===(t=r.value)||void 0===t?void 0:t.executionType)||{}),u=(0,ln.Z)(s,2),c=u[0],p=u[1];return n().createElement(n().Fragment,null,n().createElement(L.Checkbox,{onChange:function(e){l(e.target.checked),r.onChange(gi(gi({},r.value),{},{enable:e.target.checked}))},checked:o},_t1("启用")),n().createElement("div",{style:o?{marginTop:"0.8rem"}:{display:"none"}},n().createElement(B.C,(0,kr.Z)({is:"ExecutionType"},e,{input:{onChange:function(e){var t,n;t=e,n=(0,fi.B)({executionType:t}),p(null==n?void 0:n.executionType),r.onChange(gi(gi(gi({},null==r?void 0:r.value),n),{},{enable:o}))},value:c}})),n().createElement("div",{style:{marginTop:"1rem"}},(0,fi.I)({executionType:c}))))}}}},orders:{createTime:"DESC"}},(0,t.Z)(yi,"partialSave",!0),(0,t.Z)(yi,"forceGetItem",!0),(0,t.Z)(yi,"permission",{view:!0,add:!0,edit:!0,delete:!0}),(0,t.Z)(yi,"form",["name",{key:"runMode",component:hi},{key:"distributed",component:hi},{key:"groupId",component:di.A},{key:"driverType",component:function(e){return n().createElement(Nn,(0,kr.Z)({},e,{style:{width:"30%",marginRight:10,marginBottom:5}}))}},{key:"template",component:function(){var t,r=useI18n().t,i=(0,e.use)("auth.user").user,a=(0,e.use)("form").formState.values,o=null==a?void 0:a.template,l=null==o||null===(t=o.name)||void 0===t?void 0:t.split("."),s=n().useState({}),u=(0,ln.Z)(s,2),c=u[0],p=u[1],d=n().useState(!1),m=(0,ln.Z)(d,2),f=m[0],_=m[1],y="?x-request-project="+(0,e.api)({name:"media"}).headers["x-request-project"]+"&token="+(null==i?void 0:i.token);return n().useEffect((function(){null!=o&&o.filePath&&(0,e.api)({name:""}).fetch(null==o?void 0:o.filePath,{}).then((function(e){var t=e.json;p(t)}))}),[]),l?n().createElement(n().Fragment,null,n().createElement(L.Button,{onClick:function(){return _(!0)}},r("修改")),n().createElement(L.Card,{className:"devicetemplate",style:{width:280,orderRadius:"10px",minHeight:"150px",marginTop:5}},n().createElement("a",{href:(0,e.config)("mediaUrl")+(null==o?void 0:o.filePath)+y,download:!0},n().createElement(L.Tooltip,{title:r("下载驱动模版")},n().createElement(L.Button,{icon:n().createElement(sn.VerticalAlignBottomOutlined,null),style:{position:"absolute",top:"10px",right:"10px",color:"#349BC0",background:"#E5EFF3"}}))),n().createElement("h3",null,l[0]," ( ",l[1]," )"),n().createElement("span",null," ",null==c?void 0:c.description),n().createElement(L.Button,{style:{position:"absolute",left:10,bottom:10,color:"#349BC0",background:"#E5EFF3"}},null!=c&&c.share?n().createElement(B.Icon,{svg:__webpack_require__(6996)}):n().createElement(B.Icon,{svg:__webpack_require__(2133)}),null!=c&&c.share?"共享":"个人")),n().createElement(Rn,{template:!0,values:a,onChange:function(){},visible:f,setVisible:_})):null}},"autoReload","device","disable"]),(0,t.Z)(yi,"searchFields",["name","driverType"]),(0,t.Z)(yi,"required",["name","runMode","distributed","groupId"]),(0,t.Z)(yi,"editableFields",["name"]),(0,t.Z)(yi,"listFields",["name","driverType","runMode","disable","createTime","template"]),(0,t.Z)(yi,"projectFields",["state"]),(0,t.Z)(yi,"filters",{submenu:["name","runMode","createTime",{key:"disable",boolLabel:[_r("禁用"),_r("启用")]}]}),(0,t.Z)(yi,"fieldRender",{state:function(e){var t=e.value;return e.item,"none"==t?n().createElement(L.Tooltip,{title:_t2("未创建")},n().createElement(B.Icon,{svg:__webpack_require__(1918)})," "):"restarting"==t?n().createElement(L.Tooltip,{title:_t2("重启")},n().createElement(B.Icon,{svg:__webpack_require__(9214)})):"running"==t?n().createElement(L.Tooltip,{title:_t2("运行")},n().createElement(B.Icon,{svg:__webpack_require__(2777)})):"stop"==t?n().createElement(L.Tooltip,{title:_t2("未运行")},n().createElement(B.Icon,{svg:__webpack_require__(4181)})):n().createElement("span",null,"-")},distributed:function(e){var t=e.value,r=e.item;if("one"==(null==r?void 0:r.runMode))return n().createElement("span",null,"-");var i=useI18n().t;return n().createElement("span",null,i({average:_r("平均"),customized:_r("自定义")}[t]))}}),(0,t.Z)(yi,"components",{DataForm:di.j,DataEmpty:function(){return n().createElement(L.Empty,{description:_t1("暂无数据"),image:__webpack_require__(8417)})},AddButton:function(t){var r=useI18n().t,i=(0,e.use)("model.getItems").getItems,a=n().useState(!1),o=(0,ln.Z)(a,2),l=o[0],s=o[1],u={type:"object",properties:{id:{type:"string",title:_r("实例ID"),field:{validate:function(e){return/^[\u2E80-\u9FFF\w\-\_\!\@\$\#\:]{1,}$/gi.test(e)?null:_r("必须为汉字、字母、数字、特殊字符!@$-_")}}},name:{type:"string",title:_r("驱动名称")},driverType:{type:"string",title:_r("驱动类型")}},required:["name","id","driverType"],form:["*"]},c=function(){s(!1)};return n().createElement(mi.HasPermission,{FailureComponent:null,permission:"driverInstance.add"},n().createElement(L.Modal,{title:r("添加开发模式驱动"),visible:l,onOk:function(){s(!1)},onCancel:c,footer:null},n().createElement(B.C,{is:"I18nSchemaForm",schema:u,onSubmit:function(t){return(0,e.api)({name:"driver/driverInstance"}).fetch("",{method:"POST",body:JSON.stringify(gi(gi({},t),{},{groupId:null==t?void 0:t.id,runMode:"one",distributed:"all"}))}).then((function(e){return 200==(null==e?void 0:e.status)&&(i(),c()),e}))},component:function(t){var i=t.children,a=t.invalid,o=t.handleSubmit,l=(t.showCode,t.submitting);return e.app.context._t,n().createElement(L.Form,{onSubmit:o},n().createElement(L.Card,{style:{marginTop:0,border:"none"}},i,n().createElement(L.Row,{style:{padding:"15px 0",float:"right"}},n().createElement(L.Button,{onClick:c}," ",r("取消")),n().createElement(L.Button,{style:{marginLeft:10},type:"primary",disabled:a,loading:l,onClick:o},r("保存")))))}})),n().createElement(L.Button,{type:"primary",onClick:function(){s(!0)}},n().createElement(sn.PlusOutlined,null)," ",r("开发模式添加驱动")),n().createElement(L.Button,{type:"primary",onClick:function(){return e.app.go("/app/model/driverInstance/add")}},n().createElement(sn.PlusOutlined,null)," ",r("添加驱动")))}}),(0,t.Z)(yi,"modelFormPageProps",(function(e){return{title:e?_t1("修改驱动"):_t1("添加驱动")}})),(0,t.Z)(yi,"dataTableProps",(function(t,r){var i=n().useState(r),a=(0,ln.Z)(i,2),o=a[0],l=a[1],s=n().useState(null),u=(0,ln.Z)(s,2),c=u[0],p=u[1];return n().useEffect((function(){r&&(l(r),p(!0),(0,e.api)({name:"driver/"}).fetch("driver",{}).then((function(e){return e.json})).then((function(e){r.forEach((function(t){e.forEach((function(e){t.driverType==(null==e?void 0:e.name)&&(t.update=t.version!=e.version,t.url=null==e?void 0:e.url)}))})),l(r),p(!1)})).catch((function(e){console.log(e),l(r),p(!1)})))}),[r]),{loading:c,dataSource:o}})),(0,t.Z)(yi,"itemActions",[function(e){var t=e.item;return n().createElement(_i,{item:t})},"edit","delete"]),yi)},Oi=JSON.parse('{"暂无数据":"No data available","配置写入值":"Configure Write Values","驱动市场":"Drive the market","查找驱动":"Find Driver","选择该驱动类型后，驱动的运行模式及驱动类型无法修改，请谨慎操作！是否确认选择？":"After selecting this drive type, the operation mode and drive type of the drive cannot be modified. Please operate with caution! Are you sure you want to select?","确认":"Confirm","取消":"Cancel","下载驱动模版":"Download Driver Template","请选择驱动":"Please select a drive","测试驱动":"Test drive","单实例":"Single instance","(已禁用)":"(Disabled)","集群":"Colony","驱动管理":"Drive Management","数值":"Numerical value","请选择":"Please select","值":"Value","名称":"Name","设备调试":"Equipment commissioning","保存成功":"Saved successfully","配置对象":"Configuration Object","字段定义":"Field Definition","字段规则":"Field Rules","修改驱动后，需重新配置驱动及数据点信息，请谨慎操作！":"After modifying the drive, you need to reconfigure the drive and data point information. Please operate with caution!","暂无可用的驱动":"There are currently no available drivers","自定义":"Custom","暂无可用的驱动操作":"There are currently no drive operations available","请检查驱动配置":"Please check the drive configuration","驱动扫点":"Drive scanning point","添加数据点":"Add Data Points","命名空间":"Namespace","实际值为数据点前缀与此栏拼接而成":"The actual value is a concatenation of the data point prefix and this column","查询条数":"Number of queries","跳过数量":"Skip Quantity","包含字符":"Contains characters","不包含字符":"Does not contain characters","正则匹配":"Regular matching","填写后不过滤其余过滤条件":"Do not filter the remaining filter conditions after filling in","缺省为字符串":"The default is a string","确定删除?":"Are you sure to delete?","确定":"Determine","创建元素":"Create Element","系统操作":"System operation ","重启邮件服务":"Restart the mail service","重启事件脚本服务":"Restart the Event Script Service","暂无可用的系统操作":"No system operations are currently available","请选择工作表":"Please select a worksheet","修改":"Modify","未创建":"Not created","重启":"Restart","运行":"Function","未运行":"Not running","查看资产实时数据点":"View asset real-time data points","未填写..":"Not filled in","未启用":"Not enabled","表格":"Form","卡片":"Card","日志":"Journal","暂无表单项":"There are currently no form items","工作表数据":"Worksheet Data","未选择工作表":"No worksheet selected","选择":"Choice","数据选择":"Data selection","点击配置":"Click Configure","保存":"Preservation","未配置完整":"Incomplete configuration","添加驱动":"Add Driver","配置":"To configure","驱动重载成功":"Drive overload successful","系统仿真程序重载成功":"System emulator reloaded successfully","重启系统仿真程序":"Restart the system simulation program","起始节点":"Start Node","搜索":"Search","查询":"Query","重置":"Reset","暂无数据或需定义起始数据执行扫点":"There is currently no data or it is necessary to define a starting data execution scan point","共有":"Share","条数据":"Data","，已选择":", selected","字符串":"Character string","数字":"Number","未知":"Unknown","邮件服务重新加载":"Mail Service Reload","匹配结果: 设备编号:":"Matching result: Equipment No.:","附加项:":"Additional items:","数据点名:":"Data point name:","正则表达式没有匹配!":"Regular expression does not match!","正则表达式格式错误！":"Regular expression format error!","请输入解析消息中id属性的正则表达式，应该有三个匹配项，分别是 设备编号、附加项、数据点名。您可以在下框中输入测试的消息id，查看解析结果是否正确":"Please enter a regular expression that parses the id attribute in the message. There should be three matching items, namely, device number, additional item, and data point name. You can enter the message ID of the test in the following box to see if the parsing result is correct","检查":"Inspect","中心节点：":"Central node:","名称：":"Name:","状态：":"Status:","在线":"On-line","离线":"Off-line","平均往返时长：":"Average round trip time:","毫秒":"Millisecond","选定的设备表或者设备未开启网络检查":"The selected device table or device does not have network checking enabled","网络不通":"Network failure","服务已重启":"Service restarted","重启服务":"Restart service","网络通信检查的配置需要在记录中进行配置":"The configuration of the network communication check needs to be configured in the record","启用":"Enable","网络通信":"Network Communications","图形展示":"Graphical presentation","表格展示":"Tabular presentation","网络通信异常统计":"Network communication abnormality statistics","最后上数时间":"Last Count Time","编号":"Number","异常描述":"Exception description","查看":"See","数据筛选":"Data Filtering","设备表":"Equipment List","选择表":"Select Table","部门":"Department","选择部门":"Select Department","设备表记录":"Equipment List Record","选择表记录":"Select Table Record","展示形式":"Presentation form","图形":"Graphical","标题":"Title","标题字体大小":"Title Font Size","默认值和最小值为12":"The default and minimum values are 12","背景色":"Background color","布局":"Layout","力引导布局":"Force Guided Layout","环形布局":"Circular layout","树形布局":"Tree Layout","缩放平移":"Zoom Pan","力引导布局配置":"Force Guided Layout Configuration","斥力因子":"Repulsive force factor","引力因子":"Gravitational factor","边长最大值":"Maximum side length","边长最小值":"Minimum side length","根节点配置":"Root node configuration","节点文字":"Node Text","节点图片":"Node image","图片宽度":"Image width","图片高度":"Picture Height","字体颜色":"Font Color","字体大小":"Font size","次级节点配置":"Secondary node configuration","图片记宽":"Picture width","图片记高":"Picture recording height","边配置":"Edge Configuration","线宽":"Line width","表记录名称":"Table Record Name","表记录编号":"Table Record Number","表记录IP":"Table Record IP","当前通信状态":"Current communication status","Ping总数":"Ping Total","失败率":"Failure rate","日":"Day","周":"Week","月":"Month","年":"Year","最近（最后）通信失败时间":"Last (Last) Communication Failure Time","最近（最后）通信成功时间":"Last (Last) Communication Success Time","共":"Common","条":"Strip","查看全部":"View All","网络拓扑图":"Network topology diagram","业务数据":"Business data","网络检查":"Network Check","开启网络检查":"Turn on network checking","地址":"Address","ping的地址":"Address of the ping","包数":"Number of packages","网络检查发送出的总包数，默认3包":"The total number of packets sent by network inspection, 3 packets by default","超时时间":"Timeout","发送总包数的超时时间，默认5秒":"The timeout for the total number of packets sent, which is 5 seconds by default","包间隔时间":"Packet Interval","发送每包之间的间隔时间，默认1秒":"The interval between sending each packet, which is 1 second by default","执行间隔":"Execution Interval","通用表功能":"Common Table Functions","安装【网络检查】表功能后，可实现通过ping的方式对设备的通信状态进行检查，安装后表的配置TAB会相应的增加一个":"After installing the [Network Check] table function, it is possible to check the communication status of the device through ping. After installation, a corresponding TAB will be added to the table configuration","流水号":"Serial number","类型":"Type","状态":"State","描述":"Describe","时间":"Time","指令状态管理":"Instruction State Management","指令名称":"Instruction Name","表数据":"Table data","执行用户":"Execute User","执行时间":"Execution time","权限":"Jurisdiction","驱动":"Drive","根对象":"Root Object","标识":"Identification","数据点":"Data point","元素标识":"Element identification","元素标题":"Element Title","定义选择项":"Define Selection","驱动配置":"Drive configuration","设备":"Equipment","槽位":"Slot position","程序名称":"Program Name","单位":"Company","小数位数":"Decimal Places","缩放比例":"Zoom ratio","指令":"Instructions","标签名称":"Label Name","数据类型":"Data type","默认写入值":"Default Write Value","绑定表单项":"Bind Form Items","是否点动":"Whether to jog or not","模型配置":"Model configuration","端口":"Port","本机":"Local machine","广播网段":"Broadcast network segment","连接超时时间":"Connection timeout","采集周期 (s)":"Collection cycle (s)","默认采集周期为5s;":"The default collection cycle is 5 seconds;","对象类型":"Object type","对象编号":"Object Number","设备配置":"Device Configuration","ipv4":"Ipv4","设备IP地址":"Device IP address","设备编号":"Equipment number","对象地址":"Object Address","对象实例号":"Object instance number","默认值":"Default value","目标机器的":"Target machine\'s","原机器的":"Original machine","发送方地址":"Originator Adress ","接收方地址":"Recipient Address","用户名":"User name","登陆口令":"Login password","下标":"Subscript","廊体监测":"Corridor monitoring","服务端口":"Service Port","域地址":"Domain Address","数据地址":"Data address","覆盖默认点表":"Overwrite default point table","索引":"Indexes","报警规则":"Alarm Rules","报警级别":"Alarm level","报警类型":"Alarm type","报警描述":"Alarm Description","报警逻辑":"Alarm logic","数值定义":"Numerical Definition","最小值":"Minimum value","最大值":"Maximum value","原始最小值":"Original minimum value","原始最大值":"Original maximum value","显示映射":"Display Mapping","映射":"Mapping","显示值":"Display value","表单项":"Form Item","参数名":"Parameter Name","表单类型":"Form types ","选择项文字":"Select Item Text","选择项值":"Select Item Value","是否必填":"Is it mandatory","通讯监控参数":"Communication monitoring parameters","列名":"Column Name","-原值":"-Original value","-目标值":"-Target value","关系库名称":"Relationship library name","密码":"Password","数据库名":"Database name","文件路径":"File Path","服务名":"Service name","驱动名称":"Driver Name","数据文件路径":"Data file path","采集周期":"Collection cycle","设备角色":"Device Role","从站服务运行":"Slave service operation","数据所属类别":"Category of data","数据类别种类":"Type of data category","数据索引":"Data index","写入数据类型":"Write data type","写入模式":"Write mode","模拟量写入值":"Analog quantity write value","指令参数":"Instruction parameters","心跳配置":"Heartbeat Configuration","心跳周期":"Heartbeat cycle","偏移地址":"Offset Address","读取区域":"Read Area","寄存器个数":"Number of registers","手机号":"Cell-phone number","站号":"Station number","在线判断方式":"Online judgment method","重试配置":"Retrying configuration","重试次数":"Retry count","地址合并间隔":"Address Merge Interval","自动化地址":"Automation address","点表":"Point table","写入区域":"Write Area","单字节":"Single byte","网关序列号":"Gateway serial number","网关配置":"Gateway Configuration","-物通博联":"-Wutong Bolian","主题":"Theme","网关":"Gateway","参数":"Parameter","-讯饶":"-Xunrao","仪表源地址":"Instrument source address","操作":"Operation","数据名称":"Data Name","电池寿命":"Battery life","广播配置":"Broadcast Configuration","启动广播方式":"Activate broadcast mode","广播":"Radio broadcast","广播地址":"Broadcast address","广播网关":"Broadcast gateway","分组":"Grouping","命令类型":"Command Type","串口":"Serial port","串口配置":"Serial port configuration","波特率":"Baud rate","数据位":"Data bits","停止位":"Stop bit","奇偶校验":"Parity check","硬件流控":"Hardware flow control","不继承模型的数据点":"Data points that do not inherit the model","可写":"Writable","读写":"Reading and writing","订阅消息主题":"Subscription Message Topic","只使用资产配置中的":"Only use in asset allocation","客户端":"Client","消息服务质量":"Message Service Quality","解析正则":"Analytic Regularity","匹配属性":"Matching attributes","数据":"Data","证书类型":"Certificate Type","是否验证服务端证书链和地址名称":"Verify the server certificate chain and address name","客户端证书":"Client certificate","自定义脚本":"Custom Script","写入点":"Write point","写入":"Write in","发送消息主题":"Send Message Subject","设备标识":"Equipment identification","接收端口":"Receive Port","接收路径":"Receive Path","中国移动":"China Mobile","计算机名":"Computer name","安全模式":"Safe mode","安全策略":"Security policy ","应用名称":"Apply name","应用":"Application","本地部分":"Local part","力控":"Force control","链接超时时间":"Link timeout","空闲超时时间":"Idle time-out","区域":"Region","位下标":"Bitwise subscript","起始地址":"Starting address","字总数":"Total number of words","字长度":"Word length","字节长度":"Byte length","机架号":"Rack number","驱动类型":"Drive type","运行模式":"Operating mode","运行状态":"Running state ","创建时间":"Creation time","创建人":"Creator","是否禁用":"Is it disabled","分配方式":"Allocation method","模版":"Template","取值数据":"Value data","可重复":"Repeatable","默认":"Default","-定义选择项":"-Define Selection","驱动指令配置":"Drive Command Configuration","数据写入":"Data Writing","数据输出":"Data output","指令脚本":"Instruction script","事件":"Event","事件标识":"Event ID","事件名称":"Event Name","事件数据输出":"Event data output","报":"Newspaper","报警死区":"Alarm Deadband","报警声音":"Alarm sound","播放次数":"Playback count","报警提醒":"Alarm reminder","报警处理":"Alarm processing","超时处理":"Timeout handler ","报警次数":"Number of alarms","报警有效期":"Alarm validity period","范围限定":"Scope limitation","资产":"Assets","禁用":"Disabled","数据值展示形式":"Data Value Display Form","小数补零":"Decimal zeroing","数值报警":"Numerical alarm","低低":"Low Low","高高":"High","通用配置":"General configuration","不启用":"Not enabled","保存策略":"Save Policy","有效范围":"Effective range","最小数值":"Minimum value","最大数值":"Maximum value","最小变化率":"Minimum rate of change","最大变化率":"Maximum rate of change","动作":"Action","固定值":"Fixed value","超时显示":"Timeout display","同数据报警":"Same data alarm","开启":"Open","全局规则同步":"Global rule synchronization","时长":"Duration","不上数报警":"Non counting alarm","仿真配置":"Simulation Configuration","仿真方式":"Simulation method","步进":"Stepping","时间戳":"Time stamp","时间格式":"Time format","显示到列表":"Display to List","是否显示":"Display or not","更新频率":"Update frequency","备注":"Remarks","设备驱动":"Device Driver","开启仿真":"Enable simulation","同一个资产下同一个分区的数据点起始地址按照该间隔合并读取":"Merge and read the starting address of data points in the same partition under the same asset at this interval","适用于寄存器区控制多开关情况":"Suitable for controlling multiple switches in the register area","填写表单项的名称":"Fill in the name of the form item","分钟":"Minute","默认情况下资产数据点为其自身的和模型的数据点的合集":"By default, asset data points are a collection of their own and model data points","如果没有用户名密码便进行匿名访问":"Anonymous access without username and password","定义报警恢复数值与报警数值之间的波动范围":"Define the fluctuation range between the alarm recovery value and the alarm value","开启后报警声音提醒及报警数据量的更新":"Alarm sound reminder and update of alarm data volume after activation","开启后可对报警信息进行报警确认及报警处理的操作":"After activation, alarm confirmation and processing can be performed on the alarm information","禁用后当前报警规则不生效":"The current alarm rule will not take effect after disabling","低于该值产生中级报警":"Generate intermediate alarm below this value","低于该值产生高级报警":"Generate a high-level alarm below this value","高于该值产生中级报警":"Generate intermediate alarm above this value","高于该值产生高级报警":"Generate a high-level alarm above this value","数据点保存到数据库的保存策略":"Saving strategies for data points to the database","数组元素类型":"Array Element Type","元素类型":"Element Type","网络连接时间":"Network connection time","文本":"Text","网络地址":"Network address","布尔值":"Boolean value","网络在线状态":"Network online status","网络平均往返时长":"Average round-trip time of the network","对象字段":"Object Fields","工作表":"Worksheet","显示名称":"Display Name","第一次执行指令失败后，可以继续执行指令的次数，定义次数范围内若指令执行成功，若有剩余次数，不会继续重试执行":"After the first instruction execution failure, the number of times the instruction can continue to be executed, within the defined number range. If the instruction is successfully executed, if there are any remaining times, the execution will not continue to be retried","系统仿真":"System simulation ","表类型相关":"Table type related","选择采集驱动，并配置相关信息":"Select the collection driver and configure relevant information","定义采集的数据点信息":"Define the collected data point information","配置控制指令信息，支持的指令格式包 括：字符串、数值、布尔、数据选择器、 宇符串选择器、对象、数组":"Configure control instruction information, supported instruction formats include: string, numeric, Boolean, data selector, universal string selector, object, array","通用驱动":"Universal Drive","无线驱动":"Wireless driver","行业驱动":"Industry driven","厂商驱动":"Manufacturer driven","倍福":"Beifu","和利时":"Hollysys ","中控":"Central control","台达":"Delta","永宏":"Yonghong","南大傲拓":"Nanda Aotuo","数据点的采集周期，不定义默认5秒":"The collection cycle of data points, undefined, defaults to 5 seconds","tag点名称":"Tag point name","目标机器的ip或者主机名":"The IP or host name of the target machine","tcp目标端口":"TCP target port","ams源端口":"AMS source port","ams目标端口":"AMS target port","选择该项后，设备模型中的点表将被设备点表覆盖":"After selecting this option, the point table in the device model will be overwritten by the device point table","CAE廊体测温":"CAE corridor temperature measurement","{{device}} 代表报警设备名称":"{{device}} represents the name of the alarm device","经过多长时间仪表还没有任何数据上传，认定为通讯故障，默认为周期的3倍":"After how long the instrument has not uploaded any data, it is considered a communication failure and defaults to 3 times the cycle","IP地址":"IP address","SQL语句":"SQL statement","CROB写入值":"CROB write value","DNP3协议":"DNP3 protocol","lora网关地址":"Lora Gateway Address","Flowmeter/流量计":"Flowmeter","秒":"Second","自动化地址在发起modbus请求时地址位会减一":"The address bit of the automation address will be reduced by one when initiating a modbus request","g340t协议":"G340t protocol","Lora网关":"Lora Gateway","对应A11协议填写，不填写则与标识相同":"Fill in the corresponding A11 protocol, otherwise it will be the same as the identification","天":"Day","Lora设备编号":"Lora equipment number","Modbus_A11协议":"Modbus_ A11 Protocol","Modbus/RTU协议":"Modbus/RTU protocol","Modbus/TCP协议":"Modbus/TCP protocol","MQTT服务器":"MQTT server","CA文件":"CA file","客户端key文件":"Client key file","MQTT Client协议":"MQTT Client Protocol","Item前缀":"Item Prefix","lTagId属性值":"LTagId attribute value","shParId属性值":"ShParId attribute value","DB号":"DB number","自定义驱动名称，驱动名称不可重复":"Custom driver name, driver name cannot be duplicate","指令名称必须为汉字、字母、数字、特殊字符#$-_():且不为纯数字":"The instruction name must be Chinese characters, letters, numbers, or special characters#$-_ (): And it is not a pure number","当前模型下数据点标识已存在":"The data point identifier already exists under the current model","在定义的时间范围内，对同一资产同一条报警规则产生的报警进行合并，只展示一条报警消息":"Merge alarms generated by the same asset and alarm rule within a defined time range, displaying only one alarm message","若设置延时提醒时长，产生报警，经过设定时长后进行第一次报警提醒":"If the delay reminder duration is set, an alarm will be generated, and after the set duration, the first alarm reminder will be triggered","仅支持MP3、WAV格式":"Only supports MP3 and WAV formats","报警声音播放次数，不填为仅一次":"Number of times the alarm sound is played, not filled in as only once","配置有效期后，只会在有效期间产生报警信息":"After configuring the validity period, only alarm messages will be generated during the validity period","低":"Low","高":"High","设定时长内上数相同时所产生的报警，开启时所有项必填":"The alarm generated when the upper number within the set duration is the same, and all items must be filled in when enabled","设定时长内不上数所产生的报警，开启时所有项必填":"Alarm generated by not counting within the set duration, all items must be filled in when enabled","最小值为0时，与不填是一样效果":"When the minimum value is 0, it has the same effect as not filling in","最大值为0时，与不填是一样效果":"When the maximum value is 0, it has the same effect as not filling in","勾选后，数据点可作为记录列表的显示字段，显示数据的最新值":"After checking, the data point can serve as a display field for the record list, displaying the latest value of the data","未配置更新频率，实时更新数据库列值，配置后，按照频率更新数据库列值，频率不可以小于采集周期":"The update frequency is not configured, and the database column values are updated in real-time. After configuration, the database column values are updated according to the frequency, which cannot be less than the collection cycle","通讯超时时间(s)":"Communication timeout (s)","判断设备超时的时间标准，超时时间为定义参数周期的3倍":"The time standard for determining device timeout, which is three times the defined parameter period","需大于采集周期":"Must be greater than the collection cycle","数据点的采集周期，不定义默认60秒":"The collection cycle of data points, undefined, defaults to 60 seconds","15条/页":"15 pieces/page","30条/页":"30 pieces/page","50条/页":"50 pieces/page","100条/页":"100 pieces/page","基本属性":"Basic attributes","标识唯一，包含汉字、字母、数字、特殊字符$-_:":"Unique identification, including Chinese characters, letters, numbers, and special characters $- _:","标识格式有误，请按照限制格式填写内容！":"The identification format is incorrect. Please fill in the content according to the restricted format!","标识不能为纯数字":"Identification cannot be a pure number","当前模型下数据点名称已存在":"The data point name under the current model already exists","数值转换":"Numeric conversion","数值仿真":"Numerical simulation ","其它报警":"Other alarms","报警间隔(s)":"Alarm interval (s)","延时提醒时长(s)":"Delay reminder duration (s)","小时":"Hour","分":"Branch","配置报警次数后，触发报警条件产生的报警提示信息达到设定次数，将不会信的产生报警消息，当报警恢复后，重新计算次数；":"After configuring the number of alarms, if the alarm prompt information generated by triggering the alarm condition reaches the set number, it will not be believed to generate an alarm message. When the alarm is restored, the number of times will be recalculated;","四舍五入":"Rounding","向上进位":"Carry Up","按位展示":"Positional display","每次存储":"Every storage","变化存储":"Change storage","不存储":"Do not store","边界值":"Boundary value","丢弃":"Discard","显示当前值":"Display current value","不显示当前值":"Do not display the current value","中":"In","随机":"Random","线性":"Linear","线性变化时，每次递增的值。":"The value incremented each time when changing linearly.","单驱动":"Single drive","集群节点":"Cluster nodes","单驱动说明：单个驱动支撑平台中选择该驱动的所有的设备运行 ":"Single driver description: All devices that select this driver in a single driver support platform are running","集群：集群下可安装多个集群节点，集群节点下可安装驱动，集群是多个驱动支撑平台中所有选择该驱动的设备运行":"Cluster: Multiple cluster nodes can be installed under the cluster, and drivers can be installed under the cluster nodes. The cluster is a support platform for all devices that choose this driver to run on multiple platforms","集群节点：集群添加完毕后，可在集群下可添加多个集群节点，每个集群节点下都可添加驱动":"Cluster nodes: After adding a cluster, multiple cluster nodes can be added under the cluster, and drivers can be added under each cluster node","重启中":"Restarting","停止":"Stop it","全部":"Whole","平均":"Average","全部：集群中的每个驱动都会支撑全部资产运行 平均：集群中驱动平均分配资产支撑运行 ":"All: Each driver in the cluster will support the operation of all assets. Average: Drivers in the cluster will allocate assets evenly to support the operation","修改驱动":"Modify Driver","单驱动说明：单个驱动支撑平台中选择该驱动的所有的设备运行 集群：集群下可安装多个集群节点，集群节点下可安装驱动，集群是多个驱动支撑平台中所有选择该驱动的设备运行 集群节点：集群添加完毕后，可在集群下可添加多个集群节点，每个集群节点下都可添加驱动":"Single driver description: In a single driver support platform, all devices that select the driver can run the cluster. Multiple cluster nodes can be installed under the cluster, and drivers can be installed under the cluster node. The cluster is a cluster of multiple driver support platforms. All devices that select the driver can run the cluster node. After adding the cluster, multiple cluster nodes can be added under the cluster, and drivers can be added under each cluster node","连接超时时间 (s)":"Connection timeout (s)","默认为10s":"Default to 10s","连接空闲时间 (s)":"Connection idle time (s)","默认为30s":"Default to 30s","连接使用间隔 (ms)":"Connection usage interval (ms)","默认为1ms":"Default to 1ms","安装【设备配置】表功能后，当前表默认为 数据采集表，若需要数据采集，可安装此功能， 安装后表的配置TAB会相应的增加一个，表以 及创建表记录时，均可以配置相关内容。其中 表如果配置了【设备配置】的表单信息，表记 录会自动继承相应的配置。":"After installing the [Device Configuration] table function, the current table defaults to a data collection table. If data collection is required, this function can be installed. After installation, a corresponding TAB will be added to the table configuration. When creating table records, relevant content can be configured. If the form information of \'Device Configuration\' is configured in the table, the table records will automatically inherit the corresponding configuration.","更新频率 (s)":"Update frequency (s)","// 解析接收数据":"//Parse received data","// 该服务器和主题收到的消息会调用此方法进行解析,消息主题是方法参数topic,消息内容是方法参数package.":"//The message received by the server and topic will be parsed using this method. The message topic is the method parameter topic, and the message content is the method parameter package","// topic类型为字符串,考虑到部分设备的消息内容为二进制数据,package类型为字节数组.":"//The topic type is a string, considering that the message content of some devices is binary data, and the package type is a byte array","ParseHandle = function (topic, package) {":"ParseHandle = function (topic, package) {","// 解析数据":"//Parsing data","return [                 //可返回多个对象,对应多个资产":"Return [//Multiple objects can be returned, corresponding to multiple assets","{ id, values,time }  //返回的对象中的key的名字必须为id,values,time":"{id, values, time}//The name of the key in the returned object must be id, values, time","]":"]","}":"}","// 构建发送数据":"//Build Send Data","CommandHandle = function (topic, id, op) {":"CommandHandle = function (topic, id, op) {","let sendTopic = \\"\\"":"Let sendTopic = \\"\\"","let sendData = \\"\\"":"Let sendData = \\"\\"","return { sendTopic, sendData } //返回的对象中的key的名字必须为sendTopic,sendData":"Return {sendTopic, sendData}//The name of the key in the returned object must be sendTopic, sendData","解析接收数据":"Parse received data","该服务器和主题收到的消息会调用此方法进行解析,消息主题是方法参数topic,消息内容是方法参数package.":"The message received by the server and topic will be parsed using this method. The message topic is the method parameter topic, and the message content is the method parameter package","topic类型为字符串,考虑到部分设备的消息内容为二进制数据,package类型为字节数组.":"The topic type is a string, considering that the message content of some devices is binary data, and the package type is a byte array","解析数据":"Parsing data","可返回多个对象,对应多个资产":"Multiple objects can be returned, corresponding to multiple assets","返回的对象中的key的名字必须为id,values,time":"The name of the key in the returned object must be id, values, time","构建发送数据":"Build Send Data","返回的对象中的key的名字必须为sendTopic,sendData":"The name of the key in the returned object must be sendTopic, sendData","浮点数-低位在前":"Floating point number - low order first","浮点数-高位在前":"Floating point number - high order first","浮点数-低位在前-字节交换":"Floating point number - low order first - byte exchange","浮点数-高位在前-字节交换":"Floating point number - high bit first - byte exchange","有符号字节":"Signed byte","无符号字节":"Unsigned byte","有符号整数-低位在前":"Signed integer - low order before","有符号整数-高位在前":"Signed integer - high order before","无符号整数-低位在前":"Unsigned integer - low order before","无符号整数-高位在前":"Unsigned integer - high order before","有符号长整数-低位在前":"Signed long integer - low order before","有符号长整数-高位在前":"Signed long integer - high order before","无符号长整数-低位在前":"Unsigned long integer - low order before","无符号长整数-高位在前":"Unsigned long integer - high order before","双精度浮点数-低位在前":"Double precision floating point number - low order first","双精度浮点数-高位在前":"Double precision floating point number - high order first","布尔型":"Boolean type","字符串-ASCII编码":"String ASCII encoding","16位数字":"16 digit number","BCD码":"BCD code","有符号字节-16位的前8位":"Signed Byte - First 8 bits of 16 bits","有符号字节-16位的后8位":"Signed Byte - Last 8 bits of 16 bits","无符号字节-16位的前8位":"Unsigned Byte - First 8 bits of 16 bits","无符号字节-16位的后8位":"Unsigned Byte - Last 8 bits of 16 bits","有符号长整数-高位在前-字节交换":"Signed Long Integer - High Bit Before Byte Swap","有符号长整数-低位在前-字节交换":"Signed Long Integer - Low Before Byte Swap","无符号长整数-高位在前-字节交换":"Unsigned long integer - high order before byte exchange","无符号长整数-低位在前-字节交换":"Unsigned long integer - low order before byte exchange","双精度浮点数-高位在前-字节交换":"Double precision floating point number - high bit first - byte exchange","双精度浮点数-低位在前-字节交换":"Double precision floating point number - low order first - byte exchange","采集周期 (秒)":"Collection cycle (seconds)","浮点数":"Floating point number","双精度":"Double precision","线圈状态":"Coil status","输入状态":"Input Status","保持寄存器":"Holding register","输入寄存器":"Input register","字符串-字节交换":"String Byte Exchange","默认: YYYY-MM-DD HH:mm:ss":"Default: YYYY-MM-DD HH: mm: ss","方式":"Mode","表单":"Form ","字符串选择":"String selection","数字选择":"Number selection","对象":"Object","数组":"Array","输出":"Output","处理前":"Before processing","处理后":"After processing","脚本内容":"Script Content","从":"From","*星期":"*Week","每":"Each","星期":"Week","重启配置":"Restart Configuration","驱动配置改变才会进行驱动重启":"Driver restart only occurs when the driver configuration is changed","共享驱动模板":"Shared Driver Template","我的文件/驱动模板":"My File/Driver Template","创建驱动模版成功":"Successfully created driver template","更新模版":"Update Template","创建模版":"Create Template","更新":"To update","安装失败":"Installation failed","参数保存成功,正在拉取驱动":"Parameter saved successfully, pulling driver","拉取驱动错误":"Pull drive error","请填写完整参数":"Please fill in the complete parameters","自建驱动":"Self built drive","创建并启动服务成功！":"Successfully created and started the service!","正在启动":"Starting","正在安装":"Installing","拉取驱动成功":"Successfully pulled the driver","正在下载":"Downloading","选择模版":"Select Template","共享":"Share","个人":"Personal","预览":"Preview","选择驱动":"Select Driver","安装【设备配置】表功能后，当前表默认为数据采集表，若需要数据采集，可安装此功能，安装后表的配置TAB会相应的增加一个，表以及创建表记录时，均可以配置相关内容。其中表如果配置了【设备配置】的表单信息，表记录会自动继承相应的配置。":"After installing the [Device Configuration] table function, the current table defaults to a data collection table. If data collection is required, this function can be installed. After installation, a corresponding TAB will be added to the table configuration. When creating table records, relevant content can be configured. If the form information of \'Device Configuration\' is configured in the table, the table records will automatically inherit the corresponding configuration.","配置控制指令信息，支持的指令格式包 括：字符串、数值、布尔、数据选择器、字符串选择器、对象、数组":"Configure control instruction information, supported instruction formats include: string, numeric, Boolean, data selector, string selector, object, array","当前表下数据点标识已存在":"The data point identifier under the current table already exists","当前表下数据点名称已存在":"The data point name under the current table already exists","查看设备实时数据点":"View device real-time data points","长时间不上数报警":"Long time non counting alarm"}'),wi=JSON.parse('{"暂无数据":"暂无数据","配置写入值":"配置写入值","驱动市场":"驱动市场","查找驱动":"查找驱动","选择该驱动类型后，驱动的运行模式及驱动类型无法修改，请谨慎操作！是否确认选择？":"选择该驱动类型后，驱动的运行模式及驱动类型无法修改，请谨慎操作！是否确认选择？","确认":"确认","取消":"取消","下载驱动模版":"下载驱动模版","请选择驱动":"请选择驱动","测试驱动":"测试驱动","单实例":"单实例"," (已禁用)":" (已禁用)","集群":"集群","驱动管理":"驱动管理","数值":"数值","请选择":"请选择","值":"值","名称":"名称","设备调试":"设备调试","保存成功":"保存成功","配置对象":"配置对象","字段定义":"字段定义","字段规则":"字段规则","修改驱动后，需重新配置驱动及数据点信息，请谨慎操作！":"修改驱动后，需重新配置驱动及数据点信息，请谨慎操作！","暂无可用的驱动":"暂无可用的驱动","自定义":"自定义","暂无可用的驱动操作":"暂无可用的驱动操作","请检查驱动配置":"请检查驱动配置","驱动扫点":"驱动扫点","添加数据点":"添加数据点","命名空间":"命名空间","实际值为数据点前缀与此栏拼接而成":"实际值为数据点前缀与此栏拼接而成","查询条数":"查询条数","跳过数量":"跳过数量","包含字符":"包含字符","不包含字符":"不包含字符","正则匹配":"正则匹配","填写后不过滤其余过滤条件":"填写后不过滤其余过滤条件","缺省为字符串":"缺省为字符串","确定删除?":"确定删除?","确定":"确定","创建元素":"创建元素","系统操作":"系统操作","重启邮件服务":"重启邮件服务","重启事件脚本服务":"重启事件脚本服务","暂无可用的系统操作":"暂无可用的系统操作","请选择工作表":"请选择工作表","修改":"修改","未创建":"未创建","重启":"重启","运行":"运行","未运行":"未运行","查看资产实时数据点":"查看资产实时数据点","未填写..":"未填写..","未启用":"未启用","表格":"表格","卡片":"卡片","日志":"日志","暂无表单项":"暂无表单项","工作表数据":"工作表数据","未选择工作表":"未选择工作表","选择":"选择","数据选择":"数据选择","点击配置":"点击配置","保存":"保存","未配置完整":"未配置完整","添加驱动":"添加驱动","配置":"配置","驱动重载成功":"驱动重载成功","系统仿真程序重载成功":"系统仿真程序重载成功"," 重启系统仿真程序":" 重启系统仿真程序","起始节点":"起始节点","搜索":"搜索","查询":"查询","重置":"重置","暂无数据或需定义起始数据执行扫点":"暂无数据或需定义起始数据执行扫点","共有":"共有","条数据":"条数据","，已选择":"，已选择","字符串":"字符串","数字":"数字","未知":"未知","邮件服务重新加载":"邮件服务重新加载","匹配结果: 设备编号:":"匹配结果: 设备编号:","附加项:":"附加项:","数据点名:":"数据点名:","正则表达式没有匹配!":"正则表达式没有匹配!","正则表达式格式错误！":"正则表达式格式错误！","请输入解析消息中id属性的正则表达式，应该有三个匹配项，分别是 设备编号、附加项、数据点名。您可以在下框中输入测试的消息id，查看解析结果是否正确":"请输入解析消息中id属性的正则表达式，应该有三个匹配项，分别是 设备编号、附加项、数据点名。您可以在下框中输入测试的消息id，查看解析结果是否正确"," 添加驱动":" 添加驱动","检查":"检查","中心节点：":"中心节点：","名称：":"名称：","状态：":"状态：","在线":"在线","离线":"离线","平均往返时长：":"平均往返时长：","毫秒":"毫秒","选定的设备表或者设备未开启网络检查":"选定的设备表或者设备未开启网络检查","网络不通":"网络不通","服务已重启":"服务已重启","重启服务":"重启服务","网络通信检查的配置需要在记录中进行配置":"网络通信检查的配置需要在记录中进行配置","启用":"启用","网络通信":"网络通信","图形展示":"图形展示","表格展示":"表格展示","网络通信异常统计":"网络通信异常统计","最后上数时间":"最后上数时间","编号":"编号","异常描述":"异常描述","查看":"查看","数据筛选":"数据筛选","设备表":"设备表","选择表":"选择表","部门":"部门","选择部门":"选择部门","设备表记录":"设备表记录","选择表记录":"选择表记录","展示形式":"展示形式","图形":"图形","标题":"标题","标题字体大小":"标题字体大小","默认值和最小值为12":"默认值和最小值为12","背景色":"背景色","布局":"布局","力引导布局":"力引导布局","环形布局":"环形布局","树形布局":"树形布局","缩放平移":"缩放平移","力引导布局配置":"力引导布局配置","斥力因子":"斥力因子","引力因子":"引力因子","边长最大值":"边长最大值","边长最小值":"边长最小值","根节点配置":"根节点配置","节点文字":"节点文字","节点图片":"节点图片","图片宽度":"图片宽度","图片高度":"图片高度","字体颜色":"字体颜色","字体大小":"字体大小","次级节点配置":"次级节点配置","图片记宽":"图片记宽","图片记高":"图片记高","边配置":"边配置","线宽":"线宽","表记录名称":"表记录名称","表记录编号":"表记录编号","表记录IP":"表记录IP","当前通信状态":"当前通信状态","Ping总数":"Ping总数","失败率":"失败率","日":"日","周":"周","月":"月","年":"年","最近（最后）通信失败时间":"最近（最后）通信失败时间","最近（最后）通信成功时间":"最近（最后）通信成功时间","共":"共","条":"条","查看全部":"查看全部","网络拓扑图":"网络拓扑图","业务数据":"业务数据","网络检查":"网络检查","开启网络检查":"开启网络检查","地址":"地址","ping的地址":"ping的地址","包数":"包数","网络检查发送出的总包数，默认3包":"网络检查发送出的总包数，默认3包","超时时间":"超时时间","发送总包数的超时时间，默认5秒":"发送总包数的超时时间，默认5秒","包间隔时间":"包间隔时间","发送每包之间的间隔时间，默认1秒":"发送每包之间的间隔时间，默认1秒","执行间隔":"执行间隔","通用表功能":"通用表功能","安装【网络检查】表功能后，可实现通过ping的方式对设备的通信状态进行检查，安装后表的配置TAB会相应的增加一个":"安装【网络检查】表功能后，可实现通过ping的方式对设备的通信状态进行检查，安装后表的配置TAB会相应的增加一个","流水号":"流水号","类型":"类型","状态":"状态","描述":"描述","时间":"时间","指令状态管理":"指令状态管理","指令名称":"指令名称","表数据":"表数据","执行用户":"执行用户","执行时间":"执行时间","权限":"权限","驱动":"驱动","根对象":"根对象","标识":"标识","数据点":"数据点","元素标识":"元素标识","元素标题":"元素标题","定义选择项":"定义选择项","驱动配置":"驱动配置","设备":"设备","槽位":"槽位","程序名称":"程序名称","单位":"单位","小数位数":"小数位数","缩放比例":"缩放比例","指令":"指令","标签名称":"标签名称","数据类型":"数据类型","默认写入值":"默认写入值","绑定表单项":"绑定表单项","是否点动":"是否点动","模型配置":"模型配置","端口":"端口","本机":"本机","广播网段":"广播网段","连接超时时间":"连接超时时间","采集周期 (s)":"采集周期 (s)","默认采集周期为5s;":"默认采集周期为5s;","对象类型":"对象类型","对象编号":"对象编号","设备配置":"设备配置","ipv4":"ipv4","设备IP地址":"设备IP地址","设备编号":"设备编号","对象地址":"对象地址","对象实例号":"对象实例号","默认值":"默认值","目标机器的":"目标机器的","原机器的":"原机器的","发送方地址":"发送方地址","接收方地址":"接收方地址","用户名":"用户名","登陆口令":"登陆口令","下标":"下标","廊体监测":"廊体监测","服务端口":"服务端口","域地址":"域地址","数据地址":"数据地址","覆盖默认点表":"覆盖默认点表","索引":"索引","报警规则":"报警规则","报警级别":"报警级别","报警类型":"报警类型","报警描述":"报警描述","报警逻辑":"报警逻辑","数值定义":"数值定义","最小值":"最小值","最大值":"最大值","原始最小值":"原始最小值","原始最大值":"原始最大值","显示映射":"显示映射","映射":"映射","显示值":"显示值","表单项":"表单项","参数名":"参数名","表单类型":"表单类型","选择项文字":"选择项文字","选择项值":"选择项值","是否必填":"是否必填","通讯监控参数":"通讯监控参数","列名":"列名","-原值":"-原值","-目标值":"-目标值","关系库名称":"关系库名称","密码":"密码","数据库名":"数据库名","文件路径":"文件路径","服务名":"服务名","驱动名称":"驱动名称","数据文件路径":"数据文件路径","采集周期":"采集周期","设备角色":"设备角色","从站服务运行":"从站服务运行","数据所属类别":"数据所属类别","数据类别种类":"数据类别种类","数据索引":"数据索引","写入数据类型":"写入数据类型","写入模式":"写入模式","模拟量写入值":"模拟量写入值","指令参数":"指令参数","心跳配置":"心跳配置","心跳周期":"心跳周期","偏移地址":"偏移地址","读取区域":"读取区域","寄存器个数":"寄存器个数","手机号":"手机号","站号":"站号","在线判断方式":"在线判断方式","重试配置":"重试配置","重试次数":"重试次数","地址合并间隔":"地址合并间隔","自动化地址":"自动化地址","点表":"点表","写入区域":"写入区域","单字节":"单字节","网关序列号":"网关序列号","网关配置":"网关配置","-物通博联":"-物通博联","主题":"主题","网关":"网关","参数":"参数","-讯饶":"-讯饶","仪表源地址":"仪表源地址","操作":"操作","数据名称":"数据名称","电池寿命":"电池寿命","广播配置":"广播配置","启动广播方式":"启动广播方式","广播":"广播","广播地址":"广播地址","广播网关":"广播网关","分组":"分组","命令类型":"命令类型","串口":"串口","串口配置":"串口配置","波特率":"波特率","数据位":"数据位","停止位":"停止位","奇偶校验":"奇偶校验","硬件流控":"硬件流控","不继承模型的数据点":"不继承模型的数据点","可写":"可写","读写":"读写","订阅消息主题":"订阅消息主题","只使用资产配置中的":"只使用资产配置中的","客户端":"客户端","消息服务质量":"消息服务质量","解析正则":"解析正则","匹配属性":"匹配属性","数据":"数据","证书类型":"证书类型","是否验证服务端证书链和地址名称":"是否验证服务端证书链和地址名称","客户端证书":"客户端证书","自定义脚本":"自定义脚本","写入点":"写入点","写入":"写入","发送消息主题":"发送消息主题","设备标识":"设备标识","接收端口":"接收端口","接收路径":"接收路径","中国移动":"中国移动","计算机名":"计算机名","安全模式":"安全模式","安全策略":"安全策略","应用名称":"应用名称","应用":"应用","本地部分":"本地部分","力控":"力控","链接超时时间":"链接超时时间","空闲超时时间":"空闲超时时间","区域":"区域","位下标":"位下标","起始地址":"起始地址","字总数":"字总数","字长度":"字长度","字节长度":"字节长度","机架号":"机架号","驱动类型":"驱动类型","运行模式":"运行模式","运行状态":"运行状态","创建时间":"创建时间","创建人":"创建人","是否禁用":"是否禁用","分配方式":"分配方式","模版":"模版","取值数据":"取值数据","可重复":"可重复","默认":"默认","-定义选择项":"-定义选择项","驱动指令配置":"驱动指令配置","数据写入":"数据写入","数据输出":"数据输出","指令脚本":"指令脚本","事件":"事件","事件标识":"事件标识","事件名称":"事件名称","事件数据输出":"事件数据输出","报警死区":"报警死区","报警声音":"报警声音","播放次数":"播放次数","报警提醒":"报警提醒","报警处理":"报警处理","超时处理":"超时处理","报警次数":"报警次数","报警有效期":"报警有效期","范围限定":"范围限定","资产":"资产","禁用":"禁用","数据值展示形式":"数据值展示形式","小数补零":"小数补零","数值报警":"数值报警","低低":"低低","高高":"高高","通用配置":"通用配置","不启用":"不启用","保存策略":"保存策略","有效范围":"有效范围","最小数值":"最小数值","最大数值":"最大数值","最小变化率":"最小变化率","最大变化率":"最大变化率","动作":"动作","固定值":"固定值","超时显示":"超时显示","同数据报警":"同数据报警","开启":"开启","全局规则同步":"全局规则同步","时长":"时长","不上数报警":"不上数报警","仿真配置":"仿真配置","仿真方式":"仿真方式","步进":"步进","时间戳":"时间戳","时间格式":"时间格式","显示到列表":"显示到列表","是否显示":"是否显示","更新频率":"更新频率","备注":"备注","设备驱动":"设备驱动","开启仿真":"开启仿真","同一个资产下同一个分区的数据点起始地址按照该间隔合并读取":"同一个资产下同一个分区的数据点起始地址按照该间隔合并读取","适用于寄存器区控制多开关情况":"适用于寄存器区控制多开关情况","填写表单项的名称":"填写表单项的名称","分钟":"分钟","默认情况下资产数据点为其自身的和模型的数据点的合集":"默认情况下资产数据点为其自身的和模型的数据点的合集","如果没有用户名密码便进行匿名访问":"如果没有用户名密码便进行匿名访问","定义报警恢复数值与报警数值之间的波动范围":"定义报警恢复数值与报警数值之间的波动范围","开启后报警声音提醒及报警数据量的更新":"开启后报警声音提醒及报警数据量的更新","开启后可对报警信息进行报警确认及报警处理的操作":"开启后可对报警信息进行报警确认及报警处理的操作","禁用后当前报警规则不生效":"禁用后当前报警规则不生效","低于该值产生中级报警":"低于该值产生中级报警","低于该值产生高级报警":"低于该值产生高级报警","高于该值产生中级报警":"高于该值产生中级报警","高于该值产生高级报警":"高于该值产生高级报警","数据点保存到数据库的保存策略":"数据点保存到数据库的保存策略","数组元素类型":"数组元素类型","元素类型":"元素类型","网络连接时间":"网络连接时间","文本":"文本","网络地址":"网络地址","布尔值":"布尔值","网络在线状态":"网络在线状态","网络平均往返时长":"网络平均往返时长","对象字段":"对象字段","工作表":"工作表","显示名称":"显示名称","第一次执行指令失败后，可以继续执行指令的次数，定义次数范围内若指令执行成功，若有剩余次数，不会继续重试执行":"第一次执行指令失败后，可以继续执行指令的次数，定义次数范围内若指令执行成功，若有剩余次数，不会继续重试执行","系统仿真":"系统仿真","表类型相关":"表类型相关","选择采集驱动，并配置相关信息":"选择采集驱动，并配置相关信息","定义采集的数据点信息":"定义采集的数据点信息","配置控制指令信息，支持的指令格式包 括：字符串、数值、布尔、数据选择器、 宇符串选择器、对象、数组":"配置控制指令信息，支持的指令格式包 括：字符串、数值、布尔、数据选择器、 宇符串选择器、对象、数组","通用驱动":"通用驱动","无线驱动":"无线驱动","行业驱动":"行业驱动","厂商驱动":"厂商驱动","倍福":"倍福","和利时":"和利时","中控":"中控","台达":"台达","永宏":"永宏","南大傲拓":"南大傲拓","数据点的采集周期，不定义默认5秒":"数据点的采集周期，不定义默认5秒","tag点名称":"tag点名称","目标机器的ip或者主机名":"目标机器的ip或者主机名","tcp目标端口":"tcp目标端口","ams源端口":"ams源端口","ams目标端口":"ams目标端口","选择该项后，设备模型中的点表将被设备点表覆盖":"选择该项后，设备模型中的点表将被设备点表覆盖","CAE廊体测温":"CAE廊体测温","{{device}} 代表报警设备名称":"{{device}} 代表报警设备名称","经过多长时间仪表还没有任何数据上传，认定为通讯故障，默认为周期的3倍":"经过多长时间仪表还没有任何数据上传，认定为通讯故障，默认为周期的3倍","IP地址":"IP地址","SQL语句":"SQL语句","CROB写入值":"CROB写入值","DNP3协议":"DNP3协议","lora网关地址":"lora网关地址","Flowmeter/流量计":"Flowmeter/流量计","秒":"秒","自动化地址在发起modbus请求时地址位会减一":"自动化地址在发起modbus请求时地址位会减一","g340t协议":"g340t协议","Lora网关":"Lora网关","对应A11协议填写，不填写则与标识相同":"对应A11协议填写，不填写则与标识相同","天":"天","Lora设备编号":"Lora设备编号","Modbus_A11协议":"Modbus_A11协议","Modbus/RTU协议":"Modbus/RTU协议","Modbus/TCP协议":"Modbus/TCP协议","MQTT服务器":"MQTT服务器","CA文件":"CA文件","客户端key文件":"客户端key文件","MQTT Client协议":"MQTT Client协议","Item前缀":"Item前缀","lTagId属性值":"lTagId属性值","shParId属性值":"shParId属性值","DB号":"DB号","自定义驱动名称，驱动名称不可重复":"自定义驱动名称，驱动名称不可重复","指令名称必须为汉字、字母、数字、特殊字符#$-_():且不为纯数字":"指令名称必须为汉字、字母、数字、特殊字符#$-_():且不为纯数字","当前模型下数据点标识已存在":"当前模型下数据点标识已存在","在定义的时间范围内，对同一资产同一条报警规则产生的报警进行合并，只展示一条报警消息":"在定义的时间范围内，对同一资产同一条报警规则产生的报警进行合并，只展示一条报警消息","若设置延时提醒时长，产生报警，经过设定时长后进行第一次报警提醒":"若设置延时提醒时长，产生报警，经过设定时长后进行第一次报警提醒","仅支持MP3、WAV格式":"仅支持MP3、WAV格式","报警声音播放次数，不填为仅一次":"报警声音播放次数，不填为仅一次","配置有效期后，只会在有效期间产生报警信息":"配置有效期后，只会在有效期间产生报警信息","低":"低","高":"高","设定时长内上数相同时所产生的报警，开启时所有项必填":"设定时长内上数相同时所产生的报警，开启时所有项必填","设定时长内不上数所产生的报警，开启时所有项必填":"设定时长内不上数所产生的报警，开启时所有项必填","最小值为0时，与不填是一样效果":"最小值为0时，与不填是一样效果","最大值为0时，与不填是一样效果":"最大值为0时，与不填是一样效果","勾选后，数据点可作为记录列表的显示字段，显示数据的最新值":"勾选后，数据点可作为记录列表的显示字段，显示数据的最新值","未配置更新频率，实时更新数据库列值，配置后，按照频率更新数据库列值，频率不可以小于采集周期":"未配置更新频率，实时更新数据库列值，配置后，按照频率更新数据库列值，频率不可以小于采集周期","通讯超时时间(s)":"通讯超时时间(s)","判断设备超时的时间标准，超时时间为定义参数周期的3倍":"判断设备超时的时间标准，超时时间为定义参数周期的3倍","需大于采集周期":"需大于采集周期","数据点的采集周期，不定义默认60秒":"数据点的采集周期，不定义默认60秒","15条/页":"15条/页","30条/页":"30条/页","50条/页":"50条/页","100条/页":"100条/页","基本属性":"基本属性","标识唯一，包含汉字、字母、数字、特殊字符$-_:":"标识唯一，包含汉字、字母、数字、特殊字符$-_:","标识格式有误，请按照限制格式填写内容！":"标识格式有误，请按照限制格式填写内容！","标识不能为纯数字":"标识不能为纯数字","当前模型下数据点名称已存在":"当前模型下数据点名称已存在","数值转换":"数值转换","数值仿真":"数值仿真","其它报警":"其它报警","报警间隔(s)":"报警间隔(s)","延时提醒时长(s)":"延时提醒时长(s)","小时":"小时","分":"分","配置报警次数后，触发报警条件产生的报警提示信息达到设定次数，将不会信的产生报警消息，当报警恢复后，重新计算次数；":"配置报警次数后，触发报警条件产生的报警提示信息达到设定次数，将不会信的产生报警消息，当报警恢复后，重新计算次数；","四舍五入":"四舍五入","向上进位":"向上进位","按位展示":"按位展示","每次存储":"每次存储","变化存储":"变化存储","不存储":"不存储","边界值":"边界值","丢弃":"丢弃","显示当前值":"显示当前值","不显示当前值":"不显示当前值","中":"中","随机":"随机","线性":"线性","线性变化时，每次递增的值。":"线性变化时，每次递增的值。","单驱动":"单驱动","集群节点":"集群节点","\\n          单驱动说明：单个驱动支撑平台中选择该驱动的所有的设备运行 \\n          集群：集群下可安装多个集群节点，集群节点下可安装驱动，集群是多个驱动支撑平台中所有选择该驱动的设备运行\\n          集群节点：集群添加完毕后，可在集群下可添加多个集群节点，每个集群节点下都可添加驱动":"\\n          单驱动说明：单个驱动支撑平台中选择该驱动的所有的设备运行 \\n          集群：集群下可安装多个集群节点，集群节点下可安装驱动，集群是多个驱动支撑平台中所有选择该驱动的设备运行\\n          集群节点：集群添加完毕后，可在集群下可添加多个集群节点，每个集群节点下都可添加驱动","重启中":"重启中","停止":"停止","全部":"全部","平均":"平均","全部：集群中的每个驱动都会支撑全部资产运行 平均：集群中驱动平均分配资产支撑运行 ":"全部：集群中的每个驱动都会支撑全部资产运行 平均：集群中驱动平均分配资产支撑运行 ","修改驱动":"修改驱动"," 单驱动说明：单个驱动支撑平台中选择该驱动的所有的设备运行 集群：集群下可安装多个集群节点，集群节点下可安装驱动，集群是多个驱动支撑平台中所有选择该驱动的设备运行 集群节点：集群添加完毕后，可在集群下可添加多个集群节点，每个集群节点下都可添加驱动":" 单驱动说明：单个驱动支撑平台中选择该驱动的所有的设备运行 集群：集群下可安装多个集群节点，集群节点下可安装驱动，集群是多个驱动支撑平台中所有选择该驱动的设备运行 集群节点：集群添加完毕后，可在集群下可添加多个集群节点，每个集群节点下都可添加驱动","单驱动说明：单个驱动支撑平台中选择该驱动的所有的设备运行 集群：集群下可安装多个集群节点，集群节点下可安装驱动，集群是多个驱动支撑平台中所有选择该驱动的设备运行 集群节点：集群添加完毕后，可在集群下可添加多个集群节点，每个集群节点下都可添加驱动":"单驱动说明：单个驱动支撑平台中选择该驱动的所有的设备运行 集群：集群下可安装多个集群节点，集群节点下可安装驱动，集群是多个驱动支撑平台中所有选择该驱动的设备运行 集群节点：集群添加完毕后，可在集群下可添加多个集群节点，每个集群节点下都可添加驱动","连接超时时间 (s)":"连接超时时间 (s)","默认为10s":"默认为10s","连接空闲时间 (s)":"连接空闲时间 (s)","默认为30s":"默认为30s","连接使用间隔 (ms)":"连接使用间隔 (ms)","默认为1ms":"默认为1ms","安装【设备配置】表功能后，当前表默认为 数据采集表，若需要数据采集，可安装此功能， 安装后表的配置TAB会相应的增加一个，表以 及创建表记录时，均可以配置相关内容。其中 表如果配置了【设备配置】的表单信息，表记 录会自动继承相应的配置。":"安装【设备配置】表功能后，当前表默认为 数据采集表，若需要数据采集，可安装此功能， 安装后表的配置TAB会相应的增加一个，表以 及创建表记录时，均可以配置相关内容。其中 表如果配置了【设备配置】的表单信息，表记 录会自动继承相应的配置。","更新频率 (s)":"更新频率 (s)","\\r\\n// 解析接收数据\\r\\n// 该服务器和主题收到的消息会调用此方法进行解析,消息主题是方法参数topic,消息内容是方法参数package.\\r\\n// topic类型为字符串,考虑到部分设备的消息内容为二进制数据,package类型为字节数组.\\r\\nParseHandle = function (topic, package) {\\r\\n\\r\\n    // 解析数据\\r\\n    \\r\\n    return [                 //可返回多个对象,对应多个资产\\r\\n        { id, values,time }  //返回的对象中的key的名字必须为id,values,time\\r\\n    ]\\r\\n}\\r\\n\\r\\n// 构建发送数据\\r\\nCommandHandle = function (topic, id, op) {\\r\\n    // 构建发送数据\\r\\n    let sendTopic = \\"\\"\\r\\n    let sendData = \\"\\"\\r\\n    return { sendTopic, sendData } //返回的对象中的key的名字必须为sendTopic,sendData\\r\\n}":"\\r\\n// 解析接收数据\\r\\n// 该服务器和主题收到的消息会调用此方法进行解析,消息主题是方法参数topic,消息内容是方法参数package.\\r\\n// topic类型为字符串,考虑到部分设备的消息内容为二进制数据,package类型为字节数组.\\r\\nParseHandle = function (topic, package) {\\r\\n\\r\\n    // 解析数据\\r\\n    \\r\\n    return [                 //可返回多个对象,对应多个资产\\r\\n        { id, values,time }  //返回的对象中的key的名字必须为id,values,time\\r\\n    ]\\r\\n}\\r\\n\\r\\n// 构建发送数据\\r\\nCommandHandle = function (topic, id, op) {\\r\\n    // 构建发送数据\\r\\n    let sendTopic = \\"\\"\\r\\n    let sendData = \\"\\"\\r\\n    return { sendTopic, sendData } //返回的对象中的key的名字必须为sendTopic,sendData\\r\\n}","解析接收数据":"解析接收数据","该服务器和主题收到的消息会调用此方法进行解析,消息主题是方法参数topic,消息内容是方法参数package.":"该服务器和主题收到的消息会调用此方法进行解析,消息主题是方法参数topic,消息内容是方法参数package.","topic类型为字符串,考虑到部分设备的消息内容为二进制数据,package类型为字节数组.":"topic类型为字符串,考虑到部分设备的消息内容为二进制数据,package类型为字节数组.","解析数据":"解析数据","可返回多个对象,对应多个资产":"可返回多个对象,对应多个资产","返回的对象中的key的名字必须为id,values,time":"返回的对象中的key的名字必须为id,values,time","构建发送数据":"构建发送数据","返回的对象中的key的名字必须为sendTopic,sendData":"返回的对象中的key的名字必须为sendTopic,sendData","浮点数-低位在前":"浮点数-低位在前","浮点数-高位在前":"浮点数-高位在前","浮点数-低位在前-字节交换":"浮点数-低位在前-字节交换","浮点数-高位在前-字节交换":"浮点数-高位在前-字节交换","有符号字节":"有符号字节","无符号字节":"无符号字节","有符号整数-低位在前":"有符号整数-低位在前","有符号整数-高位在前":"有符号整数-高位在前","无符号整数-低位在前":"无符号整数-低位在前","无符号整数-高位在前":"无符号整数-高位在前","有符号长整数-低位在前":"有符号长整数-低位在前","有符号长整数-高位在前":"有符号长整数-高位在前","无符号长整数-低位在前":"无符号长整数-低位在前","无符号长整数-高位在前":"无符号长整数-高位在前","双精度浮点数-低位在前":"双精度浮点数-低位在前","双精度浮点数-高位在前":"双精度浮点数-高位在前","布尔型":"布尔型","字符串-ASCII编码":"字符串-ASCII编码","16位数字":"16位数字","BCD码":"BCD码","有符号字节-16位的前8位":"有符号字节-16位的前8位","有符号字节-16位的后8位":"有符号字节-16位的后8位","无符号字节-16位的前8位":"无符号字节-16位的前8位","无符号字节-16位的后8位":"无符号字节-16位的后8位","有符号长整数-高位在前-字节交换":"有符号长整数-高位在前-字节交换","有符号长整数-低位在前-字节交换":"有符号长整数-低位在前-字节交换","无符号长整数-高位在前-字节交换":"无符号长整数-高位在前-字节交换","无符号长整数-低位在前-字节交换":"无符号长整数-低位在前-字节交换","双精度浮点数-高位在前-字节交换":"双精度浮点数-高位在前-字节交换","双精度浮点数-低位在前-字节交换":"双精度浮点数-低位在前-字节交换","采集周期 (秒)":"采集周期 (秒)","浮点数":"浮点数","双精度":"双精度","线圈状态":"线圈状态","输入状态":"输入状态","保持寄存器":"保持寄存器","输入寄存器":"输入寄存器","字符串-字节交换":"字符串-字节交换","默认: YYYY-MM-DD HH:mm:ss":"默认: YYYY-MM-DD HH:mm:ss","方式":"方式","表单":"表单","字符串选择":"字符串选择","数字选择":"数字选择","对象":"对象","数组":"数组","输出":"输出","处理前":"处理前","处理后":"处理后","脚本内容":"脚本内容","从":"从","*星期":"*星期","每":"每","星期":"星期","重启系统仿真程序":"重启系统仿真程序","重启配置":"重启配置","驱动配置改变才会进行驱动重启":"驱动配置改变才会进行驱动重启","共享驱动模板":"共享驱动模板","我的文件/驱动模板":"我的文件/驱动模板","创建驱动模版成功":"创建驱动模版成功","更新模版":"更新模版","创建模版":"创建模版","更新":"更新","安装失败":"安装失败","参数保存成功,正在拉取驱动":"参数保存成功,正在拉取驱动","拉取驱动错误":"拉取驱动错误","请填写完整参数":"请填写完整参数","自建驱动":"自建驱动","创建并启动服务成功！":"创建并启动服务成功！","正在启动":"正在启动","正在安装":"正在安装","拉取驱动成功":"拉取驱动成功","正在下载":"正在下载","选择模版":"选择模版","共享":"共享","个人":"个人","预览":"预览","选择驱动":"选择驱动","安装【设备配置】表功能后，当前表默认为数据采集表，若需要数据采集，可安装此功能，安装后表的配置TAB会相应的增加一个，表以及创建表记录时，均可以配置相关内容。其中表如果配置了【设备配置】的表单信息，表记录会自动继承相应的配置。":"安装【设备配置】表功能后，当前表默认为数据采集表，若需要数据采集，可安装此功能，安装后表的配置TAB会相应的增加一个，表以及创建表记录时，均可以配置相关内容。其中表如果配置了【设备配置】的表单信息，表记录会自动继承相应的配置。","配置控制指令信息，支持的指令格式包 括：字符串、数值、布尔、数据选择器、字符串选择器、对象、数组":"配置控制指令信息，支持的指令格式包 括：字符串、数值、布尔、数据选择器、字符串选择器、对象、数组","当前表下数据点标识已存在":"当前表下数据点标识已存在","当前表下数据点名称已存在":"当前表下数据点名称已存在","查看设备实时数据点":"查看设备实时数据点","长时间不上数报警":"长时间不上数报警"}');function Ci(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ai(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ci(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ci(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ti=[{group:_r("系统仿真"),component:pi.bk}],ki={DriverSelect:Nn,NodeDataComponent:ci.Z,NewSelectConfig:Zn.Z,DrawerDebug:ci.q,"Device.CommandValue":function(r){var i,o,l,s=useI18n().t,u=r.input,c=u.value,p=u.onChange,d=r.field,m=r.commandV,f=r.visible,_=r.type,y=r.onCancel,v=r.noCard,g=r.customGroup;if(m)i=m.commandForms,o=m.formSchema,l=m.defaultValue;else{var b=(0,e.use)("form",(function(e){var t,r=e.values;if((null==d||null===(t=d.key)||void 0===t?void 0:t.indexOf("."))>-1){var n,i=null==d||null===(n=d.key)||void 0===n?void 0:n.slice(0,d.key.lastIndexOf("."));return{commandForms:a().get(r,"".concat(i,".command.form")),formSchema:a().get(r,"".concat(i,".command.formSchema")),defaultValue:a().get(r,"".concat(i,".command.defaultValue"))}}return{commandForms:a().get(r,"command.form"),formSchema:a().get(r,"command.formSchema"),defaultValue:a().get(r,"command.defaultValue")}}));i=b.commandForms,o=b.formSchema,l=b.defaultValue}!c&&l&&p(l);var h=function(e,r){p((0,t.Z)({},e,r))};return i&&i.length>0?i.map((function(e){var t,r,i=e&&e.name;if(!e)return n().createElement(L.Input,{disabled:!0});if("boolean"==e.type)return n().createElement(L.Switch,{value:c[i],onChange:function(e){return h(i,e)}});if(!(e.enum||null!=e&&null!==(t=e.select)&&void 0!==t&&t.enum)){if("string"==e.type)return n().createElement(L.Input,{value:c[i],onChange:function(e){return h(i,e.target.value)}});if("number"==e.type)return n().createElement(L.InputNumber,{value:c[i],onChange:function(e){return h(i,e)}});if("table"===e.type)return n().createElement(mn,{selectType:"single",noCard:v,commandForm:e,value:null==c?void 0:c[i],onChange:function(e){return h(i,e)}});if("array"===e.type&&"table"===e.arrayValue)return n().createElement(mn,{selectType:"multiple",noCard:v,commandForm:e,value:null==c?void 0:c[i],onChange:function(e){return h(i,e)}});if("select"!==e.arrayValue&&"numSelect"!==e.arrayValue||e.ifRepeat)return null!==(r=o)&&void 0!==r&&r.schema?n().createElement(hn,{formSchema:o,commandForm:e,value:null==c?void 0:c[i],type:_,onCancel:y,vis:f,onChange:function(e){return h(i,e)},group:g}):o?n().createElement(En,{formSchema:o,commandForm:e,value:null==c?void 0:c[i],type:_,onCancel:y,vis:f,onChange:function(e){return h(i,e)},group:g}):n().createElement("span",null,s("未配置完整"));var u,p,d=[];return null===(u=e.select2)||void 0===u||null===(p=u.enum)||void 0===p||p.forEach((function(t,r){var n,i;d.push({value:t,label:null===(n=e.select2)||void 0===n||null===(i=n.enum_title)||void 0===i?void 0:i[r]})})),n().createElement(L.Select,{allowClear:!0,mode:"multiple",style:{width:"100%"},defaultValue:l||[],value:null==c?void 0:c[i],options:d,onChange:function(e){return h(i,e)}})}var m,b,E=e.enum||(null==e||null===(m=e.select)||void 0===m?void 0:m.enum),O=e.enum_title||(null==e||null===(b=e.select)||void 0===b?void 0:b.enum_title);return E&&!a().isEmpty(E)?O&&!a().isEmpty(O)?n().createElement(L.Select,{value:c[i],onChange:function(e){return h(i,e)},style:{width:"100%"}},O&&O.length>0?O.map((function(e,t){return n().createElement(L.Select.Option,{value:E[t],key:E[t]}," ",e)})):null):n().createElement(L.Select,{value:c[i],onChange:function(e){return h(i,e)},style:{width:"100%"}},E&&E.length>0?E.map((function(e,t){return n().createElement(L.Select.Option,{value:e,key:e}," ",e)})):null):void 0})):n().createElement(L.Input,{disabled:!0})}},Di={device_node:null,device_page:40};const Ii={name:"iot.device",items:{drivers:{type:"map"},systemOperation:{type:"array"}},drivers:an,models:Ei,reducers:{device:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Di,t=arguments.length>1?arguments[1]:void 0;return"@@device/CHANGE_DEVICE_NODE"==t.type||"@@device/CHANGE_DEVICE_Page"==t.type?Ai(Ai({},e),t.payload):e}},locales:{en:{translation:Oi},zh_Hans:{translation:wi}},components:ki,form_fields:{ip:{component:function(e){var t=e.input,r=t.value,i=t.onChange;return n().createElement(L.Input,{value:r,onChange:function(e){var t=e.target.value,r=[];t.split("").filter((function(e){return!a().isNaN(Number(e))||"."==e})).join("").split(".").map((function(e){if(e.length>3){var t=a().chunk(a().split(e,""),3).map((function(e){return a().join(e,"")}));r=[].concat((0,on.Z)(r),(0,on.Z)(t))}else r=[].concat((0,on.Z)(r),[e])})),i(r.slice(0,4).join("."))}})}},command:{component:function(){return n().createElement(L.Select,{defaultValue:"lucy",style:{width:120},onChange:function(){}},n().createElement(wn,{value:"jack"},"Jack"),n().createElement(wn,{value:"lucy"},"Lucy"),n().createElement(wn,{value:"disabled",disabled:!0},"Disabled"),n().createElement(wn,{value:"Yiminghe"},"yiminghe"))}},bindFormItem:{component:function(t){var r=t.input,i=useI18n().t,o=(0,e.use)("form",(function(e){return{items:a().get(e.values,r.name.split(".")[0]+".form",[])}})).items;return(o=o.filter((function(e){return e.name}))).length>0?n().createElement(L.Select,{style:{minWidth:150},allowClear:!0,value:r.value||void 0,onChange:function(e){r.onChange(e||"")}},o.map((function(e){var t=e.name;return n().createElement(L.Select.Option,{value:t},t)}))):n().createElement("span",null,i("暂无表单项"))}},deviceScriptEdit:{component:function(e){var t=e.input,r=e.schema,i=n().useState(200),o=(0,ln.Z)(i,2),l=o[0],s=o[1],u=null!=t&&t.value?{value:t.value}:{defaultValue:(null==r?void 0:r.defaultScript)||"\n// ".concat(_t1("解析接收数据"),"\n// ").concat(_t1("该服务器和主题收到的消息会调用此方法进行解析,消息主题是方法参数topic,消息内容是方法参数package."),"\n// ").concat(_t1("topic类型为字符串,考虑到部分设备的消息内容为二进制数据,package类型为字节数组."),"\nParseHandle = function (topic, package) {\n\n    // ").concat(_t1("解析数据"),"\n    \n    return [                 //").concat(_t1("可返回多个对象,对应多个资产"),"\n        { id, values,time }  //").concat(_t1("返回的对象中的key的名字必须为id,values,time"),"\n    ]\n}\n\n// ").concat(_t1("构建发送数据"),"\nCommandHandle = function (topic, id, op) {\n    // ").concat(_t1("构建发送数据"),'\n    let sendTopic = ""\n    let sendData = ""\n    return { sendTopic, sendData } //').concat(_t1("返回的对象中的key的名字必须为sendTopic,sendData"),"\n}")};return n().createElement(ui,{defaultSize:{width:"100%",height:l},onResizeStop:function(e,t,r,n){return s(l+n.height)},minHeight:200,enable:{top:!1,right:!1,bottom:!0,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1}},n().createElement(B.C,(0,kr.Z)({is:"CodeEditor",height:l,width:"100%",theme:"vs-dark",language:"javascript"},a().omit(t,"value"),u)))}}},systemOperation:Ti,schema_converter:[function(e,t,r){return"string"===t.type&&"ip"==t.fieldType&&(e.type="ip"),"string"===t.type&&"command"==t.fieldType&&(e.type="command"),"string"===t.type&&"bindFormItem"==t.fieldType&&(e.type="bindFormItem"),"string"===t.type&&"deviceScriptEdit"==t.fieldType&&(e.type="deviceScriptEdit"),e}],hooks:{"device.driver":function(e){return{getSchema:Cn.J1}},"device.ext":function(e){return{getFormSchema:Fn.K}}},menuItems:[{title:_r("驱动管理"),url:"/app/model/driverInstance/list",icon:"Debug",permission:"driverInstance.view"},{title:_r("系统操作"),url:"/app/operation",icon:"系统操作",permission:"operation.edit"}],routers:{"/app/":[{path:"operation",component:function(t){var r=e.app.get("systemOperation").reduce((function(e,t){var r=t.group||"系统操作";return null==e[r]&&(e[r]=[]),e[r].push(t),e}),{}),i=["驱动操作","系统仿真","事件handle","计量操作"];return n().createElement(B.Page,{title:n().createElement("span",null,n().createElement(sn.SettingOutlined,null),"系统操作")},n().createElement(L.Alert,{message:"注意，请谨慎使用系统操作功能！！！",type:"warning",showIcon:!0,style:{marginBottom:"1rem"}}),r&&Object.keys(r).length>0?Object.keys(r).sort((function(e,t){return i.indexOf(e)-i.indexOf(t)})).map((function(e){var t=r[e];return n().createElement(L.Card,{title:_t1(e),style:{marginBottom:"1rem"}},t&&"驱动操作"==e?t[0].renderComponent:n().createElement(L.Row,{gutter:8},t.map((function(e){var t=e.component;return n().createElement(L.Col,{sm:6,style:{marginBottom:".5rem"}},n().createElement(t,null))}))))})):n().createElement(L.Card,{style:{marginBottom:"1rem"}},n().createElement(B.C,{is:"NoData",description:"暂无可用的系统操作"})))}}]}};var Si=__webpack_require__(5861),Pi=__webpack_require__(4687),ji=__webpack_require__.n(Pi),xi=__webpack_require__(8488),Mi=__webpack_require__.n(xi),Bi=__webpack_require__(6117),Li=__webpack_require__(2975);function Ri(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ni(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ri(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ri(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}L.DatePicker.RangePicker;var Fi=function(e){var t=e.label,r=e.meta,i=e.input,a=e.field,o=e.children,l=a.attrs||{},s=r.touched&&r.error,u=Ni(Ni({extra:a.description||a.help},{labelCol:{sm:{span:8}},wrapperCol:{sm:{span:16}}}),{},{required:a.required,labelAlign:"right"});s&&(u.validateStatus="error",u.help=s);var c=o||n().createElement(L.Input,(0,kr.Z)({},i,l));return n().createElement(L.Col,{span:8,sm:12,xs:24,md:12,lg:8,xl:8,xxl:6},n().createElement(L.Form.Item,(0,kr.Z)({colon:!1,label:t},u),c))},Zi=function(t){var r=(0,e.use)("model"),i=r.model,a=r.atoms,o=(0,Li.useRecoilState)(a.where("filters")),l=(0,ln.Z)(o,2),s=(l[0],l[1],(0,Li.useRecoilState)(a.wheres)),u=(0,ln.Z)(s,2),c=(u[0],u[1]),p=t.children,d=t.invalid,m=t.handleSubmit,f=t.submitting,_=t.options,y=t.resetFilter,v=(t.form,e.app.context._t);return i.filters,n().createElement(L.Form,{className:"ant-advanced-search-form",onFinish:m},n().createElement(L.Card,{style:{marginBottom:".5rem"},bodyStyle:{paddingBottom:0}},n().createElement(L.Row,null,p),_&&_.submitOnChange?null:n().createElement(L.Row,{style:{marginBottom:".5rem"}},n().createElement(L.Col,{span:24,style:{textAlign:"center"}},n().createElement(L.Button,{disabled:d||f,type:"primary",onClick:m},v("Search"))," ",n().createElement(L.Button,{disabled:f,onClick:function(){return i="forward"==(null==(n=null==t?void 0:t.defaultFilter)?void 0:n.type)?n.count:1,void(n?("forward"==(null==n?void 0:n.type)?(r=Mi()(new Date).subtract(i,n.unit).endOf(n.unit).format("YYYY-MM-DD HH:mm:ss"),e=Mi()(new Date).subtract(i,n.unit).startOf(n.unit).format("YYYY-MM-DD HH:mm:ss")):(r=Mi()(new Date).format("YYYY-MM-DD HH:mm:ss"),e=Mi()(new Date).startOf(n.unit).format("YYYY-MM-DD HH:mm:ss")),c((function(t){return Ni(Ni({},t),{},{resetFilter:{time:{$gte:e,$lte:r}}})}))):(y(),c((function(e){return{}}))));var e,r,n,i}},"重置")))))},Ui=function(e){var t=e.defaultFilter,r={name:"submenu",component:function(e){return n().createElement(Zi,(0,kr.Z)({},e,{defaultFilter:t}))},group:Fi};return n().createElement(Bi.qn,r)},Wi=function(){var t,r,i,o,l,s,u,c,p=(0,e.use)("model.getItems").getItems,d=(0,e.use)("log.archiveSchema"),m=d.onceSchema,f=(d.cycleSchema,Ji()),_=Ni(Ni({},m),{},{properties:{time:{type:"object",title:_r("清除时间"),format:"date-time",description:"若只选择一个时间点，默认将时间点之前的报警信息全部归档",properties:{},field:{component:function(e){return n().createElement(B.C,(0,kr.Z)({is:"DatePickerFilter"},e))}}},cycle_tyle:Ni(Ni({},null==f||null===(t=f.properties)||void 0===t?void 0:t.cycle_tyle),{},{title:"清除类型"}),tables:Ni({},null==f||null===(r=f.properties)||void 0===r?void 0:r.tables),tableData:Ni({},null==f||null===(i=f.properties)||void 0===i?void 0:i.tableData),commands:Ni({},null==f||null===(o=f.properties)||void 0===o?void 0:o.commands),users:Ni({},null==f||null===(l=f.properties)||void 0===l?void 0:l.users),clean_archive:{title:"是否同时清除归档指令日志",type:"boolean"}},form:["time","cycle_tyle","tables","tableData","commands","users","clean_archive"],formEffect:null==f?void 0:f.formEffect}),y=Ni(Ni({},f),{},{properties:Ni(Ni({},null==f?void 0:f.properties),{},{cycle:Ni(Ni({},null==f||null===(s=f.properties)||void 0===s?void 0:s.cycle),{},{title:"清除周期"}),time_config:Ni(Ni({},null==f||null===(u=f.properties)||void 0===u?void 0:u.time_config),{},{title:"清除时间"}),cycle_tyle:Ni(Ni({},null==f||null===(c=f.properties)||void 0===c?void 0:c.cycle_tyle),{},{title:"清除类型"}),clean_archive:{title:"是否同时清除归档指令日志",type:"boolean"}}),form:[].concat((0,on.Z)(null==f?void 0:f.form),["clean_archive"]),formEffect:null==f?void 0:f.formEffect});return n().createElement(B.C,{is:"Common.ClearData",query:{limit:30,skip:0,sort:{createTime:-1},project:{name:1,cycle:1,cycle_type:1,clean_archive:1,tables:1,tableData:1,users:1,commands:1,disabled:1,time_config:1},withCount:!0},title:_r("指令日志"),onceSchema:_,cycleSchema:y,url:"driver/cleancycle",queryKey:"name",oncePermission:"cleancycle.instant",cyclePermissionKey:"cleancycle",saveItem:function(t,r){var n,i,o,l,s,u,c,d,m,f,_,y=a().cloneDeep(t),v="一键清除"==r?"driver/cleancycle/cleanonce":null!==(n=y)&&void 0!==n&&n.id?"driver/cleancycle/".concat(null===(i=y)||void 0===i?void 0:i.id):"driver/cleancycle";return"一键清除"==r?(y=a().isObject(y.time)?Ni(Ni({},y),{},{time:{$gte:(null===(l=y)||void 0===l||null===(s=l.time)||void 0===s?void 0:s.gte)||(null===(u=y)||void 0===u||null===(c=u.time)||void 0===c?void 0:c.start_time),$lte:(null===(d=y)||void 0===d||null===(m=d.time)||void 0===m?void 0:m.lte)||(null===(f=y)||void 0===f||null===(_=f.time)||void 0===_?void 0:_.end_time)}}):Ni(Ni({},y),{},{end_time:y.time}),a().isEmpty(y.start_time)&&delete y.start_time,a().isEmpty(y.end_time)&&delete y.end_time):y.disabled=!a().isEmpty(y.disabled)&&y.disabled,(0,e.api)({name:v}).fetch("",{method:null!==(o=y)&&void 0!==o&&o.id&&"一键清除"!=r?"PATCH":"POST",body:JSON.stringify(Ni(Ni({},y),y.cycle))}).then((function(e){e.status>=200&&e.status<400?(L.message.success("一键清除"==r?_t1("清除成功！"):_t1("保存成功！")),setTimeout((function(){p()}),800)):L.message.error(e.message)}))}})};const qi=function(t){var r,i,o,l,s,u=(0,e.use)("model").model,c=(0,e.use)("model.transI18n",{model:u}).modelI18n,p=n().useState(null),d=(0,ln.Z)(p,2),m=d[0],f=d[1],_=(0,e.use)("log.archiveSchema"),y=_.onceSchema,v=(_.cycleSchema,(0,e.use)("model.getItems").getItems),g=Ji(),b="Instruct",h=Ni(Ni({},y),{},{properties:{time:{type:"object",title:_r("归档时间"),format:"date-time",description:"若只选择一个时间点，默认将时间点之前的指令日志信息全部归档",properties:{},field:{component:function(e){return n().createElement(B.C,(0,kr.Z)({is:"DatePickerFilter"},e))}}},cycle_tyle:Ni(Ni({},null==g||null===(r=g.properties)||void 0===r?void 0:r.cycle_tyle),{},{title:"归档类型"}),tables:Ni({},null==g||null===(i=g.properties)||void 0===i?void 0:i.tables),tableData:Ni({},null==g||null===(o=g.properties)||void 0===o?void 0:o.tableData),commands:Ni({},null==g||null===(l=g.properties)||void 0===l?void 0:l.commands),users:Ni({},null==g||null===(s=g.properties)||void 0===s?void 0:s.users)},required:["time"],form:["time","cycle_tyle","tables","tableData","users","commands"],formEffect:null==g?void 0:g.formEffect});return n().createElement(un.Model,{name:b,modelKey:b},n().createElement(B.Page,{title:n().createElement("span",null," ",n().createElement(B.Icon,{svg:__webpack_require__(1783),className:"logIcon"})," ",null==c?void 0:c.title),subTitle:n().createElement(un.ModelBlock,{name:"model.list.nav"}),actions:n().createElement(n().Fragment,null,n().createElement(B.C,(0,kr.Z)({is:"LogAnalysistimeRange"},t,{getValues:function(e){var t;null!=e&&e.length?f(null==e||null===(t=e[0])||void 0===t?void 0:t.params):f(e)}})),n().createElement(Wi,t),n().createElement(B.C,(0,kr.Z)({is:"ArchiveDropdown"},t,{title:_t1("指令日志"),onePermission:"archivecycle.instant",permission:"archivecycle.instant",goPage:"/app/model/DeviceArchive/list",saveItem:function(t,r){var n=a().cloneDeep(r),i="一键归档"==t?"driver/archivecycle/archiveonce":null!=r&&r.id?"driver/archivecycle/".concat(null==r?void 0:r.id):"driver/archivecycle",o={};return n&&"一键归档"==t&&(n.time&&(o.time={},n.time.gte&&(o.time.$gte=n.time.gte),n.time.lte&&(o.time.$lte=n.time.lte)),n.type&&(o.type=n.type),o.cycle_tyle=null==n?void 0:n.cycle_tyle,o.tables=null==n?void 0:n.tables,o.tableData=null==n?void 0:n.tableData,o.users=null==n?void 0:n.users,o.commands=null==n?void 0:n.commands),"一键归档"!=t&&(n.type=a().isObject(n.type)?null==n?void 0:n.type.$in:n.type),(0,e.api)({name:i}).fetch("",{method:null!=r&&r.id&&"一键归档"!=t?"PATCH":"POST",body:JSON.stringify("一键归档"==t?o:Ni(Ni({},r),null==r?void 0:r.cycle))}).then((function(e){var t=e.status,r=e.json;if(t>=200&&t<400){var n=a().isString(r)?r:"保存成功";L.message.success(_t1(n)),setTimeout((function(){return v()}),800)}})).catch((function(e){var t=e.json;L.message.error(t)}))},modelKey:b,ArchiveSchema:g,OneASchema:h,url:"driver/archivecycle"})))},n().createElement(Ui,{defaultFilter:m}),n().createElement("div",{key:"model-list-subnav",style:{display:"flex",justifyContent:"space-between",marginBottom:".5rem"}},n().createElement(B.C,{is:"Model.Pagination"})," ",n().createElement(B.C,{is:"Model.ListSubMenu"})),n().createElement("div",{className:"logTable"},n().createElement(B.C,{is:"Model.DataTable"})),n().createElement("div",{key:"model-list-downnav",style:{display:"flex",justifyContent:"space-between",marginTop:".5rem"}},n().createElement("div",null)," ",n().createElement(B.C,{is:"Model.Pagination"}))))};function Vi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zi(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Vi(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gi=L.TreeSelect.TreeNode,Ki=function(e){var t,r=e.item,i=useI18n().t,a=n().useState(!1),o=(0,ln.Z)(a,2),l=o[0],s=o[1],u=[{title:_r("流水号"),dataIndex:"serialNo",key:"serialNo"},{title:_r("类型"),dataIndex:"type",key:"type"},{title:_r("状态"),dataIndex:"status",key:"status"},{title:_r("描述"),dataIndex:"desc",key:"desc"},{title:_r("时间"),dataIndex:"time",key:"time",render:function(e){return n().createElement("span",null,e?Mi()(e).format("YYYY-MM-DD HH:mm:ss"):"")}}];return n().createElement(n().Fragment,null,n().createElement(L.Button,{onClick:function(){return s(!0)}},i("日志")),n().createElement(L.Modal,{title:"查看日志",width:"70%",visible:l,onCancel:function(){return s(!1)},footer:null},n().createElement(L.Table,{columns:u,dataSource:null!==(t=null==r?void 0:r.logs)&&void 0!==t?t:[]})))},Hi=function(t){var r,i,a,o,l=t.input,s=t.field,u=(s.name,s.schema),c=void 0===u?{}:u,p=(s.type,n().useState({loading:!1,data:[]})),d=(0,ln.Z)(p,2),m=d[0],f=d[1];if(null!=c&&c.tables)try{i=(0,e.use)("form",(function(e){return{tables:e.values.tables}})).tables}catch(e){console.log(e)}if(null!=c&&c.tableData)try{a=(0,e.use)("form",(function(e){return{tableData:e.values.tableData}})).tableData}catch(e){console.log(e)}if(null!=c&&c.cycle_tyle)try{o=(0,e.use)("form",(function(e){return{cycle_tyle:e.values.cycle_tyle}})).cycle_tyle}catch(e){console.log(e)}return n().useEffect((function(){(0,Si.Z)(ji().mark((function t(){var r,n,l,s,u,c,p,d,m;return ji().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(f({loading:!0}),"table"!=o||null===(r=i)||void 0===r||!r.length){t.next=6;break}s=null!==(l=i)&&void 0!==l&&l.length?i.map((function(e){var t;return{title:null==e?void 0:e.title,value:null==e?void 0:e.id,disabled:!0,children:null==e||null===(t=e.device)||void 0===t?void 0:t.commands.map((function(t){return zi(zi({},t),{},{value:"".concat(null==e?void 0:e.id,"-").concat(null==t?void 0:t.name),title:"".concat(null==t?void 0:t.name),id:null==e?void 0:e.id})}))}})):[],f({loading:!1,data:s}),t.next=12;break;case 6:if("tableData"!=o||null===(n=a)||void 0===n||!n.id){t.next=12;break}return t.next=9,(0,e.api)({name:"core/t/".concat(null===(u=a)||void 0===u||null===(c=u.table)||void 0===c?void 0:c.id,"/d/command/").concat(null===(p=a)||void 0===p?void 0:p.id)}).fetch("",{}).then((function(e){return e.json}));case 9:d=t.sent,m=null!=d&&d.length?d.map((function(e){var t,r;return zi(zi({},e),{},{value:null==e?void 0:e.name,title:null==e?void 0:e.name,id:null===(t=a)||void 0===t||null===(r=t.table)||void 0===r?void 0:r.id})})):[],f({loading:!1,data:m});case 12:case"end":return t.stop()}}),t)})))()}),[o,JSON.stringify(i),JSON.stringify(a)]),n().createElement(L.TreeSelect,{showSearch:!0,labelInValue:!0,multiple:!0,style:{width:"100%"},value:null!=l&&null!==(r=l.value)&&void 0!==r&&r.length?l.value.map((function(e){return{value:(null==e?void 0:e.value)||(null==e?void 0:e.title)||(null==e?void 0:e.name)}})):void 0,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:_t1("请选择指令"),onChange:function(e){var t;t="table"==o?null!=e&&e.length?e.map((function(e){return{name:null==e?void 0:e.value.substr((null==e?void 0:e.value.lastIndexOf("-"))+1),id:null==e?void 0:e.value.substr(0,null==e?void 0:e.value.indexOf("-")),value:null==e?void 0:e.value}})):[]:null!=e&&e.length?e.map((function(e){return{name:null==e?void 0:e.value}})):[],l.onChange(t)}},null!=m&&m.data?function e(t){return t&&t.length&&t.map((function(t){return t.children&&t.children.length?n().createElement(Gi,{key:t.value,title:t.title,value:t.value,disabled:!0},e(t.children)):n().createElement(Gi,{key:t.value,value:t.value,title:t.title})}))}(null==m?void 0:m.data.map((function(e){return zi(zi({},e),{},{title:_t1(e.title)})}))):null)},Yi=function(t){var r,i=t.input,a=i.value,o=i.onChange,l=t.schema,s=t.style,u=void 0===s?{}:s,c=n().useState({loading:!1,data:null}),p=(0,ln.Z)(c,2),d=p[0],m=p[1];n().useEffect((function(){f()}),[]);var f=function(){m(zi(zi({},d),{},{loading:!0})),(0,e.api)({name:"core/user"}).fetch("",{}).then((function(e){var t=e.json;t&&m({loading:!1,data:t})}))},_="array"===(null==l?void 0:l.type)?"multiple":void 0;return n().createElement(L.Select,{labelInValue:!0,mode:_,defaultValue:null!=a&&a.length?a.map((function(e){return null==e?void 0:e.id})):void 0,style:zi({width:158},u),onChange:function(e){!function(e){var t=null!=e&&e.length?e.map((function(e){return{name:null==e?void 0:e.label,value:e.value,id:null==e?void 0:e.value}})):[];o(t)}(e)}},null!==(r=d.data)&&void 0!==r&&r.length?d.data.map((function(e){return n().createElement(L.Select.Option,{value:e.id},e.name)})):null)},Ji=function(){var e={type:"object",properties:{name:{title:_r("周期名称"),type:"string"},cycle:{type:"object",title:_r("归档周期"),properties:{cycle:{title:_r("数量"),type:"number",field:{validate:function(e){return/^(0+)|[^\d]+/g.test(e)?"只能为大于0的正整数":null}}},cycle_type:{title:_r("日期单位"),type:"string",field:{component:function(e){var t=e.input,r=[{value:"day",name:_t1("天")},{value:"week",name:_t1("周")},{value:"month",name:_t1("月")},{value:"year",name:_t1("年")}];return n().createElement(L.Select,(0,kr.Z)({},t,{style:{maxWidth:"200px"}}),r.map((function(e){return n().createElement(Option,{value:e.value},e.name)})))},effect:function(e,t){var r=t.getState().initialValues;r&&!a().isEmpty(r)&&e.value!=r.cycle_type&&t.change("time",null)},validate:function(e){return e?null:_r("请选择日期单位")}}}},description:_r("周期定义后，将会按照周期定时归档周期内的日志信息")},time_config:{type:"object",title:"归档时间",properties:{},field:{component:function(e){return n().createElement(B.C,(0,kr.Z)({is:"YmdwwpsPicker"},e,{field:zi(zi({},e.field),{},{schema:zi(zi({},e.field.schema),{},{cycle:"cycle"})})}))},validate:function(e,t){var r=t&&t.planCycle||void 0;if("{}"==JSON.stringify(e))return!1;if(!e||"string"==typeof e)return!1;if("hms"!=t.type&&"minute"!=t.type&&e&&!e.hms)return"请选择执行时间";if("year"==r){if(!e.hour)return"请选择执行月";if(!e.day)return"请选择执行日"}else if("week"==r){if(!e.week)return"请选择执行日"}else if("month"==r&&!e.day)return"请选择执行日"}},description:"可定义每个周期归档执行时间，不定义默认周期的00:00:00执行"},cycle_tyle:{title:_r("归档类型"),type:"string",enum:["table","tableData","user"],enum_title:[_r("按设备表"),_r("按设备"),_r("按用户")]},tables:{type:"array",title:_r("设备表"),fieldType:"table",field:{func:"device",component:function(e){return n().createElement(B.C,(0,kr.Z)({is:"Common.SelectTable",mode:"multiple",fields:["title","name","function","device"]},e))}},items:{},description:_r("不选则为全部设备表")},tableData:{type:"object",title:_r("设备"),items:{},fieldType:"tableData",field:{func:"device"}},users:{type:"array",title:_r("用户"),notInclude:!0,items:{},field:{component:Yi}},commands:{type:"array",title:_r("指令"),items:{},field:{component:function(e){return n().createElement(Hi,(0,kr.Z)({},e,{field:zi(zi({},e.field),{},{schema:zi(zi({},e.field.schema),{},{tableData:"tableData",tables:"tables",users:"users",cycle_tyle:"cycle_tyle"})})}))}}}},formEffect:function(e){e.useField("cycle_tyle",(function(t){var r=["tables","tableData","users","commands"];r.forEach((function(t){return e.setFieldData(t,{display:!1})})),"table"===t.value?(e.setFieldData("tables",{display:!0}),e.setFieldData("commands",{display:!0}),r.filter((function(e){return"tables"!=e&&"commands"!=e})).forEach((function(t){return e.change(t,null)}))):"tableData"===t.value?(e.setFieldData("tableData",{display:!0}),e.setFieldData("commands",{display:!0}),r.filter((function(e){return"tableData"!=e&&"commands"!=e})).forEach((function(t){return e.change(t,null)}))):"user"==t.value?(e.setFieldData("users",{display:!0}),e.setFieldData("commands",{display:!1}),r.filter((function(e){return"users"!=e})).forEach((function(t){return e.change(t,null)}))):(e.setFieldData("users",{display:!1}),e.setFieldData("tableData",{display:!1}),e.setFieldData("tables",{display:!1}),e.setFieldData("commands",{display:!1}))}))},form:[{key:"name",validate:function(e){return e&&e.length>10?"归档周期名字不得超过10个字符":null}},{key:"cycle",validate:function(e){return e<1||e&&-1!=e.toString().indexOf(".")?"归档周期不能是负数或0或小数":null}},"*"],required:["name","cycle"]};return e};const $i={name:"iot.instruct",menuItems:[{title:_r("指令状态管理"),url:"/app/model/instruct/list",icon:"Table",permission:"instruct.view"}],frontMenuItems:[{title:_r("指令状态管理"),url:"/app/model/instruct/list",icon:"Table",permission:"instruct.view"}],models:{Instruct:{name:"instruct",resource:"driver/instruct",title:_r("指令状态管理"),type:"object",icon:n().createElement(B.Icon,{svg:__webpack_require__(1511)}),initQuery:!1,permission:{view:!0},rolePermission:[{key:"instruct.view",title:"查看"}],listFields:["command","table","tableData","user","time","logs"],filters:{submenu:["user","tableData","time"]},forceGetItem:!0,form:["command","table","tableData","user","time"],properties:{id:{title:"ID",type:"string"},command:{type:"object",title:_r("指令名称"),properties:{}},table:{title:_r("设备表"),type:"object",properties:{}},tableData:{title:_r("设备"),type:"object",fieldType:"tableData",field:{func:"device"}},user:{type:"object",title:_r("执行用户"),properties:{},relateTo:"User",nullFilter:!0},time:{type:"string",title:_r("执行时间"),fieldType:"datePicker",format:"datetime"}},orders:{time:"DESC"},fieldRender:{command:function(e){var t=e.value;return n().createElement("span",null,null==t?void 0:t.name)},table:function(e){var t=e.value;return n().createElement("span",null,null==t?void 0:t.title)},tableData:function(e){var t=e.value,r=a().isArray(t)?t.map((function(e){return null==e?void 0:e.name})).join("，"):"";return n().createElement("span",null,r)}},batchActions:null,itemActions:[function(e){return n().createElement(Ki,e)}],components:{DataEmpty:function(){return n().createElement(L.Empty,{description:_t1("暂无数据"),image:__webpack_require__(5077)})},ListPage:function(e){return n().createElement(qi,e)}}},DeviceArchive:{name:"archivedlog",partialSave:!0,title:_r("归档信息"),type:"object",noAuth:!0,resource:"driver/archivedlog",icon:n().createElement(n().Fragment,null,n().createElement(sn.ArrowLeftOutlined,{onClick:function(){return history.back()}}),n().createElement(B.Icon,{svg:__webpack_require__(1511)})),permission:{view:!0},listFields:["command","table","tableData","user","time"],filters:{submenu:["user","tableData","time"]},forceGetItem:!0,form:["command","table","tableData","user","time"],properties:{time:{type:"string",title:_r("执行时间"),fieldType:"datePicker",format:"datetime"},command:{type:"object",title:_r("指令名称"),properties:{}},table:{title:_r("设备表"),type:"object",properties:{}},tableData:{title:_r("设备"),type:"array",items:{}},user:{type:"object",title:_r("执行用户"),properties:{},relateTo:"User",nullFilter:!0}},orders:{time:"DESC"},fieldRender:{command:function(e){var t=e.value;return n().createElement("span",null,null==t?void 0:t.name)},table:function(e){var t=e.value;return n().createElement("span",null,null==t?void 0:t.title)},tableData:function(e){var t=e.value,r=a().isArray(t)?t.map((function(e){return null==e?void 0:e.name})).join("，"):"";return n().createElement("span",null,r)}},blocks:{"model.list.navbtn":function(){var t=(0,e.use)("model.select"),r=t.selected;return t.onSelect,n().createElement(mi.HasPermission,{permission:"archivedlog.add"},n().createElement(B.C,{is:"ReductionBtn",selected:r,url:"driver/archivedlog/restore/",title:"指令日志"}))}},itemActions:[function(e){return n().createElement(Ki,e)},function(t){var r=t.item,i=(0,e.use)("model.getItems").getItems;return n().createElement(mi.HasPermission,{permission:"archivedlog.add"},n().createElement(L.Button,{onClick:function(){(0,e.api)({name:"driver/archivedlog/restore/"}).fetch(null==r?void 0:r.id,{method:"POST"}).then((function(e){var t=e.status;e.json,200==t?(L.message.success(_t1("恢复成功！")),i()):L.message.error(e.message)}))}}," ",_t1("恢复")," "))},,function(t){var r=t.item,i=(0,e.use)("model.getItems").getItems;return n().createElement(mi.HasPermission,{permission:"archivedlog.delete"},n().createElement(L.Popconfirm,{title:_t1("确认删除?"),onConfirm:function(){(0,e.api)({name:"driver/archivedlog/"}).fetch(r.id,{method:"DELETE"}).then((function(e){var t=e.status;e.json,200==t?(L.message.success(_t1("删除成功！")),i()):L.message.error(e)}))},okText:_t1("删除"),cancelText:_t1("取消")},n().createElement(L.Button,{style:{background:"#ff4d4f",color:"#ffffff"},size:"small"},_t1("删除"))))}],components:{AddButton:function(e){return null},DataEmpty:function(e){return n().createElement(L.Card,null,n().createElement(B.C,{is:"NoData"}))}}}}};function Qi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xi(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Qi(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}__webpack_require__(4420);const ea={name:"airiot.plugin.device",plugins:{name:_r("设备配置"),key:"device",pluginGroup:_r("表类型相关"),defaultProperties:{id:{canOrder:!1,config:"文本",createShow:!0,descriptionType:"tooltip",editShow:!0,fieldType:"input",invalid:!1,key:"id",listFields:!0,need:!0,fixedField:!0,textContent:"text",textType:"input",title:"编号",type:"string"},name:{canOrder:!1,config:"文本",createShow:!0,descriptionType:"tooltip",editShow:!0,fieldType:"input",invalid:!1,key:"name",listFields:!0,need:!0,isShowField:!0,textContent:"text",textType:"input",title:"名称",fixedField:!0,type:"string",field:{}},online:{type:"boolean",config:"布尔值",listFields:!0,fieldType:"boolean",key:"online",title:"在线",descriptionType:"tooltip",need:!1,disabled:!0,displayForm:"checkBox",createShow:!1,editShow:!1,editableFields:!1,batchChangeFields:!1,canOrder:!1,invalid:!1,fixedField:!0},disable:{type:"boolean",config:"布尔值",listFields:!0,fieldType:"boolean",key:"disable",title:"禁用",descriptionType:"tooltip",need:!1,disabled:!1,displayForm:"checkBox",createShow:!0,editShow:!0,editableFields:!1,batchChangeFields:!1,canOrder:!1,invalid:!1,fixedField:!0},focus:{type:"boolean",config:"布尔值",listFields:!0,fieldType:"boolean",key:"focus",title:"关注",descriptionType:"tooltip",need:!1,disabled:!1,displayForm:"checkBox",createShow:!0,editShow:!0,editableFields:!1,batchChangeFields:!1,canOrder:!1,invalid:!1,fixedField:!0},off:{type:"boolean",config:"布尔值",listFields:!0,fieldType:"boolean",key:"off",title:"断电",descriptionType:"tooltip",need:!1,disabled:!1,displayForm:"checkBox",createShow:!0,editShow:!0,editableFields:!1,batchChangeFields:!1,canOrder:!1,invalid:!1,fixedField:!0}},useSetting:function(t){var r=t.data,i=(0,e.use)("model.save",r).saveItem;return{element:n().createElement(B.C,{is:"Custom.TCProvider",id:null==r?void 0:r.id},n().createElement(Cn.QG,{data:r,saveItem:i}))}},useRecordSetting:function(e){var t=e.table,r=(e.setting,e.record),i=(e.data,e.saveSetting),a=n().useState(!0),o=(0,ln.Z)(a,2),l=o[0],s=o[1],u=n().useState({}),c=(0,ln.Z)(u,2),p=c[0],d=c[1];return n().useEffect((function(){var e;s(!0),(0,Cn.J1)((null==t||null===(e=t.device)||void 0===e?void 0:e.driver)||"test",r,t).then((function(e){d(e),s(!1)}))}),[]),{element:l?n().createElement(B.Loading,null):n().createElement(Cn.QG,{data:Xi(Xi({},r),{},{record:!0}),record:!0,table:t,nodeProp:p,saveItem:i})}},useModel:function(t){t.setting,t.table;var r=(0,e.use)("auth.user");return n().useCallback((function(e){return Xi(Xi({},e),{},{properties:Xi({},null==e?void 0:e.properties)})}),[r])},description:{content:_r("安装【设备配置】表功能后，当前表默认为数据采集表，若需要数据采集，可安装此功能，安装后表的配置TAB会相应的增加一个，表以及创建表记录时，均可以配置相关内容。其中表如果配置了【设备配置】的表单信息，表记录会自动继承相应的配置。"),config:[{name:_r("驱动配置"),info:_r("选择采集驱动，并配置相关信息")},{name:_r("数据点"),info:_r("定义采集的数据点信息")},{name:_r("指令"),info:_r("配置控制指令信息，支持的指令格式包 括：字符串、数值、布尔、数据选择器、字符串选择器、对象、数组")}]}}};var ta=__webpack_require__(6119),ra={type:"object",title:_r("数据筛选"),properties:{table:{type:"array",title:_r("设备表"),fieldType:"table",field:{func:"device",style:{minWidth:200},placeholder:_r("选择表"),effect:function(e,t){var r=e.value;setTimeout((function(){t.setFieldData("department",{display:_.isArray(r)?null==r?void 0:r.length:!!r})}))}},items:{}},tableData:{type:"array",title:_r("设备表记录"),fieldType:"tableData",field:{depend:"table",dependRelate:"department",func:"device",style:{minWidth:200},placeholder:_r("选择表记录")},items:{}}}},na={type:"object",properties:{uiType:{title:_r("展示形式"),type:"string",enum:["graph","table"],enum_type:"tab",field:{titleMap:[{value:"graph",name:{title:_r("图形")}},{value:"table",name:{title:_r("表格")}}]}},title:{title:_r("标题"),type:"string"},titleFontSize:{title:_r("标题字体大小"),type:"number",description:_r("默认值和最小值为12"),minimum:12},backgroundColor:{title:_r("背景色"),type:"string",fieldType:"color"},graphLayout:{title:_r("布局"),type:"string",enum:["force","circular","tree"],enum_title:[_r("力引导布局"),_r("环形布局"),_r("树形布局")]},roam:{title:_r("缩放平移"),type:"boolean"},forceConfig:{title:_r("力引导布局配置"),type:"object",properties:{repulsion:{title:_r("斥力因子"),type:"number"},gravity:{title:_r("引力因子"),type:"number"},edgeLengthMax:{title:_r("边长最大值"),type:"number"},edgeLengthMin:{title:_r("边长最小值"),type:"number"}}},serverConfig:{type:"object",title:_r("根节点配置"),properties:{serverText:{title:_r("节点文字"),type:"string"},serverImg:{title:_r("节点图片"),type:"string",fieldType:"image"},serverWidth:{title:_r("图片宽度"),type:"number"},serverHeight:{title:_r("图片高度"),type:"number"},serverColor:{title:_r("字体颜色"),type:"string",fieldType:"color"},serverFontSize:{title:_r("字体大小"),type:"number",description:_r("默认值和最小值为12"),minimum:12}}},equipmentConfig:{type:"object",title:_r("次级节点配置"),properties:{equipmentImg:{title:_r("节点图片"),type:"string",fieldType:"image"},equipmentWidth:{title:_r("图片记宽"),type:"number"},equipmentHeight:{title:_r("图片记高"),type:"number"},equipmentColor:{title:_r("字体颜色"),type:"string",fieldType:"color"},equipmentFontSize:{title:_r("字体大小"),type:"number",description:_r("默认值和最小值为12"),minimum:12}}},linkConfig:{type:"object",title:_r("边配置"),properties:{lineStyleWidth:{title:_r("线宽"),type:"number"}}},filterConfig:ra}},ia=(0,B.lazy)((function(){return __webpack_require__.e(870).then(__webpack_require__.bind(__webpack_require__,6870))})),aa=(0,B.lazy)((function(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,6119))}));const oa={title:_r("网络拓扑图"),category:_r("业务数据"),icon:__webpack_require__(4739),component:function(e){return"table"===e.uiType?React.createElement(aa,(0,kr.Z)({height:"100%"},e)):React.createElement(ia,e)},initLayout:{width:800,height:800},order:-1,initParam:{uiType:"graph",title:_r(""),layout:"force",serverConfig:{serverWidth:80,serverHeight:23},equipmentConfig:{equipmentWidth:30,equipmentHeight:30},forceConfig:{repulsion:50,gravity:-.01,edgeLengthMax:120,edgeLengthMin:50}},paramSchema:na};function la(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var sa=__webpack_require__(9142);function ua(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(0,sa.Z)(n.key),n)}}function ca(e,t,r){return t&&ua(e.prototype,t),r&&ua(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function pa(e,t){return pa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pa(e,t)}function da(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pa(e,t)}var ma=__webpack_require__(1002);function fa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _a(e,t){if(t&&("object"===(0,ma.Z)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fa(e)}function ya(e){return ya=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ya(e)}var va=__webpack_require__(5987),ga=__webpack_require__(3366);function ba(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,pa(e,t)}function ha(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const Ea=n().createContext(null);var Oa=function(e){return e.scrollTop},wa="unmounted",Ca="exited",Aa="entering",Ta="entered",ka="exiting",Da=function(e){function t(t,r){var n;n=e.call(this,t,r)||this;var i,a=r&&!r.isMounting?t.enter:t.appear;return n.appearStatus=null,t.in?a?(i=Ca,n.appearStatus=Aa):i=Ta:i=t.unmountOnExit||t.mountOnEnter?wa:Ca,n.state={status:i},n.nextCallback=null,n}ba(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===wa?{status:Ca}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var r=this.state.status;this.props.in?r!==Aa&&r!==Ta&&(t=Aa):r!==Aa&&r!==Ta||(t=ka)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,r,n=this.props.timeout;return e=t=r=n,null!=n&&"number"!=typeof n&&(e=n.exit,t=n.enter,r=void 0!==n.appear?n.appear:t),{exit:e,enter:t,appear:r}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Aa){if(this.props.unmountOnExit||this.props.mountOnEnter){var r=this.props.nodeRef?this.props.nodeRef.current:qn().findDOMNode(this);r&&Oa(r)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ca&&this.setState({status:wa})},r.performEnter=function(e){var t=this,r=this.props.enter,n=this.context?this.context.isMounting:e,i=this.props.nodeRef?[n]:[qn().findDOMNode(this),n],a=i[0],o=i[1],l=this.getTimeouts(),s=n?l.appear:l.enter;e||r?(this.props.onEnter(a,o),this.safeSetState({status:Aa},(function(){t.props.onEntering(a,o),t.onTransitionEnd(s,(function(){t.safeSetState({status:Ta},(function(){t.props.onEntered(a,o)}))}))}))):this.safeSetState({status:Ta},(function(){t.props.onEntered(a)}))},r.performExit=function(){var e=this,t=this.props.exit,r=this.getTimeouts(),n=this.props.nodeRef?void 0:qn().findDOMNode(this);t?(this.props.onExit(n),this.safeSetState({status:ka},(function(){e.props.onExiting(n),e.onTransitionEnd(r.exit,(function(){e.safeSetState({status:Ca},(function(){e.props.onExited(n)}))}))}))):this.safeSetState({status:Ca},(function(){e.props.onExited(n)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,r=!0;return this.nextCallback=function(n){r&&(r=!1,t.nextCallback=null,e(n))},this.nextCallback.cancel=function(){r=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var r=this.props.nodeRef?this.props.nodeRef.current:qn().findDOMNode(this),n=null==e&&!this.props.addEndListener;if(r&&!n){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[r,this.nextCallback],a=i[0],o=i[1];this.props.addEndListener(a,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var e=this.state.status;if(e===wa)return null;var t=this.props,r=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,ga.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return n().createElement(Ea.Provider,{value:null},"function"==typeof r?r(e,i):n().cloneElement(n().Children.only(r),i))},t}(n().Component);function Ia(){}Da.contextType=Ea,Da.propTypes={},Da.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ia,onEntering:Ia,onEntered:Ia,onExit:Ia,onExiting:Ia,onExited:Ia},Da.UNMOUNTED=wa,Da.EXITED=Ca,Da.ENTERING=Aa,Da.ENTERED=Ta,Da.EXITING=ka;const Sa=Da;var Pa=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return n=t,void((r=e).classList?r.classList.remove(n):"string"==typeof r.className?r.className=ha(r.className,n):r.setAttribute("class",ha(r.className&&r.className.baseVal||"",n)));var r,n}))},ja=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,r){var n=t.resolveArguments(e,r),i=n[0],a=n[1];t.removeClasses(i,"exit"),t.addClass(i,a?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,r)},t.onEntering=function(e,r){var n=t.resolveArguments(e,r),i=n[0],a=n[1]?"appear":"enter";t.addClass(i,a,"active"),t.props.onEntering&&t.props.onEntering(e,r)},t.onEntered=function(e,r){var n=t.resolveArguments(e,r),i=n[0],a=n[1]?"appear":"enter";t.removeClasses(i,a),t.addClass(i,a,"done"),t.props.onEntered&&t.props.onEntered(e,r)},t.onExit=function(e){var r=t.resolveArguments(e)[0];t.removeClasses(r,"appear"),t.removeClasses(r,"enter"),t.addClass(r,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var r=t.resolveArguments(e)[0];t.addClass(r,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var r=t.resolveArguments(e)[0];t.removeClasses(r,"exit"),t.addClass(r,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,r){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,r]},t.getClassNames=function(e){var r=t.props.classNames,n="string"==typeof r,i=n?(n&&r?r+"-":"")+e:r[e];return{baseClassName:i,activeClassName:n?i+"-active":r[e+"Active"],doneClassName:n?i+"-done":r[e+"Done"]}},t}ba(t,e);var r=t.prototype;return r.addClass=function(e,t,r){var n=this.getClassNames(t)[r+"ClassName"],i=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===r&&i&&(n+=" "+i),"active"===r&&e&&Oa(e),n&&(this.appliedClasses[t][r]=n,function(e,t){e&&t&&t.split(" ").forEach((function(t){return n=t,void((r=e).classList?r.classList.add(n):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(r,n)||("string"==typeof r.className?r.className=r.className+" "+n:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+n)));var r,n}))}(e,n))},r.removeClasses=function(e,t){var r=this.appliedClasses[t],n=r.base,i=r.active,a=r.done;this.appliedClasses[t]={},n&&Pa(e,n),i&&Pa(e,i),a&&Pa(e,a)},r.render=function(){var e=this.props,t=(e.classNames,(0,ga.Z)(e,["classNames"]));return n().createElement(Sa,(0,kr.Z)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(n().Component);ja.defaultProps={classNames:""},ja.propTypes={};const xa=ja;function Ma(e,t){var n=Object.create(null);return e&&r.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,r.isValidElement)(e)?t(e):e}(e)})),n}function Ba(e,t,r){return null!=r[t]?r[t]:e.props[t]}function La(e,t,n){var i=Ma(e.children),a=function(e,t){function r(r){return r in t?t[r]:e[r]}e=e||{},t=t||{};var n,i=Object.create(null),a=[];for(var o in e)o in t?a.length&&(i[o]=a,a=[]):a.push(o);var l={};for(var s in t){if(i[s])for(n=0;n<i[s].length;n++){var u=i[s][n];l[i[s][n]]=r(u)}l[s]=r(s)}for(n=0;n<a.length;n++)l[a[n]]=r(a[n]);return l}(t,i);return Object.keys(a).forEach((function(o){var l=a[o];if((0,r.isValidElement)(l)){var s=o in t,u=o in i,c=t[o],p=(0,r.isValidElement)(c)&&!c.props.in;!u||s&&!p?u||!s||p?u&&s&&(0,r.isValidElement)(c)&&(a[o]=(0,r.cloneElement)(l,{onExited:n.bind(null,l),in:c.props.in,exit:Ba(l,"exit",e),enter:Ba(l,"enter",e)})):a[o]=(0,r.cloneElement)(l,{in:!1}):a[o]=(0,r.cloneElement)(l,{onExited:n.bind(null,l),in:!0,exit:Ba(l,"exit",e),enter:Ba(l,"enter",e)})}})),a}var Ra=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},Na=function(e){function t(t,r){var n,i=(n=e.call(this,t,r)||this).handleExited.bind(fa(n));return n.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},n}ba(t,e);var i=t.prototype;return i.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},i.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,i,a=t.children,o=t.handleExited;return{children:t.firstRender?(n=e,i=o,Ma(n.children,(function(e){return(0,r.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:Ba(e,"appear",n),enter:Ba(e,"enter",n),exit:Ba(e,"exit",n)})}))):La(e,a,o),firstRender:!1}},i.handleExited=function(e,t){var r=Ma(this.props.children);e.key in r||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var r=(0,kr.Z)({},t.children);return delete r[e.key],{children:r}})))},i.render=function(){var e=this.props,t=e.component,r=e.childFactory,i=(0,ga.Z)(e,["component","childFactory"]),a=this.state.contextValue,o=Ra(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,null===t?n().createElement(Ea.Provider,{value:a},o):n().createElement(Ea.Provider,{value:a},n().createElement(t,i,o))},t}(n().Component);Na.propTypes={},Na.defaultProps={component:"div",childFactory:function(e){return e}};const Fa=Na;var Za=__webpack_require__(2684),Ua=["children"];function Wa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ya(e);if(t){var i=ya(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _a(this,r)}}var qa=function(e){da(r,e);var t=Wa(r);function r(){return la(this,r),t.apply(this,arguments)}return ca(r,[{key:"componentDidMount",value:function(){var e=this;this.timer=setInterval((function(){return e.forceUpdate()}),6e4)}},{key:"componentWillUnmount",value:function(){this.timer&&clearInterval(this.timer)}},{key:"render",value:function(){return n().createElement("span",null,this.props.time?Mi()(this.props.time).fromNow():"-")}}]),r}(n().Component),Va=function(e){var t=e.children,r=(0,va.Z)(e,Ua);return n().createElement(xa,(0,kr.Z)({},r,{timeout:1e3,classNames:"warning"}),t)},za=function(e){var t=e.item,r=useI18n().t;return n().createElement(L.Card,null,n().createElement("div",{class:"content danger"},n().createElement("div",{className:"time"},n().createElement(qa,{time:t.connectTime})),n().createElement("div",{className:"name"},t.name),n().createElement("div",{className:"uid"},t.uid),n().createElement("div",{className:"desc"},r("网络不通"))))};n().Component;var Ga=__webpack_require__(8058);Tn()(Ga.Z,{insert:"head",singleton:!1}),Ga.Z.locals,n().Component;var Ka=(0,B.lazy)((function(){return __webpack_require__.e(870).then(__webpack_require__.bind(__webpack_require__,6870))})),Ha=function(e){var t=useI18n().t,r=e.children,i=e.invalid,a=e.handleSubmit;return e.submitting,n().createElement(L.Form,{layout:"inline"},r,n().createElement(L.Form.Item,null,n().createElement(L.Button,{disabled:i,onClick:a,bsStyle:"primary"},t("查询"))))};function Ya(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ja(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ya(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ya(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const $a={NetworkGraph:{name:"networkgraph",title:_r("网络通信异常统计"),type:"object",icon:"edit",resource:"core/t/record",initialValues:{wheres:{filters:{network:{$regex:'"enable":true'},"tableData.network_online":{$ne:!0}}}},permission:{view:!0,add:!1,edit:!1,delete:!1},listFields:["tableData.network_connectTime","tableData.name","tableData","tableInfo"],filters:{submenu:["name","uid","connectTime"]},properties:{connectTime:{type:"string",format:"date-time",title:_r("最后上数时间")},name:{type:"string",title:_r("名称")},uid:{type:"string",title:_r("编号")},type:{type:"string",title:_r("异常描述")}},rolePermission:[{key:"networkgraph.view",title:_r("查看")}],fieldRender:{type:function(e){return e.item,e.value,e.model,e.inList,e.wrap,n().createElement("span",null,_r("网络不通"))}},components:{DataEmpty:function(e){return n().createElement(L.Card,null,n().createElement(B.C,{is:"NoData"}))}},batchActions:null,convertItem:function(e){return Ja(Ja({},e),{},{uid:e.uid||e.id})},itemActions:[]}};function Qa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xa(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Qa(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var eo={name:"network",title:_r("网络检查"),type:"object",properties:{enable:{type:"boolean",title:_r("开启网络检查")},address:{type:"string",title:_r("地址"),description:_r("ping的地址")},count:{type:"number",title:_r("包数"),description:_r("网络检查发送出的总包数，默认3包")},timeout:{type:"number",title:_r("超时时间"),description:_r("发送总包数的超时时间，默认5秒")},interval:{type:"number",title:_r("包间隔时间"),description:_r("发送每包之间的间隔时间，默认1秒")},cycle:{type:"object",title:_r("执行间隔"),properties:{}},reload:{type:"string",title:_r("重启")}},required:["address"],form:["*",{key:"cycle",component:function(e){var t=e.input,r=t.value,i=t.onChange;return r=r||{count:60,unit:"s"},n().createElement(L.Space,{direction:"horizontal"},n().createElement(L.Input,{type:"number",min:1,style:{width:160},placeholder:_t2("数值"),onChange:function(e){e.target.value<=0?i(Xa(Xa({},r),{},{count:1})):i(Xa(Xa({},r),{},{count:Number(e.target.value)}))},value:r.count||null,addonAfter:n().createElement(L.Select,{style:{width:75},onChange:function(e){return i(Xa(Xa({},r),{},{unit:e}))},value:r.unit},[{key:"分",value:"m"},{key:"秒",value:"s"}].map((function(e){return n().createElement(L.Select.Option,{value:e.value},e.key)})))}))}},{key:"reload",component:function(t){var r=n().useState(!1),i=(0,ln.Z)(r,2),a=i[0],o=i[1],l=(0,e.use)("form").form,s=useI18n().t;return n().createElement(L.Button,{loading:a,onClick:function(){var t,r,n=null==l||null===(t=l.data)||void 0===t?void 0:t.id,i=null==l||null===(r=l.data)||void 0===r?void 0:r._table;n&&(o(!0),(0,e.api)({name:"check/check/reload/".concat(i)}).get(n).then((function(e){L.message.success(s("服务已重启")),o(!1)})).catch((function(e){o(!1)})))}},s("重启服务"))}}]},to={network_connectTime:{type:"string",config:"时间",listFields:!1,fieldType:"datePicker",key:"network_connectTime",title:_r("网络连接时间"),descriptionType:"tooltip",need:!1,format:"date",createShow:!1,editShow:!1,canOrder:!1,invalid:!1,schemaHide:!0},network_address:{type:"string",config:_r("文本"),listFields:!1,fieldType:"input",textContent:"text",textType:"input",key:"network_address",title:_r("网络地址"),descriptionType:"tooltip",need:!1,createShow:!1,editShow:!1,canOrder:!1,invalid:!1,schemaHide:!0},network_online:{type:"boolean",config:_r("布尔值"),listFields:!1,fieldType:"boolean",key:"network_online",title:_r("网络在线状态"),descriptionType:"tooltip",need:!1,displayForm:"checkBox",createShow:!0,editShow:!1,canOrder:!1,invalid:!1,field:{data:{display:!1}},schemaHide:!0},network_stats_AvgRtt:{type:"number",config:_r("数字"),listFields:!1,fieldType:"inputNumber",decimal:null,dbType:"Int32",key:"network_stats_AvgRtt",title:_r("网络平均往返时长"),descriptionType:"tooltip",need:!1,createShow:!1,editShow:!1,canOrder:!1,invalid:!1,schemaHide:!0}};const ro={name:"airiot.plugin.network",plugins:{name:_r("网络检查"),key:"network",pluginGroup:_r("通用表功能"),defaultProperties:to,useSetting:function(){var e=useI18n().t;return{element:n().createElement("div",{style:{textAlign:"center"}},e("网络通信检查的配置需要在记录中进行配置"))}},useRecordSetting:function(e){return e.table,e.setting,e.record,e.data,e.saveSetting,{schema:eo}},description:{content:_r("安装【网络检查】表功能后，可实现通过ping的方式对设备的通信状态进行检查，安装后表的配置TAB会相应的增加一个")}},dashboardWidgets:{networkGraph:oa},menuItems:[{title:_r("网络通信"),url:"/app/networkGraph",icon:"Report",permission:"networkgraph.view"}],frontMenuItems:[{title:_r("网络通信"),url:"/app/networkGraph",icon:"Report",permission:"networkgraph.view"}],routers:{"/app/":{path:"networkGraph",breadcrumbName:_r("网络拓扑图"),component:function(e){var t=n().useState({}),r=(0,ln.Z)(t,2),i=r[0],a=r[1],o=n().useState("graph"),l=(0,ln.Z)(o,2),s=l[0],u=l[1],c=useI18n().t;return n().createElement("div",{style:{position:"relative",width:"100%",height:"100%"}},n().createElement(B.Page,{title:n().createElement("span",null,n().createElement(B.Icon,{svg:__webpack_require__(9766)}),c("网络通信")),actions:n().createElement("div",{style:{display:"inline-flex"}},n().createElement(B.C,{is:"I18nSchemaForm",formKey:"networkGraphFilter",schema:ra,component:Ha,group:(0,B.C)("Form.InlineGroup"),onSubmit:function(e){console.log(e,"values"),a(e)}}))},n().createElement("div",{style:{marginBottom:"10px"}},n().createElement(L.Radio.Group,{options:[{label:c("图形展示"),value:"graph"},{label:c("表格展示"),value:"table"}],value:s,onChange:function(e){u(e.target.value)},optionType:"button",buttonStyle:"solid"})),n().createElement("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 200px)"}},"graph"===s?n().createElement(Ka,{filterConfig:i,graphLayout:"tree",roam:!0,forceConfig:{repulsion:30,edgeLength:200}}):null,"table"===s?n().createElement(ta.default,{filterConfig:i}):null)))}}},models:$a};function no(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function io(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?no(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):no(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}__webpack_require__(8574);function ao(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oo(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ao(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ao(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lo=function(t){var r=(0,e.use)("model").modelDispatch,i=(0,e.use)("model.select").selected,a=(0,e.use)("model.save",{successMessage:!1}).saveItem,o=n().useState(!1),l=(0,ln.Z)(o,2),s=l[0],u=l[1],c=useI18n().t;return n().useEffect((function(){var r=encodeURIComponent(JSON.stringify({skip:0,project:{status:1,process:1},withCount:!0}));(0,e.api)({name:"core/taskmanager"}).fetch("?query="+r,{}).then((function(e){var r=e.json.some((function(e){return e.status===t}));u(r&&i&&!_.isEmpty(i))}))}),[i,t]),{onClick:function(){s&&Promise.all(i.map((function(e){return a({status:t,id:e.id})}))).then((function(e){var n="";switch(t){case"pause":n=c("批量中止成功!");break;case"ongoing":n=c("批量启动成功!")}L.message.success(n),r({type:"SELECT_CLEAR"}),r({type:"GET_ITEMS"})}))},disabled:s}},so=function(e){var t=lo("ongoing"),r=t.onClick,i=t.disabled,a=useI18n().t;return n().createElement(L.Menu.Item,(0,kr.Z)({},e,{key:"action_pause_task",onClick:r,disabled:!i}),a("批量中止"))},uo=function(e){var t=lo("pause"),r=t.onClick,i=t.disabled;return n().createElement(L.Menu.Item,(0,kr.Z)({},e,{key:"action_ongo_task",onClick:r,disabled:!i}),_t1("批量启动"))},co=function(t){var r=(0,e.use)("model").modelDispatch,i=(0,e.use)("model.select").selected,a=i&&!_.isEmpty(i),o=useI18n().t;return n().createElement(L.Menu.Item,(0,kr.Z)({},t,{key:"action_delete_task",onClick:function(){a&&Promise.all(i.map((function(t){return(0,e.api)({name:"core/taskmanager/".concat(null==t?void 0:t.id)}).fetch("",{method:"DELETE",body:JSON.stringify({id:""})}).then((function(e){return e.json}))}))).then((function(e){L.message.success(o("批量删除成功!")),r({type:"SELECT_CLEAR"}),r({type:"GET_ITEMS"})}))},disabled:!a}),o("批量删除"))};const po={TaskManager:{name:"taskmanager",resource:"core/taskmanager",type:"object",icon:"Flow",title:"后台管理进度",properties:{type:{type:"string",title:"任务类型"},mark:{type:"string",title:"任务标识"},startTime:{type:"string",title:"开始时间",format:"datetime"},status:{title:"状态",type:"string",enum:["finish","pause","ongoing","fail"],enum_title:["完成","中止","进行中","失败"]},progress:{type:"number",title:"进度"},content:{type:"object",title:"内容",properties:{}},creator:{type:"object",title:"创建人",properties:{id:{title:"id",type:"string"},name:{title:"操作人",type:"string"}}}},orders:{startTime:"DESC"},partialSave:!0,forceGetItem:!0,permission:{view:!0},form:[],formProps:{},required:[],projectFields:["status","progress"],listFields:["type","startTime","status","progress","content","creator"],batchActions:[function(e){return n().createElement(co,e)},function(e){return n().createElement(so,e)},function(e){return n().createElement(uo,e)}],filters:{submenu:["type","status","startTime"]},components:{DataEmpty:function(){return n().createElement(L.Empty,{style:{padding:20},image:__webpack_require__(9610)})},ListPage:function(t){var r=(0,e.use)("model"),i=r.model,a=(r.modelDispatch,r.atoms),o=function(){var e=(0,Li.useRecoilState)(a.wheres),t=(0,ln.Z)(e,2),r=(t[0],t[1]);return n().createElement(L.Input.Search,{placeholder:"搜索任务标识",onSearch:function(e){""!==e.trim()?r({filters:{mark:{$regex:e}}}):r({filters:{}})},style:{width:200},allowClear:!0})};return n().createElement(un.Model,{schema:io({},i)},n().createElement(B.Page,{className:"xadmin-model-list-".concat(i.key," task_page"),title:n().createElement("span",null," ",i.title),subTitle:n().createElement(o,null)},n().createElement(un.ModelBlock,{name:"model.list.submenu"}),n().createElement("div",{key:"model-list-subnav",style:{display:"flex",justifyContent:"space-between",marginBottom:".5rem"}},n().createElement(B.C,{is:"Model.Pagination"})," ",n().createElement(B.C,{is:"Model.ListSubMenu"})),n().createElement(B.C,{is:"Model.DataTable"}),n().createElement("div",{key:"model-list-downnav",style:{display:"flex",justifyContent:"space-between",marginTop:".5rem"}},n().createElement(B.C,{is:"Model.ActionBar"}),n().createElement(B.C,{is:"Model.Pagination"}))))}},itemActions:[function(t){var r=t.item,i=null==r?void 0:r.status,a=(0,e.use)("model.save",{successMessage:"任务启动成功!"}).saveItem;return"pause"==i?n().createElement(mi.HasPermission,{permission:"taskmanager.ongoing"},n().createElement(L.Button,{onClick:function(){a({status:"ongoing",id:r.id})}},"启动")):null},function(t){var r=t.item,i=null==r?void 0:r.status,a=(0,e.use)("model.save",{successMessage:"任务中止成功!"}).saveItem;return"ongoing"==i?n().createElement(mi.HasPermission,{permission:"taskmanager.pause"},n().createElement(L.Button,{onClick:function(){a({status:"pause",id:r.id})}},"中止")):null},function(t){var r=t.item,i=null==r?void 0:r.status,a=(0,e.use)("model.delete",r).deleteItem;return n().createElement(mi.HasPermission,{permission:"taskmanager.delete"},n().createElement(L.Popconfirm,{title:"ongoing"==i?"任务进行中，删除任务后任务将会中止，确认删除任务吗？":"任务删除后，将无法找回，确认删除任务吗？",onConfirm:function(e){a()},okText:"删除",cancelText:"取消"},n().createElement(L.Button,{onClick:function(){}},"删除")))}],fieldRender:{progress:function(e){var t=e.item,r=e.wrap;return n().createElement(r,null,n().createElement("span",null,100*(null==t?void 0:t.progress)+"%"))}},dataTableProps:function(e){return{scroll:{x:800},yScroll:!0,columns:e.map((function(e){return"__action__"==e.key?oo(oo({},e),{},{width:180}):oo(oo({},e),{},{width:e.width||100})}))}}}},mo={name:"airiot.taskmanager",menuItems:[{title:_r("后台管理进度"),url:"/app/model/taskmanager/list",icon:"Flow",permission:"taskmanager.view"}],models:po};e.app.use(Ii).use($i).use(ea).use(ro).use(mo)})()})();
//# sourceMappingURL=index.js.map