(this.webpackChunk_airiot_media=this.webpackChunk_airiot_media||[]).push([[573],{8573:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>u});var n=i(885),o=i(7363),l=i.n(o),a=i(1821),r=i(3078),d=i(8534);const u=function(e){var t=e.docVisible,o=e.playMedia,u=e.setPlayMedia,c=l().useState(!1),s=(0,n.Z)(c,2),f=s[0],p=s[1],m=(0,r.use)("redux",(function(e){return{user:e.user}})).user,v="?x-request-project="+(0,r.api)({name:"media"}).headers["x-request-project"]+"&token="+(null==m?void 0:m.token),h=location.origin+(0,r.config)("mediaUrl")+(null==o?void 0:o.filePath)+v,y="https://view.xdocin.com/view?src="+encodeURIComponent(h),w=(0,r.config)("mediaUrl")+(null==o?void 0:o.filePath);l().useEffect((function(){var e=new XMLHttpRequest;e.open("GET","https://view.xdocin.com/view",!0),e.timeout=3e3,e.onload=function(){4===e.readyState&&200===e.status&&-1==location.origin.indexOf("localhost")?p(!0):p(!1)},e.send()}),[]);var g;return g="pdf"==(null==o?void 0:o.type)?l().createElement(d.Z,{url:null==o?void 0:o.key,fileSize:null==o?void 0:o.size}):t&&f?l().createElement("iframe",{src:y,frameBorder:"0",width:"100%",height:"100%",allowtransparency:!0}):t&&"pdf"==(null==o?void 0:o.type)&&0==f?l().createElement(a.Result,{style:{marginTop:20},status:"warning",title:"内网暂不支持预览文档类型文件"}):l().createElement("video",{style:{width:"100%",height:"100%",objectFit:"fill"},autoplay:"autoplay",src:w,controls:"controls",poster:"audio"==(null==o?void 0:o.category)&&i(9896)},"播放出错了"),l().createElement(a.Modal,{forceRender:!0,destroyOnClose:!0,title:(null==o?void 0:o.name)||"媒体预览",visible:!_.isNull(o),onOk:function(){u(null)},width:"50%",onCancel:function(){u(null)}},g)}},9896:(e,t,i)=>{e.exports=i.p+"913c136ddfe0fd70f033c4a167d651dc.png"}}]);
//# sourceMappingURL=573.8a82317eaf8e684b031e.js.map