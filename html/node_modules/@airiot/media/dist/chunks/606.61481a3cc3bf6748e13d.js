"use strict";(this.webpackChunk_airiot_media=this.webpackChunk_airiot_media||[]).push([[606],{606:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var r=n(7462),i=n(4925),a=n(4942),o=n(885),l=n(7363),c=n.n(l),u=n(2611),d=n.n(u),s=n(3078),m=n(5907),p=n(979),g=n(1821),f=n(519),h=["items","moveCard","selectedKeys","dispatch"];function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=(0,m.lazy)((function(){return Promise.resolve().then(n.bind(n,8925))})),E=(0,m.lazy)((function(){return Promise.resolve().then(n.bind(n,5389))})),x=g.Typography.Paragraph,D=(g.Typography.Text,{width:"120px",height:"120px",textAlign:"center",margin:"1rem 0",marginLeft:"1rem ",backgroundColor:"white",cursor:"move"}),C={height:25,width:80},w={padding:"15px 5px 5px 5px",overflow:"hidden"},P={height:"100%",border:0,borderRadius:10},O={width:170,position:"absolute",left:-25,bottom:10},k={position:"absolute",left:"10px",top:"8px",zIndex:"9"},S=function(e,t){var n,r=e.changeCurDir,i=e.item,a=e.isDragging,u=e.connectDragSource,s=e.renameItem,p=e.connectDropTarget,h=e.setPhotoVisible,v=e.setMedia,S=(0,l.useRef)(null),T=c().useState(""),j=(0,o.Z)(T,2),Z=j[0],I=j[1],N=a?0:1,M=(null==i?void 0:i.name.split("."))||["错误","err"],R=null!=i&&i.isDir?"":"."+(M&&M[1]),_=c().createElement(c().Fragment,null,"名称：",null==i?void 0:i.name,c().createElement("br",null),d().includes(null==i?void 0:i.path,"/")?c().createElement(c().Fragment,null," 路径：",null==i?void 0:i.path,c().createElement("br",null)):null);u(S,{dropEffect:"copy"}),p(S),(0,l.useImperativeHandle)(t,(function(){return{getNode:function(){return S.current}}}));var z=c().useCallback(d().debounce((function(e){I("file-card-item-hover")}),100),[i.name]),F=c().useCallback(d().debounce((function(e){I("")}),100),[i.name]);return c().createElement("div",{ref:S,style:b(b({},D),{},{opacity:N,position:"relative"}),className:"file-card-item ".concat(Z),onMouseEnter:z,onMouseLeave:F},c().createElement(g.Checkbox,{value:null==i?void 0:i.filePath,style:k}),c().createElement(E,{item:i,changeCurDir:r,setPhotoVisible:h,setMedia:v},c().createElement(g.Card,{hoverable:!0,style:P,bodyStyle:w,onDoubleClick:function(){return r(i)}},"img"==(null==i?void 0:i.icon)?c().createElement(c().Fragment,null,c().createElement("img",{draggable:"false",className:"media-card-img",src:i.filePath})):c().createElement(m.Icon,{className:"media-card-icon ".concat(i.icon),svg:f.Z[null==i?void 0:i.icon]}),(null==s?void 0:s.path)==i.path?c().createElement(y,{item:i,text:null==i?void 0:i.name,wrapStyle:O,inputStyle:C}):(null===(n=M[0]+R)||void 0===n?void 0:n.length)>12?c().createElement(g.Tooltip,{title:_},c().createElement(x,{style:{marginTop:(null==i?void 0:i.isDir)&&12},ellipsis:{suffix:R}},M&&M[0])):c().createElement(x,{style:{marginTop:(null==i?void 0:i.isDir)&&12},ellipsis:{suffix:R}},M&&M[0]))))},T=(0,l.forwardRef)(S),j=(0,p.DropTarget)("card",{drop:function(e,t,n){var r,i=e.index;(0,e.moveCard)(null===(r=t.getItem())||void 0===r?void 0:r.index,i)}},(function(e){return{connectDropTarget:e.dropTarget()}}),{dropEffect:"copy"})((0,p.DragSource)("card",{beginDrag:function(e){return{id:e.id,index:e.index}}},(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(T)),Z={marginLeft:20,paddingTop:10},I={height:"77vh",overflowY:"auto",overflowX:"hidden"};const N=function(e){var t=e.items,n=e.moveCard,a=e.selectedKeys,l=e.dispatch,u=(0,i.Z)(e,h),d=null==t?void 0:t.map((function(e){return b(b({},e),{},{filePath:(0,s.config)("mediaUrl")+e.filePath||""})})),m=d.map((function(e){return e.filePath||""})),p=c().useState(a),f=(0,o.Z)(p,2),v=f[0],y=f[1],E=c().useState(!1),x=(0,o.Z)(E,2),D=x[0],C=x[1],w=c().useState(!1),P=(0,o.Z)(w,2),O=P[0],k=P[1];return c().createElement("div",{className:"file-card",style:I},c().createElement("div",null,c().createElement(g.Checkbox,{indeterminate:D,onChange:function(e){var t=e.target.checked?m:[];y(t),l({type:"selected",payload:t}),C(!1),k(e.target.checked)},checked:O,style:Z},"全选")),c().createElement(g.Checkbox.Group,{value:v,onChange:function(e){y(e),l({type:"selected",payload:e}),C(!!e.length&&e.length<m.length),k(e.length===m.length)}},c().createElement(g.Row,{gutter:24,style:{marginTop:"-0.5rem"}},d&&d.map((function(e,t){return c().createElement(g.Col,null,c().createElement(j,(0,r.Z)({item:e,index:t,moveCard:n},u)))})))))}}}]);
//# sourceMappingURL=606.61481a3cc3bf6748e13d.js.map