"use strict";(this.webpackChunk_airiot_report=this.webpackChunk_airiot_report||[]).push([[127],{26127:(e,t,r)=>{r.r(t),r.d(t,{default:()=>f});var n=r(70885),a=r(87363),o=r.n(a),c=r(53078),u=r(95907),i=(r(12611),r(81821)),s=r(75618),l=r(90524);r(28864),r(72077),r(48488),r(28551);var p=r(49686),m=function(e){var t=e.report,r=e.type,m=o().useState([]),f=(0,n.Z)(m,2),d=(f[0],f[1]),h=o().useState([]),y=(0,n.Z)(h,2),E=y[0],g=y[1],k=useI18n().t,w=o().useRef();return o().createElement(u.Page,{title:o().createElement("span",null,"  ",o().createElement(u.Icon,{type:"arrow-left",onClick:function(){return history.back()}}),t.name),actions:o().createElement("div",{style:{display:"inline-flex"}},o().createElement(i.Button.Group,null,"edit"===r?o().createElement(i.Button,{type:"primary",onClick:function(){var e=w.current.getData();g(e),(0,c.api)({name:"report/reportCopy"}).fetch("/".concat(t.id),{method:"PATCH",body:JSON.stringify({data:e})}).then((function(){i.message.success(k("保存成功")),d([])}))}},k("保存")):o().createElement(o().Fragment,null,o().createElement(s.Z,{report:t,rows:E&&E.length>0?E:t.data,getRows:function(){return w.current.getData()}}),o().createElement(l.Z,{report:t,rows:E&&E.length>0?E:t.data}))))},(0,a.useMemo)((function(){return o().createElement(p.Z,{ref:w,report:t,rows:t.data,setData:d,edit:"edit"===r})}),[t]))};const f=function(e){var t=(0,c.use)("params").id,r=o().useState({}),a=(0,n.Z)(r,2),i=a[0],s=a[1],l=o().useState(!0),p=(0,n.Z)(l,2),f=p[0],d=p[1];return o().useEffect((function(){t&&(d(!0),(0,c.api)({name:"report/reportCopy"}).fetch("/".concat(t)).then((function(e){d(!1),s(e.json)})))}),[t]),f?o().createElement(u.Loading,null):o().createElement(m,{report:i,type:e.type})}}}]);
//# sourceMappingURL=127.458f5b725ead613eb8ef.js.map