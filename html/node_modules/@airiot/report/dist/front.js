/*! For license information please see front.js.LICENSE.txt */
(()=>{var __webpack_modules__={41977:(e,t,r)=>{"use strict";r.d(t,{Im:()=>_,ZP:()=>w,f7:()=>E});var n=r(87462),i=r(44925),a=r(70885),o=r(81821),s=r(16640),l=r(48488),u=r.n(l),c=r(87363),p=r.n(c),h=r(53078),d=r(3204),f=r(95907),m=r(12611),v=r.n(m),g=["loadReport","report","rows"],y=o.DatePicker.RangePicker,_=function(e){var t=e.input,r=t.value,n=t.onChange,i=e.report,a="years"===i.interval?"year":"months"===i.interval?"month":"weeks"===i.interval?"week":null,s="hours"===i.interval;return p().createElement(p().Fragment,null,p().createElement(o.Space,{direction:"vertical",size:12},p().createElement(o.DatePicker,{allowClear:!1,picker:a,showTime:s,onChange:function(e){n(u()(e).format("YYYY-MM-DD HH:mm:ss"))},value:u()(r)})))},b=function(e){var t=e.input,r=t.value,n=t.onChange,i=e.report.interval,l=p().useState(!1),c=(0,a.Z)(l,2),d=c[0],f=c[1],m=(0,h.use)("form",(function(e){return{time:e.values&&e.values.time}})).time,g=useI18n().t,y=function(e,t){var i=r?r.split("-"):["",""];i[t]=e,i[0]&&i[1]&&v().toNumber(i[0])>v().toNumber(i[1])&&o.message.error(g("开始时间需小于结束时间")),n(i.join("-"))},_=[],b="";if("years"===i)_=new Array(12).fill("").map((function(e,t){return{value:t,label:t+1}})),b=g("月");else if("months"===i){var x=u()(m).daysInMonth();_=new Array(x).fill("").map((function(e,t){return{value:t+1,label:t+1}})),b=g("日")}else"weeks"===i?_=[{value:1,label:g("周一")},{value:2,label:g("周二")},{value:3,label:g("周三")},{value:4,label:g("周四")},{value:5,label:g("周五")},{value:6,label:g("周六")},{value:7,label:g("周日")}]:"days"===i?(_=new Array(24).fill("").map((function(e,t){return{value:t+1,label:t+1}})),b=g("时")):"hours"===i&&(_=new Array(60).fill("").map((function(e,t){return{value:t+1,label:t+1}})),b=g("分"));return d?p().createElement(p().Fragment,null,p().createElement(o.Select,{onChange:function(e){return y(e,0)},style:{width:60},options:_,placeholder:b}),"—",p().createElement(o.Select,{onChange:function(e){return y(e,1)},style:{width:60},options:_,placeholder:b}),p().createElement(o.Tooltip,{title:g("关闭二级过滤")},p().createElement(s.MinusSquareOutlined,{style:{cursor:"pointer"},onClick:function(){f(!1),n(null)}}))):p().createElement(o.Tooltip,{title:g("打开二级过滤")},p().createElement(s.PlusSquareOutlined,{style:{cursor:"pointer"},onClick:function(){return f(!0)}}))},x=function(e){var t=e.input,r=t.value,n=t.onChange;return r?p().createElement(p().Fragment,null,p().createElement(y,{showTime:!0,onChange:function(e,t){return n(t)}}),p().createElement(o.Tooltip,{title:"关闭精准搜索"},p().createElement(s.MinusSquareOutlined,{style:{cursor:"pointer"},onClick:function(){n(null)}}))):p().createElement(o.Tooltip,{title:"打开精准搜索"},p().createElement(s.PlusSquareOutlined,{style:{cursor:"pointer"},onClick:function(){return n([])}}))},E=function(){return{timeFree:u()().format("YYYY-MM-DD HH:mm:ss")}};const w=function(e){var t=e.loadReport,r=e.report,a=(e.rows,(0,i.Z)(e,g)),s=useI18n().t,l={type:"object",properties:{time:{type:"string",title:s("时间")},secondTime:{type:"string",title:s("二级时间")},accurateTime:{type:"array",title:"精准搜索",items:{},field:{effect:function(e,t){var r=e.value;setTimeout((function(){t.setFieldData("time",{display:!r}),t.setFieldData("secondTime",{display:!r}),r&&t.change("secondTime",null)}))}}}},form:[{key:"time",report:r,component:_},{key:"secondTime",report:r,component:b},{key:"accurateTime",component:x}]},c=function(e){var t=e.children,r=e.invalid,n=e.handleSubmit;return p().createElement(o.Form,{layout:"inline"},t,p().createElement(o.Form.Item,null,p().createElement(o.Button,{disabled:r,onClick:n,type:"primary"},s("查询"))))},h={time:u()().format("YYYY-MM-DD HH:mm:ss")};return p().useEffect((function(){t(h)}),[r]),p().useMemo((function(){return p().createElement(d.SchemaForm,(0,n.Z)({formKey:"reportFilterForm",schema:l,component:c,group:(0,f.C)("Form.InlineGroup"),initialValues:h,onSubmit:t},a))}),[r])}},71031:(e,t,r)=>{"use strict";r.d(t,{G:()=>u,k:()=>p});var n=r(4942),i=r(70885),a=r(87363),o=r.n(a),s=r(44648);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var u=o().createContext(null),c=(0,s.UY)({rows:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"@@iot-report/LOAD_ROWS"==t.type&&t.rows?t.rows:e},filter:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"START_LOADING"===t.type||"END_LOADING"!==t.type&&e},saveData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"SAVE_DATA"===t.type?t.value:e}}),p=function(e){var t=e.report,r=e.children,a=o().useReducer(c,{rows:[],filter:{},loading:!1}),s=(0,i.Z)(a,2),p=s[0],h=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({report:t,dispatch:s[1]},p);return o().createElement(u.Provider,{value:h},r)}},75618:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Ot});var n=r(42982),i=r(15861),a=r(64687),o=r.n(a),s=r(81821),l=r(53078),u=(r(93162),r(87363)),c=r.n(u),p=r(95907),h=r(12611),d=r.n(h),f=(r(88674),r(4723),r(15306),r(23157),r(66992),r(33948),r(4942)),m=(r(85827),r(27852),r(23123),r(54087)),v=(r(73210),r(26131)),g=(r(82772),r(32023),r(65069),function(e,t){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)});function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}g(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function _(e,t){var r=e[0],n=e[1];return[r*Math.cos(t)-n*Math.sin(t),r*Math.sin(t)+n*Math.cos(t)]}function b(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0;r<e.length;r++)if("number"!=typeof e[r])throw new Error("assertNumbers arguments["+r+"] is not a number. "+typeof e[r]+" == typeof "+e[r]);return!0}var x=Math.PI;function E(e,t,r){e.lArcFlag=0===e.lArcFlag?0:1,e.sweepFlag=0===e.sweepFlag?0:1;var n=e.rX,i=e.rY,a=e.x,o=e.y;n=Math.abs(e.rX),i=Math.abs(e.rY);var s=_([(t-a)/2,(r-o)/2],-e.xRot/180*x),l=s[0],u=s[1],c=Math.pow(l,2)/Math.pow(n,2)+Math.pow(u,2)/Math.pow(i,2);1<c&&(n*=Math.sqrt(c),i*=Math.sqrt(c)),e.rX=n,e.rY=i;var p=Math.pow(n,2)*Math.pow(u,2)+Math.pow(i,2)*Math.pow(l,2),h=(e.lArcFlag!==e.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(n,2)*Math.pow(i,2)-p)/p)),d=n*u/i*h,f=-i*l/n*h,m=_([d,f],e.xRot/180*x);e.cX=m[0]+(t+a)/2,e.cY=m[1]+(r+o)/2,e.phi1=Math.atan2((u-f)/i,(l-d)/n),e.phi2=Math.atan2((-u-f)/i,(-l-d)/n),0===e.sweepFlag&&e.phi2>e.phi1&&(e.phi2-=2*x),1===e.sweepFlag&&e.phi2<e.phi1&&(e.phi2+=2*x),e.phi1*=180/x,e.phi2*=180/x}function w(e,t,r){b(e,t,r);var n=e*e+t*t-r*r;if(0>n)return[];if(0===n)return[[e*r/(e*e+t*t),t*r/(e*e+t*t)]];var i=Math.sqrt(n);return[[(e*r+t*i)/(e*e+t*t),(t*r-e*i)/(e*e+t*t)],[(e*r-t*i)/(e*e+t*t),(t*r+e*i)/(e*e+t*t)]]}var O,T=Math.PI/180;function A(e,t,r){return(1-r)*e+r*t}function C(e,t,r,n){return e+Math.cos(n/180*x)*t+Math.sin(n/180*x)*r}function M(e,t,r,n){var i=1e-6,a=t-e,o=r-t,s=3*a+3*(n-r)-6*o,l=6*(o-a),u=3*a;return Math.abs(s)<i?[-u/l]:function(e,t,r){void 0===r&&(r=1e-6);var n=e*e/4-t;if(n<-r)return[];if(n<=r)return[-e/2];var i=Math.sqrt(n);return[-e/2-i,-e/2+i]}(l/s,u/s,i)}function P(e,t,r,n,i){var a=1-i;return e*(a*a*a)+t*(3*a*a*i)+r*(3*a*i*i)+n*(i*i*i)}!function(e){function t(){return i((function(e,t,r){return e.relative&&(void 0!==e.x1&&(e.x1+=t),void 0!==e.y1&&(e.y1+=r),void 0!==e.x2&&(e.x2+=t),void 0!==e.y2&&(e.y2+=r),void 0!==e.x&&(e.x+=t),void 0!==e.y&&(e.y+=r),e.relative=!1),e}))}function r(){var e=NaN,t=NaN,r=NaN,n=NaN;return i((function(i,a,o){return i.type&L.SMOOTH_CURVE_TO&&(i.type=L.CURVE_TO,e=isNaN(e)?a:e,t=isNaN(t)?o:t,i.x1=i.relative?a-e:2*a-e,i.y1=i.relative?o-t:2*o-t),i.type&L.CURVE_TO?(e=i.relative?a+i.x2:i.x2,t=i.relative?o+i.y2:i.y2):(e=NaN,t=NaN),i.type&L.SMOOTH_QUAD_TO&&(i.type=L.QUAD_TO,r=isNaN(r)?a:r,n=isNaN(n)?o:n,i.x1=i.relative?a-r:2*a-r,i.y1=i.relative?o-n:2*o-n),i.type&L.QUAD_TO?(r=i.relative?a+i.x1:i.x1,n=i.relative?o+i.y1:i.y1):(r=NaN,n=NaN),i}))}function n(){var e=NaN,t=NaN;return i((function(r,n,i){if(r.type&L.SMOOTH_QUAD_TO&&(r.type=L.QUAD_TO,e=isNaN(e)?n:e,t=isNaN(t)?i:t,r.x1=r.relative?n-e:2*n-e,r.y1=r.relative?i-t:2*i-t),r.type&L.QUAD_TO){e=r.relative?n+r.x1:r.x1,t=r.relative?i+r.y1:r.y1;var a=r.x1,o=r.y1;r.type=L.CURVE_TO,r.x1=((r.relative?0:n)+2*a)/3,r.y1=((r.relative?0:i)+2*o)/3,r.x2=(r.x+2*a)/3,r.y2=(r.y+2*o)/3}else e=NaN,t=NaN;return r}))}function i(e){var t=0,r=0,n=NaN,i=NaN;return function(a){if(isNaN(n)&&!(a.type&L.MOVE_TO))throw new Error("path must start with moveto");var o=e(a,t,r,n,i);return a.type&L.CLOSE_PATH&&(t=n,r=i),void 0!==a.x&&(t=a.relative?t+a.x:a.x),void 0!==a.y&&(r=a.relative?r+a.y:a.y),a.type&L.MOVE_TO&&(n=t,i=r),o}}function a(e,t,r,n,a,o){return b(e,t,r,n,a,o),i((function(i,s,l,u){var c=i.x1,p=i.x2,h=i.relative&&!isNaN(u),d=void 0!==i.x?i.x:h?0:s,f=void 0!==i.y?i.y:h?0:l;function m(e){return e*e}i.type&L.HORIZ_LINE_TO&&0!==t&&(i.type=L.LINE_TO,i.y=i.relative?0:l),i.type&L.VERT_LINE_TO&&0!==r&&(i.type=L.LINE_TO,i.x=i.relative?0:s),void 0!==i.x&&(i.x=i.x*e+f*r+(h?0:a)),void 0!==i.y&&(i.y=d*t+i.y*n+(h?0:o)),void 0!==i.x1&&(i.x1=i.x1*e+i.y1*r+(h?0:a)),void 0!==i.y1&&(i.y1=c*t+i.y1*n+(h?0:o)),void 0!==i.x2&&(i.x2=i.x2*e+i.y2*r+(h?0:a)),void 0!==i.y2&&(i.y2=p*t+i.y2*n+(h?0:o));var v=e*n-t*r;if(void 0!==i.xRot&&(1!==e||0!==t||0!==r||1!==n))if(0===v)delete i.rX,delete i.rY,delete i.xRot,delete i.lArcFlag,delete i.sweepFlag,i.type=L.LINE_TO;else{var g=i.xRot*Math.PI/180,y=Math.sin(g),_=Math.cos(g),b=1/m(i.rX),x=1/m(i.rY),E=m(_)*b+m(y)*x,w=2*y*_*(b-x),O=m(y)*b+m(_)*x,T=E*n*n-w*t*n+O*t*t,A=w*(e*n+t*r)-2*(E*r*n+O*e*t),C=E*r*r-w*e*r+O*e*e,M=(Math.atan2(A,T-C)+Math.PI)%Math.PI/2,P=Math.sin(M),D=Math.cos(M);i.rX=Math.abs(v)/Math.sqrt(T*m(D)+A*P*D+C*m(P)),i.rY=Math.abs(v)/Math.sqrt(T*m(P)-A*P*D+C*m(D)),i.xRot=180*M/Math.PI}return void 0!==i.sweepFlag&&0>v&&(i.sweepFlag=+!i.sweepFlag),i}))}e.ROUND=function(e){function t(t){return Math.round(t*e)/e}return void 0===e&&(e=1e13),b(e),function(e){return void 0!==e.x1&&(e.x1=t(e.x1)),void 0!==e.y1&&(e.y1=t(e.y1)),void 0!==e.x2&&(e.x2=t(e.x2)),void 0!==e.y2&&(e.y2=t(e.y2)),void 0!==e.x&&(e.x=t(e.x)),void 0!==e.y&&(e.y=t(e.y)),void 0!==e.rX&&(e.rX=t(e.rX)),void 0!==e.rY&&(e.rY=t(e.rY)),e}},e.TO_ABS=t,e.TO_REL=function(){return i((function(e,t,r){return e.relative||(void 0!==e.x1&&(e.x1-=t),void 0!==e.y1&&(e.y1-=r),void 0!==e.x2&&(e.x2-=t),void 0!==e.y2&&(e.y2-=r),void 0!==e.x&&(e.x-=t),void 0!==e.y&&(e.y-=r),e.relative=!0),e}))},e.NORMALIZE_HVZ=function(e,t,r){return void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===r&&(r=!0),i((function(n,i,a,o,s){if(isNaN(o)&&!(n.type&L.MOVE_TO))throw new Error("path must start with moveto");return t&&n.type&L.HORIZ_LINE_TO&&(n.type=L.LINE_TO,n.y=n.relative?0:a),r&&n.type&L.VERT_LINE_TO&&(n.type=L.LINE_TO,n.x=n.relative?0:i),e&&n.type&L.CLOSE_PATH&&(n.type=L.LINE_TO,n.x=n.relative?o-i:o,n.y=n.relative?s-a:s),n.type&L.ARC&&(0===n.rX||0===n.rY)&&(n.type=L.LINE_TO,delete n.rX,delete n.rY,delete n.xRot,delete n.lArcFlag,delete n.sweepFlag),n}))},e.NORMALIZE_ST=r,e.QT_TO_C=n,e.INFO=i,e.SANITIZE=function(e){void 0===e&&(e=0),b(e);var t=NaN,r=NaN,n=NaN,a=NaN;return i((function(i,o,s,l,u){var c=Math.abs,p=!1,h=0,d=0;if(i.type&L.SMOOTH_CURVE_TO&&(h=isNaN(t)?0:o-t,d=isNaN(r)?0:s-r),i.type&(L.CURVE_TO|L.SMOOTH_CURVE_TO)?(t=i.relative?o+i.x2:i.x2,r=i.relative?s+i.y2:i.y2):(t=NaN,r=NaN),i.type&L.SMOOTH_QUAD_TO?(n=isNaN(n)?o:2*o-n,a=isNaN(a)?s:2*s-a):i.type&L.QUAD_TO?(n=i.relative?o+i.x1:i.x1,a=i.relative?s+i.y1:i.y2):(n=NaN,a=NaN),i.type&L.LINE_COMMANDS||i.type&L.ARC&&(0===i.rX||0===i.rY||!i.lArcFlag)||i.type&L.CURVE_TO||i.type&L.SMOOTH_CURVE_TO||i.type&L.QUAD_TO||i.type&L.SMOOTH_QUAD_TO){var f=void 0===i.x?0:i.relative?i.x:i.x-o,m=void 0===i.y?0:i.relative?i.y:i.y-s;h=isNaN(n)?void 0===i.x1?h:i.relative?i.x:i.x1-o:n-o,d=isNaN(a)?void 0===i.y1?d:i.relative?i.y:i.y1-s:a-s;var v=void 0===i.x2?0:i.relative?i.x:i.x2-o,g=void 0===i.y2?0:i.relative?i.y:i.y2-s;c(f)<=e&&c(m)<=e&&c(h)<=e&&c(d)<=e&&c(v)<=e&&c(g)<=e&&(p=!0)}return i.type&L.CLOSE_PATH&&c(o-l)<=e&&c(s-u)<=e&&(p=!0),p?[]:i}))},e.MATRIX=a,e.ROTATE=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=0),b(e,t,r);var n=Math.sin(e),i=Math.cos(e);return a(i,n,-n,i,t-t*i+r*n,r-t*n-r*i)},e.TRANSLATE=function(e,t){return void 0===t&&(t=0),b(e,t),a(1,0,0,1,e,t)},e.SCALE=function(e,t){return void 0===t&&(t=e),b(e,t),a(e,0,0,t,0,0)},e.SKEW_X=function(e){return b(e),a(1,0,Math.atan(e),1,0,0)},e.SKEW_Y=function(e){return b(e),a(1,Math.atan(e),0,1,0,0)},e.X_AXIS_SYMMETRY=function(e){return void 0===e&&(e=0),b(e),a(-1,0,0,1,e,0)},e.Y_AXIS_SYMMETRY=function(e){return void 0===e&&(e=0),b(e),a(1,0,0,-1,0,e)},e.A_TO_C=function(){return i((function(e,t,r){return L.ARC===e.type?function(e,t,r){var n,i,a,o;e.cX||E(e,t,r);for(var s=Math.min(e.phi1,e.phi2),l=Math.max(e.phi1,e.phi2)-s,u=Math.ceil(l/90),c=new Array(u),p=t,h=r,d=0;d<u;d++){var f=A(e.phi1,e.phi2,d/u),m=A(e.phi1,e.phi2,(d+1)/u),v=m-f,g=4/3*Math.tan(v*T/4),y=[Math.cos(f*T)-g*Math.sin(f*T),Math.sin(f*T)+g*Math.cos(f*T)],b=y[0],x=y[1],w=[Math.cos(m*T),Math.sin(m*T)],O=w[0],C=w[1],M=[O+g*Math.sin(m*T),C-g*Math.cos(m*T)],P=M[0],D=M[1];c[d]={relative:e.relative,type:L.CURVE_TO};var S=function(t,r){var n=_([t*e.rX,r*e.rY],e.xRot),i=n[0],a=n[1];return[e.cX+i,e.cY+a]};n=S(b,x),c[d].x1=n[0],c[d].y1=n[1],i=S(P,D),c[d].x2=i[0],c[d].y2=i[1],a=S(O,C),c[d].x=a[0],c[d].y=a[1],e.relative&&(c[d].x1-=p,c[d].y1-=h,c[d].x2-=p,c[d].y2-=h,c[d].x-=p,c[d].y-=h),p=(o=[c[d].x,c[d].y])[0],h=o[1]}return c}(e,e.relative?0:t,e.relative?0:r):e}))},e.ANNOTATE_ARCS=function(){return i((function(e,t,r){return e.relative&&(t=0,r=0),L.ARC===e.type&&E(e,t,r),e}))},e.CLONE=function(){return function(e){var t={};for(var r in e)t[r]=e[r];return t}},e.CALCULATE_BOUNDS=function(){var e=t(),a=n(),o=r(),s=i((function(t,r,n){var i=o(a(e(function(e){var t={};for(var r in e)t[r]=e[r];return t}(t))));function l(e){e>s.maxX&&(s.maxX=e),e<s.minX&&(s.minX=e)}function u(e){e>s.maxY&&(s.maxY=e),e<s.minY&&(s.minY=e)}if(i.type&L.DRAWING_COMMANDS&&(l(r),u(n)),i.type&L.HORIZ_LINE_TO&&l(i.x),i.type&L.VERT_LINE_TO&&u(i.y),i.type&L.LINE_TO&&(l(i.x),u(i.y)),i.type&L.CURVE_TO){l(i.x),u(i.y);for(var c=0,p=M(r,i.x1,i.x2,i.x);c<p.length;c++)0<(k=p[c])&&1>k&&l(P(r,i.x1,i.x2,i.x,k));for(var h=0,d=M(n,i.y1,i.y2,i.y);h<d.length;h++)0<(k=d[h])&&1>k&&u(P(n,i.y1,i.y2,i.y,k))}if(i.type&L.ARC){l(i.x),u(i.y),E(i,r,n);for(var f=i.xRot/180*Math.PI,m=Math.cos(f)*i.rX,v=Math.sin(f)*i.rX,g=-Math.sin(f)*i.rY,y=Math.cos(f)*i.rY,_=i.phi1<i.phi2?[i.phi1,i.phi2]:-180>i.phi2?[i.phi2+360,i.phi1+360]:[i.phi2,i.phi1],b=_[0],x=_[1],O=function(e){var t=e[0],r=e[1],n=180*Math.atan2(r,t)/Math.PI;return n<b?n+360:n},T=0,A=w(g,-m,0).map(O);T<A.length;T++)(k=A[T])>b&&k<x&&l(C(i.cX,m,g,k));for(var D=0,S=w(y,-v,0).map(O);D<S.length;D++){var k;(k=S[D])>b&&k<x&&u(C(i.cY,v,y,k))}}return t}));return s.minX=1/0,s.maxX=-1/0,s.minY=1/0,s.maxY=-1/0,s}}(O||(O={}));var D,S=function(){function e(){}return e.prototype.round=function(e){return this.transform(O.ROUND(e))},e.prototype.toAbs=function(){return this.transform(O.TO_ABS())},e.prototype.toRel=function(){return this.transform(O.TO_REL())},e.prototype.normalizeHVZ=function(e,t,r){return this.transform(O.NORMALIZE_HVZ(e,t,r))},e.prototype.normalizeST=function(){return this.transform(O.NORMALIZE_ST())},e.prototype.qtToC=function(){return this.transform(O.QT_TO_C())},e.prototype.aToC=function(){return this.transform(O.A_TO_C())},e.prototype.sanitize=function(e){return this.transform(O.SANITIZE(e))},e.prototype.translate=function(e,t){return this.transform(O.TRANSLATE(e,t))},e.prototype.scale=function(e,t){return this.transform(O.SCALE(e,t))},e.prototype.rotate=function(e,t,r){return this.transform(O.ROTATE(e,t,r))},e.prototype.matrix=function(e,t,r,n,i,a){return this.transform(O.MATRIX(e,t,r,n,i,a))},e.prototype.skewX=function(e){return this.transform(O.SKEW_X(e))},e.prototype.skewY=function(e){return this.transform(O.SKEW_Y(e))},e.prototype.xSymmetry=function(e){return this.transform(O.X_AXIS_SYMMETRY(e))},e.prototype.ySymmetry=function(e){return this.transform(O.Y_AXIS_SYMMETRY(e))},e.prototype.annotateArcs=function(){return this.transform(O.ANNOTATE_ARCS())},e}(),k=function(e){return" "===e||"\t"===e||"\r"===e||"\n"===e},I=function(e){return"0".charCodeAt(0)<=e.charCodeAt(0)&&e.charCodeAt(0)<="9".charCodeAt(0)},R=function(e){function t(){var t=e.call(this)||this;return t.curNumber="",t.curCommandType=-1,t.curCommandRelative=!1,t.canParseCommandOrComma=!0,t.curNumberHasExp=!1,t.curNumberHasExpDigits=!1,t.curNumberHasDecimal=!1,t.curArgs=[],t}return y(t,e),t.prototype.finish=function(e){if(void 0===e&&(e=[]),this.parse(" ",e),0!==this.curArgs.length||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return e},t.prototype.parse=function(e,t){var r=this;void 0===t&&(t=[]);for(var n=function(e){t.push(e),r.curArgs.length=0,r.canParseCommandOrComma=!0},i=0;i<e.length;i++){var a=e[i],o=!(this.curCommandType!==L.ARC||3!==this.curArgs.length&&4!==this.curArgs.length||1!==this.curNumber.length||"0"!==this.curNumber&&"1"!==this.curNumber),s=I(a)&&("0"===this.curNumber&&"0"===a||o);if(!I(a)||s)if("e"!==a&&"E"!==a)if("-"!==a&&"+"!==a||!this.curNumberHasExp||this.curNumberHasExpDigits)if("."!==a||this.curNumberHasExp||this.curNumberHasDecimal||o){if(this.curNumber&&-1!==this.curCommandType){var l=Number(this.curNumber);if(isNaN(l))throw new SyntaxError("Invalid number ending at "+i);if(this.curCommandType===L.ARC)if(0===this.curArgs.length||1===this.curArgs.length){if(0>l)throw new SyntaxError('Expected positive number, got "'+l+'" at index "'+i+'"')}else if((3===this.curArgs.length||4===this.curArgs.length)&&"0"!==this.curNumber&&"1"!==this.curNumber)throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+i+'"');this.curArgs.push(l),this.curArgs.length===N[this.curCommandType]&&(L.HORIZ_LINE_TO===this.curCommandType?n({type:L.HORIZ_LINE_TO,relative:this.curCommandRelative,x:l}):L.VERT_LINE_TO===this.curCommandType?n({type:L.VERT_LINE_TO,relative:this.curCommandRelative,y:l}):this.curCommandType===L.MOVE_TO||this.curCommandType===L.LINE_TO||this.curCommandType===L.SMOOTH_QUAD_TO?(n({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),L.MOVE_TO===this.curCommandType&&(this.curCommandType=L.LINE_TO)):this.curCommandType===L.CURVE_TO?n({type:L.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===L.SMOOTH_CURVE_TO?n({type:L.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===L.QUAD_TO?n({type:L.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===L.ARC&&n({type:L.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!k(a))if(","===a&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if("+"!==a&&"-"!==a&&"."!==a)if(s)this.curNumber=a,this.curNumberHasDecimal=!1;else{if(0!==this.curArgs.length)throw new SyntaxError("Unterminated command at index "+i+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+a+'" at index '+i+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,"z"!==a&&"Z"!==a)if("h"===a||"H"===a)this.curCommandType=L.HORIZ_LINE_TO,this.curCommandRelative="h"===a;else if("v"===a||"V"===a)this.curCommandType=L.VERT_LINE_TO,this.curCommandRelative="v"===a;else if("m"===a||"M"===a)this.curCommandType=L.MOVE_TO,this.curCommandRelative="m"===a;else if("l"===a||"L"===a)this.curCommandType=L.LINE_TO,this.curCommandRelative="l"===a;else if("c"===a||"C"===a)this.curCommandType=L.CURVE_TO,this.curCommandRelative="c"===a;else if("s"===a||"S"===a)this.curCommandType=L.SMOOTH_CURVE_TO,this.curCommandRelative="s"===a;else if("q"===a||"Q"===a)this.curCommandType=L.QUAD_TO,this.curCommandRelative="q"===a;else if("t"===a||"T"===a)this.curCommandType=L.SMOOTH_QUAD_TO,this.curCommandRelative="t"===a;else{if("a"!==a&&"A"!==a)throw new SyntaxError('Unexpected character "'+a+'" at index '+i+".");this.curCommandType=L.ARC,this.curCommandRelative="a"===a}else t.push({type:L.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=a,this.curNumberHasDecimal="."===a}else this.curNumber+=a,this.curNumberHasDecimal=!0;else this.curNumber+=a;else this.curNumber+=a,this.curNumberHasExp=!0;else this.curNumber+=a,this.curNumberHasExpDigits=this.curNumberHasExp}return t},t.prototype.transform=function(e){return Object.create(this,{parse:{value:function(t,r){void 0===r&&(r=[]);for(var n=0,i=Object.getPrototypeOf(this).parse.call(this,t);n<i.length;n++){var a=i[n],o=e(a);Array.isArray(o)?r.push.apply(r,o):r.push(o)}return r}}})},t}(S),L=function(e){function t(r){var n=e.call(this)||this;return n.commands="string"==typeof r?t.parse(r):r,n}return y(t,e),t.prototype.encode=function(){return t.encode(this.commands)},t.prototype.getBounds=function(){var e=O.CALCULATE_BOUNDS();return this.transform(e),e},t.prototype.transform=function(e){for(var t=[],r=0,n=this.commands;r<n.length;r++){var i=e(n[r]);Array.isArray(i)?t.push.apply(t,i):t.push(i)}return this.commands=t,this},t.encode=function(e){return function(e){var t="";Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++){var n=e[r];if(n.type===L.CLOSE_PATH)t+="z";else if(n.type===L.HORIZ_LINE_TO)t+=(n.relative?"h":"H")+n.x;else if(n.type===L.VERT_LINE_TO)t+=(n.relative?"v":"V")+n.y;else if(n.type===L.MOVE_TO)t+=(n.relative?"m":"M")+n.x+" "+n.y;else if(n.type===L.LINE_TO)t+=(n.relative?"l":"L")+n.x+" "+n.y;else if(n.type===L.CURVE_TO)t+=(n.relative?"c":"C")+n.x1+" "+n.y1+" "+n.x2+" "+n.y2+" "+n.x+" "+n.y;else if(n.type===L.SMOOTH_CURVE_TO)t+=(n.relative?"s":"S")+n.x2+" "+n.y2+" "+n.x+" "+n.y;else if(n.type===L.QUAD_TO)t+=(n.relative?"q":"Q")+n.x1+" "+n.y1+" "+n.x+" "+n.y;else if(n.type===L.SMOOTH_QUAD_TO)t+=(n.relative?"t":"T")+n.x+" "+n.y;else{if(n.type!==L.ARC)throw new Error('Unexpected command type "'+n.type+'" at index '+r+".");t+=(n.relative?"a":"A")+n.rX+" "+n.rY+" "+n.xRot+" "+ +n.lArcFlag+" "+ +n.sweepFlag+" "+n.x+" "+n.y}}return t}(e)},t.parse=function(e){var t=new R,r=[];return t.parse(e,r),t.finish(r),r},t.CLOSE_PATH=1,t.MOVE_TO=2,t.HORIZ_LINE_TO=4,t.VERT_LINE_TO=8,t.LINE_TO=16,t.CURVE_TO=32,t.SMOOTH_CURVE_TO=64,t.QUAD_TO=128,t.SMOOTH_QUAD_TO=256,t.ARC=512,t.LINE_COMMANDS=t.LINE_TO|t.HORIZ_LINE_TO|t.VERT_LINE_TO,t.DRAWING_COMMANDS=t.HORIZ_LINE_TO|t.VERT_LINE_TO|t.LINE_TO|t.CURVE_TO|t.SMOOTH_CURVE_TO|t.QUAD_TO|t.SMOOTH_QUAD_TO|t.ARC,t}(S),N=((D={})[L.MOVE_TO]=2,D[L.LINE_TO]=2,D[L.HORIZ_LINE_TO]=1,D[L.VERT_LINE_TO]=1,D[L.CLOSE_PATH]=0,D[L.QUAD_TO]=4,D[L.SMOOTH_QUAD_TO]=2,D[L.CURVE_TO]=6,D[L.SMOOTH_CURVE_TO]=4,D[L.ARC]=7,D);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}r(39714);var Y=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],B=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function V(e,t,r,n,i,a){if(!(isNaN(a)||a<1)){a|=0;var o=function(e,t,r,n,i){if("string"==typeof e&&(e=document.getElementById(e)),!e||"object"!==j(e)||!("getContext"in e))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var a=e.getContext("2d");try{return a.getImageData(t,r,n,i)}catch(e){throw new Error("unable to access image data: "+e)}}(e,t,r,n,i);o=function(e,t,r,n,i,a){for(var o,s=e.data,l=2*a+1,u=n-1,c=i-1,p=a+1,h=p*(p+1)/2,d=new U,f=d,m=1;m<l;m++)f=f.next=new U,m===p&&(o=f);f.next=d;for(var v=null,g=null,y=0,_=0,b=Y[a],x=B[a],E=0;E<i;E++){f=d;for(var w=s[_],O=s[_+1],T=s[_+2],A=s[_+3],C=0;C<p;C++)f.r=w,f.g=O,f.b=T,f.a=A,f=f.next;for(var M=0,P=0,D=0,S=0,k=p*w,I=p*O,R=p*T,L=p*A,N=h*w,j=h*O,V=h*T,H=h*A,F=1;F<p;F++){var Z=_+((u<F?u:F)<<2),W=s[Z],q=s[Z+1],K=s[Z+2],z=s[Z+3],X=p-F;N+=(f.r=W)*X,j+=(f.g=q)*X,V+=(f.b=K)*X,H+=(f.a=z)*X,M+=W,P+=q,D+=K,S+=z,f=f.next}v=d,g=o;for(var G=0;G<n;G++){var $=H*b>>x;if(s[_+3]=$,0!==$){var Q=255/$;s[_]=(N*b>>x)*Q,s[_+1]=(j*b>>x)*Q,s[_+2]=(V*b>>x)*Q}else s[_]=s[_+1]=s[_+2]=0;N-=k,j-=I,V-=R,H-=L,k-=v.r,I-=v.g,R-=v.b,L-=v.a;var J=G+a+1;J=y+(J<u?J:u)<<2,N+=M+=v.r=s[J],j+=P+=v.g=s[J+1],V+=D+=v.b=s[J+2],H+=S+=v.a=s[J+3],v=v.next;var ee=g,te=ee.r,re=ee.g,ne=ee.b,ie=ee.a;k+=te,I+=re,R+=ne,L+=ie,M-=te,P-=re,D-=ne,S-=ie,g=g.next,_+=4}y+=n}for(var ae=0;ae<n;ae++){var oe=s[_=ae<<2],se=s[_+1],le=s[_+2],ue=s[_+3],ce=p*oe,pe=p*se,he=p*le,de=p*ue,fe=h*oe,me=h*se,ve=h*le,ge=h*ue;f=d;for(var ye=0;ye<p;ye++)f.r=oe,f.g=se,f.b=le,f.a=ue,f=f.next;for(var _e=n,be=0,xe=0,Ee=0,we=0,Oe=1;Oe<=a;Oe++){_=_e+ae<<2;var Te=p-Oe;fe+=(f.r=oe=s[_])*Te,me+=(f.g=se=s[_+1])*Te,ve+=(f.b=le=s[_+2])*Te,ge+=(f.a=ue=s[_+3])*Te,we+=oe,be+=se,xe+=le,Ee+=ue,f=f.next,Oe<c&&(_e+=n)}_=ae,v=d,g=o;for(var Ae=0;Ae<i;Ae++){var Ce=_<<2;s[Ce+3]=ue=ge*b>>x,ue>0?(ue=255/ue,s[Ce]=(fe*b>>x)*ue,s[Ce+1]=(me*b>>x)*ue,s[Ce+2]=(ve*b>>x)*ue):s[Ce]=s[Ce+1]=s[Ce+2]=0,fe-=ce,me-=pe,ve-=he,ge-=de,ce-=v.r,pe-=v.g,he-=v.b,de-=v.a,Ce=ae+((Ce=Ae+p)<c?Ce:c)*n<<2,fe+=we+=v.r=s[Ce],me+=be+=v.g=s[Ce+1],ve+=xe+=v.b=s[Ce+2],ge+=Ee+=v.a=s[Ce+3],v=v.next,ce+=oe=g.r,pe+=se=g.g,he+=le=g.b,de+=ue=g.a,we-=oe,be-=se,xe-=le,Ee-=ue,g=g.next,_+=n}}return e}(o,0,0,n,i,a),e.getContext("2d").putImageData(o,t,r)}}var U=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function H(e){return e.replace(/(?!\u3000)\s+/gm," ")}function F(e){return((e||"").match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm)||[]).map(parseFloat)}var Z=/^[A-Z-]+$/;function W(e){var t=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(e)||[];return t[2]||t[3]||t[4]}var q=/(\[[^\]]+\])/g,K=/(#[^\s+>~.[:]+)/g,z=/(\.[^\s+>~.[:]+)/g,X=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,G=/(:[\w-]+\([^)]*\))/gi,$=/(:[^\s+>~.[:]+)/g,Q=/([^\s+>~.[:]+)/g;function J(e,t){var r=t.exec(e);return r?[e.replace(t," "),r.length]:[e,0]}var ee=1e-8;function te(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))}function re(e,t){return(e[0]*t[0]+e[1]*t[1])/(te(e)*te(t))}function ne(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(re(e,t))}function ie(e){return e*e*e}function ae(e){return 3*e*e*(1-e)}function oe(e){return 3*e*(1-e)*(1-e)}function se(e){return(1-e)*(1-e)*(1-e)}function le(e){return e*e}function ue(e){return 2*e*(1-e)}function ce(e){return(1-e)*(1-e)}class pe{constructor(e,t,r){this.document=e,this.name=t,this.value=r,this.isNormalizedColor=!1}static empty(e){return new pe(e,"EMPTY","")}split(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ",{document:t,name:r}=this;return H(this.getString()).trim().split(e).map((e=>new pe(t,r,e)))}hasValue(e){var{value:t}=this;return null!==t&&""!==t&&(e||0!==t)&&void 0!==t}isString(e){var{value:t}=this,r="string"==typeof t;return r&&e?e.test(t):r}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;var e=this.getString();switch(!0){case e.endsWith("px"):case/^[0-9]+$/.test(e):return!0;default:return!1}}setValue(e){return this.value=e,this}getValue(e){return void 0===e||this.hasValue()?this.value:e}getNumber(e){if(!this.hasValue())return void 0===e?0:parseFloat(e);var{value:t}=this,r=parseFloat(t);return this.isString(/%$/)&&(r/=100),r}getString(e){return void 0===e||this.hasValue()?void 0===this.value?"":String(this.value):String(e)}getColor(e){var t=this.getString(e);return this.isNormalizedColor||(this.isNormalizedColor=!0,t=function(e){if(!e.startsWith("rgb"))return e;var t=3;return e.replace(/\d+(\.\d+)?/g,((e,r)=>t--&&r?String(Math.round(parseFloat(e))):e))}(t),this.value=t),t}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.hasValue())return 0;var[r,n]="boolean"==typeof e?[void 0,e]:[e],{viewPort:i}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(i.computeSize("x"),i.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(i.computeSize("x"),i.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*i.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*i.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return 15*this.getNumber();case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case this.isString(/%$/)&&n:return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*i.computeSize(r);default:var a=this.getNumber();return t&&a<1?a*i.computeSize(r):a}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():1e3*this.getNumber():0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){var e=this.getString(),t=/#([^)'"]+)/.exec(e);return t&&(t=t[1]),t||(t=e),this.document.definitions[t]}getFillStyleDefinition(e,t){var r=this.getDefinition();if(!r)return null;if("function"==typeof r.createGradient)return r.createGradient(this.document.ctx,e,t);if("function"==typeof r.createPattern){if(r.getHrefAttribute().hasValue()){var n=r.getAttribute("patternTransform");r=r.getHrefAttribute().getDefinition(),n.hasValue()&&r.getAttribute("patternTransform",!0).setValue(n.value)}return r.createPattern(this.document.ctx,e,t)}return null}getTextBaseline(){return this.hasValue()?pe.textBaselineMapping[this.getString()]:null}addOpacity(e){for(var t=this.getColor(),r=t.length,n=0,i=0;i<r&&(","===t[i]&&n++,3!==n);i++);if(e.hasValue()&&this.isString()&&3!==n){var a=new v(t);a.ok&&(a.alpha=e.getNumber(),t=a.toRGBA())}return new pe(this.document,this.name,t)}}pe.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};class he{constructor(){this.viewPorts=[]}clear(){this.viewPorts=[]}setCurrent(e,t){this.viewPorts.push({width:e,height:t})}removeCurrent(){this.viewPorts.pop()}getCurrent(){var{viewPorts:e}=this;return e[e.length-1]}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(e){return"number"==typeof e?e:"x"===e?this.width:"y"===e?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}}class de{constructor(e,t){this.x=e,this.y=t}static parse(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,[r=t,n=t]=F(e);return new de(r,n)}static parseScale(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,[r=t,n=r]=F(e);return new de(r,n)}static parsePath(e){for(var t=F(e),r=t.length,n=[],i=0;i<r;i+=2)n.push(new de(t[i],t[i+1]));return n}angleTo(e){return Math.atan2(e.y-this.y,e.x-this.x)}applyTransform(e){var{x:t,y:r}=this,n=t*e[0]+r*e[2]+e[4],i=t*e[1]+r*e[3]+e[5];this.x=n,this.y=i}}class fe{constructor(e){this.screen=e,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}isWorking(){return this.working}start(){if(!this.working){var{screen:e,onClick:t,onMouseMove:r}=this,n=e.ctx.canvas;n.onclick=t,n.onmousemove=r,this.working=!0}}stop(){if(this.working){var e=this.screen.ctx.canvas;this.working=!1,e.onclick=null,e.onmousemove=null}}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(this.working){var{screen:e,events:t,eventElements:r}=this,{style:n}=e.ctx.canvas;n&&(n.cursor=""),t.forEach(((e,t)=>{for(var{run:n}=e,i=r[t];i;)n(i),i=i.parent})),this.events=[],this.eventElements=[]}}checkPath(e,t){if(this.working&&t){var{events:r,eventElements:n}=this;r.forEach(((r,i)=>{var{x:a,y:o}=r;!n[i]&&t.isPointInPath&&t.isPointInPath(a,o)&&(n[i]=e)}))}}checkBoundingBox(e,t){if(this.working&&t){var{events:r,eventElements:n}=this;r.forEach(((r,i)=>{var{x:a,y:o}=r;!n[i]&&t.isPointInBox(a,o)&&(n[i]=e)}))}}mapXY(e,t){for(var{window:r,ctx:n}=this.screen,i=new de(e,t),a=n.canvas;a;)i.x-=a.offsetLeft,i.y-=a.offsetTop,a=a.offsetParent;return r.scrollX&&(i.x+=r.scrollX),r.scrollY&&(i.y+=r.scrollY),i}onClick(e){var{x:t,y:r}=this.mapXY(e.clientX,e.clientY);this.events.push({type:"onclick",x:t,y:r,run(e){e.onClick&&e.onClick()}})}onMouseMove(e){var{x:t,y:r}=this.mapXY(e.clientX,e.clientY);this.events.push({type:"onmousemove",x:t,y:r,run(e){e.onMouseMove&&e.onMouseMove()}})}}var me="undefined"!=typeof window?window:null,ve="undefined"!=typeof fetch?fetch.bind(void 0):null;class ge{constructor(e){var{fetch:t=ve,window:r=me}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.ctx=e,this.FRAMERATE=30,this.MAX_VIRTUAL_PIXELS=3e4,this.CLIENT_WIDTH=800,this.CLIENT_HEIGHT=600,this.viewPort=new he,this.mouse=new fe(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=r,this.fetch=t}wait(e){this.waits.push(e)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;var e=this.waits.every((e=>e()));return e&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=e,e}setDefaults(e){e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4}setViewBox(e){var{document:t,ctx:r,aspectRatio:n,width:i,desiredWidth:a,height:o,desiredHeight:s,minX:l=0,minY:u=0,refX:c,refY:p,clip:h=!1,clipX:d=0,clipY:f=0}=e,m=H(n).replace(/^defer\s/,""),[v,g]=m.split(" "),y=v||"xMidYMid",_=g||"meet",b=i/a,x=o/s,E=Math.min(b,x),w=Math.max(b,x),O=a,T=s;"meet"===_&&(O*=E,T*=E),"slice"===_&&(O*=w,T*=w);var A=new pe(t,"refX",c),C=new pe(t,"refY",p),M=A.hasValue()&&C.hasValue();if(M&&r.translate(-E*A.getPixels("x"),-E*C.getPixels("y")),h){var P=E*d,D=E*f;r.beginPath(),r.moveTo(P,D),r.lineTo(i,D),r.lineTo(i,o),r.lineTo(P,o),r.closePath(),r.clip()}if(!M){var S="meet"===_&&E===x,k="slice"===_&&w===x,I="meet"===_&&E===b,R="slice"===_&&w===b;y.startsWith("xMid")&&(S||k)&&r.translate(i/2-O/2,0),y.endsWith("YMid")&&(I||R)&&r.translate(0,o/2-T/2),y.startsWith("xMax")&&(S||k)&&r.translate(i-O,0),y.endsWith("YMax")&&(I||R)&&r.translate(0,o-T)}switch(!0){case"none"===y:r.scale(b,x);break;case"meet"===_:r.scale(E,E);break;case"slice"===_:r.scale(w,w)}r.translate(-l,-u)}start(e){var{enableRedraw:t=!1,ignoreMouse:r=!1,ignoreAnimation:n=!1,ignoreDimensions:i=!1,ignoreClear:a=!1,forceRedraw:o,scaleWidth:s,scaleHeight:l,offsetX:u,offsetY:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{FRAMERATE:p,mouse:h}=this,d=1e3/p;if(this.frameDuration=d,this.readyPromise=new Promise((e=>{this.resolveReady=e})),this.isReady()&&this.render(e,i,a,s,l,u,c),t){var f=Date.now(),v=f,g=0,y=()=>{f=Date.now(),(g=f-v)>=d&&(v=f-g%d,this.shouldUpdate(n,o)&&(this.render(e,i,a,s,l,u,c),h.runEvents())),this.intervalId=m(y)};r||h.start(),this.intervalId=m(y)}}stop(){this.intervalId&&(m.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(e,t){if(!e){var{frameDuration:r}=this;if(this.animations.reduce(((e,t)=>t.update(r)||e),!1))return!0}return!("function"!=typeof t||!t())||!(this.isReadyLock||!this.isReady())||!!this.mouse.hasEvents()}render(e,t,r,n,i,a,o){var{CLIENT_WIDTH:s,CLIENT_HEIGHT:l,viewPort:u,ctx:c,isFirstRender:p}=this,h=c.canvas;u.clear(),h.width&&h.height?u.setCurrent(h.width,h.height):u.setCurrent(s,l);var d=e.getStyle("width"),f=e.getStyle("height");!t&&(p||"number"!=typeof n&&"number"!=typeof i)&&(d.hasValue()&&(h.width=d.getPixels("x"),h.style&&(h.style.width="".concat(h.width,"px"))),f.hasValue()&&(h.height=f.getPixels("y"),h.style&&(h.style.height="".concat(h.height,"px"))));var m=h.clientWidth||h.width,v=h.clientHeight||h.height;if(t&&d.hasValue()&&f.hasValue()&&(m=d.getPixels("x"),v=f.getPixels("y")),u.setCurrent(m,v),"number"==typeof a&&e.getAttribute("x",!0).setValue(a),"number"==typeof o&&e.getAttribute("y",!0).setValue(o),"number"==typeof n||"number"==typeof i){var g=F(e.getAttribute("viewBox").getString()),y=0,_=0;if("number"==typeof n){var b=e.getStyle("width");b.hasValue()?y=b.getPixels("x")/n:isNaN(g[2])||(y=g[2]/n)}if("number"==typeof i){var x=e.getStyle("height");x.hasValue()?_=x.getPixels("y")/i:isNaN(g[3])||(_=g[3]/i)}y||(y=_),_||(_=y),e.getAttribute("width",!0).setValue(n),e.getAttribute("height",!0).setValue(i);var E=e.getStyle("transform",!0,!0);E.setValue("".concat(E.getString()," scale(").concat(1/y,", ").concat(1/_,")"))}r||c.clearRect(0,0,m,v),e.render(c),p&&(this.isFirstRender=!1)}}ge.defaultWindow=me,ge.defaultFetch=ve;var{defaultFetch:ye}=ge,_e="undefined"!=typeof DOMParser?DOMParser:null;class be{constructor(){var{fetch:e=ye,DOMParser:t=_e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.fetch=e,this.DOMParser=t}parse(e){var t=this;return(0,i.Z)((function*(){return e.startsWith("<")?t.parseFromString(e):t.load(e)}))()}parseFromString(e){var t=new this.DOMParser;try{return this.checkDocument(t.parseFromString(e,"image/svg+xml"))}catch(r){return this.checkDocument(t.parseFromString(e,"text/xml"))}}checkDocument(e){var t=e.getElementsByTagName("parsererror")[0];if(t)throw new Error(t.textContent);return e}load(e){var t=this;return(0,i.Z)((function*(){var r=yield t.fetch(e),n=yield r.text();return t.parseFromString(n)}))()}}class xe{constructor(e,t,r){this.type="matrix",this.matrix=[],this.originX=null,this.originY=null,this.matrix=F(t),this.originX=r[0],this.originY=r[1]}apply(e){var{originX:t,originY:r,matrix:n}=this,i=t.getPixels("x"),a=r.getPixels("y");e.translate(i,a),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),e.translate(-i,-a)}unapply(e){var{originX:t,originY:r,matrix:n}=this,i=n[0],a=n[2],o=n[4],s=n[1],l=n[3],u=n[5],c=1/(i*(1*l-0*u)-a*(1*s-0*u)+o*(0*s-0*l)),p=t.getPixels("x"),h=r.getPixels("y");e.translate(p,h),e.transform(c*(1*l-0*u),c*(0*u-1*s),c*(0*o-1*a),c*(1*i-0*o),c*(a*u-o*l),c*(o*s-i*u)),e.translate(-p,-h)}applyToPoint(e){e.applyTransform(this.matrix)}}class Ee extends xe{constructor(e,t,r){super(e,t,r),this.type="skew",this.angle=null,this.angle=new pe(e,"angle",t)}}class we{constructor(e,t,r){this.document=e,this.transforms=[];var n=function(e){return H(e).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}(t);n.forEach((e=>{if("none"!==e){var[t,n]=function(e){var[t,r]=e.split("(");return[t.trim(),r.trim().replace(")","")]}(e),i=we.transformTypes[t];void 0!==i&&this.transforms.push(new i(this.document,n,r))}}))}static fromElement(e,t){var r=t.getStyle("transform",!1,!0),[n,i=n]=t.getStyle("transform-origin",!1,!0).split(),a=[n,i];return r.hasValue()?new we(e,r.getString(),a):null}apply(e){for(var{transforms:t}=this,r=t.length,n=0;n<r;n++)t[n].apply(e)}unapply(e){for(var{transforms:t}=this,r=t.length-1;r>=0;r--)t[r].unapply(e)}applyToPoint(e){for(var{transforms:t}=this,r=t.length,n=0;n<r;n++)t[n].applyToPoint(e)}}we.transformTypes={translate:class{constructor(e,t){this.type="translate",this.point=null,this.point=de.parse(t)}apply(e){var{x:t,y:r}=this.point;e.translate(t||0,r||0)}unapply(e){var{x:t,y:r}=this.point;e.translate(-1*t||0,-1*r||0)}applyToPoint(e){var{x:t,y:r}=this.point;e.applyTransform([1,0,0,1,t||0,r||0])}},rotate:class{constructor(e,t,r){this.type="rotate",this.angle=null,this.originX=null,this.originY=null,this.cx=0,this.cy=0;var n=F(t);this.angle=new pe(e,"angle",n[0]),this.originX=r[0],this.originY=r[1],this.cx=n[1]||0,this.cy=n[2]||0}apply(e){var{cx:t,cy:r,originX:n,originY:i,angle:a}=this,o=t+n.getPixels("x"),s=r+i.getPixels("y");e.translate(o,s),e.rotate(a.getRadians()),e.translate(-o,-s)}unapply(e){var{cx:t,cy:r,originX:n,originY:i,angle:a}=this,o=t+n.getPixels("x"),s=r+i.getPixels("y");e.translate(o,s),e.rotate(-1*a.getRadians()),e.translate(-o,-s)}applyToPoint(e){var{cx:t,cy:r,angle:n}=this,i=n.getRadians();e.applyTransform([1,0,0,1,t||0,r||0]),e.applyTransform([Math.cos(i),Math.sin(i),-Math.sin(i),Math.cos(i),0,0]),e.applyTransform([1,0,0,1,-t||0,-r||0])}},scale:class{constructor(e,t,r){this.type="scale",this.scale=null,this.originX=null,this.originY=null;var n=de.parseScale(t);0!==n.x&&0!==n.y||(n.x=ee,n.y=ee),this.scale=n,this.originX=r[0],this.originY=r[1]}apply(e){var{scale:{x:t,y:r},originX:n,originY:i}=this,a=n.getPixels("x"),o=i.getPixels("y");e.translate(a,o),e.scale(t,r||t),e.translate(-a,-o)}unapply(e){var{scale:{x:t,y:r},originX:n,originY:i}=this,a=n.getPixels("x"),o=i.getPixels("y");e.translate(a,o),e.scale(1/t,1/r||t),e.translate(-a,-o)}applyToPoint(e){var{x:t,y:r}=this.scale;e.applyTransform([t||0,0,0,r||0,0,0])}},matrix:xe,skewX:class extends Ee{constructor(e,t,r){super(e,t,r),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}},skewY:class extends Ee{constructor(e,t,r){super(e,t,r),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}}};class Oe{constructor(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.document=e,this.node=t,this.captureTextNodes=r,this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],t&&1===t.nodeType){if(Array.from(t.attributes).forEach((t=>{var r,n=(r=t.nodeName,Z.test(r)?r.toLowerCase():r);this.attributes[n]=new pe(e,n,t.value)})),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()){var n=this.getAttribute("style").getString().split(";").map((e=>e.trim()));n.forEach((t=>{if(t){var[r,n]=t.split(":").map((e=>e.trim()));this.styles[r]=new pe(e,r,n)}}))}var{definitions:i}=e,a=this.getAttribute("id");a.hasValue()&&(i[a.getString()]||(i[a.getString()]=this)),Array.from(t.childNodes).forEach((t=>{if(1===t.nodeType)this.addChild(t);else if(r&&(3===t.nodeType||4===t.nodeType)){var n=e.createTextNode(t);n.getText().length>0&&this.addChild(n)}}))}}getAttribute(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.attributes[e];if(!r&&t){var n=new pe(this.document,e,"");return this.attributes[e]=n,n}return r||pe.empty(this.document)}getHrefAttribute(){for(var e in this.attributes)if("href"===e||e.endsWith(":href"))return this.attributes[e];return pe.empty(this.document)}getStyle(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.styles[e];if(n)return n;var i=this.getAttribute(e);if(null!=i&&i.hasValue())return this.styles[e]=i,i;if(!r){var{parent:a}=this;if(a){var o=a.getStyle(e);if(null!=o&&o.hasValue())return o}}if(t){var s=new pe(this.document,e,"");return this.styles[e]=s,s}return n||pe.empty(this.document)}render(e){if("none"!==this.getStyle("display").getString()&&"hidden"!==this.getStyle("visibility").getString()){if(e.save(),this.getStyle("mask").hasValue()){var t=this.getStyle("mask").getDefinition();t&&(this.applyEffects(e),t.apply(e,this))}else if("none"!==this.getStyle("filter").getValue("none")){var r=this.getStyle("filter").getDefinition();r&&(this.applyEffects(e),r.apply(e,this))}else this.setContext(e),this.renderChildren(e),this.clearContext(e);e.restore()}}setContext(e){}applyEffects(e){var t=we.fromElement(this.document,this);t&&t.apply(e);var r=this.getStyle("clip-path",!1,!0);if(r.hasValue()){var n=r.getDefinition();n&&n.apply(e)}}clearContext(e){}renderChildren(e){this.children.forEach((t=>{t.render(e)}))}addChild(e){var t=e instanceof Oe?e:this.document.createElement(e);t.parent=this,Oe.ignoreChildTypes.includes(t.type)||this.children.push(t)}matchesSelector(e){var t,{node:r}=this;if("function"==typeof r.matches)return r.matches(e);var n=null===(t=r.getAttribute)||void 0===t?void 0:t.call(r,"class");return!(!n||""===n)&&n.split(" ").some((t=>".".concat(t)===e))}addStylesFromStyleDefinition(){var{styles:e,stylesSpecificity:t}=this.document;for(var r in e)if(!r.startsWith("@")&&this.matchesSelector(r)){var n=e[r],i=t[r];if(n)for(var a in n){var o=this.stylesSpecificity[a];void 0===o&&(o="000"),i>=o&&(this.styles[a]=n[a],this.stylesSpecificity[a]=i)}}}removeStyles(e,t){return t.reduce(((t,r)=>{var n=e.getStyle(r);if(!n.hasValue())return t;var i=n.getString();return n.setValue(""),[...t,[r,i]]}),[])}restoreStyles(e,t){t.forEach((t=>{var[r,n]=t;e.getStyle(r,!0).setValue(n)}))}isFirstChild(){var e;return 0===(null===(e=this.parent)||void 0===e?void 0:e.children.indexOf(this))}}Oe.ignoreChildTypes=["title"];class Te extends Oe{constructor(e,t,r){super(e,t,r)}}function Ae(e){var t=e.trim();return/^('|")/.test(t)?t:'"'.concat(t,'"')}function Ce(e){if(!e)return"";var t=e.trim().toLowerCase();switch(t){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return t;default:return/^oblique\s+(-|)\d+deg$/.test(t)?t:""}}function Me(e){if(!e)return"";var t=e.trim().toLowerCase();switch(t){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return t;default:return/^[\d.]+$/.test(t)?t:""}}class Pe{constructor(e,t,r,n,i,a){var o=a?"string"==typeof a?Pe.parse(a):a:{};this.fontFamily=i||o.fontFamily,this.fontSize=n||o.fontSize,this.fontStyle=e||o.fontStyle,this.fontWeight=r||o.fontWeight,this.fontVariant=t||o.fontVariant}static parse(){var e=arguments.length>1?arguments[1]:void 0,t="",r="",n="",i="",a="",o=H(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().split(" "),s={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return o.forEach((e=>{switch(!0){case!s.fontStyle&&Pe.styles.includes(e):"inherit"!==e&&(t=e),s.fontStyle=!0;break;case!s.fontVariant&&Pe.variants.includes(e):"inherit"!==e&&(r=e),s.fontStyle=!0,s.fontVariant=!0;break;case!s.fontWeight&&Pe.weights.includes(e):"inherit"!==e&&(n=e),s.fontStyle=!0,s.fontVariant=!0,s.fontWeight=!0;break;case!s.fontSize:"inherit"!==e&&([i]=e.split("/")),s.fontStyle=!0,s.fontVariant=!0,s.fontWeight=!0,s.fontSize=!0;break;default:"inherit"!==e&&(a+=e)}})),new Pe(t,r,n,i,a,e)}toString(){return[Ce(this.fontStyle),this.fontVariant,Me(this.fontWeight),this.fontSize,(e=this.fontFamily,"undefined"==typeof process?e:e.trim().split(",").map(Ae).join(","))].join(" ").trim();var e}}Pe.styles="normal|italic|oblique|inherit",Pe.variants="normal|small-caps|inherit",Pe.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";class De{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.NaN,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.NaN,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.NaN,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Number.NaN;this.x1=e,this.y1=t,this.x2=r,this.y2=n,this.addPoint(e,t),this.addPoint(r,n)}get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(e,t){void 0!==e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),void 0!==t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))}addX(e){this.addPoint(e,null)}addY(e){this.addPoint(null,e)}addBoundingBox(e){if(e){var{x1:t,y1:r,x2:n,y2:i}=e;this.addPoint(t,r),this.addPoint(n,i)}}sumCubic(e,t,r,n,i){return Math.pow(1-e,3)*t+3*Math.pow(1-e,2)*e*r+3*(1-e)*Math.pow(e,2)*n+Math.pow(e,3)*i}bezierCurveAdd(e,t,r,n,i){var a=6*t-12*r+6*n,o=-3*t+9*r-9*n+3*i,s=3*r-3*t;if(0!==o){var l=Math.pow(a,2)-4*s*o;if(!(l<0)){var u=(-a+Math.sqrt(l))/(2*o);0<u&&u<1&&(e?this.addX(this.sumCubic(u,t,r,n,i)):this.addY(this.sumCubic(u,t,r,n,i)));var c=(-a-Math.sqrt(l))/(2*o);0<c&&c<1&&(e?this.addX(this.sumCubic(c,t,r,n,i)):this.addY(this.sumCubic(c,t,r,n,i)))}}else{if(0===a)return;var p=-s/a;0<p&&p<1&&(e?this.addX(this.sumCubic(p,t,r,n,i)):this.addY(this.sumCubic(p,t,r,n,i)))}}addBezierCurve(e,t,r,n,i,a,o,s){this.addPoint(e,t),this.addPoint(o,s),this.bezierCurveAdd(!0,e,r,i,o),this.bezierCurveAdd(!1,t,n,a,s)}addQuadraticCurve(e,t,r,n,i,a){var o=e+2/3*(r-e),s=t+2/3*(n-t),l=o+1/3*(i-e),u=s+1/3*(a-t);this.addBezierCurve(e,t,o,l,s,u,i,a)}isPointInBox(e,t){var{x1:r,y1:n,x2:i,y2:a}=this;return r<=e&&e<=i&&n<=t&&t<=a}}class Se extends L{constructor(e){super(e.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=null,this.start=null,this.current=null,this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new de(0,0),this.control=new de(0,0),this.current=new de(0,0),this.points=[],this.angles=[]}isEnd(){var{i:e,commands:t}=this;return e>=t.length-1}next(){var e=this.commands[++this.i];return this.previousCommand=this.command,this.command=e,e}getPoint(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"x",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y",r=new de(this.command[e],this.command[t]);return this.makeAbsolute(r)}getAsControlPoint(e,t){var r=this.getPoint(e,t);return this.control=r,r}getAsCurrentPoint(e,t){var r=this.getPoint(e,t);return this.current=r,r}getReflectedControlPoint(){var e=this.previousCommand.type;if(e!==L.CURVE_TO&&e!==L.SMOOTH_CURVE_TO&&e!==L.QUAD_TO&&e!==L.SMOOTH_QUAD_TO)return this.current;var{current:{x:t,y:r},control:{x:n,y:i}}=this;return new de(2*t-n,2*r-i)}makeAbsolute(e){if(this.command.relative){var{x:t,y:r}=this.current;e.x+=t,e.y+=r}return e}addMarker(e,t,r){var{points:n,angles:i}=this;r&&i.length>0&&!i[i.length-1]&&(i[i.length-1]=n[n.length-1].angleTo(r)),this.addMarkerAngle(e,t?t.angleTo(e):null)}addMarkerAngle(e,t){this.points.push(e),this.angles.push(t)}getMarkerPoints(){return this.points}getMarkerAngles(){for(var{angles:e}=this,t=e.length,r=0;r<t;r++)if(!e[r])for(var n=r+1;n<t;n++)if(e[n]){e[r]=e[n];break}return e}}class ke extends Oe{constructor(){super(...arguments),this.modifiedEmSizeStack=!1}calculateOpacity(){for(var e=1,t=this;t;){var r=t.getStyle("opacity",!1,!0);r.hasValue(!0)&&(e*=r.getNumber()),t=t.parent}return e}setContext(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t){var r=this.getStyle("fill"),n=this.getStyle("fill-opacity"),i=this.getStyle("stroke"),a=this.getStyle("stroke-opacity");if(r.isUrlDefinition()){var o=r.getFillStyleDefinition(this,n);o&&(e.fillStyle=o)}else if(r.hasValue()){"currentColor"===r.getString()&&r.setValue(this.getStyle("color").getColor());var s=r.getColor();"inherit"!==s&&(e.fillStyle="none"===s?"rgba(0,0,0,0)":s)}if(n.hasValue()){var l=new pe(this.document,"fill",e.fillStyle).addOpacity(n).getColor();e.fillStyle=l}if(i.isUrlDefinition()){var u=i.getFillStyleDefinition(this,a);u&&(e.strokeStyle=u)}else if(i.hasValue()){"currentColor"===i.getString()&&i.setValue(this.getStyle("color").getColor());var c=i.getString();"inherit"!==c&&(e.strokeStyle="none"===c?"rgba(0,0,0,0)":c)}if(a.hasValue()){var p=new pe(this.document,"stroke",e.strokeStyle).addOpacity(a).getString();e.strokeStyle=p}var h=this.getStyle("stroke-width");if(h.hasValue()){var d=h.getPixels();e.lineWidth=d||ee}var f=this.getStyle("stroke-linecap"),m=this.getStyle("stroke-linejoin"),v=this.getStyle("stroke-miterlimit"),g=this.getStyle("stroke-dasharray"),y=this.getStyle("stroke-dashoffset");if(f.hasValue()&&(e.lineCap=f.getString()),m.hasValue()&&(e.lineJoin=m.getString()),v.hasValue()&&(e.miterLimit=v.getNumber()),g.hasValue()&&"none"!==g.getString()){var _=F(g.getString());void 0!==e.setLineDash?e.setLineDash(_):void 0!==e.webkitLineDash?e.webkitLineDash=_:void 0===e.mozDash||1===_.length&&0===_[0]||(e.mozDash=_);var b=y.getPixels();void 0!==e.lineDashOffset?e.lineDashOffset=b:void 0!==e.webkitLineDashOffset?e.webkitLineDashOffset=b:void 0!==e.mozDashOffset&&(e.mozDashOffset=b)}}if(this.modifiedEmSizeStack=!1,void 0!==e.font){var x=this.getStyle("font"),E=this.getStyle("font-style"),w=this.getStyle("font-variant"),O=this.getStyle("font-weight"),T=this.getStyle("font-size"),A=this.getStyle("font-family"),C=new Pe(E.getString(),w.getString(),O.getString(),T.hasValue()?"".concat(T.getPixels(!0),"px"):"",A.getString(),Pe.parse(x.getString(),e.font));E.setValue(C.fontStyle),w.setValue(C.fontVariant),O.setValue(C.fontWeight),T.setValue(C.fontSize),A.setValue(C.fontFamily),e.font=C.toString(),T.isPixels()&&(this.document.emSize=T.getPixels(),this.modifiedEmSizeStack=!0)}t||(this.applyEffects(e),e.globalAlpha=this.calculateOpacity())}clearContext(e){super.clearContext(e),this.modifiedEmSizeStack&&this.document.popEmSize()}}class Ie extends ke{constructor(e,t,r){super(e,t,r),this.type="path",this.pathParser=null,this.pathParser=new Se(this.getAttribute("d").getString())}path(e){var{pathParser:t}=this,r=new De;for(t.reset(),e&&e.beginPath();!t.isEnd();)switch(t.next().type){case Se.MOVE_TO:this.pathM(e,r);break;case Se.LINE_TO:this.pathL(e,r);break;case Se.HORIZ_LINE_TO:this.pathH(e,r);break;case Se.VERT_LINE_TO:this.pathV(e,r);break;case Se.CURVE_TO:this.pathC(e,r);break;case Se.SMOOTH_CURVE_TO:this.pathS(e,r);break;case Se.QUAD_TO:this.pathQ(e,r);break;case Se.SMOOTH_QUAD_TO:this.pathT(e,r);break;case Se.ARC:this.pathA(e,r);break;case Se.CLOSE_PATH:this.pathZ(e,r)}return r}getBoundingBox(e){return this.path()}getMarkers(){var{pathParser:e}=this,t=e.getMarkerPoints(),r=e.getMarkerAngles(),n=t.map(((e,t)=>[e,r[t]]));return n}renderChildren(e){this.path(e),this.document.screen.mouse.checkPath(this,e);var t=this.getStyle("fill-rule");""!==e.fillStyle&&("inherit"!==t.getString("inherit")?e.fill(t.getString()):e.fill()),""!==e.strokeStyle&&("non-scaling-stroke"===this.getAttribute("vector-effect").getString()?(e.save(),e.setTransform(1,0,0,1,0,0),e.stroke(),e.restore()):e.stroke());var r=this.getMarkers();if(r){var n=r.length-1,i=this.getStyle("marker-start"),a=this.getStyle("marker-mid"),o=this.getStyle("marker-end");if(i.isUrlDefinition()){var s=i.getDefinition(),[l,u]=r[0];s.render(e,l,u)}if(a.isUrlDefinition())for(var c=a.getDefinition(),p=1;p<n;p++){var[h,d]=r[p];c.render(e,h,d)}if(o.isUrlDefinition()){var f=o.getDefinition(),[m,v]=r[n];f.render(e,m,v)}}}static pathM(e){var t=e.getAsCurrentPoint();return e.start=e.current,{point:t}}pathM(e,t){var{pathParser:r}=this,{point:n}=Ie.pathM(r),{x:i,y:a}=n;r.addMarker(n),t.addPoint(i,a),e&&e.moveTo(i,a)}static pathL(e){var{current:t}=e;return{current:t,point:e.getAsCurrentPoint()}}pathL(e,t){var{pathParser:r}=this,{current:n,point:i}=Ie.pathL(r),{x:a,y:o}=i;r.addMarker(i,n),t.addPoint(a,o),e&&e.lineTo(a,o)}static pathH(e){var{current:t,command:r}=e,n=new de((r.relative?t.x:0)+r.x,t.y);return e.current=n,{current:t,point:n}}pathH(e,t){var{pathParser:r}=this,{current:n,point:i}=Ie.pathH(r),{x:a,y:o}=i;r.addMarker(i,n),t.addPoint(a,o),e&&e.lineTo(a,o)}static pathV(e){var{current:t,command:r}=e,n=new de(t.x,(r.relative?t.y:0)+r.y);return e.current=n,{current:t,point:n}}pathV(e,t){var{pathParser:r}=this,{current:n,point:i}=Ie.pathV(r),{x:a,y:o}=i;r.addMarker(i,n),t.addPoint(a,o),e&&e.lineTo(a,o)}static pathC(e){var{current:t}=e;return{current:t,point:e.getPoint("x1","y1"),controlPoint:e.getAsControlPoint("x2","y2"),currentPoint:e.getAsCurrentPoint()}}pathC(e,t){var{pathParser:r}=this,{current:n,point:i,controlPoint:a,currentPoint:o}=Ie.pathC(r);r.addMarker(o,a,i),t.addBezierCurve(n.x,n.y,i.x,i.y,a.x,a.y,o.x,o.y),e&&e.bezierCurveTo(i.x,i.y,a.x,a.y,o.x,o.y)}static pathS(e){var{current:t}=e;return{current:t,point:e.getReflectedControlPoint(),controlPoint:e.getAsControlPoint("x2","y2"),currentPoint:e.getAsCurrentPoint()}}pathS(e,t){var{pathParser:r}=this,{current:n,point:i,controlPoint:a,currentPoint:o}=Ie.pathS(r);r.addMarker(o,a,i),t.addBezierCurve(n.x,n.y,i.x,i.y,a.x,a.y,o.x,o.y),e&&e.bezierCurveTo(i.x,i.y,a.x,a.y,o.x,o.y)}static pathQ(e){var{current:t}=e;return{current:t,controlPoint:e.getAsControlPoint("x1","y1"),currentPoint:e.getAsCurrentPoint()}}pathQ(e,t){var{pathParser:r}=this,{current:n,controlPoint:i,currentPoint:a}=Ie.pathQ(r);r.addMarker(a,i,i),t.addQuadraticCurve(n.x,n.y,i.x,i.y,a.x,a.y),e&&e.quadraticCurveTo(i.x,i.y,a.x,a.y)}static pathT(e){var{current:t}=e,r=e.getReflectedControlPoint();return e.control=r,{current:t,controlPoint:r,currentPoint:e.getAsCurrentPoint()}}pathT(e,t){var{pathParser:r}=this,{current:n,controlPoint:i,currentPoint:a}=Ie.pathT(r);r.addMarker(a,i,i),t.addQuadraticCurve(n.x,n.y,i.x,i.y,a.x,a.y),e&&e.quadraticCurveTo(i.x,i.y,a.x,a.y)}static pathA(e){var{current:t,command:r}=e,{rX:n,rY:i,xRot:a,lArcFlag:o,sweepFlag:s}=r,l=a*(Math.PI/180),u=e.getAsCurrentPoint(),c=new de(Math.cos(l)*(t.x-u.x)/2+Math.sin(l)*(t.y-u.y)/2,-Math.sin(l)*(t.x-u.x)/2+Math.cos(l)*(t.y-u.y)/2),p=Math.pow(c.x,2)/Math.pow(n,2)+Math.pow(c.y,2)/Math.pow(i,2);p>1&&(n*=Math.sqrt(p),i*=Math.sqrt(p));var h=(o===s?-1:1)*Math.sqrt((Math.pow(n,2)*Math.pow(i,2)-Math.pow(n,2)*Math.pow(c.y,2)-Math.pow(i,2)*Math.pow(c.x,2))/(Math.pow(n,2)*Math.pow(c.y,2)+Math.pow(i,2)*Math.pow(c.x,2)));isNaN(h)&&(h=0);var d=new de(h*n*c.y/i,h*-i*c.x/n),f=new de((t.x+u.x)/2+Math.cos(l)*d.x-Math.sin(l)*d.y,(t.y+u.y)/2+Math.sin(l)*d.x+Math.cos(l)*d.y),m=ne([1,0],[(c.x-d.x)/n,(c.y-d.y)/i]),v=[(c.x-d.x)/n,(c.y-d.y)/i],g=[(-c.x-d.x)/n,(-c.y-d.y)/i],y=ne(v,g);return re(v,g)<=-1&&(y=Math.PI),re(v,g)>=1&&(y=0),{currentPoint:u,rX:n,rY:i,sweepFlag:s,xAxisRotation:l,centp:f,a1:m,ad:y}}pathA(e,t){var{pathParser:r}=this,{currentPoint:n,rX:i,rY:a,sweepFlag:o,xAxisRotation:s,centp:l,a1:u,ad:c}=Ie.pathA(r),p=1-o?1:-1,h=u+p*(c/2),d=new de(l.x+i*Math.cos(h),l.y+a*Math.sin(h));if(r.addMarkerAngle(d,h-p*Math.PI/2),r.addMarkerAngle(n,h-p*Math.PI),t.addPoint(n.x,n.y),e&&!isNaN(u)&&!isNaN(c)){var f=i>a?i:a,m=i>a?1:i/a,v=i>a?a/i:1;e.translate(l.x,l.y),e.rotate(s),e.scale(m,v),e.arc(0,0,f,u,u+c,Boolean(1-o)),e.scale(1/m,1/v),e.rotate(-s),e.translate(-l.x,-l.y)}}static pathZ(e){e.current=e.start}pathZ(e,t){Ie.pathZ(this.pathParser),e&&t.x1!==t.x2&&t.y1!==t.y2&&e.closePath()}}class Re extends Ie{constructor(e,t,r){super(e,t,r),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}}class Le extends ke{constructor(e,t,r){super(e,t,new.target===Le||r),this.type="text",this.x=0,this.y=0,this.measureCache=-1}setContext(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super.setContext(e,t);var r=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();r&&(e.textBaseline=r)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(e){if("text"!==this.type)return this.getTElementBoundingBox(e);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(e);var t=null;return this.children.forEach(((r,n)=>{var i=this.getChildBoundingBox(e,this,this,n);t?t.addBoundingBox(i):t=i})),t}getFontSize(){var{document:e,parent:t}=this,r=Pe.parse(e.ctx.font).fontSize;return t.getStyle("font-size").getNumber(r)}getTElementBoundingBox(e){var t=this.getFontSize();return new De(this.x,this.y-t,this.x+this.measureText(e),this.y)}getGlyph(e,t,r){var n=t[r],i=null;if(e.isArabic){var a=t.length,o=t[r-1],s=t[r+1],l="isolated";if((0===r||" "===o)&&r<a-1&&" "!==s&&(l="terminal"),r>0&&" "!==o&&r<a-1&&" "!==s&&(l="medial"),r>0&&" "!==o&&(r===a-1||" "===s)&&(l="initial"),void 0!==e.glyphs[n]){var u=e.glyphs[n];i=u instanceof Re?u:u[l]}}else i=e.glyphs[n];return i||(i=e.missingGlyph),i}getText(){return""}getTextFromNode(e){var t=e||this.node,r=Array.from(t.parentNode.childNodes),n=r.indexOf(t),i=r.length-1,a=H(t.textContent||"");return 0===n&&(a=a.replace(/^[\n \t]+/,"")),n===i&&(a=a.replace(/[\n \t]+$/,"")),a}renderChildren(e){if("text"===this.type){this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(e),this.children.forEach(((t,r)=>{this.renderChild(e,this,this,r)}));var{mouse:t}=this.document.screen;t.isWorking()&&t.checkBoundingBox(this,this.getBoundingBox(e))}else this.renderTElementChildren(e)}renderTElementChildren(e){var{document:t,parent:r}=this,n=this.getText(),i=r.getStyle("font-family").getDefinition();if(i)for(var{unitsPerEm:a}=i.fontFace,o=Pe.parse(t.ctx.font),s=r.getStyle("font-size").getNumber(o.fontSize),l=r.getStyle("font-style").getString(o.fontStyle),u=s/a,c=i.isRTL?n.split("").reverse().join(""):n,p=F(r.getAttribute("dx").getString()),h=c.length,d=0;d<h;d++){var f=this.getGlyph(i,c,d);e.translate(this.x,this.y),e.scale(u,-u);var m=e.lineWidth;e.lineWidth=e.lineWidth*a/s,"italic"===l&&e.transform(1,0,.4,1,0,0),f.render(e),"italic"===l&&e.transform(1,0,-.4,1,0,0),e.lineWidth=m,e.scale(1/u,-1/u),e.translate(-this.x,-this.y),this.x+=s*(f.horizAdvX||i.horizAdvX)/a,void 0===p[d]||isNaN(p[d])||(this.x+=p[d])}else{var{x:v,y:g}=this;e.fillStyle&&e.fillText(n,v,g),e.strokeStyle&&e.strokeText(n,v,g)}}applyAnchoring(){if(!(this.textChunkStart>=this.leafTexts.length)){var e,t=this.leafTexts[this.textChunkStart],r=t.getStyle("text-anchor").getString("start");e="start"===r?t.x-this.minX:"end"===r?t.x-this.maxX:t.x-(this.minX+this.maxX)/2;for(var n=this.textChunkStart;n<this.leafTexts.length;n++)this.leafTexts[n].x+=e;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}}adjustChildCoordinatesRecursive(e){this.children.forEach(((t,r)=>{this.adjustChildCoordinatesRecursiveCore(e,this,this,r)})),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(e,t,r,n){var i=r.children[n];i.children.length>0?i.children.forEach(((r,n)=>{t.adjustChildCoordinatesRecursiveCore(e,t,i,n)})):this.adjustChildCoordinates(e,t,r,n)}adjustChildCoordinates(e,t,r,n){var i=r.children[n];if("function"!=typeof i.measureText)return i;e.save(),i.setContext(e,!0);var a=i.getAttribute("x"),o=i.getAttribute("y"),s=i.getAttribute("dx"),l=i.getAttribute("dy"),u=i.getStyle("font-family").getDefinition(),c=Boolean(u)&&u.isRTL;0===n&&(a.hasValue()||a.setValue(i.getInheritedAttribute("x")),o.hasValue()||o.setValue(i.getInheritedAttribute("y")),s.hasValue()||s.setValue(i.getInheritedAttribute("dx")),l.hasValue()||l.setValue(i.getInheritedAttribute("dy")));var p=i.measureText(e);return c&&(t.x-=p),a.hasValue()?(t.applyAnchoring(),i.x=a.getPixels("x"),s.hasValue()&&(i.x+=s.getPixels("x"))):(s.hasValue()&&(t.x+=s.getPixels("x")),i.x=t.x),t.x=i.x,c||(t.x+=p),o.hasValue()?(i.y=o.getPixels("y"),l.hasValue()&&(i.y+=l.getPixels("y"))):(l.hasValue()&&(t.y+=l.getPixels("y")),i.y=t.y),t.y=i.y,t.leafTexts.push(i),t.minX=Math.min(t.minX,i.x,i.x+p),t.maxX=Math.max(t.maxX,i.x,i.x+p),i.clearContext(e),e.restore(),i}getChildBoundingBox(e,t,r,n){var i=r.children[n];if("function"!=typeof i.getBoundingBox)return null;var a=i.getBoundingBox(e);return a?(i.children.forEach(((r,n)=>{var o=t.getChildBoundingBox(e,t,i,n);a.addBoundingBox(o)})),a):null}renderChild(e,t,r,n){var i=r.children[n];i.render(e),i.children.forEach(((r,n)=>{t.renderChild(e,t,i,n)}))}measureText(e){var{measureCache:t}=this;if(~t)return t;var r=this.getText(),n=this.measureTargetText(e,r);return this.measureCache=n,n}measureTargetText(e,t){if(!t.length)return 0;var{parent:r}=this,n=r.getStyle("font-family").getDefinition();if(n){for(var i=this.getFontSize(),a=n.isRTL?t.split("").reverse().join(""):t,o=F(r.getAttribute("dx").getString()),s=a.length,l=0,u=0;u<s;u++)l+=(this.getGlyph(n,a,u).horizAdvX||n.horizAdvX)*i/n.fontFace.unitsPerEm,void 0===o[u]||isNaN(o[u])||(l+=o[u]);return l}if(!e.measureText)return 10*t.length;e.save(),this.setContext(e,!0);var{width:c}=e.measureText(t);return this.clearContext(e),e.restore(),c}getInheritedAttribute(e){for(var t=this;t instanceof Le&&t.isFirstChild();){var r=t.parent.getAttribute(e);if(r.hasValue(!0))return r.getValue("0");t=t.parent}return null}}class Ne extends Le{constructor(e,t,r){super(e,t,new.target===Ne||r),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}getText(){return this.text}}class je extends Ne{constructor(){super(...arguments),this.type="textNode"}}class Ye extends ke{constructor(){super(...arguments),this.type="svg",this.root=!1}setContext(e){var t,{document:r}=this,{screen:n,window:i}=r,a=e.canvas;if(n.setDefaults(e),a.style&&void 0!==e.font&&i&&void 0!==i.getComputedStyle){e.font=i.getComputedStyle(a).getPropertyValue("font");var o=new pe(r,"fontSize",Pe.parse(e.font).fontSize);o.hasValue()&&(r.rootEmSize=o.getPixels("y"),r.emSize=r.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);var{width:s,height:l}=n.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");var u=this.getAttribute("refX"),c=this.getAttribute("refY"),p=this.getAttribute("viewBox"),h=p.hasValue()?F(p.getString()):null,d=!this.root&&"visible"!==this.getStyle("overflow").getValue("hidden"),f=0,m=0,v=0,g=0;h&&(f=h[0],m=h[1]),this.root||(s=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y"),"marker"===this.type&&(v=f,g=m,f=0,m=0)),n.viewPort.setCurrent(s,l),!this.node||this.parent&&"foreignObject"!==(null===(t=this.node.parentNode)||void 0===t?void 0:t.nodeName)||!this.getStyle("transform",!1,!0).hasValue()||this.getStyle("transform-origin",!1,!0).hasValue()||this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(e),e.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),h&&(s=h[2],l=h[3]),r.setViewBox({ctx:e,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:n.viewPort.width,desiredWidth:s,height:n.viewPort.height,desiredHeight:l,minX:f,minY:m,refX:u.getValue(),refY:c.getValue(),clip:d,clipX:v,clipY:g}),h&&(n.viewPort.removeCurrent(),n.viewPort.setCurrent(s,l))}clearContext(e){super.clearContext(e),this.document.screen.viewPort.removeCurrent()}resize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.getAttribute("width",!0),i=this.getAttribute("height",!0),a=this.getAttribute("viewBox"),o=this.getAttribute("style"),s=n.getNumber(0),l=i.getNumber(0);if(r)if("string"==typeof r)this.getAttribute("preserveAspectRatio",!0).setValue(r);else{var u=this.getAttribute("preserveAspectRatio");u.hasValue()&&u.setValue(u.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(n.setValue(e),i.setValue(t),a.hasValue()||a.setValue("0 0 ".concat(s||e," ").concat(l||t)),o.hasValue()){var c=this.getStyle("width"),p=this.getStyle("height");c.hasValue()&&c.setValue("".concat(e,"px")),p.hasValue()&&p.setValue("".concat(t,"px"))}}}class Be extends Ie{constructor(){super(...arguments),this.type="rect"}path(e){var t=this.getAttribute("x").getPixels("x"),r=this.getAttribute("y").getPixels("y"),n=this.getStyle("width",!1,!0).getPixels("x"),i=this.getStyle("height",!1,!0).getPixels("y"),a=this.getAttribute("rx"),o=this.getAttribute("ry"),s=a.getPixels("x"),l=o.getPixels("y");if(a.hasValue()&&!o.hasValue()&&(l=s),o.hasValue()&&!a.hasValue()&&(s=l),s=Math.min(s,n/2),l=Math.min(l,i/2),e){var u=(Math.sqrt(2)-1)/3*4;e.beginPath(),i>0&&n>0&&(e.moveTo(t+s,r),e.lineTo(t+n-s,r),e.bezierCurveTo(t+n-s+u*s,r,t+n,r+l-u*l,t+n,r+l),e.lineTo(t+n,r+i-l),e.bezierCurveTo(t+n,r+i-l+u*l,t+n-s+u*s,r+i,t+n-s,r+i),e.lineTo(t+s,r+i),e.bezierCurveTo(t+s-u*s,r+i,t,r+i-l+u*l,t,r+i-l),e.lineTo(t,r+l),e.bezierCurveTo(t,r+l-u*l,t+s-u*s,r,t+s,r),e.closePath())}return new De(t,r,t+n,r+i)}getMarkers(){return null}}class Ve extends Ie{constructor(e,t,r){super(e,t,r),this.type="polyline",this.points=[],this.points=de.parsePath(this.getAttribute("points").getString())}path(e){var{points:t}=this,[{x:r,y:n}]=t,i=new De(r,n);return e&&(e.beginPath(),e.moveTo(r,n)),t.forEach((t=>{var{x:r,y:n}=t;i.addPoint(r,n),e&&e.lineTo(r,n)})),i}getMarkers(){var{points:e}=this,t=e.length-1,r=[];return e.forEach(((n,i)=>{i!==t&&r.push([n,n.angleTo(e[i+1])])})),r.length>0&&r.push([e[e.length-1],r[r.length-1][1]]),r}}class Ue extends ke{constructor(){super(...arguments),this.type="g"}getBoundingBox(e){var t=new De;return this.children.forEach((r=>{t.addBoundingBox(r.getBoundingBox(e))})),t}}class He extends Oe{constructor(e,t,r){super(e,t,r),this.attributesToInherit=["gradientUnits"],this.stops=[];var{stops:n,children:i}=this;i.forEach((e=>{"stop"===e.type&&n.push(e)}))}getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(e,t,r){var n=this;this.getHrefAttribute().hasValue()&&(n=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(n));var{stops:i}=n,a=this.getGradient(e,t);if(!a)return this.addParentOpacity(r,i[i.length-1].color);if(i.forEach((e=>{a.addColorStop(e.offset,this.addParentOpacity(r,e.color))})),this.getAttribute("gradientTransform").hasValue()){var{document:o}=this,{MAX_VIRTUAL_PIXELS:s,viewPort:l}=o.screen,[u]=l.viewPorts,c=new Be(o,null);c.attributes.x=new pe(o,"x",-s/3),c.attributes.y=new pe(o,"y",-s/3),c.attributes.width=new pe(o,"width",s),c.attributes.height=new pe(o,"height",s);var p=new Ue(o,null);p.attributes.transform=new pe(o,"transform",this.getAttribute("gradientTransform").getValue()),p.children=[c];var h=new Ye(o,null);h.attributes.x=new pe(o,"x",0),h.attributes.y=new pe(o,"y",0),h.attributes.width=new pe(o,"width",u.width),h.attributes.height=new pe(o,"height",u.height),h.children=[p];var d=o.createCanvas(u.width,u.height),f=d.getContext("2d");return f.fillStyle=a,h.render(f),f.createPattern(d,"no-repeat")}return a}inheritStopContainer(e){this.attributesToInherit.forEach((t=>{!this.getAttribute(t).hasValue()&&e.getAttribute(t).hasValue()&&this.getAttribute(t,!0).setValue(e.getAttribute(t).getValue())}))}addParentOpacity(e,t){return e.hasValue()?new pe(this.document,"color",t).addOpacity(e).getColor():t}}class Fe extends Oe{constructor(e,t,r){super(e,t,r),this.type="animate",this.duration=0,this.initialValue=null,this.initialUnits="",this.removed=!1,this.frozen=!1,e.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new pe(e,"values",null);var n=this.getAttribute("values");n.hasValue()&&this.values.setValue(n.getString().split(";"))}getProperty(){var e=this.getAttribute("attributeType").getString(),t=this.getAttribute("attributeName").getString();return"CSS"===e?this.parent.getStyle(t,!0):this.parent.getAttribute(t,!0)}calcValue(){var{initialUnits:e}=this,{progress:t,from:r,to:n}=this.getProgress(),i=r.getNumber()+(n.getNumber()-r.getNumber())*t;return"%"===e&&(i*=100),"".concat(i).concat(e)}update(e){var{parent:t}=this,r=this.getProperty();if(this.initialValue||(this.initialValue=r.getString(),this.initialUnits=r.getUnits()),this.duration>this.maxDuration){var n=this.getAttribute("fill").getString("remove");if("indefinite"===this.getAttribute("repeatCount").getString()||"indefinite"===this.getAttribute("repeatDur").getString())this.duration=0;else if("freeze"!==n||this.frozen){if("remove"===n&&!this.removed)return this.removed=!0,r.setValue(t.animationFrozen?t.animationFrozenValue:this.initialValue),!0}else this.frozen=!0,t.animationFrozen=!0,t.animationFrozenValue=r.getString();return!1}this.duration+=e;var i=!1;if(this.begin<this.duration){var a=this.calcValue(),o=this.getAttribute("type");if(o.hasValue()){var s=o.getString();a="".concat(s,"(").concat(a,")")}r.setValue(a),i=!0}return i}getProgress(){var{document:e,values:t}=this,r={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(t.hasValue()){var n=r.progress*(t.getValue().length-1),i=Math.floor(n),a=Math.ceil(n);r.from=new pe(e,"from",parseFloat(t.getValue()[i])),r.to=new pe(e,"to",parseFloat(t.getValue()[a])),r.progress=(n-i)/(a-i)}else r.from=this.from,r.to=this.to;return r}}function Ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function We(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(r),!0).forEach((function(t){(0,f.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ze(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var qe=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;class Ke{constructor(e){this.document=e,this.loaded=!1,e.fonts.push(this)}load(e,t){var r=this;return(0,i.Z)((function*(){try{var{document:n}=r,i=(yield n.canvg.parser.load(t)).getElementsByTagName("font");Array.from(i).forEach((t=>{var r=n.createElement(t);n.definitions[e]=r}))}catch(e){console.error('Error while loading font "'.concat(t,'":'),e)}r.loaded=!0}))()}}class ze extends Oe{constructor(e,t,r){super(e,t,r),this.type="style";var n=H(Array.from(t.childNodes).map((e=>e.textContent)).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,""));n.split("}").forEach((t=>{var r=t.trim();if(r){var n=r.split("{"),i=n[0].split(","),a=n[1].split(";");i.forEach((t=>{var r=t.trim();if(r){var n,i,o,s=e.styles[r]||{};if(a.forEach((t=>{var r=t.indexOf(":"),n=t.substr(0,r).trim(),i=t.substr(r+1,t.length-r).trim();n&&i&&(s[n]=new pe(e,n,i))})),e.styles[r]=s,e.stylesSpecificity[r]=(n=[0,0,0],i=r.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),o=0,[i,o]=J(i,q),n[1]+=o,[i,o]=J(i,K),n[0]+=o,[i,o]=J(i,z),n[1]+=o,[i,o]=J(i,X),n[2]+=o,[i,o]=J(i,G),n[1]+=o,[i,o]=J(i,$),n[1]+=o,i=i.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[i,o]=J(i,Q),n[2]+=o,n.join("")),"@font-face"===r){var l=s["font-family"].getString().replace(/"|'/g,"");s.src.getString().split(",").forEach((t=>{if(t.indexOf('format("svg")')>0){var r=W(t);r&&new Ke(e).load(l,r)}}))}}}))}}))}}function Xe(e,t,r,n,i,a){return e[r*n*4+4*t+a]}function Ge(e,t,r,n,i,a,o){e[r*n*4+4*t+a]=o}function $e(e,t,r){return e[t]*r}function Qe(e,t,r,n){return t+Math.cos(e)*r+Math.sin(e)*n}ze.parseExternalUrl=W;class Je extends Oe{constructor(e,t,r){super(e,t,r),this.type="feColorMatrix";var n=F(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":var i=n[0];n=[.213+.787*i,.715-.715*i,.072-.072*i,0,0,.213-.213*i,.715+.285*i,.072-.072*i,0,0,.213-.213*i,.715-.715*i,.072+.928*i,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var a=n[0]*Math.PI/180;n=[Qe(a,.213,.787,-.213),Qe(a,.715,-.715,-.715),Qe(a,.072,-.072,.928),0,0,Qe(a,.213,-.213,.143),Qe(a,.715,.285,.14),Qe(a,.072,-.072,-.283),0,0,Qe(a,.213,-.213,-.787),Qe(a,.715,-.715,.715),Qe(a,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}this.matrix=n,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}apply(e,t,r,n,i){for(var{includeOpacity:a,matrix:o}=this,s=e.getImageData(0,0,n,i),l=0;l<i;l++)for(var u=0;u<n;u++){var c=Xe(s.data,u,l,n,0,0),p=Xe(s.data,u,l,n,0,1),h=Xe(s.data,u,l,n,0,2),d=Xe(s.data,u,l,n,0,3),f=$e(o,0,c)+$e(o,1,p)+$e(o,2,h)+$e(o,3,d)+$e(o,4,1),m=$e(o,5,c)+$e(o,6,p)+$e(o,7,h)+$e(o,8,d)+$e(o,9,1),v=$e(o,10,c)+$e(o,11,p)+$e(o,12,h)+$e(o,13,d)+$e(o,14,1),g=$e(o,15,c)+$e(o,16,p)+$e(o,17,h)+$e(o,18,d)+$e(o,19,1);a&&(f=0,m=0,v=0,g*=d/255),Ge(s.data,u,l,n,0,0,f),Ge(s.data,u,l,n,0,1,m),Ge(s.data,u,l,n,0,2,v),Ge(s.data,u,l,n,0,3,g)}e.clearRect(0,0,n,i),e.putImageData(s,0,0)}}class et extends Oe{constructor(){super(...arguments),this.type="mask"}apply(e,t){var{document:r}=this,n=this.getAttribute("x").getPixels("x"),i=this.getAttribute("y").getPixels("y"),a=this.getStyle("width").getPixels("x"),o=this.getStyle("height").getPixels("y");if(!a&&!o){var s=new De;this.children.forEach((t=>{s.addBoundingBox(t.getBoundingBox(e))})),n=Math.floor(s.x1),i=Math.floor(s.y1),a=Math.floor(s.width),o=Math.floor(s.height)}var l=this.removeStyles(t,et.ignoreStyles),u=r.createCanvas(n+a,i+o),c=u.getContext("2d");r.screen.setDefaults(c),this.renderChildren(c),new Je(r,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(c,0,0,n+a,i+o);var p=r.createCanvas(n+a,i+o),h=p.getContext("2d");r.screen.setDefaults(h),t.render(h),h.globalCompositeOperation="destination-in",h.fillStyle=c.createPattern(u,"no-repeat"),h.fillRect(0,0,n+a,i+o),e.fillStyle=h.createPattern(p,"no-repeat"),e.fillRect(0,0,n+a,i+o),this.restoreStyles(t,l)}render(e){}}et.ignoreStyles=["mask","transform","clip-path"];var tt=()=>{};class rt extends Oe{constructor(){super(...arguments),this.type="filter"}apply(e,t){var{document:r,children:n}=this,i=t.getBoundingBox(e);if(i){var a=0,o=0;n.forEach((e=>{var t=e.extraFilterDistance||0;a=Math.max(a,t),o=Math.max(o,t)}));var s=Math.floor(i.width),l=Math.floor(i.height),u=s+2*a,c=l+2*o;if(!(u<1||c<1)){var p=Math.floor(i.x),h=Math.floor(i.y),d=this.removeStyles(t,rt.ignoreStyles),f=r.createCanvas(u,c),m=f.getContext("2d");r.screen.setDefaults(m),m.translate(-p+a,-h+o),t.render(m),n.forEach((e=>{"function"==typeof e.apply&&e.apply(m,0,0,u,c)})),e.drawImage(f,0,0,u,c,p-a,h-o,u,c),this.restoreStyles(t,d)}}}render(e){}}rt.ignoreStyles=["filter","transform","clip-path"];var nt={svg:Ye,rect:Be,circle:class extends Ie{constructor(){super(...arguments),this.type="circle"}path(e){var t=this.getAttribute("cx").getPixels("x"),r=this.getAttribute("cy").getPixels("y"),n=this.getAttribute("r").getPixels();return e&&n>0&&(e.beginPath(),e.arc(t,r,n,0,2*Math.PI,!1),e.closePath()),new De(t-n,r-n,t+n,r+n)}getMarkers(){return null}},ellipse:class extends Ie{constructor(){super(...arguments),this.type="ellipse"}path(e){var t=(Math.sqrt(2)-1)/3*4,r=this.getAttribute("rx").getPixels("x"),n=this.getAttribute("ry").getPixels("y"),i=this.getAttribute("cx").getPixels("x"),a=this.getAttribute("cy").getPixels("y");return e&&r>0&&n>0&&(e.beginPath(),e.moveTo(i+r,a),e.bezierCurveTo(i+r,a+t*n,i+t*r,a+n,i,a+n),e.bezierCurveTo(i-t*r,a+n,i-r,a+t*n,i-r,a),e.bezierCurveTo(i-r,a-t*n,i-t*r,a-n,i,a-n),e.bezierCurveTo(i+t*r,a-n,i+r,a-t*n,i+r,a),e.closePath()),new De(i-r,a-n,i+r,a+n)}getMarkers(){return null}},line:class extends Ie{constructor(){super(...arguments),this.type="line"}getPoints(){return[new de(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new de(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(e){var[{x:t,y:r},{x:n,y:i}]=this.getPoints();return e&&(e.beginPath(),e.moveTo(t,r),e.lineTo(n,i)),new De(t,r,n,i)}getMarkers(){var[e,t]=this.getPoints(),r=e.angleTo(t);return[[e,r],[t,r]]}},polyline:Ve,polygon:class extends Ve{constructor(){super(...arguments),this.type="polygon"}path(e){var t=super.path(e),[{x:r,y:n}]=this.points;return e&&(e.lineTo(r,n),e.closePath()),t}},path:Ie,pattern:class extends Oe{constructor(){super(...arguments),this.type="pattern"}createPattern(e,t,r){var n=this.getStyle("width").getPixels("x",!0),i=this.getStyle("height").getPixels("y",!0),a=new Ye(this.document,null);a.attributes.viewBox=new pe(this.document,"viewBox",this.getAttribute("viewBox").getValue()),a.attributes.width=new pe(this.document,"width","".concat(n,"px")),a.attributes.height=new pe(this.document,"height","".concat(i,"px")),a.attributes.transform=new pe(this.document,"transform",this.getAttribute("patternTransform").getValue()),a.children=this.children;var o=this.document.createCanvas(n,i),s=o.getContext("2d"),l=this.getAttribute("x"),u=this.getAttribute("y");l.hasValue()&&u.hasValue()&&s.translate(l.getPixels("x",!0),u.getPixels("y",!0)),r.hasValue()?this.styles["fill-opacity"]=r:Reflect.deleteProperty(this.styles,"fill-opacity");for(var c=-1;c<=1;c++)for(var p=-1;p<=1;p++)s.save(),a.attributes.x=new pe(this.document,"x",c*o.width),a.attributes.y=new pe(this.document,"y",p*o.height),a.render(s),s.restore();return e.createPattern(o,"repeat")}},marker:class extends Oe{constructor(){super(...arguments),this.type="marker"}render(e,t,r){if(t){var{x:n,y:i}=t,a=this.getAttribute("orient").getString("auto"),o=this.getAttribute("markerUnits").getString("strokeWidth");e.translate(n,i),"auto"===a&&e.rotate(r),"strokeWidth"===o&&e.scale(e.lineWidth,e.lineWidth),e.save();var s=new Ye(this.document,null);s.type=this.type,s.attributes.viewBox=new pe(this.document,"viewBox",this.getAttribute("viewBox").getValue()),s.attributes.refX=new pe(this.document,"refX",this.getAttribute("refX").getValue()),s.attributes.refY=new pe(this.document,"refY",this.getAttribute("refY").getValue()),s.attributes.width=new pe(this.document,"width",this.getAttribute("markerWidth").getValue()),s.attributes.height=new pe(this.document,"height",this.getAttribute("markerHeight").getValue()),s.attributes.overflow=new pe(this.document,"overflow",this.getAttribute("overflow").getValue()),s.attributes.fill=new pe(this.document,"fill",this.getAttribute("fill").getColor("black")),s.attributes.stroke=new pe(this.document,"stroke",this.getAttribute("stroke").getValue("none")),s.children=this.children,s.render(e),e.restore(),"strokeWidth"===o&&e.scale(1/e.lineWidth,1/e.lineWidth),"auto"===a&&e.rotate(-r),e.translate(-n,-i)}}},defs:class extends Oe{constructor(){super(...arguments),this.type="defs"}render(){}},linearGradient:class extends He{constructor(e,t,r){super(e,t,r),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}getGradient(e,t){var r="objectBoundingBox"===this.getGradientUnits(),n=r?t.getBoundingBox(e):null;if(r&&!n)return null;this.getAttribute("x1").hasValue()||this.getAttribute("y1").hasValue()||this.getAttribute("x2").hasValue()||this.getAttribute("y2").hasValue()||(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));var i=r?n.x+n.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),a=r?n.y+n.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),o=r?n.x+n.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),s=r?n.y+n.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return i===o&&a===s?null:e.createLinearGradient(i,a,o,s)}},radialGradient:class extends He{constructor(e,t,r){super(e,t,r),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}getGradient(e,t){var r="objectBoundingBox"===this.getGradientUnits(),n=t.getBoundingBox(e);if(r&&!n)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");var i=r?n.x+n.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),a=r?n.y+n.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),o=i,s=a;this.getAttribute("fx").hasValue()&&(o=r?n.x+n.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(s=r?n.y+n.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));var l=r?(n.width+n.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),u=this.getAttribute("fr").getPixels();return e.createRadialGradient(o,s,u,i,a,l)}},stop:class extends Oe{constructor(e,t,r){super(e,t,r),this.type="stop";var n=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),i=this.getStyle("stop-opacity"),a=this.getStyle("stop-color",!0);""===a.getString()&&a.setValue("#000"),i.hasValue()&&(a=a.addOpacity(i)),this.offset=n,this.color=a.getColor()}},animate:Fe,animateColor:class extends Fe{constructor(){super(...arguments),this.type="animateColor"}calcValue(){var{progress:e,from:t,to:r}=this.getProgress(),n=new v(t.getColor()),i=new v(r.getColor());if(n.ok&&i.ok){var a=n.r+(i.r-n.r)*e,o=n.g+(i.g-n.g)*e,s=n.b+(i.b-n.b)*e;return"rgb(".concat(Math.floor(a),", ").concat(Math.floor(o),", ").concat(Math.floor(s),")")}return this.getAttribute("from").getColor()}},animateTransform:class extends Fe{constructor(){super(...arguments),this.type="animateTransform"}calcValue(){var{progress:e,from:t,to:r}=this.getProgress(),n=F(t.getString()),i=F(r.getString()),a=n.map(((t,r)=>t+(i[r]-t)*e)).join(" ");return a}},font:class extends Oe{constructor(e,t,r){super(e,t,r),this.type="font",this.glyphs={},this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();var{definitions:n}=e,{children:i}=this;for(var a of i)switch(a.type){case"font-face":this.fontFace=a;var o=a.getStyle("font-family");o.hasValue()&&(n[o.getString()]=this);break;case"missing-glyph":this.missingGlyph=a;break;case"glyph":var s=a;s.arabicForm?(this.isRTL=!0,this.isArabic=!0,void 0===this.glyphs[s.unicode]&&(this.glyphs[s.unicode]={}),this.glyphs[s.unicode][s.arabicForm]=s):this.glyphs[s.unicode]=s}}render(){}},"font-face":class extends Oe{constructor(e,t,r){super(e,t,r),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}},"missing-glyph":class extends Ie{constructor(){super(...arguments),this.type="missing-glyph",this.horizAdvX=0}},glyph:Re,text:Le,tspan:Ne,tref:class extends Le{constructor(){super(...arguments),this.type="tref"}getText(){var e=this.getHrefAttribute().getDefinition();if(e){var t=e.children[0];if(t)return t.getText()}return""}},a:class extends Le{constructor(e,t,r){super(e,t,r),this.type="a";var{childNodes:n}=t,i=n[0],a=n.length>0&&Array.from(n).every((e=>3===e.nodeType));this.hasText=a,this.text=a?this.getTextFromNode(i):""}getText(){return this.text}renderChildren(e){if(this.hasText){super.renderChildren(e);var{document:t,x:r,y:n}=this,{mouse:i}=t.screen,a=new pe(t,"fontSize",Pe.parse(t.ctx.font).fontSize);i.isWorking()&&i.checkBoundingBox(this,new De(r,n-a.getPixels("y"),r+this.measureText(e),n))}else if(this.children.length>0){var o=new Ue(this.document,null);o.children=this.children,o.parent=this,o.render(e)}}onClick(){var{window:e}=this.document;e&&e.open(this.getHrefAttribute().getString())}onMouseMove(){this.document.ctx.canvas.style.cursor="pointer"}},textPath:class extends Le{constructor(e,t,r){super(e,t,r),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);var n=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(n)}getText(){return this.text}path(e){var{dataArray:t}=this;e&&e.beginPath(),t.forEach((t=>{var{type:r,points:n}=t;switch(r){case Se.LINE_TO:e&&e.lineTo(n[0],n[1]);break;case Se.MOVE_TO:e&&e.moveTo(n[0],n[1]);break;case Se.CURVE_TO:e&&e.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);break;case Se.QUAD_TO:e&&e.quadraticCurveTo(n[0],n[1],n[2],n[3]);break;case Se.ARC:var[i,a,o,s,l,u,c,p]=n,h=o>s?o:s,d=o>s?1:o/s,f=o>s?s/o:1;e&&(e.translate(i,a),e.rotate(c),e.scale(d,f),e.arc(0,0,h,l,l+u,Boolean(1-p)),e.scale(1/d,1/f),e.rotate(-c),e.translate(-i,-a));break;case Se.CLOSE_PATH:e&&e.closePath()}}))}renderChildren(e){this.setTextData(e),e.save();var t=this.parent.getStyle("text-decoration").getString(),r=this.getFontSize(),{glyphInfo:n}=this,i=e.fillStyle;"underline"===t&&e.beginPath(),n.forEach(((n,i)=>{var{p0:a,p1:o,rotation:s,text:l}=n;e.save(),e.translate(a.x,a.y),e.rotate(s),e.fillStyle&&e.fillText(l,0,0),e.strokeStyle&&e.strokeText(l,0,0),e.restore(),"underline"===t&&(0===i&&e.moveTo(a.x,a.y+r/8),e.lineTo(o.x,o.y+r/5))})),"underline"===t&&(e.lineWidth=r/20,e.strokeStyle=i,e.stroke(),e.closePath()),e.restore()}getLetterSpacingAt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.letterSpacingCache[e]||0}findSegmentToFitChar(e,t,r,n,i,a,o,s,l){var u=a,c=this.measureText(e,s);" "===s&&"justify"===t&&r<n&&(c+=(n-r)/i),l>-1&&(u+=this.getLetterSpacingAt(l));var p=this.textHeight/20,h=this.getEquidistantPointOnPath(u,p,0),d=this.getEquidistantPointOnPath(u+c,p,0),f={p0:h,p1:d},m=h&&d?Math.atan2(d.y-h.y,d.x-h.x):0;if(o){var v=Math.cos(Math.PI/2+m)*o,g=Math.cos(-m)*o;f.p0=We(We({},h),{},{x:h.x+v,y:h.y+g}),f.p1=We(We({},d),{},{x:d.x+v,y:d.y+g})}return{offset:u+=c,segment:f,rotation:m}}measureText(e,t){var{measuresCache:r}=this,n=t||this.getText();if(r.has(n))return r.get(n);var i=this.measureTargetText(e,n);return r.set(n,i),i}setTextData(e){if(!this.glyphInfo){var t=this.getText(),r=t.split(""),n=t.split(" ").length-1,i=this.parent.getAttribute("dx").split().map((e=>e.getPixels("x"))),a=this.parent.getAttribute("dy").getPixels("y"),o=this.parent.getStyle("text-anchor").getString("start"),s=this.getStyle("letter-spacing"),l=this.parent.getStyle("letter-spacing"),u=0;s.hasValue()&&"inherit"!==s.getValue()?s.hasValue()&&"initial"!==s.getValue()&&"unset"!==s.getValue()&&(u=s.getPixels()):u=l.getPixels();var c=[],p=t.length;this.letterSpacingCache=c;for(var h=0;h<p;h++)c.push(void 0!==i[h]?i[h]:u);var d=c.reduce(((e,t,r)=>0===r?0:e+t||0),0),f=this.measureText(e),m=Math.max(f+d,0);this.textWidth=f,this.textHeight=this.getFontSize(),this.glyphInfo=[];var v=this.getPathLength(),g=this.getStyle("startOffset").getNumber(0)*v,y=0;"middle"!==o&&"center"!==o||(y=-m/2),"end"!==o&&"right"!==o||(y=-m),y+=g,r.forEach(((t,i)=>{var{offset:s,segment:l,rotation:u}=this.findSegmentToFitChar(e,o,m,v,n,y,a,t,i);y=s,l.p0&&l.p1&&this.glyphInfo.push({text:r[i],p0:l.p0,p1:l.p1,rotation:u})}))}}parsePathData(e){if(this.pathLength=-1,!e)return[];var t=[],{pathParser:r}=e;for(r.reset();!r.isEnd();){var{current:n}=r,i=n?n.x:0,a=n?n.y:0,o=r.next(),s=o.type,l=[];switch(o.type){case Se.MOVE_TO:this.pathM(r,l);break;case Se.LINE_TO:s=this.pathL(r,l);break;case Se.HORIZ_LINE_TO:s=this.pathH(r,l);break;case Se.VERT_LINE_TO:s=this.pathV(r,l);break;case Se.CURVE_TO:this.pathC(r,l);break;case Se.SMOOTH_CURVE_TO:s=this.pathS(r,l);break;case Se.QUAD_TO:this.pathQ(r,l);break;case Se.SMOOTH_QUAD_TO:s=this.pathT(r,l);break;case Se.ARC:l=this.pathA(r);break;case Se.CLOSE_PATH:Ie.pathZ(r)}o.type!==Se.CLOSE_PATH?t.push({type:s,points:l,start:{x:i,y:a},pathLength:this.calcLength(i,a,s,l)}):t.push({type:Se.CLOSE_PATH,points:[],pathLength:0})}return t}pathM(e,t){var{x:r,y:n}=Ie.pathM(e).point;t.push(r,n)}pathL(e,t){var{x:r,y:n}=Ie.pathL(e).point;return t.push(r,n),Se.LINE_TO}pathH(e,t){var{x:r,y:n}=Ie.pathH(e).point;return t.push(r,n),Se.LINE_TO}pathV(e,t){var{x:r,y:n}=Ie.pathV(e).point;return t.push(r,n),Se.LINE_TO}pathC(e,t){var{point:r,controlPoint:n,currentPoint:i}=Ie.pathC(e);t.push(r.x,r.y,n.x,n.y,i.x,i.y)}pathS(e,t){var{point:r,controlPoint:n,currentPoint:i}=Ie.pathS(e);return t.push(r.x,r.y,n.x,n.y,i.x,i.y),Se.CURVE_TO}pathQ(e,t){var{controlPoint:r,currentPoint:n}=Ie.pathQ(e);t.push(r.x,r.y,n.x,n.y)}pathT(e,t){var{controlPoint:r,currentPoint:n}=Ie.pathT(e);return t.push(r.x,r.y,n.x,n.y),Se.QUAD_TO}pathA(e){var{rX:t,rY:r,sweepFlag:n,xAxisRotation:i,centp:a,a1:o,ad:s}=Ie.pathA(e);return 0===n&&s>0&&(s-=2*Math.PI),1===n&&s<0&&(s+=2*Math.PI),[a.x,a.y,t,r,o,s,i,n]}calcLength(e,t,r,n){var i=0,a=null,o=null,s=0;switch(r){case Se.LINE_TO:return this.getLineLength(e,t,n[0],n[1]);case Se.CURVE_TO:for(i=0,a=this.getPointOnCubicBezier(0,e,t,n[0],n[1],n[2],n[3],n[4],n[5]),s=.01;s<=1;s+=.01)o=this.getPointOnCubicBezier(s,e,t,n[0],n[1],n[2],n[3],n[4],n[5]),i+=this.getLineLength(a.x,a.y,o.x,o.y),a=o;return i;case Se.QUAD_TO:for(i=0,a=this.getPointOnQuadraticBezier(0,e,t,n[0],n[1],n[2],n[3]),s=.01;s<=1;s+=.01)o=this.getPointOnQuadraticBezier(s,e,t,n[0],n[1],n[2],n[3]),i+=this.getLineLength(a.x,a.y,o.x,o.y),a=o;return i;case Se.ARC:i=0;var l=n[4],u=n[5],c=n[4]+u,p=Math.PI/180;if(Math.abs(l-c)<p&&(p=Math.abs(l-c)),a=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),u<0)for(s=l-p;s>c;s-=p)o=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],s,0),i+=this.getLineLength(a.x,a.y,o.x,o.y),a=o;else for(s=l+p;s<c;s+=p)o=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],s,0),i+=this.getLineLength(a.x,a.y,o.x,o.y),a=o;return o=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],c,0),i+this.getLineLength(a.x,a.y,o.x,o.y)}return 0}getPointOnLine(e,t,r,n,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:r,s=(i-r)/(n-t+ee),l=Math.sqrt(e*e/(1+s*s));n<t&&(l*=-1);var u=s*l,c=null;if(n===t)c={x:a,y:o+u};else if((o-r)/(a-t+ee)===s)c={x:a+l,y:o+u};else{var p,h,d=this.getLineLength(t,r,n,i);if(d<ee)return null;var f=(a-t)*(n-t)+(o-r)*(i-r);p=t+(f/=d*d)*(n-t),h=r+f*(i-r);var m=this.getLineLength(a,o,p,h),v=Math.sqrt(e*e-m*m);l=Math.sqrt(v*v/(1+s*s)),n<t&&(l*=-1),c={x:p+l,y:h+(u=s*l)}}return c}getPointOnPath(e){var t=this.getPathLength(),r=0,n=null;if(e<-5e-5||e-5e-5>t)return null;var{dataArray:i}=this;for(var a of i){if(!a||!(a.pathLength<5e-5||r+a.pathLength+5e-5<e)){var o=e-r,s=0;switch(a.type){case Se.LINE_TO:n=this.getPointOnLine(o,a.start.x,a.start.y,a.points[0],a.points[1],a.start.x,a.start.y);break;case Se.ARC:var l=a.points[4],u=a.points[5],c=a.points[4]+u;if(s=l+o/a.pathLength*u,u<0&&s<c||u>=0&&s>c)break;n=this.getPointOnEllipticalArc(a.points[0],a.points[1],a.points[2],a.points[3],s,a.points[6]);break;case Se.CURVE_TO:(s=o/a.pathLength)>1&&(s=1),n=this.getPointOnCubicBezier(s,a.start.x,a.start.y,a.points[0],a.points[1],a.points[2],a.points[3],a.points[4],a.points[5]);break;case Se.QUAD_TO:(s=o/a.pathLength)>1&&(s=1),n=this.getPointOnQuadraticBezier(s,a.start.x,a.start.y,a.points[0],a.points[1],a.points[2],a.points[3])}if(n)return n;break}r+=a.pathLength}return null}getLineLength(e,t,r,n){return Math.sqrt((r-e)*(r-e)+(n-t)*(n-t))}getPathLength(){return-1===this.pathLength&&(this.pathLength=this.dataArray.reduce(((e,t)=>t.pathLength>0?e+t.pathLength:e),0)),this.pathLength}getPointOnCubicBezier(e,t,r,n,i,a,o,s,l){return{x:s*ie(e)+a*ae(e)+n*oe(e)+t*se(e),y:l*ie(e)+o*ae(e)+i*oe(e)+r*se(e)}}getPointOnQuadraticBezier(e,t,r,n,i,a,o){return{x:a*le(e)+n*ue(e)+t*ce(e),y:o*le(e)+i*ue(e)+r*ce(e)}}getPointOnEllipticalArc(e,t,r,n,i,a){var o=Math.cos(a),s=Math.sin(a),l=r*Math.cos(i),u=n*Math.sin(i);return{x:e+(l*o-u*s),y:t+(l*s+u*o)}}buildEquidistantCache(e,t){var r=this.getPathLength(),n=t||.25,i=e||r/100;if(!this.equidistantCache||this.equidistantCache.step!==i||this.equidistantCache.precision!==n){this.equidistantCache={step:i,precision:n,points:[]};for(var a=0,o=0;o<=r;o+=n){var s=this.getPointOnPath(o),l=this.getPointOnPath(o+n);s&&l&&(a+=this.getLineLength(s.x,s.y,l.x,l.y))>=i&&(this.equidistantCache.points.push({x:s.x,y:s.y,distance:o}),a-=i)}}}getEquidistantPointOnPath(e,t,r){if(this.buildEquidistantCache(t,r),e<0||e-this.getPathLength()>5e-5)return null;var n=Math.round(e/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[n]||null}},image:class extends ke{constructor(e,t,r){super(e,t,r),this.type="image",this.loaded=!1;var n=this.getHrefAttribute().getString();if(n){var i=n.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(n);e.images.push(this),i?this.loadSvg(n):this.loadImage(n),this.isSvg=i}}loadImage(e){var t=this;return(0,i.Z)((function*(){try{var r=yield t.document.createImage(e);t.image=r}catch(t){console.error('Error while loading image "'.concat(e,'":'),t)}t.loaded=!0}))()}loadSvg(e){var t=this;return(0,i.Z)((function*(){var r=qe.exec(e);if(r){var n=r[5];"base64"===r[4]?t.image=atob(n):t.image=decodeURIComponent(n)}else try{var i=yield t.document.fetch(e),a=yield i.text();t.image=a}catch(t){console.error('Error while loading image "'.concat(e,'":'),t)}t.loaded=!0}))()}renderChildren(e){var{document:t,image:r,loaded:n}=this,i=this.getAttribute("x").getPixels("x"),a=this.getAttribute("y").getPixels("y"),o=this.getStyle("width").getPixels("x"),s=this.getStyle("height").getPixels("y");if(n&&r&&o&&s){if(e.save(),e.translate(i,a),this.isSvg){var l=t.canvg.forkString(e,this.image,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:o,scaleHeight:s});l.document.documentElement.parent=this,l.render()}else{var u=this.image;t.setViewBox({ctx:e,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:o,desiredWidth:u.width,height:s,desiredHeight:u.height}),this.loaded&&(void 0===u.complete||u.complete)&&e.drawImage(u,0,0)}e.restore()}}getBoundingBox(){var e=this.getAttribute("x").getPixels("x"),t=this.getAttribute("y").getPixels("y"),r=this.getStyle("width").getPixels("x"),n=this.getStyle("height").getPixels("y");return new De(e,t,e+r,t+n)}},g:Ue,symbol:class extends ke{constructor(){super(...arguments),this.type="symbol"}render(e){}},style:ze,use:class extends ke{constructor(){super(...arguments),this.type="use"}setContext(e){super.setContext(e);var t=this.getAttribute("x"),r=this.getAttribute("y");t.hasValue()&&e.translate(t.getPixels("x"),0),r.hasValue()&&e.translate(0,r.getPixels("y"))}path(e){var{element:t}=this;t&&t.path(e)}renderChildren(e){var{document:t,element:r}=this;if(r){var n=r;if("symbol"===r.type&&((n=new Ye(t,null)).attributes.viewBox=new pe(t,"viewBox",r.getAttribute("viewBox").getString()),n.attributes.preserveAspectRatio=new pe(t,"preserveAspectRatio",r.getAttribute("preserveAspectRatio").getString()),n.attributes.overflow=new pe(t,"overflow",r.getAttribute("overflow").getString()),n.children=r.children,r.styles.opacity=new pe(t,"opacity",this.calculateOpacity())),"svg"===n.type){var i=this.getStyle("width",!1,!0),a=this.getStyle("height",!1,!0);i.hasValue()&&(n.attributes.width=new pe(t,"width",i.getString())),a.hasValue()&&(n.attributes.height=new pe(t,"height",a.getString()))}var o=n.parent;n.parent=this,n.render(e),n.parent=o}}getBoundingBox(e){var{element:t}=this;return t?t.getBoundingBox(e):null}elementTransform(){var{document:e,element:t}=this;return we.fromElement(e,t)}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}},mask:et,clipPath:class extends Oe{constructor(){super(...arguments),this.type="clipPath"}apply(e){var{document:t}=this,r=Reflect.getPrototypeOf(e),{beginPath:n,closePath:i}=e;r&&(r.beginPath=tt,r.closePath=tt),Reflect.apply(n,e,[]),this.children.forEach((n=>{if(void 0!==n.path){var a=void 0!==n.elementTransform?n.elementTransform():null;a||(a=we.fromElement(t,n)),a&&a.apply(e),n.path(e),r&&(r.closePath=i),a&&a.unapply(e)}})),Reflect.apply(i,e,[]),e.clip(),r&&(r.beginPath=n,r.closePath=i)}render(e){}},filter:rt,feDropShadow:class extends Oe{constructor(e,t,r){super(e,t,r),this.type="feDropShadow",this.addStylesFromStyleDefinition()}apply(e,t,r,n,i){}},feMorphology:class extends Oe{constructor(){super(...arguments),this.type="feMorphology"}apply(e,t,r,n,i){}},feComposite:class extends Oe{constructor(){super(...arguments),this.type="feComposite"}apply(e,t,r,n,i){}},feColorMatrix:Je,feGaussianBlur:class extends Oe{constructor(e,t,r){super(e,t,r),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}apply(e,t,r,n,i){var{document:a,blurRadius:o}=this,s=a.window?a.window.document.body:null,l=e.canvas;l.id=a.getUniqueId(),s&&(l.style.display="none",s.appendChild(l)),V(l,t,r,n,i,o),s&&s.removeChild(l)}},title:class extends Oe{constructor(){super(...arguments),this.type="title"}},desc:class extends Oe{constructor(){super(...arguments),this.type="desc"}}};function it(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function at(){return at=(0,i.Z)((function*(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=document.createElement("img");return t&&(r.crossOrigin="Anonymous"),new Promise(((t,n)=>{r.onload=()=>{t(r)},r.onerror=(e,t,r,i,a)=>{n(a)},r.src=e}))})),at.apply(this,arguments)}class ot{constructor(e){var{rootEmSize:t=12,emSize:r=12,createCanvas:n=ot.createCanvas,createImage:i=ot.createImage,anonymousCrossOrigin:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.canvg=e,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=e.screen,this.rootEmSize=t,this.emSize=r,this.createCanvas=n,this.createImage=this.bindCreateImage(i,a),this.screen.wait(this.isImagesLoaded.bind(this)),this.screen.wait(this.isFontsLoaded.bind(this))}bindCreateImage(e,t){return"boolean"==typeof t?(r,n)=>e(r,"boolean"==typeof n?n:t):e}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){var{emSizeStack:e}=this;return e[e.length-1]}set emSize(e){var{emSizeStack:t}=this;t.push(e)}popEmSize(){var{emSizeStack:e}=this;e.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every((e=>e.loaded))}isFontsLoaded(){return this.fonts.every((e=>e.loaded))}createDocumentElement(e){var t=this.createElement(e.documentElement);return t.root=!0,t.addStylesFromStyleDefinition(),this.documentElement=t,t}createElement(e){var t=e.nodeName.replace(/^[^:]+:/,""),r=ot.elementTypes[t];return void 0!==r?new r(this,e):new Te(this,e)}createTextNode(e){return new je(this,e)}setViewBox(e){this.screen.setViewBox(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?it(Object(r),!0).forEach((function(t){(0,f.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):it(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({document:this},e))}}function st(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?st(Object(r),!0).forEach((function(t){(0,f.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):st(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}ot.createCanvas=function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,r},ot.createImage=function(e){return at.apply(this,arguments)},ot.elementTypes=nt;class ut{constructor(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.parser=new be(r),this.screen=new ge(e,r),this.options=r;var n=new ot(this,r),i=n.createDocumentElement(t);this.document=n,this.documentElement=i}static from(e,t){var r=arguments;return(0,i.Z)((function*(){var n=r.length>2&&void 0!==r[2]?r[2]:{},i=new be(n),a=yield i.parse(t);return new ut(e,a,n)}))()}static fromString(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=new be(r).parseFromString(t);return new ut(e,n,r)}fork(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ut.from(e,t,lt(lt({},this.options),r))}forkString(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ut.fromString(e,t,lt(lt({},this.options),r))}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}render(){var e=arguments,t=this;return(0,i.Z)((function*(){var r=e.length>0&&void 0!==e[0]?e[0]:{};t.start(lt({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},r)),yield t.ready(),t.stop()}))()}start(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{documentElement:t,screen:r,options:n}=this;r.start(t,lt(lt({enableRedraw:!0},n),e))}stop(){this.screen.stop()}resize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.documentElement.resize(e,t,r)}}var ct=r(94301),pt=r.n(ct);function ht(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return dt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ft(){return(ft=(0,i.Z)(o().mark((function e(t,r,n){var i,a,s,u,c,p,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,s=t.id,e.next=3,bt(document.getElementById(r),t);case 3:u=e.sent,c="<html>\n    <head>\n      <xml>\n        <x:ExcelWorkbook>\n          <x:ExcelWorksheets>\n            <x:ExcelWorksheet>\n              <x:Name>".concat("Sheet1",'</x:Name>\n              <x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions>\n            </x:ExcelWorksheet>\n          </x:ExcelWorksheets>\n        </x:ExcelWorkbook>\n      </xml>\n      <style type="text/css">').concat("table td div {\n    text-align: center;\n  }",'</style>\n    </head>\n    <body><table border="1" cellspacing="0">').concat(u,"</table></body>\n  </html>"),(p=document.createElement("a")).href="data:application/vnd.ms-excel;base64,"+Et(c),p.download=n("报表")+"-"+a+".xls",p.style.display="none",document.body.appendChild(p),p.click(),p.parentNode.removeChild(p),h=null===(i=l.app.context)||void 0===i?void 0:i.user,(0,l.api)({name:"report/report"}).fetch("/".concat(s),{method:"PATCH",body:JSON.stringify({exportUser:h,exportTime:moment().add(8,"hours")})}).then((function(){}));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mt(e){for(var t=e.toDataURL(),r=atob(t.split(",")[1]),n=[],i=0;i<r.length;i++)n.push(r.charCodeAt(i));var a=new File([new Uint8Array(n)],"head.png",{type:"image/png"}),o=new FormData;o.append("file",a);var s=(0,l.api)({name:"media"}).getHost();return pt()("".concat(s,"core/media/img"),{method:"POST",headers:d().omit((0,l.api)({name:"media"}).getHeaders(),"Content-Type"),body:o}).then((function(e){return e.json()}))}function vt(e,t,r){var n=document.createElement("img");return n.src=e,n.width=t,n.height=r,n}function gt(e){return yt.apply(this,arguments)}function yt(){return yt=(0,i.Z)(o().mark((function e(t){var r,n,i,a,s,u,c,p,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=document.createElement("canvas"),n=t.parentNode.parentNode.style.width,i=t.parentNode.parentNode.style.height,r.width=1.45*d().parseInt(n),r.height=1.5*d().parseInt(i),a=r.getContext("2d"),e.next=8,ut.from(a,t.outerHTML);case 8:return s=e.sent,e.next=11,s.render();case 11:return e.next=13,mt(r);case 13:return u=e.sent,c=u.url,p=location.origin+(0,l.config)("mediaUrl")+c,h=vt(p,n,i),e.abrupt("return",h);case 18:case"end":return e.stop()}}),e)}))),yt.apply(this,arguments)}function _t(e){var t,r=/url\(\s*?['"]?\s*?(\S+?)\s*?["']?\s*?\)/i;null===(t=e.querySelectorAll("*"))||void 0===t||t.forEach((function(e){var t,n=(null==e||null===(t=e.style)||void 0===t?void 0:t.getPropertyValue("background-image"))||"";if(r.exec(n)){var i=parseInt(e.style.width),a=1.5*parseInt(e.parentNode.style.height),o=n.substring(5,n.length-1);e.innerHTML='<img src="'.concat(location.origin+o,'" width="').concat(i,'" height="').concat(a,'" />')}}))}function bt(e,t){return xt.apply(this,arguments)}function xt(){return(xt=(0,i.Z)(o().mark((function e(t,r){var i,a,s,l,u,c,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.cloneNode(!0),a=(0,n.Z)(i.getElementsByTagName("svg")),s=ht(a),e.prev=3,s.s();case 5:if((l=s.n()).done){e.next=14;break}return u=l.value,e.next=9,gt(u);case 9:c=e.sent,u.parentNode.replaceChild(c,u);case 12:e.next=5;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),s.e(e.t0);case 19:return e.prev=19,s.f(),e.finish(19);case 22:return _t(i),p=wt(p=i.innerHTML,r),e.abrupt("return",p);case 26:case"end":return e.stop()}}),e,null,[[3,16,19,22]])})))).apply(this,arguments)}function Et(e){return window.btoa(unescape(encodeURIComponent(e)))}function wt(e,t){var r,n;null==t||null===(r=t.table)||void 0===r||null===(n=r.cellList)||void 0===n||n.forEach((function(t){var r,n,i,a;if("bind"===(null===(r=t.props)||void 0===r?void 0:r.cellType)&&"exportUser"===(null===(n=t.props)||void 0===n?void 0:n.bindValue)){var o,s="",u=null===(o=l.app.context)||void 0===o?void 0:o.user,c=e.split("<tr");null==c||c.forEach((function(e,r){if(r===t.row+1){var n="",i=e.split("<td");null==i||i.forEach((function(e,r){var i,a;r===t.col+1?n+=' id="1-4" colspan="1" rowspan="1" class="text" style="width: 366.75px;"><div class="" contenteditable="false" style="width: 244.5px; height: 30px; overflow:'+'hidden; white-space: pre-wrap;">'.concat(null!==(i=null!==(a=null==u?void 0:u.name)&&void 0!==a?a:null==u?void 0:u.username)&&void 0!==i?i:"","</div></td><td"):n+=e+"<td"})),s+=n.substring(0,n.length-3)+"<tr"}else s+=e+"<tr"})),e=s.substring(0,s.length-3)}else if("bind"===(null===(i=t.props)||void 0===i?void 0:i.cellType)&&"exportTime"===(null===(a=t.props)||void 0===a?void 0:a.bindValue)){var p="",h=moment().format("YYYY-MM-DD HH:mm:ss"),d=e.split("<tr");null==d||d.forEach((function(e,r){if(r===t.row+1){var n="",i=e.split("<td");null==i||i.forEach((function(e,r){r===t.col+1?n+=' id="1-4" colspan="1" rowspan="1" class="text" style="width: 366.75px;"><div class="" contenteditable="false" style="width: 244.5px; height: 30px; overflow:'+'hidden; white-space: pre-wrap;">'.concat(h,"</div></td><td"):n+=e+"<td"})),p+=n.substring(0,n.length-3)+"<tr"}else p+=e+"<tr"})),e=p.substring(0,p.length-3)}}));var i=[],a=e,o=e.split("display: none;");if(o.length>1){i.push(o[0].substring(0,o[0].lastIndexOf("<td")));for(var s=1;s<o.length-1;s++)i.push(o[s].substring(o[s].indexOf("</td>")+5,o[s].lastIndexOf("<td")));i.push(o[o.length-1].substring(o[o.length-1].indexOf("</td>")+5)),a=i.reduce((function(e,t){return e+t}),"")}i=[(o=a.split('<tr style="height: '))[0]];for(var u=1;u<o.length;u++)i.push('<tr style="height: '+1.5*o[u].split('px;"><td')[0]+'px;"><td'+o[u].split('px;"><td')[1]);return a=(a=(a=i.reduce((function(e,t){return e+t}),"")).replace(/class\=\"text\"\ style\=\"/g,'style="vnd.ms-excel.numberformat:@;')).replace(/class\=\"number\-[0-9]\"\ style\=\"/g,(function(e,t){var r,n,i=null===(r=e.split("-"))||void 0===r||null===(n=r[1])||void 0===n?void 0:n[0],a=new Array(parseInt(i)).fill("0");return'style="vnd.ms-excel.numberformat:#,##0.'.concat(a,";")})),a}const Ot=function(e){var t=e.loading,r=e.report,n=e.rows,i=(e.getRows,useI18n().t),a=!(t||!n);return c().createElement(s.Button,{onClick:function(){return function(e,t,r){return ft.apply(this,arguments)}(r,"tableRender",i)},disabled:!a},c().createElement(p.Icon,{name:"download"}),i("导出"))}},28864:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>g,f7:()=>v,jF:()=>m});var n=r(87462),i=r(44925),a=r(81821),o=r(48488),s=r.n(o),l=r(87363),u=r.n(l),c=r(3204),p=r(95907),h=["loadReport","report","rows"],d=function(e){var t=e.input,r=t.value,n=t.onChange;return u().createElement(a.Space,{direction:"vertical"},u().createElement(a.DatePicker,{onChange:function(e,t){if(e){var r=s()(e._d).format("E"),i=s()(e._d).subtract(r-1,"days").format("YYYY-MM-DD HH:mm:ss");n({time:s()(i).startOf("day").format("YYYY-MM-DD HH:mm:ss")})}},picker:"week",allowClear:!1,value:r&&r.time?s()(r.time,"YYYY-MM-DD HH:mm:ss"):""}))},f=function(e){var t=e.input,r=t.value,n=t.onChange,i=e.interval,o="years"===i?"year":"months"===i?"month":"";return u().createElement(a.Space,null,u().createElement(a.DatePicker,{picker:o,onChange:function(e,t){n(t?{time:t}:{time:s()().format("YYYY-MM-DD")})},value:s()(null==r?void 0:r.time)}))},m=function(e){return"weeks"===e.interval?u().createElement(d,e):u().createElement(f,e)},v=function(e){var t;if("weeks"==e.interval){var r=s()().format("E"),n=s()().subtract(r-1,"days").format("YYYY-MM-DD HH:mm:ss");t={time:{time:s()(n).startOf("day").format("YYYY-MM-DD HH:mm:ss")}}}else t={time:{time:s()().format("YYYY-MM-DD")}};return t};const g=function(e){var t=e.loadReport,r=e.report,o=(e.rows,(0,i.Z)(e,h)),s=useI18n().t,l=u().useMemo((function(){var e;return e={type:"object",properties:{department:{type:"array",title:_r("部门"),fieldType:"tableData",field:{func:"dataAuth",placeholder:_r("选择部门"),style:{minWidth:200}},items:{}},time:{type:"object",title:s("选定时间")}},required:["time"],form:["department",{key:"time",component:function(e){return u().createElement(m,(0,n.Z)({interval:r.interval},e))}}]},e}),[r]),d=function(e){var t=e.children,r=e.invalid,n=e.handleSubmit;return u().createElement(a.Form,{layout:"inline"},t&&t.map((function(e){return u().createElement("div",{style:{display:"inline-block",minWidth:150}},e)})),u().createElement(a.Form.Item,null,u().createElement(a.Button,{disabled:r,onClick:n,type:"primary"},s("查询"))))},f=v(r);return u().useEffect((function(){t(f)}),[r]),u().useMemo((function(){return u().createElement(c.SchemaForm,(0,n.Z)({formKey:"reportFilterForm",schema:l,component:d,group:(0,p.C)("Form.InlineGroup"),initialValues:f,onSubmit:t},o))}),[r])}},90524:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(81821),i=r(87363),a=r.n(i),o=r(53078),s=r(95907);const l=function(e){var t=e.loading,r=e.report,i=e.rows,l=!(t||void 0!==i&&!i);return a().createElement(n.Button,{onClick:function(){var e,t=document.getElementById("tableRender"),n=window.open("","newwindow","height=700, width=1600, top=100, left=100, toolbar=no, menubar=no, scrollbars=no, resizable=no,location=no, status=no");n.document.write('<style type="text/css">\n          html,body{-webkit-text-size-adjust:none;}\n          h2{text-align: center;}\n          table{border-collapse: collapse; border-spacing: 0; color: #000; width: 100%; zoom: 0.65;}\n          table td{border: 1px solid #000; padding: 4px 8px; vertical-align: middle; text-align: center; }\n          @media print { body { -webkit-print-color-adjust: exact; } }\n      </style>'),n.document.write(function(e,t){var r,n;null==t||null===(r=t.table)||void 0===r||null===(n=r.cellList)||void 0===n||n.forEach((function(t){var r,n,i,a;if("bind"===(null===(r=t.props)||void 0===r?void 0:r.cellType)&&"printUser"===(null===(n=t.props)||void 0===n?void 0:n.bindValue)){var s,l="",u=null===(s=o.app.context)||void 0===s?void 0:s.user,c=e.split("<tr");null==c||c.forEach((function(e,r){if(r===t.row+1){var n="",i=e.split("<td");null==i||i.forEach((function(e,r){var i,a;r===t.col+1?n+=' id="1-4" colspan="1" rowspan="1" class="text" style="width: 366.75px;"><div class="" contenteditable="false" style="width: 244.5px; height: 30px; overflow:'+'hidden; white-space: pre-wrap;">'.concat(null!==(i=null!==(a=null==u?void 0:u.name)&&void 0!==a?a:null==u?void 0:u.username)&&void 0!==i?i:"","</div></td><td"):n+=e+"<td"})),l+=n.substring(0,n.length-3)+"<tr"}else l+=e+"<tr"})),e=l.substring(0,l.length-3)}else if("bind"===(null===(i=t.props)||void 0===i?void 0:i.cellType)&&"printTime"===(null===(a=t.props)||void 0===a?void 0:a.bindValue)){var p="",h=moment().format("YYYY-MM-DD HH:mm:ss"),d=e.split("<tr");null==d||d.forEach((function(e,r){if(r===t.row+1){var n="",i=e.split("<td");null==i||i.forEach((function(e,r){r===t.col+1?n+=' id="1-4" colspan="1" rowspan="1" class="text" style="width: 366.75px;"><div class="" contenteditable="false" style="width: 244.5px; height: 30px; overflow:'+'hidden; white-space: pre-wrap;">'.concat(h,"</div></td><td"):n+=e+"<td"})),p+=n.substring(0,n.length-3)+"<tr"}else p+=e+"<tr"})),e=p.substring(0,p.length-3)}}));var i=[],a=e,s=e.split("display: none;");if(s.length>1){i.push(s[0].substring(0,s[0].lastIndexOf("<td")));for(var l=1;l<s.length-1;l++)i.push(s[l].substring(s[l].indexOf("</td>")+5,s[l].lastIndexOf("<td")));i.push(s[s.length-1].substring(s[s.length-1].indexOf("</td>")+5)),a=i.reduce((function(e,t){return e+t}),"")}if(i=[],(s=a.split("background-color:")).length>1){for(var u=0;u<s.length-1;u++)i.push(s[u].replace(/(.*)(\<td)/,'$1<td style="background-color:'.concat(s[u+1].substring(0,18),'"')));i.push(s[s.length-1]),a=i.reduce((function(e,t){return e+t}),"")}if(i=[(s=a.split('<div style="width: '))[0]],s.length>1){for(var c=1;c<s.length;c++){var p=s[c].indexOf("px"),h='<div style="width: '+parseInt(s[c].slice(0,p))/2+s[c].slice(p);i.push(h)}a=i.reduce((function(e,t){return e+t}),"")}return a}("<table>"+t.innerHTML+"</table>",r)),n.document.close(),n.print(),n.close();var i=null===(e=o.app.context)||void 0===e?void 0:e.user;(0,o.api)({name:"report/report"}).fetch("/".concat(null==r?void 0:r.id),{method:"PATCH",body:JSON.stringify({printUser:i,printTime:moment().add(8,"hours")})}).then((function(){}))},disabled:!l},a().createElement(s.Icon,{name:"print"})," ",_t1("打印"))}},72077:(e,t,r)=>{"use strict";r.d(t,{Im:()=>w,ZP:()=>T,_B:()=>E,eH:()=>x,f7:()=>O});var n=r(87462),i=r(4942),a=r(44925),o=r(81821),s=r(48488),l=r.n(s),u=r(87363),c=r.n(u),p=r(53078),h=r(3204),d=r(95907),f=r(12611),m=r.n(f),v=["input","field","tableInfo"],g=["loadReport","report","rows"];function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b=o.DatePicker.RangePicker,x=function(e){var t=e.input,r=e.field,i=e.tableInfo,s=(0,a.Z)(e,v);if(r.tableData&&r.tableData.name)return t.onChange(r.tableData),c().createElement(o.Input,{disabled:!0,value:r.tableData.name});var l=(0,p.use)("form",(function(e){return{department:e.values&&e.values.department}})).department;return c().createElement(d.C,(0,n.Z)({is:"Common.SelectTableRecord",input:t,field:_(_({},r),{},{department:l}),table:null==i?void 0:i.id},s))},E=function(e){var t,r,n=e.input,i=n.value,a=n.onChange,s=e.report.startTime;return s&&4===s.split("-").length&&(t=s.split("-")[3],r=s.split("-")[2]),c().createElement(c().Fragment,null,c().createElement(o.Space,{direction:"vertical",size:12},c().createElement(b,{picker:"week",onChange:function(e,n){if(e&&m().isArray(e)&&e.length){var i=l()(e[0]._d).format("E"),o=l()(e[1]._d).format("E");if(t&&r){var s=l()(e[0]._d).add(parseInt(t)-i+1,"days").format("YYYY-MM-DD"),u=l()(e[1]._d).add(parseInt(t)-o+1,"days").format("YYYY-MM-DD");a({gte:s+" "+r,lte:u+" "+r})}else{var c=l()(e[0]._d).subtract(i-1,"days").format("YYYY-MM-DD HH:mm:ss"),p=l()(e[1]._d).add(7-o,"days").format("YYYY-MM-DD HH:mm:ss");a({gte:l()(c).startOf("day").format("YYYY-MM-DD HH:mm:ss"),lte:l()(p).endOf("day").format("YYYY-MM-DD HH:mm:ss")})}}else{var h=l()().format("E"),d=l()().add(7-h,"days").format("YYYY-MM-DD HH:mm:ss"),f=l()(new Date).subtract(1,"months").format("YYYY-MM-DD HH:mm:ss"),v=l()(f,"YYYY-MM-DD HH:mm:ss").format("E"),g=l()(f).subtract(v-1,"days").format("YYYY-MM-DD HH:mm:ss"),y=l()(d).endOf("day").format("YYYY-MM-DD HH:mm:ss"),_=l()(g).startOf("day").format("YYYY-MM-DD HH:mm:ss");a({gte:_,lte:y})}},allowClear:!1,placeholder:[_t2("开始日期"),_t2("结束日期")],value:[i&&i.gte?l()(i.gte,"YYYY-MM-DD HH:mm:ss"):"",i&&i.lte?l()(i.lte,"YYYY-MM-DD HH:mm:ss"):""]})))},w=function(e){var t=e.input,r=t.value,n=t.onChange,i=e.report,a="years"===i.interval?"year":"months"===i.interval?"month":"date",s="hours"===i.interval;return c().createElement(c().Fragment,null,c().createElement(o.Space,{direction:"vertical",size:12},c().createElement(b,{picker:a,showTime:s,onChange:function(e,t){if(e&&t.length){var r=t[1];n({gte:t[0],lte:r})}else{var a,o,s=l()();"months"===i.interval?(a=s.format("YYYY-MM"),o=s.add(-1,"years").format("YYYY-MM")):"years"===i.interval?(a=s.format("YYYY"),o=s.add(-3,"years").format("YYYY")):"days"===i.interval?(a=s.format("YYYY-MM-DD"),o=s.add(-1,"M").format("YYYY-MM-DD")):"hours"===i.interval&&(a=s.format("YYYY-MM-DD HH:mm:ss"),o=s.add(-1,"days").format("YYYY-MM-DD HH:mm:ss")),n({lte:a,gte:o})}},placeholder:[_t2("开始日期"),_t2("结束日期")],value:[r&&r.gte?l()(r.gte,s?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD"):"",r&&r.lte?l()(r.lte,s?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD"):""]})))},O=function(e){var t,r,n,i,a,o=l()();if("months"==e.interval)t=o.format("YYYY-MM"),r=o.add(-1,"years").format("YYYY-MM");else if("years"==e.interval)t=o.format("YYYY"),r=o.add(-3,"years").format("YYYY");else if("days"==e.interval)t=o.format("YYYY-MM-DD"),r=o.add(-1,"M").format("YYYY-MM-DD");else if("hours"==e.interval)t=o.format("YYYY-MM-DD HH:mm:ss"),r=o.add(-1,"days").format("YYYY-MM-DD HH:mm:ss");else if("weeks"==e.interval)if(n=o.format("E"),e.startTime&&4===e.startTime.split("-").length){var s=e.startTime.split("-")[3],u=e.startTime.split("-")[2];r=l()().add(parseInt(s)-n-34,"days").format("YYYY-MM-DD")+" "+u,t=l()().add(parseInt(s)-n+1,"days").format("YYYY-MM-DD")+" "+u}else{a=l()().add(7-n,"days").format("YYYY-MM-DD HH:mm:ss");var c=l()(new Date).subtract(1,"months").format("YYYY-MM-DD HH:mm:ss"),p=l()(c,"YYYY-MM-DD HH:mm:ss").format("E");i=l()(c).subtract(p-1,"days").format("YYYY-MM-DD HH:mm:ss"),t=l()(a).endOf("day").format("YYYY-MM-DD HH:mm:ss"),r=l()(i).startOf("day").format("YYYY-MM-DD HH:mm:ss")}return{range:{lte:t,gte:r}}};const T=function(e){var t=e.loadReport,r=e.report,i=(e.rows,(0,a.Z)(e,g)),s=useI18n().t,l=c().useMemo((function(){return"weeks"==r.interval?{type:"object",properties:{department:{type:"array",title:_r("部门"),fieldType:"tableData",field:{func:"dataAuth",placeholder:_r("选择部门"),style:{minWidth:200}},items:{}},node:{type:"object",title:s("设备"),field:{placeholder:s("请选择设备")},properties:{}},range:{type:"object",title:s("时间范围"),properties:{}}},required:["range"],form:["department",{key:"node",component:x,tableInfo:r.tableInfo,tableData:r.tableData},{key:"range",component:E,report:r}]}:{type:"object",properties:{department:{type:"array",title:_r("部门"),fieldType:"tableData",field:{func:"dataAuth",placeholder:_r("选择部门"),style:{minWidth:200}},items:{}},node:{type:"object",title:s("设备"),field:{placeholder:s("请选择设备")},properties:{}},range:{type:"object",title:s("时间范围"),properties:{}}},required:["range"],form:["department",{key:"node",component:x,tableInfo:r.tableInfo,tableData:r.tableData},{key:"range",type:"filter_datetime",attrs:{opens:"left",maxDate:new Date},report:r,component:w}]}}),[r]),u=function(e){var t=e.children,r=e.invalid,n=e.handleSubmit;return e.submitSucceeded,e.submitting,e.isCreate,c().createElement(o.Form,{layout:"inline"},t&&t.map((function(e){return c().createElement("div",{style:{display:"inline-block",minWidth:150}},e)})),c().createElement(o.Form.Item,null,c().createElement(o.Button,{disabled:r,onClick:n,type:"primary"},s("查询"))))},p=O(r);return c().useEffect((function(){t(p)}),[r]),c().useMemo((function(){return c().createElement(h.SchemaForm,(0,n.Z)({formKey:"reportFilterForm",schema:l,component:u,group:(0,d.C)("Form.InlineGroup"),initialValues:p,onSubmit:t},i))}),[r])}},57810:(e,t,r)=>{"use strict";r.r(t),r.d(t,{CanEditReportBtn:()=>I,ReportBaseView:()=>L,ReportPage:()=>R,default:()=>N});var n=r(70885),i=r(4942),a=r(42982),o=r(87363),s=r.n(o),l=r(53078),u=r(95907),c=r(12611),p=r.n(c),h=r(48488),d=r.n(h),f=r(81821),m=r(75618),v=r(90524),g=r(28864),y=r(72077),b=r(41977),x=r(71031),E=r(49686),w=r(44648),O=r(16640),T=r(82846);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var M=f.Tabs.TabPane,P=function(e,t){var r,n,i="空",a=null===(r=e.filterValues)||void 0===r?void 0:r.time,o=null===(n=e.filterValues)||void 0===n?void 0:n.range;if(a&&_.isString(a))"years"===t?i=a.substring(0,4)+"年":"months"===t?i=a.substring(0,7):"weeks"===t?i=a.substring(0,4)+" "+moment(a).week()+"周":"days"===t?i=a.substring(0,10):"hours"===t&&(i=a.substring(0,13)+"时");else if(a&&a.time)i=a.time;else if(o){var l,u;if("years"===t)i=(null===(l=o.gte)||void 0===l?void 0:l.substring(0,4))+" 至 "+(null===(u=o.lte)||void 0===u?void 0:u.substring(0,4));else if("months"===t){var c,p;i=(null===(c=o.gte)||void 0===c?void 0:c.substring(0,7))+" 至 "+(null===(p=o.lte)||void 0===p?void 0:p.substring(0,7))}else if("weeks"===t){var h,d;i=(null===(h=o.gte)||void 0===h?void 0:h.substring(0,4))+" "+moment(o.gte).week()+"周 至 "+(null===(d=o.lte)||void 0===d?void 0:d.substring(0,4))+" "+moment(o.lte).week()+"周"}else if("days"===t){var f,m;i=(null===(f=o.gte)||void 0===f?void 0:f.substring(0,10))+" 至 "+(null===(m=o.lte)||void 0===m?void 0:m.substring(0,10))}else if("hours"===t){var v,g;i=(null===(v=o.gte)||void 0===v?void 0:v.substring(0,13))+"时 至 "+(null===(g=o.lte)||void 0===g?void 0:g.substring(0,13))+"时"}}else{var y,b,x,E,w,O,T=" 资产："+((null===(y=e.filterValues)||void 0===y||null===(b=y.node)||void 0===b?void 0:b.name)||"空")+" 部门："+((null===(x=e.filterValues)||void 0===x||null===(E=x.department)||void 0===E?void 0:E.name)||"空");i=s().createElement("div",null,null===(w=i.split("至"))||void 0===w?void 0:w[0],s().createElement("br",null),"至",null===(O=i.split("至"))||void 0===O?void 0:O[1],s().createElement("br",null),T)}return i};const D=function(e){var t=e.report,r=e.setReport,i=s().useState(!1),a=(0,n.Z)(i,2),o=a[0],u=a[1],c=s().useState([]),p=(0,n.Z)(c,2),h=p[0],d=p[1];s().useEffect((function(){d(null==t?void 0:t.dataList)}),[JSON.stringify(null==t?void 0:t.dataList)]);var m=function(e){return[{title:"行号",key:"row",dataIndex:"row",width:100,render:function(e){return e+1}},{title:"列号",key:"col",dataIndex:"col",width:100,render:function(e){return e+1}},{title:"内容",key:"text",dataIndex:"text"},{title:"",key:"action",width:150,render:function(t,r,n){return s().createElement(f.Button,{type:"primary",size:"small",onClick:function(){d((function(t){var r,i,a=_.cloneDeep(t);return null!==(r=a[e])&&void 0!==r&&null!==(i=r.data)&&void 0!==i&&i[n]&&a[e].data.splice(n,1),a}))}},"删除")}}]};return"true"!==t.canEdit?null:s().createElement(s().Fragment,null,s().createElement(T.HasPermission,{permission:"report.dataEdit"},s().createElement(f.Button,{onClick:function(){return u(!0)}},"记录")),s().createElement(f.Modal,{title:"编辑记录",visible:o,onCancel:function(){return u(!1)},onOk:function(){(0,l.api)({name:"report/report"}).fetch("/".concat(t.id),{method:"PATCH",body:JSON.stringify(C(C({},t),{},{dataList:h}))}).then((function(){u(!1),f.message.success("保存成功"),r(C(C({},t),{},{dataList:h}))}))},width:"70%"},s().createElement(f.Tabs,{defaultActiveKey:0},null==h?void 0:h.map((function(e,r){return s().createElement(M,{tab:P(e,null==t?void 0:t.interval),key:r,style:{height:"450px"}},s().createElement(f.Button,{type:"primary",size:"small",onClick:function(){return function(e){d((function(t){var r=_.cloneDeep(t);return r[e]&&r.splice(e,1),r}))}(r)},style:{marginBottom:10}},"删除全部"),e.data.length>0&&s().createElement(f.Table,{columns:m(r),dataSource:e.data,size:"small",pagination:!1,scroll:{y:400}}))})))))};function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var I=function(e){var t=e.setEdit,r=e.edit,n=e.report,i=e.filterValues,o=e.editData,u=e.setReport,c=useI18n().t;return r?s().createElement(f.Button,{type:"primary",onMouseUp:function(){var e;if(0===o.length)return f.message.success("保存成功"),void t(!1);(0,l.api)({name:"report/report"}).fetch("/".concat(null===(e=n)||void 0===e?void 0:e.id),{method:"GET"}).then((function(e){var r=(n=e.json).dataList?(0,a.Z)(n.dataList):[],s=-1;r.forEach((function(e,t){(0,w.Al)(e.filterValues,i,n)&&(s=t)})),-1===s?r.push({filterValues:i,data:o}):r[s]={filterValues:i,data:o},(0,l.api)({name:"report/report"}).fetch("/".concat(n.id),{method:"PATCH",body:JSON.stringify(k(k({},n),{},{dataList:r}))}).then((function(){f.message.success(c("保存成功")),u(k(k({},n),{},{dataList:r}))})),t(!1)})).catch((function(e){console.error(e),f.message.error("保存失败")}))}},c("保存")):s().createElement(f.Button,{onClick:function(){return t(!0)}},c("编辑"))},R=function(e){var t=(0,l.use)("report.data",e),r=t.rows,i=void 0===r?{}:r,a=t.loading,o=t.loadReport,c=t.report,h=s().useState(c),_=(0,n.Z)(h,2),x=_[0],T=_[1],A=useI18n().t,C=l.app.get("modelReports")[x.name]||m.Z,M=s().useState(null),P=(0,n.Z)(M,2),S=P[0],k=P[1],R=s().useState(!1),L=(0,n.Z)(R,2),N=L[0],j=L[1],Y=s().useState({}),B=(0,n.Z)(Y,2),V=B[0],U=B[1],H=s().useRef(null),F=s().useState(),Z=(0,n.Z)(F,2),W=Z[0],q=Z[1],K=s().useState([]),z=(0,n.Z)(K,2),X=z[0],G=z[1];s().useEffect((function(){var e,t;null==x||null===(e=x.dataList)||void 0===e||e.forEach((function(e){(0,w.Al)(e.filterValues,V,x)&&(t=!0,G(null==e?void 0:e.data)),t||G([])}))}),[JSON.stringify(V)]);var $=function(){var e=p().cloneDeep(x);e.data=i,e.name=e.name+A("副本")+d()().format("YYYY-MM-DD HH:mm:ss"),(0,l.api)({name:"report/reportCopy"}).fetch("",{method:"POST",body:JSON.stringify(e)}).then((function(e){var t=e.json;t&&t.InsertedID&&(k(t.InsertedID),f.message.success(A("报表拷贝副本成功")))}))},Q=function(e){U(e),o(e),q(!1)},J=function(){return H.current.getData()},ee=function(){return"true"===x.canEdit?s().createElement(I,{setEdit:j,edit:N,report:x,filterValues:V,editData:X,setReport:T}):S?s().createElement(f.Button,{onClick:function(){return l.app.go("/app/model/reportCopy/".concat(S,"/view"))}},A("查看")):s().createElement(f.Button,{disabled:!x.table,onClick:$},A("数据拷贝"))},te=function(){return"free"===x.reportType?s().createElement(b.ZP,{report:x,loadReport:Q,loading:a}):"node"==x.type?s().createElement(g.ZP,{report:x,loadReport:Q,loading:a}):s().createElement(y.ZP,{report:x,loadReport:Q,loading:a})},re=s().createElement(f.Menu,null,s().createElement(f.Menu.Item,{key:"1"},s().createElement(ee,null)),N?null:s().createElement(s().Fragment,null,s().createElement(f.Menu.Item,{key:"2"},s().createElement(C,{report:x,rows:i,getRows:J})),s().createElement(f.Menu.Item,{key:"3"},s().createElement(v.Z,{report:x,rows:i})),s().createElement(f.Menu.Item,{key:"4"},s().createElement(D,{report:x,setReport:T}))));return s().createElement(u.Page,{title:e.preview?null:"front"===(null===l.app||void 0===l.app?void 0:l.app.module)?s().createElement("div",null," ",x.name):s().createElement("div",null,s().createElement(u.Icon,{type:"arrow-left",onClick:function(){return history.back()}})," ",x.name),actions:s().createElement("div",{style:{display:"inline-flex"}},(0,l.config)("isMobile")?s().createElement(s().Fragment,null,a||e.preview?s().createElement(f.Button,{onClick:function(){return q(!0)},icon:p().isEmpty(V)?s().createElement(O.FilterOutlined,null):s().createElement(O.FilterTwoTone,{twoToneColor:"#52c41a"})},A("过滤")):s().createElement(f.Dropdown.Button,{onClick:function(){return q(!0)},overlay:re},p().isEmpty(V)?s().createElement(O.FilterOutlined,null):s().createElement(O.FilterTwoTone,{twoToneColor:"#52c41a"}),A("过滤"))):s().createElement(s().Fragment,null,te(),a||e.preview?null:s().createElement(f.Button.Group,null,s().createElement(ee,null),N?null:s().createElement(s().Fragment,null,s().createElement(C,{report:x,rows:i,getRows:J}),s().createElement(v.Z,{report:x,rows:i})))))},s().createElement("div",{style:{position:"relative",minHeight:300}},(0,l.config)("isMobile")?s().createElement(f.Drawer,{placement:"top",closable:!1,onClose:function(){return q(!1)},visible:W,height:W?"auto":0,getContainer:!1,style:{position:"absolute"}},te()):null,s().createElement(E.Z,{ref:H,report:x,rows:i,loading:a,setEditData:G,setNewRows:!0,edit:N,editData:X})))},L=function(e){var t=s().useState({}),r=(0,n.Z)(t,2),i=r[0],a=r[1],o=s().useState(!1),c=(0,n.Z)(o,2),p=c[0],h=c[1],d=e.id;return s().useEffect((function(){d&&(h(!0),(0,l.api)({name:"report/report"}).fetch("/".concat(d)).then((function(e){h(!1),a(e.json)})))}),[d]),p?s().createElement(u.Loading,null):s().createElement(x.k,{report:i},s().createElement(R,e))};const N=function(e){var t=(0,l.use)("params").id;return s().createElement(L,{id:t})}},85826:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(70885),i=r(87363),a=r.n(i),o=r(48488),s=r.n(o),l=r(81821),u=r(53078);const c=function(e){var t,r,o,c,p,h,d=e.input,f=e.intervalP,m=e.field,v=useI18n().t,g=(0,i.useState)(!1),y=(0,n.Z)(g,2),_=y[0],b=y[1],x=(0,u.use)("form",(function(e){return{interval:e.values&&e.values.interval,outTime:e.values&&e.values.outTime}})),E=x.interval,w=x.outTime;f&&(E=null!=w&&null!==(p=w.split("-"))&&void 0!==p&&p[2]?null==w||null===(h=w.split("-"))||void 0===h?void 0:h[2]:f);var O;O=d.value&&1===d.value.split("-").length?s()(d.value).format("HH:mm:ss"):d.value.split("-")[2];var T=null!==(t=d.value.split("-")[1])&&void 0!==t?t:"",A=null!==(r=d.value.split("-")[3])&&void 0!==r?r:"",C=null!==(o=d.value.split("-")[0])&&void 0!==o?o:"",M=null!==(c=d.value.split("-")[4])&&void 0!==c?c:"",P=function(e,t){var r=[C,T,O,A,M],n=null!=t?t:"";"m"===e?r[0]=n:"d"===e?r[1]=n:"t"===e?r[2]=n:"t1"===e?r[2]="00:"+n:"w"===e?r[3]=n:"next"===e&&(r[4]=n),d.onChange(r.join("-"))};return a().createElement(a().Fragment,null,"endTime"===(null==m?void 0:m.key)?a().createElement(l.Select,{style:{width:"50%"},value:M,onChange:function(e){return P("next",e)}},a().createElement(Option,{key:"0",value:"0"},v("当前周期")),a().createElement(Option,{key:"1",value:"1"},v("下一周期"))):null,"years"===E?a().createElement(l.Select,{style:{width:"50%"},allowClear:!0,value:C,placeholder:"",onChange:function(e){return P("m",e)}},Array(12).fill(0).map((function(e,t){return a().createElement(Option,{key:t,value:t+1},t+1+v("月"))}))):null,"years"===E||"months"===E?a().createElement(l.Select,{style:{width:"50%"},allowClear:!0,value:T,placeholder:"",onChange:function(e){return P("d",e)}},Array(f?31:28).fill(0).map((function(e,t){return a().createElement(Option,{key:t,value:t+1},t+1+v("日"))}))):null,"weeks"===E?a().createElement(l.Select,{style:{width:"50%"},allowClear:!0,value:A,placeholder:"",onChange:function(e){return P("w",e)}},[v("周一"),v("周二"),v("周三"),v("周四"),v("周五"),v("周六"),v("周日")].map((function(e,t){return a().createElement(Option,{key:t,value:t.toString()},e)}))):null,"years"===E||"months"===E||"days"===E||"weeks"===E?a().createElement(a().Fragment,null,a().createElement(l.TimePicker,{allowClear:!0,style:{width:"50%"},value:O?s()(O,"HH:mm:ss"):null,open:_,onOpenChange:b,onChange:function(e,t){return P("t",t)}})):null,"hours"!==E&&E?null:a().createElement(a().Fragment,null,a().createElement(l.TimePicker,{allowClear:!0,style:{width:"50%"},value:O?s()(O,"HH:mm:ss"):null,format:"mm:ss",open:_,onOpenChange:b,onChange:function(e,t){P("t1",t)}})))}},41081:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(42982),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4942),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(15861),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(70885),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(64687),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(87363),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),moment__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(48488),moment__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__),lodash__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(12611),lodash__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_4__),xadmin__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(53078),xadmin__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(xadmin__WEBPACK_IMPORTED_MODULE_5__),antd__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(81821),antd__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_6__),_components_ReportContext__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(71031),_tableEditor_handsontable_utils_historyDataDealer__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(261),_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(44648);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var convertField=function(e){return e.formula&&""!==e.formula?e.formula:e.variable&&""!==e.variable?e.conMode?"".concat(e.conMode,"(").concat(e.variable,")"):"MEAN(".concat(e.variable,")"):"MEAN(NULL)"},getTimeList=function getTimeList(time,time2,acTime,cellList,report){var resultList=[];return cellList&&cellList.length>0&&cellList.forEach((function(cell){if(cell.props&&"time"===cell.props.cellType){var _freeTimeDealer=freeTimeDealer(time,time2,acTime,cell.props,report),startTimeStr=_freeTimeDealer.startTimeStr,endTimeStr=_freeTimeDealer.endTimeStr,format=cell.props.format||"YYYY-MM-DD HH:mm:ss",result=[moment__WEBPACK_IMPORTED_MODULE_3___default()(startTimeStr).format(format)],gI=cell.props.groupInterval;if(gI&&gI.split("-")[0]&&gI.split("-")[1])for(var obj={y:"years",mo:"months",d:"days",h:"hours",w:"weeks",m:"minutes"},num=parseInt(gI.split("-")[0]),interval=obj[gI.split("-")[1]],nextTime=moment__WEBPACK_IMPORTED_MODULE_3___default()(startTimeStr).add(num,interval),i=0;i<1e5&&nextTime<=moment__WEBPACK_IMPORTED_MODULE_3___default()(endTimeStr);i++)result.push(nextTime.format(format)),nextTime=moment__WEBPACK_IMPORTED_MODULE_3___default()(nextTime).add(num,interval);else result.push(moment__WEBPACK_IMPORTED_MODULE_3___default()(endTimeStr).format(format));if(cell.props.dealScript){var item=result;eval(cell.props.dealScript)}"down"===cell.props.sortMode&&(result=lodash__WEBPACK_IMPORTED_MODULE_4___default().reverse(result)),resultList.push(result)}})),resultList},freeTimeDealer=function(e,t,r,n,i){var a,o,s,l,u,c=e,p=null!==(a=null===(o=n.outTime)||void 0===o||null===(s=o.split("-"))||void 0===s?void 0:s[2])&&void 0!==a?a:i.interval;if(n.outTime){var h=n.outTime.split("-"),d=(0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__.Z)(h,2),f=d[0],m=void 0===f?"this":f,v=d[1],g=void 0===v?"0":v;if(null!=r&&r[0])return{startTimeStr:r[0],endTimeStr:r[1]};"before"===m?c=moment__WEBPACK_IMPORTED_MODULE_3___default()(e).subtract(parseInt(g),p):"after"===m&&(c=moment__WEBPACK_IMPORTED_MODULE_3___default()(e).add(parseInt(g),p))}var y=moment__WEBPACK_IMPORTED_MODULE_3___default()(c).daysInMonth(),_=moment__WEBPACK_IMPORTED_MODULE_3___default()(c).startOf(p.substring(0,p.length-1)).format("YYYY-MM-DD HH:mm:ss");if(n.startTime){var b=n.startTime.split("-"),x=(0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__.Z)(b,4),E=x[0],w=x[1],O=x[2],T=x[3];if(""===E&&(E="1"),""===w&&(w="1"),parseInt(w)>y&&(w=y.toString()),""===O&&(O="00:00:00"),""===T&&(T="0"),"days"===p)_=_.substring(0,11)+O;else if("hours"===p)_="01:00:00"===O?moment__WEBPACK_IMPORTED_MODULE_3___default()(_).add(1,"h").format("YYYY-MM-DD HH")+":00:00":_.substring(0,14)+O.substring(3);else if("months"===p)_=_.substring(0,8)+w+" "+O;else if("years"===p)_=_.substring(0,5)+E+"-"+w+" "+O;else if("weeks"===p&&T){var A=parseInt(moment__WEBPACK_IMPORTED_MODULE_3___default()(c).format("E"));_=(parseInt(T)+1-A<0?moment__WEBPACK_IMPORTED_MODULE_3___default()(c).subtract(A-parseInt(T)-1,"days").format("YYYY-MM-DD HH:mm:ss"):moment__WEBPACK_IMPORTED_MODULE_3___default()(c).add(parseInt(T)+1-A,"days").format("YYYY-MM-DD HH:mm:ss")).substring(0,11)+O}}var C=moment__WEBPACK_IMPORTED_MODULE_3___default()(c).endOf(p.substring(0,p.length-1)).format("YYYY-MM-DD HH:mm:ss");if(n.endTime&&"--"!==n.endTime){var M=n.endTime.split("-"),P=(0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__.Z)(M,5),D=P[0],S=P[1],k=P[2],I=P[3],R=P[4];if(""===D&&(D="12"),""===S&&(S=y.toString()),parseInt(S)>y&&(S=y.toString()),""===k&&(k="23:59:59"),""===I&&(I="6"),"days"===p)C=C.substring(0,11)+k;else if("hours"===p)C="01:00:00"===k?moment__WEBPACK_IMPORTED_MODULE_3___default()(C).add(1,"h").format("YYYY-MM-DD HH")+":00:00":C.substring(0,14)+k.substring(3);else if("months"===p)C=C.substring(0,8)+S+" "+k;else if("years"===p)C=C.substring(0,5)+D+"-"+S+" "+k;else if("weeks"===p&&I){var L=parseInt(moment__WEBPACK_IMPORTED_MODULE_3___default()(c).format("E"));C=(parseInt(I)+1-L<0?moment__WEBPACK_IMPORTED_MODULE_3___default()(c).subtract(L-parseInt(I)-1,"days").format("YYYY-MM-DD HH:mm:ss"):moment__WEBPACK_IMPORTED_MODULE_3___default()(c).add(parseInt(I)+1-L,"days").format("YYYY-MM-DD HH:mm:ss")).substring(0,11)+k}if("1"===R&&(C=moment__WEBPACK_IMPORTED_MODULE_3___default()(C).add(1,p).format("YYYY-MM-DD HH:mm:ss"),"months"===p)){var N;y=moment__WEBPACK_IMPORTED_MODULE_3___default()(c).add(1,p).daysInMonth();var j=null!==(N=n.endTime.split("-")[1])&&void 0!==N?N:"";parseInt(j)>y&&(j=y.toString()),C=C.substring(0,8)+j+" "+k}}if(t&&(null==n||null===(l=n.outTime)||void 0===l||null===(u=l.split("-"))||void 0===u?void 0:u[2])===p){var Y=t.split("-"),B=(0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__.Z)(Y,2),V=B[0],U=B[1],H={years:"month",months:"date",weeks:"day",days:"hour",hours:"minute"};moment__WEBPACK_IMPORTED_MODULE_3___default()(_).get(H[p])<lodash__WEBPACK_IMPORTED_MODULE_4___default().toNumber(V)&&(_=moment__WEBPACK_IMPORTED_MODULE_3___default()(_).set(H[p],lodash__WEBPACK_IMPORTED_MODULE_4___default().toNumber(V)).format("YYYY-MM-DD HH:mm:ss")),moment__WEBPACK_IMPORTED_MODULE_3___default()(C).get(H[p])>lodash__WEBPACK_IMPORTED_MODULE_4___default().toNumber(U)&&(C=moment__WEBPACK_IMPORTED_MODULE_3___default()(C).set(H[p],lodash__WEBPACK_IMPORTED_MODULE_4___default().toNumber(U)).format("YYYY-MM-DD HH:mm:ss")),"weeks"===p&&0===moment__WEBPACK_IMPORTED_MODULE_3___default()(C).get(H[p])&&(C=moment__WEBPACK_IMPORTED_MODULE_3___default()(C).set(H[p],lodash__WEBPACK_IMPORTED_MODULE_4___default().toNumber(U)-7).format("YYYY-MM-DD HH:mm:ss"))}return{startTimeStr:_,endTimeStr:C}},handleLoadReport=function(){var e=(0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10__.Z)(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark((function e(t){var r,n,i,a,o,s,l,u,c,p,h,d,f,m,v,g,y,_,b,x,E,w,O,T,A,C,M,P,D,S,k,I,R,L,N,j,Y,B,V,U,H,F,Z,W,q,K;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=t.report,u=t.filters,c=t.dispatch,p=t.preview,null!==(r=l)&&void 0!==r&&r.id&&!l.name&&antd__WEBPACK_IMPORTED_MODULE_6__.message.warning(_r("该表已被删除")),h="@@iot-report/LOAD_ROWS",!l||!l.id||p){e.next=7;break}return e.next=6,(0,xadmin__WEBPACK_IMPORTED_MODULE_5__.api)({name:"report/report"}).fetch("/".concat(null===(d=l)||void 0===d?void 0:d.id),{method:"GET"}).then((function(e){return e.json}));case 6:l=e.sent;case 7:if(!(l.dataList&&l.dataList.length>0)){e.next=14;break}if(!((f=l.dataList.filter((function(e){return(0,_utils__WEBPACK_IMPORTED_MODULE_8__.Al)(e.filterValues,u,l)}))).length>0)){e.next=14;break}if(null===(m=f[0])||void 0===m||null===(v=m.data)||void 0===v||!v.cellList){e.next=14;break}return c({type:"@@iot-report/LOAD_ROWS",rows:f[0].data}),c({type:"END_LOADING",key:"report.".concat(l.name,".rows")}),e.abrupt("return");case 14:if(null===(n=l.tableData)||void 0===n||!n.id){e.next=22;break}return e.next=17,(0,xadmin__WEBPACK_IMPORTED_MODULE_5__.api)({name:"core/t/".concat(l.tableInfo.id,"/d/tag")}).getOrigin(l.tableData.id);case 17:g=e.sent,y=g.json,l.tags=y,e.next=28;break;case 22:if(null===(i=l.tableInfo)||void 0===i||!i.id){e.next=28;break}return e.next=25,(0,xadmin__WEBPACK_IMPORTED_MODULE_5__.api)({name:"core/t/schema/tag"}).getOrigin(l.tableInfo.id);case 25:_=e.sent,b=_.json,l.tags=null==b?void 0:b.tags;case 28:if((x=l.table).cellList=x.cellList.map((function(e){var t,r;if("bind"===(null===(t=e.props)||void 0===t?void 0:t.cellType)&&"systemTime"!==(null===(r=e.props)||void 0===r?void 0:r.bindValue)){var n,i,a,o=l[null===(n=e.props)||void 0===n?void 0:n.bindValue];return o=o&&e.props.bindValue.indexOf("Time")>-1?moment__WEBPACK_IMPORTED_MODULE_3___default()(o).format("YYYY-MM-DD HH:mm:ss"):null===(a=o)||void 0===a?void 0:a.name,_objectSpread(_objectSpread({},e),{},{props:{cellType:"text",text:null!==(i=o)&&void 0!==i?i:" "}})}return e})),E=(0,_utils__WEBPACK_IMPORTED_MODULE_8__.E0)(x.cellList),w=E.filter(Boolean).map((function(e,t){return"".concat(convertField(e)," AS col_").concat(t)})),O=[],T="id",u){e.next=36;break}return e.abrupt("return");case 36:if(c({type:"START_LOADING",key:"report.".concat(l.name,".rows")}),"node"==l.type?(C=moment__WEBPACK_IMPORTED_MODULE_3___default()(null===(A=u.time)||void 0===A?void 0:A.time).hour(0).minute(0).second(0),M={},"days"==l.interval?(M.gte=C.format("YYYY-MM-DDTHH:mm:ssZ"),M.lt=C.add(1,"d").format("YYYY-MM-DDTHH:mm:ssZ")):"months"==l.interval?(M.gte=C.date(1).format("YYYY-MM-DDTHH:mm:ssZ"),M.lt=C.date(1).add(1,"M").format("YYYY-MM-DDTHH:mm:ssZ")):"years"==l.interval?(M.gte=C.month(0).date(1).format("YYYY-MM-DDTHH:mm:ssZ"),M.lt=C.month(0).date(1).add(1,"y").format("YYYY-MM-DDTHH:mm:ssZ")):"weeks"==l.interval&&(M.gte=C.day(1).format("YYYY-MM-DDTHH:mm:ssZ"),M.lt=C.day(1).add(1,"w").format("YYYY-MM-DDTHH:mm:ssZ")),M.gte&&M.lt&&(O.push("time >= '".concat(M.gte,"'")),O.push("time < '".concat(M.lt,"'")))):(P=u.node,D=u.range,S=void 0===D?{}:D,k=l.startTime,S&&S.lte&&S.gte&&(O.push("time >= '".concat(moment__WEBPACK_IMPORTED_MODULE_3___default()(S.gte).format("YYYY-MM-DDTHH:mm:ssZ"),"'")),O.push("time <= '".concat(moment__WEBPACK_IMPORTED_MODULE_3___default()(S.lte).format("YYYY-MM-DDTHH:mm:ssZ"),"'"))),P&&O.push("id = '".concat(P.id,"'")),k&&"weeks"===l.interval&&(O[1]="time <= '".concat(moment__WEBPACK_IMPORTED_MODULE_3___default()(S.lte).add(7,"days").format("YYYY-MM-DDTHH:mm:ssZ"),"'")),k&&(I=k.split("-"),R=I.length<3,I[0]=""===I[0]?"1":I[0],I[1]=""===I[1]?"1":I[1],I[2]=""===I[2]?"00:00:00":I[2],L="years"===l.interval?moment__WEBPACK_IMPORTED_MODULE_3___default()(S.gte).format("YYYY")+"-"+I[0]+"-"+I[1]+" 00:00:00":"months"===l.interval?moment__WEBPACK_IMPORTED_MODULE_3___default()(S.gte).format("YYYY-MM")+"-"+I[1]+" "+I[2]:R?"days"===l.interval?moment__WEBPACK_IMPORTED_MODULE_3___default()(S.gte).format("YYYY-MM-DD")+" "+k:moment__WEBPACK_IMPORTED_MODULE_3___default()(S.gte).format("YYYY-MM-DD HH:")+" "+k.substring(3):"days"===l.interval?moment__WEBPACK_IMPORTED_MODULE_3___default()(S.gte).format("YYYY-MM-DD")+" "+I[2]:moment__WEBPACK_IMPORTED_MODULE_3___default()(S.gte).format("YYYY-MM-DD HH:")+" "+I[2].substring(3),S&&S.lte&&S.gte&&(O[0]="time >= '".concat(moment__WEBPACK_IMPORTED_MODULE_3___default()(L).format("YYYY-MM-DDTHH:mm:ssZ"),"'"))),N=l.interval_num||1,"days"==l.interval?T="time(".concat(N,"d)"):"weeks"==l.interval?T="time(".concat(N,"w)"):"hours"==l.interval?T="time(".concat(N,"h)"):"months"==l.interval?T="time(".concat(N,"mo)"):"years"==l.interval&&(T="time(".concat(N,"y)"))),j={fields:w,tableId:null===(a=l.tableInfo)||void 0===a?void 0:a.id,where:O,group:[T],fill:l.fill},null!==(o=l.tableData)&&void 0!==o&&o.id&&j.where.push("id = '"+l.tableData.id+"'"),null!==(s=u.department)&&void 0!==s&&s.length&&(j.department=(0,_utils__WEBPACK_IMPORTED_MODULE_8__.sf)(u.department)),e.prev=41,"node"!=l.type||j.where&&!(j.where.length<1)){e.next=45;break}return c({type:h,rows:{}}),e.abrupt("return");case 45:if(0!==E.length){e.next=49;break}e.t0=[],e.next=52;break;case 49:return e.next=51,(0,xadmin__WEBPACK_IMPORTED_MODULE_5__.api)({name:"core/data"}).fetch("/query",{method:"POST",body:JSON.stringify([j])}).then((function(e){return e.json.results[0].series}));case 51:e.t0=e.sent;case 52:if(Y=e.t0,B={},l.tags&&l.tags.forEach((function(e){B[e.id]=e.fixed})),!(Y&&Y.length>0&&Y[0].columns)){e.next=73;break}if(Y.length&&"weeks"==l.interval&&"time"==l.type&&Y.forEach((function(e){e.values&&e.values.length&&e.values.forEach((function(t,r){var n;moment__WEBPACK_IMPORTED_MODULE_3___default()(t[0]).valueOf()>moment__WEBPACK_IMPORTED_MODULE_3___default()(null===(n=u.range)||void 0===n?void 0:n.lte).valueOf()&&e.values.splice(r,1)}))})),V=_objectSpread({},x),"node"!=l.type){e.next=69;break}return F=null===(U=l)||void 0===U||null===(H=U.tableInfo)||void 0===H?void 0:H.id,e.next=62,(0,xadmin__WEBPACK_IMPORTED_MODULE_5__.api)({name:"core/t/".concat(F,"/d")}).query({fields:["id","name"]},{idIn:{id:{in:Y.map((function(e){return e.tags.id}))}}});case 62:Z=e.sent,W=Z.items,q=W.reduce((function(e,t){return e[t.id]=t,e}),{}),V.queryData=Y.filter((function(e){return q[e.tags.id]})).map((function(e){return[q[e.tags.id]?q[e.tags.id].name:""].concat((0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_11__.Z)(e.values[0].slice(1).map((function(e,t){return(0,_utils__WEBPACK_IMPORTED_MODULE_8__.Yk)(e,t,B,x)}))))})),c({type:h,rows:V}),e.next=71;break;case 69:V.queryData=null===(K=Y[0].values)||void 0===K?void 0:K.map((function(e){var t=moment__WEBPACK_IMPORTED_MODULE_3___default()(e[0]),r=t.format("YYYY年MM月DD日");return"months"==l.interval?r=t.format("YYYY年MM月"):"years"==l.interval?r=t.format("YYYY年"):"hours"==l.interval&&(r=t.format("HH:00:00")),[r].concat((0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_11__.Z)(e.slice(1).map((function(e,t){return(0,_utils__WEBPACK_IMPORTED_MODULE_8__.Yk)(e,t,B,x)}))))})),c({type:h,rows:V});case 71:e.next=74;break;case 73:c({type:h,rows:_objectSpread({},x)});case 74:e.next=80;break;case 76:e.prev=76,e.t1=e.catch(41),antd__WEBPACK_IMPORTED_MODULE_6__.message.error(_r("读取报表数据错误，请检查您的数据和报表设置。")),xadmin__WEBPACK_IMPORTED_MODULE_5__.app.error(e.t1);case 80:c({type:"END_LOADING",key:"report.".concat(l.name,".rows")});case 81:case"end":return e.stop()}}),e,null,[[41,76]])})));return function(t){return e.apply(this,arguments)}}(),handleLoadFreeReport=function(){var e=(0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10__.Z)(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark((function e(t){var r,n,i,a,o,s,l,u,c,p,h,d,f,m,v,g,y,_,b,x,E,w,O,T,A,C,M,P,D,S,k;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.report,l=t.filters,u=void 0===l?{}:l,c=t.dispatch,p=t.preview,c({type:"START_LOADING",key:"report.".concat(s.name,".rows")}),!s||!s.id||p){e.next=6;break}return e.next=5,(0,xadmin__WEBPACK_IMPORTED_MODULE_5__.api)({name:"report/report"}).fetch("/".concat(null===(h=s)||void 0===h?void 0:h.id),{method:"GET"}).then((function(e){return e.json}));case 5:s=e.sent;case 6:if(!(s.dataList&&s.dataList.length>0)){e.next=13;break}if(!((d=s.dataList.filter((function(e){return(0,_utils__WEBPACK_IMPORTED_MODULE_8__.Al)(e.filterValues,u,s)}))).length>0)){e.next=13;break}if(null===(f=d[0])||void 0===f||null===(m=f.data)||void 0===m||!m.cellList){e.next=13;break}return c({type:"@@iot-report/LOAD_ROWS",rows:d[0].data}),c({type:"END_LOADING",key:"report.".concat(s.name,".rows")}),e.abrupt("return");case 13:if(!((v=null===(r=s)||void 0===r||null===(n=r.table)||void 0===n||null===(i=n.cellList)||void 0===i?void 0:i.filter((function(e){var t;return!(null===(t=e.props)||void 0===t||!t.tableInfo)})).map((function(e){return e.props.tableInfo.id}))).length>0)){e.next=19;break}return g={filter:{id:{$in:Array.from(new Set(v))}},project:{device:1,table:1,name:1,computed:1}},e.next=18,(0,xadmin__WEBPACK_IMPORTED_MODULE_5__.api)({name:"core/t/schema"}).fetch("?query="+JSON.stringify(g),{method:"GET"}).then((function(e){var t,r=null!==(t=e.json)&&void 0!==t?t:[];return s.table.cellList.map((function(e){var t;return null!==(t=e.props)&&void 0!==t&&t.tableInfo?_objectSpread(_objectSpread({},e),{},{props:_objectSpread(_objectSpread({},e.props),{},{tableInfo:r.find((function(t){return t.id===e.props.tableInfo.id}))})}):e}))}));case 18:s.table.cellList=e.sent;case 19:return e.next=21,Promise.all(null===(a=s)||void 0===a||null===(o=a.table)||void 0===o?void 0:o.cellList.map(function(){var e=(0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10__.Z)(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark((function e(t){var r,n,i,a,o,s,l;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=t&&null!==(r=t.props)&&void 0!==r&&r.warningColor||null!=t&&null!==(n=t.props)&&void 0!==n&&n.showEnum)||null===(i=t.props)||void 0===i||!i.tableData){e.next=7;break}return e.next=3,(0,xadmin__WEBPACK_IMPORTED_MODULE_5__.api)({name:"core/t/".concat(null===(a=t.props)||void 0===a||null===(o=a.tableInfo)||void 0===o?void 0:o.id,"/d/tag")}).getOrigin(null===(s=t.props)||void 0===s?void 0:s.tableData.id).then((function(e){return(null==e?void 0:e.json)||[]}));case 3:return l=e.sent,e.abrupt("return",_objectSpread(_objectSpread({},t),{},{props:_objectSpread(_objectSpread({},t.props),{},{tableData:_objectSpread(_objectSpread({},t.props.tableData),{},{tags:l})})}));case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 21:if(s.table.cellList=e.sent,s.table.cellList=s.table.cellList.map((function(e){var t,r;if("bind"===(null===(t=e.props)||void 0===t?void 0:t.cellType)&&"systemTime"!==(null===(r=e.props)||void 0===r?void 0:r.bindValue)){var n,i,a,o=s[null===(n=e.props)||void 0===n?void 0:n.bindValue];return o=o&&e.props.bindValue.indexOf("Time")>-1?moment__WEBPACK_IMPORTED_MODULE_3___default()(o).format("YYYY-MM-DD HH:mm:ss"):null===(a=o)||void 0===a?void 0:a.name,_objectSpread(_objectSpread({},e),{},{props:{cellType:"text",text:null!==(i=o)&&void 0!==i?i:" "}})}return e})),y="@@iot-report/LOAD_ROWS",_=u.time||u.timeFree||moment__WEBPACK_IMPORTED_MODULE_3___default()().format("YYYY-MM-DD HH:mm:ss"),b=u.secondTime,x=u.accurateTime,E=(0,_tableEditor_handsontable_utils_historyDataDealer__WEBPACK_IMPORTED_MODULE_12__.x)(s.table),w=(0,_utils__WEBPACK_IMPORTED_MODULE_8__.E0)(E.cellList),O=w.filter(Boolean).map((function(e){var t=(0,_utils__WEBPACK_IMPORTED_MODULE_8__.QE)(e);e.tableInfo&&e.tableInfo.id&&(t.tableId=e.tableInfo.id),e.tableData&&e.tableData.id&&(t.id=e.tableData.id),e.department&&e.department.length>0&&(t.department=(0,_utils__WEBPACK_IMPORTED_MODULE_8__.sf)(e.department)),e.fill&&(t.fill=e.fill);var r=e.groupInterval;r&&r.split("-")[0]&&r.split("-")[1]&&(t.group=["time(".concat(r.split("-")[0]+r.split("-")[1],")")]);var n=freeTimeDealer(_,b,x,e,s),i=n.startTimeStr,a=n.endTimeStr;return t.where[0]="time >= '".concat(moment__WEBPACK_IMPORTED_MODULE_3___default()(i).format("YYYY-MM-DDTHH:mm:ssZ"),"'"),t.where[1]="time < '".concat(moment__WEBPACK_IMPORTED_MODULE_3___default()(a).format("YYYY-MM-DDTHH:mm:ssZ"),"'"),t})),e.prev=30,T=getTimeList(_,b,x,E.cellList,s),!(O.length<1)){e.next=36;break}return c({type:y,rows:_objectSpread(_objectSpread({},E),{},{timeList:T})}),c({type:"END_LOADING",key:"report.".concat(s.name,".rows")}),e.abrupt("return");case 36:if(0!==w.length){e.next=40;break}e.t0=[],e.next=43;break;case 40:return e.next=42,(0,xadmin__WEBPACK_IMPORTED_MODULE_5__.api)({name:"core/data"}).fetch("/query",{method:"POST",body:JSON.stringify(O)}).then((function(e){var t=e.json;return t.results&&t.results.length>0?t.results.map((function(e){return e.series})):[]}));case 42:e.t0=e.sent;case 43:if(A=e.t0,C={},!s.tableData||!s.tableData.id){e.next=49;break}return D=null===(M=s)||void 0===M||null===(P=M.tableInfo)||void 0===P?void 0:P.id,e.next=49,(0,xadmin__WEBPACK_IMPORTED_MODULE_5__.api)({name:"core/t/".concat(D,"/d")}).fetch("/"+s.tableData.id).then((function(e){var t,r,n=e.json,i=null==n||null===(t=n._settings)||void 0===t||null===(r=t.device)||void 0===r?void 0:r.tags;(null==i?void 0:i.length)>0&&i.forEach((function(e){C[e.id]=e.fixed}))}));case 49:A&&A.length>0?(S=(0,_utils__WEBPACK_IMPORTED_MODULE_8__.T3)(w,A,C,E,s),k=_objectSpread(_objectSpread({},E),{},{queryData:S,timeList:T}),c({type:y,rows:k})):c({type:y,rows:_objectSpread(_objectSpread({},E),{},{timeList:T})}),e.next=56;break;case 52:e.prev=52,e.t1=e.catch(30),antd__WEBPACK_IMPORTED_MODULE_6__.message.error(_r("读取报表数据错误，请检查您的数据和报表设置。")),xadmin__WEBPACK_IMPORTED_MODULE_5__.app.error(e.t1);case 56:c({type:"END_LOADING",key:"report.".concat(s.name,".rows")});case 57:case"end":return e.stop()}}),e,null,[[30,52]])})));return function(t){return e.apply(this,arguments)}}();const __WEBPACK_DEFAULT_EXPORT__={"report.data":function(e){var t,r=react__WEBPACK_IMPORTED_MODULE_2___default().useContext(_components_ReportContext__WEBPACK_IMPORTED_MODULE_7__.G),n=r.report,i=r.rows,a=r.loading,o=r.dispatch;return t=n&&"free"===n.reportType?react__WEBPACK_IMPORTED_MODULE_2___default().useCallback((function(t){return handleLoadFreeReport({report:n,filters:t,dispatch:o,preview:null==e?void 0:e.preview})}),[n]):react__WEBPACK_IMPORTED_MODULE_2___default().useCallback((function(t){return handleLoadReport({report:n,filters:t,dispatch:o,preview:null==e?void 0:e.preview})}),[n]),_objectSpread(_objectSpread({},e),{},{report:n,rows:i,loading:a,loadReport:t})}}},4315:(e,t,r)=>{"use strict";r.d(t,{A1:()=>b,ee:()=>x,P8:()=>E,jy:()=>D,pN:()=>S,NI:()=>w,lt:()=>A,aN:()=>_,Ke:()=>T,F8:()=>O,EU:()=>C,Qf:()=>P,L3:()=>M});var n=r(42982),i=r(87462),a=r(4942),o=r(70885),s=r(87363),l=r.n(s),u=r(81821),c=r(53078),p=r(48488),h=r.n(p),d=r(16640),f=r(95907),m=(r(23279),r(12611)),v=r.n(m);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}u.Select.Option,u.Select.Option;var _=function(e){var t=e.input,r=e.option,n=(0,s.useState)(t.value),i=(0,o.Z)(n,2),a=i[0],p=i[1],h=(0,s.useState)(t.value),d=(0,o.Z)(h,2),m=d[0],v=d[1],g=l().useState(!1),y=(0,o.Z)(g,2),_=y[0],b=y[1],x=(0,s.useState)([]),E=(0,o.Z)(x,2),w=E[0],O=E[1],T=(0,s.useState)(!1),A=(0,o.Z)(T,2),C=A[0],M=A[1],P=r.form.getState().values,D=P.tableInfo,S=P.tableData,k=(0,c.use)("form").form,I=useI18n().t;return(0,s.useEffect)((function(){k.useEffect((function(e){var t=e.values||{},r=t.tableInfo,n=t.tableData;null!=n&&n.id&&null!=r&&r.id?(0,c.api)({name:"core/t/".concat(r.id,"/d/tag")}).fetch("/"+n.id).then((function(e){O((null==e?void 0:e.json)||[])})):null!=r&&r.id?(0,c.api)({name:"core/t/schema"}).fetch("/"+r.id).then((function(e){var t,r;O((null==e||null===(t=e.json)||void 0===t||null===(r=t.device)||void 0===r?void 0:r.tags)||[])})):O([])}),["values"])}),[]),l().createElement(l().Fragment,null,l().createElement(u.Input,{style:{width:"100%"},value:a,onClick:function(){b(!0)}}),l().createElement(u.Modal,{title:I("函数定义"),width:"50%",zIndex:998,visible:_,onOk:function(){b(!1),p(m),t.onChange(m)},onCancel:function(){return b(!1)},okButtonProps:{disabled:C}},l().createElement(f.C,{is:"CodeEditor.DataFieldEditor",downTree:!0,ignoreParentKeys:["logic","transformations","predictors","technicalAnalysis"],tags:w,value:a,height:40,outputMode:"raw",onChange:function(e){var t=e.value;v(t),M(!1)},onError:function(e){return M(!0)},model:D,field:{nodeId:null==S?void 0:S.id}})))},b=function(e){var t=e.input,r=(e.label,e.field,(0,s.useState)(t.value)),n=(0,o.Z)(r,2),i=n[0],a=n[1],c=useI18n().t;return l().createElement(u.Input,{style:{width:205},value:i,onChange:function(e){return a(e.target.value)},onBlur:function(){return t.onChange(i)},suffix:l().createElement(u.Tooltip,{placement:"left",title:c("预期：")+h()().format(i||"YYYY-MM-DD HH:mm:ss")},l().createElement(d.EyeOutlined,null))})},x=function(e){var t=e.input,r=v().debounce((function(e){t.onChange(!parseInt(e)||parseInt(e)<23?23:e)}),500);return l().createElement(u.InputNumber,{value:t.value,onChange:r})},E=function(e){var t=e.input;return l().createElement(u.InputNumber,{max:10,min:0,value:t.value?parseInt(t.value):null,onChange:function(e){return t.onChange(v().isNumber(e)?e.toString():null)}})},w=function(e){var t,r=e.label,n=e.meta,a=e.input,o=e.field,s=e.children,c=o.attrs||{},p=n.error,h=y(y({extra:o.description||o.help},["warningColor","showEnum"].indexOf(o.name)>-1?{labelCol:{sm:{span:0,offset:0}},wrapperCol:{sm:{span:17,offset:6}}}:{labelCol:{sm:{span:5,offset:1}},wrapperCol:{sm:{span:17}}}),{},{required:o.required,labelAlign:"left",tooltip:null==o||null===(t=o.schema)||void 0===t?void 0:t.tooltip});p&&(h.validateStatus="error",h.help=p);var d=s||l().createElement(u.Input,(0,i.Z)({},a,c,{size:"small"}));return l().createElement(u.Form.Item,(0,i.Z)({colon:!1,label:r},h),d)},O=function(e){var t=e.input,r=e.interval,n=(0,c.use)("form").form,i=useI18n().t,a=[{value:"this",label:i("当前")},{value:"before",label:i("前")},{value:"after",label:i("后")}],s="years"===r?[{value:"years",label:i("年")}]:"months"===r?[{value:"years",label:i("年")},{value:"months",label:i("月")}]:"weeks"===r?[{value:"years",label:i("年")},{value:"months",label:i("月")},{value:"weeks",label:i("周")}]:"days"===r?[{value:"years",label:i("年")},{value:"months",label:i("月")},{value:"weeks",label:i("周")},{value:"days",label:i("日")}]:"hours"===r?[{value:"years",label:i("年")},{value:"months",label:i("月")},{value:"weeks",label:i("周")},{value:"days",label:i("日")},{value:"hours",label:i("小时")}]:[],p=l().useState(t.value?t.value.split("-")[0]:""),h=(0,o.Z)(p,2),d=h[0],f=h[1],m=l().useState(t.value?t.value.split("-")[1]:""),v=(0,o.Z)(m,2),g=v[0],y=v[1],_=l().useState(t.value?t.value.split("-")[2]:""),b=(0,o.Z)(_,2),x=b[0],E=b[1],w=function(e,r){n.change("startTime",null),n.change("endTime",null),"value1"===e?(f(r),t.onChange(r+"-"+g+"-"+x)):"value2"===e?(y(r),t.onChange(d+"-"+r+"-"+x)):"value3"===e&&(E(r),t.onChange(d+"-"+g+"-"+r))};return l().createElement(l().Fragment,null,l().createElement(u.Select,{style:{width:"this"===d?"50%":"33%"},value:d,placeholder:"",options:a,onChange:function(e){return w("value1",e)}}),"this"===d?null:l().createElement(u.InputNumber,{style:{width:"33%"},min:0,value:g,onChange:function(e){return w("value2",e)}}),l().createElement(u.Select,{style:{width:"this"===d?"50%":"33%"},value:x,placeholder:"",options:s,onChange:function(e){return w("value3",e)}}))},T=function(e){var t=e.input,r=e.intervalP,n=(0,c.use)("form",(function(e){return{outTime:e.values&&e.values.outTime}})).outTime,i=useI18n().t,a=n&&n.split("-")[2]?n.split("-")[2]:r,s="years"===a?[{value:"mo",label:i("月")},{value:"w",label:i("周")},{value:"d",label:i("日")}]:"months"===a?[{value:"w",label:i("周")},{value:"d",label:i("日")}]:"weeks"===a?[{value:"d",label:i("日")}]:"days"===a?[{value:"h",label:i("小时")},{value:"m",label:i("分钟")}]:"hours"===a?[{value:"m",label:i("分钟")}]:[],p=l().useState(t.value?t.value.split("-")[0]:""),h=(0,o.Z)(p,2),d=h[0],f=h[1],m=l().useState(t.value?t.value.split("-")[1]:""),v=(0,o.Z)(m,2),g=v[0],y=v[1],_=function(e,r){"value1"===e?(f(null!=r?r:""),t.onChange((null!=r?r:"")+"-"+g)):"value2"===e&&(y(null!=r?r:""),t.onChange(d+"-"+(null!=r?r:"")))};return l().createElement(l().Fragment,null,l().createElement(u.InputNumber,{style:{width:"50%"},min:1,value:d,onChange:function(e){return _("value1",e)}}),l().createElement(u.Select,{style:{width:"50%"},value:g,placeholder:"",options:s,allowClear:!0,onChange:function(e){return _("value2",e)}}))},A=function(e){var t=e.children,r=(e.form,(0,c.use)("form",(function(e){return{cellType:e.values&&e.values.cellType}})).cellType),i=useI18n().t,a=["rowHeight","colWidth","sortMode","showDirection","outTime","startTime","endTime","groupInterval","fill"],o=["dealScript"],s=t.filter((function(e){return a.includes(e.key)})),p=t.filter((function(e){return o.includes(e.key)})),h=v().difference(t,[].concat((0,n.Z)(s),(0,n.Z)(p))),d=h.filter((function(e){return["tableInfo","tableData","department","variable","warningColor","showEnum","conMode","bitNum","addZero"].includes(e.key)})),f=s.filter((function(e){return["rowHeight","colWidth"].includes(e.key)})),m=v().difference(s,f);return r?l().createElement(u.Form,{className:"prop-right"},l().createElement("div",{className:"right-sider-title",style:{fontSize:14}},i("基础配置")),v().difference(h,d),"variable"===r?l().createElement(l().Fragment,null,l().createElement("div",{className:"prop-title-level2"},i("列值定义")),d):null,l().createElement("div",{className:"right-sider-title",style:{fontSize:14}},i("高级配置")),["variable","time"].indexOf(r)>-1?l().createElement(l().Fragment,null,(null==m?void 0:m.length)>2&&l().createElement("div",{className:"prop-title-level2"},i("统计周期")),m,p.length>0&&l().createElement("div",{className:"prop-title-level2"},i("数据处理")),p):null,l().createElement("div",{className:"prop-title-level2"},i("样式")),f):null},C=function(e){var t=e.input,r=e.titleMap,n=null==r?void 0:r.map((function(e){return{label:e.name,value:e.value}}));return l().createElement(u.Radio.Group,{options:n,onChange:t.onChange,value:t.value,optionType:"button",buttonStyle:"solid"})},M=function(e){var t,r=e.input,n=e.schema,i=null===(t=n.enum1)||void 0===t?void 0:t.map((function(e,t){var r;return{value:e,label:null===(r=n.enum_title1)||void 0===r?void 0:r[t]}})),a=r.value&&!i.find((function(e){return e.value===r.value}))?"绑定变量已失效，请重新绑定":r.value;return l().createElement(u.Select,{value:a,options:i,onChange:r.onChange})},P=function(e){var t=e.input,r=[{value:"any",label:_t1("任意数值")},{value:"linear",label:_t1("线性插值")},{value:"previous",label:_t1("前一个数值")},{value:"none",label:_t1("空数据过滤")}],n=l().useState(t.value&&-1===["linear","previous","none"].indexOf(t.value)),i=(0,o.Z)(n,2),a=i[0],s=i[1],c={width:"50%"};return l().createElement(l().Fragment,null,l().createElement(u.Select,{allowClear:!0,style:c,value:a?"any":t.value,options:r,onChange:function(e){"any"===e?(t.onChange(null),s(!0)):(t.onChange(e),s(!1))}}),a&&l().createElement(u.InputNumber,{style:c,placeholder:_t1("数值"),value:t.value,onChange:function(e){return t.onChange(null==e?void 0:e.toString())}}))},D=function(e){var t=e.input,r=e.schema;return l().createElement(u.Checkbox,{checked:t.value,onChange:function(e){return t.onChange(e.target.checked)}},null==r?void 0:r.title,l().createElement(u.Tooltip,{title:_t1(null==r?void 0:r.desp)},l().createElement(d.QuestionCircleOutlined,{style:{marginLeft:5}})))},S=function(e){var t,r=e.input,n=e.label,i=e.field,a=(0,c.use)("form").getFormState,s=useI18n().t,p=null===(t=a().values)||void 0===t?void 0:t.cellType,h="variable"===p?"// ".concat(s("参数"),"：\n// report ").concat(s("报表数据"),"\n// item ").concat(s("处理前数据"),"\n// moment ").concat(s("时间处理工具，文档地址"),"：http://momentjs.cn/\n\n// result = item.filter(v => moment(v[0]).day() === 1)  // ").concat(s("取周一数据"),"\n// result = item.filter(v => moment(v[0]).month() === 0)  // ").concat(s("取一月数据")):"// ".concat(s("参数"),"：\n// report ").concat(s("报表数据"),"\n// item ").concat(s("处理前数据"),"\n// moment ").concat(s("时间处理工具，文档地址"),"：http://momentjs.cn/\n\n// result = item.filter(v => moment(v).day() === 1)  // ").concat(s("取周一数据"),"\n// result = item.filter(v => moment(v).month() === 0)  // ").concat(s("取一月数据")),d=l().useState(!1),m=(0,o.Z)(d,2),v=m[0],g=m[1],_=l().useState(r.value||h),b=(0,o.Z)(_,2),x=b[0],E=b[1];l().useEffect((function(){r.value&&E(r.value)}),[r.value]),l().useEffect((function(){r.value||E(h)}),[p]);var w=y({roundedSelection:!1,readOnly:!1,minimap:{enabled:!1},cursorStyle:"line",automaticLayout:!1},i.editor||{});return l().createElement(l().Fragment,null,l().createElement(u.Button,{type:"default",size:"small",onClick:function(e){return g(!0)}},l().createElement(f.Icon,{type:"code"}),s("编辑脚本")),l().createElement(u.Modal,{title:n,visible:v,maskClosable:!1,width:"80%",onOk:function(e){r.onChange(x),g(!1)},onCancel:function(e){return g(!1)}},l().createElement(f.C,{is:"CodeEditor",language:"javascript",value:x,width:"100%",height:"600",options:w,onChange:E})))}},79236:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Jg:()=>getNumByAlphabet,g4:()=>getFilterWidths,mB:()=>getFilterData,y_:()=>dealComputeCell});var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(42982),lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12611),lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__),dealComputeCell=function(e){var t=lodash__WEBPACK_IMPORTED_MODULE_0___default().cloneDeep(e);return e.forEach((function(r,n){r.forEach((function(r,i){if(r.props&&"computeCell"===r.props.cellType&&r.props.formula){var a,o=getComputeResult(e,r.props.formula);o=null!==(a=r.props)&&void 0!==a&&a.bitNum?o.toFixed(parseInt(r.props.bitNum)):o.toFixed(0),t[n][i]={style:r.style,styleObj:r.styleObj,styleCodeStr:r.styleCodeStr,props:{cellType:"text",text:o}}}}))})),t},getComputeResult=function(e,t){return t&&/^[A-Z0-9\+\-\*\/\(\)\,\:]*$/.test(t)?/^[A-Z]+\((([A-Z]+[0-9]+\:[A-Z]+[0-9]+|[A-Z]+[0-9]+)\,)*([A-Z]+[0-9]+\:[A-Z]+[0-9]+|[A-Z]+[0-9]+)\)$/.test(t)?compute1(e,t):compute2(e,t):""},compute1=function(e,t){var r=/^[A-Z]+[0-9]+\:[A-Z]+[0-9]+$/,n=/^[A-Z]+[0-9]+$/,i=t.split("(")[0],a=t.split("(")[1].substring(0,t.split("(")[1].length-1).split(","),o=[];return a.forEach((function(t){n.test(t)?o.push(getCellContent(e,t)):r.test(t)&&o.push.apply(o,(0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__.Z)(getCellContent1(e,t)))})),"SUM"===i?o.reduce((function(e,t){return e+t})):"AVERAGE"===i?o.reduce((function(e,t){return e+t}))/o.length:"MAX"===i?lodash__WEBPACK_IMPORTED_MODULE_0___default().isEmpty(o)?0:Math.max.apply(Math,o):"MIN"===i?lodash__WEBPACK_IMPORTED_MODULE_0___default().isEmpty(o)?0:Math.min.apply(Math,o):0},compute2=function compute2(list,formula){var regex=/[A-Z]+[0-9]+/g,resultStr=lodash__WEBPACK_IMPORTED_MODULE_0___default().replace(formula,regex,(function(e){return getCellContent(list,e)})),result=eval(resultStr);return null!=result?result:0},getCellContent1=function(e,t){for(var r=t.split(":")[0],n=t.split(":")[1],i=getNumByAlphabet(r.match(/[A-Z]+/)[0]),a=r.match(/[0-9]+/)[0]-1,o=getNumByAlphabet(n.match(/[A-Z]+/)[0]),s=n.match(/[0-9]+/)[0]-1,l=[],u=Math.min(a,s);u<=Math.max(a,s);u++)for(var c=Math.min(i,o);c<=Math.max(i,o);c++){var p,h,d=null===(p=e[u])||void 0===p?void 0:p[c];null!=d&&null!==(h=d.props)&&void 0!==h&&h.text?l.push(lodash__WEBPACK_IMPORTED_MODULE_0___default().isNaN(parseFloat(d.props.text))?0:parseFloat(d.props.text)):l.push(0)}return l},getCellContent=function(e,t){var r,n,i=t.match(/[A-Z]+/)[0],a=null===(r=e[t.match(/[0-9]+/)[0]-1])||void 0===r?void 0:r[getNumByAlphabet(i)];return null!=a&&null!==(n=a.props)&&void 0!==n&&n.text?lodash__WEBPACK_IMPORTED_MODULE_0___default().isNaN(parseFloat(a.props.text))?0:parseFloat(a.props.text):0},getNumByAlphabet=function(e){for(var t=0,r=0;r<e.length;r++)t+=(e.charAt(r).charCodeAt()-64)*Math.pow(26,e.length-1-r);return t-1},inList=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,n=lodash__WEBPACK_IMPORTED_MODULE_0___default().cloneDeep(t);return n.indexOf("空")>-1&&n.push.apply(n,["",null,void 0]),-1===n.indexOf(null==r||null===(e=r.props)||void 0===e?void 0:e.text)},dealMergeCells=function(e){var t=lodash__WEBPACK_IMPORTED_MODULE_0___default().cloneDeep(e);return t.forEach((function(e){e.forEach((function(e){if(e.rowspan&&e.colspan)for(var r=e.row;r<e.row+e.rowspan;r++)for(var n=e.col;n<e.col+e.colspan;n++)t[r][n].props=e.props}))})),t},getFilterData=function(e,t){var r=dealMergeCells(e);return t.forEach((function(e){if("down"===e.filterDirection)r=r.map((function(t){var r=t.find((function(t){return t.col===e.col}));return(null==r?void 0:r.row)>e.row&&inList(e.list,r)?null:t})).filter((function(e){return!!e}));else if("left"===e.filterDirection){var t=[];r.find((function(t){var r;return(null===(r=t[0])||void 0===r?void 0:r.row)===e.row})).forEach((function(r){inList(e.list,r)&&r.col<e.col&&t.push(r.col)})),r=r.map((function(e){return e.filter((function(e){return-1===t.indexOf(e.col)}))}))}else if("right"===e.filterDirection){var n=[];r.find((function(t){var r;return(null===(r=t[0])||void 0===r?void 0:r.row)===e.row})).forEach((function(t){inList(e.list,t)&&t.col>e.col&&n.push(t.col)})),r=r.map((function(e){return e.filter((function(e){return-1===n.indexOf(e.col)}))}))}})),r},getFilterWidths=function(e,t,r,n,i){var a,o,s=(null==t?void 0:t.slice(0,e.length))||[];n.forEach((function(e){if("left"===e.filterDirection)r.find((function(t){var r;return(null===(r=t[0])||void 0===r?void 0:r.row)===e.row})).forEach((function(t){inList(e.list,t)&&t.col<e.col&&(s[t.col]=null)}));else if("right"===e.filterDirection){r.find((function(t){var r;return(null===(r=t[0])||void 0===r?void 0:r.row)===e.row})).forEach((function(t){inList(e.list,t)&&t.col>e.col&&(s[t.col]=null)}))}}));var l=(null===(a=document.getElementById("tableRender"))||void 0===a||null===(o=a.parentNode)||void 0===o?void 0:o.offsetWidth)||0;return i(s.filter((function(e){return!!e})),l)}},49686:(e,t,r)=>{"use strict";r.d(t,{Z:()=>k});var n=r(87462),i=r(4942),a=r(42982),o=r(70885),s=r(87363),l=r.n(s),u=r(95907),c=r(12611),p=r.n(c),h=r(48488),d=r.n(h),f=r(53078),m=r(69424),v=r(81821),g=r(16640),y=function(e){var t=e.options,r=e.addFilter,n=e.defaultOps,i=(0,s.useState)(n||t),a=(0,o.Z)(i,2),u=a[0],c=a[1],p=(0,s.useState)(),h=(0,o.Z)(p,2),d=h[0],f=h[1],m=(0,s.useState)(!0),g=(0,o.Z)(m,2),y=g[0],_=g[1],b=(0,s.useState)(t),x=(0,o.Z)(b,2),E=x[0],w=x[1];return l().createElement("div",{style:{maxWidth:300}},l().createElement(v.Input,{onChange:function(e){var r,n,i=null===(r=e.target.value)||void 0===r||null===(n=r.split(" "))||void 0===n?void 0:n.filter((function(e){return!!e}));_(!0),f(!1);var a=t.filter((function(e){return 0===i.length||i.some((function(t){return e.indexOf(t)>-1}))}));c(a),w(a)},placeholder:"支持多条件过滤，例如：11 22",style:{marginBottom:10,width:240}}),l().createElement("br",null),l().createElement(v.Checkbox,{indeterminate:d,onChange:function(e){c(e.target.checked?E:[]),f(!1),_(e.target.checked)},checked:y},"全选"),l().createElement(v.Checkbox.Group,{value:u,onChange:function(e){c(e),f(!!e.length&&e.length<E.length),_(e.length===E.length)}},E.map((function(e){return l().createElement(v.Checkbox,{value:e},e)}))),l().createElement(v.Button,{style:{marginTop:10},size:"small",onClick:function(){return r(u)}},"确定"))},b=function(e,t){var r=e.row,n=e.col,i=e.props,a=(void 0===i?{}:i).filterDirection,o=void 0===a?"down":a,s=[];return"down"===o?t.forEach((function(e){var t;if((null===(t=e[n])||void 0===t?void 0:t.row)>r){var i,a,o="text"===(null===(i=e[n])||void 0===i||null===(a=i.props)||void 0===a?void 0:a.cellType)?e[n].props.text:"空";s.push(o)}})):"left"===o?t.forEach((function(e){var t;(null===(t=e[n])||void 0===t?void 0:t.row)===r&&e.forEach((function(e){var t;(null==e?void 0:e.col)<n&&"text"===(null==e||null===(t=e.props)||void 0===t?void 0:t.cellType)&&s.push(e.props.text)}))})):"right"===o&&t.forEach((function(e){var t;(null===(t=e[n])||void 0===t?void 0:t.row)===r&&e.forEach((function(e){var t;(null==e?void 0:e.col)>n&&"text"===(null==e||null===(t=e.props)||void 0===t?void 0:t.cellType)&&s.push(e.props.text)}))})),_.uniq(s.filter((function(e){return!!e})))};const x=function(e){var t,r,n,i,a=e.meta,u=e.tdObjList,c=e.filterList,p=e.setFilterList,h=(null==a?void 0:a.props)||{},d=h.ifFilter,f=h.filterDirection,m=void 0===f?"down":f,x=h.cellType,E=(0,s.useState)(!1),w=(0,o.Z)(E,2),O=w[0],T=w[1],A=null===(t=c.find((function(e){return e.row===a.row&&e.col===a.col})))||void 0===t?void 0:t.list,C=A&&(null==A?void 0:A.length)!==(null===(r=b(a,u))||void 0===r?void 0:r.length),M=(null===(n=e.heights)||void 0===n?void 0:n[e.rowNum])||0,P=(null===(i=e.widths)||void 0===i?void 0:i[e.colNum])||0;return d&&"text"===x?l().createElement(l().Fragment,null,l().createElement("div",{style:{width:0,height:0,position:"relative",left:P-14,top:-[M],overflow:"visible"}},l().createElement(v.Popover,{visible:O,onVisibleChange:T,content:l().createElement(y,{options:b(a,u),addFilter:function(e){T(!1),p((function(t){var r=_.cloneDeep(t),n=t.findIndex((function(e){return e.row===a.row&&e.col===a.col}));return-1===n?r.push({row:a.row,col:a.col,list:e,filterDirection:m}):r[n].list=e,r}))},defaultOps:A}),trigger:"click"},C?l().createElement(g.FilterOutlined,null):l().createElement(g.DownSquareOutlined,null)))):null};function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O=function(e){var t,r,n=e.meta,i=n.col,a=n.row,o=n.style,s=void 0===o?{}:o,u=n.styleObj,c=void 0===u?{}:u,p=n.styleCodeStr,h=void 0===p?"":p,d=n.props,g=void 0===d?{}:d,y=n.colspan,b=void 0===y?1:y,E=n.rowspan,O=void 0===E?1:E,T=n.disappear,A=e.widths,C=e.heights,M=e.rowNum,P=e.colNum,D=e.edit,S=e.setEditData,k=function(e,t,r,n,i,a){var o={width:0,height:0};if(a>1)for(var s=0;s<a;s++)o.width+=e[n+s];else o.width=e[n];if(i>1)for(var l=0;l<i;l++)o.height+=t[r+l];else o.height=t[r];return o}(A,C,M,P,O,b),I=k.width,R=k.height,L=(0,f.use)("cssForm.methods").convertCssString,N=useI18n().t,j=w(w(w({},s),(0,m.k)(h)),(0,m.k)(L(c))),Y=/^[0-9]+[\.[0-9]+]?$/.test(g.text)?"number-"+((null===(t=g.text.split("."))||void 0===t||null===(r=t[1])||void 0===r?void 0:r.length)||0):"text"===g.cellType?"text":void 0;return T?null:l().createElement("td",{id:a+"-"+i,style:w(w({},j),{},{width:1.5*I}),colSpan:b,rowSpan:O,className:Y},l().createElement("div",{className:"bind"===g.cellType?"system-time":"",style:{width:b>1?"100%":I,height:R,whiteSpace:"pre-wrap"},suppressContentEditableWarning:!0,contentEditable:D,onClick:function(){return function(e,t){t&&"slashHeader"===e.cellType&&v.message.warning(N("斜表头暂不支持修改，如有需求，请到编辑页面修改"))}(g,D)},onKeyDown:function(e){13==e.keyCode&&e.preventDefault()},onBlur:function(e){var t=function e(t){var r;return t&&"#text"!==(null==t?void 0:t.nodeName)?e(null==t||null===(r=t.childNodes)||void 0===r?void 0:r[0]):t};S&&S((function(r){var n,i=_.cloneDeep(r);if(!_.isArray(r))return i;var a=r.findIndex((function(e){return e.row===M&&e.col===P})),o={row:M,col:P,text:null===(n=t(e.target))||void 0===n?void 0:n.data};return a>-1?i.splice(a,1,o):i.push(o),i}))}},function(e,t){var r;return e&&"text"===e.cellType?null!==(r=e.text)&&void 0!==r?r:"":e&&"slashHeader"===e.cellType?function(e,t,r,n){var i,a=n&&n.textDecoration?n.textDecoration:"",o=n&&n.color?n.color:"black",s=n&&n.fontSize?n.fontSize:"14px";return i=!e||e.length<=2?l().createElement("svg",{style:{textDecoration:a,fill:o},width:"100%",height:"100%",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},l().createElement("text",{textAnchor:"middle",fontSize:s,x:"70%",y:"50%"},e&&e[0]?e[0]:""),l().createElement("line",{x1:"0",y1:"0",x2:"100%",y2:"100%",style:{stroke:o}}),l().createElement("text",{textAnchor:"middle",fontSize:s,x:"30%",y:"80%"},e&&e[1]?e[1]:"")):3===e.length?l().createElement("svg",{style:{textDecoration:a,fill:o},width:"100%",height:r,version:"1.1",xmlns:"http://www.w3.org/2000/svg"},l().createElement("text",{textAnchor:"middle",fontSize:s,x:"80%",y:.35*r},e&&e[0]?e[0]:""),l().createElement("line",{x1:"0",y1:"0",x2:"100%",y2:.6*r,style:{stroke:o}}),l().createElement("text",{textAnchor:"middle",fontSize:s,x:"70%",y:.85*r},e&&e[1]?e[1]:""),l().createElement("line",{x1:"0",y1:"0",x2:"60%",y2:r,style:{stroke:o}}),l().createElement("text",{textAnchor:"middle",fontSize:s,x:"20%",y:.9*r},e&&e[2]?e[2]:"")):l().createElement("svg",{style:{textDecoration:a,fill:o},width:"100%",height:r,version:"1.1",xmlns:"http://www.w3.org/2000/svg"},l().createElement("text",{textAnchor:"middle",fontSize:s,x:"90%",y:.4*r},e&&e[0]?e[0]:""),l().createElement("line",{x1:"0",y1:"0",x2:"100%",y2:.5*r,style:{stroke:o}}),l().createElement("text",{textAnchor:"middle",fontSize:s,x:"80%",y:.7*r},e&&e[1]?e[1]:""),l().createElement("line",{x1:"0",y1:"0",x2:"100%",y2:r,style:{stroke:o}}),l().createElement("text",{textAnchor:"middle",fontSize:s,x:"50%",y:.9*r},e&&e[2]?e[2]:""),l().createElement("line",{x1:"0",y1:"0",x2:"50%",y2:r,style:{stroke:o}}),l().createElement("text",{textAnchor:"middle",fontSize:s,x:"20%",y:r},e&&e[3]?e[3]:"")),l().createElement("div",{style:{overflow:"hidden",height:r}},i)}(e.slashContent,0,R,j):""}(g)),l().createElement(x,e))};const T=function(e){var t,r=e.tdList,i=void 0===r?[]:r,a=e.heights,o=void 0===a?[]:a,s=e.widths,u=void 0===s?[]:s,c=e.edit,p=void 0!==c&&c,h=e.rowNum;return l().createElement("tr",{style:{height:null!==(t=o[h])&&void 0!==t?t:30}},i.map((function(t,r){return l().createElement(O,(0,n.Z)({key:r,meta:t,widths:u,heights:o,rowNum:h,colNum:r,edit:p},e))})))};var A=r(79236),C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;if(e.variable){var n,i,a,o=null===(n=r.tags)||void 0===n?void 0:n.find((function(t){return t.id===e.variable})),s=null===(i=r.tableInfo)||void 0===i||null===(a=i.table)||void 0===a?void 0:a.colors;return null==t?void 0:t.map((function(t){var r,n,i,a=t;if(e.showEnum&&(null==o||null===(r=o.tagValue)||void 0===r||null===(n=r.enum)||void 0===n?void 0:n.length)>0&&(null==o||null===(i=o.tagValue)||void 0===i||i.enum.forEach((function(e){e.value===t.toString()&&(a=e.label)}))),e.warningColor){if(null!=s&&s.warning3){var l,u,c,p;if(null!=o&&null!==(l=o.rules)&&void 0!==l&&l.hhigh&&(null==o||null===(u=o.rules)||void 0===u?void 0:u.hhigh)<t)return{v:a,color:s.warning3};if(null!=o&&null!==(c=o.rules)&&void 0!==c&&c.llow&&(null==o||null===(p=o.rules)||void 0===p?void 0:p.llow)>t)return{v:a,color:s.warning3}}if(null!=s&&s.warning2){var h,d,f,m;if(null!=o&&null!==(h=o.rules)&&void 0!==h&&h.high&&(null==o||null===(d=o.rules)||void 0===d?void 0:d.high)<t)return{v:a,color:s.warning2};if(null!=o&&null!==(f=o.rules)&&void 0!==f&&f.low&&(null==o||null===(m=o.rules)||void 0===m?void 0:m.low)>t)return{v:a,color:s.warning2}}}return{v:a}}))}return null==t?void 0:t.map((function(e){return{v:e}}))};function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S=function(e,t){var r=e.rows,i=r.cellList,c=r.queryData,h=r.rowTypes,f=r.timeList,m=e.loading,v=e.edit,g=e.report,y=e.setEditData,_=e.editData,b=(0,s.useState)([[]]),x=(0,o.Z)(b,2),E=x[0],w=x[1],O=(0,s.useState)([]),M=(0,o.Z)(O,2),S=M[0],k=M[1],I=(0,s.useState)([]),R=(0,o.Z)(I,2),L=R[0],N=R[1],j=(0,s.useState)([]),Y=(0,o.Z)(j,2),B=Y[0],V=Y[1],U=(0,s.useState)(0),H=(0,o.Z)(U,2),F=H[0],Z=H[1],W=(0,s.useState)(!1),q=(0,o.Z)(W,2),K=q[0],z=q[1],X=(0,s.useState)(0),G=(0,o.Z)(X,2),$=G[0],Q=G[1],J=(0,s.useState)(e.rows.rowHeights?(0,a.Z)(e.rows.rowHeights):[]),ee=(0,o.Z)(J,2),te=ee[0],re=ee[1],ne=(0,s.useState)(e.rows.colWidths?(0,a.Z)(e.rows.colWidths):[]),ie=(0,o.Z)(ne,2),ae=ie[0],oe=ie[1],se=(0,s.useState)(e.rows.mergeCells?(0,a.Z)(e.rows.mergeCells):[]),le=(0,o.Z)(se,2),ue=le[0],ce=le[1];(0,s.useEffect)((function(){if(i){var t,r,n,o,s,l,u;b=i,x=(0,a.Z)(b),E=1,b&&b.length>0&&(b.forEach((function(e,t){e.props&&"right"===e.props.showDirection&&("variable"===e.props.cellType&&e.props.variable||"formula"===e.props.cellType&&e.props.formula)&&(x[t]=P(P({},e),{},{props:P(P({},e.props),{},{num:E})}),E++)})),b.forEach((function(e,t){e.props&&"down"===e.props.showDirection&&("variable"===e.props.cellType&&e.props.variable||"formula"===e.props.cellType&&e.props.formula)&&(x[t]=P(P({},e),{},{props:P(P({},e.props),{},{num:E})}),E++)})),b.forEach((function(e,t){e.props&&"none"===e.props.showDirection&&("variable"===e.props.cellType&&e.props.variable||"formula"===e.props.cellType&&e.props.formula)&&(x[t]=P(P({},e),{},{props:P(P({},e.props),{},{num:E})}),E++)}))),l=function(e,t){if("free"===g.reportType)return null!=e?e:[];var r="up";return t.forEach((function(e){e.props&&"time"===e.props.cellType&&"down"===e.props.sortMode&&(r="down")})),"down"===r?(null==e?void 0:e.reverse())||[]:null!=e?e:[]}(c,t=x),t=function(e){var t=[[]];return e[0]instanceof Array?t=e:e.forEach((function(e){t[e.row]||(t[e.row]=[]),t[e.row][e.col]=P({},e)})),t}(t);var d=function(e,t,r,n,i){var a={list:e,heights:[],widths:[],rowTypesTemp:[]},o=0,s=0;e.forEach((function(e,t){e.forEach((function(e,r){e.props&&("text"!==e.props.cellType||e.props.text)&&(o=Math.max(t,o),s=Math.max(r,s))}))})),n&&n.forEach((function(e){o=Math.max(o,e.row+e.rowspan-1),s=Math.max(s,e.col+e.colspan-1)}));var l=e.slice(0,o+1);return a.list=l.map((function(e){return e.slice(0,s+1)})),a.heights=t.slice(0,o+1),a.widths=r.slice(0,s+1),a.rowTypesTemp=i.slice(0,o+1),a}(t,e.rows.rowHeights,e.rows.colWidths,e.rows.mergeCells,h);t=d.list,r=d.heights,n=d.widths,u=d.rowTypesTemp;var m=function(e,t,r,n){var i={list:[],heights:[],merge:[]},a=[];t.forEach((function(e,t){"T"===e&&a.push(t)})),t.forEach((function(e,t){"RT"===e&&a.push(t)})),t.forEach((function(e,t){""===e&&a.push(t)})),t.forEach((function(e,t){"RE"===e&&a.push(t)})),t.forEach((function(e,t){"E"===e&&a.push(t)}));for(var o=0;o<a.length;o++)i.list.push(e[a[o]]),i.heights.push(r[a[o]]);return i.merge=n.map((function(e){return P(P({},e),{},{row:a.indexOf(e.row)})})),i}(t,u,r,e.rows.mergeCells);if(t=m.list,r=m.heights,o=m.merge,"free"===g.reportType){t=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=p().cloneDeep(e),i=0;return e.forEach((function(a,o){a.forEach((function(a,s){if(a.props&&"variable"===a.props.cellType){var l,u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(/^[A-Z]+\(\"[a-zA-Z0-9\u4e00-\u9fa5\$\-\_\:]+\"\)$/.test(e.variable)){var r,n,i,a,o=function(e,t){var r,n,i,a,o,s,l,u=null===(r=t.tableInfo)||void 0===r||null===(n=r.device)||void 0===n||null===(i=n.tags)||void 0===i?void 0:i.find((function(t){return t.id===e}));return u||(u=null===(a=t.tableInfo)||void 0===a||null===(o=a.computed)||void 0===o||null===(s=o.tags)||void 0===s?void 0:s.find((function(t){return t.id===e}))),!u&&t.tableData&&(u=null===(l=t.tableData.tags)||void 0===l?void 0:l.find((function(t){return t.id===e}))),u}(null===(r=e.variable.split('("')[1])||void 0===r||null===(n=r.split('")'))||void 0===n?void 0:n[0],e),s=null===(i=e.tableInfo)||void 0===i||null===(a=i.table)||void 0===a?void 0:a.colors;return null==t?void 0:t.map((function(t){var r,n,i,a=t;if(e.showEnum&&(null==o||null===(r=o.tagValue)||void 0===r||null===(n=r.enum)||void 0===n?void 0:n.length)>0&&(null==o||null===(i=o.tagValue)||void 0===i||i.enum.forEach((function(e){e.value===t.toString()&&(a=e.label)}))),e.warningColor){if(null!=s&&s.warning3){var l,u,c,p;if(null!=o&&null!==(l=o.rules)&&void 0!==l&&l.hhigh&&(null==o||null===(u=o.rules)||void 0===u?void 0:u.hhigh)<t)return{v:a,color:s.warning3};if(null!=o&&null!==(c=o.rules)&&void 0!==c&&c.llow&&(null==o||null===(p=o.rules)||void 0===p?void 0:p.llow)>t)return{v:a,color:s.warning3}}if(null!=s&&s.warning2){var h,d,f,m;if(null!=o&&null!==(h=o.rules)&&void 0!==h&&h.high&&(null==o||null===(d=o.rules)||void 0===d?void 0:d.high)<t)return{v:a,color:s.warning2};if(null!=o&&null!==(f=o.rules)&&void 0!==f&&f.low&&(null==o||null===(m=o.rules)||void 0===m?void 0:m.low)>t)return{v:a,color:s.warning2}}}return{v:a}}))}return null==t?void 0:t.map((function(e){return{v:e}}))}(null===(l=e[o][s])||void 0===l?void 0:l.props,t[a.props.num-1]);if("right"===a.props.showDirection)null==u||u.forEach((function(e,t){var r,i,l=null!==(r=a.styleCodeStr)&&void 0!==r?r:"",u=l.slice(0,l.length-1)+(null!=e&&e.color?"color: ".concat(e.color,";"):"")+l.slice(l.length-1);n[o][s+t]={style:a.style,styleObj:a.styleObj,styleCodeStr:u,props:{cellType:"text",text:null==e||null===(i=e.v)||void 0===i?void 0:i.toString()}}}));else if("down"===a.props.showDirection)null==u||u.forEach((function(e,t){var r,i;n[o+t]||(n[o+t]=[]);var l=null!==(r=a.styleCodeStr)&&void 0!==r?r:"",u=l.slice(0,l.length-1)+(null!=e&&e.color?"color: ".concat(e.color,";"):"")+l.slice(l.length-1);n[o+t][s]={style:a.style,styleObj:a.styleObj,styleCodeStr:u,props:{cellType:"text",text:null==e||null===(i=e.v)||void 0===i?void 0:i.toString()}}}));else{var c,p,h,d,f=null!==(c=a.styleCodeStr)&&void 0!==c?c:"",m=f.slice(0,f.length-1)+(null!=u&&null!==(p=u[0])&&void 0!==p&&p.color?"color: ".concat(u[0].color,";"):"")+f.slice(f.length-1);n[o][s]={style:a.style,styleObj:a.styleObj,styleCodeStr:m,props:{cellType:"text",text:null==u||null===(h=u[0])||void 0===h||null===(d=h.v)||void 0===d?void 0:d.toString()}}}}else if(a.props&&"time"===a.props.cellType){var v=r[i];"right"===a.props.showDirection?null==v||v.forEach((function(e,t){n[o][s+t]={style:a.style,styleObj:a.styleObj,styleCodeStr:a.styleCodeStr,props:{cellType:"text",text:e}}})):"down"===a.props.showDirection?null==v||v.forEach((function(e,t){n[o+t]||(n[o+t]=[]),n[o+t]&&(n[o+t][s]={style:a.style,styleObj:a.styleObj,styleCodeStr:a.styleCodeStr,props:{cellType:"text",text:e}})})):n[o][s]={style:a.style,styleObj:a.styleObj,styleCodeStr:a.styleCodeStr,props:{cellType:"text",text:null==v?void 0:v[0]}},i++}}))})),n}(t,l,f);var v=function(e,t,r){var n=(0,a.Z)(e),i=(0,a.Z)(t),o=(0,a.Z)(r),s=Math.max.apply(Math,(0,a.Z)(n.map((function(e){return e.length}))));return o=[].concat((0,a.Z)(o),(0,a.Z)(new Array(s-o.length).fill(100))),n.forEach((function(e,t){i[t]||i.push(30);for(var r=0;r<s;r++)e[r]||(e[r]={})})),{list:n,heights:i,widths:o}}(t,r,n);t=v.list,r=v.heights,n=v.widths,t=(0,A.y_)(t)}else if(l){var y=function(e,t,r,n,i){var o={list:[],heights:(0,a.Z)(t),widths:(0,a.Z)(r),firstVariableRow:null},s=!1,l=!1;e.forEach((function(e){var t=[];e.forEach((function(e,r){if(t.push(e),e.props&&["variable","formula"].indexOf(e.props.cellType)>-1)if(t.pop(),"right"===e.props.showDirection){var l,u=n.map((function(t){return t[e.props.num]})),c=C(e.props,u,i).map((function(t){var r,n,i=null!==(r=e.styleCodeStr)&&void 0!==r?r:"",a=i.slice(0,i.length-1)+(null!=t&&t.color?"color: ".concat(t.color,";"):"")+i.slice(i.length-1);return{style:e.style,styleObj:e.styleObj,styleCodeStr:a,props:{cellType:"text",text:null==t||null===(n=t.v)||void 0===n?void 0:n.toString()}}}));t=[].concat((0,a.Z)(t),(0,a.Z)(c)),s||((l=o.widths).splice.apply(l,[r,1].concat((0,a.Z)(n.map((function(e){return o.widths[r]}))))),s=!0)}else t.push(e);else if(e.props&&"time"===e.props.cellType)if(t.pop(),"right"===e.props.showDirection){var p,h=n.map((function(t){return{style:e.style,styleObj:e.styleObj,styleCodeStr:e.styleCodeStr,props:{cellType:"text",text:t[0]}}}));t=[].concat((0,a.Z)(t),(0,a.Z)(h)),s||((p=o.widths).splice.apply(p,[r,1].concat((0,a.Z)(n.map((function(e){return o.widths[r]}))))),s=!0)}else t.push(e)})),o.list.push(t)})),o.list=fe(o.list);var u=[];o.list.forEach((function(e,t){var r=[];e.forEach((function(e,s){if(r.push(e),e.props&&["variable","formula"].indexOf(e.props.cellType)>-1)if(r.pop(),"down"===e.props.showDirection){var u=n.map((function(t){return t[e.props.num]})),c=C(e.props,u,i);o.firstVariableRow||(o.firstVariableRow=s);var p,h=c.map((function(t){var r,n,i=null!==(r=e.styleCodeStr)&&void 0!==r?r:"",a=i.slice(0,i.length-1)+(null!=t&&t.color?"color: ".concat(t.color,";"):"")+i.slice(i.length-1);return{style:e.style,styleObj:e.styleObj,styleCodeStr:a,props:{cellType:"text",text:null==t||null===(n=t.v)||void 0===n?void 0:n.toString()}}}));r=[].concat((0,a.Z)(r),(0,a.Z)(h)),l||((p=o.heights).splice.apply(p,[s,1].concat((0,a.Z)(n.map((function(e){return o.heights[s]}))))),l=!0)}else r.push(e);else if(e.props&&"time"===e.props.cellType)if(r.pop(),"down"===e.props.showDirection){o.firstVariableRow||(o.firstVariableRow=t);var d,f=n.map((function(t){return{style:e.style,styleObj:e.styleObj,styleCodeStr:e.styleCodeStr,props:{cellType:"text",text:t[0]}}}));r=[].concat((0,a.Z)(r),(0,a.Z)(f)),l||((d=o.heights).splice.apply(d,[s,1].concat((0,a.Z)(n.map((function(e){return o.heights[s]}))))),l=!0)}else r.push(e)})),u.push(r)}));var c=[];return u.forEach((function(e){var t=[];e.forEach((function(e,r){if(t.push(e),e.props&&["variable","formula"].indexOf(e.props.cellType)>-1)if(t.pop(),"none"===e.props.showDirection){var i=n.map((function(t){return t[e.props.num]})).join(", ");t.push({style:e.style,styleObj:e.styleObj,styleCodeStr:e.styleCodeStr,props:{cellType:"text",text:i}})}else t.push(e);else if(e.props&&"time"===e.props.cellType)if(t.pop(),"none"===e.props.showDirection){var a=n.map((function(e){return e[0]})).join(", ");t.push({style:e.style,styleObj:e.styleObj,styleCodeStr:e.styleCodeStr,props:{cellType:"text",text:a}})}else t.push(e)})),c.push(t)})),o.list=fe(c),o}(t,r,n,l,g);t=y.list,r=y.heights,n=y.widths,s=y.firstVariableRow,o=function(e,t,r){return e.map((function(e){return P(P({},e),{},{row:t&&e.row>t?e.row+r-1:e.row})}))}(o,s,l.length)}t=function(e,t){var r=[];return e.forEach((function(e,n){var i=[];e.forEach((function(e,r){var a=P(P({},e),{},{row:n,col:r});t.forEach((function(e){e.row===n&&e.col===r?a=P(P({},a),{},{rowspan:e.rowspan,colspan:e.colspan}):n>=e.row&&n<e.row+e.rowspan&&r>=e.col&&r<e.col+e.colspan&&(a=P(P({},a),{},{disappear:!0}))})),i.push(a)})),r.push(i)})),r}(t,o),t=function(e,t){var r=p().cloneDeep(e);return p().isArray(t)||(t=[]),t.forEach((function(e){var t;null!=r&&null!==(t=r[e.row])&&void 0!==t&&t[e.col]&&(r[e.row][e.col].props={cellType:"text",text:e.text})})),r}(t,_),setTimeout((function(){var e=document.getElementById("tableRender").parentNode.offsetWidth;n=me(n,e),re(r),oe(n),ce(o);var i=h.filter((function(e){return"T"===e||"RT"===e})).length;Z(F),k(t.slice(0,i)),N(t.slice(i)),Q(function(){var e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=document.createElement("div");e.appendChild(t);var r=e.offsetWidth-t.offsetWidth;return e.parentNode.removeChild(e),r}()),w(t),V([])}),0)}var b,x,E}),[i,c,f]),l().useEffect((function(){var e=setInterval((function(){var e=document.getElementsByClassName("system-time");if(e.length>0)for(var t=0;t<e.length;t++)e[t].innerHTML=d()().format("YYYY-MM-DD HH:mm:ss")}),1e3);return function(){clearInterval(e)}}),[]),l().useEffect((function(){setTimeout((function(){Z(function(e){if(!document.getElementById("tableViewThead"))return 0;var t=(0,a.Z)(document.getElementById("tableViewThead").getElementsByTagName("tr")).slice(0,e);if(!t.length)return 0;var r,n=de(t[0]),i=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}(t);try{for(i.s();!(r=i.n()).done;)n+=r.value.clientHeight}catch(e){i.e(e)}finally{i.f()}return n}(S.length))}),0)}),[S]),l().useEffect((function(){setTimeout((function(){var e;z(!!(e=document.querySelector("#tableViewTbody"))&&e.scrollHeight>e.clientHeight+1)}),0)}),[L]),(0,s.useImperativeHandle)(t,(function(){return{getData:function(){return{cellList:(e=E,t=S.length,r=p().cloneDeep(e),n=(0,a.Z)(document.getElementById("tableViewThead").getElementsByTagName("tr")).slice(0,t),i=document.getElementById("tableViewTbody").getElementsByTagName("tr"),o=function(e){for(var t=0;t<e.length;t++)for(var n=e[t].getElementsByTagName("td"),i=0;i<n.length;i++){var a=n[i];if(""!==a.getElementsByTagName("div")[0].innerHTML){var o=a.getAttribute("id").split("-");"slashHeader"!==r[o[0]][o[1]].props.cellType&&(r[o[0]][o[1]].props={cellType:"text",text:"<br>"===a.getElementsByTagName("div")[0].innerHTML?"":a.getElementsByTagName("div")[0].innerHTML})}else{var s=a.getAttribute("id").split("-");r[s[0]][s[1]].props={cellType:"text",text:""}}}},o(n),o(i),r),mergeCells:ue,colWidths:ae,rowHeights:te,rowTypes:te.map((function(){return""}))};var e,t,r,n,i,o}}}));var pe,he,de=function(e){var t=(0,a.Z)(e.getElementsByTagName("td"));return Math.max.apply(Math,(0,a.Z)(t.map((function(e){return parseFloat(e.style.borderTopWidth)||1}))))};function fe(e){var t=[],r=0;e.forEach((function(e){e.forEach((function(e,t){e&&t>r&&(r=t)}))}));for(var n=[],i=0;i<r+1;i++){n=[];for(var a=0;a<e.length;a++)n.push(e[a][i]?e[a][i]:{props:{cellType:"text"}});t.push(n)}return t}function me(e,t){var r=[],n=e.filter((function(e){return 100===e})).length,i=e.reduce((function(e,t){return 100===t?e:e+t}),0),a=(t-i-20)/n>100?(t-i-20)/n:100;return e.forEach((function(e){100===e?r.push(a):r.push(e)})),r}pe=document.querySelector(".report-widget")?null===(he=document.querySelector(".report-widget"))||void 0===he?void 0:he.offsetHeight:document.querySelector("main.main-content")?document.querySelector("main.main-content").offsetHeight-60:document.getElementsByClassName("dashboard-widget-AppPage")[0]?document.getElementsByClassName("dashboard-widget-AppPage")[0].offsetHeight-170:"calc(100vh - 120px)";var ve={heights:te,widths:(0,A.g4)(ae,e.rows.colWidths,E,B,me),edit:v,tdObjList:E,filterList:B,setFilterList:V,setEditData:y},ge=(0,A.mB)(E,B);return m?l().createElement(u.Loading,null):l().createElement("div",{style:{overflowY:"hidden",width:"100%",height:pe}},l().createElement("div",{id:"tableViewThead",style:{display:"inline-block",float:"left",height:"".concat(F,"px"),overflowY:"hidden",paddingRight:K?"".concat($,"px"):0}},l().createElement("table",{border:"1",bordercolor:"#ccc",cellSpacing:"0",cellPadding:"0",style:{tableLayout:"fixed"}},l().createElement("tbody",null,ge.map((function(e,t){return l().createElement(T,(0,n.Z)({key:t,tdList:e,rowNum:t},ve))}))))),l().createElement("div",{style:{display:"inline-block",float:"left",height:"calc(100% - ".concat(F,"px)"),overflow:"hidden"}},l().createElement("div",{id:"tableViewTbody",style:{height:"100%",overflow:"auto"}},l().createElement("table",{border:"1",bordercolor:"#ccc",cellSpacing:"0",cellPadding:"0",style:{tableLayout:"fixed",marginTop:S.length?"-".concat(F,"px"):0}},l().createElement("tbody",null,ge.map((function(e,t){return l().createElement(T,(0,n.Z)({key:t,tdList:e,rowNum:t},ve))})))))),l().createElement("table",{id:"tableRender",border:"1",bordercolor:"#ccc",cellSpacing:"0",cellPadding:"0",style:{display:"none",tableLayout:"fixed"}},l().createElement("tbody",null,ge.map((function(e,t){return l().createElement(T,(0,n.Z)({key:t,tdList:e,rowNum:t},ve))})))))};const k=(0,s.forwardRef)(S)},69424:(e,t,r)=>{"use strict";r.d(t,{k:()=>n});var n=function(e){e.indexOf("#_{")>-1&&(e=e.substring(3,e.length-1));var t={},r=e.split(";");return r.length>0&&r.forEach((function(e){e.split(":")[1]&&(t[function(e){var t="",r=e.split("-");return r.length>0&&r.forEach((function(e){t+=e.replace(e[0],e[0].toUpperCase())})),t=t.replace(t[0],t[0].toLowerCase())}(e.split(":")[0].trim())]=e.split(":")[1].trim())})),t}},261:(e,t,r)=>{"use strict";r.d(t,{x:()=>o});var n=r(4942);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e){var t,r=null==e||null===(t=e.cellList)||void 0===t?void 0:t.map((function(e){var t,r;return"totalCell"===(null===(t=e.props)||void 0===t?void 0:t.cellType)?a(a({},e),{},{props:{cellType:"computeCell",formula:"SUM(".concat(null===(r=e.props.totalRange)||void 0===r?void 0:r.replace("-",":"),")")}}):e}));return a(a({},e),{},{cellList:r})}},44648:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Al:()=>ifSameFilter,E0:()=>getVariable,QE:()=>variableDeal,T3:()=>sortScript,UY:()=>combineReducers,Yk:()=>rowMap,sf:()=>dptFilter});var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(42982),moment__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(48488),moment__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(12611),lodash__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);function combineReducers(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var i=t[n];"function"==typeof e[i]&&(r[i]=e[i])}var a=Object.keys(r);return function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=!1,i={},o=0;o<a.length;o++){var s=a[o],l=r[s],u=e[s],c=l(u,t);i[s]=c,n=n||c!==u}return n?i:e}}var getVariable=function(e){var t=[];return e&&e.length>0&&(e.forEach((function(e){e.props&&"right"===e.props.showDirection&&("variable"===e.props.cellType&&e.props.variable||"formula"===e.props.cellType&&e.props.formula)&&t.push(e.props)})),e.forEach((function(e){e.props&&"down"===e.props.showDirection&&("variable"===e.props.cellType&&e.props.variable||"formula"===e.props.cellType&&e.props.formula)&&t.push(e.props)})),e.forEach((function(e){e.props&&"none"===e.props.showDirection&&("variable"===e.props.cellType&&e.props.variable||"formula"===e.props.cellType&&e.props.formula)&&t.push(e.props)}))),t},ifSameTime=function(e,t,r){return"years"===r?(null==e?void 0:e.substring(0,4))===(null==t?void 0:t.substring(0,4)):"months"===r?(null==e?void 0:e.substring(0,7))===(null==t?void 0:t.substring(0,7)):"weeks"===r?(null==e?void 0:e.substring(0,4))===(null==t?void 0:t.substring(0,4))&&moment__WEBPACK_IMPORTED_MODULE_0___default()(e).week()===moment__WEBPACK_IMPORTED_MODULE_0___default()(t).week():"days"===r?(null==e?void 0:e.substring(0,10))===(null==t?void 0:t.substring(0,10)):"hours"===r&&(null==e?void 0:e.substring(0,13))===(null==t?void 0:t.substring(0,13))},ifSameFilter=function(e,t,r){if("free"===r.reportType)return ifSameTime(null==e?void 0:e.time,null==t?void 0:t.time,r.interval);var n,i,a,o,s,l,u,c,p,h,d,f,m,v,g;if(ifSameTime(null==e||null===(n=e.range)||void 0===n?void 0:n.gte,null==t||null===(i=t.range)||void 0===i?void 0:i.gte,r.interval)&&ifSameTime(null==e||null===(a=e.range)||void 0===a?void 0:a.lte,null==t||null===(o=t.range)||void 0===o?void 0:o.lte,r.interval)&&ifSameTime(null==e||null===(s=e.time)||void 0===s?void 0:s.time,null==t||null===(l=t.time)||void 0===l?void 0:l.time,r.interval)&&(m=!0),null!=e&&null!==(u=e.department)&&void 0!==u&&u.length||null!=t&&null!==(c=t.department)&&void 0!==c&&c.length){if((null==e||null===(p=e.department)||void 0===p?void 0:p.length)===(null==t||null===(h=t.department)||void 0===h?void 0:h.length)){var y,_=!0;null==e||null===(y=e.department)||void 0===y||y.forEach((function(e,r){var n,i;(null==e?void 0:e.id)!==(null==t||null===(n=t.department)||void 0===n||null===(i=n[r])||void 0===i?void 0:i.id)&&(_=!1)})),v=_}}else v=!0;return(null==e||null===(d=e.node)||void 0===d?void 0:d.id)===(null==t||null===(f=t.node)||void 0===f?void 0:f.id)&&(g=!0),m&&v&&g},rowMap=function(e,t,r,n){var i=getVariable(n.cellList)[t],a=i.bitNum?i.bitNum:lodash__WEBPACK_IMPORTED_MODULE_1___default().isNumber(r[i.variable])?r[i.variable]:3;return i.addZero?lodash__WEBPACK_IMPORTED_MODULE_1___default().isNumber(e)?e.toFixed(a):e||"n/a":lodash__WEBPACK_IMPORTED_MODULE_1___default().isNumber(e)?lodash__WEBPACK_IMPORTED_MODULE_1___default().round(e,a):e||"n/a"},variableDeal=function(e){var t=e.variable,r={fields:[],where:[]};return t?/^(MAX|MIN)\([^/+^/-]*\([^/+^/-]*\)[^/+^/-]*\)$/.test(t)?(r.mergeResult=lodash__WEBPACK_IMPORTED_MODULE_1___default().toLower(t.substring(0,3)),r.fields=[t.substring(4,t.length-1)]):-1===t.indexOf("(")&&-1===t.indexOf(")")?r.fields=["MEAN(".concat(t,")")]:r.fields=[t]:r.fields=["MEAN(NULL)"],r},sortScript=function sortScript(varList,results,bitNumObj,table,report){var _results$filter,_queryData,_queryData2,_queryData3,queryData=null==results||null===(_results$filter=results.filter((function(e){return e})))||void 0===_results$filter?void 0:_results$filter.map((function(e){var t;return null==e||null===(t=e[0])||void 0===t?void 0:t.values}));return queryData=null===(_queryData=queryData)||void 0===_queryData?void 0:_queryData.map((function(item,index){var v=varList[index],result=(0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__.Z)(item);return null!=v&&v.dealScript&&eval(null==v?void 0:v.dealScript),result})),queryData=queryData.map((function(e){return e.map((function(e){return null==e?void 0:e[1]}))})),queryData=null===(_queryData2=queryData)||void 0===_queryData2?void 0:_queryData2.map((function(e,t){return null==e?void 0:e.map((function(e){return rowMap(e,t,bitNumObj,table)}))})),queryData=null===(_queryData3=queryData)||void 0===_queryData3?void 0:_queryData3.map((function(e,t){var r=varList[t];return"down"===(null==r?void 0:r.sortMode)?lodash__WEBPACK_IMPORTED_MODULE_1___default().reverse(e):e})),queryData};function dptFilter(){var e={};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(t){var r,n=(null===(r=t.table)||void 0===r?void 0:r.id)||"none";e[n]?e[n].push(t.id):e[n]=[t.id]})),e}},19662:(e,t,r)=>{var n=r(60614),i=r(66330),a=TypeError;e.exports=function(e){if(n(e))return e;throw a(i(e)+" is not a function")}},39483:(e,t,r)=>{var n=r(4411),i=r(66330),a=TypeError;e.exports=function(e){if(n(e))return e;throw a(i(e)+" is not a constructor")}},96077:(e,t,r)=>{var n=r(60614),i=String,a=TypeError;e.exports=function(e){if("object"==typeof e||n(e))return e;throw a("Can't set "+i(e)+" as a prototype")}},51223:(e,t,r)=>{var n=r(5112),i=r(70030),a=r(3070).f,o=n("unscopables"),s=Array.prototype;null==s[o]&&a(s,o,{configurable:!0,value:i(null)}),e.exports=function(e){s[o][e]=!0}},31530:(e,t,r)=>{"use strict";var n=r(28710).charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},25787:(e,t,r)=>{var n=r(47976),i=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw i("Incorrect invocation")}},19670:(e,t,r)=>{var n=r(70111),i=String,a=TypeError;e.exports=function(e){if(n(e))return e;throw a(i(e)+" is not an object")}},41318:(e,t,r)=>{var n=r(45656),i=r(51400),a=r(26244),o=function(e){return function(t,r,o){var s,l=n(t),u=a(l),c=i(o,u);if(e&&r!=r){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===r)return e||c||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},9341:(e,t,r)=>{"use strict";var n=r(47293);e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){return 1},1)}))}},53671:(e,t,r)=>{var n=r(19662),i=r(47908),a=r(68361),o=r(26244),s=TypeError,l=function(e){return function(t,r,l,u){n(r);var c=i(t),p=a(c),h=o(c),d=e?h-1:0,f=e?-1:1;if(l<2)for(;;){if(d in p){u=p[d],d+=f;break}if(d+=f,e?d<0:h<=d)throw s("Reduce of empty array with no initial value")}for(;e?d>=0:h>d;d+=f)d in p&&(u=r(u,p[d],d,c));return u}};e.exports={left:l(!1),right:l(!0)}},41589:(e,t,r)=>{var n=r(51400),i=r(26244),a=r(86135),o=Array,s=Math.max;e.exports=function(e,t,r){for(var l=i(e),u=n(t,l),c=n(void 0===r?l:r,l),p=o(s(c-u,0)),h=0;u<c;u++,h++)a(p,h,e[u]);return p.length=h,p}},50206:(e,t,r)=>{var n=r(1702);e.exports=n([].slice)},17072:(e,t,r)=>{var n=r(5112)("iterator"),i=!1;try{var a=0,o={next:function(){return{done:!!a++}},return:function(){i=!0}};o[n]=function(){return this},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var a={};a[n]=function(){return{next:function(){return{done:r=!0}}}},e(a)}catch(e){}return r}},84326:(e,t,r)=>{var n=r(1702),i=n({}.toString),a=n("".slice);e.exports=function(e){return a(i(e),8,-1)}},70648:(e,t,r)=>{var n=r(51694),i=r(60614),a=r(84326),o=r(5112)("toStringTag"),s=Object,l="Arguments"==a(function(){return arguments}());e.exports=n?a:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=s(e),o))?r:l?a(t):"Object"==(n=a(t))&&i(t.callee)?"Arguments":n}},99920:(e,t,r)=>{var n=r(92597),i=r(53887),a=r(31236),o=r(3070);e.exports=function(e,t,r){for(var s=i(t),l=o.f,u=a.f,c=0;c<s.length;c++){var p=s[c];n(e,p)||r&&n(r,p)||l(e,p,u(t,p))}}},84964:(e,t,r)=>{var n=r(5112)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,"/./"[e](t)}catch(e){}}return!1}},49920:(e,t,r)=>{var n=r(47293);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},76178:e=>{e.exports=function(e,t){return{value:e,done:t}}},68880:(e,t,r)=>{var n=r(19781),i=r(3070),a=r(79114);e.exports=n?function(e,t,r){return i.f(e,t,a(1,r))}:function(e,t,r){return e[t]=r,e}},79114:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},86135:(e,t,r)=>{"use strict";var n=r(34948),i=r(3070),a=r(79114);e.exports=function(e,t,r){var o=n(t);o in e?i.f(e,o,a(0,r)):e[o]=r}},47045:(e,t,r)=>{var n=r(56339),i=r(3070);e.exports=function(e,t,r){return r.get&&n(r.get,t,{getter:!0}),r.set&&n(r.set,t,{setter:!0}),i.f(e,t,r)}},98052:(e,t,r)=>{var n=r(60614),i=r(3070),a=r(56339),o=r(13072);e.exports=function(e,t,r,s){s||(s={});var l=s.enumerable,u=void 0!==s.name?s.name:t;if(n(r)&&a(r,u,s),s.global)l?e[t]=r:o(t,r);else{try{s.unsafe?e[t]&&(l=!0):delete e[t]}catch(e){}l?e[t]=r:i.f(e,t,{value:r,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return e}},13072:(e,t,r)=>{var n=r(17854),i=Object.defineProperty;e.exports=function(e,t){try{i(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},19781:(e,t,r)=>{var n=r(47293);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:e=>{var t="object"==typeof document&&document.all,r=void 0===t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:r}},80317:(e,t,r)=>{var n=r(17854),i=r(70111),a=n.document,o=i(a)&&i(a.createElement);e.exports=function(e){return o?a.createElement(e):{}}},48324:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},98509:(e,t,r)=>{var n=r(80317)("span").classList,i=n&&n.constructor&&n.constructor.prototype;e.exports=i===Object.prototype?void 0:i},7871:(e,t,r)=>{var n=r(83823),i=r(35268);e.exports=!n&&!i&&"object"==typeof window&&"object"==typeof document},83823:e=>{e.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},71528:(e,t,r)=>{var n=r(88113);e.exports=/ipad|iphone|ipod/i.test(n)&&"undefined"!=typeof Pebble},6833:(e,t,r)=>{var n=r(88113);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},35268:(e,t,r)=>{var n=r(84326);e.exports="undefined"!=typeof process&&"process"==n(process)},71036:(e,t,r)=>{var n=r(88113);e.exports=/web0s(?!.*chrome)/i.test(n)},88113:e=>{e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:(e,t,r)=>{var n,i,a=r(17854),o=r(88113),s=a.process,l=a.Deno,u=s&&s.versions||l&&l.version,c=u&&u.v8;c&&(i=(n=c.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&o&&(!(n=o.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=o.match(/Chrome\/(\d+)/))&&(i=+n[1]),e.exports=i},80748:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},82109:(e,t,r)=>{var n=r(17854),i=r(31236).f,a=r(68880),o=r(98052),s=r(13072),l=r(99920),u=r(54705);e.exports=function(e,t){var r,c,p,h,d,f=e.target,m=e.global,v=e.stat;if(r=m?n:v?n[f]||s(f,{}):(n[f]||{}).prototype)for(c in t){if(h=t[c],p=e.dontCallGetSet?(d=i(r,c))&&d.value:r[c],!u(m?c:f+(v?".":"#")+c,e.forced)&&void 0!==p){if(typeof h==typeof p)continue;l(h,p)}(e.sham||p&&p.sham)&&a(h,"sham",!0),o(r,c,h,e)}}},47293:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},27007:(e,t,r)=>{"use strict";r(74916);var n=r(21470),i=r(98052),a=r(22261),o=r(47293),s=r(5112),l=r(68880),u=s("species"),c=RegExp.prototype;e.exports=function(e,t,r,p){var h=s(e),d=!o((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),f=d&&!o((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[u]=function(){return r},r.flags="",r[h]=/./[h]),r.exec=function(){return t=!0,null},r[h](""),!t}));if(!d||!f||r){var m=n(/./[h]),v=t(h,""[e],(function(e,t,r,i,o){var s=n(e),l=t.exec;return l===a||l===c.exec?d&&!o?{done:!0,value:m(t,r,i)}:{done:!0,value:s(r,t,i)}:{done:!1}}));i(String.prototype,e,v[0]),i(c,h,v[1])}p&&l(c[h],"sham",!0)}},22104:(e,t,r)=>{var n=r(34374),i=Function.prototype,a=i.apply,o=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?o.bind(a):function(){return o.apply(a,arguments)})},49974:(e,t,r)=>{var n=r(21470),i=r(19662),a=r(34374),o=n(n.bind);e.exports=function(e,t){return i(e),void 0===t?e:a?o(e,t):function(){return e.apply(t,arguments)}}},34374:(e,t,r)=>{var n=r(47293);e.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},46916:(e,t,r)=>{var n=r(34374),i=Function.prototype.call;e.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},76530:(e,t,r)=>{var n=r(19781),i=r(92597),a=Function.prototype,o=n&&Object.getOwnPropertyDescriptor,s=i(a,"name"),l=s&&"something"===function(){}.name,u=s&&(!n||n&&o(a,"name").configurable);e.exports={EXISTS:s,PROPER:l,CONFIGURABLE:u}},75668:(e,t,r)=>{var n=r(1702),i=r(19662);e.exports=function(e,t,r){try{return n(i(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}}},21470:(e,t,r)=>{var n=r(84326),i=r(1702);e.exports=function(e){if("Function"===n(e))return i(e)}},1702:(e,t,r)=>{var n=r(34374),i=Function.prototype,a=i.call,o=n&&i.bind.bind(a,a);e.exports=n?o:function(e){return function(){return a.apply(e,arguments)}}},35005:(e,t,r)=>{var n=r(17854),i=r(60614);e.exports=function(e,t){return arguments.length<2?(r=n[e],i(r)?r:void 0):n[e]&&n[e][t];var r}},71246:(e,t,r)=>{var n=r(70648),i=r(58173),a=r(68554),o=r(97497),s=r(5112)("iterator");e.exports=function(e){if(!a(e))return i(e,s)||i(e,"@@iterator")||o[n(e)]}},18554:(e,t,r)=>{var n=r(46916),i=r(19662),a=r(19670),o=r(66330),s=r(71246),l=TypeError;e.exports=function(e,t){var r=arguments.length<2?s(e):t;if(i(r))return a(n(r,e));throw l(o(e)+" is not iterable")}},58173:(e,t,r)=>{var n=r(19662),i=r(68554);e.exports=function(e,t){var r=e[t];return i(r)?void 0:n(r)}},10647:(e,t,r)=>{var n=r(1702),i=r(47908),a=Math.floor,o=n("".charAt),s=n("".replace),l=n("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,c=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,n,p,h){var d=r+e.length,f=n.length,m=c;return void 0!==p&&(p=i(p),m=u),s(h,m,(function(i,s){var u;switch(o(s,0)){case"$":return"$";case"&":return e;case"`":return l(t,0,r);case"'":return l(t,d);case"<":u=p[l(s,1,-1)];break;default:var c=+s;if(0===c)return i;if(c>f){var h=a(c/10);return 0===h?i:h<=f?void 0===n[h-1]?o(s,1):n[h-1]+o(s,1):i}u=n[c-1]}return void 0===u?"":u}))}},17854:function(e,t,r){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||this||Function("return this")()},92597:(e,t,r)=>{var n=r(1702),i=r(47908),a=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return a(i(e),t)}},3501:e=>{e.exports={}},842:e=>{e.exports=function(e,t){try{1==arguments.length?console.error(e):console.error(e,t)}catch(e){}}},60490:(e,t,r)=>{var n=r(35005);e.exports=n("document","documentElement")},64664:(e,t,r)=>{var n=r(19781),i=r(47293),a=r(80317);e.exports=!n&&!i((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},68361:(e,t,r)=>{var n=r(1702),i=r(47293),a=r(84326),o=Object,s=n("".split);e.exports=i((function(){return!o("z").propertyIsEnumerable(0)}))?function(e){return"String"==a(e)?s(e,""):o(e)}:o},42788:(e,t,r)=>{var n=r(1702),i=r(60614),a=r(5465),o=n(Function.toString);i(a.inspectSource)||(a.inspectSource=function(e){return o(e)}),e.exports=a.inspectSource},29909:(e,t,r)=>{var n,i,a,o=r(94811),s=r(17854),l=r(70111),u=r(68880),c=r(92597),p=r(5465),h=r(6200),d=r(3501),f="Object already initialized",m=s.TypeError,v=s.WeakMap;if(o||p.state){var g=p.state||(p.state=new v);g.get=g.get,g.has=g.has,g.set=g.set,n=function(e,t){if(g.has(e))throw m(f);return t.facade=e,g.set(e,t),t},i=function(e){return g.get(e)||{}},a=function(e){return g.has(e)}}else{var y=h("state");d[y]=!0,n=function(e,t){if(c(e,y))throw m(f);return t.facade=e,u(e,y,t),t},i=function(e){return c(e,y)?e[y]:{}},a=function(e){return c(e,y)}}e.exports={set:n,get:i,has:a,enforce:function(e){return a(e)?i(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!l(t)||(r=i(t)).type!==e)throw m("Incompatible receiver, "+e+" required");return r}}}},97659:(e,t,r)=>{var n=r(5112),i=r(97497),a=n("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[a]===e)}},43157:(e,t,r)=>{var n=r(84326);e.exports=Array.isArray||function(e){return"Array"==n(e)}},60614:(e,t,r)=>{var n=r(4154),i=n.all;e.exports=n.IS_HTMLDDA?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}},4411:(e,t,r)=>{var n=r(1702),i=r(47293),a=r(60614),o=r(70648),s=r(35005),l=r(42788),u=function(){},c=[],p=s("Reflect","construct"),h=/^\s*(?:class|function)\b/,d=n(h.exec),f=!h.exec(u),m=function(e){if(!a(e))return!1;try{return p(u,c,e),!0}catch(e){return!1}},v=function(e){if(!a(e))return!1;switch(o(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!d(h,l(e))}catch(e){return!0}};v.sham=!0,e.exports=!p||i((function(){var e;return m(m.call)||!m(Object)||!m((function(){e=!0}))||e}))?v:m},54705:(e,t,r)=>{var n=r(47293),i=r(60614),a=/#|\.prototype\./,o=function(e,t){var r=l[s(e)];return r==c||r!=u&&(i(t)?n(t):!!t)},s=o.normalize=function(e){return String(e).replace(a,".").toLowerCase()},l=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";e.exports=o},68554:e=>{e.exports=function(e){return null==e}},70111:(e,t,r)=>{var n=r(60614),i=r(4154),a=i.all;e.exports=i.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:n(e)||e===a}:function(e){return"object"==typeof e?null!==e:n(e)}},31913:e=>{e.exports=!1},47850:(e,t,r)=>{var n=r(70111),i=r(84326),a=r(5112)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==i(e))}},52190:(e,t,r)=>{var n=r(35005),i=r(60614),a=r(47976),o=r(43307),s=Object;e.exports=o?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return i(t)&&a(t.prototype,s(e))}},20408:(e,t,r)=>{var n=r(49974),i=r(46916),a=r(19670),o=r(66330),s=r(97659),l=r(26244),u=r(47976),c=r(18554),p=r(71246),h=r(99212),d=TypeError,f=function(e,t){this.stopped=e,this.result=t},m=f.prototype;e.exports=function(e,t,r){var v,g,y,_,b,x,E,w=r&&r.that,O=!(!r||!r.AS_ENTRIES),T=!(!r||!r.IS_RECORD),A=!(!r||!r.IS_ITERATOR),C=!(!r||!r.INTERRUPTED),M=n(t,w),P=function(e){return v&&h(v,"normal",e),new f(!0,e)},D=function(e){return O?(a(e),C?M(e[0],e[1],P):M(e[0],e[1])):C?M(e,P):M(e)};if(T)v=e.iterator;else if(A)v=e;else{if(!(g=p(e)))throw d(o(e)+" is not iterable");if(s(g)){for(y=0,_=l(e);_>y;y++)if((b=D(e[y]))&&u(m,b))return b;return new f(!1)}v=c(e,g)}for(x=T?e.next:v.next;!(E=i(x,v)).done;){try{b=D(E.value)}catch(e){h(v,"throw",e)}if("object"==typeof b&&b&&u(m,b))return b}return new f(!1)}},99212:(e,t,r)=>{var n=r(46916),i=r(19670),a=r(58173);e.exports=function(e,t,r){var o,s;i(e);try{if(!(o=a(e,"return"))){if("throw"===t)throw r;return r}o=n(o,e)}catch(e){s=!0,o=e}if("throw"===t)throw r;if(s)throw o;return i(o),r}},63061:(e,t,r)=>{"use strict";var n=r(13383).IteratorPrototype,i=r(70030),a=r(79114),o=r(58003),s=r(97497),l=function(){return this};e.exports=function(e,t,r,u){var c=t+" Iterator";return e.prototype=i(n,{next:a(+!u,r)}),o(e,c,!1,!0),s[c]=l,e}},51656:(e,t,r)=>{"use strict";var n=r(82109),i=r(46916),a=r(31913),o=r(76530),s=r(60614),l=r(63061),u=r(79518),c=r(27674),p=r(58003),h=r(68880),d=r(98052),f=r(5112),m=r(97497),v=r(13383),g=o.PROPER,y=o.CONFIGURABLE,_=v.IteratorPrototype,b=v.BUGGY_SAFARI_ITERATORS,x=f("iterator"),E="keys",w="values",O="entries",T=function(){return this};e.exports=function(e,t,r,o,f,v,A){l(r,t,o);var C,M,P,D=function(e){if(e===f&&L)return L;if(!b&&e in I)return I[e];switch(e){case E:case w:case O:return function(){return new r(this,e)}}return function(){return new r(this)}},S=t+" Iterator",k=!1,I=e.prototype,R=I[x]||I["@@iterator"]||f&&I[f],L=!b&&R||D(f),N="Array"==t&&I.entries||R;if(N&&(C=u(N.call(new e)))!==Object.prototype&&C.next&&(a||u(C)===_||(c?c(C,_):s(C[x])||d(C,x,T)),p(C,S,!0,!0),a&&(m[S]=T)),g&&f==w&&R&&R.name!==w&&(!a&&y?h(I,"name",w):(k=!0,L=function(){return i(R,this)})),f)if(M={values:D(w),keys:v?L:D(E),entries:D(O)},A)for(P in M)(b||k||!(P in I))&&d(I,P,M[P]);else n({target:t,proto:!0,forced:b||k},M);return a&&!A||I[x]===L||d(I,x,L,{name:f}),m[t]=L,M}},13383:(e,t,r)=>{"use strict";var n,i,a,o=r(47293),s=r(60614),l=r(70111),u=r(70030),c=r(79518),p=r(98052),h=r(5112),d=r(31913),f=h("iterator"),m=!1;[].keys&&("next"in(a=[].keys())?(i=c(c(a)))!==Object.prototype&&(n=i):m=!0),!l(n)||o((function(){var e={};return n[f].call(e)!==e}))?n={}:d&&(n=u(n)),s(n[f])||p(n,f,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:m}},97497:e=>{e.exports={}},26244:(e,t,r)=>{var n=r(17466);e.exports=function(e){return n(e.length)}},56339:(e,t,r)=>{var n=r(1702),i=r(47293),a=r(60614),o=r(92597),s=r(19781),l=r(76530).CONFIGURABLE,u=r(42788),c=r(29909),p=c.enforce,h=c.get,d=String,f=Object.defineProperty,m=n("".slice),v=n("".replace),g=n([].join),y=s&&!i((function(){return 8!==f((function(){}),"length",{value:8}).length})),_=String(String).split("String"),b=e.exports=function(e,t,r){"Symbol("===m(d(t),0,7)&&(t="["+v(d(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!o(e,"name")||l&&e.name!==t)&&(s?f(e,"name",{value:t,configurable:!0}):e.name=t),y&&r&&o(r,"arity")&&e.length!==r.arity&&f(e,"length",{value:r.arity});try{r&&o(r,"constructor")&&r.constructor?s&&f(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=p(e);return o(n,"source")||(n.source=g(_,"string"==typeof t?t:"")),e};Function.prototype.toString=b((function(){return a(this)&&h(this).source||u(this)}),"toString")},74758:e=>{var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n>0?r:t)(n)}},95948:(e,t,r)=>{var n,i,a,o,s,l=r(17854),u=r(49974),c=r(31236).f,p=r(20261).set,h=r(18572),d=r(6833),f=r(71528),m=r(71036),v=r(35268),g=l.MutationObserver||l.WebKitMutationObserver,y=l.document,_=l.process,b=l.Promise,x=c(l,"queueMicrotask"),E=x&&x.value;if(!E){var w=new h,O=function(){var e,t;for(v&&(e=_.domain)&&e.exit();t=w.get();)try{t()}catch(e){throw w.head&&n(),e}e&&e.enter()};d||v||m||!g||!y?!f&&b&&b.resolve?((o=b.resolve(void 0)).constructor=b,s=u(o.then,o),n=function(){s(O)}):v?n=function(){_.nextTick(O)}:(p=u(p,l),n=function(){p(O)}):(i=!0,a=y.createTextNode(""),new g(O).observe(a,{characterData:!0}),n=function(){a.data=i=!i}),E=function(e){w.head||n(),w.add(e)}}e.exports=E},78523:(e,t,r)=>{"use strict";var n=r(19662),i=TypeError,a=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw i("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)};e.exports.f=function(e){return new a(e)}},3929:(e,t,r)=>{var n=r(47850),i=TypeError;e.exports=function(e){if(n(e))throw i("The method doesn't accept regular expressions");return e}},70030:(e,t,r)=>{var n,i=r(19670),a=r(36048),o=r(80748),s=r(3501),l=r(60490),u=r(80317),c=r(6200),p="prototype",h="script",d=c("IE_PROTO"),f=function(){},m=function(e){return"<"+h+">"+e+"</"+h+">"},v=function(e){e.write(m("")),e.close();var t=e.parentWindow.Object;return e=null,t},g=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}var e,t,r;g="undefined"!=typeof document?document.domain&&n?v(n):(t=u("iframe"),r="java"+h+":",t.style.display="none",l.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(m("document.F=Object")),e.close(),e.F):v(n);for(var i=o.length;i--;)delete g[p][o[i]];return g()};s[d]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(f[p]=i(e),r=new f,f[p]=null,r[d]=e):r=g(),void 0===t?r:a.f(r,t)}},36048:(e,t,r)=>{var n=r(19781),i=r(3353),a=r(3070),o=r(19670),s=r(45656),l=r(81956);t.f=n&&!i?Object.defineProperties:function(e,t){o(e);for(var r,n=s(t),i=l(t),u=i.length,c=0;u>c;)a.f(e,r=i[c++],n[r]);return e}},3070:(e,t,r)=>{var n=r(19781),i=r(64664),a=r(3353),o=r(19670),s=r(34948),l=TypeError,u=Object.defineProperty,c=Object.getOwnPropertyDescriptor,p="enumerable",h="configurable",d="writable";t.f=n?a?function(e,t,r){if(o(e),t=s(t),o(r),"function"==typeof e&&"prototype"===t&&"value"in r&&d in r&&!r[d]){var n=c(e,t);n&&n[d]&&(e[t]=r.value,r={configurable:h in r?r[h]:n[h],enumerable:p in r?r[p]:n[p],writable:!1})}return u(e,t,r)}:u:function(e,t,r){if(o(e),t=s(t),o(r),i)try{return u(e,t,r)}catch(e){}if("get"in r||"set"in r)throw l("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},31236:(e,t,r)=>{var n=r(19781),i=r(46916),a=r(55296),o=r(79114),s=r(45656),l=r(34948),u=r(92597),c=r(64664),p=Object.getOwnPropertyDescriptor;t.f=n?p:function(e,t){if(e=s(e),t=l(t),c)try{return p(e,t)}catch(e){}if(u(e,t))return o(!i(a.f,e,t),e[t])}},8006:(e,t,r)=>{var n=r(16324),i=r(80748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},25181:(e,t)=>{t.f=Object.getOwnPropertySymbols},79518:(e,t,r)=>{var n=r(92597),i=r(60614),a=r(47908),o=r(6200),s=r(49920),l=o("IE_PROTO"),u=Object,c=u.prototype;e.exports=s?u.getPrototypeOf:function(e){var t=a(e);if(n(t,l))return t[l];var r=t.constructor;return i(r)&&t instanceof r?r.prototype:t instanceof u?c:null}},47976:(e,t,r)=>{var n=r(1702);e.exports=n({}.isPrototypeOf)},16324:(e,t,r)=>{var n=r(1702),i=r(92597),a=r(45656),o=r(41318).indexOf,s=r(3501),l=n([].push);e.exports=function(e,t){var r,n=a(e),u=0,c=[];for(r in n)!i(s,r)&&i(n,r)&&l(c,r);for(;t.length>u;)i(n,r=t[u++])&&(~o(c,r)||l(c,r));return c}},81956:(e,t,r)=>{var n=r(16324),i=r(80748);e.exports=Object.keys||function(e){return n(e,i)}},55296:(e,t)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);t.f=i?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},27674:(e,t,r)=>{var n=r(75668),i=r(19670),a=r(96077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=n(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return i(r),a(n),t?e(r,n):r.__proto__=n,r}}():void 0)},92140:(e,t,r)=>{var n=r(46916),i=r(60614),a=r(70111),o=TypeError;e.exports=function(e,t){var r,s;if("string"===t&&i(r=e.toString)&&!a(s=n(r,e)))return s;if(i(r=e.valueOf)&&!a(s=n(r,e)))return s;if("string"!==t&&i(r=e.toString)&&!a(s=n(r,e)))return s;throw o("Can't convert object to primitive value")}},53887:(e,t,r)=>{var n=r(35005),i=r(1702),a=r(8006),o=r(25181),s=r(19670),l=i([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=a.f(s(e)),r=o.f;return r?l(t,r(e)):t}},12534:e=>{e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},63702:(e,t,r)=>{var n=r(17854),i=r(2492),a=r(60614),o=r(54705),s=r(42788),l=r(5112),u=r(7871),c=r(83823),p=r(31913),h=r(7392),d=i&&i.prototype,f=l("species"),m=!1,v=a(n.PromiseRejectionEvent),g=o("Promise",(function(){var e=s(i),t=e!==String(i);if(!t&&66===h)return!0;if(p&&(!d.catch||!d.finally))return!0;if(!h||h<51||!/native code/.test(e)){var r=new i((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};if((r.constructor={})[f]=n,!(m=r.then((function(){}))instanceof n))return!0}return!t&&(u||c)&&!v}));e.exports={CONSTRUCTOR:g,REJECTION_EVENT:v,SUBCLASSING:m}},2492:(e,t,r)=>{var n=r(17854);e.exports=n.Promise},69478:(e,t,r)=>{var n=r(19670),i=r(70111),a=r(78523);e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var r=a.f(e);return(0,r.resolve)(t),r.promise}},80612:(e,t,r)=>{var n=r(2492),i=r(17072),a=r(63702).CONSTRUCTOR;e.exports=a||!i((function(e){n.all(e).then(void 0,(function(){}))}))},18572:e=>{var t=function(){this.head=null,this.tail=null};t.prototype={add:function(e){var t={item:e,next:null},r=this.tail;r?r.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}},e.exports=t},97651:(e,t,r)=>{var n=r(46916),i=r(19670),a=r(60614),o=r(84326),s=r(22261),l=TypeError;e.exports=function(e,t){var r=e.exec;if(a(r)){var u=n(r,e,t);return null!==u&&i(u),u}if("RegExp"===o(e))return n(s,e,t);throw l("RegExp#exec called on incompatible receiver")}},22261:(e,t,r)=>{"use strict";var n,i,a=r(46916),o=r(1702),s=r(41340),l=r(67066),u=r(52999),c=r(72309),p=r(70030),h=r(29909).get,d=r(9441),f=r(38173),m=c("native-string-replace",String.prototype.replace),v=RegExp.prototype.exec,g=v,y=o("".charAt),_=o("".indexOf),b=o("".replace),x=o("".slice),E=(i=/b*/g,a(v,n=/a/,"a"),a(v,i,"a"),0!==n.lastIndex||0!==i.lastIndex),w=u.BROKEN_CARET,O=void 0!==/()??/.exec("")[1];(E||O||w||d||f)&&(g=function(e){var t,r,n,i,o,u,c,d=this,f=h(d),T=s(e),A=f.raw;if(A)return A.lastIndex=d.lastIndex,t=a(g,A,T),d.lastIndex=A.lastIndex,t;var C=f.groups,M=w&&d.sticky,P=a(l,d),D=d.source,S=0,k=T;if(M&&(P=b(P,"y",""),-1===_(P,"g")&&(P+="g"),k=x(T,d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==y(T,d.lastIndex-1))&&(D="(?: "+D+")",k=" "+k,S++),r=new RegExp("^(?:"+D+")",P)),O&&(r=new RegExp("^"+D+"$(?!\\s)",P)),E&&(n=d.lastIndex),i=a(v,M?r:d,k),M?i?(i.input=x(i.input,S),i[0]=x(i[0],S),i.index=d.lastIndex,d.lastIndex+=i[0].length):d.lastIndex=0:E&&i&&(d.lastIndex=d.global?i.index+i[0].length:n),O&&i&&i.length>1&&a(m,i[0],r,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i&&C)for(i.groups=u=p(null),o=0;o<C.length;o++)u[(c=C[o])[0]]=i[c[1]];return i}),e.exports=g},67066:(e,t,r)=>{"use strict";var n=r(19670);e.exports=function(){var e=n(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},34706:(e,t,r)=>{var n=r(46916),i=r(92597),a=r(47976),o=r(67066),s=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in s||i(e,"flags")||!a(s,e)?t:n(o,e)}},52999:(e,t,r)=>{var n=r(47293),i=r(17854).RegExp,a=n((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),o=a||n((function(){return!i("a","y").sticky})),s=a||n((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:s,MISSED_STICKY:o,UNSUPPORTED_Y:a}},9441:(e,t,r)=>{var n=r(47293),i=r(17854).RegExp;e.exports=n((function(){var e=i(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},38173:(e,t,r)=>{var n=r(47293),i=r(17854).RegExp;e.exports=n((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},84488:(e,t,r)=>{var n=r(68554),i=TypeError;e.exports=function(e){if(n(e))throw i("Can't call method on "+e);return e}},96340:(e,t,r)=>{"use strict";var n=r(35005),i=r(47045),a=r(5112),o=r(19781),s=a("species");e.exports=function(e){var t=n(e);o&&t&&!t[s]&&i(t,s,{configurable:!0,get:function(){return this}})}},58003:(e,t,r)=>{var n=r(3070).f,i=r(92597),a=r(5112)("toStringTag");e.exports=function(e,t,r){e&&!r&&(e=e.prototype),e&&!i(e,a)&&n(e,a,{configurable:!0,value:t})}},6200:(e,t,r)=>{var n=r(72309),i=r(69711),a=n("keys");e.exports=function(e){return a[e]||(a[e]=i(e))}},5465:(e,t,r)=>{var n=r(17854),i=r(13072),a="__core-js_shared__",o=n[a]||i(a,{});e.exports=o},72309:(e,t,r)=>{var n=r(31913),i=r(5465);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.30.2",mode:n?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.2/LICENSE",source:"https://github.com/zloirock/core-js"})},36707:(e,t,r)=>{var n=r(19670),i=r(39483),a=r(68554),o=r(5112)("species");e.exports=function(e,t){var r,s=n(e).constructor;return void 0===s||a(r=n(s)[o])?t:i(r)}},28710:(e,t,r)=>{var n=r(1702),i=r(19303),a=r(41340),o=r(84488),s=n("".charAt),l=n("".charCodeAt),u=n("".slice),c=function(e){return function(t,r){var n,c,p=a(o(t)),h=i(r),d=p.length;return h<0||h>=d?e?"":void 0:(n=l(p,h))<55296||n>56319||h+1===d||(c=l(p,h+1))<56320||c>57343?e?s(p,h):n:e?u(p,h,h+2):c-56320+(n-55296<<10)+65536}};e.exports={codeAt:c(!1),charAt:c(!0)}},76091:(e,t,r)=>{var n=r(76530).PROPER,i=r(47293),a=r(81361);e.exports=function(e){return i((function(){return!!a[e]()||"​᠎"!=="​᠎"[e]()||n&&a[e].name!==e}))}},53111:(e,t,r)=>{var n=r(1702),i=r(84488),a=r(41340),o=r(81361),s=n("".replace),l=RegExp("^["+o+"]+"),u=RegExp("(^|[^"+o+"])["+o+"]+$"),c=function(e){return function(t){var r=a(i(t));return 1&e&&(r=s(r,l,"")),2&e&&(r=s(r,u,"$1")),r}};e.exports={start:c(1),end:c(2),trim:c(3)}},36293:(e,t,r)=>{var n=r(7392),i=r(47293),a=r(17854).String;e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!a(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},20261:(e,t,r)=>{var n,i,a,o,s=r(17854),l=r(22104),u=r(49974),c=r(60614),p=r(92597),h=r(47293),d=r(60490),f=r(50206),m=r(80317),v=r(48053),g=r(6833),y=r(35268),_=s.setImmediate,b=s.clearImmediate,x=s.process,E=s.Dispatch,w=s.Function,O=s.MessageChannel,T=s.String,A=0,C={},M="onreadystatechange";h((function(){n=s.location}));var P=function(e){if(p(C,e)){var t=C[e];delete C[e],t()}},D=function(e){return function(){P(e)}},S=function(e){P(e.data)},k=function(e){s.postMessage(T(e),n.protocol+"//"+n.host)};_&&b||(_=function(e){v(arguments.length,1);var t=c(e)?e:w(e),r=f(arguments,1);return C[++A]=function(){l(t,void 0,r)},i(A),A},b=function(e){delete C[e]},y?i=function(e){x.nextTick(D(e))}:E&&E.now?i=function(e){E.now(D(e))}:O&&!g?(o=(a=new O).port2,a.port1.onmessage=S,i=u(o.postMessage,o)):s.addEventListener&&c(s.postMessage)&&!s.importScripts&&n&&"file:"!==n.protocol&&!h(k)?(i=k,s.addEventListener("message",S,!1)):i=M in m("script")?function(e){d.appendChild(m("script"))[M]=function(){d.removeChild(this),P(e)}}:function(e){setTimeout(D(e),0)}),e.exports={set:_,clear:b}},51400:(e,t,r)=>{var n=r(19303),i=Math.max,a=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):a(r,t)}},45656:(e,t,r)=>{var n=r(68361),i=r(84488);e.exports=function(e){return n(i(e))}},19303:(e,t,r)=>{var n=r(74758);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},17466:(e,t,r)=>{var n=r(19303),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},47908:(e,t,r)=>{var n=r(84488),i=Object;e.exports=function(e){return i(n(e))}},57593:(e,t,r)=>{var n=r(46916),i=r(70111),a=r(52190),o=r(58173),s=r(92140),l=r(5112),u=TypeError,c=l("toPrimitive");e.exports=function(e,t){if(!i(e)||a(e))return e;var r,l=o(e,c);if(l){if(void 0===t&&(t="default"),r=n(l,e,t),!i(r)||a(r))return r;throw u("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},34948:(e,t,r)=>{var n=r(57593),i=r(52190);e.exports=function(e){var t=n(e,"string");return i(t)?t:t+""}},51694:(e,t,r)=>{var n={};n[r(5112)("toStringTag")]="z",e.exports="[object z]"===String(n)},41340:(e,t,r)=>{var n=r(70648),i=String;e.exports=function(e){if("Symbol"===n(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},66330:e=>{var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},69711:(e,t,r)=>{var n=r(1702),i=0,a=Math.random(),o=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++i+a,36)}},43307:(e,t,r)=>{var n=r(36293);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:(e,t,r)=>{var n=r(19781),i=r(47293);e.exports=n&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},48053:e=>{var t=TypeError;e.exports=function(e,r){if(e<r)throw t("Not enough arguments");return e}},94811:(e,t,r)=>{var n=r(17854),i=r(60614),a=n.WeakMap;e.exports=i(a)&&/native code/.test(String(a))},5112:(e,t,r)=>{var n=r(17854),i=r(72309),a=r(92597),o=r(69711),s=r(36293),l=r(43307),u=n.Symbol,c=i("wks"),p=l?u.for||u:u&&u.withoutSetter||o;e.exports=function(e){return a(c,e)||(c[e]=s&&a(u,e)?u[e]:p("Symbol."+e)),c[e]}},81361:e=>{e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},82772:(e,t,r)=>{"use strict";var n=r(82109),i=r(21470),a=r(41318).indexOf,o=r(9341),s=i([].indexOf),l=!!s&&1/s([1],1,-0)<0;n({target:"Array",proto:!0,forced:l||!o("indexOf")},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return l?s(this,e,t)||0:a(this,e,t)}})},66992:(e,t,r)=>{"use strict";var n=r(45656),i=r(51223),a=r(97497),o=r(29909),s=r(3070).f,l=r(51656),u=r(76178),c=r(31913),p=r(19781),h="Array Iterator",d=o.set,f=o.getterFor(h);e.exports=l(Array,"Array",(function(e,t){d(this,{type:h,target:n(e),index:0,kind:t})}),(function(){var e=f(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,u(void 0,!0)):u("keys"==r?n:"values"==r?t[n]:[n,t[n]],!1)}),"values");var m=a.Arguments=a.Array;if(i("keys"),i("values"),i("entries"),!c&&p&&"values"!==m.name)try{s(m,"name",{value:"values"})}catch(e){}},85827:(e,t,r)=>{"use strict";var n=r(82109),i=r(53671).left,a=r(9341),o=r(7392);n({target:"Array",proto:!0,forced:!r(35268)&&o>79&&o<83||!a("reduce")},{reduce:function(e){var t=arguments.length;return i(this,e,t,t>1?arguments[1]:void 0)}})},65069:(e,t,r)=>{"use strict";var n=r(82109),i=r(1702),a=r(43157),o=i([].reverse),s=[1,2];n({target:"Array",proto:!0,forced:String(s)===String(s.reverse())},{reverse:function(){return a(this)&&(this.length=this.length),o(this)}})},70821:(e,t,r)=>{"use strict";var n=r(82109),i=r(46916),a=r(19662),o=r(78523),s=r(12534),l=r(20408);n({target:"Promise",stat:!0,forced:r(80612)},{all:function(e){var t=this,r=o.f(t),n=r.resolve,u=r.reject,c=s((function(){var r=a(t.resolve),o=[],s=0,c=1;l(e,(function(e){var a=s++,l=!1;c++,i(r,t,e).then((function(e){l||(l=!0,o[a]=e,--c||n(o))}),u)})),--c||n(o)}));return c.error&&u(c.value),r.promise}})},94164:(e,t,r)=>{"use strict";var n=r(82109),i=r(31913),a=r(63702).CONSTRUCTOR,o=r(2492),s=r(35005),l=r(60614),u=r(98052),c=o&&o.prototype;if(n({target:"Promise",proto:!0,forced:a,real:!0},{catch:function(e){return this.then(void 0,e)}}),!i&&l(o)){var p=s("Promise").prototype.catch;c.catch!==p&&u(c,"catch",p,{unsafe:!0})}},43401:(e,t,r)=>{"use strict";var n,i,a,o=r(82109),s=r(31913),l=r(35268),u=r(17854),c=r(46916),p=r(98052),h=r(27674),d=r(58003),f=r(96340),m=r(19662),v=r(60614),g=r(70111),y=r(25787),_=r(36707),b=r(20261).set,x=r(95948),E=r(842),w=r(12534),O=r(18572),T=r(29909),A=r(2492),C=r(63702),M=r(78523),P="Promise",D=C.CONSTRUCTOR,S=C.REJECTION_EVENT,k=C.SUBCLASSING,I=T.getterFor(P),R=T.set,L=A&&A.prototype,N=A,j=L,Y=u.TypeError,B=u.document,V=u.process,U=M.f,H=U,F=!!(B&&B.createEvent&&u.dispatchEvent),Z="unhandledrejection",W=function(e){var t;return!(!g(e)||!v(t=e.then))&&t},q=function(e,t){var r,n,i,a=t.value,o=1==t.state,s=o?e.ok:e.fail,l=e.resolve,u=e.reject,p=e.domain;try{s?(o||(2===t.rejection&&$(t),t.rejection=1),!0===s?r=a:(p&&p.enter(),r=s(a),p&&(p.exit(),i=!0)),r===e.promise?u(Y("Promise-chain cycle")):(n=W(r))?c(n,r,l,u):l(r)):u(a)}catch(e){p&&!i&&p.exit(),u(e)}},K=function(e,t){e.notified||(e.notified=!0,x((function(){for(var r,n=e.reactions;r=n.get();)q(r,e);e.notified=!1,t&&!e.rejection&&X(e)})))},z=function(e,t,r){var n,i;F?((n=B.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),u.dispatchEvent(n)):n={promise:t,reason:r},!S&&(i=u["on"+e])?i(n):e===Z&&E("Unhandled promise rejection",r)},X=function(e){c(b,u,(function(){var t,r=e.facade,n=e.value;if(G(e)&&(t=w((function(){l?V.emit("unhandledRejection",n,r):z(Z,r,n)})),e.rejection=l||G(e)?2:1,t.error))throw t.value}))},G=function(e){return 1!==e.rejection&&!e.parent},$=function(e){c(b,u,(function(){var t=e.facade;l?V.emit("rejectionHandled",t):z("rejectionhandled",t,e.value)}))},Q=function(e,t,r){return function(n){e(t,n,r)}},J=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,K(e,!0))},ee=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw Y("Promise can't be resolved itself");var n=W(t);n?x((function(){var r={done:!1};try{c(n,t,Q(ee,r,e),Q(J,r,e))}catch(t){J(r,t,e)}})):(e.value=t,e.state=1,K(e,!1))}catch(t){J({done:!1},t,e)}}};if(D&&(j=(N=function(e){y(this,j),m(e),c(n,this);var t=I(this);try{e(Q(ee,t),Q(J,t))}catch(e){J(t,e)}}).prototype,(n=function(e){R(this,{type:P,done:!1,notified:!1,parent:!1,reactions:new O,rejection:!1,state:0,value:void 0})}).prototype=p(j,"then",(function(e,t){var r=I(this),n=U(_(this,N));return r.parent=!0,n.ok=!v(e)||e,n.fail=v(t)&&t,n.domain=l?V.domain:void 0,0==r.state?r.reactions.add(n):x((function(){q(n,r)})),n.promise})),i=function(){var e=new n,t=I(e);this.promise=e,this.resolve=Q(ee,t),this.reject=Q(J,t)},M.f=U=function(e){return e===N||void 0===e?new i(e):H(e)},!s&&v(A)&&L!==Object.prototype)){a=L.then,k||p(L,"then",(function(e,t){var r=this;return new N((function(e,t){c(a,r,e,t)})).then(e,t)}),{unsafe:!0});try{delete L.constructor}catch(e){}h&&h(L,j)}o({global:!0,constructor:!0,wrap:!0,forced:D},{Promise:N}),d(N,P,!1,!0),f(P)},88674:(e,t,r)=>{r(43401),r(70821),r(94164),r(6027),r(60683),r(96294)},6027:(e,t,r)=>{"use strict";var n=r(82109),i=r(46916),a=r(19662),o=r(78523),s=r(12534),l=r(20408);n({target:"Promise",stat:!0,forced:r(80612)},{race:function(e){var t=this,r=o.f(t),n=r.reject,u=s((function(){var o=a(t.resolve);l(e,(function(e){i(o,t,e).then(r.resolve,n)}))}));return u.error&&n(u.value),r.promise}})},60683:(e,t,r)=>{"use strict";var n=r(82109),i=r(46916),a=r(78523);n({target:"Promise",stat:!0,forced:r(63702).CONSTRUCTOR},{reject:function(e){var t=a.f(this);return i(t.reject,void 0,e),t.promise}})},96294:(e,t,r)=>{"use strict";var n=r(82109),i=r(35005),a=r(31913),o=r(2492),s=r(63702).CONSTRUCTOR,l=r(69478),u=i("Promise"),c=a&&!s;n({target:"Promise",stat:!0,forced:a||s},{resolve:function(e){return l(c&&this===u?o:this,e)}})},74916:(e,t,r)=>{"use strict";var n=r(82109),i=r(22261);n({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},39714:(e,t,r)=>{"use strict";var n=r(76530).PROPER,i=r(98052),a=r(19670),o=r(41340),s=r(47293),l=r(34706),u="toString",c=RegExp.prototype[u],p=s((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),h=n&&c.name!=u;(p||h)&&i(RegExp.prototype,u,(function(){var e=a(this);return"/"+o(e.source)+"/"+o(l(e))}),{unsafe:!0})},27852:(e,t,r)=>{"use strict";var n,i=r(82109),a=r(21470),o=r(31236).f,s=r(17466),l=r(41340),u=r(3929),c=r(84488),p=r(84964),h=r(31913),d=a("".endsWith),f=a("".slice),m=Math.min,v=p("endsWith");i({target:"String",proto:!0,forced:!(!h&&!v&&(n=o(String.prototype,"endsWith"),n&&!n.writable)||v)},{endsWith:function(e){var t=l(c(this));u(e);var r=arguments.length>1?arguments[1]:void 0,n=t.length,i=void 0===r?n:m(s(r),n),a=l(e);return d?d(t,a,i):f(t,i-a.length,i)===a}})},32023:(e,t,r)=>{"use strict";var n=r(82109),i=r(1702),a=r(3929),o=r(84488),s=r(41340),l=r(84964),u=i("".indexOf);n({target:"String",proto:!0,forced:!l("includes")},{includes:function(e){return!!~u(s(o(this)),s(a(e)),arguments.length>1?arguments[1]:void 0)}})},4723:(e,t,r)=>{"use strict";var n=r(46916),i=r(27007),a=r(19670),o=r(68554),s=r(17466),l=r(41340),u=r(84488),c=r(58173),p=r(31530),h=r(97651);i("match",(function(e,t,r){return[function(t){var r=u(this),i=o(t)?void 0:c(t,e);return i?n(i,t,r):new RegExp(t)[e](l(r))},function(e){var n=a(this),i=l(e),o=r(t,n,i);if(o.done)return o.value;if(!n.global)return h(n,i);var u=n.unicode;n.lastIndex=0;for(var c,d=[],f=0;null!==(c=h(n,i));){var m=l(c[0]);d[f]=m,""===m&&(n.lastIndex=p(i,s(n.lastIndex),u)),f++}return 0===f?null:d}]}))},15306:(e,t,r)=>{"use strict";var n=r(22104),i=r(46916),a=r(1702),o=r(27007),s=r(47293),l=r(19670),u=r(60614),c=r(68554),p=r(19303),h=r(17466),d=r(41340),f=r(84488),m=r(31530),v=r(58173),g=r(10647),y=r(97651),_=r(5112)("replace"),b=Math.max,x=Math.min,E=a([].concat),w=a([].push),O=a("".indexOf),T=a("".slice),A="$0"==="a".replace(/./,"$0"),C=!!/./[_]&&""===/./[_]("a","$0");o("replace",(function(e,t,r){var a=C?"$":"$0";return[function(e,r){var n=f(this),a=c(e)?void 0:v(e,_);return a?i(a,e,n,r):i(t,d(n),e,r)},function(e,i){var o=l(this),s=d(e);if("string"==typeof i&&-1===O(i,a)&&-1===O(i,"$<")){var c=r(t,o,s,i);if(c.done)return c.value}var f=u(i);f||(i=d(i));var v=o.global;if(v){var _=o.unicode;o.lastIndex=0}for(var A=[];;){var C=y(o,s);if(null===C)break;if(w(A,C),!v)break;""===d(C[0])&&(o.lastIndex=m(s,h(o.lastIndex),_))}for(var M,P="",D=0,S=0;S<A.length;S++){for(var k=d((C=A[S])[0]),I=b(x(p(C.index),s.length),0),R=[],L=1;L<C.length;L++)w(R,void 0===(M=C[L])?M:String(M));var N=C.groups;if(f){var j=E([k],R,I,s);void 0!==N&&w(j,N);var Y=d(n(i,void 0,j))}else Y=g(k,s,I,R,N,i);I>=D&&(P+=T(s,D,I)+Y,D=I+k.length)}return P+T(s,D)}]}),!!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!A||C)},23123:(e,t,r)=>{"use strict";var n=r(22104),i=r(46916),a=r(1702),o=r(27007),s=r(19670),l=r(68554),u=r(47850),c=r(84488),p=r(36707),h=r(31530),d=r(17466),f=r(41340),m=r(58173),v=r(41589),g=r(97651),y=r(22261),_=r(52999),b=r(47293),x=_.UNSUPPORTED_Y,E=4294967295,w=Math.min,O=[].push,T=a(/./.exec),A=a(O),C=a("".slice);o("split",(function(e,t,r){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var a=f(c(this)),o=void 0===r?E:r>>>0;if(0===o)return[];if(void 0===e)return[a];if(!u(e))return i(t,a,e,o);for(var s,l,p,h=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,g=new RegExp(e.source,d+"g");(s=i(y,g,a))&&!((l=g.lastIndex)>m&&(A(h,C(a,m,s.index)),s.length>1&&s.index<a.length&&n(O,h,v(s,1)),p=s[0].length,m=l,h.length>=o));)g.lastIndex===s.index&&g.lastIndex++;return m===a.length?!p&&T(g,"")||A(h,""):A(h,C(a,m)),h.length>o?v(h,0,o):h}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:i(t,this,e,r)}:t,[function(t,r){var n=c(this),o=l(t)?void 0:m(t,e);return o?i(o,t,n,r):i(a,f(n),t,r)},function(e,n){var i=s(this),o=f(e),l=r(a,i,o,n,a!==t);if(l.done)return l.value;var u=p(i,RegExp),c=i.unicode,m=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(x?"g":"y"),v=new u(x?"^(?:"+i.source+")":i,m),y=void 0===n?E:n>>>0;if(0===y)return[];if(0===o.length)return null===g(v,o)?[o]:[];for(var _=0,b=0,O=[];b<o.length;){v.lastIndex=x?0:b;var T,M=g(v,x?C(o,b):o);if(null===M||(T=w(d(v.lastIndex+(x?b:0)),o.length))===_)b=h(o,b,c);else{if(A(O,C(o,_,b)),O.length===y)return O;for(var P=1;P<=M.length-1;P++)if(A(O,M[P]),O.length===y)return O;b=_=T}}return A(O,C(o,_)),O}]}),!!b((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]})),x)},23157:(e,t,r)=>{"use strict";var n,i=r(82109),a=r(21470),o=r(31236).f,s=r(17466),l=r(41340),u=r(3929),c=r(84488),p=r(84964),h=r(31913),d=a("".startsWith),f=a("".slice),m=Math.min,v=p("startsWith");i({target:"String",proto:!0,forced:!(!h&&!v&&(n=o(String.prototype,"startsWith"),n&&!n.writable)||v)},{startsWith:function(e){var t=l(c(this));u(e);var r=s(m(arguments.length>1?arguments[1]:void 0,t.length)),n=l(e);return d?d(t,n,r):f(t,r,r+n.length)===n}})},73210:(e,t,r)=>{"use strict";var n=r(82109),i=r(53111).trim;n({target:"String",proto:!0,forced:r(76091)("trim")},{trim:function(){return i(this)}})},33948:(e,t,r)=>{var n=r(17854),i=r(48324),a=r(98509),o=r(66992),s=r(68880),l=r(5112),u=l("iterator"),c=l("toStringTag"),p=o.values,h=function(e,t){if(e){if(e[u]!==p)try{s(e,u,p)}catch(t){e[u]=p}if(e[c]||s(e,c,t),i[t])for(var r in o)if(e[r]!==o[r])try{s(e,r,o[r])}catch(t){e[r]=o[r]}}};for(var d in i)h(n[d]&&n[d].prototype,d);h(a,"DOMTokenList")},53703:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(94015),i=r.n(n),a=r(23645),o=r.n(a)()(i());o.push([e.id,".Report-menu .ant-card-body {\n  padding: 0 !important;\n}\n\n.Report-menu .ant-menu-item {\n  padding: 0 20px !important;\n}\n\n.Report-menu .ant-menu-item i {\n  font-size: 16px;\n}\n\n.editable-cell {\n  position: relative;\n}\n\n.editable-cell-value-wrap {\n  padding: 5px 12px;\n  cursor: pointer;\n}\n\n.editable-row:hover .editable-cell-value-wrap {\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n  padding: 4px 11px;\n}\n\n.cmdb-form-card {\n  padding: 4px 8px\n}\n\n.cmdb-form-card .card-dragging {\n  border     : 1px dashed #aaa;\n  text-align : center;\n  font-weight: bold;\n  color      : #aaa;\n  height     : 100%;\n  font-size  : 24px;\n  line-height: 24px;\n}\n\n.prop-right .ant-form-item-label > label{\n  font-size: 13px;\n}\n\n.prop-title-level2{\n  font-weight: bold;\n  font-size: 13px;\n  color: #999;\n  line-height: 40px;\n  text-indent: 12px;\n}\n\n#tableViewTbody tr td div{\n  overflow-y: scroll;\n}\n\n#tableViewTbody tr td div::-webkit-scrollbar {\n  display: none\n}\n","",{version:3,sources:["webpack://./src/components/index.css"],names:[],mappings:"AAAA;EACE,qBAAqB;AACvB;;AAEA;EACE,0BAA0B;AAC5B;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,iBAAiB;EACjB,eAAe;AACjB;;AAEA;EACE,yBAAyB;EACzB,kBAAkB;EAClB,iBAAiB;AACnB;;AAEA;EACE;AACF;;AAEA;EACE,4BAA4B;EAC5B,mBAAmB;EACnB,iBAAiB;EACjB,iBAAiB;EACjB,iBAAiB;EACjB,iBAAiB;EACjB,iBAAiB;AACnB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,iBAAiB;EACjB,eAAe;EACf,WAAW;EACX,iBAAiB;EACjB,iBAAiB;AACnB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE;AACF",sourcesContent:[".Report-menu .ant-card-body {\n  padding: 0 !important;\n}\n\n.Report-menu .ant-menu-item {\n  padding: 0 20px !important;\n}\n\n.Report-menu .ant-menu-item i {\n  font-size: 16px;\n}\n\n.editable-cell {\n  position: relative;\n}\n\n.editable-cell-value-wrap {\n  padding: 5px 12px;\n  cursor: pointer;\n}\n\n.editable-row:hover .editable-cell-value-wrap {\n  border: 1px solid #d9d9d9;\n  border-radius: 4px;\n  padding: 4px 11px;\n}\n\n.cmdb-form-card {\n  padding: 4px 8px\n}\n\n.cmdb-form-card .card-dragging {\n  border     : 1px dashed #aaa;\n  text-align : center;\n  font-weight: bold;\n  color      : #aaa;\n  height     : 100%;\n  font-size  : 24px;\n  line-height: 24px;\n}\n\n.prop-right .ant-form-item-label > label{\n  font-size: 13px;\n}\n\n.prop-title-level2{\n  font-weight: bold;\n  font-size: 13px;\n  color: #999;\n  line-height: 40px;\n  text-indent: 12px;\n}\n\n#tableViewTbody tr td div{\n  overflow-y: scroll;\n}\n\n#tableViewTbody tr td div::-webkit-scrollbar {\n  display: none\n}\n"],sourceRoot:""}]);const s=o},23645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=e(t);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,n){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(n)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(i[o]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);n&&i[l[0]]||(r&&(l[2]?l[2]="".concat(r," and ").concat(l[2]):l[2]=r),t.push(l))}},t}},94015:e=>{"use strict";function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}e.exports=function(e){var r,n,i=(n=4,function(e){if(Array.isArray(e))return e}(r=e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,i,a=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw i}}return a}}(r,n)||function(e,r){if(e){if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[1],o=i[3];if(!o)return a;if("function"==typeof btoa){var s=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),u="/*# ".concat(l," */"),c=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(e," */")}));return[a].concat(c).concat([u]).join("\n")}return[a].join("\n")}},55051:(e,t,r)=>{e.exports=r.p+"e36a864828ec7cd143f1f2a44a3a2624.png"},56771:(e,t,r)=>{e.exports=r.p+"51f4518872a74208734a99849001d5e7.png"},93162:function(e,t,r){var n,i;void 0===(i="function"==typeof(n=function(){"use strict";function t(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){s(n.response,t,r)},n.onerror=function(){console.error("could not download file")},n.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof r.g&&r.g.global===r.g?r.g:void 0,o=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(e,r,o){var s=a.URL||a.webkitURL,l=document.createElement("a");r=r||e.name||"download",l.download=r,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?i(l):n(l.href)?t(e,r,o):i(l,l.target="_blank")):(l.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(l.href)}),4e4),setTimeout((function(){i(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,r,a){if(r=r||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,a),r);else if(n(e))t(e,r,a);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout((function(){i(o)}))}}:function(e,r,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return t(e,r,n);var s="application/octet-stream"===e.type,l=/constructor/i.test(a.HTMLElement)||a.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||s&&l||o)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},c.readAsDataURL(e)}else{var p=a.URL||a.webkitURL,h=p.createObjectURL(e);i?i.location=h:location.href=h,i=null,setTimeout((function(){p.revokeObjectURL(h)}),4e4)}});a.saveAs=s.saveAs=s,e.exports=s})?n.apply(t,[]):n)||(e.exports=i)},94301:(e,t,r)=>{r(57147),e.exports=self.fetch.bind(self)},62705:(e,t,r)=>{var n=r(55639).Symbol;e.exports=n},44239:(e,t,r)=>{var n=r(62705),i=r(89607),a=r(2333),o=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?i(e):a(e)}},27561:(e,t,r)=>{var n=r(67990),i=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(i,""):e}},31957:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},89607:(e,t,r)=>{var n=r(62705),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=a.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var i=o.call(e);return n&&(t?e[s]=r:delete e[s]),i}},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},55639:(e,t,r)=>{var n=r(31957),i="object"==typeof self&&self&&self.Object===Object&&self,a=n||i||Function("return this")();e.exports=a},67990:e=>{var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},23279:(e,t,r)=>{var n=r(13218),i=r(7771),a=r(14841),o=Math.max,s=Math.min;e.exports=function(e,t,r){var l,u,c,p,h,d,f=0,m=!1,v=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var r=l,n=u;return l=u=void 0,f=t,p=e.apply(n,r)}function _(e){var r=e-d;return void 0===d||r>=t||r<0||v&&e-f>=c}function b(){var e=i();if(_(e))return x(e);h=setTimeout(b,function(e){var r=t-(e-d);return v?s(r,c-(e-f)):r}(e))}function x(e){return h=void 0,g&&l?y(e):(l=u=void 0,p)}function E(){var e=i(),r=_(e);if(l=arguments,u=this,d=e,r){if(void 0===h)return function(e){return f=e,h=setTimeout(b,t),m?y(e):p}(d);if(v)return clearTimeout(h),h=setTimeout(b,t),y(d)}return void 0===h&&(h=setTimeout(b,t)),p}return t=a(t)||0,n(r)&&(m=!!r.leading,c=(v="maxWait"in r)?o(a(r.maxWait)||0,t):c,g="trailing"in r?!!r.trailing:g),E.cancel=function(){void 0!==h&&clearTimeout(h),f=0,l=d=u=h=void 0},E.flush=function(){return void 0===h?p:x(i())},E}},13218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},37005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},33448:(e,t,r)=>{var n=r(44239),i=r(37005);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==n(e)}},7771:(e,t,r)=>{var n=r(55639);e.exports=function(){return n.Date.now()}},14841:(e,t,r)=>{var n=r(27561),i=r(13218),a=r(33448),o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=s.test(e);return r||l.test(e)?u(e.slice(2),r?2:8):o.test(e)?NaN:+e}},75:function(e){(function(){var t,r,n,i,a,o;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(e.exports=function(){return(t()-a)/1e6},r=process.hrtime,i=(t=function(){var e;return 1e9*(e=r())[0]+e[1]})(),o=1e9*process.uptime(),a=i-o):Date.now?(e.exports=function(){return Date.now()-n},n=Date.now()):(e.exports=function(){return(new Date).getTime()-n},n=(new Date).getTime())}).call(this)},54087:(e,t,r)=>{for(var n=r(75),i="undefined"==typeof window?r.g:window,a=["moz","webkit"],o="AnimationFrame",s=i["request"+o],l=i["cancel"+o]||i["cancelRequest"+o],u=0;!s&&u<a.length;u++)s=i[a[u]+"Request"+o],l=i[a[u]+"Cancel"+o]||i[a[u]+"CancelRequest"+o];if(!s||!l){var c=0,p=0,h=[];s=function(e){if(0===h.length){var t=n(),r=Math.max(0,16.666666666666668-(t-c));c=r+t,setTimeout((function(){var e=h.slice(0);h.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(c)}catch(e){setTimeout((function(){throw e}),0)}}),Math.round(r))}return h.push({handle:++p,callback:e,cancelled:!1}),p},l=function(e){for(var t=0;t<h.length;t++)h[t].handle===e&&(h[t].cancelled=!0)}}e.exports=function(e){return s.call(i,e)},e.exports.cancel=function(){l.apply(i,arguments)},e.exports.polyfill=function(e){e||(e=i),e.requestAnimationFrame=s,e.cancelAnimationFrame=l}},26131:e=>{e.exports=function(e){this.ok=!1,this.alpha=1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e=(e=e.replace(/ /g,"")).toLowerCase();var t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};e=t[e]||e;for(var r=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),parseFloat(e[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,a=r[n].process,o=i.exec(e);if(o){var s=a(o);this.r=s[0],this.g=s[1],this.b=s[2],s.length>3&&(this.alpha=s[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),r=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==r.length&&(r="0"+r),"#"+e+t+r},this.getHelpXML=function(){for(var e=new Array,n=0;n<r.length;n++)for(var i=r[n].example,a=0;a<i.length;a++)e[e.length]=i[a];for(var o in t)e[e.length]=o;var s=document.createElement("ul");for(s.setAttribute("id","rgbcolor-examples"),n=0;n<e.length;n++)try{var l=document.createElement("li"),u=new RGBColor(e[n]),c=document.createElement("div");c.style.cssText="margin: 3px; border: 1px solid black; background:"+u.toHex()+"; color:"+u.toHex(),c.appendChild(document.createTextNode("test"));var p=document.createTextNode(" "+e[n]+" -> "+u.toRGB()+" -> "+u.toHex());l.appendChild(c),l.appendChild(p),s.appendChild(l)}catch(e){}return s}}},28551:(e,t,r)=>{"use strict";var n=r(93379),i=r.n(n),a=r(53703);i()(a.Z,{insert:"head",singleton:!1}),a.Z.locals},93379:(e,t,r)=>{"use strict";var n,i=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}(),a=[];function o(e){for(var t=-1,r=0;r<a.length;r++)if(a[r].identifier===e){t=r;break}return t}function s(e,t){for(var r={},n=[],i=0;i<e.length;i++){var s=e[i],l=t.base?s[0]+t.base:s[0],u=r[l]||0,c="".concat(l," ").concat(u);r[l]=u+1;var p=o(c),h={css:s[1],media:s[2],sourceMap:s[3]};-1!==p?(a[p].references++,a[p].updater(h)):a.push({identifier:c,updater:m(h,t),references:1}),n.push(c)}return n}function l(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var a=r.nc;a&&(n.nonce=a)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var o=i(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var u,c=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function p(e,t,r,n){var i=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=c(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function h(e,t,r){var n=r.css,i=r.media,a=r.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var d=null,f=0;function m(e,t){var r,n,i;if(t.singleton){var a=f++;r=d||(d=l(t)),n=p.bind(null,r,a,!1),i=p.bind(null,r,a,!0)}else r=l(t),n=h.bind(null,r,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var r=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<r.length;n++){var i=o(r[n]);a[i].references--}for(var l=s(e,t),u=0;u<r.length;u++){var c=o(r[u]);0===a[c].references&&(a[c].updater(),a.splice(c,1))}r=l}}}},64258:e=>{e.exports='<svg viewBox="0 0 18 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>编组 11</title><desc>Created with Sketch.</desc><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-370.000000, -133.000000)" stroke="#FFFFFF"><g id="测试页面" transform="translate(368.000000, 131.000000)"><g id="编组-11" transform="translate(2.000000, 2.000000)"><rect id="矩形" x="0.5" y="0.5" width="17" height="4" rx="1"></rect><path d="M17.4599802,6 L17.4599802,17 C17.4599802,18.1045695 16.6142958,19 15.5710913,19 L2.41113781,19 C1.36793329,19 0.522248924,18.1045695 0.522248924,17 L0.522248924,6" id="形状" stroke-linecap="round"></path><path d="M2.87236559,7.5 L14.8478247,7.5" id="路径-23" stroke-linecap="round"></path><path d="M2.87236559,11.5 L14.8478247,11.5" id="路径-23" stroke-linecap="round"></path><path d="M2.87236559,15.5 L14.8478247,15.5" id="路径-23" stroke-linecap="round"></path></g></g></g></g></svg>'},90557:e=>{e.exports='<svg viewBox="0 0 18 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="图标" transform="translate(-189.000000, -139.000000)" fill="#9299B9" fill-rule="nonzero"><g id="报表管理" transform="translate(189.486302, 139.571073)"><path d="M15.5428571,0 L1.45714286,0 C0.635164828,0 0,0.629629622 0,1.44444444 L0,16.5555556 C0,17.3703704 0.635164828,18 1.45714286,18 L15.8791209,18 C16.5142857,18 17,17.4814815 17,16.8888889 L17,1.44444444 C17,0.666666667 16.3648352,0 15.5428571,0 Z M14.9252884,10.8116296 C15.3326958,10.8116296 15.6289921,11.1478933 15.6289921,11.5215197 C15.6289921,11.9325087 15.2956588,12.2314098 14.9252884,12.2314098 L2.02045393,12.2314098 C1.61304653,12.2314098 1.31675022,11.8951461 1.31675022,11.5215197 C1.31675022,11.1105307 1.65008356,10.8116296 2.02045393,10.8116296 L14.9252884,10.8116296 Z M14.9252884,13.8116296 C15.3326958,13.8116296 15.6289921,14.1478933 15.6289921,14.5215197 C15.6289921,14.9325087 15.2956588,15.2314098 14.9252884,15.2314098 L2.02045393,15.2314098 C1.61304653,15.2314098 1.31675022,14.8951461 1.31675022,14.5215197 C1.31675022,14.1105307 1.65008356,13.8116296 2.02045393,13.8116296 L14.9252884,13.8116296 Z M14.9252884,7.81162957 C15.3326958,7.81162957 15.6289921,8.1478933 15.6289921,8.52151968 C15.6289921,8.93250869 15.2956588,9.2314098 14.9252884,9.2314098 L2.02045393,9.2314098 C1.61304653,9.2314098 1.31675022,8.89514607 1.31675022,8.52151968 C1.31675022,8.11053068 1.65008356,7.81162957 2.02045393,7.81162957 L14.9252884,7.81162957 Z M14.9252884,2.2314098 C15.3326958,2.2314098 15.6289921,3.17877821 15.6289921,4.2314098 C15.6289921,5.38930451 15.2956588,6.2314098 14.9252884,6.2314098 L2.02045393,6.2314098 C1.61304653,6.2314098 1.31675022,5.28404139 1.31675022,4.2314098 C1.31675022,3.0735151 1.65008356,2.2314098 2.02045393,2.2314098 L14.9252884,2.2314098 Z" id="形状"></path></g></g></g></svg>'},57147:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DOMException:()=>x,Headers:()=>c,Request:()=>g,Response:()=>_,fetch:()=>E});var n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==n&&n,i={searchParams:"URLSearchParams"in n,iterable:"Symbol"in n&&"iterator"in Symbol,blob:"FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in n,arrayBuffer:"ArrayBuffer"in n};if(i.arrayBuffer)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function s(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function u(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i.iterable&&(t[Symbol.iterator]=function(){return t}),t}function c(e){this.map={},e instanceof c?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function d(e){var t=new FileReader,r=h(t);return t.readAsArrayBuffer(e),r}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:i.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:i.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():i.arrayBuffer&&i.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||o(e))?this._bodyArrayBuffer=f(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i.blob&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(d)}),this.text=function(){var e,t,r,n=p(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,r=h(t=new FileReader),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(e,t){e=s(e),t=l(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},c.prototype.delete=function(e){delete this.map[s(e)]},c.prototype.get=function(e){return e=s(e),this.has(e)?this.map[e]:null},c.prototype.has=function(e){return this.map.hasOwnProperty(s(e))},c.prototype.set=function(e,t){this.map[s(e)]=l(t)},c.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},c.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),u(e)},c.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),u(e)},c.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),u(e)},i.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function g(e,t){if(!(this instanceof g))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,n,i=(t=t||{}).body;if(e instanceof g){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new c(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new c(t.headers)),this.method=(n=(r=t.method||this.method||"GET").toUpperCase(),v.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var a=/([?&])_=[^&]*/;a.test(this.url)?this.url=this.url.replace(a,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function y(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function _(e,t){if(!(this instanceof _))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new c(t.headers),this.url=t.url||"",this._initBody(e)}g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},m.call(g.prototype),m.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:0,statusText:""});return e.type="error",e};var b=[301,302,303,307,308];_.redirect=function(e,t){if(-1===b.indexOf(t))throw new RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})};var x=n.DOMException;try{new x}catch(e){(x=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack}).prototype=Object.create(Error.prototype),x.prototype.constructor=x}function E(e,t){return new Promise((function(r,a){var o=new g(e,t);if(o.signal&&o.signal.aborted)return a(new x("Aborted","AbortError"));var s=new XMLHttpRequest;function u(){s.abort()}s.onload=function(){var e,t,n={status:s.status,statusText:s.statusText,headers:(e=s.getAllResponseHeaders()||"",t=new c,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}})),t)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var i="response"in s?s.response:s.responseText;setTimeout((function(){r(new _(i,n))}),0)},s.onerror=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},s.ontimeout=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},s.onabort=function(){setTimeout((function(){a(new x("Aborted","AbortError"))}),0)},s.open(o.method,function(e){try{return""===e&&n.location.href?n.location.href:e}catch(t){return e}}(o.url),!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&(i.blob?s.responseType="blob":i.arrayBuffer&&o.headers.get("Content-Type")&&-1!==o.headers.get("Content-Type").indexOf("application/octet-stream")&&(s.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof c?o.headers.forEach((function(e,t){s.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){s.setRequestHeader(e,l(t.headers[e]))})),o.signal&&(o.signal.addEventListener("abort",u),s.onreadystatechange=function(){4===s.readyState&&o.signal.removeEventListener("abort",u)}),s.send(void 0===o._bodyInit?null:o._bodyInit)}))}E.polyfill=!0,n.fetch||(n.fetch=E,n.Headers=c,n.Request=g,n.Response=_)},87363:e=>{"use strict";e.exports=React},61533:e=>{"use strict";e.exports=ReactDOM},20979:e=>{"use strict";e.exports=ReactDnD},96029:e=>{"use strict";e.exports=ReactDnDHTML5Backend},12611:e=>{"use strict";e.exports=_},81821:e=>{"use strict";e.exports=antd},16640:e=>{"use strict";e.exports=icons},48488:e=>{"use strict";e.exports=moment},53078:e=>{"use strict";e.exports=xadmin},82846:e=>{"use strict";e.exports=xadminAuth},3204:e=>{"use strict";e.exports=xadminForm},95907:e=>{"use strict";e.exports=xadminUi},17061:(e,t,r)=>{var n=r(18698).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},r=Object.prototype,a=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},s="function"==typeof Symbol?Symbol:{},l=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function p(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(e){p=function(e,t,r){return e[t]=r}}function h(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),s=new M(n||[]);return o(a,"_invoke",{value:O(e,r,s)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var f={};function m(){}function v(){}function g(){}var y={};p(y,l,(function(){return this}));var _=Object.getPrototypeOf,b=_&&_(_(P([])));b&&b!==r&&a.call(b,l)&&(y=b);var x=g.prototype=m.prototype=Object.create(y);function E(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(i,o,s,l){var u=d(e[i],e,o);if("throw"!==u.type){var c=u.arg,p=c.value;return p&&"object"==n(p)&&a.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,s,l)}),(function(e){r("throw",e,s,l)})):t.resolve(p).then((function(e){c.value=e,s(c)}),(function(e){return r("throw",e,s,l)}))}l(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}})}function O(e,t,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return{value:void 0,done:!0}}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=T(o,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=d(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function T(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,T(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var i=d(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function P(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:D}}function D(){return{value:void 0,done:!0}}return v.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:v,configurable:!0}),v.displayName=p(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,p(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},E(w.prototype),p(w.prototype,u,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var o=new w(h(e,r,n,i),a);return t.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},E(x),p(x,c,"Generator"),p(x,l,(function(){return this})),p(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return o.type="throw",o.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),l=a.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;C(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},18698:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},64687:(e,t,r)=>{var n=r(17061)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},30907:(e,t,r)=>{"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,{Z:()=>n})},15861:(e,t,r)=>{"use strict";function n(e,t,r,n,i,a,o){try{var s=e[a](o),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(i,a){var o=e.apply(t,r);function s(e){n(o,i,a,s,l,"next",e)}function l(e){n(o,i,a,s,l,"throw",e)}s(void 0)}))}}r.d(t,{Z:()=>i})},4942:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(49142);function i(e,t,r){return(t=(0,n.Z)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},87462:(e,t,r)=>{"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}r.d(t,{Z:()=>n})},44925:(e,t,r)=>{"use strict";function n(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}r.d(t,{Z:()=>n})},70885:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(40181);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,s=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||(0,n.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},42982:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(30907),i=r(40181);function a(e){return function(e){if(Array.isArray(e))return(0,n.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},49142:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(71002);function i(e){var t=function(e,t){if("object"!==(0,n.Z)(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==(0,n.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===(0,n.Z)(t)?t:String(t)}},71002:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,{Z:()=>n})},40181:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(30907);function i(e,t){if(e){if("string"==typeof e)return(0,n.Z)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?(0,n.Z)(e,t):void 0}}}},__webpack_module_cache__={},inProgress,dataWebpackPrefix;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,r)=>(__webpack_require__.f[r](e,t),t)),[])),__webpack_require__.u=e=>"chunks/"+e+"."+{127:"458f5b725ead613eb8ef",695:"731d9ea527fb9540ffce",958:"3927c7c167ac7da8f102",986:"7f6930d877f29c9f264c"}[e]+".js",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),inProgress={},dataWebpackPrefix="@airiot/report:",__webpack_require__.l=(e,t,r,n)=>{if(inProgress[e])inProgress[e].push(t);else{var i,a;if(void 0!==r)for(var o=document.getElementsByTagName("script"),s=0;s<o.length;s++){var l=o[s];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")==dataWebpackPrefix+r){i=l;break}}i||(a=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,__webpack_require__.nc&&i.setAttribute("nonce",__webpack_require__.nc),i.setAttribute("data-webpack",dataWebpackPrefix+r),i.src=e),inProgress[e]=[t];var u=(t,r)=>{i.onerror=i.onload=null,clearTimeout(c);var n=inProgress[e];if(delete inProgress[e],i.parentNode&&i.parentNode.removeChild(i),n&&n.forEach((e=>e(r))),t)return t(r)},c=setTimeout(u.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=u.bind(null,i.onerror),i.onload=u.bind(null,i.onload),a&&document.head.appendChild(i)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var t=__webpack_require__.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&!e;)e=r[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e})(),(()=>{var e={538:0};__webpack_require__.f.j=(t,r)=>{var n=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var i=new Promise(((r,i)=>n=e[t]=[r,i]));r.push(n[2]=i);var a=__webpack_require__.p+__webpack_require__.u(t),o=new Error;__webpack_require__.l(a,(r=>{if(__webpack_require__.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",o.name="ChunkLoadError",o.type=i,o.request=a,n[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var n,i,[a,o,s]=r,l=0;if(a.some((t=>0!==e[t]))){for(n in o)__webpack_require__.o(o,n)&&(__webpack_require__.m[n]=o[n]);s&&s(__webpack_require__)}for(t&&t(r);l<a.length;l++)i=a[l],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=this.webpackChunk_airiot_report=this.webpackChunk_airiot_report||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),__webpack_require__.nc=void 0;var __webpack_exports__={};(()=>{"use strict";var e=__webpack_require__(4942),t=__webpack_require__(87363),r=__webpack_require__.n(t),n=__webpack_require__(81821),i=__webpack_require__(53078),a=__webpack_require__.n(i),o=__webpack_require__(41081),s=__webpack_require__(70885),l=__webpack_require__(87462),u=(__webpack_require__(48488),__webpack_require__(95907)),c=__webpack_require__(3204);__webpack_require__(28551);const p=function(){var e=useI18n().t,t=[{id:"all",key:"all",name:e("全部报表"),icon:r().createElement(u.Icon,{type:"bank"}),parent:{},disable:!0,filter:{}},{id:"focus",key:"focus",name:e("关注报表"),icon:r().createElement(u.Icon,{type:"star"}),parent:{},disable:!0,filter:{focus:!0}},{id:"node",key:"node",name:e("设备报表"),icon:r().createElement(u.Icon,{type:"folder"}),parent:{},disable:!0,filter:{type:"node"}},{id:"time",key:"time",name:e("时间报表"),icon:r().createElement(u.Icon,{type:"FieldTime"}),parent:{},disable:!0,filter:{type:"time"}}];return r().createElement(u.C,{is:"Dashboard.FolderEditTree",getSelected:function(){},options:{title:e("报表分类"),type:"report",initdata:t}})};var h=__webpack_require__(12611),d=__webpack_require__.n(h);const f=xadminModel,m=xadminI18n;var v=__webpack_require__(82846);var g=__webpack_require__(85826),y=__webpack_require__(71031),b=__webpack_require__(57810);const x=function(e){var t=e.values,i=r().useState(!1),a=(0,s.Z)(i,2),o=a[0],l=a[1],u=useI18n().t;return r().createElement(r().Fragment,null,r().createElement(n.Button,{style:{float:"right"},type:"primary",onClick:function(){return l(!0)}},u("预览")),r().createElement(n.Modal,{title:u("报表预览"),visible:o,onCancel:function(){return l(!1)},width:"100%",footer:null,destroyOnClose:!0},r().createElement(y.k,{report:d().cloneDeep(t)},r().createElement(b.ReportPage,{preview:!0}))))};var E=__webpack_require__(4315);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?w(Object(n),!0).forEach((function(r){(0,e.Z)(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var T=function(){var e=useI18n().t;return r().createElement(n.Button,{onClick:function(){return a().go("/app/model/reportCopy/list")}},e("报表副本数据"))},A=function(e){var t=e.label,i=e.meta,a=e.input,o=e.field,s=e.children,u=o.attrs||{},c=i.touched&&(i.error||i.submitError),p=O(O({extra:o.help},"table"===o.name||"reportType"===o.name?{labelCol:{sm:{span:0}},wrapperCol:{sm:{span:24}}}:{labelCol:{sm:{span:6}},wrapperCol:{sm:{span:17}}}),{},{required:o.required,labelAlign:"left",tooltip:o.description});c&&(p.validateStatus="error",p.help=c);var h=s||r().createElement(Input,(0,l.Z)({},a,u,{size:"small"}));return r().createElement("div",{style:{display:"inline-block",width:"table"===o.name||"reportType"===o.name?"100%":"25%"}},r().createElement(n.Form.Item,(0,l.Z)({colon:!1,label:t},p),h))},C=function(e){var t=e.schema,n=(e.form,e.item),a=(0,i.use)("model.save",e).saveItem,o=r().useContext(y.G).dispatch,l=r().useState(),u=(0,s.Z)(l,2),p=u[0],h=u[1];return r().createElement(c.SchemaForm,{formKey:"report",schema:t,initialValues:n,onSubmit:function(e){a(O({id:p},e)).then((function(e){o({type:"SAVE_DATA",v:e}),h(null==e?void 0:e.id)}))}})};const M={Report:{name:"report",partialSave:!0,resource:"report/report",title:_r("报表定义"),type:"object",icon:r().createElement(u.Icon,{svg:__webpack_require__(90557)}),permission:{view:!0,add:!0,edit:!0,delete:!0},projectFields:["name","tableInfo","interval","type","focus"],listFields:["name","reportType","tableInfo","interval","type"],filters:{nav:["name","tableInfo","interval"]},rolePermission:[{key:"report.view",title:"查看"},{key:"report.add",title:"添加"},{key:"report.edit",title:"修改"},{key:"report.delete",title:"删除"},{key:"report.dataEdit",title:"数据修改"}],form:[{key:"reportType",group:A,component:function(e){var t=e.input,a=(0,i.use)("form",(function(e){return e.values})),o=useI18n().t,s=[{label:o("普通报表"),value:"normal"},{label:o("自由报表"),value:"free"}],l=t.value||"normal";return s=a.id?s.filter((function(e){return e.value===l})):s,r().createElement(r().Fragment,null,r().createElement(n.Radio.Group,{options:s,onChange:function(e){a&&(a.name||a.interval)?n.message.warning(o("开始编辑后不能更换报表类型")):t.onChange(e)},value:t.value||"normal",optionType:"button",buttonStyle:"solid"}),r().createElement(x,{values:a}))}},{key:"name",group:A},{key:"tableInfo",group:A},{key:"tableData",group:A},{key:"type",group:A},{key:"interval",group:A},{key:"interval_num",validate:function(e){return function(e){if(e){if(0===e)return _r("周期不能是0");if(e<=0)return _r("周期不能是负数")}}(e)},group:A},{key:"startTime",component:g.Z,group:A},{key:"canEdit",type:"radiobtn",group:A,initialValue:"false"},{key:"catalog",group:A,component:function(e){return r().createElement(u.C,(0,l.Z)({is:"Dashboard.FolderSelectTree"},e,{type:"report"}))}},{key:"fill",group:A,component:E.Qf},{key:"table",component:(0,u.lazy)((function(){return Promise.all([__webpack_require__.e(958),__webpack_require__.e(986)]).then(__webpack_require__.bind(__webpack_require__,25986))})),group:A}],required:["name","tableInfo","type","interval","table"],properties:{reportType:{type:"string",title:_r("报表类型")},name:{type:"string",title:_r("名称")},tableInfo:{title:_r("设备表"),type:"object",fieldType:"table",field:{func:"device",placeholder:_r("请选择设备表")},properties:{}},tableData:{type:"object",title:_r("设备"),fieldType:"tableData",properties:{},field:{depend:"tableInfo",placeholder:_r("请选择设备"),effect:function(e,t){var r=e.value,n=[{value:"time",name:_r("按时间统计")},{value:"node",name:_r("按设备统计")}];r&&r.id&&n.pop(),t.setFieldData("type",{field:{titleMap:n}}),r&&r.id&&"node"==t.getState().values.type&&t.change("type",null)}}},type:{type:"string",title:_r("统计类型"),field_type:"select",enum:["node","time"],enum_title:[_r("按设备统计"),_r("按时间统计")],clearable:!1},interval:{type:"string",title:_r("统计周期"),field_type:"select",enum:["hours","days","weeks","months","years"],enum_title:[_r("小时报"),_r("日报"),_r("周报"),_r("月报"),_r("年报")]},interval_num:{type:"number",title:_r("周期间隔")},startTime:{title:_r("起始时间"),type:"string",showInList:!1},table:{type:"object",title:_r("表格"),showInList:!1,properties:{}},wheres:{type:"array",title:_r("查询条件"),showInList:!1,items:{type:"object",properties:{key:{type:"string",title:_r("字段名")},value:{type:"string",title:_r("条件值")}}}},filters:{type:"array",title:_r("过滤器"),showInList:!1,items:{type:"object",properties:{name:{type:"string",title:_r("名称")},field:{type:"string",title:_r("过滤字段")},filter:{type:"string",title:_r("过滤类型")}}}},createTime:{type:"string",format:"date-time",title:_r("创建时间")},canEdit:{type:"string",title:_r("查看可编辑"),enum:["true","false"],enum_title:[_r("是"),_r("否")],description:_r("启用查看可编辑后，报表查看默认为副本内容，查看页面可进行编辑并保存，报表的修改不影响已有的副本内容")},catalog:{type:"object",title:_r("所属目录"),showInList:!1,properties:{}},fill:{type:"string",title:_r("填充值")}},orders:{createTime:"DESC"},formProps:{component:function(e){return r().createElement(y.k,null,r().createElement(C,e))}},fieldRender:{reportType:function(e){var t=e.value,n=useI18n().t;return r().createElement("span",null,n("free"===t?"自由报表":"普通报表"))},tableInfo:function(e){var t=e.value;return r().createElement("span",null,null==t?void 0:t.title)},tableData:function(e){var t=e.value;return r().createElement("span",null,null==t?void 0:t.name)}},formEffect:function(e){e.useField("reportType",(function(t){"free"===t.value?(e.setFieldData("tableInfo",{display:!1}),e.setFieldData("tableData",{display:!1}),e.setFieldData("type",{display:!1}),e.setFieldData("interval_num",{display:!1}),e.setFieldData("startTime",{display:!1}),e.setFieldData("fill",{display:!1}),e.change("tableInfo",{}),e.change("type","time")):(e.setFieldData("tableInfo",{display:!0}),e.setFieldData("tableData",{display:!0}),e.setFieldData("type",{display:!0}),e.setFieldData("interval_num",{display:!0}),e.setFieldData("startTime",{display:!0}),e.setFieldData("fill",{display:!0}))})),e.useField("type",(function(t){var r=t.value;"time"===r&&"free"!==e.getState().values.reportType?e.setFieldData("startTime",{display:!0}):(e.setFieldData("startTime",{display:!1}),e.change("startTime",null));var n=[{value:"days",name:_r("日报")},{value:"weeks",name:_r("周报")},{value:"months",name:_r("月报")},{value:"years",name:_r("年报")}];"node"!=r&&n.unshift({value:"hours",name:_r("小时报")}),e.setFieldData("interval",{field:{titleMap:n}}),"node"==r&&"hours"==e.getState().values.interval&&e.change("interval",null)}))},blocks:{"model.list.navbtn":function(){return[r().createElement(T,null)]}},itemActions:["report_view","edit","delete","report_focus"],components:{ListPage:function(e){var t=(0,i.use)("model").model,a=(0,i.use)("model.transI18n",{model:t}).modelI18n,o=(0,i.use)("model.event").onAdd,s=useI18n().t,l=a.title,c=a.icon||a.name;return d().isString(c)&&(c=r().createElement(u.Icon,{name:c})),r().createElement(f.Model,{schema:a},r().createElement(u.Page,{title:r().createElement("span",null,c," ",s(l)),actions:r().createElement(r().Fragment,null,r().createElement(f.ModelBlock,{name:"model.list.navbtn"}),r().createElement(v.HasPermission,{FailureComponent:null,permission:"report.add"},r().createElement(n.Button,{type:"primary",onClick:o},r().createElement(u.Icon,{name:"plus"}),(0,m._t)("Add {{object}}",{object:a.title})))),sider:r().createElement(p,null)},r().createElement("div",{key:"model-list-subnav",style:{display:"flex",justifyContent:"space-between",marginBottom:".5rem"}},r().createElement(u.C,{is:"Model.Pagination"}),r().createElement(u.C,{is:"Model.ListSubMenu"})),r().createElement(u.C,{is:"Model.DataTable"}),r().createElement("div",{key:"model-list-downnav",style:{display:"flex",justifyContent:"space-between",marginTop:".5rem"}},r().createElement(u.C,{is:"Model.ActionBar"}),r().createElement(u.C,{is:"Model.Pagination"}))))},DataEmpty:function(e){var t=useI18n().t;return r().createElement(n.Card,null,r().createElement(n.Empty,{description:t("暂无数据"),image:__webpack_require__(55051),style:{width:"8rem",margin:"0 auto"}})," ,")}}}};var P=__webpack_require__(16640);n.Radio.Button,n.Radio.Group;const D={reportCopy:{name:"reportCopy",resource:"report/reportCopy",title:_r("报表副本数据"),type:"object",icon:"edit",permission:{view:!0,add:!1,edit:!1,delete:!0},projectFields:["name","tableInfo","interval","type","focus"],editableFields:["name"],listFields:["name","reportType","tableInfo","interval","type"],filters:{nav:["name","tableInfo","interval"]},form:["name"],menuItems:[{title:_r("报表管理"),url:"/app/model/reportCopy/list",icon:"reportCopy",permission:"report.view"}],properties:{reportType:{type:"string",title:_r("报表类型")},name:{type:"string",title:_r("名称")},tableInfo:{title:_r("设备表"),type:"object",fieldType:"table",field:{func:"device"},properties:{}},interval:{type:"string",title:_r("统计周期"),enum:["hours","days","weeks","months","years"],enum_title:[_r("小时报"),_r("日报"),_r("周报"),_r("月报"),_r("年报")]},type:{type:"string",title:_r("统计类型"),enum:["node","time"],enum_title:[_r("按设备统计"),_r("按时间统计")]}},createTime:{type:"string",format:"date-time",title:_r("创建时间")},orders:{createTime:"DESC"},fieldRender:{reportType:function(e){var t=e.value,n=useI18n().t;return r().createElement("span",null,n("free"===t?"自由报表":"普通报表"))},tableInfo:function(e){var t=e.value;return r().createElement("span",null,null==t?void 0:t.title)}},blocks:{"model.list.navbtn":function(){var e=useI18n().t;return r().createElement(n.Button,{onClick:function(){return a().go("/app/model/Report/list")}},e("返回报表定义"))}},itemActions:[function(e){var t=e.item,o=(0,i.use)("auth.user").user,s=o.isSuper,l=o.rolesObjList,u=useI18n().t,c=s;return null==l||l.forEach((function(e){e.permission&&e.permission.length>0&&e.permission.indexOf("reportcopy.view")>-1&&(c=!0)})),c?r().createElement(n.Button,{onClick:function(){return a().go("/app/model/reportCopy/".concat(t.id,"/view"))}},u("查看报表")):""},function(e){var t=e.item,o=(0,i.use)("auth.user").user,s=o.isSuper,l=o.rolesObjList,u=s;return null==l||l.forEach((function(e){e.permission&&e.permission.length>0&&e.permission.indexOf("reportcopy.edit")>-1&&(u=!0)})),u?r().createElement(n.Button,{onClick:function(){return a().go("/app/model/reportCopy/".concat(t.id,"/editTable"))}},r().createElement(P.EditOutlined,null)):""},"delete"],components:{DataEmpty:function(e){var t=useI18n().t;return r().createElement(n.Card,null,r().createElement(n.Empty,{description:t("暂无数据"),image:__webpack_require__(56771),imageStyle:{height:100}}))},AddButton:function(){return null}}}};var S=__webpack_require__(44925),k=__webpack_require__(49686),I=__webpack_require__(28864),R=__webpack_require__(72077),L=__webpack_require__(41977),N=__webpack_require__(90524),j=__webpack_require__(75618),Y=__webpack_require__(44648),B=["reportConfig"],V=["Dom"],U=["initialValues","input"],H=["initialValues","input"],F=["initialValues","input"];function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function W(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Z(Object(n),!0).forEach((function(r){(0,e.Z)(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var q=function(e){var t,a,o,l=e.payload,u=e.init,c=(0,i.use)("report.data"),p=c.rows,h=void 0===p?{}:p,d=c.loading,f=c.loadReport,m=c.report,v=r().useState(!1),g=(0,s.Z)(v,2),y=g[0],x=g[1],E=r().useState({}),w=(0,s.Z)(E,2),O=w[0],T=w[1],A=r().useState([]),C=(0,s.Z)(A,2),M=C[0],P=C[1],D=r().useRef(null),S=_.pick(l,["department","node","time","range","timeFree"]);return r().useEffect((function(){"free"===(null==m?void 0:m.reportType)?(T(W(W({},(0,L.f7)()),S)),f(W(W({},(0,L.f7)()),S))):"time"===(null==m?void 0:m.type)?(T(W(W({},(0,R.f7)(m)),S)),f(W(W({},(0,R.f7)(m)),S))):"node"===(null==m?void 0:m.type)&&(T(W(W({},(0,I.f7)(m)),S)),f(W(W({},(0,I.f7)(m)),S)))}),[JSON.stringify(S)]),r().useEffect((function(){var e,t;null==m||null===(e=m.dataList)||void 0===e||e.forEach((function(e){(0,Y.Al)(e.filterValues,O,m)&&(t=!0,P(null==e?void 0:e.data))})),t||P([])}),[JSON.stringify(O)]),r().createElement("div",{className:"report-widget",style:{height:"100%"}},r().createElement(n.Button.Group,{style:{margin:10,float:"right"}},(null===(t=l.opBtn)||void 0===t?void 0:t.indexOf("edit"))>-1&&r().createElement(b.CanEditReportBtn,{setEdit:x,edit:y,report:m,filterValues:O,editData:M,setReport:u}),(null===(a=l.opBtn)||void 0===a?void 0:a.indexOf("export"))>-1&&!y&&r().createElement(j.Z,{report:m,rows:h,getRows:function(){return D.current.getData()}}),(null===(o=l.opBtn)||void 0===o?void 0:o.indexOf("print"))>-1&&!y&&r().createElement(N.Z,{report:m,rows:h})),l.editMode&&r().createElement("div",{style:{width:220,height:42,position:"absolute",right:0}}),d?r().createElement("div",{style:{position:"absolute",width:"100%",height:"100%",top:0,left:0,display:"flex",justifyContent:"center",alignItems:"center"}},r().createElement(n.Spin,null)):r().createElement(k.Z,{ref:D,report:m,rows:h,loading:d,edit:y,editData:M,setEditData:P,setNewRows:!0}))},K=function(e){var t=e.Dom,n=(0,S.Z)(e,V),a=(0,i.use)("report.data",n),o=(a.loadReport,a.report),u=r().useState({}),c=(0,s.Z)(u,2),p=c[0],h=c[1];return r().useEffect((function(){"free"===(null==o?void 0:o.reportType)?h((0,L.f7)()):"time"===(null==o?void 0:o.type)?h((0,R.f7)(o)):"node"===(null==o?void 0:o.type)&&h((0,I.f7)(o))}),[o]),r().createElement(t,(0,l.Z)({initialValues:p},n))};const z={title:_r("报表组件"),category:_r("视图及元素"),icon:"",component:function(e){var t=e.reportConfig,n=(0,S.Z)(e,B),a=useI18n().t,o=(t||{}).id,l=r().useState(null),c=(0,s.Z)(l,2),p=c[0],h=c[1],d=r().useState(!1),f=(0,s.Z)(d,2),m=f[0],v=f[1];r().useEffect((function(){g()}),[o]);var g=function(){o&&(v(!0),(0,i.api)({name:"report/report/".concat(o)}).fetch("",{}).then((function(e){var t=e.json;h(t),v(!1)})))};return m?null:p?r().createElement(y.k,{report:p},r().createElement(q,{payload:n,init:g})):r().createElement(u.C,{is:"NoData",style:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},description:a("暂无数据"),image:__webpack_require__(56771)})},initLayout:{width:700,height:280},paramSchema:{type:"object",properties:{reportConfig:{title:_r("报表选择"),type:"string",field:{component:function(e){var t,a,o,l,u=e.input,c=useI18n().t,p=r().useState([]),h=(0,s.Z)(p,2),d=h[0],f=h[1],m={hours:c("小时报"),days:c("日报"),weeks:c("周报"),months:c("月报"),years:c("年报")},v={node:c("设备"),time:c("时间")};return r().useEffect((function(){(0,i.api)({name:"report/report"}).fetch("",{}).then((function(e){var t=e.json;f(t)}))}),[]),r().createElement("div",null,r().createElement(n.Select,{showSearch:!0,optionFilterProp:"children",defaultValue:null===(t=u.value)||void 0===t?void 0:t.id,onChange:function(e){(0,i.api)({name:"report/report/".concat(e)}).fetch("",{}).then((function(e){var t=e.json;u.onChange(t)}))}},d.map((function(e){var t=e.id,n=e.name;return r().createElement(Option,{value:t},n)}))),null!==(a=u.value)&&void 0!==a&&a.type?r().createElement("div",{style:{fontSize:12,color:"#bfbfbf",paddingTop:6}},c("类型:"),v[null===(o=u.value)||void 0===o?void 0:o.type],", ",c("周期:"),m[null===(l=u.value)||void 0===l?void 0:l.interval]):null)},effect:function(e,t){var r=e.value;setTimeout((function(){"free"===(null==r?void 0:r.reportType)?(t.setFieldData("department",{display:!1}),t.setFieldData("node",{display:!1}),t.setFieldData("time",{display:!1}),t.setFieldData("range",{display:!1}),t.setFieldData("timeFree",{display:!0})):(t.setFieldData("department",{display:!(null==r||!r.id)}),t.setFieldData("node",{display:!(null==r||!r.id||"time"!==(null==r?void 0:r.type))}),t.setFieldData("time",{display:!(null==r||!r.id||"node"!==(null==r?void 0:r.type))}),t.setFieldData("range",{display:!(null==r||!r.id||"time"!==(null==r?void 0:r.type))}),t.setFieldData("timeFree",{display:!1}))}))}}},department:{type:"array",title:_r("部门"),fieldType:"tableData",field:{func:"dataAuth",placeholder:_r("选择部门")},items:{}},node:{type:"object",title:_r("设备"),bind:!0,properties:{},field:{placeholder:_r("请选择设备"),component:function(e){var t=e.option.form.getState().values.reportConfig;return r().createElement(y.k,{report:t},r().createElement(K,(0,l.Z)({Dom:function(e){return t?r().createElement(R.eH,(0,l.Z)({},e,{field:W(W({},e.field),{},{model:t.model,node:t.node})})):null}},e)))}}},time:{type:"object",title:_r("时间范围（设备）"),bind:!0,field:{component:function(e){var t=e.option.form.getState().values.reportConfig;return r().createElement(y.k,{report:t},r().createElement(K,(0,l.Z)({Dom:function(e){var n=e.initialValues,i=e.input,a=(0,S.Z)(e,U);return t?r().createElement(I.jF,(0,l.Z)({interval:t.interval},a,{input:{value:i.value||n.time,onChange:i.onChange}})):null}},e)))}}},range:{type:"object",title:_r("时间范围（时间）"),bind:!0,properties:{},field:{component:function(e){var t=e.option.form.getState().values.reportConfig;return r().createElement(y.k,{report:t},r().createElement(K,(0,l.Z)({Dom:function(e){var n=e.initialValues,i=e.input,a=(0,S.Z)(e,H);return t?"weeks"===t.interval?r().createElement(R._B,(0,l.Z)({report:t},a,{input:{value:i.value||n.range,onChange:i.onChange}})):r().createElement(R.Im,(0,l.Z)({report:t},a,{input:{value:i.value||n.range,onChange:i.onChange}})):null}},e)))}}},timeFree:{type:"object",title:_r("时间"),bind:!0,field:{component:function(e){var t=e.option.form.getState().values.reportConfig;return r().createElement(y.k,{report:t},r().createElement(K,(0,l.Z)({Dom:function(e){var n=e.initialValues,i=e.input,a=(0,S.Z)(e,F);return t?r().createElement(L.Im,(0,l.Z)({report:t},a,{input:{value:i.value||n.timeFree,onChange:i.onChange}})):null}},e)))}}},opBtn:{type:"array",title:"操作按钮",items:{},bind:!0,field:{component:function(e){var t=e.input,a=(0,i.use)("form").form,o=r().useState([]),l=(0,s.Z)(o,2),u=l[0],c=l[1];return r().useEffect((function(){a.useField("reportConfig",(function(e){var t=e.value;c("true"===(null==t?void 0:t.canEdit)?[{value:"export",label:"导出"},{value:"print",label:"打印"},{value:"edit",label:"编辑"}]:[{value:"export",label:"导出"},{value:"print",label:"打印"}])}))}),[]),r().createElement(n.Select,{mode:"multiple",options:u,value:t.value||[],onChange:t.onChange})}}}}}};function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?X(Object(n),!0).forEach((function(r){(0,e.Z)(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $=(0,u.lazy)((function(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,57810))})),Q=(0,u.lazy)((function(){return __webpack_require__.e(127).then(__webpack_require__.bind(__webpack_require__,26127))})),J=(0,u.lazy)((function(){return __webpack_require__.e(695).then(__webpack_require__.bind(__webpack_require__,73695))})),ee=function(e){var t=e.onClick,i=e.title,a=useI18n().t;return r().createElement(n.Button,{onClick:t},a(i))};i.app.use({name:"iot.report",models:{Report:G(G({},M.Report),{},{title:_r("报表"),blocks:G(G({},M.Report.blocks),{},{"model.list.navbtn":function(){return[r().createElement(ee,{onClick:function(){return i.app.go("/app/model/Report/focus")},title:_r("关注报表")}),r().createElement(ee,{onClick:function(){return i.app.go("/app/model/reportCopy/list")},title:_r("报表副本数据")})]}}),permission:{view:!0,add:!1,edit:!1,delete:!1},itemActions:["report_view","report_focus"],components:{DataEmpty:function(e){var t=useI18n().t;return r().createElement(n.Card,null,r().createElement(n.Empty,{description:t("暂无数据"),image:__webpack_require__(56771),imageStyle:{height:100}}))},AddButton:function(e){return null}}})},items:{modelReports:{type:"map"}},components:{"Report.BaseView":b.ReportBaseView},icons:{name:"Report",url:__webpack_require__(64258)},routers:{"/app/":[{path:"model/Report/focus",breadcrumbName:_r("关注报表"),component:function(e){e.params;var t=useI18n().t;return r().createElement(f.Model,{name:"Report",modelKey:"Report_copy",initialValues:{wheres:{filters:{focus:!0}}},props:{blocks:G(G({},M.Report.blocks),{},{"model.list.navbtn":function(){return[r().createElement(ee,{onClick:function(){return i.app.go("/app/model/Report/list")},title:_r("返回报表")}),r().createElement(ee,{onClick:function(){return i.app.go("/app/model/reportCopy/list")},title:_r("报表副本数据")})]}})}},r().createElement(u.Page,{title:t("关注报表"),actions:r().createElement(f.ModelBlock,{name:"model.list.navbtn"})},r().createElement("div",{key:"model-list-subnav",style:{display:"flex",justifyContent:"space-between",marginBottom:".5rem"}},r().createElement(u.C,{is:"Model.Pagination"}),r().createElement(u.C,{is:"Model.ListSubMenu"})),r().createElement(u.C,{is:"Model.DataTable"}),r().createElement("div",{key:"model-list-downnav",style:{display:"flex",justifyContent:"space-between",marginTop:".5rem"}},r().createElement(u.C,{is:"Model.ActionBar"}),r().createElement(u.C,{is:"Model.Pagination"}))))}},{path:"model/Report/:id/view",breadcrumbName:_r("系统报表"),component:function(){return r().createElement($,null)}}]},hooks:o.Z,dashboardWidgets:{"Report.Reportwidget":z},modelActions:{report_view:{component:function(e){var t=e.item,a=useI18n().t;return r().createElement(n.Button,{onClick:function(){return i.app.go("/app/model/Report/".concat(t.id,"/view"))}},a("查看报表"))},description:_r("查看报表")},report_focus:{component:function(e){var t=e.item;return r().createElement(J,{button:!0,item:t})},description:_r("关注报表")}}}).use({models:D,routers:{"/app/":[{path:"model/reportCopy/:id/view",breadcrumbName:_r("报表副本查看"),component:function(){return r().createElement(Q,{type:"view"})}},{path:"model/reportCopy/:id/editTable",breadcrumbName:_r("报表副本编辑"),component:function(){return r().createElement(Q,{type:"edit"})}}]}})})()})();
//# sourceMappingURL=front.js.map