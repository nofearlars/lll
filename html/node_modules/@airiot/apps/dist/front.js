(()=>{var t={946:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var a=n(15),r=n.n(a),o=n(645),i=n.n(o)()(r());i.push([t.id,".logo-box .oauth-logo:first-child, .logo-box .oauth-logo:first-child svg{\n  margin-right: 0.4rem;\n  width: 32px !important;\n  height: 32px !important;\n}\n.logo-box .oauth-logo:last-child, .logo-box .oauth-logo:last-child svg{\n  width: 64px !important;\n  height: 33px !important;\n}\n","",{version:3,sources:["webpack://./src/oauth/index.css"],names:[],mappings:"AAAA;EACE,oBAAoB;EACpB,sBAAsB;EACtB,uBAAuB;AACzB;AACA;EACE,sBAAsB;EACtB,uBAAuB;AACzB",sourcesContent:[".logo-box .oauth-logo:first-child, .logo-box .oauth-logo:first-child svg{\n  margin-right: 0.4rem;\n  width: 32px !important;\n  height: 32px !important;\n}\n.logo-box .oauth-logo:last-child, .logo-box .oauth-logo:last-child svg{\n  width: 64px !important;\n  height: 33px !important;\n}\n"],sourceRoot:""}]);const l=i},316:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var a=n(15),r=n.n(a),o=n(645),i=n.n(o)()(r());i.push([t.id,".tabs-secondary .ant-tabs-nav {\n  padding-top: 20px;\n}\n\n.tabs-secondary .ant-tabs-content-holder  {\n  padding: 10px;\n}\n\n\n.tabs-secondary .ant-tabs-tab-btn {\n  transition: all 0s !important\n}\n\n.main-content .tabs-secondary .ant-tabs-nav {\n  background-color: #fff;\n  padding-bottom: 20px;\n}\n\n.main-content .tabs-secondary .ant-tabs-nav .ant-tabs-nav-wrap .ant-tabs-nav-list {\n  margin-left: 40px;\n}\n\n.main-content .tabs-secondary .ant-tabs-nav .ant-tabs-nav-wrap .ant-tabs-nav-list .ant-tabs-tab {\n  padding: 20px;\n}\n\n.main-content .tabs-secondary .ant-tabs-nav .ant-tabs-extra-content {\n  margin-right: 40px;\n}\n\n.main-content .tabs-secondary .ant-tabs-nav .searchInput {\n  margin: 10px 0;\n}\n.tabs-secondary.ant-tabs-top>.ant-tabs-nav::before {\n  border-bottom: 1px solid transparent;\n}\n\n.tabs-secondary .ant-tabs-nav .ant-tabs-nav-list .ant-tabs-tab {\n  height: 40px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 4px;\n}\n\n.tabs-secondary .ant-tabs-nav .ant-tabs-nav-list .ant-tabs-tab-active {\n  background-color: #4154b9;\n}\n\n.tabs-secondary .ant-tabs-nav .ant-tabs-nav-list .ant-tabs-tab .ant-tabs-tab-btn {\n  font-size: 16px;\n  font-family: PingFangSC-Regular, PingFang SC;\n}\n.tabs-secondary .ant-tabs-nav .ant-tabs-nav-list .ant-tabs-tab-active .ant-tabs-tab-btn {\n  color: #fff;\n}\n.tabs-secondary .ant-tabs-extra-content {\n  display: flex;\n}\n.tabs-secondary .ant-tabs-extra-content .ant-input-group-wrapper {\n  margin-right: 20px;\n}","",{version:3,sources:["webpack://./src/secondary/index.css"],names:[],mappings:"AAAA;EACE,iBAAiB;AACnB;;AAEA;EACE,aAAa;AACf;;;AAGA;EACE;AACF;;AAEA;EACE,sBAAsB;EACtB,oBAAoB;AACtB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,cAAc;AAChB;AACA;EACE,oCAAoC;AACtC;;AAEA;EACE,YAAY;EACZ,aAAa;EACb,uBAAuB;EACvB,mBAAmB;EACnB,kBAAkB;AACpB;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,eAAe;EACf,4CAA4C;AAC9C;AACA;EACE,WAAW;AACb;AACA;EACE,aAAa;AACf;AACA;EACE,kBAAkB;AACpB",sourcesContent:[".tabs-secondary .ant-tabs-nav {\n  padding-top: 20px;\n}\n\n.tabs-secondary .ant-tabs-content-holder  {\n  padding: 10px;\n}\n\n\n.tabs-secondary .ant-tabs-tab-btn {\n  transition: all 0s !important\n}\n\n.main-content .tabs-secondary .ant-tabs-nav {\n  background-color: #fff;\n  padding-bottom: 20px;\n}\n\n.main-content .tabs-secondary .ant-tabs-nav .ant-tabs-nav-wrap .ant-tabs-nav-list {\n  margin-left: 40px;\n}\n\n.main-content .tabs-secondary .ant-tabs-nav .ant-tabs-nav-wrap .ant-tabs-nav-list .ant-tabs-tab {\n  padding: 20px;\n}\n\n.main-content .tabs-secondary .ant-tabs-nav .ant-tabs-extra-content {\n  margin-right: 40px;\n}\n\n.main-content .tabs-secondary .ant-tabs-nav .searchInput {\n  margin: 10px 0;\n}\n.tabs-secondary.ant-tabs-top>.ant-tabs-nav::before {\n  border-bottom: 1px solid transparent;\n}\n\n.tabs-secondary .ant-tabs-nav .ant-tabs-nav-list .ant-tabs-tab {\n  height: 40px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 4px;\n}\n\n.tabs-secondary .ant-tabs-nav .ant-tabs-nav-list .ant-tabs-tab-active {\n  background-color: #4154b9;\n}\n\n.tabs-secondary .ant-tabs-nav .ant-tabs-nav-list .ant-tabs-tab .ant-tabs-tab-btn {\n  font-size: 16px;\n  font-family: PingFangSC-Regular, PingFang SC;\n}\n.tabs-secondary .ant-tabs-nav .ant-tabs-nav-list .ant-tabs-tab-active .ant-tabs-tab-btn {\n  color: #fff;\n}\n.tabs-secondary .ant-tabs-extra-content {\n  display: flex;\n}\n.tabs-secondary .ant-tabs-extra-content .ant-input-group-wrapper {\n  margin-right: 20px;\n}"],sourceRoot:""}]);const l=i},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,a){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(a)for(var o=0;o<this.length;o++){var i=this[o][0];null!=i&&(r[i]=!0)}for(var l=0;l<t.length;l++){var s=[].concat(t[l]);a&&r[s[0]]||(n&&(s[2]?s[2]="".concat(n," and ").concat(s[2]):s[2]=n),e.push(s))}},e}},15:t=>{"use strict";function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}t.exports=function(t){var n,a,r=(a=4,function(t){if(Array.isArray(t))return t}(n=t)||function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var a,r,o=[],i=!0,l=!1;try{for(n=n.call(t);!(i=(a=n.next()).done)&&(o.push(a.value),!e||o.length!==e);i=!0);}catch(t){l=!0,r=t}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return o}}(n,a)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?e(t,n):void 0}}(n,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[1],i=r[3];if(!i)return o;if("function"==typeof btoa){var l=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(l),c="/*# ".concat(s," */"),u=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[o].concat(u).concat([c]).join("\n")}return[o].join("\n")}},379:(t,e,n)=>{"use strict";var a,r=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),o=[];function i(t){for(var e=-1,n=0;n<o.length;n++)if(o[n].identifier===t){e=n;break}return e}function l(t,e){for(var n={},a=[],r=0;r<t.length;r++){var l=t[r],s=e.base?l[0]+e.base:l[0],c=n[s]||0,u="".concat(s," ").concat(c);n[s]=c+1;var p=i(u),d={css:l[1],media:l[2],sourceMap:l[3]};-1!==p?(o[p].references++,o[p].updater(d)):o.push({identifier:u,updater:b(d,e),references:1}),a.push(u)}return a}function s(t){var e=document.createElement("style"),a=t.attributes||{};if(void 0===a.nonce){var o=n.nc;o&&(a.nonce=o)}if(Object.keys(a).forEach((function(t){e.setAttribute(t,a[t])})),"function"==typeof t.insert)t.insert(e);else{var i=r(t.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(e)}return e}var c,u=(c=[],function(t,e){return c[t]=e,c.filter(Boolean).join("\n")});function p(t,e,n,a){var r=n?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(t.styleSheet)t.styleSheet.cssText=u(e,r);else{var o=document.createTextNode(r),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(o,i[e]):t.appendChild(o)}}function d(t,e,n){var a=n.css,r=n.media,o=n.sourceMap;if(r?t.setAttribute("media",r):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=a;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(a))}}var m=null,f=0;function b(t,e){var n,a,r;if(e.singleton){var o=f++;n=m||(m=s(e)),a=p.bind(null,n,o,!1),r=p.bind(null,n,o,!0)}else n=s(e),a=d.bind(null,n,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return a(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;a(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a));var n=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var a=0;a<n.length;a++){var r=i(n[a]);o[r].references--}for(var s=l(t,e),c=0;c<n.length;c++){var u=i(n[c]);0===o[u].references&&(o[u].updater(),o.splice(u,1))}n=s}}}},540:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 49.6 43.04"><g id="f5869899-ce31-43c5-afce-6de5d940ec30" data-name="图层 2"><g id="b0db39a8-62a9-4275-bc0b-3bf37e724268" data-name="图层 1"><polygon points="8.93 17.52 24.91 17.48 28.46 11.48 5.78 11.49 0 21.42 12.35 42.96 17.01 42.98 19.04 42.98 6.67 21.41 8.93 17.52" style="fill:#006ad3"></polygon><polygon points="46.29 15.82 33.85 37.21 29.91 37.19 29.91 37.19 21.73 22.85 14.11 22.83 24.73 41.45 25.61 43 25.62 43.01 37.13 43.04 49.6 21.59 46.29 15.82" style="fill:#006ad3"></polygon><polygon points="33.87 5.76 33.95 5.76 36.28 9.82 28.71 22.85 32.13 28.71 42.98 10.05 37.26 0.07 12.45 0 9.16 5.67 33.86 5.74 33.87 5.76" style="fill:#006ad3"></polygon></g></g></svg>'},256:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 106.24 32.81"><g id="ebddfede-5530-4835-a286-546d9040d1b5" data-name="图层 2"><g id="e6ac1f08-3e17-4a69-9578-e562d0a5d1c0" data-name="图层 1"><path d="M13.27,32.81l-.48-6.18H8.06l-.54,6.18H0L5.16.11h9.62l5.89,32.7ZM10.33,6.87l-2,15.34h4.06L10.33,6.87Z" style="fill:#006ad3"></path><rect x="23.61" y="0.11" width="7.27" height="32.7" style="fill:#171b1e"></rect><path d="M46.52,32.7V22.11c0-2.66-.31-3.47-.58-3.87-.46-.71-1.41-1-3-1h-.83V32.7H34.86V0h5.49a48.21,48.21,0,0,1,8.39.47,5.08,5.08,0,0,1,3.15,2.16c.83,1.19,1.26,3.18,1.26,5.92,0,3.09-.46,4.37-.84,4.9A4.76,4.76,0,0,1,49,15.39h-.12a5,5,0,0,1,3.35,2.35A5.34,5.34,0,0,1,53,19.58a30.07,30.07,0,0,1,.2,4.89V32.7ZM42.13,13.52H43A4.51,4.51,0,0,0,45.55,13c.68-.46,1-1.47,1-3.37V7.7a3.54,3.54,0,0,0-.87-2.77A4,4,0,0,0,43,4.21h-.83Z" style="fill:#171b1e"></path><rect x="56.54" width="7.27" height="32.7" style="fill:#006ad3"></rect><path d="M76.7,32.7a12.14,12.14,0,0,1-4.64-.84,7.32,7.32,0,0,1-3.18-2.43,7.46,7.46,0,0,1-1.44-3.53c-.16-1.37-.24-3.84-.24-7.33V14.24c0-3.41.08-5.84.23-7.24a7.39,7.39,0,0,1,4.51-6A11.82,11.82,0,0,1,76.7.11,12.14,12.14,0,0,1,81.34,1a7.44,7.44,0,0,1,3.18,2.43A7.34,7.34,0,0,1,86,6.91a70.64,70.64,0,0,1,.25,7.33v4.33c0,3.4-.08,5.84-.24,7.24a7.29,7.29,0,0,1-1.37,3.54,7.58,7.58,0,0,1-3.13,2.47A12,12,0,0,1,76.7,32.7Zm0-28.44a2.05,2.05,0,0,0-1.76.9c-.27.39-.52,1.11-.52,3.67V23.32a13.93,13.93,0,0,0,.29,4,2.09,2.09,0,0,0,3.89-.13,14.7,14.7,0,0,0,.3-4.09V8.83a9.67,9.67,0,0,0-.33-3.38A1.87,1.87,0,0,0,76.74,4.26Z" style="fill:#171b1e"></path><polygon points="93.67 32.7 93.67 5.21 88.38 5.21 88.38 0 106.24 0 106.24 5.21 100.93 5.21 100.93 32.7 93.67 32.7" style="fill:#171b1e"></polygon></g></g></svg>'}},e={};function n(a){var r=e[a];if(void 0!==r)return r.exports;var o=e[a]={id:a,exports:{}};return t[a](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0,(()=>{"use strict";const t=_;var e=n.n(t);const a=React;var r=n.n(a);const o=xadmin,i=antd,l=xadminUi,s=xadminAuth,c=icons;function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function p(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,"string");if("object"!==u(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===u(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,r,o,i,l=[],s=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=o.call(n)).done)&&(l.push(a.value),l.length!==e);s=!0);}catch(t){c=!0,r=t}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw r}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}xadminForm;var h=function(t){var e=t.children,n=t.invalid,a=t.handleSubmit,l=t.onDelete,s=t.schema,c=(t.submitting,o.app.context._t);return r().createElement("form",{className:"form-horizontal",onSubmit:a},r().createElement(i.Card,{style:{marginTop:0,border:"none"}},r().createElement("div",null,e),r().createElement(i.Row,{style:{padding:"0 15px",float:"right"}},r().createElement(i.Button,{type:"primary",onClick:a,disabled:n},c("Save"))," ","base"==s.name?r().createElement(i.Button,{type:"error",onClick:l},c("Delete")):null)))};const v={OauthApp:{name:"oauthApp",resource:"core/oauthApp",type:"object",icon:"user",title:_r("OAuth应用"),rolePermission:[{key:"oauthApp.view",title:_r("查看")},{key:"oauthApp.add",title:_r("添加")},{key:"oauthApp.edit",title:_r("修改")},{key:"oauthApp.delete",title:_r("删除")}],properties:{name:{type:"string",title:_r("应用名称"),width:120},clientid:{type:"string",title:_r("OAuth2.0客户端ID"),width:150},clientsecret:{type:"string",title:_r("OAuth2.0客户端密钥"),width:200},domain:{type:"string",title:_r("客户回调接口的url的前缀"),width:200},redirect_uri:{type:"string",title:_r("客户回调接口的url"),width:200},platform_uri:{type:"string",title:_r("平台地址"),width:200}},partialSave:!0,forceGetItem:!0,permission:{view:!0,add:!0,edit:!0,delete:!0},form:["name",{key:"domain",validate:function(t){return t&&t.startsWith("http")||t&&t.startsWith("https")?null:_r("地址必须是http/https")}},{key:"redirect_uri",validate:function(t){return t&&t.startsWith("http")||t&&t.startsWith("https")?null:_r("地址必须是http/https")}},{key:"platform_uri",validate:function(t){return t&&t.startsWith("http")||t&&t.startsWith("https")?null:_r("地址必须是http/https")}}],components:{DataEmpty:function(t){return r().createElement(i.Card,null,r().createElement(l.C,{is:"NoData"}))},AddButton:function(t){var e=useI18n(),n=e.t,a=(e.i18n,m(r().useState(!1),2)),s=a[0],u=a[1],p=(0,o.use)("model.getItems",t).getItems,d=(0,o.use)("model.save",t).saveItem,f=(0,o.use)("model").model;return r().createElement("div",null,r().createElement(i.Button,{type:"primary",onClick:function(){u(!0)}},r().createElement(c.PlusOutlined,null)," ",n("添加OAuth应用")," "),r().createElement(i.Modal,{title:n("添加OAuth应用"),visible:s,width:1e3,footer:null,onCancel:function(){return u(!1)}},r().createElement(l.C,{is:"I18nSchemaForm",schema:f,component:h,onSubmitSuccess:function(){u(!1),p()},onSubmit:d})))}},dataTableProps:function(t){return{scroll:{x:1500},columns:t.map((function(t){return"__action__"==t.key?b(b({},t),{},{width:280}):b(b({},t),{},{width:t.width||100})}))}},searchFields:["name"],required:["name","domain","redirect_uri","platform_uri"],listFields:["name","clientid","clientsecret","domain","redirect_uri","platform_uri"],is_extend:!0,itemActions:[function(t){var e=t.item,n=useI18n(),a=n.t,u=(n.i18n,(0,o.use)("model").model),p=m(r().useState(!1),2),d=p[0],f=p[1],b=(0,o.use)("model.getItems",e).getItems,v=(0,o.use)("model.save",e).saveItem;return r().createElement(s.HasPermission,{permission:"oauthApp.edit"},r().createElement(i.Button,{size:"small",onClick:function(){f(!0)}},r().createElement(c.EditOutlined,null)),r().createElement(i.Modal,{title:a("修改OAuth应用"),visible:d,width:1e3,footer:null,onCancel:function(){f(!1)}},r().createElement(l.C,{is:"I18nSchemaForm",schema:u,initialValues:e,component:h,onSubmitSuccess:function(){f(!1),b()},onSubmit:v})))},"delete"]}};var A=n(379),y=n.n(A),g=n(946);y()(g.Z,{insert:"head",singleton:!1}),g.Z.locals;const E=JSON.parse('{"扩展应用":"Extended Applications","第三方应用":"Third party applications","查看":"See","添加":"Add to","修改":"Modify","删除":"Delete","用户角色":"User Role","部门":"Department","添加第三方应用":"Add third-party applications","修改第三方应用":"Modifying third-party applications","空":"Empty","同意将AIRIOT的信息授权给":"Agree to authorize AIRIOT\'s information to","当前平台":"Current platform","确认授权":"Confirm Authorization","oauthApp应用":"OauthApp application","OAuth应用":"OAuth application","应用名称":"Apply name","OAuth2.0客户端ID":"OAuth2.0 client ID","OAuth2.0客户端密钥":"OAuth2.0 client key","客户回调接口的url的前缀":"Prefix for the URL of the customer callback interface","客户回调接口的url":"The URL of the customer callback interface","平台地址":"Platform Address","地址必须是http/https":"The address must be http/https","添加OAuth应用":"Add OAuth application","修改OAuth应用":"Modify OAuth application","二次开发":"Secondary development"}'),C={zh_Hans:{translation:JSON.parse('{"扩展应用":"扩展应用","第三方应用":"第三方应用","查看":"查看","添加":"添加","修改":"修改","删除":"删除","用户角色":"用户角色","部门":"部门","添加第三方应用":"添加第三方应用","修改第三方应用":"修改第三方应用","空":"空","同意将AIRIOT的信息授权给":"同意将AIRIOT的信息授权给","当前平台":"当前平台","确认授权":"确认授权","oauthApp应用":"oauthApp应用","OAuth应用":"OAuth应用","应用名称":"应用名称","OAuth2.0客户端ID":"OAuth2.0客户端ID","OAuth2.0客户端密钥":"OAuth2.0客户端密钥","客户回调接口的url的前缀":"客户回调接口的url的前缀","客户回调接口的url":"客户回调接口的url","平台地址":"平台地址","地址必须是http/https":"地址必须是http/https","添加OAuth应用":"添加OAuth应用","修改OAuth应用":"修改OAuth应用","二次开发":"二次开发"}')},en:{translation:E}},x={name:"airiot.oauthApp",menuItems:[{title:_r("oauthApp应用"),url:"/app/model/oauthApp/list",icon:"applications",permission:"oauthApp.view"}],models:v,locales:C,routers:{"/":[{path:"oAuth",component:function(t){var e=useI18n(),a=e.t,s=(e.i18n,m(r().useState(),2)),c=s[0],u=s[1],p=(0,o.use)("redux",(function(t){return{user:t.user}})).user,d=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),n=window.location.href.substr(window.location.href.indexOf("?")).substr(1).match(e);return null!=n?unescape(n[2]):null};return r().useEffect((function(){var t=d("name"),e=d("client_id"),n=d("redirect_uri"),a=d("platform_uri"),r=d("response_type"),o=d("return_to"),i=d("state");u({name:t,client_id:e,redirect_uri:n,response_type:r||"code",platform_uri:a,return_to:o,state:i})}),[]),r().createElement(r().Fragment,null,r().createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r().createElement("div",{style:{textAlign:"center"}},r().createElement("p",{className:"logo-box"},r().createElement(l.Icon,{className:"oauth-logo",svg:n(540),style:{width:"40px",height:"40px",background:"red"}}),r().createElement(l.Icon,{className:"oauth-logo",svg:n(256)})),r().createElement("div",{style:{marginBottom:"2rem"}},a("同意将AIRIOT的信息授权给"),a(null==c?void 0:c.name)||a("当前平台")),r().createElement(i.Button,{type:"primary",onClick:function(){var t="";for(var e in c)t+="".concat(e,"=").concat(c[e],"&");t=t.substr(0,t.lastIndexOf("&")-1);var n,a="",r=location.pathname.split("/").slice(-1)[0];r.startsWith("_p_")&&(a=r.substring(3)),n=a?"?cookie=".concat(i,"&x-request-project=").concat(a,"&").concat(t):"?cookie=".concat(i,"&").concat(t);var i=null==p?void 0:p.token;(0,o.api)({name:"core/auth/login/oauth/authorize"}).fetch(n,{}).then((function(t){console.log(t,9)}))}},a("确认授权")))))}}]}};function O(){return O=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},O.apply(this,arguments)}const w=xadminModel;function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function B(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var I=function(t){var e,n,a=t.input,l=m(r().useState({loading:!1,data:[]}),2),s=l[0],c=l[1];return r().useEffect((function(){c(B(B({},s),{},{loading:!0})),(0,o.api)({name:"core/role"}).fetch("",{}).then((function(t){var e=t.json;c({loading:!1,data:e})}))}),[]),r().createElement(i.Select,{mode:"multiple",labelInValue:!0,loading:!(null==s||!s.loading),value:null!=a&&null!==(e=a.value)&&void 0!==e&&e.length?a.value.map((function(t){return t.id})):void 0,onChange:function(t){a.onChange(null!=t&&t.length?t.map((function(e){return{id:null==e?void 0:e.key,name:t.label}})):void 0)}},null!==(n=s.data)&&void 0!==n&&n.length?s.data.map((function(t){return r().createElement(i.Select.Option,{value:null==t?void 0:t.id},null==t?void 0:t.name)})):null)},j=function(t){var e=t.children,n=t.invalid,a=t.handleSubmit,l=t.onDelete,s=t.schema,c=(t.submitting,o.app.context._t);return r().createElement("form",{className:"form-horizontal",onSubmit:a},r().createElement(i.Card,{style:{marginTop:0,border:"none"}},r().createElement("div",null,e),r().createElement(i.Row,{style:{padding:"0 15px",float:"right"}},r().createElement(i.Button,{type:"primary",onClick:a,disabled:n},c("Save"))," ","base"==s.name?r().createElement(i.Button,{type:"error",onClick:l},c("Delete")):null)))},k=function(t){var e,n,a=t.input,l=t.id,s=m(r().useState({loading:!1,data:[]}),2),c=s[0],u=s[1];r().useEffect((function(){l&&(u({loading:!0,data:[]}),(0,o.api)({name:"core/t/".concat(l,"/d")}).query({fields:["id","name"]},{}).then((function(t){var e=t.items;u({loading:!1,data:e})})))}),[l]);var p=null!=a&&null!==(e=a.value)&&void 0!==e&&e.length?null==a?void 0:a.value.map((function(t){return{value:null==t?void 0:t.id,label:null==t?void 0:t.name}})):void 0;return r().createElement(i.Select,{mode:"multiple",labelInValue:!0,allowClear:!0,loading:c.loading,onChange:function(t){a.onChange(null!=t&&t.length?t.map((function(t){return{id:null==t?void 0:t.value,name:null==t?void 0:t.label}})):[])},value:p},null!=c&&null!==(n=c.data)&&void 0!==n&&n.length?c.data.map((function(t){return r().createElement(i.Select.Option,{value:null==t?void 0:t.id},null==t?void 0:t.name)})):null)},P=function(t,n){var a=(0,o.use)("model").model,i=(0,o.use)("model.transI18n",{model:a}).modelI18n,l=n||e().cloneDeep(i),s=m(r().useState(l),2),c=s[0],u=s[1];return r().useEffect((function(){(0,o.api)({name:"core/t/schema"}).query({fields:["id","name"]},{wheres:{function:{$regex:"dataAuth"}}}).then((function(t){var n=t.items,a=e().cloneDeep(l),o=null!=n&&n.length?n.map((function(t,e){return a.properties=B(B({},a.properties),{},p({},null==t?void 0:t.id,{title:"".concat((null==t?void 0:t.title)||(null==t?void 0:t.name)||(null==t?void 0:t.id)),type:"array",items:{},user:"base",field:{component:function(e){return r().createElement(k,O({},e,{id:null==t?void 0:t.id}))}}})),a.fieldRender=B(B({},null==a?void 0:a.fieldRender),{},p({},null==t?void 0:t.id,(function(e){var n,a=e.item,r=useI18n(),o=r.t;return r.i18n,null!=a&&null!==(n=a[null==t?void 0:t.id])&&void 0!==n&&n.length?null==a?void 0:a[null==t?void 0:t.id].map((function(t){return null==t?void 0:t.name})).join(","):o("空")}))),null==t?void 0:t.id})):[];a.form=a.form.concat(o),a.listFields=a.listFields.concat(o),u(a)}))}),[null==t?void 0:t.id]),{schema:c}};const M={name:"airiot.applications",menuItems:[{title:_r("扩展应用"),url:"/app/model/applications/list",icon:"applications",permission:"app.view"}],models:{Applications:{name:"app",resource:"core/app",type:"object",icon:"user",title:_r("扩展应用"),rolePermission:[{key:"app.view",title:_r("查看")},{key:"app.add",title:_r("添加")},{key:"app.edit",title:_r("修改")},{key:"app.delete",title:_r("删除")}],properties:{name:{type:"string",title:"appKey"},email:{type:"string",format:"email"},password:{title:"appSecret",type:"string"},roles:{type:"array",title:_r("用户角色"),notInclude:!0,items:{type:"object",name:"Role",relateTo:"Role",properties:{id:{type:"string"},name:{type:"string"}}},field:{component:function(t){return r().createElement(I,t)}}}},partialSave:!0,forceGetItem:!0,permission:{view:!0,add:!0,edit:!0,delete:!0},form:["roles"],components:{DataEmpty:function(t){return r().createElement(i.Card,null,r().createElement(l.C,{is:"NoData"}))},AddButton:function(t){var e=useI18n(),n=e.t,a=(e.i18n,m(r().useState(!1),2)),u=a[0],p=a[1],d=(0,o.use)("model.getItems").getItems,f=(0,o.use)("auth.user").user,b=P(f).schema,h=(0,o.use)("model.save",t).saveItem;return r().createElement(s.HasPermission,{permission:"app.add"},r().createElement(i.Button,{type:"primary",onClick:function(){p(!0)}},r().createElement(c.PlusOutlined,null)," ",n("添加扩展应用")),r().createElement(i.Modal,{title:n("添加扩展应用"),visible:u,width:700,footer:null,onCancel:function(){return p(!1)}},r().createElement(l.C,{is:"I18nSchemaForm",schema:b,component:j,onSubmitSuccess:function(){p(!1),d()},onSubmit:h})))}},searchFields:["name"],listFields:["name","email","roles"],is_extend:!0,itemActions:[function(t){var e=t.item,n=useI18n(),a=n.t,u=(n.i18n,(0,o.use)("model").model),p=m(r().useState(!1),2),d=p[0],f=p[1],b=(0,o.use)("model.getItems",e).getItems,h=(0,o.use)("model.save",e).saveItem;return r().createElement(s.HasPermission,{permission:"app.edit"},r().createElement(i.Button,{size:"small",onClick:function(){f(!0)}},r().createElement(c.EditOutlined,null)),r().createElement(i.Modal,{title:a("修改扩展应用"),visible:d,width:700,footer:null,onCancel:function(){f(!1)}},r().createElement(l.C,{is:"I18nSchemaForm",schema:u,initialValues:e,component:j,onSubmitSuccess:function(){f(!1),b()},onSubmit:h})))},"delete"]}}};var D=n(316);y()(D.Z,{insert:"head",singleton:!1}),D.Z.locals;const R={name:"airiot.secondary",menuItems:[{title:_r("二次开发"),url:"/app/model/secondary/list",icon:"二次开发",permission:"secondary.view"}],models:{Secondary:{name:"secondary",type:"object",icon:"二次开发",title:_r("二次开发"),rolePermission:[{key:"secondary.view",title:_r("查看")}],properties:{},permission:{view:!0},components:{ListPage:function(t){var e,n=(0,o.use)("auth.user").user,a=o.app.get("models").Applications,s=(P(n,a).schema,useI18n()),c=s.t,u=(s.i18n,["扩展应用","oauthApp应用"]),p=o.app.get("menuItems"),d=m(r().useState(),2),f=d[0],b=d[1],h=p.filter((function(t){return!!u.find((function(e){return e===t.title}))})),v=function(t){var e=(0,o.use)("model").model.components.AddButton;return r().createElement(e,null)},A=r().createElement(r().Fragment,null,r().createElement("div",{key:"model-list-subnav",style:{display:"flex",justifyContent:"space-between",marginBottom:".5rem"}},r().createElement(l.C,{is:"Model.Pagination"}),r().createElement(l.C,{is:"Model.ListSubMenu"})),r().createElement(l.C,{is:"Model.DataTable"}),r().createElement("div",{key:"model-list-downnav",style:{display:"flex",justifyContent:"space-between",marginTop:".5rem"}},r().createElement(l.C,{is:"Model.ActionBar"}),r().createElement(l.C,{is:"Model.Pagination"}))),y=n.permissions,g=null!=n&&n.isSuper||"admin"==(null==n?void 0:n.id)?h.map((function(t){return{label:c(t.title),key:c(t.title),children:r().createElement(w.Model,{name:c(t.title)===c("扩展应用")?"Applications":"OauthApp"},A)}})):h.filter((function(t){return"扩展应用"===t.title?y.includes("app.view"):"oauthApp应用"!==t.title||y.includes("oauthApp.view")})).map((function(t){return{label:c(t.title),key:c(t.title),children:r().createElement(w.Model,{name:c(t.title)===c("扩展应用")?"Applications":"OauthApp"},A)}}));return r().useEffect((function(){1===g.length&&b(g[0].key)}),[g]),r().createElement(i.Tabs,{className:"tabs-secondary",activeKey:f,onChange:function(t){g.length>1&&b(t)},destroyInactiveTabPane:!0,tabBarExtraContent:r().createElement(w.Model,{name:{扩展应用:"Applications",oauthApp应用:"OauthApp"}[f||(null===(e=h[0])||void 0===e?void 0:e.title)]},r().createElement(w.ModelBlock,{name:"model.list.nav"}),r().createElement(v,null)),items:g})}}}}};o.app.use(x).use(M).use(R)})()})();
//# sourceMappingURL=front.js.map