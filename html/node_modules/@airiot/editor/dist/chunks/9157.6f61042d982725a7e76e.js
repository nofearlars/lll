(this.webpackChunk_airiot_editor=this.webpackChunk_airiot_editor||[]).push([[9157],{6211:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var r=n(7363),a=n.n(r),i=n(1821),l=n(2611),o=n.n(l);const u=function(e){var t=function(e){var t=e;if(e&&e.indexOf("prefix:")>-1){var n=e.split("prefix:");t=a().createElement("span",null,n[0]," ",a().createElement("span",{style:{color:"#ccc",fontSize:"0.7em"}},"( ",n[1]," )"))}return t};return a().createElement(i.TreeSelect,{allowClear:!0,style:{minWidth:200},value:e.value?{value:e.value}:void 0,placeholder:"请选择参数",onChange:function(t){e.onChange(t&&t.value)},labelInValue:!0,showSearch:!0,virtual:!1,filterOption:function(e,t){return t.props.key.toLowerCase().indexOf(e.toLowerCase())>=0}},function e(n,r){return Object.keys(n).map((function(l){var u=n[l];return o().isPlainObject(u)?a().createElement(i.TreeSelect.TreeNode,{key:l+r,value:l,title:a().createElement("span",{style:{color:"#333",fontSize:"0.9em"}},t(l)),isLeaf:!1,selectable:!1},e(u,l+r)):o().isString(u)?a().createElement(i.TreeSelect.TreeNode,{key:l+r,value:u,title:t(l),isLeaf:!0}):null})).filter(Boolean)}(e.data,""))}},5485:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>k});var r=n(2982),a=n(1002),i=n(5671),l=n(3144),o=n(7326),u=n(9340),s=n(2963),c=n(1120),f=n(4942),d=n(7363),p=n.n(d),v=n(5697),m=n.n(v),h=n(2611),y=n.n(h),b=n(1821),g=m().string,C=m().array,A=m().func,N={value:g,options:C.isRequired,onChange:A.isRequired},Z=function(e){var t=e.value,n=e.options,r=e.onChange;return p().createElement("div",{style:{display:"inline",fontWeight:"bold"}},p().createElement(b.Select,{style:{width:150},allowClear:!1,value:t||void 0,placeholder:_t1("请选择逻辑..."),onChange:r,dropdownMatchSelectWidth:!1,showSearch:!0},n.map((function(e){return p().createElement(b.Select.Option,{value:e.signature},_t1(e.label))}))))};Z.propTypes=N,Z.defaultProps={value:null};const O=Z;var E={ANY:n(5485),INPUT:n(2186),ACCESSOR:n(6211),HIGHER_ORDER:n(8667)},S=[{type:"Accessor",signature:"var",label:_r("参数"),fields:[E.ACCESSOR],notAvailableUnder:["master"],fieldCount:{min:1,max:1}},{type:"Value Field",signature:"value",label:_r("数值"),fields:[E.INPUT],notAvailableUnder:["master","or","and"],fieldCount:{min:1,max:1}},{type:"Statement",signature:"or",label:_r("或者"),fields:[E.ANY,E.ANY],notAvailableUnder:[],fieldCount:{min:2,max:10}},{type:"Statement",signature:"and",label:_r("并且"),fields:[E.ANY,E.ANY],notAvailableUnder:[],fieldCount:{min:2,max:10}},{type:"Logical",signature:"===",label:_r("恒等于"),fields:[E.ANY,E.ANY],notAvailableUnder:[],fieldCount:{min:2,max:2}},{type:"Logical",signature:"==",label:_r("等于"),fields:[E.ANY,E.ANY],notAvailableUnder:[],fieldCount:{min:2,max:2}},{type:"Logical",signature:"!=",label:_r("不等于"),fields:[E.ANY,E.ANY],notAvailableUnder:[],fieldCount:{min:2,max:2}},{type:"Logical",signature:"!==",label:_r("恒不等于"),fields:[E.ANY,E.ANY],notAvailableUnder:[],fieldCount:{min:2,max:2}},{type:"Logical",signature:"!",label:_r("取反"),fields:[E.ANY],notAvailableUnder:[],fieldCount:{min:1,max:1}},{type:"Numeric",signature:"<=",label:_r("小于等于"),fields:[E.ANY,E.ANY],notAvailableUnder:[],fieldCount:{min:2,max:2}},{type:"Numeric",signature:">=",label:_r("大于等于"),fields:[E.ANY,E.ANY],notAvailableUnder:[],fieldCount:{min:2,max:2}},{type:"Numeric",signature:"<",label:_r("小于"),fields:[E.ANY,E.ANY],notAvailableUnder:[],fieldCount:{min:2,max:2}},{type:"Numeric",signature:">",label:_r("大于"),fields:[E.ANY,E.ANY],notAvailableUnder:[],fieldCount:{min:2,max:2}},{type:"Numeric",signature:"&",label:_r("逻辑与"),fields:[E.ANY,E.ANY],notAvailableUnder:[],fieldCount:{min:2,max:2}},{type:"Numeric",signature:"|",label:_r("逻辑或"),fields:[E.ANY,E.ANY],notAvailableUnder:[],fieldCount:{min:2,max:2}},{type:"Arithmetic",signature:"+",label:"+",fields:[E.ANY,E.ANY],notAvailableUnder:[],fieldCount:{min:1,max:100}},{type:"Arithmetic",signature:"-",label:"-",fields:[E.ANY,E.ANY],notAvailableUnder:[],fieldCount:{min:1,max:2}},{type:"Arithmetic",signature:"*",label:"*",fields:[E.ANY,E.ANY],notAvailableUnder:[],fieldCount:{min:2,max:100}},{type:"Arithmetic",signature:"/",label:"/",fields:[E.ANY,E.ANY],notAvailableUnder:[],fieldCount:{min:2,max:2}},{type:"Arithmetic",signature:"%",label:"%",fields:[E.ANY,E.ANY],notAvailableUnder:[],fieldCount:{min:2,max:2}}],Y=n(5907);var _=m().string,x=m().any,R=m().object,w={onChange:m().func.isRequired,parent:_.isRequired,value:x,data:R},j=function(e){(0,u.Z)(v,e);var t,n,d=(t=v,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var a=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,s.Z)(this,e)});function v(e){var t;return(0,i.Z)(this,v),t=d.call(this,e),(0,f.Z)((0,o.Z)(t),"onInitializeState",(function(e){var t,n=e.value,i="value",l=[];if(n&&"object"===(0,a.Z)(n)&&Object.keys(n).length>0){var o=Object.keys(n)[0];i=S.some((function(e){return e.signature===o||e.label===o}))?o:"value"}else"object"===(0,a.Z)(n)&&(i="");if((t=S.find((function(e){return e.signature===i||e.label===i})))&&(l=t.fields),n&&"object"===(0,a.Z)(n)&&Object.keys(n).length>0&&t.fieldCount.min<=l.length&&t.fieldCount.max>l.length&&n[i].length>l.length)for(var u=n[i].length-l.length,s=1;s<=u;s+=1)l=[].concat((0,r.Z)(l),[E.ANY]);return{field:i,value:n,selectedOperator:t,fields:l}})),(0,f.Z)((0,o.Z)(t),"onFieldChange",(function(e){var n={};"value"===e?n="":n[e]=[],t.props.onChange(n)})),(0,f.Z)((0,o.Z)(t),"onChildValueChange",(function(e,n){var r=t.state.field,a=t.state.value;"value"===r?a=e:a[r][n]=e,t.props.onChange(a)})),(0,f.Z)((0,o.Z)(t),"getAvailableOperators",(function(){var e=t.props,n=e.parent,r=e.data,a=S.filter((function(e){return!e.notAvailableUnder.some((function(e){return e===n}))}));return 0===Object.keys(r).length&&(a=a.filter((function(e){return"var"!==e.signature}))),a})),(0,f.Z)((0,o.Z)(t),"addField",(function(){t.setState({fields:[].concat((0,r.Z)(t.state.fields),[E.ANY])})})),(0,f.Z)((0,o.Z)(t),"removeField",(function(e){var n=t.state,r=n.value,a=n.field,i=n.fields;i.splice(e,1),r[a].splice(e,1),t.setState({fields:i,value:r},(function(){return t.props.onChange(r)}))})),(0,f.Z)((0,o.Z)(t),"renderChild",(function(e,n){var r,a=t.state,i=a.field,l=a.value,o=a.selectedOperator,u=i,s=l,c=a.fields.length>o.fieldCount.min;r="value"!==u?s[u][n]:s;var f=e.default||e;return p().createElement("div",{style:{position:"relative"},key:"".concat(u,".").concat(n)},c&&p().createElement(Y.Icon,{type:"delete",style:{position:"absolute",left:-20,top:12},onClick:function(){return t.removeField(n)}}),p().createElement(f,{parent:u,value:r,onChange:function(e){return t.onChildValueChange(e,n)},data:t.props.data}))})),t.state=t.onInitializeState(e),t}return(0,l.Z)(v,[{key:"componentWillReceiveProps",value:function(e){y().isEqual(this.props.value,e.value)||this.setState(this.onInitializeState(e))}},{key:"render",value:function(){var e=this,t=this.state,n=t.field,r=t.fields,a=t.selectedOperator,i=!1;return a&&(i=r.length<a.fieldCount.max),p().createElement("div",{className:"BlockWrap"},p().createElement(O,{value:n,options:this.getAvailableOperators(),onChange:this.onFieldChange}),i&&p().createElement(b.Button,{type:"button",className:"ChildrenControlButton",style:{marginLeft:5,padding:"0 10px"},onClick:function(){return e.addField()}},"+"),a&&p().createElement("div",{style:{marginLeft:25,marginBottom:5}},r.map(this.renderChild)))}}]),v}(p().Component);j.propTypes=w,j.defaultProps={value:{},data:{}};const k=j},8667:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>A});var r=n(5671),a=n(3144),i=n(7326),l=n(9340),o=n(2963),u=n(1120),s=n(4942),c=n(7363),f=n.n(c),d=n(5697),p=n.n(d),v=n(2611),m=n.n(v),h=n(5485);var y=p().any,b=p().func,g={data:p().object,parent:p().string.isRequired,value:y,onChange:b.isRequired},C=function(e){(0,l.Z)(d,e);var t,n,c=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.Z)(t);if(n){var a=(0,u.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,o.Z)(this,e)});function d(e){var t;return(0,r.Z)(this,d),t=c.call(this,e),(0,s.Z)((0,i.Z)(t),"onChange",(function(e){var n={"=>":[e]};t.setState({value:n},(function(){return t.props.onChange(n)}))})),t.state={value:e.value},t}return(0,a.Z)(d,[{key:"componentWillReceiveProps",value:function(e){m().isEqual(this.props.value,e.value)||this.setState({value:e.value})}},{key:"render",value:function(){var e=this.props,t=e.parent,n=e.data,r=this.state.value,a=r["=>"]?r["=>"][0]:{};return f().createElement("div",{className:"HiWrapper"},f().createElement("div",{className:"FatArrow"},"=>"),f().createElement("div",{className:"Child"},f().createElement(h.default,{onChange:this.onChange,parent:t,data:n,value:a})))}}]),d}(f().Component);C.propTypes=g,C.defaultProps={data:{},value:""};const A=C},2186:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v});var r=n(885),a=n(7363),i=n.n(a),l=n(5697),o=n.n(l),u=n(1821),s=n(2611),c=n.n(s),f=["number","text"],d=["数字","文本"],p=function(e){return function(e){return"number"==typeof e}(e)||null==e||null==e?"number":"text"};o().any,o().string,o().func.isRequired,f[0];const v=function(e){var t=e.name,n=e.value,a=void 0===n?[]:n,l=e.onChange,o=i().useState(p(a)),s=(0,r.Z)(o,2),v=s[0],m=s[1];i().useEffect((function(){var e=p(a);e!=v&&m(e)}),[JSON.stringify(a)]);var h={style:{width:200},name:t,value:a,onChange:function(e){var t,n,r=null==e||null===(t=e.target)||void 0===t?void 0:t.value;r=c().isObject(e)?null==e||null===(n=e.target)||void 0===n?void 0:n.value:e||0,"number"===v&&(r=isNaN(parseFloat(r))?0:parseFloat(r)),l(r)}};return i().createElement("div",{style:{display:"flex"}},i().createElement("div",{style:{}},i().createElement(u.Select,{style:{width:100},allowClear:!1,value:v||void 0,placeholder:"请选择...",onChange:function(e){a="number"===e?a&&parseFloat(a):a.toString(),m(e),l(a)}},f.map((function(e,t){return i().createElement(u.Select.Option,{value:e},d[t]||e)})))),i().createElement("div",{style:{marginLeft:".5rem"}},"number"==v?i().createElement(u.InputNumber,h):i().createElement(u.Input,h)))}},9157:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>O});var r=n(1002),a=n(5671),i=n(3144),l=n(7326),o=n(9340),u=n(2963),s=n(1120),c=n(4942),f=n(7363),d=n.n(f),p=n(5697),v=n.n(p),m=n(2611),h=n.n(m),y=n(5485);var b=v().func,g=v().object,C=v().string,A=v().oneOfType,N={onChange:b.isRequired,value:g,data:A([g,C])},Z=function(e){(0,o.Z)(p,e);var t,n,f=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.Z)(t);if(n){var a=(0,s.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,u.Z)(this,e)});function p(e){var t;return(0,a.Z)(this,p),t=f.call(this,e),(0,c.Z)((0,l.Z)(t),"onChange",(function(e){t.setState({value:e},(function(){return t.props.onChange(e)}))})),(0,c.Z)((0,l.Z)(t),"parseData",(function(e){if("object"!==(0,r.Z)(e))try{return JSON.parse(e)}catch(e){return{}}return e})),t.state={value:e.value},t}return(0,i.Z)(p,[{key:"componentWillReceiveProps",value:function(e){h().isEqual(this.props.value,e.value)||this.setState({value:e.value})}},{key:"render",value:function(){return d().createElement("div",{className:"LogicWrapper"},d().createElement(y.default,{parent:"master",data:this.parseData(this.props.data),onChange:this.onChange,value:this.state.value}))}}]),p}(d().Component);Z.propTypes=N,Z.defaultProps={value:{},data:{}};const O=Z},2703:(e,t,n)=>{"use strict";var r=n(414);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,l){if(l!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},5697:(e,t,n)=>{e.exports=n(2703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},7326:(e,t,n)=>{"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:()=>r})},5671:(e,t,n)=>{"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:()=>r})},3144:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(9142);function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(0,r.Z)(a.key),a)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},1120:(e,t,n)=>{"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{Z:()=>r})},9340:(e,t,n)=>{"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}n.d(t,{Z:()=>a})},2963:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(1002),a=n(7326);function i(e,t){if(t&&("object"===(0,r.Z)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,a.Z)(e)}},2982:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(907),a=n(181);function i(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=9157.6f61042d982725a7e76e.js.map