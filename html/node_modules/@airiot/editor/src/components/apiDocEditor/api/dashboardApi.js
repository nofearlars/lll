import { api, app } from 'xadmin'
//////

/**
 * [画面]查询画面变量
 *
 * ### 使用示例
 *
 * ```
 * const DVariable = getDVariable()
 * ```
 * @returns {Object} 画面变量数据
 */
const getDVariable = async function () {
  const { customVar } = arguments[0]
  return customVar
}

/**
 * [画面]添加/修改画面变量
 *
 * ### 使用示例
 *
 * ```
 * addEditDVariable('aaa', { bbb: 'ccc' })
 * ```
 * @param {String} key - 画面变量key
 * @param {Any} value - 画面变量值
 */
function addEditDVariable (key, value) {
  const { customVar, setCustomVar } = arguments[2]
  setCustomVar({ ...customVar, [key]: value })
}

/**
 * [画面]删除画面变量
 *
 * ### 使用示例
 *
 * ```
 * delDVariable('aaa')
 * ```
 * @param {String} key - 画面变量key
 */
function delDVariable (key) {
  const { customVar, setCustomVar } = arguments[1]
  let result = customVar
  delete result[key]
  setCustomVar(result)
}

//////
/**
 * []修改画面组件属性
 *
 * ### 使用示例
 *
 * ```
 * dashboardUpdateCell('_E390BDAD', { content: '777' })
 * ```
 * @param {String} key - 画面组件key
 * @param {Object} params - 属性
 */
function dashboardUpdateCell (key, params) {
  const { setCellParams } = arguments[2]
  setCellParams(key, 'base', params)
}

//////

export default {
  getDVariable,
  addEditDVariable,
  delDVariable,
  dashboardUpdateCell
}
