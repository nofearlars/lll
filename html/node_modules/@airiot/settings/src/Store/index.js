import _ from 'lodash'
import React from 'react'
import { use } from 'xadmin'
import {
    RecoilRoot,
    atom,
    atomFamily,
    selector,
    useRecoilValue,
    useSetRecoilState,
    useRecoilSnapshot,
} from 'recoil'


const store = atom({ key: 'setting.store', default: {} })
const InitializeData = ({ data, mode }) => {
    const setStore = useSetRecoilState(store)

    React.useEffect(() => {
        try {
            setStore(data)
        } catch (error) {
            console.log(error)
        }
    }, [])
    return null
}
const Store = ({ id, data, children, mode = false }) => {
    return (
        <RecoilRoot>
            <InitializeData data={data} />
            {children}
        </RecoilRoot>
    )
}

export default Store
export {
    store
}