import React, { useState, useEffect } from 'react'
import { Modal, Tag, Menu, Row, Input, Statistic, Avatar, Button, Col, Steps, Affix, TreeSelect, Layout } from 'antd'
import { StoreWrap, app, Block, api, config, use } from 'xadmin'
import { C, Page, Icon } from 'xadmin-ui'
import _ from 'lodash'
import RouterEditTree from './RouterEditTree'

const RouterPage = (props) => {
  const { settings, saveSettings } = use('settings')
  const [value, setValue] = useState(settings?.routers || [])
  const { t: _t1 } = useI18n()
  const onChange = routers => {
    setValue(routers)
  }

  const onSave = () => {
    saveSettings({ ...settings, routers: value })
  }

  return (
    <Page
      title={<span>{_t1('路由配置页面')}</span>}
      actions={<Button type="primary" onClick={onSave}>{_t1('保存')}</Button>}
    >
      <RouterEditTree input={{ value, onChange }} settings={settings} />
    </Page >
  )
}


export default RouterPage